{"version":3,"file":"20240117-outreach-2572c606d10e1d347776.js","mappings":"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","sources":["webpack://care-ops-frontend/./src/js/base/routerapp.js","webpack://care-ops-frontend/./src/js/behaviors/iframe-form.js","webpack://care-ops-frontend/./src/js/outreach/entities/index.js","webpack://care-ops-frontend/./src/js/outreach/views/verify_views.js","webpack://care-ops-frontend/./src/js/outreach/views/dialog_views.js","webpack://care-ops-frontend/./src/js/outreach/apps/verify_app.js","webpack://care-ops-frontend/./src/js/outreach/views/form_views.js","webpack://care-ops-frontend/./src/js/outreach/views/error_views.js","webpack://care-ops-frontend/./src/js/outreach/apps/form_app.js","webpack://care-ops-frontend/./src/js/outreach/views/opt-in_views.js","webpack://care-ops-frontend/./src/js/outreach/apps/opt-in_app.js","webpack://care-ops-frontend/./src/js/outreach/apps/error_app.js","webpack://care-ops-frontend/./src/js/outreach/index.js","webpack://care-ops-frontend/./src/js/utils/formatting/key-codes.js","webpack://care-ops-frontend/./node_modules/backbone.eventrouter/dist/backbone.eventrouter.js"],"sourcesContent":["import { extend, isEqual, isFunction, partial, reduce, rest, result, reject, uniqueId, union } from 'underscore';\nimport Backbone from 'backbone';\nimport Radio from 'backbone.radio';\nimport EventRouter from 'backbone.eventrouter';\nimport App from './app';\n\n\n// TODO: Move these modifications to backbone.eventrouter\nconst AppEventRouter = EventRouter.extend({\n  initialize() {\n    this.cid = uniqueId('bber');\n  },\n  route() {\n    const route = EventRouter.prototype.route.apply(this, arguments);\n    Backbone.history.handlers[0].cid = this.cid;\n    return route;\n  },\n  destroy() {\n    Backbone.history.handlers = reject(Backbone.history.handlers, { cid: this.cid });\n    this.stopListening();\n    this.trigger('destroy', this);\n    return this;\n  },\n  _isTriggeredFromRoute() {\n    const currentRoute = this._getCurrentRouteTrigger();\n\n    if (arguments.length !== currentRoute.length) {\n      return false;\n    }\n    // NOTE: fixes `this.currentRoute` error in `Backbone.EventRouter`\n    return (arguments.length === union(arguments, currentRoute).length);\n  },\n});\n\nexport default App.extend({\n  // Set in router apps for nav selection\n  routerAppName: '',\n\n  constructor: function() {\n    this.initRouter();\n\n    // if the app does not handle a given route, stop\n    this.listenTo(this.router, 'noMatch', this.onNoMatch);\n\n    this.on('before:stop', this.stopCurrent);\n\n    App.apply(this, arguments);\n  },\n\n  initRouter() {\n    this._routes = result(this, 'eventRoutes');\n\n    const routeTriggers = this.getRouteTriggers();\n\n    this.router = new AppEventRouter({ routeTriggers });\n\n    this.on('before:destroy', () => this.router.destroy());\n\n    this.bindRouteEvents();\n  },\n\n  onNoMatch() {\n    this.stop();\n    this._currentRoute = null;\n  },\n\n  // For each route in the hash creates a routeTriggers hash\n  getRouteTriggers() {\n    const currentWorkspace = Radio.request('bootstrap', 'currentWorkspace');\n    return reduce(this._routes, function(routeTriggers, { route, root }, eventName) {\n      if (root) {\n        routeTriggers[eventName] = route;\n        return routeTriggers;\n      }\n\n      const workspace = currentWorkspace.get('slug');\n      routeTriggers[eventName] = route ? `${ workspace }/${ route }` : workspace;\n\n      return routeTriggers;\n    }, {});\n  },\n\n  getEventActions(eventRoutes, routeAction) {\n    return reduce(eventRoutes, function(eventActions, { action }, eventName) {\n      eventActions[eventName] = partial(routeAction, eventName, action);\n\n      return eventActions;\n    }, {});\n  },\n\n  // handle route events\n  // accepts a hash of 'some:event' : 'actionFunction'\n  // listens to the router channel and calls the appropriate\n  // action via the routeAction handler\n  bindRouteEvents() {\n    const eventActions = this.getEventActions(this._routes, this.routeAction);\n\n    this.listenTo(this.router.getChannel(), eventActions);\n  },\n\n  // applies the route's action\n  // starts this routerapp if necessary\n  // triggers before and after events\n  routeAction(event, action, ...args) {\n    if (!this.isRunning()) {\n      this.start();\n    }\n\n    this.triggerMethod('before:appRoute', event, ...args);\n\n    Radio.request('nav', 'select', this.routerAppName, event, args);\n    Radio.request('sidebar', 'close');\n\n    this.setLatestList(event, args);\n\n    this._currentRoute = {\n      event,\n      eventArgs: args,\n    };\n\n    if (!isFunction(action)) {\n      action = this[action];\n    }\n\n    action.apply(this, args);\n\n    this.triggerMethod('appRoute', event, ...args);\n  },\n\n  setLatestList(event, eventArgs) {\n    if (this._routes[event].isList) {\n      Radio.request('history', 'set:latestList', event, eventArgs);\n      return;\n    }\n\n    if (!this._routes[event].clearLatestList) return;\n\n    Radio.request('history', 'set:latestList', false);\n  },\n\n  // handler that ensures one running app\n  startCurrent(appName, options) {\n    this.stopCurrent();\n\n    this._currentAppName = appName;\n    this._currentAppOptions = options;\n\n    options = extend({\n      currentRoute: this._currentRoute,\n    }, options);\n\n    const app = this.startChildApp(appName, options);\n\n    this._current = app;\n\n    return app;\n  },\n\n  startRoute(appName, options) {\n    if (this.isCurrent(appName, options)) {\n      return this.getCurrent().startRoute(this.getCurrentRoute());\n    }\n    return this.startCurrent(appName, options);\n  },\n\n  getCurrent() {\n    return this._current;\n  },\n\n  isCurrent(appName, options) {\n    return (appName === this._currentAppName)\n      && (isEqual(options, this._currentAppOptions));\n  },\n\n  getCurrentRoute() {\n    return this._currentRoute;\n  },\n\n  stopCurrent() {\n    if (!this._current) return;\n\n    this._current.stop();\n    this._current = null;\n    this._currentAppName = null;\n    this._currentAppOptions = null;\n  },\n\n  // takes an event and translates data into the applicable url fragment\n  translateEvent(event) {\n    const route = this.router.getDefaultRoute(event);\n\n    return this.router.translateRoute(route, rest(arguments));\n  },\n\n  // takes an event and changes the URL without triggering or adding to the history\n  replaceRoute() {\n    const url = this.translateEvent.apply(this, arguments);\n\n    this.replaceUrl(url);\n  },\n\n  navigateRoute() {\n    const url = this.translateEvent.apply(this, arguments);\n\n    Backbone.history.navigate(url, { trigger: false });\n  },\n\n  replaceUrl(url) {\n    Backbone.history.navigate(url, { trigger: false, replace: true });\n  },\n});\n","import $ from 'jquery';\nimport { keys } from 'underscore';\nimport Radio from 'backbone.radio';\nimport { Behavior } from 'marionette';\n\nexport default Behavior.extend({\n  ui: {\n    iframe: 'iframe',\n  },\n  onInitialize() {\n    this.channel = Radio.channel(`form${ this.view.model.id }`);\n  },\n  replies: {\n    send(message, args = {}) {\n      const iframeWindow = this.ui.iframe[0].contentWindow;\n      iframeWindow.postMessage({ message, args }, window.origin);\n    },\n    focus() {\n      Radio.trigger('user-activity', 'iframe:focus', this.ui.iframe[0]);\n    },\n  },\n  onAttach() {\n    this.channel.reply(this.replies, this);\n\n    $(window).on('message', ({ originalEvent }) => {\n      const { data, origin } = originalEvent;\n      /* istanbul ignore next: security check */\n      if (origin !== window.origin || !data || !data.message) return;\n\n      this.channel.request(data.message, data.args);\n    });\n  },\n  onBeforeDetach() {\n    $(window).off('message');\n    this.channel.stopReplying(keys(this.replies).join(' '));\n  },\n});\n","import Radio from 'backbone.radio';\nimport fetcher, { handleJSON } from 'js/base/fetch';\nimport { v4 as uuid } from 'uuid';\n\nfunction getRelationship(id, type) {\n  return { data: { type, id } };\n}\n\nlet token;\n\nRadio.reply('auth', {\n  setToken(tokenString) {\n    token = tokenString;\n  },\n  getToken() {\n    return token;\n  },\n});\n\nfunction getPatientInfo({ actionId }) {\n  return fetcher(`/api/outreach?filter[action]=${ actionId }`, {\n    method: 'GET',\n  })\n    .then(handleJSON)\n    .then(({ data }) => {\n      return {\n        outreachId: data.id,\n        patientPhoneEnd: data.attributes.phone_end,\n      };\n    });\n}\n\nfunction createVerificationCode({ actionId }) {\n  return fetcher('/api/outreach/otp', {\n    method: 'POST',\n    data: JSON.stringify({\n      data: {\n        type: 'patient-actions',\n        id: actionId,\n      },\n    }),\n  })\n    .then(handleJSON);\n}\n\nfunction validateVerificationCode({ outreachId, code }) {\n  const data = {\n    id: outreachId,\n    type: 'outreach',\n    attributes: { code },\n  };\n\n  return fetcher('/api/outreach/auth', {\n    method: 'POST',\n    data: JSON.stringify({ data }),\n  })\n    .then(handleJSON)\n    .then(({ data: { attributes } }) => {\n      Radio.request('auth', 'setToken', attributes.token);\n      return Promise.resolve(attributes.token);\n    });\n}\n\nfunction optInPostRequest(attributes) {\n  const data = {\n    type: 'patients',\n    attributes,\n  };\n\n  return fetcher('/api/outreach', {\n    method: 'POST',\n    data: JSON.stringify({ data }),\n  })\n    .then(handleJSON);\n}\n\nfunction postResponse({ formId, actionId, response }) {\n  const data = {\n    type: 'form-responses',\n    id: uuid(),\n    attributes: { response },\n    relationships: {\n      action: getRelationship(actionId, 'patient-actions'),\n      form: getRelationship(formId, 'forms'),\n    },\n  };\n\n  return fetcher(`/api/actions/${ actionId }/relationships/form-responses`, {\n    method: 'POST',\n    data: JSON.stringify({ data }),\n  })\n    .then(handleJSON);\n}\n\nexport {\n  getPatientInfo,\n  postResponse,\n  optInPostRequest,\n  createVerificationCode,\n  validateVerificationCode,\n};\n","import hbs from 'handlebars-inline-precompile';\nimport { View } from 'marionette';\n\nimport keyCodes from 'js/utils/formatting/key-codes';\n\nimport 'scss/modules/buttons.scss';\nimport 'scss/modules/forms.scss';\n\nimport './verify.scss';\n\nconst { BACKSPACE_KEY } = keyCodes;\n\nconst RequestCodeView = View.extend({\n  ui: {\n    submit: '.js-submit',\n  },\n  triggers: {\n    'click @ui.submit': 'click:submit',\n  },\n  template: hbs`\n    <div class=\"dialog__icon--blue\">{{fat \"user-lock\"}}</div>\n    <h2 class=\"verify__heading-text\">Request a verification code to view this health resource.</h2>\n    <p class=\"verify__info-text\">We’ll send a text message with a verification code to the phone number XXX-XXX-{{ phoneEnd }}.</p>\n    <button class=\"verify__submit button--green w-100 js-submit\">Send Verification Code</button>\n  `,\n  templateContext() {\n    return {\n      phoneEnd: this.getOption('patientPhoneEnd'),\n    };\n  },\n  onClickSubmit() {\n    this.ui.submit.prop('disabled', true);\n  },\n});\n\nconst VerifyCodeView = View.extend({\n  ui: {\n    submit: '.js-submit',\n    resend: '.js-resend',\n    input: '.js-input',\n  },\n  triggers: {\n    'click @ui.submit': 'click:submit',\n    'click @ui.resend': 'click:resend',\n  },\n  events: {\n    'input @ui.input': 'watchInput',\n    'keydown @ui.input': 'watchKeydown',\n  },\n  template: hbs`\n    <div class=\"dialog__icon--blue\">{{fat \"user-lock\"}}</div>\n    <h2 class=\"verify__heading-text\">Enter your verification code.</h2>\n    <p class=\"verify__info-text\">We sent a text message with a verification code to the phone number XXX-XXX-{{ phoneEnd }}.</p>\n    <div class=\"verify__code-fields\">\n      <input class=\"input-primary verify__code-input js-input{{#if hasInvalidCodeError}} has-error{{/if}}\" inputmode=\"numeric\" />\n      <input class=\"input-primary verify__code-input js-input{{#if hasInvalidCodeError}} has-error{{/if}}\" inputmode=\"numeric\" />\n      <input class=\"input-primary verify__code-input js-input{{#if hasInvalidCodeError}} has-error{{/if}}\" inputmode=\"numeric\" />\n      <input class=\"input-primary verify__code-input js-input{{#if hasInvalidCodeError}} has-error{{/if}}\" inputmode=\"numeric\" />\n    </div>\n    {{#if hasInvalidCodeError}}\n      <p class=\"verify__error-text\">Incorrect verification code. Please try again.</p>\n    {{/if}}\n    <button class=\"verify__submit button--green w-100 js-submit\" disabled>Confirm Code</button>\n    <div class=\"verify__heading-text u-text-link js-resend\">Send a new code</div>\n  `,\n  templateContext() {\n    return {\n      phoneEnd: this.getOption('patientPhoneEnd'),\n      hasInvalidCodeError: this.getOption('hasInvalidCodeError'),\n    };\n  },\n  watchInput(event) {\n    const value = String(event.target.value).replace(/\\s/g, '');\n    const first = value.charAt(0);\n    const rest = value.substring(1);\n\n    event.target.value = first;\n\n    const inputElements = this.ui.input;\n    const index = inputElements.index(event.target);\n\n    const isLastInputEl = index === inputElements.length - 1;\n    const didInsertContent = first !== undefined && value.length;\n\n    const code = inputElements.map((i, el) => el.value).get().join('');\n\n    this.disableSubmitButton(code.length !== inputElements.length);\n\n    if (didInsertContent && !isLastInputEl) {\n      const currentElement = inputElements.eq(index + 1);\n\n      currentElement.focus();\n      currentElement.val(rest);\n      currentElement.trigger('input');\n    }\n  },\n  watchKeydown(event) {\n    const inputElements = this.ui.input;\n    const index = inputElements.index(event.target);\n\n    if (event.keyCode === BACKSPACE_KEY && event.target.value === '') {\n      inputElements.eq(Math.max(0, index - 1)).focus();\n    }\n  },\n  disableSubmitButton(shouldBeDisabled) {\n    this.ui.submit.prop('disabled', shouldBeDisabled);\n  },\n  onClickSubmit() {\n    const inputElements = this.ui.input;\n    const code = inputElements.map((i, el) => el.value).get().join('');\n\n    this.triggerMethod('submit:code', code);\n\n    this.disableSubmitButton(true);\n  },\n});\n\nconst AlreadySubmittedView = View.extend({\n  template: hbs`\n    <div class=\"dialog__icon--success\">{{fat \"thumbs-up\"}}</div>\n    <div>This form has already been submitted.</div>\n  `,\n});\n\nconst NotAvailableView = View.extend({\n  template: hbs`\n    <div class=\"dialog__icon--error\">{{fat \"octagon-exclamation\"}}</div>\n    <div>This form is no longer shared. Nothing else to do here.</div>\n  `,\n});\n\nconst GeneralErrorView = View.extend({\n  template: hbs`\n    <div class=\"dialog__icon--error\">{{fat \"octagon-exclamation\"}}</div>\n    <div class=\"dialog__error-header\">Uh-oh, there was an error. Try reloading the page.</div>\n  `,\n});\n\nexport {\n  RequestCodeView,\n  VerifyCodeView,\n  AlreadySubmittedView,\n  NotAvailableView,\n  GeneralErrorView,\n};\n","import hbs from 'handlebars-inline-precompile';\nimport { View } from 'marionette';\n\nimport { appConfig } from 'js/config';\n\nimport './dialog.scss';\n\nconst DialogView = View.extend({\n  className: 'dialog__wrapper',\n  template: hbs`\n    <h1 class=\"site-title\">{{ name }}</h1>\n    <div class=\"dialog\" data-content-region>\n      <div class=\"dialog__icon dialog__icon--success\">{{fat \"circle-check\"}}</div>\n      <div>You’ve submitted the form. Nice job.</div>\n    </div>\n  `,\n  templateContext() {\n    return {\n      name: appConfig.name,\n    };\n  },\n  regions: {\n    content: '[data-content-region]',\n  },\n});\n\nexport {\n  DialogView,\n};\n","import App from 'js/base/app';\n\nimport { getPatientInfo, createVerificationCode, validateVerificationCode } from 'js/outreach/entities';\n\nimport {\n  RequestCodeView,\n  VerifyCodeView,\n  AlreadySubmittedView,\n  NotAvailableView,\n  GeneralErrorView,\n} from 'js/outreach/views/verify_views';\n\nimport { DialogView } from 'js/outreach/views/dialog_views';\n\nexport default App.extend({\n  onBeforeStart({ actionId }) {\n    this.actionId = actionId;\n  },\n  beforeStart() {\n    return getPatientInfo({ actionId: this.actionId });\n  },\n  onFail(options, { response }) {\n    const dialogView = new DialogView();\n    this.showView(dialogView);\n\n    if (response.status === 409) {\n      this.showAlreadySubmittedView();\n      return;\n    }\n\n    this.showNotAvailableView();\n  },\n  onStart(options, { outreachId, patientPhoneEnd }) {\n    this.outreachId = outreachId;\n    this.patientPhoneEnd = patientPhoneEnd;\n\n    const dialogView = new DialogView();\n    this.showView(dialogView);\n\n    this.showRequestCodeView();\n  },\n  showRequestCodeView() {\n    const requestCodeView = new RequestCodeView({\n      model: this.getState(),\n      patientPhoneEnd: this.patientPhoneEnd,\n    });\n\n    this.listenTo(requestCodeView, 'click:submit', () => {\n      createVerificationCode({ actionId: this.actionId })\n        .then(() => {\n          this.showVerifyCodeView();\n        })\n        .catch(({ response }) => {\n          if (response.status >= 500) return;\n\n          this.showGeneralErrorView();\n        });\n    });\n\n    this.showChildView('content', requestCodeView);\n  },\n  showVerifyCodeView(hasInvalidCodeError) {\n    const verifyCodeView = new VerifyCodeView({\n      patientPhoneEnd: this.patientPhoneEnd,\n      hasInvalidCodeError,\n    });\n\n    this.listenTo(verifyCodeView, 'submit:code', code => {\n      validateVerificationCode({ outreachId: this.outreachId, code })\n        .then(() => {\n          this.stop({ isVerified: true });\n        })\n        .catch(({ response }) => {\n          if (response.status >= 500) return;\n\n          this.showVerifyCodeView(true);\n        });\n    });\n\n    this.listenTo(verifyCodeView, 'click:resend', code => {\n      this.showRequestCodeView();\n    });\n\n    this.showChildView('content', verifyCodeView);\n  },\n  showAlreadySubmittedView() {\n    this.showChildView('content', new AlreadySubmittedView());\n  },\n  showNotAvailableView() {\n    this.showChildView('content', new NotAvailableView());\n  },\n  showGeneralErrorView() {\n    this.showChildView('content', new GeneralErrorView());\n  },\n});\n","import hbs from 'handlebars-inline-precompile';\nimport { View } from 'marionette';\n\nimport IframeFormBehavior from 'js/behaviors/iframe-form';\n\nimport 'scss/modules/buttons.scss';\nimport './form.scss';\n\nconst iFrameFormView = View.extend({\n  behaviors: [IframeFormBehavior],\n  regions: {\n    formAction: '[data-action-region]',\n  },\n  template: hbs`\n  <div class=\"form__header\">\n    <div class=\"form__title\">{{ name }}</div>\n    <div data-action-region></div>\n  </div>\n  <div class=\"form__content\">\n    <iframe src=\"/formapp/\"></iframe>\n  </div>\n  `,\n});\n\nconst SaveView = View.extend({\n  isDisabled: false,\n  tagName: 'button',\n  className: 'button--green',\n  attributes() {\n    return {\n      disabled: this.getOption('isDisabled'),\n    };\n  },\n  template: hbs`Submit`,\n  triggers: {\n    'click': 'click',\n  },\n  onClick() {\n    this.$el.prop('disabled', true);\n  },\n});\n\nexport {\n  iFrameFormView,\n  SaveView,\n};\n","import hbs from 'handlebars-inline-precompile';\nimport { View } from 'marionette';\n\nimport './error.scss';\n\nconst ErrorView = View.extend({\n  template: hbs`\n    <div class=\"dialog__icon--error\">{{fat \"octagon-exclamation\"}}</div>\n    <div class=\"dialog__error-header\">Uh-oh, there was an error.</div>\n    <div class=\"dialog__error-header u-text-link u-margin--t-24 js-try-again\">Try again</div>\n  `,\n  triggers: {\n    'click .js-try-again': 'click:tryAgain',\n  },\n  onClickTryAgain() {\n    history.back();\n  },\n});\n\nconst Error404View = View.extend({\n  template: hbs`\n    <div class=\"dialog__icon\">{{fat \"triangle-exclamation\"}}</div>\n    <div class=\"dialog__error-header\">Oops! The page you requested can’t be found.</div>\n    <div class=\"dialog__error-info\">Return to the Outreach message and re-open the link.</div>\n  `,\n});\n\nexport {\n  ErrorView,\n  Error404View,\n};\n","import { map } from 'underscore';\nimport Radio from 'backbone.radio';\n\nimport App from 'js/base/app';\n\nimport { postResponse } from 'js/outreach/entities';\n\nimport {\n  iFrameFormView,\n  SaveView,\n} from 'js/outreach/views/form_views';\n\nimport { DialogView } from 'js/outreach/views/dialog_views';\nimport { ErrorView } from 'js/outreach/views/error_views';\n\nexport default App.extend({\n  beforeStart({ actionId }) {\n    return [\n      Radio.request('entities', 'fetch:forms:byAction', actionId),\n      Radio.request('entities', 'fetch:forms:definition:byAction', actionId),\n      Radio.request('entities', 'fetch:forms:data', actionId),\n    ];\n  },\n  /* istanbul ignore next: Don't handle non-API errors */\n  onFail() {\n    const dialogView = new DialogView();\n    dialogView.showChildView('content', new ErrorView());\n    this.showView(dialogView);\n  },\n  onStart({ actionId }, form, definition, data) {\n    this.actionId = actionId;\n    this.form = form;\n    this.definition = definition;\n    this.formData = data.attributes;\n    this.setView(new iFrameFormView({ model: this.form }));\n    this.startService();\n    this.showFormSaveDisabled();\n    this.showView();\n  },\n  startService() {\n    this.channel = Radio.channel(`form${ this.form.id }`);\n\n    this.channel.reply({\n      'ready:form': this.showFormSave,\n      'submit:form': this.submitForm,\n      'fetch:form:data': this.getFormPrefill,\n    }, this);\n  },\n  getFormPrefill() {\n    this.channel.request('send', 'fetch:form:data', {\n      definition: this.definition,\n      formData: this.formData,\n      formSubmission: {},\n      ...this.form.getContext(),\n    });\n  },\n  showFormSaveDisabled() {\n    if (this.form.isReadOnly()) return;\n    this.showChildView('formAction', new SaveView({ isDisabled: true }));\n  },\n  showFormSave() {\n    if (this.form.isReadOnly()) return;\n    const saveView = this.showChildView('formAction', new SaveView());\n\n    this.listenTo(saveView, 'click', () => {\n      this.channel.request('send', 'form:submit');\n    });\n  },\n  submitForm({ response }) {\n    postResponse({\n      formId: this.form.id,\n      actionId: this.actionId,\n      response,\n    })\n      .then(/* istanbul ignore next: Skipping flaky portion of Outreach > Form test */\n        () => {\n          this.showView(new DialogView());\n        })\n      .catch(({ responseData }) => {\n        this.showFormSave();\n        /* istanbul ignore next: Don't handle non-API errors */\n        if (!responseData) return;\n        const errors = map(responseData.errors, 'detail');\n        this.channel.request('send', 'form:errors', errors);\n      });\n  },\n});\n","import hbs from 'handlebars-inline-precompile';\nimport { View } from 'marionette';\nimport parsePhoneNumber from 'libphonenumber-js/min';\n\nimport 'scss/modules/buttons.scss';\nimport 'scss/modules/forms.scss';\n\nimport './opt-in.scss';\n\nimport trim from 'js/utils/formatting/trim';\n\nconst OptInView = View.extend({\n  template: hbs`\n    <div class=\"dialog__icon--warn\">{{fat \"hand-wave\"}}</div>\n    <h2 class=\"opt-in__heading-text\">Hi, we need to confirm your contact info. Please enter your information below, so that we can share health resources with you.</h2>\n    <div class=\"opt-in__field\">\n      <label class=\"opt-in__field-label\">Your first name</label>\n      <input\n        type=\"text\"\n        class=\"input-primary opt-in__field-input js-first-name\"\n        placeholder=\"Enter your first name\"\n        value=\"{{ first_name }}\"\n      />\n    </div>\n    <div class=\"opt-in__field\">\n      <label class=\"opt-in__field-label\">Your last name</label>\n      <input\n        type=\"text\"\n        class=\"input-primary opt-in__field-input js-last-name\"\n        placeholder=\"Enter your last name\"\n        value=\"{{ last_name }}\"\n      />\n    </div>\n    <div class=\"opt-in__field\">\n      <label class=\"opt-in__field-label\">Your date of birth</label>\n      <input\n        type=\"date\"\n        class=\"input-primary opt-in__field-input js-birth-date\"\n        placeholder=\"Enter your date of birth\"\n        value=\"{{ birth_date }}\"\n      />\n    </div>\n    <h3 class=\"opt-in__heading-text u-margin--t-32 u-margin--b-16\">How may we share health resources with you?</h3>\n    <div class=\"opt-in__field\">\n      <label class=\"opt-in__field-label\">Your mobile phone number</label>\n      <input\n        type=\"text\"\n        class=\"input-primary opt-in__field-input js-phone\"\n        placeholder=\"Enter mobile phone number\"\n        value=\"{{ phone }}\"\n      />\n    </div>\n    <p class=\"opt-in__disclaimer\">By clicking Submit you agree to receive SMS text message notifications. You may opt out at any time.</p>\n    <button class=\"opt-in__submit button--green w-100 js-submit\" disabled>Submit</button>\n  `,\n  modelEvents: {\n    'change': 'setSubmitButtonState',\n  },\n  ui: {\n    firstName: '.js-first-name',\n    lastName: '.js-last-name',\n    birthDate: '.js-birth-date',\n    phone: '.js-phone',\n    submit: '.js-submit',\n  },\n  triggers: {\n    'input @ui.firstName': 'change:firstName',\n    'input @ui.lastName': 'change:lastName',\n    'input @ui.birthDate': 'change:birthDate',\n    'input @ui.phone': 'change:phone',\n    'click @ui.submit': 'click:submit',\n  },\n  onRender() {\n    this.setSubmitButtonState();\n  },\n  onChangeFirstName() {\n    this.model.set({ first_name: trim(this.ui.firstName.val()) });\n  },\n  onChangeLastName() {\n    this.model.set({ last_name: trim(this.ui.lastName.val()) });\n  },\n  onChangeBirthDate() {\n    this.model.set({ birth_date: trim(this.ui.birthDate.val()) });\n  },\n  onChangePhone() {\n    const phone = parsePhoneNumber(this.ui.phone.val(), 'US');\n\n    this.model.set({ phone: phone ? phone.number : null });\n  },\n  disableSubmitButton() {\n    this.ui.submit.prop('disabled', true);\n  },\n  enableSubmitButton() {\n    this.ui.submit.prop('disabled', false);\n  },\n  setSubmitButtonState() {\n    if (!this.model.isValid()) {\n      this.disableSubmitButton();\n      return;\n    }\n\n    this.enableSubmitButton();\n  },\n  onClickSubmit() {\n    this.disableSubmitButton();\n  },\n});\n\nconst ResponseSuccessView = View.extend({\n  template: hbs`\n    <div class=\"dialog__icon--success\">{{fat \"thumbs-up\"}}</div>\n    <div class=\"opt-in__heading-text\">Your contact info is confirmed. Thanks for doing that. We’ll notify you when we have a health resource to share with you.</div>\n  `,\n});\n\nconst ResponseErrorView = View.extend({\n  template: hbs`\n    <div class=\"dialog__icon--error\">{{fat \"octagon-exclamation\"}}</div>\n    <div class=\"opt-in__heading-text\">We were not able to confirm your contact info. Sorry about that. Please contact your care team.</div>\n    <div class=\"opt-in__heading-text u-text-link js-try-again\">Try again</div>\n  `,\n  triggers: {\n    'click .js-try-again': 'click:tryAgain',\n  },\n});\n\nexport {\n  OptInView,\n  ResponseSuccessView,\n  ResponseErrorView,\n};\n","import Backbone from 'backbone';\nimport App from 'js/base/app';\n\nimport { optInPostRequest } from 'js/outreach/entities';\n\nimport {\n  OptInView,\n  ResponseSuccessView,\n  ResponseErrorView,\n} from 'js/outreach/views/opt-in_views';\n\nimport { DialogView } from 'js/outreach/views/dialog_views';\n\nconst StateModel = Backbone.Model.extend({\n  defaults: {\n    first_name: '',\n    last_name: '',\n    birth_date: '',\n    phone: '',\n  },\n  validate({ first_name, last_name, birth_date, phone }) {\n    if (!first_name || !last_name || !birth_date || !phone) return 'invalid';\n  },\n});\n\nexport default App.extend({\n  StateModel,\n  onStart() {\n    const dialogView = new DialogView();\n    this.showView(dialogView);\n\n    this.showOptInView();\n  },\n  showOptInView() {\n    const optInView = new OptInView({ model: this.getState() });\n\n    this.listenTo(optInView, 'click:submit', () => {\n      optInPostRequest(this.getState().attributes)\n        .then(() => {\n          this.showResponseSuccessView();\n        })\n        .catch(() => {\n          this.showResponseErrorView();\n        });\n    });\n\n    this.showChildView('content', optInView);\n  },\n  showResponseSuccessView() {\n    const responseSuccessView = new ResponseSuccessView();\n    this.showChildView('content', responseSuccessView);\n  },\n  showResponseErrorView() {\n    const responseErrorView = new ResponseErrorView();\n\n    this.listenTo(responseErrorView, 'click:tryAgain', () => {\n      this.showOptInView();\n    });\n\n    this.showChildView('content', responseErrorView);\n  },\n});\n","import { bind } from 'underscore';\n\nimport RouterApp from 'js/base/routerapp';\n\nimport { DialogView } from 'js/outreach/views/dialog_views';\n\nimport {\n  ErrorView,\n  Error404View,\n} from 'js/outreach/views/error_views';\n\nexport default RouterApp.extend({\n  eventRoutes: {\n    'unknownError': {\n      route: 'outreach/unknown-error',\n      action: 'show500',\n      root: true,\n    },\n  },\n  initialize() {\n    this.router.route('*unknown', 'show404', bind(this.show404, this));\n  },\n  show404() {\n    const dialogView = new DialogView();\n    this.showView(dialogView);\n\n    this.showChildView('content', new Error404View());\n  },\n  show500() {\n    const dialogView = new DialogView();\n    this.showView(dialogView);\n\n    this.showChildView('content', new ErrorView());\n  },\n});\n","import $ from 'jquery';\nimport 'js/base/setup';\nimport Backbone from 'backbone';\nimport Radio from 'backbone.radio';\nimport { Region } from 'marionette';\nimport 'js/base/fontawesome';\nimport 'js/entities-service/forms';\n\nimport RouterApp from 'js/base/routerapp';\n\nimport VerifyApp from 'js/outreach/apps/verify_app';\nimport FormApp from 'js/outreach/apps/form_app';\nimport OptInApp from 'js/outreach/apps/opt-in_app';\nimport ErrorApp from 'js/outreach/apps/error_app';\n\nimport 'scss/outreach-core.scss';\nimport './outreach.scss';\n\nconst OutreachApp = RouterApp.extend({\n  childApps: {\n    verify: VerifyApp,\n    form: FormApp,\n    optIn: OptInApp,\n  },\n  routerAppName: 'PatientsApp',\n  eventRoutes: {\n    'outreach:id': {\n      route: 'outreach/:id',\n      action: 'show',\n      root: true,\n    },\n    'outreach:opt:in': {\n      route: 'outreach/opt-in',\n      action: 'showOptIn',\n      root: true,\n    },\n  },\n  show(actionId) {\n    this.actionId = actionId;\n\n    this.startVerify();\n  },\n  startVerify() {\n    const verifyApp = this.startCurrent('verify', { actionId: this.actionId });\n\n    this.listenTo(verifyApp, 'stop', () => {\n      const token = Radio.request('auth', 'getToken');\n      if (!token) return;\n\n      this.startForm();\n    });\n  },\n  startForm() {\n    this.startCurrent('form', { actionId: this.actionId });\n  },\n  showOptIn() {\n    this.startCurrent('optIn');\n  },\n});\n\nfunction startOutreachApp() {\n  // Modify viewport for mobile devices at full width\n  $('meta[name=viewport]').attr('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0');\n  const baseRegion = new Region({ el: document.getElementById('root') });\n  new ErrorApp({ region: baseRegion });\n  new OutreachApp({ region: baseRegion });\n  Backbone.history.start({ pushState: true });\n}\n\nexport {\n  startOutreachApp,\n};\n","export default {\n  BACKSPACE_KEY: 8,\n  TAB_KEY: 9,\n  ENTER_KEY: 13,\n  SHIFT_KEY: 16,\n  ESCAPE_KEY: 27,\n  LEFT_KEY: 37,\n  UP_KEY: 38,\n  RIGHT_KEY: 39,\n  DOWN_KEY: 40,\n  AT_KEY_SHIFT: 50,\n};\n","/**\n * backbone.eventrouter - A highly opinionated, simplistic Backbone.Router coupled with a Backbone.Radio.Channel\n * @version v1.0.1\n * @link https://github.com/RoundingWellOS/backbone.eventrouter\n * @license MIT\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('underscore'), require('backbone'), require('backbone.radio')) :\n  typeof define === 'function' && define.amd ? define(['underscore', 'backbone', 'backbone.radio'], factory) :\n  (global.Backbone = global.Backbone || {}, global.Backbone.EventRouter = factory(global._,global.Backbone,global.Radio));\n}(this, function (_,Backbone,backbone_radio) { 'use strict';\n\n  _ = 'default' in _ ? _['default'] : _;\n  Backbone = 'default' in Backbone ? Backbone['default'] : Backbone;\n\n  // eslint-disable-line\n\n  // https://github.com/jashkenas/backbone/blob/1.2.1/backbone.js#L1425\n  var namedParamRegex = /(\\(\\?)?:\\w+/;\n\n  /**\n   * Backbone.Router coupled with a Backbone.Radio Channel.\n   *\n   * @public\n   * @class EventRouter\n   * @memberOf Backbone\n   */\n  var EventRouter = Backbone.EventRouter = Backbone.Router.extend({\n\n    /**\n     * @public\n     * @constructs EventRouter\n     * @param {Object} [options] - Settings for the EventRouter\n     * @param {Boolean} [options.channelName]\n     * @param {Boolean} [options.routeTriggers]\n     */\n    constructor: function constructor(options) {\n      _.extend(this, _.pick(options, ['channelName', 'routeTriggers']));\n\n      this._ch = Backbone.Radio.channel(_.result(this, 'channelName'));\n\n      this.listenTo(this._ch, 'all', this.navigateFromEvent);\n\n      // Backbone.Router routes are added first\n      // Routes can be added after the triggerRoutes with the Backbone.Router API\n      Backbone.Router.apply(this, arguments);\n\n      this._initRoutes();\n    },\n\n\n    /**\n     * The Radio Channel name.\n     *\n     * @type {String}\n     * @default 'event-router'\n     */\n    channelName: 'event-router',\n\n    /**\n     * Get the router's Radio channel instance\n     *\n     * @public\n     * @method getChannel\n     * @memberOf EventRouter\n     * @returns {Backbone.Radio.Channel}\n     */\n    getChannel: function getChannel() {\n      return this._ch;\n    },\n\n\n    /**\n     * For each routeTrigger it adds a route to Backbone.Router\n     *\n     * @private\n     * @method _initRoutes\n     * @memberOf EventRouter\n     */\n    _initRoutes: function _initRoutes() {\n      this._routeTriggers = _.result(this, 'routeTriggers', {});\n\n      _.each(this._routeTriggers, this._addRouteTrigger, this);\n    },\n\n\n    /**\n     * Adds a route(s) to Backbone.Router which on route triggers\n     * the appropriate event\n     *\n     * @private\n     * @method _addRouteTrigger\n     * @param {Array|String} routes - Route string or array of route strings\n     * @param {String} event - Event string to trigger on route\n     * @memberOf EventRouter\n     */\n    _addRouteTrigger: function _addRouteTrigger(routes, event) {\n      // handle any route as an array by default for the _.each\n      routes = _.isArray(routes) ? routes : [routes];\n\n      _.each(routes, function (route) {\n        this.route(route, event, _.bind(this._ch.trigger, this._ch, event));\n      }, this);\n    },\n\n\n    /**\n     * Adds a routeTrigger, and route(s) to Backbone.Router\n     * which on route triggers the appropriate event.\n     *\n     * @public\n     * @method addRouteTrigger\n     * @param {Array|String} routes - Route string or array of route strings\n     * @param {String} event - Event string to trigger on route\n     * @memberOf EventRouter\n     * @returns {EventRouter}\n     */\n    addRouteTrigger: function addRouteTrigger(routes, event) {\n      this._routeTriggers[event] = routes;\n      this._addRouteTrigger(routes, event);\n\n      return this;\n    },\n\n\n    /**\n     * Overrides `Backbone.Router.route()\n     * Like Backbone.Router.Route but with before events\n     * It also temporarily stores the event for understanding\n     * what route is currently being handled.\n     *\n     * @public\n     * @method route\n     * @param {String} route - Route string\n     * @param {String} [name] - Name of route\n     * @param {String} callback - Function called on route\n     * @event EventRouter#before:route - passes route name and route arguments\n     * @event EventRouter#before:route:{event_name} - passes route arguments\n     * @memberOf EventRouter\n     * @returns {EventRouter}\n     */\n    route: function route(_route, name, callback) {\n      var bbRoute = Backbone.Router.prototype.route;\n\n      if (_.isFunction(name) || !callback) {\n        return bbRoute.call(this, _route, name, callback);\n      }\n\n      var wrappedCallback = _.bind(function () {\n        var args = _.drop(arguments, 0);\n\n        // Trigger before: events that match currently triggered events\n        this.trigger('before:route', name, args);\n        this.trigger.apply(this, ['before:route:' + name].concat(args));\n\n        this._storeRouteTrigger([name].concat(args));\n        callback.apply(this, args);\n        this._clearRouteTrigger();\n      }, this);\n\n      return bbRoute.call(this, _route, name, wrappedCallback);\n    },\n\n\n    /**\n     * Stores the route name and route arguments on a stack\n     *\n     * @private\n     * @method _storeRouteTrigger\n     * @param {Array} args - Array of route name and route arguments\n     * @memberOf EventRouter\n     */\n    _storeRouteTrigger: function _storeRouteTrigger(args) {\n      this._routeArgs = this._routeArgs || [];\n      this._routeArgs.push(args);\n    },\n\n\n    /**\n     * Gets the top of the triggered route store stack\n     *\n     * @private\n     * @method _getCurrentRouteTrigger\n     * @memberOf EventRouter\n     * @returns {Array}\n     */\n    _getCurrentRouteTrigger: function _getCurrentRouteTrigger() {\n      return _.last(this._routeArgs) || [];\n    },\n\n\n    /**\n     * Pops the latests route triggered off of the store stack\n     *\n     * @private\n     * @method _clearRouteTrigger\n     * @memberOf EventRouter\n     */\n    _clearRouteTrigger: function _clearRouteTrigger() {\n      this._routeArgs.pop();\n    },\n\n\n    /**\n     * Checks to see if the current event being tests is the latest\n     * route being handled by comparing the route name and arguments\n     *\n     * @private\n     * @method _isTriggeredFromRoute\n     * @memberOf EventRouter\n     * @returns {Boolean}\n     */\n    _isTriggeredFromRoute: function _isTriggeredFromRoute() {\n      var currentRoute = this._getCurrentRouteTrigger();\n\n      if (arguments.length !== currentRoute.length) {\n        return false;\n      }\n\n      return arguments.length === _.union(arguments, this.currentRoute).length;\n    },\n\n\n    /**\n     * Takes a event string and any arguments passed to that event\n     * And if not initiated by a route, translates the event into a\n     * URL and navigates to it without re-triggering the route\n     *\n     * @public\n     * @method navigateFromEvent\n     * @param {String} event - Event string\n     * @event EventRouter#noMatch - passes route arguments\n     * @memberOf EventRouter\n     * @returns {EventRouter}\n     */\n    navigateFromEvent: function navigateFromEvent(event) {\n      var route = this.getDefaultRoute(event);\n\n      // if no matching route exists do nothing\n      if (!route) {\n        var args = _.drop(arguments, 0);\n        this.trigger.apply(this, ['noMatch'].concat(args));\n        return this;\n      }\n\n      if (this._isTriggeredFromRoute.apply(this, arguments)) {\n        return this;\n      }\n\n      var eventArgs = _.drop(arguments, 1);\n\n      var translatedRoute = this.translateRoute(route, eventArgs);\n\n      // update URL without triggering the route\n      return this.navigate(translatedRoute, { trigger: false });\n    },\n\n\n    /**\n     * Get the default route string\n     * Either the first of the array or the passed in event if singular\n     *\n     * @public\n     * @method getDefaultRoute\n     * @memberOf EventRouter\n     * @returns {String}\n     */\n    getDefaultRoute: function getDefaultRoute(event) {\n      var routes = this._routeTriggers[event];\n\n      return _.isArray(routes) ? routes[0] : routes;\n    },\n\n\n    /**\n     * Finds the next name params (ie: :param) and replaces it with the arg\n     *\n     * @private\n     * @method _replaceParam\n     * @param {String} route - Route string\n     * @param {String|Number} arg - value to replace named param\n     * @memberOf EventRouter\n     * @returns {String}\n     */\n    _replaceParam: function _replaceParam(route, arg) {\n      return route.replace(namedParamRegex, arg);\n    },\n\n\n    /**\n     * Takes a route string and an array or arguments\n     * and returns a url with the named params replaced with the argument values\n     *\n     * @public\n     * @method translateRoute\n     * @param {String} route - Route string\n     * @param {Array} eventArgs - Passed event arguments\n     * @memberOf EventRouter\n     * @returns {String}\n     */\n    translateRoute: function translateRoute(route, eventArgs) {\n      return _.reduce(eventArgs, this._replaceParam, route);\n    }\n  });\n\n  return EventRouter;\n\n}));\n\n"],"names":["AppEventRouter","EventRouter","initialize","this","cid","uniqueId","route","apply","arguments","Backbone","handlers","destroy","reject","stopListening","trigger","_isTriggeredFromRoute","currentRoute","_getCurrentRouteTrigger","length","union","App","extend","routerAppName","constructor","initRouter","listenTo","router","onNoMatch","on","stopCurrent","_routes","result","routeTriggers","getRouteTriggers","bindRouteEvents","stop","_currentRoute","currentWorkspace","Radio","reduce","root","eventName","workspace","get","getEventActions","eventRoutes","routeAction","eventActions","action","partial","getChannel","event","args","isRunning","start","triggerMethod","setLatestList","eventArgs","isFunction","isList","clearLatestList","startCurrent","appName","options","_currentAppName","_currentAppOptions","app","startChildApp","_current","startRoute","isCurrent","getCurrent","getCurrentRoute","isEqual","translateEvent","getDefaultRoute","translateRoute","rest","replaceRoute","url","replaceUrl","navigateRoute","navigate","replace","Behavior","ui","iframe","onInitialize","channel","view","model","id","replies","send","message","contentWindow","postMessage","window","origin","focus","onAttach","reply","$","originalEvent","data","request","onBeforeDetach","off","stopReplying","keys","join","getRelationship","type","token","setToken","tokenString","getToken","BACKSPACE_KEY","keyCodes","RequestCodeView","View","submit","triggers","template","_Handlebars2","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","templateContext","phoneEnd","getOption","onClickSubmit","prop","VerifyCodeView","resend","input","events","stack1","program","noop","hasInvalidCodeError","watchInput","value","String","target","first","charAt","substring","inputElements","index","isLastInputEl","didInsertContent","undefined","code","map","i","el","disableSubmitButton","currentElement","eq","val","watchKeydown","keyCode","Math","max","shouldBeDisabled","AlreadySubmittedView","NotAvailableView","GeneralErrorView","DialogView","className","name","appConfig","regions","content","onBeforeStart","actionId","beforeStart","fetcher","method","then","handleJSON","outreachId","patientPhoneEnd","attributes","phone_end","getPatientInfo","onFail","response","dialogView","showView","status","showNotAvailableView","showAlreadySubmittedView","onStart","showRequestCodeView","requestCodeView","getState","JSON","stringify","createVerificationCode","showVerifyCodeView","catch","showGeneralErrorView","showChildView","verifyCodeView","Promise","resolve","validateVerificationCode","isVerified","iFrameFormView","behaviors","IframeFormBehavior","formAction","SaveView","isDisabled","tagName","disabled","onClick","$el","ErrorView","onClickTryAgain","history","back","Error404View","form","definition","formData","setView","startService","showFormSaveDisabled","showFormSave","submitForm","getFormPrefill","formSubmission","getContext","isReadOnly","saveView","formId","uuid","relationships","postResponse","responseData","errors","OptInView","alias4","modelEvents","firstName","lastName","birthDate","phone","onRender","setSubmitButtonState","onChangeFirstName","set","first_name","trim","onChangeLastName","last_name","onChangeBirthDate","birth_date","onChangePhone","parsePhoneNumber","number","enableSubmitButton","isValid","ResponseSuccessView","ResponseErrorView","StateModel","defaults","validate","showOptInView","optInView","optInPostRequest","showResponseSuccessView","showResponseErrorView","responseSuccessView","responseErrorView","RouterApp","bind","show404","show500","OutreachApp","childApps","verify","VerifyApp","FormApp","optIn","OptInApp","show","startVerify","verifyApp","startForm","showOptIn","startOutreachApp","attr","baseRegion","Region","document","getElementById","ErrorApp","region","pushState","TAB_KEY","ENTER_KEY","SHIFT_KEY","ESCAPE_KEY","LEFT_KEY","UP_KEY","RIGHT_KEY","DOWN_KEY","AT_KEY_SHIFT","module","exports","_","backbone_radio","namedParamRegex","Router","pick","_ch","navigateFromEvent","_initRoutes","channelName","_routeTriggers","each","_addRouteTrigger","routes","isArray","addRouteTrigger","_route","callback","bbRoute","wrappedCallback","drop","concat","_storeRouteTrigger","_clearRouteTrigger","_routeArgs","push","last","pop","translatedRoute","_replaceParam","arg","factory"],"sourceRoot":""}