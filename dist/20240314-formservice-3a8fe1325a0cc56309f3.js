"use strict";(globalThis.webpackChunkcare_ops_frontend=globalThis.webpackChunkcare_ops_frontend||[]).push([[624],{1075:(e,t,r)=>{r.r(t),r.d(t,{startFormServiceApp:()=>u}),r(527);var n=r(8088),s=r.n(n),o=r(7739),i=r.n(o),a=r(7239),c=(r(3197),r(1188));const f=a.Z.extend({beforeStart:({actionId:e})=>[i().request("entities","fetch:forms:byAction",e),i().request("entities","fetch:forms:definition:byAction",e),i().request("entities","fetch:forms:data",e),i().request("entities","fetch:actions:model",e)],onStart(e,t,r,n,s){const o=this._getPrefillFilters(t,s);return Promise.resolve(i().request("entities","fetch:formResponses:latest",o)).then((e=>{parent.postMessage({message:"form:pdf",args:{definition:r,formData:n.attributes,responseData:e.getFormData(),formSubmission:e.getResponse(),contextScripts:t.getContextScripts(),loaderReducers:t.getLoaderReducers()}},window.origin)}))},_getPrefillFilters(e,t){const r={status:c.zB.SUBMITTED,flow:t.get("_flow"),patient:t.get("_patient")};e.isReport()&&(r.created=`<=${t.get("created_at")}`);const n=e.getPrefillActionTag();return n?(r["action.tags"]=n,r):(r.action=t.id,r)}}),l=a.Z.extend({beforeStart:({formId:e,patientId:t,responseId:r})=>[i().request("entities","fetch:forms:model",e),i().request("entities","fetch:forms:definition",e),i().request("entities","fetch:forms:data",null,t,e),i().request("entities","fetch:formResponses:model",r)],onStart(e,t,r,n,s){parent.postMessage({message:"form:pdf",args:{definition:r,formData:n.attributes,responseData:s.getFormData(),formSubmission:s.getResponse(),contextScripts:t.getContextScripts(),loaderReducers:t.getLoaderReducers()}},window.origin)}}),d=s().Router.extend({routes:{"formservice/action/:actionId":"startActionFormService","formservice/:formId/:patientId(/:responseId)":"startFormService"},startActionFormService(e){(new f).start({actionId:e})},startFormService(e,t,r){(new l).start({formId:e,patientId:t,responseId:r})}});function u(){new d,s().history.start({pushState:!0})}},7948:(e,t,r)=>{r.d(t,{Z:()=>n});const n="00000000-0000-0000-0000-000000000000"},7609:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(3019),s=r(126);function o(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function i(e,t){return e<<t|e>>>32-t}const a=function(e,t,r){function a(e,t,r,a){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof t&&(t=function(e){if(!(0,s.Z)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}(t)),16!==(null===(c=t)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+e.length);if(f.set(t),f.set(e,t.length),f=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const n=e.length/4+2,s=Math.ceil(n/16),a=new Array(s);for(let t=0;t<s;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];a[t]=r}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<s;++e){const n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=a[e][t];for(let e=16;e<80;++e)n[e]=i(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let s=r[0],c=r[1],f=r[2],l=r[3],d=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),a=i(s,5)+o(r,c,f,l)+d+t[r]+n[e]>>>0;d=l,l=f,f=i(c,30)>>>0,c=s,s=a}r[0]=r[0]+s>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+f>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}(f),f[6]=15&f[6]|80,f[8]=63&f[8]|128,r){a=a||0;for(let e=0;e<16;++e)r[a+e]=f[e];return r}return(0,n.S)(f)}try{a.name="v5"}catch(e){}return a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",a}()},126:(e,t,r)=>{r.d(t,{Z:()=>s});const n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(e){return"string"==typeof e&&n.test(e)}}}]);