(globalThis.webpackChunkcare_ops_frontend=globalThis.webpackChunkcare_ops_frontend||[]).push([[345],{1261:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>zc});var a=n(7198),i=n(7739),l=n.n(i),s=n(8088),o=n.n(s),r=n(7239),c=n(9203),d=n.n(c),h=n(7201),u=n(1188),m=n(944),p=n.n(m),g=n(6718),f=n(2650),w=n(4878),v=n(4500),b=n(6197),y=n.n(b);const _=g.View.extend({tagName:"button",className:"button--icon js-menu",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}))},useData:!0}),triggers:{click:"click"},onClick(){const e=new(o().Collection)([{onSelect:(0,a.bind)(this.triggerMethod,this,"delete")}]);new v.Z({ui:this.$el,uiView:this,headingText:h.ZP.patients.sidebar.action.actionSidebarViews.menuView.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"actionSidebarViews"))&&o(l,"menuView"))&&o(l,"menuOptions"))&&o(l,"delete"),t))+"</span>"},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()}}),x=g.View.extend({className:"sidebar flex-region",template:y(),regions:{menu:"[data-menu-region]",action:"[data-action-region]",form:{el:"[data-form-region]",replaceElement:!0},activity:{el:"[data-activity-region]",regionClass:w.Z},attachments:"[data-attachments-region]",timestamps:"[data-timestamps-region]",comment:"[data-comment-region]"},triggers:{"click .js-close":"close"},onAttach(){(0,f.$)(this.el)}});var k=n(6658);const C=e=>e&&e.replace(/(\r\n|\n|\r)/gm," ");var S=n(1441),O=n(5770),T=n(3337),D=n(2894);const V=D.wA.extend({stateEvents:{"change:isSelected":"onStateChangeIsSelected"},viewEvents:{click:"onClick"},viewOptions(){return{tagName:"button",className:"button--checkbox js-select",template:this.getState("isSelected")?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-check",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0}):p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))},useData:!0}),triggers:{click:"click"}}},onClick(e,t){this.toggleState("isSelected"),this.triggerMethod("select",t)},onStateChangeIsSelected(e,t){this.show(),this.triggerMethod("change:isSelected",t)}});var M=n(9455);const P=h.ZP.patients.shared.components.stateComponent,E=p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span>"+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"name")||(null!=t?s(t,"name"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:1,column:105},end:{line:1,column:115}}}):l)+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="action--'+s(e.lambda(null!=(l=null!=t?r(t,"options"):t)?r(l,"color"):l,t))+'">'+s((r(n,"fa")||t&&r(t,"fa")||e.hooks.helperMissing).call(o,null!=(l=null!=t?r(t,"options"):t)?r(l,"iconType"):l,null!=(l=null!=t?r(t,"options"):t)?r(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:78}}}))+(null!=(l=r(n,"unless").call(o,null!=t?r(t,"isCompact"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:78},end:{line:1,column:133}}}))?l:"")+"</span>"},useData:!0});let j;function A(){if(j)return j;const e=l().request("bootstrap","currentWorkspace");return j=e.getStates(),j}const N=[u.lO.QUEUED,u.lO.STARTED,u.lO.DONE];let F;const I=M.Z.extend({isCompact:!1,initialize({stateId:e}){this.lists=function(){if(F)return F;const e=A().groupBy("status");return F=(0,a.map)(N,(t=>({collection:l().request("entities","states:collection",e[t]),headingText:P.statusLabels[t]}))),F}(),this.setSelected(e)},setSelected(e){const t=A();this.setState({selected:t.get(e)})},onChangeSelected(e){this.triggerMethod("change:state",e)},popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},viewOptions(){const e=this.getOption("isCompact");return{className:e?"button-secondary--compact":"button-secondary w-100",template:E,templateContext:{isCompact:e}}},picklistOptions:{headingText:P.headingText,itemTemplate:E}}),R=h.ZP.patients.shared.components.ownerComponent,L=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div>"+o((r(n,"matchText")||t&&r(t,"matchText")||s).call(l,null!=t?r(t,"name"):t,null!=t?r(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:1,column:5},end:{line:1,column:29}}}))+' <span class="owner-component__team">'+o((r(n,"matchText")||t&&r(t,"matchText")||s).call(l,null!=t?r(t,"abbr"):t,null!=t?r(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:1,column:66},end:{line:1,column:90}}}))+"</span></div>"},useData:!0}),q=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div><span class="owner-component__title-filter-name">'+r("function"==typeof(l=null!=(l=c(n,"name")||(null!=t?c(t,"name"):t))?l:o)?l.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:54},end:{line:1,column:64}}}):l)+"</span>"+r((c(n,"far")||t&&c(t,"far")||o).call(s,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:71},end:{line:1,column:91}}}))+"</div>"},useData:!0});let B,H,G;function W(e,t){if(H)return H;if(t.can("work:team:manage"))return H=l().request("entities","teams:collection",[t.getTeam()]),H;const n=Z(e,t);return H=l().request("entities","teams:collection",n.invoke("getTeam")),H}function Z(e,t){return G||(t.can("work:team:manage")?(G=t.getTeam().getAssignableClinicians(),G):(G=e.getAssignableClinicians(),G))}const $=M.Z.extend({isCompact:!1,headingText:R.headingText,placeholderText:R.placeholderText,hasTeams:!0,hasClinicians:!0,hasCurrentClinician:!0,popWidth(){const e=this.getOption("isCompact"),t=this.getOption("isTitleFilter");return e||t?null:this.getView().$el.outerWidth()},picklistOptions(){return{itemTemplate:L,itemTemplateContext(){if("teams"!==this.model.type)return{abbr:this.model.getTeam().get("abbr")}},isSelectlist:!0,infoText:this.getOption("infoText"),headingText:this.getOption("headingText"),placeholderText:this.getOption("placeholderText")}},viewOptions(){const e={type:"far",icon:"circle-user"},t=this.getOption("isCompact"),n=this.getOption("isTitleFilter");return t?{className:"owner-component--compact button-secondary--compact",templateContext:{attr:"teams"===this.getState("selected").type?"abbr":"name",icon:e}}:n?{className:"owner-component__title-filter-button",template:q}:{className:"button-secondary w-100",templateContext:{attr:"name",icon:e}}},initialize({owner:e}){this.lists=[];const t=l().request("bootstrap","currentWorkspace");B!==t.id&&(H=null,G=null,B=t.id);const n=l().request("bootstrap","currentUser"),a=Z(t,n);this.getOption("hasCurrentClinician")&&a.get(n)&&this.lists.push({collection:new(o().Collection)([n])}),this.getOption("hasClinicians")&&a.length&&this.lists.push({collection:a,headingText:t.get("name")}),this.getOption("hasTeams")&&this.lists.push({collection:W(t,n),headingText:this.lists.length?R.teamsHeadingText:null}),this.setState({selected:e})},onChangeSelected(e){this.triggerMethod("change:owner",e)}});var z=n(6677);const Y=h.ZP.patients.shared.components.dueComponent,U=p().template({1:function(e,t,n,a,i){return' class="is-overdue"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  <span"+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isOverdue"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:7},end:{line:2,column:50}}}))?l:"")+">\n    "+r((c(n,"far")||t&&c(t,"far")||o).call(s,"calendar-days",{name:"far",hash:{},data:i,loc:{start:{line:3,column:4},end:{line:3,column:27}}}))+r((c(n,"formatDateTime")||t&&c(t,"formatDateTime")||o).call(s,null!=t?c(t,"date"):t,null!=t?c(t,"dateFormat"):t,{name:"formatDateTime",hash:{defaultHtml:null!=t?c(t,"defaultHtml"):t,inputFormat:"YYYY-MM-DD"},data:i,loc:{start:{line:3,column:27},end:{line:3,column:110}}}))+"\n  </span>\n"},useData:!0}),Q=D.wA.extend({isCompact:!1,viewEvents:{click:"onClick"},onClick(){this.toggleState("isActive")},stateEvents:{"change:isActive":"onChangeIsActive","change:selected":"onChangeStateSelected"},onChangeIsActive(e,t){const n=this.getView();n.$el.toggleClass("is-active",t),t&&(n.$el.blur(),this.showDatepicker())},viewOptions(){const e=this.getOption("isCompact"),t=this.getState("selected"),n=this.getState("isDisabled");return{tagName:"button",attributes:{disabled:n},className:()=>e?"button-secondary--compact due-component":"button-secondary w-100 due-component",triggers:{click:"click"},template:U,templateContext:{defaultHtml:e?"":`<span>${Y.defaultText}</span>`,dateFormat:e?"SHORT":"LONG",date:t,isOverdue:!n&&this.getOption("isOverdue")}}},initialize({date:e}){this.setState({selected:e})},showDatepicker(){const e=new z.Z({uiView:this.getView(),state:{selectedDate:this.getState("selected")}});this.listenTo(e,{"change:selectedDate"(t){this.setState("selected",t),e.destroy()},destroy:this.onDatepickerDestroy}),e.show()},onDatepickerDestroy(){this.toggleState("isActive",!1)},onChangeStateSelected(e,t){this.show(),this.triggerMethod("change:due",t)}}),K=h.ZP.patients.shared.components.timeComponent,X="HH:mm:ss",J=d()("07:00:00",X),ee=(0,a.times)(96,(function(e){return{id:J.add(15*e,"minutes").format(X)}})),te=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"clock",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))},useData:!0}),ne=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||s).call(l,"clock",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"id"):t,"LT",{name:"formatDateTime",hash:{defaultHtml:null!=t?r(t,"defaultHtml"):t,inputFormat:"HH:mm:ss"},data:i,loc:{start:{line:1,column:15},end:{line:1,column:88}}}))},useData:!0}),ae=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||s).call(l,"clock",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"time"):t,"LT",{name:"formatDateTime",hash:{inputFormat:"HH:mm:ss"},data:i,loc:{start:{line:1,column:15},end:{line:1,column:66}}}))},useData:!0}),ie=M.Z.extend({collection:new(o().Collection)(ee),align:"right",popWidth:192,isCompact:!1,isSelectlist:!0,getClassName(e,t){const n=e&&this.getOption("isOverdue")?"is-overdue":"";return t?`button-secondary--compact time-component ${n}`:`button-secondary time-component w-100 ${n}`},getTemplate(e,t){return!e&&this.getOption("time")?ae:!e&&t?te:ne},viewOptions(){const e=this.getOption("isCompact"),t=this.getState("selected"),n=t?t.id:null;return{className:this.getClassName(n,e),template:this.getTemplate(n,e),templateContext:{time:this.getOption("time"),defaultHtml:`<span>${K.placeholderText}</span>`}}},picklistOptions:{canClear:!0,clearText:K.clear,headingText:K.headingText,placeholderText:K.placeholderText,isSelectlist:!0,itemTemplateContext(){return{text:d()(this.model.id,X).format("LT")}}},initialize({time:e}){const t=this.collection.get(e);this.setState({selected:t})},onChangeSelected(e){const t=e?e.id:null;this.triggerMethod("change:time",t)}}),le=h.ZP.patients.shared.components.durationComponent,se=(0,a.map)((0,a.range)(99),(function(e){return{id:e+1}})),oe=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"components"))&&o(l,"durationComponent"))&&o(l,"defaultText"),t))+"</span>"},useData:!0}),re=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||s).call(l,"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+o((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.shared.components.durationComponent.mins",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:41},end:{line:1,column:102}}}),{name:"formatMessage",hash:{min:null!=t?r(t,"id"):t},data:i,loc:{start:{line:1,column:25},end:{line:1,column:111}}}))+"</span>"},useData:!0}),ce=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.components.durationComponent.mins",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:77}}}),{name:"formatMessage",hash:{min:null!=t?o(t,"id"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:86}}}))},useData:!0}),de=M.Z.extend({collection:new(o().Collection)(se),getTemplate(){return this.getState("selected")?re:oe},viewOptions(){return{className:"button-secondary w-100",template:this.getTemplate()}},picklistOptions:{canClear:!0,clearText:le.clear,headingText:le.headingText,placeholderText:le.placeholderText,isSelectlist:!0,itemTemplate:ce},initialize({duration:e}){const t=this.collection.get(e);this.setState({selected:t})},popWidth(){return this.getView().$el.outerWidth()},onChangeSelected(e){const t=e?e.id:0;this.triggerMethod("change:duration",t)}}),he=g.View.extend({className:"button-secondary--compact",tagName:"button",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:32}}}))},useData:!0}),triggers:{click:"click"},onClick(){l().trigger("event-router","form:patientAction",this.model.id,this.model.getForm().id)}}),ue=g.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-info",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))},useData:!0}),triggers:{click:"prevent-row-click"},onRender(){const e=p().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="action-tooltip__flow"><span class="action-tooltip__flow-icon">'+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:94},end:{line:2,column:110}}}))+"</span>"+r("function"==typeof(l=null!=(l=c(n,"flowName")||(null!=t?c(t,"flowName"):t))?l:o)?l.call(s,{name:"flowName",hash:{},data:i,loc:{start:{line:2,column:117},end:{line:2,column:131}}}):l)+"</p>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n      "+(null!=(l=h(n,"if").call(o,null!=t?h(t,"flowName"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:6},end:{line:2,column:142}}}))?l:"")+'\n      <p><span class="action-tooltip__action-icon">'+c((h(n,"far")||t&&h(t,"far")||r).call(o,"file-lines",{name:"far",hash:{},data:i,loc:{start:{line:3,column:51},end:{line:3,column:71}}}))+'</span><span class="action-tooltip__action-name">'+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:3,column:120},end:{line:3,column:130}}}):s)+'</span></p>\n      <p class="action-tooltip__action-details">'+c(typeof(s=null!=(s=h(n,"details")||(null!=t?h(t,"details"):t))?s:r)===d?s.call(o,{name:"details",hash:{},data:i,loc:{start:{line:4,column:48},end:{line:4,column:61}}}):s)+"</p>\n    "},useData:!0}),t=this.model.getFlow();new T.Z({messageHtml:(0,h.SM)(e,{name:this.model.get("name"),flowName:t?t.get("name"):null,details:this._formatDetails(this.model.get("details"))}),uiView:this,ui:this.$el})},_formatDetails:e=>!e||e.length<=140?e:`${(0,S.Z)(e.slice(0,140))}...`}),me=g.View.extend({tagName:"span",className(){return this.getOption("isCompact")?"patient-readonly--compact patient-readonly__status js-no-click":"patient-readonly w-100 js-no-click"},template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="u-margin--l-8">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"stateName")||(null!=t?s(t,"stateName"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"stateName",hash:{},data:i,loc:{start:{line:1,column:142},end:{line:1,column:157}}}):l)+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="action--'+o(e.lambda(null!=(l=null!=t?d(t,"stateOptions"):t)?d(l,"color"):l,t))+'">'+o((d(n,"fa")||t&&d(t,"fa")||c).call(r,null!=(l=null!=t?d(t,"stateOptions"):t)?d(l,"iconType"):l,null!=(l=null!=t?d(t,"stateOptions"):t)?d(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:47},end:{line:1,column:93}}}))+(null!=(l=d(n,"unless").call(r,null!=t?d(t,"isCompact"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:93},end:{line:1,column:175}}}))?l:"")+"</span>"+o("function"==typeof(s=null!=(s=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?s:c)?s.call(r,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:1,column:182},end:{line:1,column:207}}}):s)},useData:!0}),templateContext(){const e=this.model.getState();return{isCompact:this.getOption("isCompact"),stateOptions:e.get("options"),stateName:e.get("name")}}}),pe=g.View.extend({tagName:"span",className(){return this.getOption("isCompact")?"patient-readonly--compact patient-readonly__owner js-no-click":"patient-readonly patient-readonly__owner w-100 js-no-click"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||o).call(s,"circle-user",{name:"far",hash:{classes:"u-margin--r-8"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:45}}}))+"<span>"+r("function"==typeof(l=null!=(l=c(n,"owner")||(null!=t?c(t,"owner"):t))?l:o)?l.call(s,{name:"owner",hash:{},data:i,loc:{start:{line:1,column:51},end:{line:1,column:62}}}):l)+"</span>"},useData:!0}),templateContext(){return{owner:this.model.getOwner().get("name")}}}),ge=g.View.extend({tagName:"span",className:"patient-readonly--compact js-no-click",template:p().template({1:function(e,t,n,a,i){return' class="is-overdue"'},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="u-margin--l-8">'+e.escapeExpression((l(n,"formatDateTime")||t&&l(t,"formatDateTime")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"due_date"):t,"SHORT",{name:"formatDateTime",hash:{inputFormat:"YYYY-MM-DD"},data:i,loc:{start:{line:3,column:73},end:{line:3,column:133}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    <span"+(null!=(l=o(n,"if").call(s,null!=t?o(t,"isOverdue"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:9},end:{line:2,column:52}}}))?l:"")+">\n      "+e.escapeExpression((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(s,"calendar-days",{name:"far",hash:{},data:i,loc:{start:{line:3,column:6},end:{line:3,column:29}}}))+(null!=(l=o(n,"if").call(s,null!=t?o(t,"due_date"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:29},end:{line:3,column:147}}}))?l:"")+"\n    </span>\n  "},useData:!0}),templateContext(){return{isOverdue:this.model.isOverdue()}}}),fe=g.View.extend({tagName:"span",className:"patient-readonly--compact patient-readonly__time js-no-click",template:p().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="u-margin--l-8">'+e.escapeExpression((l(n,"formatDateTime")||t&&l(t,"formatDateTime")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"due_time"):t,"LT",{name:"formatDateTime",hash:{inputFormat:"HH:mm:ss"},data:i,loc:{start:{line:1,column:59},end:{line:1,column:114}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(s,"clock",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+(null!=(l=o(n,"if").call(s,null!=t?o(t,"due_time"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:15},end:{line:1,column:128}}}))?l:"")},useData:!0})}),we=g.View.extend({template:p().template({1:function(e,t,n,a,i){return" is-overdue"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="u-margin--l-8">'+e.escapeExpression((l(n,"formatDateTime")||t&&l(t,"formatDateTime")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"due_date"):t,"SHORT",{name:"formatDateTime",hash:{inputFormat:"YYYY-MM-DD"},data:i,loc:{start:{line:3,column:73},end:{line:3,column:133}}}))+"</span>"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="u-margin--l-8">'+e.escapeExpression((l(n,"formatDateTime")||t&&l(t,"formatDateTime")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"due_time"):t,"LT",{name:"formatDateTime",hash:{inputFormat:"HH:mm:ss"},data:i,loc:{start:{line:6,column:65},end:{line:6,column:120}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <span class="patient-readonly'+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isOverdue"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:33},end:{line:2,column:68}}}))?l:"")+'">\n      '+r((c(n,"far")||t&&c(t,"far")||o).call(s,"calendar-days",{name:"far",hash:{},data:i,loc:{start:{line:3,column:6},end:{line:3,column:29}}}))+(null!=(l=c(n,"if").call(s,null!=t?c(t,"due_date"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:29},end:{line:3,column:147}}}))?l:"")+'\n    </span>\n    <span class="patient-readonly patient-readonly__time '+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isOverdue"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:57},end:{line:5,column:92}}}))?l:"")+'">\n      '+r((c(n,"far")||t&&c(t,"far")||o).call(s,"clock",{name:"far",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:21}}}))+(null!=(l=c(n,"if").call(s,null!=t?c(t,"due_time"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:6,column:21},end:{line:6,column:134}}}))?l:"")+"\n    </span>\n  "},useData:!0}),templateContext(){return{isOverdue:this.model.isOverdue()}}}),ve=g.View.extend({tagName:"span",className:"patient-readonly w-100",template:p().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="u-margin--l-8">'+e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.readOnlyViews.readOnlyDurationView.mins",{name:"intlGet",hash:{},data:i,loc:{start:{line:3,column:50},end:{line:3,column:117}}}),{name:"formatMessage",hash:{min:null!=t?o(t,"duration"):t},data:i,loc:{start:{line:3,column:34},end:{line:3,column:132}}}))+"</span>\n"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="u-margin--l-8">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"readOnlyViews"))&&s(l,"readOnlyDurationView"))&&s(l,"noDuration"),t))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(s,"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"\n"+(null!=(l=o(n,"if").call(s,null!=t?o(t,"duration"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:4},end:{line:6,column:11}}}))?l:"")+"  "},useData:!0})});var be=n(7144),ye=n.n(be),_e=n(4790),xe=n.n(_e);const{ENTER_KEY:ke}=k.default,Ce=g.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarActionViews"))&&s(l,"disabledSaveView"))&&s(l,"saveBtn"),t))+"</button>"},useData:!0})}),Se=g.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarActionViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarActionViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),Oe=g.View.extend({className:"pos--relative",template:ye(),behaviors:[O.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown(e){e.which!==ke||e.preventDefault()},onWatchChange(e){const t=C(e);this.ui.input.val(t),this.ui.spacer.text(t||" "),this.model.set("name",t)},templateContext(){return{isNew:this.model.isNew(),isDisabled:this.getOption("isDisabled"),isReadOnly:!this.model.isAdHoc()||!this.model.canEdit()}},onDomRefresh(){this.model.isNew()&&this.ui.input.focus()}}),Te=g.View.extend({className:"pos--relative",template:xe(),behaviors:[O.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("details",(0,S.Z)(e))}}),De=g.View.extend({template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="sidebar--no-results">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarActionViews"))&&s(l,"readOnlyActionView"))&&s(l,"noDetails"),t))+"</span>"},3:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="flex u-margin--t-8">\n      <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarActionViews"))&&r(l,"readOnlyActionView"))&&r(l,"permissionLabel"),t))+'</h4>\n      <div class="flex flex--grow action-sidebar__info">\n        '+o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"ban",{name:"far",hash:{},data:i,loc:{start:{line:14,column:8},end:{line:14,column:21}}}))+'<span class="u-margin--l-8">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarActionViews"))&&r(l,"readOnlyActionView"))&&r(l,"permissionInfo"),t))+"</span>\n      </div>\n    </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="action-sidebar__name">'+d(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:38},end:{line:2,column:48}}}):s)+'</div>\n    <div class="u-margin--t-8">\n    '+d(typeof(s=null!=(s=u(n,"details")||(null!=t?u(t,"details"):t))?s:r)===c?s.call(o,{name:"details",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:17}}}):s)+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"details"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:17},end:{line:4,column:177}}}))?l:"")+'\n    </div>\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+d(h((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarActionViews"))&&u(l,"readOnlyActionView"))&&u(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+d(h((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarActionViews"))&&u(l,"readOnlyActionView"))&&u(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+d(h((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarActionViews"))&&u(l,"readOnlyActionView"))&&u(l,"dueDayLabel"),t))+'</h4><div class="flex flex-grow" data-due-datetime-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+d(h((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarActionViews"))&&u(l,"readOnlyActionView"))&&u(l,"durationLabel"),t))+'</h4><div class="flex-grow" data-duration-region></div></div>\n'+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:10,column:4},end:{line:17,column:15}}}))?l:"")+"  "},useData:!0}),regions:{state:"[data-state-region]",owner:"[data-owner-region]",dueDateTime:"[data-due-datetime-region]",duration:"[data-duration-region]"},onRender(){this.showState(),this.showOwner(),this.showDueDateTime(),this.showDuration()},showState(){const e=new me({model:this.model});this.showChildView("state",e)},showOwner(){const e=new pe({model:this.model});this.showChildView("owner",e)},showDueDateTime(){const e=new we({model:this.model});this.showChildView("dueDateTime",e)},showDuration(){const e=new ve({model:this.model});this.showChildView("duration",e)},templateContext(){return{canEdit:this.model.canEdit()}}}),Ve=g.View.extend({childViewTriggers:{save:"save",cancel:"cancel"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.lambda,r=e.escapeExpression,c=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,h="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-details-region></div>\n    <div data-save-region></div>\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarActionViews"))&&u(l,"actionView"))&&u(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarActionViews"))&&u(l,"actionView"))&&u(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarActionViews"))&&u(l,"actionView"))&&u(l,"dueDayLabel"),t))+'</h4>\n      <div class="flex flex-grow">'+r(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:d)===h?s.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:8,column:34},end:{line:8,column:59}}}):s)+'<div class="flex-grow" data-due-date-region></div>'+r(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:d)===h?s.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:58},end:{line:9,column:83}}}):s)+'<div class="flex-grow" data-due-time-region></div>'+r(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:d)===h?s.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:58},end:{line:10,column:83}}}):s)+'</div>\n    </div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarActionViews"))&&u(l,"actionView"))&&u(l,"durationLabel"),t))+'</h4><div class="flex-grow" data-duration-region></div></div>\n  '},useData:!0}),regions:{name:"[data-name-region]",details:"[data-details-region]",save:"[data-save-region]",state:"[data-state-region]",owner:"[data-owner-region]",dueDate:"[data-due-date-region]",dueTime:"[data-due-time-region]",duration:"[data-duration-region]"},modelEvents:{"change:_state":"onChangeActionState","change:_owner":"onChangeOwner","change:due_date":"onChangeDue","change:due_time":"onChangeDue","change:duration":"onChangeDuration"},onChangeActionState(){this.model.isDone()!==this.model.getPreviousState().isDone()?this.render():this.showState()},onChangeOwner(){this.isRendered()&&this.showOwner()},onChangeDue(){this.showDueDate(),this.showDueTime()},onChangeDuration(){this.showDuration()},cloneAction(){this.clonedAction&&this.stopListening(this.clonedAction),this.clonedAction=this.model.clone()},onRender(){this.showEditForm(),this.showState(),this.showOwner(),this.showDueDate(),this.showDueTime(),this.showDuration()},showSave(){if(!this.clonedAction.isValid())return this.showDisabledSave();this.showChildView("save",new Se({model:this.clonedAction}))},showDisabledSave(){this.showChildView("save",new Ce)},onSave(){this.getRegion("save").empty()},onCancel(){this.model.isNew()?this.triggerMethod("close",this):this.showEditForm()},showEditForm(){this.cloneAction(),this.listenTo(this.clonedAction,"change:name change:details",this.showSave),this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName(){const e=this.model.isDone();this.showChildView("name",new Oe({model:this.clonedAction,isDisabled:e}))},showDetails(){this.showChildView("details",new Te({model:this.clonedAction}))},showState(){const e=this.model.isNew(),t=new I({stateId:this.model.get("_state"),state:{isDisabled:e}});this.listenTo(t,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",t)},showOwner(){const e=this.model.isNew()||this.model.isDone(),t=new $({owner:this.model.getOwner(),state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",t)},showDueDate(){const e=this.model.isNew()||this.model.isDone(),t=new Q({date:this.model.get("due_date"),state:{isDisabled:e},isOverdue:this.model.isOverdue()});this.listenTo(t,"change:due",(e=>{this.model.saveDueDate(e)})),this.showChildView("dueDate",t)},showDueTime(){const e=this.model.isNew()||this.model.isDone()||!this.model.get("due_date"),t=new ie({time:this.model.get("due_time"),isOverdue:this.model.isOverdue(),state:{isDisabled:e}});this.listenTo(t,"change:time",(e=>{this.model.saveDueTime(e)})),this.showChildView("dueTime",t)},showDuration(){const e=this.model.isNew()||this.model.isDone(),t=new de({duration:this.model.get("duration"),state:{isDisabled:e}});this.listenTo(t,"change:duration",(e=>{this.model.save({duration:e})})),this.showChildView("duration",t)}});var Me=n(5195),Pe=n.n(Me);const Ee=g.View.extend({attributes(){return{disabled:!!this.getOption("isShowingForm")}},tagName:"button",className:"button-secondary w-100 action-sidebar__form",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||o).call(s,"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:32}}}))+"<span>"+r("function"==typeof(l=null!=(l=c(n,"name")||(null!=t?c(t,"name"):t))?l:o)?l.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:38},end:{line:1,column:48}}}):l)+"</span>"},useData:!0}),triggers:{click:"click"}}),je=g.View.extend({className:"sidebar__dialog",triggers:{"click .js-share":"click:share","click .js-cancel":"click:cancelShare","click .js-undo-cancel":"click:undoCancelShare","click .js-response":"click:response"},template:Pe(),templateContext(){const e=this.model.getPatient(),t=this.model.get("sharing"),n=function(e){switch(e){case u.q$.PENDING:case u.q$.SENT:return{iconType:"fas",icon:"circle-dot",color:"black"};case u.q$.RESPONDED:return{iconType:"fas",icon:"circle-check",color:"green"};case u.q$.CANCELED:case u.q$.ERROR_OPT_OUT:return{iconType:"far",icon:"octagon-minus",color:"orange"};default:return{iconType:"fas",icon:"circle-exclamation",color:"red"}}}(t),a=t===u.q$.PENDING,i=t===u.q$.SENT,l=t===u.q$.RESPONDED,s=t===u.q$.CANCELED;return{stateOptions:n,isWaiting:i||a,isResponded:l,isCanceled:s,isError:!(a||i||l||s),patient:e.pick("first_name","last_name"),isDone:this.model.isDone()}}}),Ae=g.View.extend({modelEvents:{"change:sharing":"onChangeSharing","change:_state":"onChangeActionState"},childViewTriggers:{"click:share":"click:share","click:cancelShare":"click:cancelShare","click:undoCancelShare":"click:undoCancelShare"},template:p().template({1:function(e,t,n,a,i){return" u-margin--t-8"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h4 class="sidebar__label u-margin--t-8">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarFormsViews"))&&s(l,"formLayoutView"))&&s(l,"formLabel"),t))+"</h4>"},5:function(e,t,n,a,i){return" u-margin--t-24"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex'+(null!=(l=o(n,"if").call(s,null!=t?o(t,"hasForm"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:20},end:{line:2,column:56}}}))?l:"")+'">\n      '+(null!=(l=o(n,"if").call(s,null!=t?o(t,"hasForm"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:6},end:{line:3,column:158}}}))?l:"")+'\n      <div class="flex-grow" data-form-region></div>\n    </div>\n    <div class="flex'+(null!=(l=o(n,"if").call(s,null!=t?o(t,"hasSharing"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:6,column:20},end:{line:6,column:60}}}))?l:"")+'">\n      <div class="flex-grow" data-form-sharing-region></div>\n    </div>\n  '},useData:!0}),templateContext(){return{hasSharing:this.model.hasSharing(),hasForm:!!this.model.getForm()}},regions:{form:"[data-form-region]",formSharing:"[data-form-sharing-region]"},onChangeSharing(){this.showFormSharing()},onChangeActionState(){this.showFormSharing()},onRender(){this.showForm(),this.showFormSharing()},showForm(){const e=this.model.getForm();if(!e)return;const t=new Ee({model:e,isShowingForm:this.getOption("isShowingForm")});this.listenTo(t,"click",(()=>{this.triggerMethod("click:form",e)})),this.showChildView("form",t)},showFormSharing(){if(!this.model.hasSharing())return;const e=new je({model:this.model});this.listenTo(e,"click:response",(()=>{this.triggerMethod("click:form",this.model.getForm())})),this.showChildView("formSharing",e)}}),Ne=g.View.extend({className:"comment__actions",template:p().template({1:function(e,t,n,a,i){return"disabled"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"commentsViews"))&&s(l,"postCommentView"))&&s(l,"postBtn"),t))+"\n"},5:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"commentsViews"))&&s(l,"postCommentView"))&&s(l,"saveBtn"),t))+"\n"},7:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--text u-margin--r-4 js-cancel">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"commentsViews"))&&s(l,"postCommentView"))&&s(l,"cancelBtn"),t))+"</button>"},9:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--text u-float--left comment__delete js-delete"><span class="u-margin--r-4">'+s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-can",{name:"far",hash:{},data:i,loc:{start:{line:10,column:118},end:{line:10,column:137}}}))+"</span>"+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"commentsViews"))&&o(l,"postCommentView"))&&o(l,"deleteBtn"),t))+"</button>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-post" '+(null!=(l=o(n,"if").call(s,null!=t?o(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:42},end:{line:2,column:75}}}))?l:"")+">\n"+(null!=(l=o(n,"if").call(s,null!=t?o(t,"isNew"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:3,column:6},end:{line:7,column:13}}}))?l:"")+"    </button>\n    "+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"shouldHideCancel"):t,{name:"unless",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i,loc:{start:{line:9,column:4},end:{line:9,column:172}}}))?l:"")+"\n    "+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"isNew"):t,{name:"unless",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i,loc:{start:{line:10,column:4},end:{line:10,column:231}}}))?l:"")+"\n  "},useData:!0}),templateContext(){return{shouldHideCancel:this.getOption("shouldHideCancel"),isDisabled:!this.model.isValid()||!this.model.hasChanged("message"),isNew:this.model.isNew()}},triggers:{"click .js-cancel":"cancel","click .js-post":"post","click .js-delete":"delete"}}),Fe=g.View.extend({behaviors:[O.Z],modelEvents:{"change:message":"showPostView"},ui:{input:".js-input",spacer:".js-spacer"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex comment__form">\n      <span class="comment__author-label">'+d(typeof(s=null!=(s=h(n,"initials")||(null!=t?h(t,"initials"):t))?s:r)===c?s.call(o,{name:"initials",hash:{},data:i,loc:{start:{line:3,column:42},end:{line:3,column:56}}}):s)+'</span>\n      <div class="flex-grow pos--relative">\n        <textarea class="input-secondary textarea-flex__input js-input" placeholder="'+d(e.lambda((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"shared"))&&h(l,"commentsViews"))&&h(l,"commentFormView"))&&h(l,"placeholder"),t))+'">'+d(typeof(s=null!=(s=h(n,"message")||(null!=t?h(t,"message"):t))?s:r)===c?s.call(o,{name:"message",hash:{},data:i,loc:{start:{line:5,column:156},end:{line:5,column:169}}}):s)+'</textarea>\n        <div class="textarea-flex__container input-secondary comment__input js-spacer">'+d(typeof(s=null!=(s=h(n,"message")||(null!=t?h(t,"message"):t))?s:r)===c?s.call(o,{name:"message",hash:{},data:i,loc:{start:{line:6,column:87},end:{line:6,column:100}}}):s)+"</div>\n      </div>\n    </div>\n    <div data-post-region></div>\n  "},useData:!0}),regions:{post:"[data-post-region]"},childViewTriggers:{post:"post:comment",cancel:"cancel:comment",delete:"confirm:delete"},templateContext(){return{initials:this.model.getClinician().getInitials()}},onRender(){this.showPostView()},onWatchChange(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("message",(0,S.Z)(e))},showPostView(){const e=this.model.isNew()&&!this.model.get("message");this.showChildView("post",new Ne({model:this.model,shouldHideCancel:e}))},onConfirmDelete(){const e=l().request("modal","show:small",{bodyText:h.ZP.patients.shared.commentsViews.commentFormView.deleteModal.bodyText,headingText:h.ZP.patients.shared.commentsViews.commentFormView.deleteModal.headingText,submitText:h.ZP.patients.shared.commentsViews.commentFormView.deleteModal.submitText,buttonClass:"button--red",onSubmit:()=>{e.destroy(),this.triggerMethod("delete:comment",this.model)}})}});var Ie=n(4861);const Re=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"created",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:56}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:57}}}),{name:"formatHTMLMessage",hash:{team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:83}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Le=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"clinicianAssigned",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:66}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:67}}}),{name:"formatHTMLMessage",hash:{to_name:null!=t?r(t,"to_clinician"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:116}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),qe=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"actionCopiedFromProgram",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:72}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:73}}}),{name:"formatHTMLMessage",hash:{source:null!=t?r(t,"source"):t,program:null!=t?r(t,"program"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:133}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Be=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"detailsUpdated",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:63}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:64}}}),{name:"formatHTMLMessage",hash:{team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:90}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),He=p().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,(o(n,"getI18nSource")||t&&o(t,"getI18nSource")||s).call(l,"dueDateCleared",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:3,column:31},end:{line:3,column:63}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:3,column:22},end:{line:3,column:64}}}),{name:"formatHTMLMessage",hash:{team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:3,column:2},end:{line:3,column:91}}}))+"\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,(o(n,"getI18nSource")||t&&o(t,"getI18nSource")||s).call(l,"dueDateUpdated",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:5,column:31},end:{line:5,column:63}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:64}}}),{name:"formatHTMLMessage",hash:{date:(o(n,"formatDateTime")||t&&o(t,"formatDateTime")||s).call(l,null!=t?o(t,"value"):t,"LONG",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:5,column:96},end:{line:5,column:125}}}),team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:5,column:2},end:{line:5,column:127}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"value"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:2},end:{line:6,column:13}}}))?l:"")+"  <div>"+e.escapeExpression((o(n,"formatDateTime")||t&&o(t,"formatDateTime")||e.hooks.helperMissing).call(s,null!=t?o(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+"</div>\n"},useData:!0}),Ge=p().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,(o(n,"getI18nSource")||t&&o(t,"getI18nSource")||s).call(l,"dueTimeCleared",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:3,column:31},end:{line:3,column:63}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:3,column:22},end:{line:3,column:64}}}),{name:"formatHTMLMessage",hash:{team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:3,column:2},end:{line:3,column:91}}}))+"\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,(o(n,"getI18nSource")||t&&o(t,"getI18nSource")||s).call(l,"dueTimeUpdated",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:5,column:31},end:{line:5,column:63}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:64}}}),{name:"formatHTMLMessage",hash:{time:(o(n,"formatDateTime")||t&&o(t,"formatDateTime")||s).call(l,null!=t?o(t,"value"):t,"LT",{name:"formatDateTime",hash:{inputFormat:"HH:mm:ss"},data:i,loc:{start:{line:5,column:96},end:{line:5,column:146}}}),team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:5,column:2},end:{line:5,column:148}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"value"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:2},end:{line:6,column:13}}}))?l:"")+"  <div>"+e.escapeExpression((o(n,"formatDateTime")||t&&o(t,"formatDateTime")||e.hooks.helperMissing).call(s,null!=t?o(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+"</div>\n"},useData:!0}),We=p().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,(o(n,"getI18nSource")||t&&o(t,"getI18nSource")||s).call(l,"durationCleared",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:3,column:31},end:{line:3,column:64}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:3,column:22},end:{line:3,column:65}}}),{name:"formatHTMLMessage",hash:{team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:3,column:2},end:{line:3,column:91}}}))+"\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,(o(n,"getI18nSource")||t&&o(t,"getI18nSource")||s).call(l,"durationUpdated",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:5,column:31},end:{line:5,column:64}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:65}}}),{name:"formatHTMLMessage",hash:{duration:null!=t?o(t,"value"):t,team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:5,column:2},end:{line:5,column:108}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"value"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:2},end:{line:6,column:13}}}))?l:"")+"  <div>"+e.escapeExpression((o(n,"formatDateTime")||t&&o(t,"formatDateTime")||e.hooks.helperMissing).call(s,null!=t?o(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+"</div>\n"},useData:!0}),Ze=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"formUpdated",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:60}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:61}}}),{name:"formatHTMLMessage",hash:{form:null!=t?r(t,"form"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:99}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),$e=p().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,(o(n,"getI18nSource")||t&&o(t,"getI18nSource")||s).call(l,"formResponded",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:3,column:33},end:{line:3,column:64}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:3,column:24},end:{line:3,column:65}}}),{name:"formatHTMLMessage",hash:{form:null!=t?o(t,"form"):t,team:null!=t?o(t,"team"):t,name:null!=t?o(t,"name"):t},data:i,loc:{start:{line:3,column:4},end:{line:3,column:103}}}))+"\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,(o(n,"getI18nSource")||t&&o(t,"getI18nSource")||s).call(l,"formRecipientResponded",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:5,column:33},end:{line:5,column:73}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:24},end:{line:5,column:74}}}),{name:"formatHTMLMessage",hash:{form:null!=t?o(t,"form"):t,recipient:null!=t?o(t,"recipient"):t},data:i,loc:{start:{line:5,column:4},end:{line:5,column:110}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=o(n,"if").call(s,null!=t?o(t,"_editor"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:2},end:{line:6,column:9}}}))?l:"")+"  <div>"+e.escapeExpression((o(n,"formatDateTime")||t&&o(t,"formatDateTime")||e.hooks.helperMissing).call(s,null!=t?o(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+"</div>\n"},useData:!0}),ze=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"formRemoved",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:60}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:61}}}),{name:"formatHTMLMessage",hash:{form:null!=t?r(t,"form"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:99}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Ye=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"nameUpdated",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:60}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:61}}}),{name:"formatHTMLMessage",hash:{from_name:null!=t?r(t,"previous"):t,to_name:null!=t?r(t,"value"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:124}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Ue=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"teamAssigned",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:61}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:62}}}),{name:"formatHTMLMessage",hash:{to_team:null!=t?r(t,"to_team"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:106}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Qe=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"stateUpdated",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:61}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:62}}}),{name:"formatHTMLMessage",hash:{to_state:null!=t?r(t,"to_state"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:108}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Ke=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"sharingCanceled",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:64}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:65}}}),{name:"formatHTMLMessage",hash:{team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:91}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Xe=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"sharingSent",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:60}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:61}}}),{name:"formatHTMLMessage",hash:{form:null!=t?r(t,"form"):t,recipient:null!=t?r(t,"recipient"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:97}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Je=g.View.extend({className:"u-margin--b-16",ui:{edit:".js-edit"},triggers:{"click @ui.edit":"click:edit"},childViewTriggers:{"cancel:comment":"cancel:edit","post:comment":"save:comment","delete:comment":"delete:comment"},regions:{comment:"[data-comment-activity-region]"},template:p().template({1:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="js-edit comment__edit">'+s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"pen",{name:"far",hash:{},data:i,loc:{start:{line:8,column:61},end:{line:8,column:74}}}))+" "+s(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"activityViews"))&&o(l,"commentView"))&&o(l,"edit"),t))+"</span>"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="comment__edited"> '+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"activityViews"))&&s(l,"commentView"))&&s(l,"edited"),t))+" </span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div data-comment-activity-region>\n      <div class="comment__item">\n        <div class="comment__author-label">'+d(typeof(s=null!=(s=h(n,"initials")||(null!=t?h(t,"initials"):t))?s:r)===c?s.call(o,{name:"initials",hash:{},data:i,loc:{start:{line:4,column:43},end:{line:4,column:57}}}):s)+'</div>\n        <div class="comment__title">\n          <span class="comment__author-name">'+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:6,column:45},end:{line:6,column:55}}}):s)+'</span>\n          <span class="comment__timestamp">'+d((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:43},end:{line:7,column:84}}}))+"</span>\n          "+(null!=(l=h(n,"if").call(o,null!=t?h(t,"canEdit"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:8,column:10},end:{line:8,column:155}}}))?l:"")+'\n        </div>\n        <div class="comment__message">'+d(typeof(s=null!=(s=h(n,"message")||(null!=t?h(t,"message"):t))?s:r)===c?s.call(o,{name:"message",hash:{},data:i,loc:{start:{line:10,column:38},end:{line:10,column:51}}}):s)+(null!=(l=h(n,"if").call(o,null!=t?h(t,"edited_at"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:10,column:51},end:{line:10,column:182}}}))?l:"")+"</div>\n      </div>\n    </div>\n  "},useData:!0}),templateContext(){const e=this.model.getClinician(),t=l().request("bootstrap","currentUser");return{canEdit:e.id===t.id,name:e.get("name"),initials:e.getInitials()}},onRender(){const e=this.model.get("edited_at");if(!e)return;const t=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.sidebar.action.activityViews.commentView.editTooltip",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:20},end:{line:1,column:93}}}),{name:"formatHTMLMessage",hash:{edited:(o(n,"formatDateTime")||t&&o(t,"formatDateTime")||s).call(l,null!=t?o(t,"edited"):t,"TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:104},end:{line:1,column:134}}})},data:i,loc:{start:{line:1,column:0},end:{line:1,column:137}}}))},useData:!0});new T.Z({messageHtml:(0,h.SM)(t,{edited:e}),uiView:this,ui:this.ui.edit})},onClickEdit(){this.showChildView("comment",new Fe({model:this.model.clone()}))},onSaveComment({model:e}){this.model.save({message:e.get("message"),edited_at:d().utc().format()}),this.render()},onCancelEdit(){this.render()},onDeleteComment(){this.model.destroy()}}),et=g.View.extend({className:"action-sidebar__activity-item",getTemplate(){const e=this.model.get("event_type"),t={ActionClinicianAssigned:Le,ActionCreated:Re,ActionDetailsUpdated:Be,ActionDueDateUpdated:He,ActionDueTimeUpdated:Ge,ActionDurationUpdated:We,ActionFormUpdated:Ze,ActionFormResponded:$e,ActionFormRemoved:ze,ActionNameUpdated:Ye,ActionCopiedFromProgramAction:qe,ActionTeamAssigned:Ue,ActionStateUpdated:Qe};if("ActionSharingUpdated"===e){const e=this.model.get("value");if(e===u.q$.SENT)return Xe;if(e===u.q$.CANCELED)return Ke}return t[e]?t[e]:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return""},useData:!0})},templateContext(){const e=this.model.getRecipient(),t=this.model.getEditor(),n=this.model.getClinician(),a=this.model.getProgram(),i=this.model.getForm(),l=`patients.sidebar.action.activityViews.${this.model.get("source")}`;return{recipient:e?`${e.get("first_name")} ${e.get("last_name")}`:null,name:t.get("name"),team:t.getTeam().get("name"),to_clinician:n.get("name"),to_team:this.model.getTeam().get("name"),to_state:this.model.getState().get("name"),program:a?a.get("name"):null,form:i?i.get("name"):null,getI18nSource:e=>`${l}.${e}`}}}),tt=g.CollectionView.extend({className:"u-margin--t-24",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <h3 class="sidebar__heading">\n      '+s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"timeline-arrow",{name:"far",hash:{},data:i,loc:{start:{line:3,column:6},end:{line:3,column:30}}}))+'<span class="u-margin--l-8">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"activityViews"))&&o(l,"activityHeadingText"),t))+'</span>\n    </h3>\n    <div class="u-margin--t-16 sidebar__activity" data-activities-region></div>\n  '},useData:!0}),childViewContainer:"[data-activities-region]",childView:e=>"events"===e.type?et:Je,viewFilter({model:e}){return"ActionCreated"!==e.get("event_type")||!this.model.get("_program_action")},viewComparator(e,t){return(0,Ie.XQ)("asc",this._getSortDate(e.model),this._getSortDate(t.model))},_getSortDate:e=>e.get("date")?e.get("date"):e.get("created_at")}),nt=g.View.extend({className:"sidebar__footer flex",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"activityViews"))&&d(l,"createdAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"createdAt"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:134},end:{line:2,column:172}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"activityViews"))&&d(l,"updatedAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:105},end:{line:3,column:144}}}))+"</div></div>\n  "},useData:!0}),templateContext(){return{createdAt:this.getOption("createdEvent").get("date")}}});var at=n(2681);const it=g.View.extend({className:"action-sidebar__no-results",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarAttachmentsViews"))&&s(l,"emptyView"),t))},useData:!0})}),lt=g.View.extend({className:"u-margin--t-16",modelEvents:{"change:_progress":"onChangeProgress","change:_download":"render"},downloadTemplate:p().template({1:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <a class="action-sidebar__attachment-action js-remove">\n          '+s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-can",{name:"far",hash:{},data:i,loc:{start:{line:9,column:10},end:{line:9,column:29}}}))+" <span>"+s(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"actionSidebarAttachmentsViews"))&&o(l,"attachmentView"))&&o(l,"removeText"),t))+"</span>\n        </a>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <a class="action-sidebar__attachment-filename" target="_blank" href="'+d(typeof(s=null!=(s=h(n,"_view")||(null!=t?h(t,"_view"):t))?s:r)===c?s.call(o,{name:"_view",hash:{},data:i,loc:{start:{line:2,column:73},end:{line:2,column:82}}}):s)+'">'+d(typeof(s=null!=(s=h(n,"filename")||(null!=t?h(t,"filename"):t))?s:r)===c?s.call(o,{name:"filename",hash:{},data:i,loc:{start:{line:2,column:84},end:{line:2,column:96}}}):s)+'</a>\n    <div class="flex">\n      <a class="action-sidebar__attachment-action flex-grow" href="'+d(typeof(s=null!=(s=h(n,"_download")||(null!=t?h(t,"_download"):t))?s:r)===c?s.call(o,{name:"_download",hash:{},data:i,loc:{start:{line:4,column:67},end:{line:4,column:80}}}):s)+'" download>\n        '+d((h(n,"far")||t&&h(t,"far")||r).call(o,"download",{name:"far",hash:{},data:i,loc:{start:{line:5,column:8},end:{line:5,column:26}}}))+" <span>"+d(e.lambda((l=(l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"sidebar"))&&h(l,"action"))&&h(l,"actionSidebarAttachmentsViews"))&&h(l,"attachmentView"))&&h(l,"downloadText"),t))+"</span>\n      </a>\n"+(null!=(l=h(n,"if").call(o,null!=t?h(t,"canRemoveAttachments"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:7,column:5},end:{line:11,column:13}}}))?l:"")+"    </div>\n  "},useData:!0}),uploadTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="action-sidebar__attachment-filename">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"filename")||(null!=t?s(t,"filename"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"filename",hash:{},data:i,loc:{start:{line:2,column:53},end:{line:2,column:65}}}):l)+'</div>\n    <div class="loader__bar u-margin--t-8 js-progress-bar">\n      <div class="loader__bar-progress js-progress"></div>\n    </div>\n  '},useData:!0}),ui:{progress:".js-progress",remove:".js-remove"},triggers:{"click @ui.remove":"click:remove"},onChangeProgress(){this.isRendered()&&this.ui.progress.length&&(0,at.Z)({targets:this.ui.progress[0],width:`${this.model.get("_progress")}%`,easing:"easeInOutSine"})},onClickRemove(){const e=l().request("modal","show:small",{bodyText:h.ZP.patients.sidebar.action.actionSidebarAttachmentsViews.removeModal.bodyText,headingText:h.ZP.patients.sidebar.action.actionSidebarAttachmentsViews.removeModal.headingText,submitText:h.ZP.patients.sidebar.action.actionSidebarAttachmentsViews.removeModal.submitText,buttonClass:"button--red",onSubmit:()=>{e.destroy(),this.triggerMethod("remove:attachment",this.model)}})},getTemplate(){return this.model.get("_download")?this.downloadTemplate:this.uploadTemplate},templateContext(){return{filename:this.model.getFilename(),canRemoveAttachments:this.getOption("canRemoveAttachments")}}}),st=g.CollectionView.extend({className:"u-margin--t-24",collectionEvents:{changeId:"filter"},template:p().template({1:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <form>\n          <input type="file" id="upload-attachment" accept=".pdf" class="action-sidebar__attachment-file js-file">\n          <label for="upload-attachment" class="button-primary u-margin--t-16 js-add">'+s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"paperclip",{name:"far",hash:{},data:i,loc:{start:{line:10,column:86},end:{line:10,column:105}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"actionSidebarAttachmentsViews"))&&o(l,"attachmentsViews"))&&o(l,"addAttachment"),t))+"</span></label>\n        </form>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__attachments">\n      <h3 class="sidebar__heading">\n        '+o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(s,"paperclip",{name:"far",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:27}}}))+'<span class="u-margin--l-8">'+o(e.lambda((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarAttachmentsViews"))&&r(l,"attachmentsViews"))&&r(l,"attachmentsHeadingText"),t))+"</span>\n      </h3>\n      <div data-attachments-files-region></div>\n"+(null!=(l=r(n,"if").call(s,null!=t?r(t,"canUploadAttachments"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:7,column:6},end:{line:12,column:13}}}))?l:"")+"    </div>\n  "},useData:!0}),templateContext(){return{canUploadAttachments:this.getOption("canUploadAttachments")}},childViewContainer:"[data-attachments-files-region]",childView:lt,childViewOptions(){return{canRemoveAttachments:this.getOption("canRemoveAttachments")}},emptyView:it,viewComparator:(e,t)=>(0,Ie.XQ)("desc",e.model.get("created_at"),t.model.get("created_at")),viewFilter:({model:e})=>!e.isNew(),ui:{file:".js-file",add:".js-add"},events:{"change @ui.file":"onChangeFile","click @ui.add":"onClickAdd"},onClickAdd(){this.ui.file[0].value=""},onChangeFile(){const e=this.ui.file[0].files[0];e&&this.triggerMethod("add:attachment",e)},childViewTriggers:{"remove:attachment":"remove:attachment"}}),ot=r.Z.extend({setAccess(){const e=!this.action.isFlowDone()&&this.action.canEdit(),t=this.action.canDelete();this.setState({canEdit:e,canDelete:t})},stateEvents:{"change:canEdit":"onStateChangeCanEdit","change:canDelete":"onStateChangeCanDelete"},onStateChangeCanEdit(){this.showAction()},onStateChangeCanDelete(){this.showMenu()},onBeforeStart({action:e,isShowingForm:t}){this.action=e,this.isShowingForm=t,this.setAccess(),this.setView(new x({model:this.action}));const n=this.action.getFlow();n&&this.listenTo(n,"change:_state",this.setAccess),this.listenTo(e,"change:_owner",this.onChangeOwner),this.showMenu(),this.showAction(),this.showForm(),this.action.isNew()||this.getRegion("activity").startPreloader(),this.showView()},onBeforeStop(){const e=this.action.getFlow();e&&this.stopListening(e),this.stopListening(this.action)},beforeStart(){if(!this.action.isNew())return[l().request("entities","fetch:actionEvents:collection",this.action.id),l().request("entities","fetch:comments:collection:byAction",this.action.id),l().request("entities","fetch:files:collection:byAction",this.action.id)]},onChangeOwner(){this.setAccess(),this.isRunning()&&this.showAttachments()},onStart(e,t,n,a){this.action.isNew()||(this.activityCollection=new(o().Collection)([...t.models,...n.models]),this.attachments=a,this.showActivity(),this.showNewCommentForm(),this.showAttachments())},viewEvents:{close:"stop"},showAction(){if(!this.getState("canEdit"))return void this.showChildView("action",new De({model:this.action}));const e=new Ve({model:this.action});this.listenTo(e,{save:this.onSave,close:this.stop}),this.showChildView("action",e)},showMenu(){if(!this.getState("canDelete"))return void this.getRegion("menu").empty();const e=new _({model:this.action});this.listenTo(e,"delete",this.onDelete),this.showChildView("menu",e)},showForm(){if(!this.action.getForm()&&!this.action.hasSharing())return;const e=this.showChildView("form",new Ae({model:this.action,isShowingForm:this.isShowingForm}));this.listenTo(e,{"click:form":this.onClickForm,"click:share":this.onClickShare,"click:cancelShare":this.onClickCancel,"click:undoCancelShare":this.onClickUndoCancel})},showActivity(){this.showChildView("activity",new tt({collection:this.activityCollection,model:this.action}));const e=this.activityCollection.find({event_type:"ActionCreated"});this.showChildView("timestamps",new nt({model:this.action,createdEvent:e}))},showNewCommentForm(){const e=l().request("bootstrap","currentUser"),t=this.showChildView("comment",new Fe({model:l().request("entities","comments:model",{_action:this.action.id,_clinician:e.id})}));this.listenTo(t,{"post:comment":this.onPostNewComment,"cancel:comment":this.onCancelNewComment})},showAttachments(){const e=!!l().request("bootstrap","setting","upload_attachments")&&this.action.hasAllowedUploads();if(!e&&!this.attachments.length)return;const t=new st({collection:this.attachments,canUploadAttachments:e,canRemoveAttachments:this.action.canEdit()});this.listenTo(t,{"add:attachment":this.onAddAttachment,"remove:attachment":this.onRemoveAttachment}),this.showChildView("attachments",t)},onAddAttachment(e){const t=this.attachments.add({_action:this.action.id,_patient:this.action.getPatient().id,created_at:d().utc().format()});t.upload(e),this.listenTo(t,"upload:failed",(()=>{l().request("alert","show:error",h.ZP.patients.sidebar.actionSidebarApp.uploadError)}))},onRemoveAttachment(e){e.destroy()},onSave({model:e}){e.isNew()?this.action.saveAll(e.attributes).then((()=>{l().trigger("event-router","patient:action",this.action.get("_patient"),this.action.id)})):this.action.save(e.pick("name","details"))},onDelete(){this.action.destroy({wait:!0}).then((()=>{this.stop()})).catch((({responseData:e})=>{l().request("alert","show:apiError",e)}))},onStop(){this.action.trigger("editing",!1),this.action&&this.action.isNew()&&this.action.destroy(),l().request("sidebar","close")},onClickForm(e){l().trigger("event-router","form:patientAction",this.action.id,e.id)},onClickShare(){this.action.save({sharing:u.q$.PENDING})},onClickCancel(){this.action.save({sharing:u.q$.CANCELED})},onClickUndoCancel(){this.action.save({sharing:u.q$.PENDING})},onPostNewComment({model:e}){e.set({created_at:d().utc().format()}).save(),this.activityCollection.add(e),this.showNewCommentForm()},onCancelNewComment(){this.showNewCommentForm()}}),rt=h.ZP.patients.shared.flowsViews,ct=I.extend({onPicklistSelect({model:e}){e.isDone()&&this.getOption("flow")?this.shouldSelectDone(e):this.setSelectedStatus(e)},shouldSelectDone(e){if(this.getOption("flow").isAllDone())return void this.setSelectedStatus(e);if(this.popRegion.empty(),l().request("bootstrap","setting","require_done_flow"))return void l().request("modal","show:small",{bodyText:rt.requireDoneModal.bodyText,headingText:rt.requireDoneModal.headingText,submitText:rt.requireDoneModal.submitText,cancelText:!1,buttonClass:"button--blue"});const t=l().request("modal","show:small",{bodyText:rt.doneModal.bodyText,headingText:rt.doneModal.headingText,submitText:rt.doneModal.submitText,onSubmit:()=>{this.setSelectedStatus(e),t.destroy()}})},setSelectedStatus(e){this.setState("selected",e),this.popRegion.empty()}});var dt=n(3220),ht=n.n(dt);const ut=h.ZP.patients.sidebar.flow.flowSidebarViews,mt=g.View.extend({className:"sidebar__footer flex",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarViews"))&&d(l,"timestampsView"))&&d(l,"createdAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:150},end:{line:2,column:189}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarViews"))&&d(l,"timestampsView"))&&d(l,"updatedAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:121},end:{line:3,column:160}}}))+"</div></div>\n  "},useData:!0})}),pt=g.View.extend({tagName:"button",className:"button--icon",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}))},useData:!0}),triggers:{click:"click"}}),gt=g.View.extend({className:"flex u-margin--t-8",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"sidebar"))&&r(l,"flow"))&&r(l,"flowSidebarViews"))&&r(l,"permissionView"))&&r(l,"label"),t))+'</h4>\n    <div class="flex flex--grow action-sidebar__info">\n      '+o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"ban",{name:"far",hash:{},data:i,loc:{start:{line:4,column:6},end:{line:4,column:19}}}))+'<span class="u-margin--l-8">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"sidebar"))&&r(l,"flow"))&&r(l,"flowSidebarViews"))&&r(l,"permissionView"))&&r(l,"info"),t))+"</span>\n    </div>\n  "},useData:!0})}),ft=g.View.extend({childViewTriggers:{save:"save",cancel:"cancel"},className:"sidebar flex-region",template:ht(),regions:{menu:"[data-menu-region]",state:"[data-state-region]",owner:"[data-owner-region]",permission:"[data-permission-region]",activity:{el:"[data-activity-region]",regionClass:w.Z},timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close"},templateContext(){return{canEdit:this.model.canEdit()}},modelEvents:{"change:_state":"showOwner","change:_owner":"showFlow"},onAttach(){(0,f.$)(this.el)},onRender(){this.showFlow(),this.showTimestamps()},showFlow(){this.canEdit=this.model.canEdit(),this.canDelete=this.model.canDelete(),this.showActions(),this.showMenu()},showActions(){this.showState(),this.showOwner(),this.showPermission()},showMenu(){if(!this.canDelete)return void this.getRegion("menu").empty();const e=new pt;this.listenTo(e,"click",this.onClickMenu),this.showChildView("menu",e)},onClickMenu(e){const t=new(o().Collection)([{onSelect:(0,a.bind)(this.triggerMethod,this,"delete")}]);new v.Z({ui:e.$el,uiView:this,headingText:ut.layoutView.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"flow"))&&o(l,"flowSidebarViews"))&&o(l,"layoutView"))&&o(l,"delete"),t))+"</span>"},useData:!0}),lists:[{collection:t}],align:"right",popWidth:248}).show()},showState(){if(!this.canEdit){const e=new me({model:this.model});return void this.showChildView("state",e)}const e=new ct({flow:this.model,stateId:this.model.get("_state")});this.listenTo(e,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",e)},showOwner(){if(!this.canEdit){const e=new pe({model:this.model});return void this.showChildView("owner",e)}const e=this.model.isDone(),t=new $({owner:this.model.getOwner(),state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",t)},showTimestamps(){this.showChildView("timestamps",new mt({model:this.model}))},showPermission(){this.canEdit?this.getRegion("permission").empty():this.showChildView("permission",new gt)}}),wt=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"programStarted",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:63}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:64}}}),{name:"formatHTMLMessage",hash:{program:null!=t?r(t,"program"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:108}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),vt=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"clinicianAssigned",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:66}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:67}}}),{name:"formatHTMLMessage",hash:{to_name:null!=t?r(t,"to_clinician"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:116}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),bt=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"detailsUpdated",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:63}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:64}}}),{name:"formatHTMLMessage",hash:{team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:90}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),yt=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"nameUpdated",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:60}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:61}}}),{name:"formatHTMLMessage",hash:{from_name:null!=t?r(t,"previous"):t,to_name:null!=t?r(t,"value"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:124}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),_t=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"teamAssigned",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:61}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:62}}}),{name:"formatHTMLMessage",hash:{to_team:null!=t?r(t,"to_team"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:106}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),xt=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+o((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,(r(n,"getI18nSource")||t&&r(t,"getI18nSource")||s).call(l,"stateUpdated",{name:"getI18nSource",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:61}}}),{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:62}}}),{name:"formatHTMLMessage",hash:{to_state:null!=t?r(t,"to_state"):t,team:null!=t?r(t,"team"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:108}}}))+"\n  <div>"+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),kt=g.View.extend({className:"patient-flow-sidebar__activity-item",getTemplate(){const e=this.model.get("event_type"),t={FlowProgramStarted:wt,FlowClinicianAssigned:vt,FlowDetailsUpdated:bt,FlowNameUpdated:yt,FlowTeamAssigned:_t,FlowStateUpdated:xt};return t[e]?t[e]:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return""},useData:!0})},templateContext(){const e=this.model.getEditor(),t=this.model.getClinician(),n=this.model.getProgram(),a=`patients.sidebar.flow.activityViews.${this.model.get("source")}`;return{name:e.get("name"),team:e.getTeam().get("name"),program:n?n.get("name"):null,to_clinician:t.get("name"),to_team:this.model.getTeam().get("name"),to_state:this.model.getState().get("name"),getI18nSource:e=>`${a}.${e}`}}}),Ct=g.CollectionView.extend({childView:kt}),St=r.Z.extend({onBeforeStart({flow:e}){this.flow=e,this.flow.trigger("editing",!0),this.showView(new ft({model:this.flow})),this.getRegion("activity").startPreloader()},beforeStart(){return l().request("entities","fetch:flowEvents:collection",this.flow.id)},onStart(e,t){this.showChildView("activity",new Ct({collection:t,model:this.flow}))},viewEvents:{close:"stop",delete:"onDelete"},onDelete(){const e=l().request("modal","show:small",(t={onSubmit:()=>{this.flow.destroy({wait:!0}).then((()=>{l().trigger("event-router","patient:dashboard",this.flow.get("_patient"))})).catch((({responseData:e})=>{l().request("alert","show:apiError",e)})),e.destroy()}},(0,a.extend)({buttonClass:"button--red"},ut.deleteModal,t)));var t},onStop(){this.flow.trigger("editing",!1),l().request("sidebar","close")}});var Ot=n(9949),Tt=n.n(Ot),Dt=n(318),Vt=n.n(Dt),Mt=n(4269),Pt=n.n(Mt);const{ENTER_KEY:Et}=k.default,jt=g.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"program"))&&s(l,"programsSidebarViews"))&&s(l,"disabledSaveView"))&&s(l,"saveBtn"),t))+"</button>"},useData:!0})}),At=g.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"program"))&&r(l,"programsSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"program"))&&r(l,"programsSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),Nt=g.View.extend({template:Vt(),behaviors:[O.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown(e){e.which!==Et||e.preventDefault()},onWatchChange(e){const t=C(e);this.ui.input.val(t),this.ui.spacer.text(t||" "),this.model.set("name",t)},templateContext(){return{error:this.getOption("error"),isNew:this.model.isNew()}},onDomRefresh(){this.model.isNew()&&this.ui.input.focus()}}),Ft=g.View.extend({className:"pos--relative",template:Tt(),behaviors:[O.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("details",(0,S.Z)(e))}}),It=g.View.extend({template:p().template({1:function(e,t,n,a,i){return"is-on"},3:function(e,t,n,a,i){return"disabled"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-on",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:20},end:{line:3,column:39}}}))},7:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-off",{name:"far",hash:{},data:i,loc:{start:{line:3,column:47},end:{line:3,column:67}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="programs-sidebar__toggle button-secondary '+(null!=(l=r(n,"if").call(s,null!=t?r(t,"status"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:61},end:{line:2,column:87}}}))?l:"")+' js-toggle" '+(null!=(l=r(n,"if").call(s,null!=t?r(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:99},end:{line:2,column:132}}}))?l:"")+">\n      "+(null!=(l=r(n,"if").call(s,null!=t?r(t,"status"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i,loc:{start:{line:3,column:6},end:{line:3,column:74}}}))?l:"")+"\n      "+e.escapeExpression((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(s,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(s,"programs.shared.components.toggleComponent.toggle",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:22},end:{line:4,column:83}}}),{name:"formatMessage",hash:{status:null!=t?r(t,"status"):t},data:i,loc:{start:{line:4,column:6},end:{line:4,column:99}}}))+"\n    </button>\n  "},useData:!0}),templateContext(){return{status:this.getOption("status"),isDisabled:this.getOption("isDisabled")}},triggers:{"click .js-toggle":"click"}}),Rt=g.View.extend({className:"sidebar__footer flex",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"program"))&&d(l,"programsSidebarViews"))&&d(l,"timestampsView"))&&d(l,"createdAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:157},end:{line:2,column:196}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"program"))&&d(l,"programsSidebarViews"))&&d(l,"timestampsView"))&&d(l,"updatedAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:128},end:{line:3,column:167}}}))+"</div></div>\n  "},useData:!0})}),Lt=g.View.extend({childViewTriggers:{save:"save",cancel:"cancel",toggle:"toggle"},className:"sidebar flex-region",template:Pt(),regions:{name:"[data-name-region]",details:"[data-details-region]",published:"[data-published-region]",archived:"[data-archived-region]",save:"[data-save-region]",timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close"},templateContext(){return{isNew:this.model.isNew()}},initialize({program:e}){this.program=e,this.model=this.program.clone(),this.model.isNew()||this.listenTo(this.program,{"change:published_at":this.showPublished,"change:archived_at":this.showArchived})},onAttach(){(0,f.$)(this.el)},onRender(){this.showForm(),this.showPublished(),this.showArchived(),this.showTimestamps()},showForm(){this.stopListening(this.model),this.model=this.program.clone(),this.listenTo(this.model,"change:name change:details",this.showSave),this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName(e){this.showChildView("name",new Nt({model:this.model,program:this.program,error:e}))},showDetails(){this.showChildView("details",new Ft({model:this.model,program:this.program}))},showSave(){if(!this.model.isValid())return this.showDisabledSave();this.showChildView("save",new At({model:this.model}))},showPublished(){if(this.program.isNew())return;const e=!!this.program.get("published_at"),t=new It({status:e});this.listenTo(t,"click",(()=>{const t=e?null:d().utc().format();this.program.save({published_at:t})})),this.showChildView("published",t)},showArchived(){if(this.program.isNew())return;const e=!!this.program.get("archived_at"),t=new It({status:e});this.listenTo(t,"click",(()=>{const t=e?null:d().utc().format();this.program.save({archived_at:t})})),this.showChildView("archived",t)},showTimestamps(){this.program.isNew()||this.showChildView("timestamps",new Rt({model:this.program}))},showDisabledSave(){this.showChildView("save",new jt)},onSave(){this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty()},showErrors({name:e}){this.showName(e),this.showDisabledSave()},onCancel(){this.model.isNew()?this.triggerMethod("close",this):this.showForm()}}),qt=r.Z.extend({onBeforeStart({program:e}){this.program=e,this.showView(new Lt({program:this.program}))},viewEvents:{save:"onSave",close:"stop"},onSave({model:e}){const t=this.program.isNew();this.program.save(e.pick("name","details")).then((()=>{t&&l().request("sidebar","close")}),(({responseData:e})=>{const t=this.program.parseErrors(e);this.getView().showErrors(t)}))},onStop(){this.program&&this.program.isNew()&&this.program.destroy(),l().request("sidebar","close")}}),Bt=h.ZP.programs.shared.components.behaviorComponent,Ht=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="'+r("function"==typeof(l=null!=(l=c(n,"className")||(null!=t?c(t,"className"):t))?l:o)?l.call(s,{name:"className",hash:{},data:i,loc:{start:{line:1,column:13},end:{line:1,column:28}}}):l)+'">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,null!=t?c(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:1,column:30},end:{line:1,column:42}}}))+"</span>"},useData:!0}),Gt=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="'+c(typeof(l=null!=(l=d(n,"className")||(null!=t?d(t,"className"):t))?l:o)===r?l.call(s,{name:"className",hash:{},data:i,loc:{start:{line:1,column:13},end:{line:1,column:28}}}):l)+'">'+c((d(n,"far")||t&&d(t,"far")||o).call(s,null!=t?d(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:1,column:30},end:{line:1,column:42}}}))+"<span>"+c(typeof(l=null!=(l=d(n,"name")||(null!=t?d(t,"name"):t))?l:o)===r?l.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:48},end:{line:1,column:58}}}):l)+"</span></span>"},useData:!0}),Wt=[{icon:"circle-play",className:"program-action--standard",name:Bt.standardText,behavior:u.g6.STANDARD},{icon:"circle-pause",className:"program-action--conditional",name:Bt.conditionalText,behavior:u.g6.CONDITIONAL},{icon:"bolt",className:"program-action--automated",name:Bt.automatedText,behavior:u.g6.AUTOMATED}],Zt=M.Z.extend({isCompact:!1,initialize(e){const{behavior:t}=e;if(this.mergeOptions(e,["isConditionalAvailable"]),this.collection=new(o().Collection)(Wt),!(0,a.result)(this,"isConditionalAvailable")){const e=this.collection.find({behavior:u.g6.CONDITIONAL});this.collection.remove(e)}this.setSelected({behavior:t})},isConditionalAvailable:!0,onChangeSelected(e){const t=e.get("behavior");this.triggerMethod("change:status",{behavior:t})},setSelected({behavior:e}){const t=this.collection.find({behavior:e});this.setState({selected:t})},popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},viewOptions(){const e=this.getOption("isCompact");return{className:e?"button-secondary--compact":"button-secondary w-100",template:e?Ht:Gt}},picklistOptions:()=>({headingText:Bt.headingText,itemTemplate:Gt})}),$t=h.ZP.shared.components.teamComponent,zt=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div>"+o((r(n,"matchText")||t&&r(t,"matchText")||s).call(l,null!=t?r(t,"name"):t,null!=t?r(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:1,column:5},end:{line:1,column:29}}}))+' <span class="team-component__team">'+o((r(n,"matchText")||t&&r(t,"matchText")||s).call(l,null!=t?r(t,"abbr"):t,null!=t?r(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:1,column:65},end:{line:1,column:89}}}))+"</span></div>"},useData:!0}),Yt=M.Z.extend({TeamItemTemplate:zt,isCompact:!1,defaultText(){return this.getOption("isCompact")?null:$t.defaultText},popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},canClear:!1,picklistOptions(){return{canClear:this.getOption("canClear"),itemTemplate:this.TeamItemTemplate,isSelectlist:!0,headingText:$t.headingText,placeholderText:$t.placeholderText}},viewOptions(){const e={type:"far",icon:"circle-user"},t=(0,a.result)(this,"defaultText");return this.getOption("isCompact")?{className:"button-secondary--compact",templateContext:{defaultText:t,attr:"abbr",icon:e}}:{className:"button-secondary w-100",templateContext:{defaultText:t,attr:"name",icon:e}}},initialize({team:e}){this.collection=l().request("bootstrap","teams"),this.setState({selected:this.collection.get(e)})},onChangeSelected(e){this.triggerMethod("change:team",e)}}),Ut=Zt.extend({isConditionalAvailable:!1,onPicklistSelect({model:e}){this.setState("selected",e),this.popRegion.empty()}});let Qt;const Kt=Yt.extend({canClear:!0,initialize({owner:e}){this.collection=Qt||(Qt=l().request("bootstrap","teams"),Qt),this.setState({selected:e})},onChangeSelected(e){this.triggerMethod("change:owner",e)}}),Xt=h.ZP.programs.shared.components.tagsManagerComponent,Jt=g.View.extend({tagName:"li",className:"list-manager__item tags-manager__item",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||o).call(s,"tag",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:13}}}))+"<span>"+r("function"==typeof(l=null!=(l=c(n,"text")||(null!=t?c(t,"text"):t))?l:o)?l.call(s,{name:"text",hash:{},data:i,loc:{start:{line:1,column:19},end:{line:1,column:27}}}):l)+'</span><button class="button--icon list-manager__remove js-remove">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,"trash-can",{name:"far",hash:{},data:i,loc:{start:{line:1,column:94},end:{line:1,column:113}}}))+"</button>"},useData:!0}),triggers:{"click .js-remove":"remove"}}),en=g.View.extend({tagName:"button",className:"picklist__item js-picklist-item tags-manager__add",modelEvents:{"change:query":"render"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o(e.lambda((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"shared"))&&r(l,"components"))&&r(l,"tagsManagerComponent"))&&r(l,"tagsAddView"))&&r(l,"addLabel"),t))+" "+o("function"==typeof(s=null!=(s=r(n,"query")||(null!=t?r(t,"query"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"query",hash:{},data:i,loc:{start:{line:1,column:81},end:{line:1,column:92}}}):s)},useData:!0}),onBeforeRender(){this.shouldShow=!!this.model.get("query")},triggers:{click:"click:add"}}),tn=g.CollectionView.extend({tagName:"ul",childView:Jt,childViewTriggers:{remove:"remove"},onRemove(e){this.triggerMethod("remove:tag",e.model)}}),nn=M.Z.extend({initialize(){this.listenTo(this.collection,"update",this.show)},popWidth(){return this.getView().$el.outerWidth()},viewOptions:{className:"button-secondary list-manager__droplist",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"tag",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:13}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"programs"))&&o(l,"shared"))&&o(l,"components"))&&o(l,"tagsManagerComponent"))&&o(l,"tagsDroplist"))&&o(l,"addTag"),t))+"</span>"},useData:!0})},picklistOptions:{attr:"text",headingText:Xt.tagsDroplist.picklistOptions.headingText,noResultsText:Xt.tagsDroplist.picklistOptions.noResultsText,isSelectlist:!0,placeholderText:Xt.tagsDroplist.picklistOptions.placeholderText},picklistEvents:{"watch:change"(e){this.setState("query",e)},"picklist:click:add"(){const e=(0,S.Z)(this.getState("query")),t=l().request("entities","tags:model",{text:e});this.triggerMethod("add:tag",t),this.popRegion.empty()}},onPicklistSelect({model:e}){this.triggerMethod("add:tag",e),this.popRegion.empty()}}),an=g.View.extend({className:"list-manager__wrapper",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return"\n    <div data-tags-region></div>\n    <div data-droplist-region></div>\n  "},useData:!0}),regions:{tags:"[data-tags-region]",droplist:"[data-droplist-region]"},initialize({tags:e,allTags:t}){this.tags=e.clone(),this.allTags=t.clone(),this.allTags.remove(this.tags.models)},onRender(){this.showTags(),this.showDroplist()},showTags(){const e=this.showChildView("tags",new tn({collection:this.tags}));this.listenTo(e,"remove:tag",this.removeItemTag)},showDroplist(){const e=this.showChildView("droplist",new nn({collection:this.allTags,...this.getOption("droplistOptions")}));this.listenTo(e.popRegion,{show(){e.popRegion.currentView.addChildView(new en({model:e.getState()}))}}),this.listenTo(e,"add:tag",this.addItemTag)},addItemTag(e){this.tags.add(e),this.allTags.remove(e),this.triggerMethod("add:tag",e)},removeItemTag(e){this.tags.remove(e),this.allTags.add(e),this.triggerMethod("remove:tag",e)}});var ln=n(8687),sn=n.n(ln),on=n(7200),rn=n.n(on),cn=n(5168),dn=n.n(cn);const hn=h.ZP.programs.sidebar.flow.flowSidebarViews,{ENTER_KEY:un}=k.default,mn=g.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"flow"))&&s(l,"flowSidebarViews"))&&s(l,"disabledSaveView"))&&s(l,"saveBtn"),t))+"</button>"},useData:!0})}),pn=g.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"flow"))&&r(l,"flowSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"flow"))&&r(l,"flowSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),gn=g.View.extend({className:"pos--relative",template:rn(),behaviors:[O.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown(e){e.which!==un||e.preventDefault()},onWatchChange(e){const t=C(e);this.ui.input.val(t),this.ui.spacer.text(t||" "),this.model.set("name",t)},templateContext(){return{isNew:this.model.isNew()}},onDomRefresh(){this.model.isNew()&&this.ui.input.focus()}}),fn=g.View.extend({className:"pos--relative",template:dn(),behaviors:[O.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("details",(0,S.Z)(e))}}),wn=g.View.extend({template:p().template({1:function(e,t,n,a,i){return"is-on"},3:function(e,t,n,a,i){return"disabled"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-on",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:20},end:{line:3,column:39}}}))},7:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-off",{name:"far",hash:{},data:i,loc:{start:{line:3,column:47},end:{line:3,column:67}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="program-flow-sidebar__toggle button-secondary '+(null!=(l=r(n,"if").call(s,null!=t?r(t,"status"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:65},end:{line:2,column:91}}}))?l:"")+' js-toggle" '+(null!=(l=r(n,"if").call(s,null!=t?r(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:103},end:{line:2,column:136}}}))?l:"")+">\n      "+(null!=(l=r(n,"if").call(s,null!=t?r(t,"status"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i,loc:{start:{line:3,column:6},end:{line:3,column:74}}}))?l:"")+"\n      "+e.escapeExpression((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(s,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(s,"programs.shared.components.toggleComponent.toggle",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:22},end:{line:4,column:83}}}),{name:"formatMessage",hash:{status:null!=t?r(t,"status"):t},data:i,loc:{start:{line:4,column:6},end:{line:4,column:99}}}))+"\n    </button>\n  "},useData:!0}),templateContext(){return{status:this.getOption("status"),isDisabled:this.getOption("isDisabled")}},triggers:{"click .js-toggle":"click"}}),vn=g.View.extend({className:"sidebar__footer flex",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarViews"))&&d(l,"timestampsView"))&&d(l,"createdAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:150},end:{line:2,column:189}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarViews"))&&d(l,"timestampsView"))&&d(l,"updatedAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:121},end:{line:3,column:160}}}))+"</div></div>\n  "},useData:!0})}),bn=g.View.extend({childViewTriggers:{save:"save",cancel:"cancel"},className:"sidebar flex-region",template:sn(),regions:{name:"[data-name-region]",details:"[data-details-region]",published:"[data-published-region]",archived:"[data-archived-region]",behavior:"[data-behavior-region]",owner:"[data-owner-region]",tags:"[data-tags-region]",save:"[data-save-region]",timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close","click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const e=new(o().Collection)([{onSelect:(0,a.bind)(this.triggerMethod,this,"delete")}]);new v.Z({ui:this.ui.menu,uiView:this,headingText:h.ZP.programs.sidebar.flow.layoutView.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"programs"))&&o(l,"sidebar"))&&o(l,"flow"))&&o(l,"layoutView"))&&o(l,"menuOptions"))&&o(l,"delete"),t))+"</span>"},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()},templateContext(){const e=this.model.isNew();return{isNew:e,canTag:!e&&this.currentUser.can("programs:tags:manage")}},initialize({flow:e,tags:t}){this.currentUser=l().request("bootstrap","currentUser"),this.tags=t,this.flow=e,this.model=this.flow.clone(),this.listenTo(this.flow,{"change:published_at":this.showPublished,"change:archived_at":this.showArchived,"change:behavior":this.showBehavior,"change:_owner":this.onChangeOwner})},onChangeOwner(){this.showOwner()},onAttach(){(0,f.$)(this.el)},onRender(){this.showFlow(),this.showTimestamps()},showFlow(){this.showForm(),this.showPublished(),this.showArchived(),this.showBehavior(),this.showOwner(),this.showTags()},showForm(){this.stopListening(this.model),this.model=this.flow.clone(),this.listenTo(this.model,"change:name change:details",this.showSave),this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName(){this.showChildView("name",new gn({model:this.model,flow:this.flow}))},showDetails(){this.showChildView("details",new fn({model:this.model,flow:this.flow}))},showPublished(){const e=!!this.flow.get("published_at"),t=new wn({status:e,isDisabled:this.flow.isNew()});this.listenTo(t,"click",(()=>{const t=e?null:d().utc().format();this.flow.save({published_at:t})})),this.showChildView("published",t)},showArchived(){const e=!!this.flow.get("archived_at"),t=new wn({status:e,isDisabled:this.flow.isNew()});this.listenTo(t,"click",(()=>{const t=e?null:d().utc().format();this.flow.save({archived_at:t})})),this.showChildView("archived",t)},showBehavior(){const e=this.flow.isNew(),t=new Ut({behavior:this.flow.get("behavior"),state:{isDisabled:e}});this.listenTo(t,"change:status",(({behavior:e})=>{this.flow.save({behavior:e})})),this.showChildView("behavior",t)},showOwner(){const e=this.flow.isNew(),t=new Kt({owner:this.flow.getOwner(),state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.flow.saveOwner(e)})),this.showChildView("owner",t)},showTags(){if(this.model.isNew()||!this.currentUser.can("programs:tags:manage"))return;const e=new an({allTags:this.tags,tags:this.flow.getTags()});this.listenTo(e,{"add:tag"(e){this.flow.addTag(e)},"remove:tag"(e){this.flow.removeTag(e)}}),this.showChildView("tags",e)},showTimestamps(){this.flow.isNew()||this.showChildView("timestamps",new vn({model:this.flow}))},showSave(){if(!this.model.isValid())return this.showDisabledSave();this.showChildView("save",new pn({model:this.model}))},showDisabledSave(){this.showChildView("save",new mn)},onSave(){this.getRegion("save").empty()},onCancel(){this.model.isNew()?this.triggerMethod("close",this):this.showForm()}}),yn=r.Z.extend({beforeStart:()=>l().request("entities","fetch:tags:collection"),onStart({flow:e},t){this.flow=e,this.flow.trigger("editing",!0),this.showView(new bn({flow:this.flow,tags:t}))},viewEvents:{save:"onSave",close:"stop",delete:"onDelete"},onSave({model:e}){e.isNew()?this.flow.saveAll(e.attributes).then((()=>{l().trigger("event-router","programFlow",this.flow.id)})):this.flow.save(e.pick("name","details"))},onDelete(){const e=l().request("modal","show:small",(t={onSubmit:()=>{this.flow.destroy({wait:!0}).then((()=>{l().trigger("event-router","program:details",this.flow.get("_program"))})).catch((({responseData:e})=>{l().request("alert","show:apiError",e)})),e.destroy()}},(0,a.extend)({buttonClass:"button--red"},hn.deleteModal,t)));var t},onStop(){this.flow&&this.flow.isNew()&&this.flow.destroy(),this.flow.trigger("editing",!1),l().request("sidebar","close")}}),_n=h.ZP.programs.shared.components.formComponent,xn=p().template({1:function(e,t,n,a,i){return"disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <button class="js-button button-secondary button__group flex-grow" '+(null!=(l=d(n,"if").call(o,null!=t?d(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:69},end:{line:2,column:102}}}))?l:"")+">\n    "+c((d(n,"far")||t&&d(t,"far")||r).call(o,"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:3,column:4},end:{line:3,column:36}}}))+"<span>"+c("function"==typeof(s=null!=(s=d(n,"name")||(null!=t?d(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:3,column:42},end:{line:3,column:52}}}):s)+'</span>\n  </button><button class="js-click-form button button__group form-component__form-button" '+(null!=(l=d(n,"if").call(o,null!=t?d(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:90},end:{line:4,column:123}}}))?l:"")+">"+c((d(n,"fas")||t&&d(t,"fas")||r).call(o,"up-right-and-down-left-from-center",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:124},end:{line:4,column:168}}}))+"</button>\n"},useData:!0}),kn=p().template({1:function(e,t,n,a,i){return"disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <button class="js-button button-secondary w-100" '+(null!=(l=r(n,"if").call(s,null!=t?r(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:51},end:{line:2,column:84}}}))?l:"")+">\n    "+o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(s,"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:3,column:4},end:{line:3,column:36}}}))+"<span>"+o(e.lambda((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"shared"))&&r(l,"components"))&&r(l,"formComponent"))&&r(l,"defaultText"),t))+"</span>\n  </button>\n"},useData:!0});let Cn,Sn;const On=M.Z.extend({viewOptions(){return{className:"flex",template:this.getState("selected")?xn:kn,templateContext(){return{isDisabled:this.getOption("state").isDisabled}},tagName:"div",triggers:{"click .js-button":"click","focus .js-button":"focus","click .js-click-form":"click:form"}}},viewEvents:{click:"onClick","click:form":"onViewClickForm"},onViewClickForm(){this.triggerMethod("click:form",this.getState("selected"))},picklistOptions:{canClear:!0,headingText:_n.headingText,placeholderText:_n.placeholderText,noResultsText:_n.noResultsText,isSelectlist:!0,itemTemplateContext:{icon:{type:"far",icon:"square-poll-horizontal"}},attr:"name"},initialize({form:e}){const t=l().request("bootstrap","currentWorkspace");Cn!==t.id&&(Sn=null,Cn=t.id),this.collection=function(e){if(Sn)return Sn;Sn=e.getForms();const t=Sn.reject({published_at:null});return Sn.reset(t),Sn}(t),this.setState({selected:e})},popWidth(){return this.getView().$el.outerWidth()},onChangeSelected(e){this.triggerMethod("change:form",e)}}),Tn=h.ZP.programs.shared.components.dueDayComponent,Dn=(0,a.map)((0,a.range)(366),(function(e){return{id:e}})),Vn=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"programs"))&&o(l,"shared"))&&o(l,"components"))&&o(l,"dueDayComponent"))&&o(l,"sameDay"),t))+"</span>"},useData:!0}),Mn=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))},useData:!0}),Pn=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"programs"))&&o(l,"shared"))&&o(l,"components"))&&o(l,"dueDayComponent"))&&o(l,"defaultText"),t))+"</span>"},useData:!0}),En=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||s).call(l,"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+o((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"programs.shared.components.dueDayComponent.days",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:101}}}),{name:"formatMessage",hash:{day:null!=t?r(t,"id"):t},data:i,loc:{start:{line:1,column:25},end:{line:1,column:110}}}))+"</span>"},useData:!0}),jn=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"programs.shared.components.dueDayComponent.days",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:76}}}),{name:"formatMessage",hash:{day:null!=t?o(t,"id"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:85}}}))},useData:!0}),An=M.Z.extend({collection:new(o().Collection)(Dn),isCompact:!1,getTemplate:(e,t)=>0===e?Vn:!e&&t?Mn:e?En:Pn,viewOptions(){const e=this.getOption("isCompact"),t=this.getState("selected"),n=t?t.id:null;return{className:e?"button-secondary--compact":"button-secondary w-100",template:this.getTemplate(n,e)}},picklistOptions:{canClear:!0,headingText:Tn.headingText,placeholderText:Tn.placeholderText,isSelectlist:!0,itemTemplate:jn},initialize({day:e}){const t=this.collection.get(e);this.setState({selected:t})},popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},onChangeSelected(e){const t=e?e.id:null;this.triggerMethod("change:day",t)}});let Nn;const Fn=Yt.extend({canClear:!0,initialize({owner:e,isFromFlow:t}){this.collection=Nn||(Nn=l().request("bootstrap","teams"),Nn),t&&(this.defaultText=h.ZP.programs.shared.actionsView.ownerComponent.defaultText),this.setState({selected:e})},onChangeSelected(e){this.triggerMethod("change:owner",e)}});var In=n(6047),Rn=n.n(In),Ln=n(2223),qn=n.n(Ln),Bn=n(4611),Hn=n.n(Bn);const{ENTER_KEY:Gn}=k.default,Wn=g.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarViews"))&&s(l,"disabledSaveView"))&&s(l,"saveBtn"),t))+"</button>"},useData:!0})}),Zn=g.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),$n=g.View.extend({className:"pos--relative",template:qn(),behaviors:[O.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown(e){e.which!==Gn||e.preventDefault()},onWatchChange(e){const t=C(e);this.ui.input.val(t),this.ui.spacer.text(t||" "),this.model.set("name",t)},templateContext(){return{isNew:this.model.isNew()}},onDomRefresh(){this.model.isNew()&&this.ui.input.focus()}}),zn=g.View.extend({className:"pos--relative",template:Hn(),behaviors:[O.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("details",(0,S.Z)(e))}}),Yn=g.View.extend({template:p().template({1:function(e,t,n,a,i){return"is-on"},3:function(e,t,n,a,i){return"disabled"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-on",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:20},end:{line:3,column:39}}}))},7:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-off",{name:"far",hash:{},data:i,loc:{start:{line:3,column:47},end:{line:3,column:67}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="program-action-sidebar__toggle button-secondary '+(null!=(l=r(n,"if").call(s,null!=t?r(t,"status"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:67},end:{line:2,column:93}}}))?l:"")+' js-toggle" '+(null!=(l=r(n,"if").call(s,null!=t?r(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:105},end:{line:2,column:138}}}))?l:"")+">\n      "+(null!=(l=r(n,"if").call(s,null!=t?r(t,"status"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i,loc:{start:{line:3,column:6},end:{line:3,column:74}}}))?l:"")+"\n      "+e.escapeExpression((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(s,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(s,"programs.shared.components.toggleComponent.toggle",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:22},end:{line:4,column:83}}}),{name:"formatMessage",hash:{status:null!=t?r(t,"status"):t},data:i,loc:{start:{line:4,column:6},end:{line:4,column:99}}}))+"\n    </button>\n  "},useData:!0}),templateContext(){return{status:this.getOption("status"),isDisabled:this.getOption("isDisabled")}},triggers:{"click .js-toggle":"click"}}),Un=g.View.extend({className:"sidebar__footer flex",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"timestampsView"))&&d(l,"createdAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:154},end:{line:2,column:193}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+o(s((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"timestampsView"))&&d(l,"updatedAt"),t))+"</h4><div>"+o((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:125},end:{line:3,column:164}}}))+"</div></div>\n  "},useData:!0})}),Qn=g.View.extend({getTemplate(){return this.model.hasOutreach()?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarViews"))&&s(l,"headingView"))&&s(l,"headingOutreachText"),t))},useData:!0}):p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarViews"))&&s(l,"headingView"))&&s(l,"headingText"),t))},useData:!0})}}),Kn=g.View.extend({tagName:"button",className:"button--blue w-100",attributes(){return{disabled:this.getOption("isDisabled")}},triggers:{click:"click"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"share-from-square",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:27}}}))+" "+s(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"programs"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"actionSidebarViews"))&&o(l,"formSharingButtonView"))&&o(l,"buttonText"),t))},useData:!0})}),Xn=g.View.extend({className:"sidebar__dialog",triggers:{"click .js-disable":"click"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex">\n      <h3 class="sidebar__heading flex-grow">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"share-from-square",{name:"far",hash:{classes:"u-margin--r-8"},data:i,loc:{start:{line:3,column:45},end:{line:3,column:96}}}))+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"formSharingView"))&&d(l,"label"),t))+'</h3>\n      <button class="button--link js-disable">'+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"formSharingView"))&&d(l,"disableButtonText"),t))+'</button>\n    </div>\n    <div class="flex u-margin--t-16">\n      <h4 class="sidebar__label--inset u-margin--t-8">'+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"formSharingView"))&&d(l,"recipientLabel"),t))+'</h4>\n      <div class="flex-grow"><button class="button-secondary w-100" disabled>'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"user-plus",{name:"far",hash:{},data:i,loc:{start:{line:8,column:77},end:{line:8,column:96}}}))+" "+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"formSharingView"))&&d(l,"recipientDefault"),t))+'</button></div>\n    </div>\n    <div class="flex u-margin--t-8">\n      <h4 class="sidebar__label--inset u-margin--t-8">'+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"formSharingView"))&&d(l,"whenLabel"),t))+'</h4>\n      <div class="flex-grow"><button class="button-secondary w-100" disabled>'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:12,column:77},end:{line:12,column:96}}}))+" "+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarViews"))&&d(l,"formSharingView"))&&d(l,"whenDefault"),t))+"</button></div>\n    </div>\n  "},useData:!0})}),Jn=g.View.extend({template:p().template({1:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lambda,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="flex sidebar__attachments">\n        <h3 class="flex-grow sidebar__heading">\n          '+s((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"paperclip",{name:"far",hash:{},data:i,loc:{start:{line:5,column:10},end:{line:5,column:29}}}))+'<span class="u-margin--l-8">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"uploadsEnabledView"))&&r(l,"attachmentsHeadingText"),t))+'</span>\n        </h3>\n        <button class="button--link js-disable">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"uploadsEnabledView"))&&r(l,"disableButtonText"),t))+"</button>\n      </div>\n"},3:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"      <button "+(null!=(l=r(n,"if").call(s,null!=t?r(t,"isButtonDisabled"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i,loc:{start:{line:10,column:14},end:{line:10,column:53}}}))?l:"")+' class="button--blue w-100 js-enable">\n        '+o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(s,"paperclip",{name:"far",hash:{},data:i,loc:{start:{line:11,column:8},end:{line:11,column:27}}}))+" "+o(e.lambda((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"uploadsEnabledView"))&&r(l,"enableButtonText"),t))+"\n      </button>\n"},4:function(e,t,n,a,i){return"disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"isUploadsEnabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:4},end:{line:13,column:11}}}))?l:"")+"  "},useData:!0}),triggers:{"click .js-enable":"click:enable","click .js-disable":"click:disable"},templateContext(){return{isUploadsEnabled:this.getOption("isUploadsEnabled"),isButtonDisabled:this.getOption("isButtonDisabled")}}}),ea=g.View.extend({childViewTriggers:{save:"save",cancel:"cancel"},className:"sidebar flex-region",template:Rn(),regions:{heading:"[data-heading-region]",name:"[data-name-region]",details:"[data-details-region]",published:"[data-published-region]",archived:"[data-archived-region]",behavior:"[data-behavior-region]",owner:"[data-owner-region]",due:"[data-due-region]",form:"[data-form-region]",formSharing:"[data-form-sharing-region]",allowUploads:"[data-allow-uploads-region]",tags:"[data-tags-region]",save:"[data-save-region]",timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close","click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const e=new(o().Collection)([{onSelect:(0,a.bind)(this.triggerMethod,this,"delete")}]);new v.Z({ui:this.ui.menu,uiView:this,headingText:h.ZP.programs.sidebar.action.layoutView.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"programs"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"layoutView"))&&o(l,"menuOptions"))&&o(l,"delete"),t))+"</span>"},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()},templateContext(){const e=this.model.isNew();return{isNew:e,canTag:!e&&this.currentUser.can("programs:tags:manage")}},initialize({action:e,tags:t}){this.currentUser=l().request("bootstrap","currentUser"),this.tags=t,this.action=e,this.model=this.action.clone(),this.listenTo(this.action,{"change:_form change:outreach":this.showHeading,"change:published_at":this.showPublished,"change:archived_at":this.showArchived,"change:behavior":this.showBehavior,"change:_owner":this.onChangeOwner,"change:days_until_due":this.onChangeDueDay})},onChangeOwner(){this.showOwner()},onChangeDueDay(){this.showDueDay()},onAttach(){(0,f.$)(this.el)},onRender(){this.showHeading(),this.showAction(),this.showTimestamps(),this.showTags()},showHeading(){this.showChildView("heading",new Qn({model:this.action}))},showAction(){this.showEditForm(),this.showPublished(),this.showArchived(),this.showBehavior(),this.showOwner(),this.showDueDay(),this.showForm()},showEditForm(){this.stopListening(this.model),this.model=this.action.clone(),this.listenTo(this.model,"change:name change:details",this.showSave),this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName(){this.showChildView("name",new $n({model:this.model,action:this.action}))},showDetails(){this.showChildView("details",new zn({model:this.model,action:this.action}))},showPublished(){const e=!!this.action.get("published_at"),t=new Yn({status:e,isDisabled:this.action.isNew()});this.listenTo(t,"click",(()=>{const t=e?null:d().utc().format();this.action.save({published_at:t})})),this.showChildView("published",t)},showArchived(){const e=!!this.action.get("archived_at"),t=new Yn({status:e,isDisabled:this.action.isNew()});this.listenTo(t,"click",(()=>{const t=e?null:d().utc().format();this.action.save({archived_at:t})})),this.showChildView("archived",t)},showBehavior(){const e=this.action.isNew(),t=!!this.action.get("_program_flow"),n=new Zt({isConditionalAvailable:t,behavior:this.action.get("behavior"),state:{isDisabled:e}});this.listenTo(n,"change:status",(({behavior:e})=>{this.action.save({behavior:e})})),this.showChildView("behavior",n)},showOwner(){const e=this.action.isNew(),t=!!this.action.get("_program_flow"),n=new Fn({owner:this.action.getOwner(),isFromFlow:t,state:{isDisabled:e}});this.listenTo(n,"change:owner",(e=>{this.action.saveOwner(e)})),this.showChildView("owner",n)},showDueDay(){const e=this.action.isNew(),t=new An({day:this.action.get("days_until_due"),state:{isDisabled:e}});this.listenTo(t,"change:day",(e=>{this.action.save({days_until_due:e})})),this.showChildView("due",t)},showForm(){const e=this.action.isNew(),t=new On({form:this.action.getForm(),state:{isDisabled:e}});this.listenTo(t,{"change:form"(e){this.action.saveForm(e)},"click:form"(e){this.triggerMethod("click:form",e)}}),this.showChildView("form",t)},showTags(){if(this.model.isNew()||!this.currentUser.can("programs:tags:manage"))return;const e=new an({allTags:this.tags,tags:this.action.getTags()});this.listenTo(e,{"add:tag"(e){this.action.addTag(e)},"remove:tag"(e){this.action.removeTag(e)}}),this.showChildView("tags",e)},showTimestamps(){this.action.isNew()||this.showChildView("timestamps",new Un({model:this.action}))},showSave(){if(!this.model.isValid())return this.showDisabledSave();this.showChildView("save",new Zn({model:this.model}))},showDisabledSave(){this.showChildView("save",new Wn)},onSave(){this.getRegion("save").empty()},onCancel(){this.model.isNew()?this.triggerMethod("close",this):this.showEditForm()}}),ta=r.Z.extend({beforeStart:()=>l().request("entities","fetch:tags:collection"),onStart({action:e},t){this.action=e,this.showView(new ea({action:this.action,tags:t})),this.showFormSharing(),this.listenTo(this.action,"change:_form change:outreach",this.showFormSharing),this.showUploadsEnabled(),this.listenTo(this.action,"change:allowed_uploads",this.showUploadsEnabled)},showUploadsEnabled(){if(!l().request("bootstrap","setting","upload_attachments"))return;const e=new Jn({isUploadsEnabled:!!(0,a.size)(this.action.get("allowed_uploads")),isButtonDisabled:this.action.isNew()});this.listenTo(e,"click:enable",(()=>{this.action.enableAttachmentUploads()})),this.listenTo(e,"click:disable",(()=>{this.action.disableAttachmentUploads()})),this.showChildView("allowUploads",e)},showFormSharing(){if(!l().request("bootstrap","setting","care_team_outreach"))return;if(!this.action.getForm())return void this.showChildView("formSharing",new Kn({isDisabled:!0}));if(!this.action.hasOutreach()){const e=new Kn;return this.listenTo(e,"click",(()=>{this.action.save({outreach:"patient"})})),void this.showChildView("formSharing",e)}const e=new Xn;this.listenTo(e,"click",(()=>{this.action.save({outreach:u.Ww.DISABLED})})),this.showChildView("formSharing",e)},viewEvents:{save:"onSave",close:"stop",delete:"onDelete","click:form":"onClickForm"},onSave({model:e}){e.isNew()?this.action.saveAll(e.attributes).then((()=>{const e=this.action.get("_program_flow");e?l().trigger("event-router","programFlow:action",e,this.action.id):l().trigger("event-router","program:action",this.action.get("_program"),this.action.id)})):this.action.save(e.pick("name","details"))},onDelete(){this.action.destroy({wait:!0}).then((()=>{this.stop()})).catch((({responseData:e})=>{l().request("alert","show:apiError",e)}))},onStop(){this.action.trigger("editing",!1),this.action&&this.action.isNew()&&this.action.destroy(),l().request("sidebar","close")},onClickForm(e){l().trigger("event-router","form:preview",e.id)}}),na=h.ZP.clinicians.shared.components.roleComponent,aa=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div><div>"+c(typeof(l=null!=(l=d(n,"label")||(null!=t?d(t,"label"):t))?l:o)===r?l.call(s,{name:"label",hash:{},data:i,loc:{start:{line:1,column:10},end:{line:1,column:21}}}):l)+'</div><div class="role-component__details">'+c(typeof(l=null!=(l=d(n,"description")||(null!=t?d(t,"description"):t))?l:o)===r?l.call(s,{name:"description",hash:{},data:i,loc:{start:{line:1,column:64},end:{line:1,column:81}}}):l)+"</div></div>"},useData:!0}),ia=M.Z.extend({isCompact:!1,popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},picklistOptions:{headingText:na.headingText,itemTemplate:aa},viewOptions(){return{className:this.getOption("isCompact")?"button-secondary":"button-secondary w-100",templateContext:{attr:"label",defaultText:na.defaultText,icon:{type:"far",icon:"shield"}}}},initialize({role:e}){this.collection=l().request("bootstrap","roles"),this.setState({selected:e})},onChangeSelected(e){this.triggerMethod("change:role",e)}}),la=g.View.extend({tagName:"li",className(){return this.getOption("isDisabled")?"list-manager__item is-disabled":"list-manager__item"},template:p().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--icon list-manager__remove js-remove">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-can",{name:"far",hash:{},data:i,loc:{start:{line:1,column:118},end:{line:1,column:137}}}))+"</button>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return c((d(n,"far")||t&&d(t,"far")||r).call(o,"users",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+"<span>"+c("function"==typeof(s=null!=(s=d(n,"name")||(null!=t?d(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:21},end:{line:1,column:29}}}):s)+"</span>"+(null!=(l=d(n,"unless").call(o,null!=t?d(t,"isDisabled"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:36},end:{line:1,column:157}}}))?l:"")},useData:!0}),templateContext(){return{isDisabled:this.getOption("isDisabled")}},triggers:{"click .js-remove":"remove"}}),sa=g.CollectionView.extend({tagName:"ul",childView:la,childViewOptions(){return{isDisabled:this.getOption("isDisabled")}},childViewTriggers:{remove:"remove"},onRemove(e){this.triggerMethod("remove:member",e.model)}}),oa=M.Z.extend({initialize(){this.listenTo(this.collection,"update",this.show)},popWidth(){return this.getView().$el.outerWidth()},viewOptions:{className:"button-secondary list-manager__droplist",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"users",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"shared"))&&o(l,"components"))&&o(l,"workspacesManager"))&&o(l,"workspacesDroplist"))&&o(l,"addWorkspace"),t))+"</span>"},useData:!0})},picklistOptions:{attr:"name"},onShow(){const e=this.getOption("isDisabled");this.setState({isDisabled:e||0===this.collection.length})},onPicklistSelect({model:e}){this.triggerMethod("add:member",e),this.popRegion.empty()}}),ra=g.View.extend({className:"list-manager__wrapper",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return"\n    <div data-workspaces-region></div>\n    <div data-droplist-region></div>\n  "},useData:!0}),regions:{workspaces:"[data-workspaces-region]",droplist:"[data-droplist-region]"},initialize({member:e,workspaces:t}){this.member=e,this.memberWorkspaces=this.member.getWorkspaces(),this.workspaces=t,this.workspaces.remove(this.memberWorkspaces.models)},onRender(){this.showWorkspaces(),this.showDroplist()},showWorkspaces(){const e=this.showChildView("workspaces",new sa({collection:this.memberWorkspaces,isDisabled:this.getOption("isDisabled")}));this.listenTo(e,"remove:member",this.removeMemberWorkspace)},showDroplist(){if(this.getOption("isDisabled"))return;const e=this.showChildView("droplist",new oa({collection:this.workspaces,...this.getOption("droplistOptions")}));this.listenTo(e,"add:member",this.addMemberWorkspace)},addMemberWorkspace(e){this.memberWorkspaces.add(e),this.workspaces.remove(e),this.triggerMethod("add:member",this.member,e)},removeMemberWorkspace(e){this.memberWorkspaces.remove(e),this.workspaces.add(e),this.triggerMethod("remove:member",this.member,e)}}),ca=h.ZP.clinicians.shared.clinicianViews,da=ra.extend({removeMemberWorkspace(e){if(this.member.isNew())return this.memberWorkspaces.remove(e),void this.triggerMethod("remove:member",this.member,e);const t=l().request("modal","show:small",{bodyText:(0,h.SM)(p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"clinicians.shared.clinicianViews.workspacesComponent.removeModal.bodyText",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:101}}}),{name:"formatMessage",hash:{team:null!=t?o(t,"team"):t,workspace:null!=t?o(t,"workspace"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:133}}}))},useData:!0}),{workspace:e.get("name"),team:this.member.getTeam().get("name")}),headingText:ca.workspacesComponent.removeModal.headingText,submitText:ca.workspacesComponent.removeModal.submitText,buttonClass:"button--red",onSubmit:()=>{t.destroy(),this.memberWorkspaces.remove(e),this.workspaces.add(e),this.triggerMethod("remove:member",this.member,e)}})}}),ha={id:"enabled",state:"active",icon:{type:"fas",icon:"circle-check"},name:ca.stateComponent.active},ua={id:"enabled",state:"pending",icon:{type:"fas",icon:"circle-half-stroke"},name:ca.stateComponent.pending},ma={id:"disabled",state:"disabled",icon:{type:"far",icon:"circle-minus"},name:ca.stateComponent.disabled},pa=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="clinician-state--'+c("function"==typeof(s=null!=(s=d(n,"state")||(null!=t?d(t,"state"):t))?s:r)?s.call(o,{name:"state",hash:{},data:i,loc:{start:{line:1,column:30},end:{line:1,column:41}}}):s)+'">'+c((d(n,"fa")||t&&d(t,"fa")||r).call(o,null!=(l=null!=t?d(t,"icon"):t)?d(l,"type"):l,null!=(l=null!=t?d(t,"icon"):t)?d(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:43},end:{line:1,column:69}}}))+"</span>"},useData:!0}),ga=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="clinician-state--'+d(typeof(s=null!=(s=h(n,"state")||(null!=t?h(t,"state"):t))?s:r)===c?s.call(o,{name:"state",hash:{},data:i,loc:{start:{line:1,column:30},end:{line:1,column:41}}}):s)+'">'+d((h(n,"fa")||t&&h(t,"fa")||r).call(o,null!=(l=null!=t?h(t,"icon"):t)?h(l,"type"):l,null!=(l=null!=t?h(t,"icon"):t)?h(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:43},end:{line:1,column:69}}}))+"<span>"+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:75},end:{line:1,column:85}}}):s)+"</span></span>"},useData:!0}),fa=M.Z.extend({isCompact:!1,popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},picklistOptions:()=>({itemTemplate:ga,headingText:ca.stateComponent.headingText}),viewOptions(){const e=this.getOption("isCompact");return{className:e?"button-secondary--compact":"button-secondary w-100",template:e?pa:ga}},initialize({selectedId:e,isActive:t}){this.collection=new(o().Collection)([t?ha:ua,ma]),this.setState("selected",this.collection.get(e))}});var wa=n(1437),va=n.n(wa);const ba=g.View.extend({className:"pos--relative",template:p().template({1:function(e,t,n,a,i){return" has-error"},3:function(e,t,n,a,i){return"disabled"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="clinician-sidebar__locked-icon">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"lock",{name:"far",hash:{},data:i,loc:{start:{line:3,column:68},end:{line:3,column:82}}}))+"</span>"},7:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form-error u-margin--b-4">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"error")||(null!=t?s(t,"error"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"error",hash:{},data:i,loc:{start:{line:4,column:55},end:{line:4,column:66}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.escapeExpression,c=e.hooks.helperMissing,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <input class="input-primary w-100 js-input'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"error"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:46},end:{line:2,column:76}}}))?l:"")+'" placeholder="'+r(e.lambda((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"clinicians"))&&h(l,"sidebar"))&&h(l,"clinicianSidebarViews"))&&h(l,"nameView"))&&h(l,"placeholder"),t))+'" value="'+r(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:c)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:173},end:{line:2,column:183}}}):s)+'" '+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:185},end:{line:2,column:223}}}))?l:"")+" />"+r(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:c)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:226},end:{line:2,column:251}}}):s)+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:4},end:{line:3,column:100}}}))?l:"")+"\n    "+(null!=(l=h(n,"if").call(o,null!=t?h(t,"error"):t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:4},end:{line:4,column:79}}}))?l:"")+"\n  "},useData:!0}),templateContext(){return{canEdit:this.model.isEditable(),error:this.getOption("error")}},ui:{input:".js-input"},events:{"input @ui.input":"onInput"},onInput(e){this.model.set("name",e.target.value)}}),ya=g.View.extend({className:"pos--relative",template:p().template({1:function(e,t,n,a,i){return" has-error"},3:function(e,t,n,a,i){return"disabled"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="clinician-sidebar__locked-icon">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"lock",{name:"far",hash:{},data:i,loc:{start:{line:3,column:68},end:{line:3,column:82}}}))+"</span>"},7:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form-error u-margin--b-4">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"error")||(null!=t?s(t,"error"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"error",hash:{},data:i,loc:{start:{line:4,column:55},end:{line:4,column:66}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.escapeExpression,c=e.hooks.helperMissing,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <input class="input-primary w-100 js-input'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"error"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:46},end:{line:2,column:76}}}))?l:"")+'" placeholder="'+r(e.lambda((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"clinicians"))&&h(l,"sidebar"))&&h(l,"clinicianSidebarViews"))&&h(l,"emailView"))&&h(l,"placeholder"),t))+'" value="'+r(typeof(s=null!=(s=h(n,"email")||(null!=t?h(t,"email"):t))?s:c)===d?s.call(o,{name:"email",hash:{},data:i,loc:{start:{line:2,column:174},end:{line:2,column:185}}}):s)+'" '+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:187},end:{line:2,column:225}}}))?l:"")+" />"+r(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:c)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:228},end:{line:2,column:253}}}):s)+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:4},end:{line:3,column:100}}}))?l:"")+"\n    "+(null!=(l=h(n,"if").call(o,null!=t?h(t,"error"):t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:4},end:{line:4,column:79}}}))?l:"")+"\n  "},useData:!0}),templateContext(){return{canEdit:this.model.isEditable(),error:this.getOption("error")}},ui:{input:".js-input"},events:{"input @ui.input":"onInput"},onInput(e){this.model.set("email",e.target.value)}}),_a=g.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"sidebar"))&&r(l,"clinicianSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"sidebar"))&&r(l,"clinicianSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),xa=g.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"clinicians"))&&s(l,"sidebar"))&&s(l,"clinicianSidebarViews"))&&s(l,"disabledSaveView"))&&s(l,"saveBtn"),t))+"</button>"},useData:!0})}),ka=g.View.extend({className:"sidebar__info",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    "+s((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-info",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:4},end:{line:2,column:25}}}))+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"clinicians"))&&o(l,"sidebar"))&&o(l,"clinicianSidebarViews"))&&o(l,"infoView"))&&o(l,"workspaceTeamInfo"),t))+"\n  "},useData:!0})}),Ca=g.View.extend({className:"sidebar flex-region",template:va(),triggers:{"click .js-close":"close"},childViewTriggers:{save:"save",cancel:"cancel"},regions:{name:"[data-name-region]",email:"[data-email-region]",save:"[data-save-region]",team:"[data-team-region]",workspaces:"[data-workspaces-region]",info:"[data-info-region]",role:"[data-role-region]",state:"[data-state-region]"},initialize({clinician:e}){this.clinician=e,this.listenTo(this.clinician,{"change:enabled":this.onChangeEnabled,"change:_team":this.showInfo,"change:_workspaces":this.showInfo})},onAttach(){(0,f.$)(this.el)},onChangeEnabled(){this.showState(),this.showRole(),this.showTeam(),this.showWorkspaces()},onRender(){this.showForm(),this.showState(),this.showRole(),this.showTeam(),this.showWorkspaces(),this.showInfo()},cloneClinician(){this.clonedClinician&&this.stopListening(this.clonedClinician),this.clonedClinician=this.clinician.clone()},showName(e){this.showChildView("name",new ba({model:this.clonedClinician,error:e}))},showEmail(e){this.showChildView("email",new ya({model:this.clonedClinician,error:e}))},showState(){const e=this.clinician.isActive(),t=this.clinician.get("enabled")?"enabled":"disabled",n=new fa({isActive:e,selectedId:t});this.listenTo(n,"change:selected",(e=>{this.clinician.save({enabled:"disabled"!==e.id})})),this.showChildView("state",n)},showRole(){const e=!this.clinician.get("enabled"),t=new ia({role:this.clinician.getRole(),state:{isDisabled:e}});this.listenTo(t,"change:role",(e=>{this.clinician.saveRole(e)})),this.showChildView("role",t)},showTeam(){const e=!this.clinician.get("enabled"),t=new Yt({team:this.clinician.get("_team"),state:{isDisabled:e}});this.listenTo(t,"change:team",(e=>{this.clinician.saveTeam(e)})),this.showChildView("team",t)},showWorkspaces(){const e=this.showChildView("workspaces",new da({member:this.clinician,workspaces:l().request("bootstrap","workspaces"),droplistOptions:{isDisabled:!this.clinician.get("enabled")}}));this.listenTo(e,{"add:member"(e,t){t.addClinician(e)},"remove:member"(e,t){t.removeClinician(e)}})},showSave(){this.clonedClinician.isValid()?this.showChildView("save",new _a({model:this.clonedClinician})):this.showDisabledSave()},showDisabledSave(){this.showChildView("save",new xa)},showForm(){this.cloneClinician(),this.listenTo(this.clonedClinician,"change:name change:email",this.showSave),this.getRegion("save").empty(),this.showName(),this.showEmail()},showInfo(){this.clinician.hasTeam()&&0!==this.clinician.getWorkspaces().length?this.getRegion("info").empty():this.showChildView("info",new ka)},showErrors({name:e,email:t}){this.showName(e),this.showEmail(t),this.showDisabledSave()},onSave(){this.getRegion("save").empty()},onCancel(){this.showForm()}}),Sa=r.Z.extend({onBeforeStart({clinician:e}){this.clinician=e,this.showView(new Ca({clinician:e}))},viewEvents:{save:"onSave",close:"stop"},onSave({model:e}){this.clinician.save(e.attributes).then((()=>{l().trigger("event-router","clinician",this.clinician.id)}),(({responseData:e})=>{const t=this.clinician.parseErrors(e);this.getView().showErrors(t)}))},onStop(){this.clinician.trigger("editing",!1),l().request("sidebar","close"),l().trigger("event-router","clinicians:all")}});var Oa=n(2729),Ta=n.n(Oa),Da=n(4884);const Va={propertyOf:a.propertyOf,escape:a.escape},Ma=/{{\s*fields.([\w\-.]+?)\s*}}/g,Pa=/{{\s*patient.([\w\-.]+?)\s*}}/g,Ea=/({{\s*value\s*}})/g,ja=/{{\s*value(?:\.([\w\-.]+?))?\s*}}/g,Aa=/{{\s*widget.([\w\-.]+?)\s*}}/g,Na={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Fa=/\\|'|\r|\n|\u2028|\u2029/g;function Ia(e){return`\\${Na[e]}`}function Ra(e){return`'+\n((__t=(${e}))==null?'':escape(__t))+\n'`}function La(e,t){let n="";return(0,a.each)(t.split("."),(e=>{n+=`'${e}',`})),Ra(`propertyOf(data.${e})([${n}])`)}function qa(e,t,n,i){return(0,a.isFunction)(e)?new e((0,a.extend)({model:t},i,n.get("definition"))):new g.View((0,a.extend)({model:t},i,n.get("definition"),e))}function Ba(e,t){return t.length?(0,a.propertyOf)(e)(t):e}function Ha({fields:e,name:t,key:n,childValue:a}){const i=n&&n.split(".")||[];if(a)return Ba(a,i);i.length&&!t&&(t=i.shift());const l=e.find({name:t});return l?Ba(l.getValue(),i):void 0}const Ga={dob:{modelEvents:{"change:birth_date":"render"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.widgets.widgets.dob",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:20},end:{line:1,column:60}}}),{name:"formatHTMLMessage",hash:{age:null!=t?o(t,"age"):t,dob:(o(n,"formatDateTime")||t&&o(t,"formatDateTime")||s).call(l,null!=t?o(t,"dob"):t,"LONG",{name:"formatDateTime",hash:{inputFormat:"YYYY-MM-DD"},data:i,loc:{start:{line:1,column:65},end:{line:1,column:117}}})},data:i,loc:{start:{line:1,column:0},end:{line:1,column:127}}}))},useData:!0}),templateContext(){const e=this.model.get("birth_date");return{dob:e,age:d()().diff(d()(e,"YYYY-MM-DD"),"years")}}},sex:{modelEvents:{"change:sex":"render"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.widgets.widgets.sex",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:56}}}),{name:"formatMessage",hash:{sex:null!=t?o(t,"sex"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:66}}}))},useData:!0})},status:{modelEvents:{"change:status":"render"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="widgets__status-'+r("function"==typeof(l=null!=(l=c(n,"status")||(null!=t?c(t,"status"):t))?l:o)?l.call(s,{name:"status",hash:{},data:i,loc:{start:{line:1,column:29},end:{line:1,column:41}}}):l)+'">'+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||o).call(s,(c(n,"intlGet")||t&&c(t,"intlGet")||o).call(s,"patients.widgets.widgets.status",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:59},end:{line:1,column:102}}}),{name:"formatMessage",hash:{status:null!=t?c(t,"status"):t},data:i,loc:{start:{line:1,column:43},end:{line:1,column:118}}}))+"</span>"},useData:!0})},divider:{template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<div class="widgets__divider"></div>'},useData:!0})},workspaces:{modelEvents:{"change:_workspaces":"render"},template:p().template({1:function(e,t,n,a,i){return"<div>"+e.escapeExpression(e.lambda(t,t))+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l=s(n,"each").call(null!=t?t:e.nullContext||{},null!=t?s(t,"workspaces"):t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))?l:""},useData:!0}),templateContext(){return{workspaces:this.model.getWorkspaces().map("name")}}},patientIdentifiers:{className:"widgets-value",template:p().template({1:function(e,t,n,a,i){var l,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l="function"==typeof(s=null!=(s=o(n,"defaultHtml")||(null!=t?o(t,"defaultHtml"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"defaultHtml",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:61}}}):s)?l:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(s=null!=(s=r(n,"displayValue")||(null!=t?r(t,"displayValue"):t))?s:e.hooks.helperMissing)?s.call(o,{name:"displayValue",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}):s)+(null!=(l=r(n,"unless").call(o,null!=t?r(t,"displayValue"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:18},end:{line:1,column:72}}}))?l:"")},useData:!0}),templateContext(){const e=this.getOption("default_html"),t=this.model.get("identifiers"),n=this.getOption("identifier_type"),i=(0,a.find)(t,{type:n});return{displayValue:i&&i.value,defaultHtml:e}}},optionsWidget:{className:"widgets-value",template:p().template({1:function(e,t,n,a,i){var l,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l="function"==typeof(s=null!=(s=o(n,"defaultHtml")||(null!=t?o(t,"defaultHtml"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"defaultHtml",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:61}}}):s)?l:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(s=null!=(s=r(n,"displayValue")||(null!=t?r(t,"displayValue"):t))?s:e.hooks.helperMissing)?s.call(o,{name:"displayValue",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}):s)+(null!=(l=r(n,"unless").call(o,null!=t?r(t,"displayValue"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:18},end:{line:1,column:72}}}))?l:"")},useData:!0}),templateContext(){const e=this.getOption("default_html"),t=Ha({fields:this.model.getFields(),name:this.getOption("field_name"),key:this.getOption("key"),childValue:this.getOption("childValue")});return{displayValue:this.getOption("display_options")[t]||t,defaultHtml:e}}},phoneWidget:{className:"widgets-value",template:p().template({1:function(e,t,n,a,i){var l,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l="function"==typeof(s=null!=(s=o(n,"defaultHtml")||(null!=t?o(t,"defaultHtml"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"defaultHtml",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:61}}}):s)?l:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(s=null!=(s=r(n,"displayValue")||(null!=t?r(t,"displayValue"):t))?s:e.hooks.helperMissing)?s.call(o,{name:"displayValue",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}):s)+(null!=(l=r(n,"unless").call(o,null!=t?r(t,"displayValue"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:18},end:{line:1,column:72}}}))?l:"")},useData:!0}),templateContext(){const e=this.getOption("default_html"),t=Ha({fields:this.model.getFields(),name:this.getOption("field_name"),key:this.getOption("key"),childValue:this.getOption("childValue")});if(!t)return{defaultHtml:e};const n=(0,Da.S)(t,"US");return{displayValue:n?n.formatNational():null,defaultHtml:e}}},fieldWidget:{className:"widgets-value",template:p().template({1:function(e,t,n,a,i){var l,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l="function"==typeof(s=null!=(s=o(n,"defaultHtml")||(null!=t?o(t,"defaultHtml"):t))?s:e.hooks.helperMissing)?s.call(null!=t?t:e.nullContext||{},{name:"defaultHtml",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:61}}}):s)?l:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(s=null!=(s=r(n,"displayValue")||(null!=t?r(t,"displayValue"):t))?s:e.hooks.helperMissing)?s.call(o,{name:"displayValue",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}):s)+(null!=(l=r(n,"unless").call(o,null!=t?r(t,"displayValue"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:18},end:{line:1,column:72}}}))?l:"")},useData:!0}),templateContext(){const e=this.getOption("default_html");return{displayValue:Ha({fields:this.model.getFields(),name:this.getOption("field_name"),key:this.getOption("key"),childValue:this.getOption("childValue")}),defaultHtml:e}}},templateWidget:g.View.extend({className:"widgets-value",initialize(){this.childValue=this.getOption("childValue"),this.template=function(e,t){let n=0,i="";const l=[],s=[],o=RegExp(`${[Ma.source,Pa.source,Ea.source,ja.source,Aa.source].join("|")}|$`,"g");e.replace(o,(function(t,o,r,c,d,h,u){return i+=e.slice(n,u).replace(Fa,Ia),n=u+t.length,c&&(i+=Ra("data.value")),d&&(i+=La("value",d)),o&&(l.push((0,a.first)(o.split("."))),i+=La("fields",o)),r&&(i+=La("patient",r)),h&&(s.push(h),i+=`<span data-${h}-region></span>`),t})),i=`var __t;\nreturn '${i}';\n`;const r=new Function("data","{ propertyOf, escape }",i),c=function(e){const n=e.getFields(),i=(0,a.reduce)(l,((e,t)=>{const a=n.find({name:t});return a?(e[t]=a.get("value"),e):e}),{}),s={patient:e.attributes,fields:i,value:t};return r.call(this,s,Va)};return c.widgetNames=s,c}(this.template,this.childValue),this.nestedWidgets=this.template.widgetNames;const e=(0,a.reduce)(this.nestedWidgets,((e,t)=>(e[t]=`[data-${t}-region]`,e)),{});this.addRegions(e)},serializeData(){return this.model},onRender(){(0,a.each)(this.nestedWidgets,(e=>{const t=l().request("entities","widgets:model",e),n=Ga[t.get("widget_type")];this.showChildView(e,qa(n,this.model,t,{tagName:"span",childValue:this.childValue}))}))}}),arrayWidget:g.CollectionView.extend({className:"widgets-value",childWidget:{widget_type:"fieldWidget",definition:{}},getArrayValue(e){const t=this.getOption("filter_value");t&&(e=(0,a.filter)(e,t));const n=this.getOption("reject_value");return n&&(e=(0,a.reject)(e,n)),e},initialize({child_widget:e,field_name:t,key:n,childValue:i}){const s=Ha({fields:this.model.getFields(),name:t,key:n,childValue:i});(0,a.each)(this.getArrayValue(s),(t=>{const n=l().request("entities","widgets:model",e||this.childWidget),a=Ga[n.get("widget_type")];this.addChildView(qa(a,this.model,n,{childValue:t}))}))},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(l=null!=(l=s(n,"defaultHtml")||(null!=t?s(t,"defaultHtml"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"defaultHtml",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:17}}}):l)},useData:!0}),templateContext(){return{defaultHtml:this.getOption("default_html")}}}),formWidget:g.View.extend({className:"button-primary widgets__form-widget",tagName:"button",attributes(){return{disabled:this.getOption("is_modal")}},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n      "+r((c(n,"far")||t&&c(t,"far")||o).call(s,"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:2,column:6},end:{line:2,column:38}}}))+'\n      <span class="u-text--overflow">'+r("function"==typeof(l=null!=(l=c(n,"formName")||(null!=t?c(t,"formName"):t))?l:o)?l.call(s,{name:"formName",hash:{},data:i,loc:{start:{line:3,column:37},end:{line:3,column:49}}}):l)+'</span>\n      <span class="widgets__form-widget-expand-icon">'+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"up-right-and-down-left-from-center",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:53},end:{line:4,column:97}}}))+"</span>"},useData:!0}),templateContext(){return{formName:this.getOption("form_name")}},initialize({is_modal:e,form_id:t}){e&&l().request("entities","fetch:forms:model",t).then((e=>{this.form=e,this.$el.prop("disabled",!1)}))},triggers:{click:"click"},onClick(){this.getOption("is_modal")?l().request("modal","show:form",this.model,this.getOption("form_name"),this.form,this.getOption("modal_size")):l().trigger("event-router","form:patient",this.model.id,this.getOption("form_id"))}}),dateTimeWidget:{template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"formatDateTime")||t&&l(t,"formatDateTime")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"dateTime"):t,null!=t?l(t,"format"):t,{name:"formatDateTime",hash:{defaultHtml:null!=t?l(t,"defaultHtml"):t,inputFormat:null!=t?l(t,"inputFormat"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:82}}}))},useData:!0}),templateContext(){const e=Ha({fields:this.model.getFields(),name:this.getOption("field_name"),key:this.getOption("key"),childValue:this.getOption("childValue")});return{format:this.getOption("format")||"TIME_OR_DAY",inputFormat:this.getOption("input_format"),dateTime:e,defaultHtml:this.getOption("default_html")}}}};Ga.groups=Ga.workspaces;const Wa=Ga,Za=g.View.extend({className(){return this.getOption("itemClassName")},template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="widgets__heading">'+e.escapeExpression(e.lambda(null!=(l=null!=t?s(t,"definition"):t)?s(l,"display_name"):l,t))+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=(l=null!=t?s(t,"definition"):t)?s(l,"display_name"):l,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:0},end:{line:1,column:103}}}))?l:"")+'<div class="widgets__item" data-content-region></div>'},useData:!0}),regions:{content:"[data-content-region]"},onRender(){const e=this.getOption("widget"),t=this.getOption("patient");this.showChildView("content",qa(e,t,this.model))}}),$a=g.CollectionView.extend({childView:Za,childViewOptions(e){const t=Wa[e.get("widget_type")];return{itemClassName:this.getOption("itemClassName"),widget:t,model:e,patient:this.model}},viewFilter:({model:e})=>e.get("widget_type"),viewComparator:!1}),za=$a.extend({itemClassName:"patient-sidebar__section"}),Ya=g.View.extend({className:"sidebar sidebar--small flex-region",template:Ta(),regions:{widgets:{el:"[data-widgets-region]",regionClass:w.Z}},triggers:{"click .js-close":"close","click .js-patient":"click:patient"},onAttach(){(0,f.$)(this.el)},onClickPatient(){l().trigger("event-router","patient:dashboard",this.model.id)}}),Ua=r.Z.extend({onBeforeStart({patient:e}){this.showView(new Ya({model:e})),this.getRegion("widgets").startPreloader()},beforeStart:({patient:e})=>[l().request("entities","fetch:patients:model",e.id),...(0,a.map)(l().request("bootstrap","sidebarWidgets:fields"),(t=>l().request("entities","fetch:patientFields:model",e.id,t)))],onStart({patient:e}){const t=l().request("bootstrap","sidebarWidgets");this.showChildView("widgets",new za({model:e,collection:t}))},viewEvents:{close:"stop"},onStop(){l().request("sidebar","close")}}),Qa=h.ZP.patients.sidebar.filters.filtersSidebarViews,Ka=M.Z.extend({popWidth(){return this.getView().$el.outerWidth()},viewOptions:{className:"button-secondary w-100",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(l=null!=(l=s(n,"name")||(null!=t?s(t,"name"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:10}}}):l)},useData:!0})},picklistOptions(){return{attr:"name",isSelectlist:!0,headingText:Qa.customFilterDropList.headingText,placeholderText:`${this.getOption("filterTitle")}...`}}}),Xa=g.View.extend({className:"flex flex-align-center u-margin--b-8",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <h4 class="sidebar__label">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"name")||(null!=t?s(t,"name"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:2,column:31},end:{line:2,column:41}}}):l)+'</h4>\n    <div class="flex-grow" data-filter-button></div>\n  '},useData:!0}),regions:{filterButton:"[data-filter-button]"},initialize({state:e}){this.state=e,this.slug=this.model.get("slug"),this.listenTo(e,"change:customFilters",this.render)},onRender(){const e=this.getOptions(),t=e.get(this.state.getFilter(this.slug))||e.at(0),n=new Ka({collection:e,state:{selected:t},filterTitle:this.model.get("name")});this.listenTo(n.getState(),"change:selected",((e,{id:t})=>{this.state.setFilter(this.slug,t)})),this.showChildView("filterButton",n)},getOptions(){const e=this.model.getOptions().clone();return e.unshift({id:null,name:Qa.customFilterView.defaultText}),e}}),Ja=g.CollectionView.extend({className:"u-margin--t-32",childView:Xa,childViewOptions(){return{state:this.getOption("state")}},viewComparator:({model:e})=>String(e.get("name")).toLowerCase()}),ei=g.View.extend({className:"u-margin--b-8",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex flex-align-center">\n      <div data-check-region class="u-margin--r-16"></div>\n      <span class="action--'+o(e.lambda(null!=(l=null!=t?d(t,"options"):t)?d(l,"color"):l,t))+'">\n        <span class="u-margin--r-8">'+o((d(n,"fa")||t&&d(t,"fa")||c).call(r,null!=(l=null!=t?d(t,"options"):t)?d(l,"iconType"):l,null!=(l=null!=t?d(t,"options"):t)?d(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:5,column:36},end:{line:5,column:72}}}))+"</span><span>"+o("function"==typeof(s=null!=(s=d(n,"name")||(null!=t?d(t,"name"):t))?s:c)?s.call(r,{name:"name",hash:{},data:i,loc:{start:{line:5,column:85},end:{line:5,column:95}}}):s)+"</span>\n      </span>\n    </div>\n  "},useData:!0}),regions:{check:"[data-check-region]"},initialize({state:e,stateType:t}){this.state=e,this.stateType=t},onRender(){this.showCheck()},toggleSelected(e){this.$el.toggleClass("is-selected",e)},showCheck(){const e=this.model.id,t=this.state.get(this.stateType),n=t&&t.includes(e);this.toggleSelected(n);const a=new V({state:{isSelected:n}});this.listenTo(a,{"change:isSelected":t=>{this.toggleSelected(t),this.triggerMethod("select",e,t)}}),this.showChildView("check",a)}}),ti=g.CollectionView.extend({modelEvents:{"change:states":"render"},childView:ei,childViewOptions(){return{state:this.model,stateType:"states"}},childViewTriggers:{select:"select:state"},className:"sidebar__section",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h3 class="sidebar__heading u-margin--b-8">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"filters"))&&s(l,"filtersSidebarViews"))&&s(l,"statesFiltersView"))&&s(l,"headingText"),t))+"</h3>"},useData:!0}),onSelectState(e,t){this.model.selectStatesFilter(e,t)}}),ni=g.CollectionView.extend({modelEvents:{"change:flowStates":"render"},childView:ei,childViewOptions(){return{state:this.model,stateType:"flowStates"}},childViewTriggers:{select:"select:state"},className:"sidebar__section",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h3 class="sidebar__heading u-margin--b-8">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"filters"))&&s(l,"filtersSidebarViews"))&&s(l,"flowStatesFiltersView"))&&s(l,"headingText"),t))+"</h3>"},useData:!0}),onSelectState(e,t){this.model.selectFlowStatesFilter(e,t)}}),ai=g.View.extend({modelEvents:{"change:filtersCount":"render"},template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span>("+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"filtersCount")||(null!=t?s(t,"filtersCount"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"filtersCount",hash:{},data:i,loc:{start:{line:6,column:37},end:{line:6,column:53}}}):l)+")</span>"},3:function(e,t,n,a,i){return"disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex flex-align-center">\n      <div class="flex-grow">\n        <h3 class="sidebar__heading">\n          <span class="u-margin--r-8">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"sliders",{name:"far",hash:{},data:i,loc:{start:{line:5,column:38},end:{line:5,column:55}}}))+"</span>"+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"filters"))&&d(l,"filtersSidebarViews"))&&d(l,"headerView"))&&d(l,"allFiltersLabel"),t))+"\n          "+(null!=(l=d(n,"if").call(s,null!=t?d(t,"filtersCount"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:6,column:10},end:{line:6,column:68}}}))?l:"")+'\n        </h3>\n      </div>\n      <div class="flex flex-align-center">\n        <button class="filters-sidebar__clear-filters js-clear-filters" '+(null!=(l=d(n,"unless").call(s,null!=t?d(t,"filtersCount"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:10,column:72},end:{line:10,column:115}}}))?l:"")+">\n          "+r(c((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"filters"))&&d(l,"filtersSidebarViews"))&&d(l,"headerView"))&&d(l,"clearFilters"),t))+'\n        </button>\n        <button class="filters-sidebar__close button--icon js-close">'+r((d(n,"fas")||t&&d(t,"fas")||o).call(s,"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:13,column:69},end:{line:13,column:84}}}))+"</button>\n      </div>\n    </div>\n  "},useData:!0})}),ii=g.View.extend({className:"sidebar flex-region",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="flex-grow">\n      <div data-header-region></div>\n      <div data-custom-filters-region></div>\n      <div data-states-filters-region></div>\n      <div data-flow-states-filters-region></div>\n    </div>\n  '},useData:!0}),regions:{header:{el:"[data-header-region]",replaceElement:!0},customFilters:"[data-custom-filters-region]",statesFilters:"[data-states-filters-region]",flowStatesFilters:"[data-flow-states-filters-region]"},triggers:{"click .js-close":"close","click .js-clear-filters":"click:clearFilters"},onAttach(){(0,f.$)(this.el)}}),li=r.Z.extend({onStart({filtersState:e}){this.filtersState=e,this.setView(new ii),this.showHeaderView(),this.showCustomFiltersView(),this.showStatesFiltersView(),this.showFlowStatesFiltersView(),this.listenTo(e,"change:listType",this.showFlowStatesFiltersView),this.showView()},viewEvents:{close:"stop","click:clearFilters":"onClearFilters"},showHeaderView(){const e=new ai({model:this.filtersState});this.showChildView("header",e)},showCustomFiltersView(){const e=l().request("bootstrap","directories"),t=l().request("bootstrap","setting","custom_filters");if(t&&t.length){const n=e.filter((e=>t.includes(e.get("slug"))));e.reset(n)}const n=new Ja({collection:e,state:this.filtersState});this.showChildView("customFilters",n)},showFlowStatesFiltersView(){if(this.filtersState.isFlowType())return void this.getRegion("flowStatesFilters").empty();const e=l().request("bootstrap","currentWorkspace").getStates(),t=new ni({collection:e,model:this.filtersState});this.showChildView("flowStatesFilters",t)},showStatesFiltersView(){const e=new ti({collection:this.filtersState.getAvailableStates(),model:this.filtersState});this.showChildView("statesFilters",e)},onClearFilters(){this.filtersState.setDefaultFilterStates()},onStop(){l().request("sidebar","close")}}),si=r.Z.extend({channelName:"sidebar",radioRequests:{close:"closeSidebar",start:"startSidebarApp"},childApps:{action:ot,flow:St,program:qt,programFlow:yn,programAction:ta,clinician:Sa,patient:Ua,filters:li},startSidebarApp(e,t){if(this.isStarting)return;this.isStarting=!0,this.stopSidebarApp();const n=(0,a.extend)({region:this.getRegion()},t);return this.currentApp=this.startChildApp(e,n),this.isStarting=!1,this.getChannel().trigger("show",this.currentApp),this.currentApp},closeSidebar(){const e=this.currentApp;this.stopSidebarApp(),this.getRegion().empty(),this.getChannel().trigger("close",e)},stopSidebarApp(){this.currentApp&&(this.currentApp.stop(),delete this.currentApp)}});var oi=n(7529),ri=n.n(oi),ci=n(2909),di=n(6125),hi=n(5251),ui=n(6807);const mi=p().template({1:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="u-margin--t-8 qa-search-option">\n        <span class="patient-search__search-by-label">'+o(s(null!=t?r(t,"label"):t,t))+"</span>\n        "+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"search"))&&r(l,"patientSearchViews"))&&r(l,"emptyView"))&&r(l,"exampleId"),t))+" "+o(s(null!=t?r(t,"example"):t,t))+"\n      </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <div class="patient-search__tip">'+o(s((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"globals"))&&c(l,"search"))&&c(l,"patientSearchViews"))&&c(l,"emptyView"))&&c(l,"searchTip"),t))+'</div>\n  <div class="patient-search__search-by">\n    <div class="patient-search__search-by-title">'+o(s((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"globals"))&&c(l,"search"))&&c(l,"patientSearchViews"))&&c(l,"emptyView"))&&c(l,"searchBy"),t))+'</div>\n    <div class="u-margin--t-8 qa-search-option">\n      <span class="patient-search__search-by-label">'+o(s((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"globals"))&&c(l,"search"))&&c(l,"patientSearchViews"))&&c(l,"emptyView"))&&c(l,"exampleDobLabel"),t))+"</span>\n      "+o(s((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"globals"))&&c(l,"search"))&&c(l,"patientSearchViews"))&&c(l,"emptyView"))&&c(l,"exampleDob"),t))+"\n    </div>\n"+(null!=(l=c(n,"each").call(r,null!=(l=null!=t?c(t,"settings"):t)?c(l,"identifiers"):l,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:9,column:4},end:{line:14,column:13}}}))?l:"")+'  </div>\n  <div class="patient-search__shortcut">'+o((c(n,"fas")||t&&c(t,"fas")||e.hooks.helperMissing).call(r,"keyboard",{name:"fas",hash:{},data:i,loc:{start:{line:16,column:40},end:{line:16,column:58}}}))+'<strong class="u-margin--l-8">'+o(s((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"globals"))&&c(l,"search"))&&c(l,"patientSearchViews"))&&c(l,"emptyView"))&&c(l,"shortcut"),t))+"</strong></div>\n"},useData:!0}),pi=g.View.extend({collectionEvents:{search:"render"},tagName:"li",className:"patient-search__no-results",initialize({state:e}){this.state=e,this.listenTo(this.state,"change:search",this.render)},templateContext(){return{settings:l().request("bootstrap","setting","patient_search"),canPatientCreate:this.state.get("canPatientCreate")}},getTemplate(){const e=this.state.get("search");return!e||e.length<3?mi:this.collection.isSearching?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"search"))&&s(l,"patientSearchViews"))&&s(l,"emptyView"))&&s(l,"searching"),t))},useData:!0}):p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <a class="u-margin--l-8 u-text-link js-add">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"search"))&&s(l,"patientSearchViews"))&&s(l,"emptyView"))&&s(l,"addPatient"),t))+"</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n      "+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"search"))&&s(l,"patientSearchViews"))&&s(l,"emptyView"))&&s(l,"noResults"),t))+"\n"+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"canPatientCreate"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:6},end:{line:5,column:13}}}))?l:"")+"    "},useData:!0})}}),gi=g.View.extend({tagName:"li",className:"js-picklist-item patient-search__picklist-item",initialize({state:e}){this.state=e,this.listenTo(this.state,"change:search",this.render)},triggers:{click:"select"},onSelect(){this.state.set({selected:this.model})},template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="patient-search__picklist-item-identifier u-text--overflow">\n          '+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?s(t,"identifiers"):t)?s(l,"0"):l)?s(l,"value"):l,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(4,i,0),data:i,loc:{start:{line:11,column:10},end:{line:11,column:99}}}))?l:"")+"\n        </div>\n"},2:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"matchText")||t&&s(t,"matchText")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=(l=null!=t?s(t,"identifiers"):t)?s(l,"0"):l)?s(l,"value"):l,null!=t?s(t,"search"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:11,column:37},end:{line:11,column:77}}}))},4:function(e,t,n,a,i){return"&ndash;"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="patient-search__picklist-item-name u-text--overflow">\n      <span>'+c((d(n,"matchText")||t&&d(t,"matchText")||r).call(o,null!=t?d(t,"name"):t,null!=t?d(t,"search"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:3,column:12},end:{line:3,column:37}}}))+c("function"==typeof(s=null!=(s=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?s:r)?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:3,column:37},end:{line:3,column:62}}}):s)+'</span>\n    </div>\n    <div class="patient-search__picklist-item-meta">\n      <div class="patient-search__picklist-item-dob u-text--overflow">\n        '+c((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||r).call(o,null!=t?d(t,"birth_date"):t,"MM/DD/YYYY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:8},end:{line:7,column:50}}}))+"\n      </div>\n"+(null!=(l=d(n,"if").call(o,null!=t?d(t,"hasIdentifiers"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:9,column:6},end:{line:13,column:13}}}))?l:"")+"    </div>\n  "},useData:!0}),templateContext(){return{name:`${this.model.get("first_name")} ${this.model.get("last_name")}`,search:this.state.get("search"),hasIdentifiers:this.collection.hasIdentifiers()}}}),fi=g.CollectionView.extend({tagName:"ul",serializeCollection:a.noop,childView:gi,childViewOptions(){return{collection:this.collection,state:this.model}},onRenderChildren(){this.$(".js-picklist-item").removeClass("is-highlighted"),this.model.get("search")&&this.$(".js-picklist-item").first().addClass("is-highlighted")},emptyView:pi}),wi=g.View.extend({className:"patient-search__picklist-header",template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="patient-search__picklist-header-identifier">\n        '+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"search"))&&s(l,"patientSearchViews"))&&s(l,"headerView"))&&s(l,"id"),t))+"\n        </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="patient-search__picklist-header-name">\n      '+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"search"))&&r(l,"patientSearchViews"))&&r(l,"headerView"))&&r(l,"patient"),t))+'\n    </div>\n    <div class="patient-search__picklist-header-meta">\n      <div class="patient-search__picklist-header-dob">\n        '+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"search"))&&r(l,"patientSearchViews"))&&r(l,"headerView"))&&r(l,"dob"),t))+"\n      </div>\n"+(null!=(l=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"hasIdentifiers"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:9,column:6},end:{line:13,column:13}}}))?l:"")+"    </div>\n  "},useData:!0}),templateContext(){return{hasIdentifiers:this.collection.hasIdentifiers()}}}),vi=g.View.extend({className:"patient-search__picklist",collectionEvents:{search:"showHeader"},modelEvents:{"change:search":"showHeader"},behaviors:[{behaviorClass:hi.Z,selector:".js-input"},O.Z,ui.Z],triggers:{"focus @ui.input":"focus","click @ui.add":"add"},ui:{input:".js-input",add:".js-add"},regionClass:g.Region.extend({replaceElement:!0}),regions:{header:"[data-header-region]",list:"[data-list-region]"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="modal__header patient-search__header">\n      <span class="modal__header-icon">'+c((d(n,"far")||t&&d(t,"far")||r).call(o,"magnifying-glass",{name:"far",hash:{},data:i,loc:{start:{line:3,column:39},end:{line:3,column:65}}}))+'</span>\n      <input type="text" class="js-input patient-search__input" placeholder="'+c(e.lambda((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"globals"))&&d(l,"search"))&&d(l,"patientSearchViews"))&&d(l,"dialogView"))&&d(l,"placeholderText"),t))+'" value="'+c("function"==typeof(s=null!=(s=d(n,"search")||(null!=t?d(t,"search"):t))?s:r)?s.call(o,{name:"search",hash:{},data:i,loc:{start:{line:4,column:158},end:{line:4,column:170}}}):s)+'">\n    </div>\n    <div class="flex-region picklist__scroll js-picklist-scroll">\n      <div data-header-region></div>\n      <div data-list-region></div>\n    </div>\n  '},useData:!0}),onRender(){this.showHeader(),this.showChildView("list",new fi({collection:this.collection,model:this.model}))},showHeader(){this.collection.length?this.showChildView("header",new wi({collection:this.collection})):this.getRegion("header").empty()}}),bi=di.Z.extend({initialize:function(e){this.mergeOptions(e,["collection"])},viewOptions(){return{model:this.getState(),collection:this.collection}},ViewClass:vi,viewEvents:{"watch:change":"onWatchChange"},viewTriggers:{add:"click:addPatient",close:"close"},onWatchChange(e){this.setState("search",e)}}),yi=g.View.extend({className:"modal",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <a href="#" class="button--icon patient-search__close js-close">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"xmark",{name:"far",hash:{},data:i,loc:{start:{line:2,column:68},end:{line:2,column:83}}}))+"</a>\n    <div data-picklist-region></div>\n  "},useData:!0}),triggers:{"click .js-close":"close"},regions:{picklist:{el:"[data-picklist-region]",replaceElement:!0}},serializeCollection:a.noop,onRender(){const e=this.collection,t=this.getOption("prefillText"),n=new bi({collection:e,state:{search:t,canPatientCreate:this.getOption("canPatientCreate")}});this.listenTo(n.getState(),{"change:search":this.onChangeSearch,"change:selected":this.onChangeSelected}),this.showChildView("picklist",n),t&&this.collection.search(t),this.listenTo(n,{"click:addPatient":()=>{this.triggerMethod("click:addPatient")},close:this.destroy})},onChangeSearch(e,t){this.collection.search(t)},onChangeSelected(e,t){this.triggerMethod("search:select",t)},onClose(){this.destroy()}}),_i=r.Z.extend({onStart({prefillText:e,canPatientCreate:t}){const n=new yi({collection:l().request("entities","searchPatients:collection"),prefillText:e,canPatientCreate:t});this.listenTo(n,{"search:select"(e){l().trigger("event-router","patient:dashboard",e.get("_patient")),n.destroy()},"click:addPatient"(){this.triggerMethod("click:addPatient")},destroy(){this.stop()}}),l().request("modal","show:custom",n)}}),xi=h.ZP.globals.appNav.appNavViews,ki=M.Z.extend({popWidth:"248px",position(){const{outerHeight:e}=this.getView().getBounds();return{top:e,left:16}},viewOptions:{tagName:"div",className(){return this.getOption("state").isMinimized?"app-nav__header minimized":"app-nav__header"},template:p().template({1:function(e,t,n,a,i){return'        <img class="app-nav__header-logo" src="/rwell-logo.svg" />\n'},3:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="u-text--overflow">\n          <h2 class="app-nav__header-title u-text--overflow">'+c(typeof(l=null!=(l=d(n,"workspaceName")||(null!=t?d(t,"workspaceName"):t))?l:o)===r?l.call(s,{name:"workspaceName",hash:{},data:i,loc:{start:{line:6,column:61},end:{line:6,column:80}}}):l)+'</h2>\n          <span class="app-nav__header-arrow">'+c((d(n,"far")||t&&d(t,"far")||o).call(s,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:7,column:46},end:{line:7,column:66}}}))+'</span>\n        </div>\n        <div class="u-text--overflow">'+c(typeof(l=null!=(l=d(n,"userName")||(null!=t?d(t,"userName"):t))?l:o)===r?l.call(s,{name:"userName",hash:{},data:i,loc:{start:{line:9,column:38},end:{line:9,column:52}}}):l)+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"isMinimized"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:6},end:{line:10,column:13}}}))?l:"")+"    "},useData:!0}),templateContext(){const e=l().request("bootstrap","currentUser"),t=l().request("bootstrap","currentWorkspace");return{userName:e.get("name"),workspaceName:t.get("name"),isMinimized:this.getOption("state").isMinimized}}},picklistOptions:()=>({className:"picklist app-nav__picklist",template:p().template({1:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <a class="picklist__item app-nav__picklist-item js-picklist-item" href="'+c("function"==typeof(s=null!=(s=d(n,"infoText")||(null!=t?d(t,"infoText"):t))?s:r)?s.call(o,{name:"infoText",hash:{},data:i,loc:{start:{line:9,column:84},end:{line:9,column:98}}}):s)+'" target="_blank">\n              '+c((d(n,"far")||t&&d(t,"far")||r).call(o,"life-ring",{name:"far",hash:{},data:i,loc:{start:{line:10,column:14},end:{line:10,column:33}}}))+"<span>"+c(e.lambda((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"globals"))&&d(l,"appNav"))&&d(l,"appNavViews"))&&d(l,"mainNavDroplist"))&&d(l,"help"),t))+"</span>\n            </a>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.lambda,r=e.escapeExpression,c=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n        <div class="app-nav__picklist-heading">'+r(o((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"globals"))&&h(l,"appNav"))&&h(l,"appNavViews"))&&h(l,"mainNavDroplist"))&&h(l,"organizationHeading"),t))+'</div>\n        <div class="app-nav__picklist-workspace-name js-picklist-item">'+r("function"==typeof(s=null!=(s=h(n,"headingText")||(null!=t?h(t,"headingText"):t))?s:d)?s.call(c,{name:"headingText",hash:{},data:i,loc:{start:{line:3,column:71},end:{line:3,column:88}}}):s)+'</div>\n        <div class="flex-region picklist__scroll">\n          <div class="app-nav__picklist-heading">'+r(o((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"globals"))&&h(l,"appNav"))&&h(l,"appNavViews"))&&h(l,"mainNavDroplist"))&&h(l,"workspacesHeading"),t))+'</div>\n          <ul class="js-picklist-scroll"></ul>\n          <div class="app-nav__picklist-bottom">\n'+(null!=(l=h(n,"if").call(c,null!=t?h(t,"infoText"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:8,column:12},end:{line:12,column:19}}}))?l:"")+'            <a class="picklist__item app-nav__picklist-item js-picklist-item" href="/logout">\n              '+r((h(n,"fas")||t&&h(t,"fas")||d).call(c,"right-from-bracket",{name:"fas",hash:{},data:i,loc:{start:{line:14,column:14},end:{line:14,column:42}}}))+"<span>"+r(o((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"globals"))&&h(l,"appNav"))&&h(l,"appNavViews"))&&h(l,"mainNavDroplist"))&&h(l,"signOut"),t))+"</span>\n            </a>\n          </div>\n        </div>\n      "},useData:!0}),headingText:()=>l().request("bootstrap","organization").get("name"),infoText:()=>l().request("bootstrap","setting","help_url")??"https://help.roundingwell.com/",itemClassName:"app-nav__picklist-item"}),picklistEvents:{"picklist:item:select":"onSelect"},onSelect({model:e}){const t=l().request("bootstrap","currentWorkspace");e.id!==t.id&&e.get("onSelect")()}}),Ci=M.Z.extend({popWidth:"248px",position(){const e=this.getOption("state").get("isMinimized");return{top:window.innerHeight-16,left:e?52:164}},viewOptions:{tagName:"div",className:"flex flex-align-center app-nav__bottom-button",template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="u-text--overflow">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"appNav"))&&s(l,"appNavViews"))&&s(l,"adminToolsDroplist"))&&s(l,"adminTools"),t))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(s,"ellipsis",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}))+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"isMinimized"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:18},end:{line:1,column:158}}}))?l:"")},useData:!0}),templateContext(){return{isMinimized:this.getOption("state").get("isMinimized")}}},picklistOptions(){return{className:"picklist app-nav__picklist",itemClassName:"flex flex-align-center app-nav__picklist-item",headingText:h.ZP.globals.appNav.appNavViews.adminToolsDroplist.adminTools,lists:[{collection:this.collection,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n          "+r((c(n,"fa")||t&&c(t,"fa")||o).call(s,null!=(l=null!=t?c(t,"icon"):t)?c(l,"type"):l,null!=(l=null!=t?c(t,"icon"):t)?c(l,"icon"):l,{name:"fa",hash:{classes:null!=(l=null!=t?c(t,"icon"):t)?c(l,"classes"):l},data:i,loc:{start:{line:2,column:10},end:{line:2,column:58}}}))+"<span>"+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||o).call(s,null!=t?c(t,"text"):t,{name:"formatMessage",hash:{},data:i,loc:{start:{line:3,column:16},end:{line:3,column:38}}}))+"</span>\n        "},useData:!0})}]}},picklistEvents:{"picklist:item:select":"onSelect"},onSelect({model:e}){e.get("onSelect")()}}),Si=g.View.extend({className:"app-nav__bottom",regions:{dashboards:{el:"[data-nav-dashboards-region]",replaceElement:!0},adminTools:{el:"[data-nav-admin-tools-region]",replaceElement:!0}},template:p().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="flex flex-align-center app-nav__bottom-button js-add-patient">\n        '+e.escapeExpression((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(s,"circle-plus",{name:"fas",hash:{},data:i,loc:{start:{line:5,column:8},end:{line:5,column:29}}}))+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"isMinimized"):t,{name:"unless",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:29},end:{line:5,column:161}}}))?l:"")+"\n      </div>\n"},2:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="u-text--overflow">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"appNav"))&&s(l,"appNavViews"))&&s(l,"appNavView"))&&s(l,"addPatient"),t))+"</span>"},4:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-caret-right",{name:"fas",hash:{},data:i,loc:{start:{line:11,column:8},end:{line:11,column:36}}}))+"\n"},6:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+s((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-caret-left",{name:"fas",hash:{},data:i,loc:{start:{line:13,column:8},end:{line:13,column:35}}}))+'<span class="u-text--overflow">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"globals"))&&o(l,"appNav"))&&o(l,"appNavViews"))&&o(l,"appNavView"))&&o(l,"minimizeMenu"),t))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    <div data-nav-dashboards-region></div>\n"+(null!=(l=o(n,"if").call(s,null!=t?o(t,"canPatientCreate"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:4},end:{line:7,column:11}}}))?l:"")+'    <div data-nav-admin-tools-region></div>\n    <div class="flex flex-align-center app-nav__bottom-button js-minimize-menu">\n'+(null!=(l=o(n,"if").call(s,null!=t?o(t,"isMinimized"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i,loc:{start:{line:10,column:6},end:{line:14,column:13}}}))?l:"")+"    </div>\n  "},useData:!0}),templateContext(){return{canPatientCreate:this.getOption("canPatientCreate")}}}),Oi=g.View.extend({className(){return this.model.get("isMinimized")?"app-nav minimized":"app-nav"},regions:{navMain:{el:"[data-nav-main-region]",replaceElement:!0},navContent:"[data-nav-content-region]",bottomNavContent:{el:"[data-bottom-nav-content-region]",replaceElement:!0}},triggers:{"click .js-add-patient":"click:addPatient","click .js-minimize-menu":"click:minimizeMenu"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return"\n    <div data-nav-main-region></div>\n    <div data-nav-content-region></div>\n    <div data-bottom-nav-content-region></div>\n  "},useData:!0}),modelEvents:{"change:isMinimized":"onToggleMinimized"},onToggleMinimized(){this.$el.toggleClass("minimized",this.model.get("isMinimized"))},removeSelected(){this.$(".is-selected").removeClass("is-selected")}}),Ti=g.View.extend({tagName:"a",className:"flex app-nav__link",template:p().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression((l(n,"fa")||t&&l(t,"fa")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"type"):t,null!=t?l(t,"icon"):t,{name:"fa",hash:{classes:null!=t?l(t,"classes"):t},data:i,loc:{start:{line:4,column:8},end:{line:4,column:56}}}))},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="u-margin--l-16 u-text--overflow">'+e.escapeExpression((l(n,"formatMessage")||t&&l(t,"formatMessage")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"text"):t,{name:"formatMessage",hash:{},data:i,loc:{start:{line:7,column:72},end:{line:7,column:94}}}))+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex flex-align-center app-nav__link-icons">\n'+(null!=(l=o(n,"each").call(s,null!=t?o(t,"icons"):t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:6},end:{line:5,column:15}}}))?l:"")+"    </div>\n    "+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"isMinimized"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:7,column:4},end:{line:7,column:111}}}))?l:"")+"\n  "},useData:!0}),templateContext(){return{isMinimized:this.state.get("isMinimized")}},triggers:{click:"click"},modelEvents:{selected:"onSelected"},initialize({state:e}){this.state=e},onClick(){l().trigger("event-router",this.model.get("event"),...this.model.get("eventArgs"))},onSelected(){this.$el.addClass("is-selected")}}),Di=g.CollectionView.extend({childView:Ti,childViewOptions(){return{state:this.model}}}),Vi=g.View.extend({template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="u-text--overflow">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"appNav"))&&s(l,"appNavViews"))&&s(l,"patientsAppNav"))&&s(l,"searchTitle"),t))+"</span>"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <h3 class="app-nav__title">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"appNav"))&&s(l,"appNavViews"))&&s(l,"patientsAppNav"))&&s(l,"worklistsTitle"),t))+"</h3>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <h3 class="flex app-nav__search js-search">\n      '+e.escapeExpression((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(s,"magnifying-glass",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:6},end:{line:3,column:32}}}))+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"isMinimized"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:32},end:{line:3,column:169}}}))?l:"")+"\n    </h3>\n"+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"isMinimized"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:7,column:15}}}))?l:"")+"    <div data-worklists-region></div>\n  "},useData:!0}),regions:{worklists:"[data-worklists-region]"},triggers:{"click @ui.search":"search"},ui:{search:".js-search"},onSearchActive(e){this.isDestroyed()||this.ui.search.toggleClass("is-active",e)}});var Mi=n(1529),Pi=n.n(Mi);const Ei=g.View.extend({template:Pi(),regions:{selectRegion:{el:"[data-select-region]",replaceElement:!0}},ui:{cancel:".js-cancel"},triggers:{"click @ui.cancel":"click:cancel"},formatDate(){const e=this.getOption("state");return e.selectedDate?d()(e.selectedDate).format("MMM DD, YYYY"):(0,a.isNull)(e.month)?e.year:d()().month(e.month).year(e.year).format("MMM YYYY")},templateContext(){const e=this.getOption("state");return{date:this.formatDate(),hasError:e.hasError,isDisabled:e.isDisabled}}}),ji=h.ZP.components.dateSelect,Ai=new(o().Collection)((0,a.times)(12,(e=>({value:e,text:`${d()().month(e).format("MMMM")} (${e+1})`})))),Ni=d()().year(),Fi=(0,a.range)(Ni,Ni-120,-1),Ii=(0,a.map)(Fi,(function(e){return{value:e,text:String(e)}})),Ri=M.Z.extend({picklistOptions:{isSelectlist:!0},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(l=null!=(l=s(n,"buttonText")||(null!=t?s(t,"buttonText"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"buttonText",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}):l)},useData:!0}),viewOptions(){const e=this.getOption("buttonText");return{className:"button-secondary date-select__button",template:this.getOption("template"),templateContext:{buttonText:e}}}}),Li=o().Model.extend({defaults:{year:null,month:null,day:null,selectedDate:null,hasError:!1,isDisabled:!1},reset(){this.set(this.defaults)}}),qi=di.Z.extend({ViewClass:Ei,StateModel:Li,stateEvents:{change:"onChangeState","change:selectedDate":"onChangeSelectedDate","change:hasError":"show"},viewTriggers:{"click:cancel":"click:cancel"},onChangeState(){if(!this.getState("day")||this.getState("selectedDate"))this.show();else{const e=d()().year(this.getState("year")).month(this.getState("month")).date(this.getState("day"));this.setState({selectedDate:e})}},onChangeSelectedDate(e,t){this.triggerMethod("change:date",e,t)},onClickCancel(){this.getState().reset()},onShow(e,t){this.getState("selectedDate")||(this.getState("year")?(0,a.isNull)(this.getState("month"))?this.showSelectList(this.getMonthSelect(),{field:"month",view:t}):this.showSelectList(this.getDaySelect(),{field:"day",view:t}):this.showSelectList(this.getYearSelect(),{field:"year",view:t}))},getYearSelect:()=>new Ri({collection:new(o().Collection)(Ii),buttonText:ji.yearPlaceholderText,template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||o).call(s,"calendar-days",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:23}}}))+"<span>"+r("function"==typeof(l=null!=(l=c(n,"buttonText")||(null!=t?c(t,"buttonText"):t))?l:o)?l.call(s,{name:"buttonText",hash:{},data:i,loc:{start:{line:1,column:29},end:{line:1,column:45}}}):l)+"</span>"},useData:!0})}),getMonthSelect:()=>new Ri({collection:Ai,buttonText:ji.monthPlaceholderText,state:{isActive:!0}}),getDaySelect(){return new Ri({collection:this.getDayOpts(),buttonText:ji.dayPlaceholderText,state:{isActive:!0}})},showSelectList(e,{field:t,view:n}){this.listenTo(e,"change:selected",(e=>{this.setState(t,e.get("value"))})),n.showChildView("selectRegion",e)},getDayOpts(){const e=d()().year(this.getState("year")).month(this.getState("month")).daysInMonth(),t=(0,a.range)(1,e+1),n=(0,a.map)(t,(function(e){return{value:e,text:String(e)}}));return new(o().Collection)(n)}});var Bi=n(4341),Hi=n.n(Bi);const Gi=h.ZP.globals.patientModal.patientModalViews,Wi=g.View.extend({behaviors(){if(this.getOption("shouldFocus"))return[{behaviorClass:hi.Z,selector:".js-input"}]},className:"pos--relative",template:p().template({1:function(e,t,n,a,i){return"has-error"},3:function(e,t,n,a,i){return"disabled"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="patient-modal__locked-icon">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"lock",{name:"far",hash:{},data:i,loc:{start:{line:3,column:64},end:{line:3,column:78}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <input class="input-primary w-100 js-input '+(null!=(l=h(n,"if").call(o,null!=t?h(t,"hasError"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:47},end:{line:2,column:79}}}))?l:"")+'" placeholder="'+d(typeof(s=null!=(s=h(n,"placeholder")||(null!=t?h(t,"placeholder"):t))?s:r)===c?s.call(o,{name:"placeholder",hash:{},data:i,loc:{start:{line:2,column:94},end:{line:2,column:111}}}):s)+'" value="'+d(typeof(s=null!=(s=h(n,"value")||(null!=t?h(t,"value"):t))?s:r)===c?s.call(o,{name:"value",hash:{},data:i,loc:{start:{line:2,column:120},end:{line:2,column:131}}}):s)+'" '+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:133},end:{line:2,column:171}}}))?l:"")+" />\n    "+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:4},end:{line:3,column:96}}}))?l:"")+"\n  "},useData:!0}),templateContext(){const e=this.getOption("state").get("errors");return{hasError:e&&e[this.getOption("errorField")],placeholder:this.getOption("placeholder"),value:this.model.get(this.getOption("attr")),canEdit:this.model.canEdit()}},ui:{input:".js-input"},events:{"input @ui.input":"onChange"},initialize({state:e}){this.listenTo(e,"change:errors",this.render)},onChange(){const e=this.ui.input.val();this.model.set(this.getOption("attr"),(0,S.Z)(e))},onDomRefresh(){this.getOption("shouldFocus")&&this.ui.input.focus()}}),Zi=M.Z.extend({initialize({model:e}){const t=e.get("sex");this.collection=new(o().Collection)([{text:Gi.sexDroplist.male,value:"m"},{text:Gi.sexDroplist.female,value:"f"},{text:Gi.sexDroplist.other,value:"u"}]),this.setState("selected",this.collection.find({value:t}))},viewOptions:{className:"button-secondary modal__form-component",template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"patientModal"))&&s(l,"patientModalViews"))&&s(l,"sexDroplist"))&&s(l,"defaultText"),t))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return c((d(n,"far")||t&&d(t,"far")||r).call(o,"user",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:14}}}))+"<span>"+c("function"==typeof(s=null!=(s=d(n,"text")||(null!=t?d(t,"text"):t))?s:r)?s.call(o,{name:"text",hash:{},data:i,loc:{start:{line:1,column:20},end:{line:1,column:30}}}):s)+(null!=(l=d(n,"unless").call(o,null!=t?d(t,"text"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:30},end:{line:1,column:131}}}))?l:"")+"</span>"},useData:!0})}}),$i=g.View.extend({className:"modal__form-component",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return"<div data-date-select-region></div>"},useData:!0}),regions:{dateSelect:{el:"[data-date-select-region]",replaceElement:!0}},onChangeDate(e,t){e.set("hasError",t&&t.isAfter()),this.triggerMethod("change:selected",t)},onRender(){const e=new qi({state:{selectedDate:this.model.get("birth_date"),isDisabled:!this.model.canEdit()},viewOptions:{className:"flex"}});this.listenTo(e,"change:date",this.onChangeDate),this.showChildView("dateSelect",e)}}),zi=g.View.extend({className:"modal__footer-info modal__error",template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' <a class="u-margin--l-8 u-text-link js-search">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"patientModal"))&&s(l,"patientModalViews"))&&s(l,"errorView"))&&s(l,"searchBtn"),t))+"</a>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(s=null!=(s=r(n,"error")||(null!=t?r(t,"error"):t))?s:e.hooks.helperMissing)?s.call(o,{name:"error",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:11}}}):s)+(null!=(l=r(n,"if").call(o,null!=t?r(t,"hasSearch"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:11},end:{line:1,column:155}}}))?l:"")},useData:!0}),templateContext(){return{error:this.getOption("error")||Gi.errorView.errors[this.getOption("errorCode")],hasSearch:this.getOption("hasSearch")}},triggers:{"click .js-search":"click:search"}}),Yi=g.View.extend({className:"modal__content",regions:{firstName:"[data-first-name-region]",lastName:"[data-last-name-region]",dob:"[data-dob-region]",sex:"[data-sex-region]",workspaces:"[data-workspaces-region]"},modelEvents:{change:"onChange"},template:Hi(),templateContext(){return{isNew:this.model.isNew(),canEdit:this.model.canEdit()}},initialize({state:e}){this.initState({state:e})},onRender(){this.showFirstNameView(),this.showLastNameView(),this.showSexDroplist(),this.showBirthDatePicker(),this.showWorkspacesComponent()},showFirstNameView(){this.showChildView("firstName",new Wi({model:this.model,state:this.getState(),attr:"first_name",placeholder:Gi.patientModal.firstName,errorField:"name",shouldFocus:!0}))},showLastNameView(){this.showChildView("lastName",new Wi({model:this.model,state:this.getState(),attr:"last_name",placeholder:Gi.patientModal.lastName,errorField:"name"}))},showSexDroplist(){const e=this.showChildView("sex",new Zi({model:this.model,state:{isDisabled:!this.model.canEdit()}}));this.listenTo(e,{"change:selected"(e){this.model.set("sex",e.get("value"))}})},showBirthDatePicker(){const e=this.showChildView("dob",new $i({model:this.model,state:this.getState()}));this.listenTo(e,{"change:selected"(e){this.model.set("birth_date",e?e.format("YYYY-MM-DD"):null)}})},showWorkspacesComponent(){const e=l().request("bootstrap","currentUser"),t=this.showChildView("workspaces",new ra({member:this.model,workspaces:e.getWorkspaces(),isDisabled:!this.model.canEdit()}));this.listenTo(t,{"add:member"(e,t){this.model.addWorkspace(t)},"remove:member"(e,t){this.model.removeWorkspace(t)}})}});(0,D.j_)(Yi);const Ui=o().Model.extend({defaults:{isMinimized:!1}}),Qi=new(o().Model)({text:xi.dashboardsNav.dashboards,icons:[{type:"far",icon:"gauge"}],event:"dashboards:all",eventArgs:[]}),Ki=new(o().Collection)([{onSelect(){l().trigger("event-router","programs:all")},id:"ProgramsApp",text:xi.adminNav.programs,icon:{type:"far",icon:"screwdriver-wrench"}},{onSelect(){l().trigger("event-router","clinicians:all")},id:"CliniciansApp",text:xi.adminNav.clinicians,icon:{type:"far",icon:"users-gear"}}]),Xi=new(o().Collection)([{text:xi.patientsAppNav.ownedBy,icons:[{type:"fas",icon:"list"}],event:"worklist",eventArgs:["owned-by"]},{text:xi.patientsAppNav.schedule,icons:[{type:"fas",icon:"calendar-star"}],event:"schedule",eventArgs:[]},{text:xi.patientsAppNav.sharedBy,icons:[{type:"fas",icon:"arrow-right-arrow-left"}],event:"worklist",eventArgs:["shared-by"]},{text:xi.patientsAppNav.newPastDay,icons:[{type:"fas",icon:"angle-left"},{type:"fas",icon:"1"}],event:"worklist",eventArgs:["new-past-day"]},{text:xi.patientsAppNav.updatedPastThree,icons:[{type:"fas",icon:"angle-left"},{type:"fas",icon:"3"}],event:"worklist",eventArgs:["updated-past-three-days"]},{text:xi.patientsAppNav.doneLastThirty,icons:[{type:"fas",icon:"3"},{type:"fas",icon:"0"}],event:"worklist",eventArgs:["done-last-thirty-days"]}]),Ji=ci.Z.extend({eventRoutes(){return l().request("bootstrap","currentUser").getWorkspaces().reduce(((e,t)=>{const n=t.get("slug");return e[`workspace:${n}`]={action:(0,a.partial)(this.setWorkspace,n),root:!0,route:[n,`${n}/*route`]},e}),{root:{action:"setWorkspace",route:"",root:!0}})},setWorkspace(e,t){const n=l().request("bootstrap","setCurrentWorkspace",e);n&&n.get("slug")&&!t&&(0,a.defer)((()=>{this.replaceUrl(this.getDefaultRoute())}))},getDefaultRoute(){const e=l().request("bootstrap","currentWorkspace").get("slug");return l().request("bootstrap","currentUser").can("app:schedule:reduced")?`/${e}/schedule`:`/${e}/worklist/owned-by`},onNoMatch:a.noop,StateModel:Ui,startAfterInitialized:!0,channelName:"nav",initialize(){const e=l().channel("bootstrap");this.listenTo(e,"change:workspace",this.showMainNavDroplist);const t=l().channel("event-router");this.listenTo(t,"default",(()=>{(0,a.defer)((()=>{o().history.navigate(this.getDefaultRoute(),{trigger:!0})}))}))},radioRequests:{search:"showSearch",patient:"showPatientModal",select:"selectNav"},stateEvents:{"change:currentApp":"onChangeCurrentApp","change:isMinimized":"onChangeIsMinimized"},viewEvents:{"click:addPatient":"onClickAddPatient","click:minimizeMenu":"onClickMinimizeMenu"},childApps:{search:_i},selectNav(e,t,n){this.setState("currentApp",e),this.navMatch=this.getNavMatch(e,t,(0,a.compact)(n)),"dashboards:all"!==t||this.navMatch||(this.navMatch=Qi),this.navMatch&&(this.getView().removeSelected(),this.navMatch.trigger("selected"))},onChangeCurrentApp(e,t){this.setSelectedAdminNavItem(t),this.getView().removeSelected()},onChangeIsMinimized(){this.showMainNavDroplist(),this.showBottomNavView(),this.showNav(),this.navMatch&&(this.getView().removeSelected(),this.navMatch.trigger("selected"));const e=this.getState("currentApp");this.setSelectedAdminNavItem(e),ri().set("isNavMenuMinimized",this.getState("isMinimized"))},getNavMatch(e,t,n){return this._navMatch(Xi,t,n)},_navMatch:(e,t,n)=>e.find((e=>e.get("event")===t&&(0,a.isEqual)(e.get("eventArgs"),n))),onBeforeStart(){const e=ri().get("isNavMenuMinimized");e?this.setState("isMinimized",e):ri().set("isNavMenuMinimized",this.getState("isMinimized"))},onStart(){const e=l().request("bootstrap","currentUser"),t=l().request("bootstrap","setting","manual_patient_creation");this.canPatientCreate=t&&e.can("patients:manage"),e.can("clinicians:manage")||Ki.remove("CliniciansApp"),e.can("programs:manage")||Ki.remove("ProgramsApp"),e.can("app:schedule:reduced")&&Xi.reset(Xi.filter({event:"schedule"})),this.setView(new Oi({model:this.getState()})),this.showMainNavDroplist(),this.showNav(),this.showBottomNavView(),this.showView()},setSelectedAdminNavItem(e){if(!Ki.length)return;const t=Ki.get(e);t||this.adminNavMenu.setState("selected",null),this.adminNavMenu.setState("selected",t)},showBottomNavView(){const e=l().request("bootstrap","currentUser"),t=new Si({model:this.getState(),canPatientCreate:this.canPatientCreate});this.showChildView("bottomNavContent",t),e.can("dashboards:view")&&(this.dashboardsNavView=new Ti({model:Qi,state:this.getState()}),t.showChildView("dashboards",this.dashboardsNavView)),Ki.length&&(this.adminNavMenu=new Ci({collection:Ki,state:this.getState()}),t.showChildView("adminTools",this.adminNavMenu))},showMainNavDroplist(){const e=l().request("bootstrap","currentWorkspace"),t=l().request("bootstrap","currentUser").getWorkspaces(),n=new(o().Collection)(t.map((e=>({id:e.id,onSelect(){l().trigger("event-router",`workspace:${e.get("slug")}`)},text:e.get("name"),icon:{type:"far",icon:"window"}}))));this.showChildView("navMain",new ki({collection:n,state:{selected:n.get(e.id),isMinimized:this.getState("isMinimized")}}))},showNav(){const e=new Vi({model:this.getState()}),t=new Di({collection:Xi,model:this.getState()});e.showChildView("worklists",t),this.listenTo(e,"search",(()=>{this.showSearch()}));const n=l().channel("hotkey");e.listenTo(n,"search",(e=>{e.preventDefault(),this.showSearch()})),this.showChildView("navContent",e)},showSearch(e){const t=this.getChildView("navContent"),n=this.startChildApp("search",{prefillText:e,canPatientCreate:this.canPatientCreate});this.listenTo(n,{stop(){t.triggerMethod("search:active",!1)},"click:addPatient":this.onClickAddPatient}),t.triggerMethod("search:active",!0)},onClickAddPatient(){this.showPatientModal()},onClickMinimizeMenu(){this.toggleState("isMinimized")},getNewPatient(){const e=l().request("bootstrap","currentUser").getWorkspaces();return 1===e.length?l().request("entities","patients:model",{_workspaces:[{id:e.first().id}]}):l().request("entities","patients:model")},showPatientModal(e){const{form_id:t}=l().request("bootstrap","setting","patient_creation_form")||{},n=(e=e||this.getNewPatient()).clone(),i=l().request("modal","show",function(e){const{submit_text:t}=l().request("bootstrap","setting","patient_creation_form")||{};t&&(0,a.extend)(e,{submitText:t});const n=e.patient,i=new Yi({model:n});if(n.canEdit()){const t=n.isNew()?"add":"edit";return(0,a.extend)({bodyView:i,headerIcon:"address-card"},Gi.patientModal[t],e)}return(0,a.extend)({bodyView:i,cancelText:!1,headerIcon:"address-card",infoText:Gi.patientModal.patientAccountManaged},Gi.patientModal.view,e)}({patient:n,onSubmit:()=>{e.canEdit()?(i.disableSubmit(),e.saveAll(n.attributes).then((()=>{i.destroy(),t?l().trigger("event-router","form:patient",e.id,t):l().trigger("event-router","patient:dashboard",e.id)})).catch((({responseData:e})=>{const t=e.errors[0].detail;i.getChildView("body").setState({errors:{name:t}});const a=new zi({hasSearch:!0,error:t});i.listenTo(a,"click:search",(()=>{const e=`${n.get("first_name")} ${n.get("last_name")}`;this.showSearch(e)})),i.showChildView("info",a)}))):i.destroy()}}));i.disableSubmit(e.canEdit()),i.listenTo(n,{change(){i.getRegion("info").empty(),i.disableSubmit(!n.isValid())},invalid(e,t){const n=t.birth_date;"invalidDate"===n&&i.showChildView("info",new zi({errorCode:n}))}})}}),el=h.ZP.patients.patient.sidebar.sidebarViews,tl=g.View.extend({tagName:"h1",className:"patient-sidebar__name",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return c(typeof(l=null!=(l=d(n,"first_name")||(null!=t?d(t,"first_name"):t))?l:o)===r?l.call(s,{name:"first_name",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}):l)+" "+c(typeof(l=null!=(l=d(n,"last_name")||(null!=t?d(t,"last_name"):t))?l:o)===r?l.call(s,{name:"last_name",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:32}}}):l)},useData:!0}),modelEvents:{change:"render"}}),nl=g.View.extend({className:"patient-sidebar flex-region",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div data-name-region></div>\n    <span class="patient-sidebar__icon">'+o((r(n,"far")||t&&r(t,"far")||s).call(l,"address-card",{name:"far",hash:{},data:i,loc:{start:{line:3,column:40},end:{line:3,column:62}}}))+'</span>\n    <button class="button--icon patient-sidebar__menu js-menu">'+o((r(n,"far")||t&&r(t,"far")||s).call(l,"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:4,column:63},end:{line:4,column:81}}}))+'</button>\n    <div class="patient-sidebar__widgets" data-widgets-region></div>\n  '},useData:!0}),regions:{name:"[data-name-region]",widgets:{el:"[data-widgets-region]",regionClass:w.Z}},onRender(){this.showChildView("name",new tl({model:this.model})),this.showChildView("widgets",new $a({model:this.model,collection:this.collection,itemClassName:"patient-sidebar__section"}))},triggers:{"click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const e=this.model.canEdit(),t=new(o().Collection)([{onSelect:(0,a.bind)(this.triggerMethod,this,e?"click:patientEdit":"click:patientView")}]);new v.Z({ui:this.ui.menu,uiView:this,headingText:el.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(l=null!=(l=s(n,"text")||(null!=t?s(t,"text"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"text",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:10}}}):l)},useData:!0}),itemTemplateContext:{text:e?el.menuOptions.edit:el.menuOptions.view},lists:[{collection:t}],align:"right",popWidth:248}).show()}}),al=r.Z.extend({viewEvents:{"click:patientEdit":"showPatientModal","click:patientView":"showPatientModal"},onBeforeStart({patient:e}){this.showView(new nl({model:e})),this.getRegion("widgets").startPreloader()},beforeStart:({patient:e})=>(0,a.map)(l().request("bootstrap","sidebarWidgets:fields"),(t=>l().request("entities","fetch:patientFields:model",e.id,t))),onStart({patient:e}){this.patient=e;const t=l().request("bootstrap","sidebarWidgets");this.showView(new nl({model:this.patient,collection:t}))},showPatientModal(){l().request("nav","patient",this.patient)}}),il=g.View.extend({className:"form-widgets flex",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return"<div data-widgets-region></div>"},useData:!0}),regions:{widgets:"[data-widgets-region]"},onRender({model:e,collection:t}){this.showChildView("widgets",new $a({model:e,collection:t,className:"flex flex-wrap",itemClassName:"form-widgets__section"}))}}),ll=r.Z.extend({beforeStart:({patient:e,form:t})=>(0,a.map)(t.getWidgetFields(),(t=>l().request("entities","fetch:patientFields:model",e.id,t))),onStart({patient:e,form:t}){const n=t.getWidgets();n.length&&this.showView(new il({model:e,collection:n}))}});var sl=n(121),ol=n(7885);const rl=h.ZP.forms.form.formViews,cl=g.View.extend({className:"form__context-trail",actionTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="js-back form__context-link">'+s((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:38},end:{line:1,column:61}}}))+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"forms"))&&o(l,"form"))&&o(l,"formViews"))&&o(l,"contextTrailView"))&&o(l,"backBtn"),t))+"</a>"},useData:!0}),patientTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="js-dashboard form__context-link">'+s((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:43},end:{line:1,column:66}}}))+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"forms"))&&o(l,"form"))&&o(l,"formViews"))&&o(l,"contextTrailView"))&&o(l,"backDashboard"),t))+"</a>"},useData:!0}),getTemplate(){return this.action?this.actionTemplate:this.patientTemplate},initialize({patient:e,action:t}){this.patient=e,this.action=t},triggers:{"click .js-back":"click:back","click .js-dashboard":"click:dashboard"},onClickBack(){l().request("history","go:back",(()=>{this.action.get("_flow")?this.routeToFlow():this.routeToPatient()}))},onClickDashboard(){this.routeToPatient()},routeToFlow(){l().trigger("event-router","flow",this.action.get("_flow"))},routeToPatient(){l().trigger("event-router","patient:dashboard",this.patient.id)}}),dl=g.View.extend({className:"flex",template:p().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="js-history-button form__actions-icon'+(null!=(l=o(n,"if").call(s,null!=t?o(t,"shouldShowHistory"):t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:73},end:{line:2,column:117}}}))?l:"")+'">'+e.escapeExpression((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(s,"clock-rotate-left",{name:"far",hash:{},data:i,loc:{start:{line:2,column:119},end:{line:2,column:146}}}))+"</button>"},2:function(e,t,n,a,i){return" is-selected"},4:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"down-left-and-up-right-to-center",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:74},end:{line:3,column:116}}}))},6:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"up-right-and-down-left-from-center",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:124},end:{line:3,column:168}}}))},8:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="js-sidebar-button form__actions-icon'+(null!=(l=o(n,"if").call(s,null!=t?o(t,"isActionShown"):t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:72},end:{line:4,column:112}}}))?l:"")+'">'+e.escapeExpression((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(s,"file-lines",{name:"far",hash:{},data:i,loc:{start:{line:4,column:114},end:{line:4,column:134}}}))+"</button>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    "+(null!=(l=o(n,"if").call(s,null!=t?o(t,"hasHistory"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:2,column:162}}}))?l:"")+'\n    <button class="js-expand-button form__actions-icon">'+(null!=(l=o(n,"if").call(s,null!=t?o(t,"isExpanded"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i,loc:{start:{line:3,column:56},end:{line:3,column:175}}}))?l:"")+"</button>\n    "+(null!=(l=o(n,"if").call(s,null!=t?o(t,"hasAction"):t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:4},end:{line:4,column:150}}}))?l:"")+"\n  "},useData:!0}),templateContext(){return{isActionShown:this.isActionShown(),hasHistory:this.responses&&!!this.responses.length,hasAction:!!this.action}},onRender(){this.renderSidebarTooltip(),this.renderExpandTooltip(),this.renderHistoryTooltip()},initialize({action:e,responses:t}){this.action=e,this.responses=t,this.listenTo(this.responses,"update",this.render)},modelEvents:{"change:isExpanded":"render","change:isActionSidebar":"render","change:shouldShowHistory":"render"},ui:{sidebarButton:".js-sidebar-button",expandButton:".js-expand-button",historyButton:".js-history-button"},triggers:{"click @ui.sidebarButton":"click:sidebarButton","click @ui.expandButton":"click:expandButton","click @ui.historyButton":"click:historyButton"},isActionShown(){return this.model.get("isActionSidebar")&&!this.model.get("isExpanded")},renderSidebarTooltip(){const e=this.isActionShown()?rl.formActionsView.hideActionSidebar:rl.formActionsView.showActionSidebar;new T.Z({message:e,uiView:this,ui:this.ui.sidebarButton})},renderExpandTooltip(){const e=this.model.get("isExpanded")?rl.formActionsView.decreaseWidth:rl.formActionsView.increaseWidth;new T.Z({message:e,uiView:this,ui:this.ui.expandButton})},renderHistoryTooltip(){const e=this.model.get("shouldShowHistory")?rl.formActionsView.currentVersion:rl.formActionsView.responseHistory;new T.Z({message:e,uiView:this,ui:this.ui.historyButton})}}),hl=g.View.extend({className:"form__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="form__layout">\n      <div class="flex">\n        <div class="overflow--hidden flex-grow">\n          <div data-context-trail-region></div>\n          <div class="form__title">\n            <span class="form__title-icon">'+c((h(n,"far")||t&&h(t,"far")||r).call(o,"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:7,column:43},end:{line:7,column:75}}}))+'</span>\n            <span class="u-text--overflow">'+c(d(null!=(l=null!=t?h(t,"patient"):t)?h(l,"first_name"):l,t))+" "+c(d(null!=(l=null!=t?h(t,"patient"):t)?h(l,"last_name"):l,t))+"  "+c("function"==typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:8,column:90},end:{line:8,column:100}}}):s)+'</span>\n          </div>\n        </div>\n        <div class="flex-grow">\n          <div data-status-region>&nbsp;</div>\n          <div class="form__controls">\n            <div data-state-actions-region></div>\n            <div data-form-updated-region></div>\n            <div data-form-action-region></div>\n          </div>\n        </div>\n      </div>\n      <div data-widgets-header-region></div>\n      <div data-form-region></div>\n    </div>\n    <div class="form__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regionClass:g.Region.extend({replaceElement:!0}),regions:{contextTrail:"[data-context-trail-region]",form:"[data-form-region]",formUpdated:"[data-form-updated-region]",formAction:{el:"[data-form-action-region]",replaceElement:!0},sidebar:{el:"[data-sidebar-region]",replaceElement:!1},stateActions:"[data-state-actions-region]",status:"[data-status-region]",widgets:"[data-widgets-header-region]"},templateContext(){return{patient:this.getOption("patient").pick("first_name","last_name")}},onRender(){this.showChildView("contextTrail",new cl({patient:this.getOption("patient"),action:this.getOption("action")}))}}),ul=g.View.extend({behaviors:[ol.Z],className:"form__content",template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(l=null!=(l=s(n,"responseId")||(null!=t?s(t,"responseId"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"responseId",hash:{},data:i,loc:{start:{line:1,column:40},end:{line:1,column:56}}}):l)},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<iframe src="/formapp/'+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"responseId"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:22},end:{line:1,column:63}}}))?l:"")+'"></iframe>'},useData:!0}),templateContext(){return{responseId:this.getOption("responseId")}}}),ml=g.View.extend({className:"form__content",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="form__prompt">\n      <h2 class="form__prompt-title">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"forms"))&&d(l,"form"))&&d(l,"formViews"))&&d(l,"storedSubmissionView"))&&d(l,"title"),t))+'</h2>\n      <div class="form__prompt-dialog">\n        <div class="flex-shrink">\n          <button class="button--blue button--large js-submit">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"forms"))&&d(l,"form"))&&d(l,"formViews"))&&d(l,"storedSubmissionView"))&&d(l,"submitButton"),t))+'</button>\n          <div class="u-margin--t-16">'+o((d(n,"formatHTMLMessage")||t&&d(t,"formatHTMLMessage")||c).call(r,(d(n,"intlGet")||t&&d(t,"intlGet")||c).call(r,"forms.form.formViews.storedSubmissionView.updated",{name:"intlGet",hash:{},data:i,loc:{start:{line:7,column:58},end:{line:7,column:119}}}),{name:"formatHTMLMessage",hash:{updated:(d(n,"formatDateTime")||t&&d(t,"formatDateTime")||c).call(r,null!=t?d(t,"updated"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:128},end:{line:7,column:166}}})},data:i,loc:{start:{line:7,column:38},end:{line:7,column:168}}}))+'</div>\n        </div>\n        <div class="flex-shrink">\n          <button class="button-secondary button--large form__discard-button js-discard" style="color:red">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"forms"))&&d(l,"form"))&&d(l,"formViews"))&&d(l,"storedSubmissionView"))&&d(l,"cancelButton"),t))+"</button>\n        </div>\n      </div>\n    </div>\n  "},useData:!0}),templateContext(){return{updated:this.getOption("updated")}},triggers:{"click .js-submit":"submit","click .js-discard":"discard"},onDiscard(){const e=l().request("modal","show:small",{bodyText:rl.storedSubmissionView.discardModal.bodyText,headingText:rl.storedSubmissionView.discardModal.headingText,submitText:rl.storedSubmissionView.discardModal.submitText,buttonClass:"button--red",onSubmit:()=>{e.destroy(),this.triggerMethod("discard:submission")}})}}),pl=g.View.extend({behaviors:[ol.Z],className:"form__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="form__layout">\n      <div class="form__context-trail">\n        <a class="js-back form__context-link">'+c((h(n,"fas")||t&&h(t,"fas")||r).call(o,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:46},end:{line:4,column:68}}}))+c(d((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"forms"))&&h(l,"form"))&&h(l,"formViews"))&&h(l,"previewView"))&&h(l,"backBtn"),t))+"</a>"+c((h(n,"fas")||t&&h(t,"fas")||r).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:5,column:8},end:{line:5,column:32}}}))+c(d((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"forms"))&&h(l,"form"))&&h(l,"formViews"))&&h(l,"previewView"))&&h(l,"title"),t))+'\n      </div>\n      <div class="form__title"><span class="form__title-icon">'+c((h(n,"far")||t&&h(t,"far")||r).call(o,"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:7,column:62},end:{line:7,column:94}}}))+"</span>"+c("function"==typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:7,column:101},end:{line:7,column:111}}}):s)+'</div>\n      <div class="form__content">\n        <iframe src="/formapp/preview"></iframe>\n      </div>\n    </div>\n  '},useData:!0}),triggers:{"click .js-back":"click:back"},onClickBack(){l().request("history","go:back")}}),gl=g.View.extend({className:"u-text-align--right",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"forms.form.formViews.statusView.label",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:20},end:{line:1,column:69}}}),{name:"formatHTMLMessage",hash:{date:(o(n,"formatDateTime")||t&&o(t,"formatDateTime")||s).call(l,null!=t?o(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:75},end:{line:1,column:112}}})},data:i,loc:{start:{line:1,column:0},end:{line:1,column:114}}}))},useData:!0})}),fl=g.View.extend({className:"form__form-action",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--grey" disabled=true>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"forms"))&&s(l,"form"))&&s(l,"formViews"))&&s(l,"readOnlyView"))&&s(l,"buttonText"),t))+"</button>\n  "},useData:!0})}),wl=g.View.extend({className:"form__submit-status",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="form__submit-status-icon">\n      '+s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"lock-keyhole",{name:"far",hash:{},data:i,loc:{start:{line:3,column:6},end:{line:3,column:28}}}))+'\n    </div>\n    <div class="form__submit-status-locked-text">\n      '+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"forms"))&&o(l,"form"))&&o(l,"formViews"))&&o(l,"lockedSubmitView"))&&o(l,"permissionMessage"),t))+"\n    </div>\n  "},useData:!0})}),vl=M.Z.extend({align:"right",initialize({model:e}){this.collection=new(o().Collection)([{text:rl.saveView.save.droplistItemText,value:"save"},{text:rl.saveView.saveAndGoBack.droplistItemText,value:"saveAndGoBack"}]);const t=e.get("saveButtonType");this.setState("selected",this.collection.find({value:t}))},viewOptions:{className:"button--green button__drop-list-select",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"caret-down",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:20}}}))},useData:!0})},picklistOptions:()=>({headingText:rl.saveView.droplistLabel,isCheckable:!0})}),bl=g.View.extend({className:"form__submit-status",template:p().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="u-text--overflow">'+e.escapeExpression((o(n,"formatHTMLMessage")||t&&o(t,"formatHTMLMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"forms.form.formViews.lastUpdatedView.updatedAt",{name:"intlGet",hash:{},data:i,loc:{start:{line:8,column:58},end:{line:8,column:116}}}),{name:"formatHTMLMessage",hash:{updated:(o(n,"formatDateTime")||t&&o(t,"formatDateTime")||s).call(l,null!=t?o(t,"updated"):t,"AGO_OR_TODAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:8,column:125},end:{line:8,column:164}}})},data:i,loc:{start:{line:8,column:38},end:{line:8,column:166}}}))+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="form__submit-status-icon">\n      '+o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(s,"shield-check",{name:"far",hash:{},data:i,loc:{start:{line:3,column:6},end:{line:3,column:28}}}))+'\n    </div>\n    <div class="form__submit-status-text">\n      <div class="u-text--overflow">'+o(e.lambda((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"forms"))&&r(l,"form"))&&r(l,"formViews"))&&r(l,"lastUpdatedView"))&&r(l,"storedWork"),t))+"</div>\n"+(null!=(l=r(n,"if").call(s,null!=t?r(t,"updated"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:7,column:6},end:{line:9,column:13}}}))?l:"")+"    </div>\n  "},useData:!0}),templateContext(){return{updated:this.updated}},initialize({updated:e}){this.updated=e,this.updated&&(this.renderInterval=setInterval((()=>{this.render()}),45e3))},onBeforeDestroy(){clearInterval(this.renderInterval)}}),yl=g.View.extend({className:"form__form-action",regions:{saveType:{el:"[data-save-type-region]",replaceElement:!0}},modelEvents:{"change:saveButtonType":"render"},templateContext(){const e=this.model.get("saveButtonType");return{isDisabled:this.getOption("isDisabled"),showSaveButton:"save"===e,showSaveGoBackButton:"saveAndGoBack"===e}},template:p().template({1:function(e,t,n,a,i){return"disabled"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"forms"))&&s(l,"form"))&&s(l,"formViews"))&&s(l,"saveView"))&&s(l,"save"))&&s(l,"buttonText"),t))+"\n"},5:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"forms"))&&s(l,"form"))&&s(l,"formViews"))&&s(l,"saveView"))&&s(l,"saveAndGoBack"))&&s(l,"buttonText"),t))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green button__drop-list-action js-save-button" '+(null!=(l=o(n,"if").call(s,null!=t?o(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:74},end:{line:2,column:107}}}))?l:"")+">\n"+(null!=(l=o(n,"if").call(s,null!=t?o(t,"showSaveButton"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:6},end:{line:5,column:13}}}))?l:"")+(null!=(l=o(n,"if").call(s,null!=t?o(t,"showSaveGoBackButton"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:6,column:6},end:{line:8,column:13}}}))?l:"")+"    </button>\n    <button data-save-type-region></button>\n  "},useData:!0}),triggers:{"click .js-save-button":"click:save"},onRender(){const e=this.showChildView("saveType",new vl({model:this.model,state:{isDisabled:this.getOption("isDisabled")}}));this.listenTo(e,{"change:selected"(e){this.triggerMethod("select:button:type",e.get("value"))}})}}),_l=g.View.extend({className:"form__form-action",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"forms"))&&s(l,"form"))&&s(l,"formViews"))&&s(l,"updateView"))&&s(l,"buttonText"),t))+"</button>\n  "},useData:!0}),triggers:{click:"click"}}),xl=M.Z.extend({viewOptions:{className:"button-filter",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||s).call(l,"clock-rotate-left",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:27}}}))+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:27},end:{line:1,column:66}}}))+o((r(n,"far")||t&&r(t,"far")||s).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:66},end:{line:1,column:86}}}))},useData:!0})},picklistOptions:{itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"formatDateTime")||t&&l(t,"formatDateTime")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:39}}}))},useData:!0})}}),kl=g.View.extend({className:"form__form-action",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div data-versions-region></div>\n    <button class="button--blue js-current u-margin--l-8">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"forms"))&&s(l,"form"))&&s(l,"formViews"))&&s(l,"historyView"))&&s(l,"currentVersionButton"),t))+"</button>\n  "},useData:!0}),regions:{versions:{el:"[data-versions-region]",replaceElement:!0}},triggers:{"click .js-current":"click:current"},initialize({selected:e,collection:t}){const n=this.showChildView("versions",new xl({collection:t,state:{selected:e}}));this.listenTo(n,{"change:selected"(e){this.triggerMethod("change:response",e)}})}}),Cl=r.Z.extend({childApps:{patient:{AppClass:al,regionName:"sidebar",getOptions:["patient"]},widgetHeader:{AppClass:ll,regionName:"widgets",getOptions:["patient","form"]}},initFormState(){const e=ri().get(`form-state_${this.currentUser.id}`);this.setState((0,a.extend)({isActionSidebar:!0,isExpanded:!0,shouldShowHistory:!1,saveButtonType:"save"},e))},onBeforeStart(){this.getRegion().startPreloader(),this.currentUser=l().request("bootstrap","currentUser"),this.initFormState()},beforeStart({patientActionId:e}){return[l().request("entities","fetch:forms:byAction",e),l().request("entities","fetch:actions:withResponses",e),l().request("entities","fetch:patients:model:byAction",e),l().request("entities","fetch:formResponses:latest",{action:e,status:u.zB.ANY,editor:this.currentUser.id})]},onFail(){l().request("alert","show:error",h.ZP.forms.form.formApp.notFound),l().trigger("event-router","default")},onBeforeStop(){this.removeChildApp("formsService")},onStart(e,t,n,i,s){this.form=t,this.patient=i,this.action=n,this.responses=n.getFormResponses(),this.latestResponse=s,this.isReadOnly=t.isReadOnly(),this.isLocked=n.isLocked()||!n.canSubmit(),this.isSubmitHidden=t.isSubmitHidden(),this.listenTo(n,"destroy",(function(){l().request("alert","show:success",h.ZP.forms.form.formApp.deleteSuccess),l().trigger("event-router","default")})),this.startFormService(),this.setView(new hl({model:this.form,patient:i,action:n})),this.startChildApp("widgetHeader"),this.showStateActions(),this.showSidebar(),this.setState({responseId:(0,a.get)(this.responses.getFirstSubmission(),"id",!1)}),this.showView()},startFormService(){const e=this.addChildApp("formsService",sl.Z,{patient:this.patient,action:this.action,form:this.form,responses:this.responses,latestResponse:this.latestResponse});this.isReadOnly||this.isLocked||this.bindEvents(e,this.serviceEvents)},serviceEvents:{submit:"onFormServiceSubmit",success:"onFormServiceSuccess",error:"onFormServiceError",ready:"onFormServiceReady","update:submission":"onFormServiceUpdateSubmission"},shouldSaveAndGoBack(){return"saveAndGoBack"===this.getState("saveButtonType")&&!this.isSubmitHidden},onFormServiceSubmit(){this.shouldSaveAndGoBack()&&(this.loadingModal=l().request("modal","show:loading"))},onFormServiceSuccess(e){this.shouldSaveAndGoBack()?this.listenTo(this.loadingModal,"destroy",(()=>{l().request("history","go:back",(()=>{this.action.get("_flow")?l().trigger("event-router","flow",this.action.get("_flow")):l().trigger("event-router","patient:dashboard",this.patient.id)}))})):(this.responses.unshift(e),this.setState({responseId:e.id}))},onFormServiceError(e){this.loadingModal&&this.loadingModal.destroy(),403===parseInt(e[0].status,10)&&l().request("alert","show:error",h.ZP.forms.form.formViews.lockedSubmitView.permissionMessage),this.showFormSave()},onFormServiceReady(){this.showFormSave()},onFormServiceUpdateSubmission(e){this.showLastUpdated(e)},stateEvents:{change:"onChangeState","change:isExpanded":"showSidebar","change:isActionSidebar":"showSidebar","change:shouldShowHistory":"showFormActions","change:responseId":"onChangeResponseId"},onChangeState(e){ri().set(`form-state_${this.currentUser.id}`,e.pick("isExpanded","saveButtonType"))},onChangeResponseId(){this.showFormActions(),this.showContent()},showStateActions(){const e=new dl({model:this.getState(),action:this.action,responses:this.responses.filterSubmissions()});this.listenTo(e,{"click:sidebarButton":this.onClickSidebarButton,"click:expandButton":this.onClickExpandButton,"click:historyButton":this.onClickHistoryButton}),this.showChildView("stateActions",e)},onClickSidebarButton(){this.getState("isExpanded")?this.setState({isActionSidebar:!0,isExpanded:!1}):this.toggleState("isActionSidebar")},onClickExpandButton(){this.toggleState("isExpanded")},onClickHistoryButton(){this.setState({responseId:(0,a.get)(this.responses.getFirstSubmission(),"id"),shouldShowHistory:!this.getState("shouldShowHistory")})},showContent(){const e=this.getState("responseId");if(this.isReadOnly||this.isLocked||e)return void this.showForm();const{updated:t}=l().request(`form${this.form.id}`,"get:storedSubmission");if(t){const e=this.showChildView("form",new ml({updated:t}));this.listenTo(e,{submit(){this.showForm()},"discard:submission"(){l().request(`form${this.form.id}`,"clear:storedSubmission"),this.showForm(),this.showFormActions()}})}else this.showForm()},showForm(){this.showChildView("form",new ul({model:this.form,responseId:this.getState("responseId")}))},showSidebar(){const e=this.getState("isActionSidebar"),t=this.getState("isExpanded");if(e&&!t||l().request("sidebar","close"),t)return this.stopChildApp("patient"),void this.getRegion("sidebar").empty();e&&this.showActionSidebar(),this.startChildApp("patient")},showActionSidebar(){const e=l().request("sidebar","start","action",{action:this.action,isShowingForm:!0});this.listenTo(e,"stop",(()=>{this.getState("isExpanded")||this.setState("isActionSidebar",!1)}))},showFormActions(){this.showFormStatus(),this.getState("shouldShowHistory")?this.showFormHistory():this.isReadOnly?this.showReadOnly():this.isLocked?this.showLockedSubmit():this.getState("responseId")?this.showFormUpdate():this.showFormSaveDisabled()},showReadOnly(){this.showChildView("formAction",new fl)},showLockedSubmit(){this.showChildView("formAction",new wl)},showFormStatus(){this.responses.getFirstSubmission()&&this.showChildView("status",new gl({model:this.responses.getFirstSubmission()}))},showFormHistory(){const e=this.responses.get(this.getState("responseId")),t=this.showChildView("formAction",new kl({selected:e,collection:this.responses.filterSubmissions()}));this.listenTo(t,{"change:response"(e){this.setState({responseId:e.id})},"click:current"(){this.setState({responseId:(0,a.get)(this.responses.getFirstSubmission(),"id"),shouldShowHistory:!1})}})},showFormUpdate(){const e=this.showChildView("formAction",new _l);this.listenTo(e,"click",(()=>{this.setState({responseId:null})}))},showLastUpdated(e){const t=new bl({updated:e});this.showChildView("formUpdated",t)},showFormSaveDisabled(){this.isSubmitHidden?this.getRegion("formAction").empty():this.showChildView("formAction",new yl({isDisabled:!0,model:this.getState()}))},showFormSave(){if(this.isSubmitHidden)return;const e=this.showChildView("formAction",new yl({model:this.getState()}));this.listenTo(e,{"click:save"(){l().request(`form${this.form.id}`,"send","form:submit"),this.showFormSaveDisabled()},"select:button:type"(e){this.setState({saveButtonType:e})}})}}),Sl=r.Z.extend({childApps:{patient:{AppClass:al,regionName:"sidebar",getOptions:["patient"]},widgetHeader:{AppClass:ll,regionName:"widgets",getOptions:["patient","form"]}},initFormState(){const e=ri().get(`form-state_${this.currentUser.id}`);this.setState((0,a.extend)({isExpanded:!0,saveButtonType:"save"},e))},onBeforeStart(){this.getRegion().startPreloader(),this.currentUser=l().request("bootstrap","currentUser"),this.initFormState()},beforeStart({formId:e,patientId:t}){return[l().request("entities","fetch:patients:model",t),l().request("entities","fetch:forms:model",e),l().request("entities","fetch:formResponses:latest",{patient:t,form:e,status:u.zB.ANY,editor:this.currentUser.id})]},onBeforeStop(){this.removeChildApp("formsService")},onStart(e,t,n,a){this.patient=t,this.form=n,this.latestResponse=a,this.isReadOnly=this.form.isReadOnly(),this.isSubmitHidden=this.form.isSubmitHidden(),this.startFormService(),this.setView(new hl({model:this.form,patient:t})),this.startChildApp("widgetHeader"),this.showStateActions(),this.showFormActions(),this.showSidebar(),this.showContent(),this.showView()},startFormService(){const e=this.addChildApp("formsService",sl.Z,{patient:this.patient,form:this.form,latestResponse:this.latestResponse});this.isReadOnly||this.bindEvents(e,this.serviceEvents)},serviceEvents:{submit:"onFormServiceSubmit",success:"onFormServiceSuccess",error:"onFormServiceError",ready:"onFormServiceReady","update:submission":"onFormServiceUpdateSubmission"},shouldSaveAndGoBack(){return"saveAndGoBack"===this.getState("saveButtonType")&&!this.isSubmitHidden},onFormServiceSubmit(){this.shouldSaveAndGoBack()&&(this.loadingModal=l().request("modal","show:loading"))},onFormServiceSuccess(e){this.shouldSaveAndGoBack()?this.listenTo(this.loadingModal,"destroy",(()=>{l().request("history","go:back",(()=>{l().trigger("event-router","patient:dashboard",this.patient.id)}))})):(e.set({_created_at:d()().format()}),this.showForm(e.id),this.showChildView("status",new gl({model:e})),this.showFormActions())},onFormServiceError(){this.loadingModal&&this.loadingModal.destroy(),this.showFormSave()},onFormServiceReady(){this.showFormSave()},onFormServiceUpdateSubmission(e){this.showLastUpdated(e)},stateEvents:{change:"onChangeState","change:isExpanded":"showSidebar"},onChangeState(e){ri().set(`form-state_${this.currentUser.id}`,e.pick("isExpanded","saveButtonType"))},showStateActions(){const e=new dl({model:this.getState(),patient:this.patient});this.listenTo(e,{"click:expandButton":this.onClickExpandButton}),this.showChildView("stateActions",e)},onClickExpandButton(){this.toggleState("isExpanded")},showContent(){if(this.isReadOnly)return void this.showForm();const{updated:e}=l().request(`form${this.form.id}`,"get:storedSubmission");if(e){const t=this.showChildView("form",new ml({updated:e}));this.listenTo(t,{submit(){this.showForm()},"discard:submission"(){l().request(`form${this.form.id}`,"clear:storedSubmission"),this.showForm(),this.showFormActions()}})}else this.showForm()},showForm(e){this.showChildView("form",new ul({model:this.form,responseId:e}))},showSidebar(){if(this.getState("isExpanded"))return this.stopChildApp("patient"),void this.getRegion("sidebar").empty();this.startChildApp("patient")},showFormActions(){this.isReadOnly?this.showReadOnly():this.showFormSaveDisabled()},showReadOnly(){this.showChildView("formAction",new fl)},showLastUpdated(e){const t=new bl({updated:e});this.showChildView("formUpdated",t)},showFormSaveDisabled(){this.isSubmitHidden||this.showChildView("formAction",new yl({isDisabled:!0,model:this.getState()}))},showFormSave(){if(this.isSubmitHidden)return;const e=this.showChildView("formAction",new yl({model:this.getState()}));this.listenTo(e,{"click:save"(){l().request(`form${this.form.id}`,"send","form:submit"),this.showFormSaveDisabled()},"select:button:type"(e){this.setState({saveButtonType:e})}})}}),Ol=r.Z.extend({beforeStart:({formId:e})=>l().request("entities","fetch:forms:model",e),onBeforeStop(){this.removeChildApp("formsService")},onStart(e,t){this.addChildApp("formsService",sl.Z,{form:t}),this.showView(new pl({model:t}))}}),Tl=ci.Z.extend({routerAppName:"FormsApp",childApps:{form:Cl,formPreview:Ol,patientForm:Sl},eventRoutes:{"form:patient":{action:"showFormPatient",route:"patient/:id/form/:id"},"form:patientAction":{action:"showFormAction",route:"patient-action/:id/form/:id"},"form:preview":{action:"showFormPreview",route:"form/:id/preview"}},showFormAction(e,t){this.startCurrent("form",{formId:t,patientActionId:e})},showFormPatient(e,t){this.startCurrent("patientForm",{formId:t,patientId:e})},showFormPreview(e){this.startCurrent("formPreview",{formId:e})}}),Dl=r.Z.extend({constructor:function(){this._current=null,this.initRouter(),this.on("before:stop",this.stopCurrent),r.Z.apply(this,arguments)},initRouter(){const e=(0,a.result)(this,"eventRoutes",{});this._eventRoutes=(0,g.normalizeMethods)(this,e)},startRoute({event:e,eventArgs:t}){const n=this._eventRoutes[e];n&&n.apply(this,t)},mixinOptions(e){const t=(0,a.result)(this,"currentAppOptions");return(0,a.extend)({},t,e)},startCurrent(e,t){this.stopCurrent();const n=this.startChildApp(e,this.mixinOptions(t));return this._current=n,n},getCurrent(){return this._current},stopCurrent(){this._current&&(this._current.stop(),this._current=null)}}),Vl={setSelectedList(e,t){return this.set({[`${this.getType()}Selected`]:e,lastSelectedIndex:t})},getSelectedList(){return(0,a.clone)(this.get(`${this.getType()}Selected`))},isSelected(e){return!!this.getSelectedList()[e.id]},getSelected(e){const t=this.getSelectedList(),n=(0,a.reduce)((0,a.keys)(t),((n,a)=>(t[a]&&e.get(a)&&n.push({id:a}),n)),[]);return l().request("entities",`${this.getType()}:collection`,n)},clearSelected(){this.setSelectedList({},null),this.trigger("select:none")},selectRange(e,t,n){const a=this.isSelected(t),i=e.findIndex(t),l=this.get("lastSelectedIndex");if(!n||null===l||a)return void this.selectOne(t.id,!a,i);const s=Math.min(i,l),o=Math.max(i,l),r=e.map("id").slice(s,o+1);this.selectMultiple(r,i)},selectOne(e,t,n){const a=this.getSelectedList();a[e]=t,this.setSelectedList(a,t?n:null)},selectMultiple(e,t=null){const n=this.getSelectedList(),a=e.reduce(((e,t)=>(e[t]=!0,e)),n);this.setSelectedList(a,t),this.trigger("select:multiple")}},Ml=o().Model.extend({defaults:()=>({actionBeingEdited:null,lastSelectedIndex:null,actionsSelected:{}}),isBeingEdited(e){return this.get("actionBeingEdited")===e.id},getType:()=>"actions"});(0,a.extend)(Ml.prototype,Vl);const Pl=Ml,El=r.Z.extend({beforeStart({actionId:e,patientId:t}){if(!e){const e=l().request("bootstrap","currentUser"),n=l().request("bootstrap","currentWorkspace").getStates(),i=(0,a.first)(n.filter({status:u.lO.QUEUED}));return l().request("entities","actions:model",{_patient:t,_state:i.id,_owner:{type:"clinicians",id:e.id},_author:{type:"clinicians",id:e.id},outreach:u.Ww.DISABLED,sharing:u.q$.DISABLED,duration:0,due_date:null,due_time:null,updated_at:d()().format()})}return l().request("entities","fetch:actions:model",e)},onFail(){l().request("alert","show:error",h.ZP.patients.patient.actionApp.notFound),this.stop()},onStart(e,t){const n=l().request("sidebar","start","action",{action:t});this.listenTo(n,"stop",this.stop)}});var jl=n(5473),Al=n.n(jl),Nl=n(8210),Fl=n.n(Nl);const Il=h.ZP.patients.shared.bulkEdit.bulkEditViews;function Rl(e,t){if(!e)return!1;const n=d()(t?`${e} ${t}`:e);return n.isBefore(d()(),"day")||n.isBefore(d()(),"minute")}const Ll=I.extend({onPicklistSelect({model:e}){e.isDone()&&this.getOption("flows")?this.shouldSelectDone(e):this.setSelectedStatus(e)},shouldSelectDone(e){const t=this.getOption("flows");if(!(0,a.some)(t.invoke("isAllDone"),(e=>!e)))return void this.setSelectedStatus(e);if(this.popRegion.empty(),l().request("bootstrap","setting","require_done_flow"))return void l().request("modal","show:small",{bodyText:Il.flowsStateComponent.requireDoneModal.bodyText,headingText:Il.flowsStateComponent.requireDoneModal.headingText,submitText:Il.flowsStateComponent.requireDoneModal.submitText,cancelText:!1,buttonClass:"button--blue"});const n=l().request("modal","show:small",{bodyText:Il.flowsStateComponent.doneModal.bodyText,headingText:Il.flowsStateComponent.doneModal.headingText,submitText:Il.flowsStateComponent.doneModal.submitText,onSubmit:()=>{this.setSelectedStatus(e),n.destroy()}})},setSelectedStatus(e){this.setState("selected",e),this.popRegion.empty()}}),ql=g.View.extend({template:p().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(s,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(s,"patients.shared.bulkEdit.bulkEditViews.bulkEditButtonView.editFlows",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:25},end:{line:4,column:104}}}),{name:"formatMessage",hash:{itemCount:null!=(l=null!=t?r(t,"items"):t)?r(l,"length"):l},data:i,loc:{start:{line:4,column:8},end:{line:4,column:129}}}))+"\n"},3:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(s,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(s,"patients.shared.bulkEdit.bulkEditViews.bulkEditButtonView.editActions",{name:"intlGet",hash:{},data:i,loc:{start:{line:6,column:25},end:{line:6,column:106}}}),{name:"formatMessage",hash:{itemCount:null!=(l=null!=t?r(t,"items"):t)?r(l,"length"):l},data:i,loc:{start:{line:6,column:8},end:{line:6,column:131}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n   <button class="button--blue js-bulk-edit">\n'+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"isFlowList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:3,column:6},end:{line:7,column:13}}}))?l:"")+'    </button>\n    <span class="button--text js-cancel">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"bulkEdit"))&&s(l,"bulkEditViews"))&&s(l,"bulkEditButtonView"))&&s(l,"cancel"),t))+"</span>\n  "},useData:!0}),templateContext(){return{isFlowList:this.getOption("isFlowType")}},triggers:{"click .js-cancel":"click:cancel","click .js-bulk-edit":"click:edit"}}),Bl=g.View.extend({className:"modal__header--sidebar",template:p().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--icon u-margin--r-8 js-menu">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:7,column:76},end:{line:7,column:94}}}))+"</button>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex">\n      <div class="flex-grow">\n      <h3 class="sidebar__heading">'+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||o).call(s,(c(n,"intlGet")||t&&c(t,"intlGet")||o).call(s,"patients.shared.bulkEdit.bulkEditViews.bulkEditActionsHeaderView.headingText",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:52},end:{line:4,column:140}}}),{name:"formatMessage",hash:{itemCount:null!=(l=null!=t?c(t,"items"):t)?c(l,"length"):l},data:i,loc:{start:{line:4,column:35},end:{line:4,column:165}}}))+"</h3>\n      </div>\n      <div>\n        "+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isDevelop"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:7,column:8},end:{line:7,column:110}}}))?l:"")+'\n        <button class="button--icon js-close">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,"xmark",{name:"far",hash:{},data:i,loc:{start:{line:8,column:46},end:{line:8,column:61}}}))+"</button>\n      </div>\n    </div>\n  "},useData:!0}),templateContext:()=>({isDevelop:!1}),triggers:{"click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const e=this.collection.length,t=new(o().Collection)([{onSelect:(0,a.bind)(this.triggerMethod,this,"confirm:delete")}]);new v.Z({ui:this.ui.menu,uiView:this,headingText:Il.bulkEditActionsHeaderView.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||s).call(l,"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+o((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkEditActionsHeaderView.menuOptions.delete",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:73},end:{line:1,column:168}}}),{name:"formatMessage",hash:{itemCount:null!=t?r(t,"itemCount"):t},data:i,loc:{start:{line:1,column:56},end:{line:1,column:190}}}))+"</span>"},useData:!0}),itemTemplateContext:{itemCount:e},lists:[{collection:t}],align:"right",popWidth:248}).show()},onConfirmDelete(){const e=l().request("modal","show:small",{bodyText:Il.confirmDeleteActionsModal.bodyText,headingText:Il.confirmDeleteActionsModal.headingText,submitText:Il.confirmDeleteActionsModal.submitText,buttonClass:"button--red",onSubmit:()=>{e.destroy(),this.triggerMethod("delete",this.collection)}})}}),Hl=g.View.extend({className:"modal__header--sidebar",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex">\n      <div class="flex-grow">\n        <h3 class="sidebar__heading">'+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||o).call(s,(c(n,"intlGet")||t&&c(t,"intlGet")||o).call(s,"patients.shared.bulkEdit.bulkEditViews.bulkEditFlowsHeaderView.headingText",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:54},end:{line:4,column:140}}}),{name:"formatMessage",hash:{itemCount:null!=(l=null!=t?c(t,"items"):t)?c(l,"length"):l},data:i,loc:{start:{line:4,column:37},end:{line:4,column:165}}}))+'</h3>\n      </div>\n      <div>\n        <button class="button--icon u-margin--r-8 js-menu">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:7,column:59},end:{line:7,column:77}}}))+'</button>\n        <button class="button--icon js-close">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,"xmark",{name:"far",hash:{},data:i,loc:{start:{line:8,column:46},end:{line:8,column:61}}}))+"</button>\n      </div>\n    </div>\n  "},useData:!0}),triggers:{"click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const e=this.collection.length,t=new(o().Collection)([{onSelect:(0,a.bind)(this.triggerMethod,this,"confirm:delete")}]);new v.Z({ui:this.ui.menu,uiView:this,headingText:Il.bulkEditFlowsHeaderView.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||s).call(l,"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+o((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkEditFlowsHeaderView.menuOptions.delete",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:73},end:{line:1,column:166}}}),{name:"formatMessage",hash:{itemCount:null!=t?r(t,"itemCount"):t},data:i,loc:{start:{line:1,column:56},end:{line:1,column:188}}}))+"</span>"},useData:!0}),itemTemplateContext:{itemCount:e},lists:[{collection:t}],align:"right",popWidth:248}).show()},onConfirmDelete(){const e=l().request("modal","show:small",{bodyText:Il.confirmDeleteFlowsModal.bodyText,headingText:Il.confirmDeleteFlowsModal.headingText,submitText:Il.confirmDeleteFlowsModal.submitText,buttonClass:"button--red",onSubmit:()=>{e.destroy(),this.triggerMethod("delete",this.collection)}})}}),Gl=g.View.extend({modelEvents:{"change:stateMulti":"showState","change:ownerMulti":"showOwner","change:dateMulti":"showDueDateTime","change:date":"showDueDateTime","change:timeMulti":"showDueTime","change:durationMulti":"showDuration"},className:"modal__content--sidebar",template:Al(),regions:{state:"[data-state-region]",owner:"[data-owner-region]",dueDate:"[data-due-date-region]",dueTime:"[data-due-time-region]",duration:"[data-duration-region]"},onRender(){this.showState(),this.showOwner(),this.showDueDateTime(),this.showDuration()},getStateComponent(){return this.model.get("stateMulti")?new I({viewOptions:{className:"button-secondary w-100",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-dot",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:20}}}))+'<span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkStateDefaultText"),t))+"</span>"},useData:!0})}}):new I({stateId:this.model.get("stateId")})},getOwnerComponent(){const e=this.model.someComplete();return this.model.get("ownerMulti")?new $({viewOptions:{attributes:{disabled:e},className:"button-secondary w-100",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-user",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+'<span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkOwnerDefaultText"),t))+"</span>"},useData:!0})}}):new $({owner:this.model.get("owner"),state:{isDisabled:e}})},getDueDateComponent(){const e=this.model.someComplete();if(this.model.get("dateMulti"))return new Q({state:{isDisabled:e},viewOptions:{attributes:{disabled:e},tagName:"button",className:"button-secondary w-100 due-component",triggers:{click:"click"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"calendar-days",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:23}}}))+'<span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkDueDateDefaultText"),t))+"</span>"},useData:!0})}});const t=Rl(this.model.get("date"));return new Q({date:this.model.get("date"),state:{isDisabled:e},isOverdue:t})},getDueTimeComponent(){if(this.model.get("timeMulti"))return new ie({viewOptions:{attributes:{disabled:this.model.get("dateMulti")||this.model.someComplete()},className:"button-secondary time-component w-100",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"clock",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+' <span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkDueTimeDefaultText"),t))+"</span>"},useData:!0})}});const e=this.model.get("time"),t=this.model.get("dateMulti")&&!e||!this.model.get("date")||this.model.someComplete(),n=Rl(this.model.get("date"),e);return new ie({time:e,state:{isDisabled:t},isOverdue:n})},getDurationComponent(){const e=this.model.someComplete();return this.model.get("durationMulti")?new de({viewOptions:{className:"button-secondary w-100",attributes:{disabled:e},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+'<span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkDurationDefaultText"),t))+"</span>"},useData:!0})}}):new de({duration:this.model.get("duration"),state:{isDisabled:e}})},showState(){const e=this.getStateComponent();this.listenTo(e,"change:state",(e=>{this.model.setState(e)})),this.showChildView("state",e)},showOwner(){const e=this.getOwnerComponent();this.listenTo(e,"change:owner",(e=>{this.model.setOwner(e)})),this.showChildView("owner",e)},showDueDateTime(){this.showDueDate(),this.showDueTime()},showDueDate(){const e=this.getDueDateComponent();this.listenTo(e,"change:due",(e=>{this.model.setDueDate(e)})),this.showChildView("dueDate",e)},showDueTime(){const e=this.getDueTimeComponent();this.listenTo(e,"change:time",(e=>{this.model.setDueTime(e)})),this.showChildView("dueTime",e)},showDuration(){const e=this.getDurationComponent();this.listenTo(e,"change:duration",(e=>{this.model.setDuration(e)})),this.showChildView("duration",e)}}),Wl=g.View.extend({modelEvents:{"change:applyOwner":"render","change:ownerMulti":"render"},className:"u-margin--t-4 u-margin--l-16",template:p().template({1:function(e,t,n,a,i){return" disabled"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-check",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:24},end:{line:3,column:46}}}))},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:3,column:54},end:{line:3,column:70}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--checkbox js-apply-owner"'+(null!=(l=o(n,"if").call(s,null!=t?o(t,"ownerMulti"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:51},end:{line:2,column:85}}}))?l:"")+">\n      "+(null!=(l=o(n,"if").call(s,null!=t?o(t,"applyOwner"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:3,column:6},end:{line:3,column:78}}}))?l:"")+"<span>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkEditFlowBodyTemplate"))&&o(l,"applyOwnerLabel"),t))+"</span>\n    </button>"},useData:!0}),triggers:{"click .js-apply-owner":"click:select"},onClickSelect(){this.model.set("applyOwner",!this.model.get("applyOwner"))}}),Zl=g.View.extend({modelEvents:{"change:stateMulti":"showState","change:ownerMulti":"showOwner"},className:"modal__content--sidebar",template:Fl(),regions:{state:"[data-state-region]",owner:"[data-owner-region]",applyOwner:"[data-apply-owner-region]"},onRender(){this.showState(),this.showOwner(),this.showApplyOwner()},getStateComponent(){return this.model.get("stateMulti")?new Ll({flows:this.collection,viewOptions:{className:"button-secondary w-100",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-dot",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:20}}}))+'<span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkStateDefaultText"),t))+"</span>"},useData:!0})}}):new Ll({flows:this.collection,stateId:this.model.get("stateId")})},getOwnerComponent(){const e=this.model.someComplete();return this.model.get("ownerMulti")?new $({viewOptions:{className:"button-secondary w-100",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-user",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+'<span class="button__value--indeterminate">'+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkOwnerDefaultText"),t))+"</span>"},useData:!0})},state:{isDisabled:e}}):new $({owner:this.model.get("owner"),state:{isDisabled:e}})},showState(){const e=this.getStateComponent();this.listenTo(e,"change:state",(e=>{this.model.setState(e)})),this.showChildView("state",e)},showOwner(){const e=this.getOwnerComponent();this.listenTo(e,"change:owner",(e=>{this.model.setOwner(e)})),this.showChildView("owner",e)},showApplyOwner(){this.showChildView("applyOwner",new Wl({model:this.model}))}}),$l=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkEditFlowsSuccess",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:88}}}),{name:"formatMessage",hash:{itemCount:null!=t?o(t,"itemCount"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:110}}}))},useData:!0}),zl=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkEditActionsSuccess",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:90}}}),{name:"formatMessage",hash:{itemCount:null!=t?o(t,"itemCount"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:112}}}))},useData:!0}),Yl=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkDeleteFlowsSuccess",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:90}}}),{name:"formatMessage",hash:{itemCount:null!=t?o(t,"itemCount"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:112}}}))},useData:!0}),Ul=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkDeleteActionsSuccess",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:92}}}),{name:"formatMessage",hash:{itemCount:null!=t?o(t,"itemCount"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:114}}}))},useData:!0}),Ql=o().Model.extend({initialize({collection:e}){const t=e.at(0);this.initBulkState(e,t),this.initBulkOwner(e,t),this.initBulkDueDate(e,t),this.initBulkDueTime(e,t),this.initBulkDuration(e,t)},initBulkState(e,t){const n=t.getState().id,a=e.some((e=>e.getState().id!==n));this.set({stateMulti:a,stateId:a?null:n})},initBulkOwner(e,t){const n=t.getOwner(),a=e.some((e=>e.getOwner().id!==n.id));this.set({ownerMulti:a,owner:a?null:n})},initBulkDueDate(e,t){const n=t.get("due_date"),a=e.some((e=>e.get("due_date")!==n));this.set({dateMulti:a,date:a?null:n})},initBulkDueTime(e,t){const n=t.get("due_time"),a=e.some((e=>e.get("due_time")!==n));this.set({timeMulti:a,time:a?null:n})},initBulkDuration(e,t){const n=t.get("duration"),a=e.some((e=>e.get("duration")!==n));this.set({durationMulti:a,duration:a?null:n})},setState(e){return this.set({stateId:e.id,stateMulti:!1,stateChanged:!0})},setOwner(e){return this.set({owner:e,ownerMulti:!1,ownerChanged:!0})},setDueDate(e){return e?this.set({date:e.format("YYYY-MM-DD"),dateMulti:!1,dateChanged:!0}):this.set({date:null,time:null,dateMulti:!1,timeMulti:!1})},setDueTime(e){return this.set({time:e||null,timeMulti:!1,timeChanged:!0})},setDuration(e){return this.set({duration:e,durationMulti:!1,durationChanged:!0})},someComplete(){return this.get("collection").some((e=>e.isDone()))},getData(){const{stateChanged:e,stateId:t,ownerChanged:n,owner:i,dateChanged:l,date:s,timeChanged:o,time:r,durationChanged:c,duration:d}=this.attributes,h={};return e&&(h._state=t),n&&(h._owner=(0,a.pick)(i,"id","type")),l&&(h.due_date=s),o&&(h.due_time=r),c&&(h.duration=d),h}}),Kl=r.Z.extend({StateModel:Ql,onStart(){const e=new Bl({collection:this.getState("collection")}),t=new Gl({model:this.getState(),collection:this.getState("collection")});this.modal=l().request("modal","show:sidebar",{headerView:e,bodyView:t,onSubmit:this.onSubmit.bind(this)}),this.listenTo(e,{delete:(0,a.partial)(this.triggerMethod,"delete")}),this.listenTo(this.modal,{destroy:this.stop})},onSubmit(){this.modal.disableSubmit(),this.triggerMethod("save",this.getState().getData())},onStop(){this.modal.destroy()}});var Xl=n(2252),Jl=n.n(Xl),es=n(8790),ts=n.n(es);const ns=g.View.extend({initialize(){this.patient=this.model.getPatient()},className:"patient-flow__context-trail",template:p().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-back patient-flow__context-link">\n        '+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:30}}}))+r(e.lambda((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"patient"))&&c(l,"flowViews"))&&c(l,"contextBackBtn"),t))+"\n      </a>\n      "+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:29}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=h(n,"if").call(o,null!=t?h(t,"hasLatestList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:7,column:11}}}))?l:"")+'    <a class="js-patient patient-flow__context-link">'+d(typeof(s=null!=(s=h(n,"firstName")||(null!=t?h(t,"firstName"):t))?s:r)===c?s.call(o,{name:"firstName",hash:{},data:i,loc:{start:{line:8,column:53},end:{line:8,column:68}}}):s)+" "+d(typeof(s=null!=(s=h(n,"lastName")||(null!=t?h(t,"lastName"):t))?s:r)===c?s.call(o,{name:"lastName",hash:{},data:i,loc:{start:{line:8,column:69},end:{line:8,column:83}}}):s)+"</a>"+d((h(n,"fas")||t&&h(t,"fas")||r).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:87},end:{line:8,column:110}}}))+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:8,column:110},end:{line:8,column:120}}}):s)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back","click .js-patient":"click:patient"},onClickBack(){l().request("history","go:latestList")},onClickPatient(){l().trigger("event-router","patient:dashboard",this.patient.id)},templateContext(){return{hasLatestList:l().request("history","has:latestList"),firstName:this.patient.get("first_name"),lastName:this.patient.get("last_name")}}}),as=g.View.extend({className:"patient-flow__header",modelEvents:{editing:"onEditing",change:"render","change:_progress":"onChangeFlowProgress"},onEditing(e){this.$el.toggleClass("is-selected",e)},template:Jl(),regions:{state:"[data-state-region]",owner:"[data-owner-region]"},triggers:{click:"edit"},ui:{progress:".js-progress"},onRender(){this.canEdit=this.model.canEdit(),this.showState(),this.showOwner()},showState(){if(!this.canEdit){const e=new me({model:this.model,isCompact:!0});return void this.showChildView("state",e)}const e=new ct({flow:this.model,stateId:this.model.get("_state"),isCompact:!0});this.listenTo(e,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",e)},showOwner(){if(!this.canEdit){const e=new pe({model:this.model,isCompact:!0});return void this.showChildView("owner",e)}const e=this.model.isDone(),t=new $({owner:this.model.getOwner(),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",t)},onChangeFlowProgress(){const e=this.model.get("_progress");this.ui.progress.attr({value:e.complete,max:e.total})}}),is=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="patient-flow__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"patient"))&&s(l,"flowViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),ls=g.View.extend({className:"table-list__item",modelEvents:{change:"render",editing:"onEditing"},initialize({state:e}){this.state=e,this.listenTo(e,{"select:multiple":this.showCheck,"select:none":this.showCheck}),this.flow=this.model.getFlow(),this.listenTo(this.flow,{"change:_state":this.render})},template:ts(),templateContext(){return{hasForm:this.model.getForm(),icon:this.model.hasOutreach()?"share-from-square":"file-lines",hasAttachments:this.model.hasAttachments()}},tagName:"tr",regions:{check:"[data-check-region]",state:"[data-state-region]",owner:"[data-owner-region]",dueDate:"[data-due-date-region]",dueTime:"[data-due-time-region]",form:"[data-form-region]"},triggers:{click:"click","click .js-no-click":"prevent-row-click"},onClick(){l().trigger("event-router","flow:action",this.model.get("_flow"),this.model.id)},onEditing(e){this.state.isSelected(this.model)||this.$el.toggleClass("is-selected",e)},onRender(){const e=this.canEdit;this.canEdit=!this.flow.isDone()&&this.model.canEdit(),this.showCheck(),this.showState(),this.showOwner(),this.showDueDate(),this.showDueTime(),this.showForm(),e!==this.canEdit&&(this.canEdit||this.toggleSelected(!1),this.triggerMethod("change:canEdit"))},toggleSelected(e){this.state.isBeingEdited(this.model)||this.$el.toggleClass("is-selected",e)},showCheck(){if(!this.canEdit)return;const e=this.state.isSelected(this.model);this.toggleSelected(e);const t=new V({state:{isSelected:e}});this.listenTo(t,{select(e){this.triggerMethod("select",this,!!e.shiftKey)},"change:isSelected":this.toggleSelected}),this.showChildView("check",t)},showState(){if(this.canEdit)this.stateComponent=new I({stateId:this.model.get("_state"),isCompact:!0}),this.listenTo(this.stateComponent,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",this.stateComponent);else{const e=new me({model:this.model,isCompact:!0});this.showChildView("state",e)}},showOwner(){if(!this.canEdit){const e=new pe({model:this.model,isCompact:!0});return void this.showChildView("owner",e)}const e=this.model.isDone();this.ownerComponent=new $({owner:this.model.getOwner(),isCompact:!0,state:{isDisabled:e}}),this.listenTo(this.ownerComponent,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",this.ownerComponent)},showDueDate(){if(!this.canEdit){const e=new ge({model:this.model});return void this.showChildView("dueDate",e)}const e=this.model.isDone();this.dueDateComponent=new Q({date:this.model.get("due_date"),isCompact:!0,state:{isDisabled:e},isOverdue:this.model.isOverdue()}),this.listenTo(this.dueDateComponent,"change:due",(e=>{this.model.saveDueDate(e)})),this.showChildView("dueDate",this.dueDateComponent)},showDueTime(){if(!this.canEdit){const e=new fe({model:this.model});return void this.showChildView("dueTime",e)}const e=this.model.isDone()||!this.model.get("due_date");this.dueTimeComponent=new ie({time:this.model.get("due_time"),isCompact:!0,state:{isDisabled:e},isOverdue:this.model.isOverdue()}),this.listenTo(this.dueTimeComponent,"change:time",(e=>{this.model.saveDueTime(e)})),this.showChildView("dueTime",this.dueTimeComponent)},showForm(){this.model.getForm()&&this.showChildView("form",new he({model:this.model}))}}),ss=g.CollectionView.extend({className:"table-list patient-flow__list",tagName:"table",childView:ls,childViewOptions(){return{state:this.getOption("state")}},childViewTriggers:{select:"select","change:canEdit":"listItem:canEdit"},emptyView:is,viewComparator:({model:e})=>e.get("sequence"),initialize({state:e,editableCollection:t}){this.state=e,this.editableCollection=t,this.onListItemCanEdit=(0,a.debounce)(this.onListItemCanEdit,60)},onListItemCanEdit(){this.triggerMethod("change:canEdit")},onSelect(e,t){this.state.selectRange(this.editableCollection,e.model,t)}}),os=g.View.extend({className:"patient-flow__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="patient-flow__layout">\n      <div data-context-trail-region></div>\n      <div data-header-region></div>\n      <div class="patient-flow__actions">\n        <div data-select-all-region></div>\n        <div data-tools-region></div>\n      </div>\n      <div data-action-list-region></div>\n    </div>\n    <div class="patient-flow__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},header:"[data-header-region]",sidebar:"[data-sidebar-region]",actionList:{el:"[data-action-list-region]",regionClass:w.Z,replaceElement:!0},tools:{el:"[data-tools-region]",replaceElement:!0},selectAll:{el:"[data-select-all-region]",replaceElement:!0}}}),rs=g.View.extend({tagName:"button",className:"button--checkbox u-margin--r-16",attributes(){if(this.getOption("isDisabled"))return{disabled:"disabled"}},triggers:{click:"click"},getTemplate(){return this.getOption("isSelectAll")?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-check",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0}):this.getOption("isSelectNone")||this.getOption("isDisabled")?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))},useData:!0}):p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-minus",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0})}}),cs=h.ZP.patients.shared.addWorkflow.addWorkflowViews,ds=v.Z.extend({popWidth:248,isSelectlist:!0,placeholderText:cs.addWorkflowOptlist.placeholderText,itemTemplateContext(){const e="program-actions"===this.model.get("itemType"),t=this.model.get("hasOutreach")?"share-from-square":"file-lines";return{icon:{icon:e?t:"folder",type:e?"far":"fas",classes:"add-workflow__picklist-icon"}}}}),hs=g.View.extend({tagName:"button",className:"button-primary",headingText:cs.addWorkflowOptlist.headingText,template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||o).call(s,"circle-plus",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+"<span>"+r(e.lambda((l=(l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"shared"))&&c(l,"addWorkflow"))&&c(l,"addWorkflowViews"))&&c(l,"addButtonView"))&&c(l,"label"),t))+"</span>"+r((c(n,"far")||t&&c(t,"far")||o).call(s,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:110},end:{line:1,column:130}}}))},useData:!0}),triggers:{click:"click"},onClick(){new ds({headingText:this.getOption("headingText"),ui:this.$el,uiView:this,lists:this.getOption("lists"),onNew:this.getOption("onNew")}).show()}}),us=Dl.extend({StateModel:Pl,routerAppName:"FlowApp",childApps:{action:El,patient:al,bulkEditActions:Kl},eventRoutes:{"flow:action":"showActionSidebar"},stateEvents:{"change:actionsSelected":"onChangeSelected"},onChangeSelected(){this.toggleBulkSelect()},onBeforeStart(){this.resetStateDefaults(),this.showView(new os)},beforeStart:({flowId:e})=>[l().request("entities","fetch:flows:model",e),l().request("entities","fetch:actions:collection:byFlow",e),l().request("entities","fetch:patients:model:byFlow",e)],onFail(){l().trigger("event-router","notFound"),this.stop()},onStart({currentRoute:e},t,n,a){this.flow=t,this.actions=n,this.editableCollection=n.clone(),this.patient=a,this.addOpts=this.getAddOpts(this.flow.getProgramFlow()),this.showChildView("contextTrail",new ns({model:this.flow})),this.listenTo(this.editableCollection,"reset",this.toggleBulkSelect),this.toggleBulkSelect(),this.showHeader(),this.showActionList(),this.showSidebar(),this.listenTo(this.actions,{"change:_state":this.onActionChangeState,destroy:this.onActionDestroy}),this.listenTo(this.flow,"change:_owner",this.onFlowChangeOwner),this.startRoute(e)},onActionChangeState(e){const{complete:t,total:n}=this.flow.get("_progress"),a=e.isDone();l().request("entities","states:model",e.previous("_state")).isDone()!==a&&this.flow.set({_progress:{complete:t+(a?1:-1),total:n}})},onActionDestroy(e){const{complete:t,total:n}=this.flow.get("_progress"),a=e.isDone();this.flow.set({_progress:{complete:t-(a?1:0),total:n-1}})},onFlowChangeOwner(e,t){if("teams"===t.type)return;const n=e.getOwner().getTeam();this.actions.each((e=>{e.isDone()||e.getOwner()!==n||e.set({_owner:t})}))},showHeader(){const e=new as({model:this.flow});this.listenTo(e,{edit:this.onEditFlow}),this.showChildView("header",e)},getAddOpts(e){return e.getAddableActions().map((e=>({text:e.get("name"),itemType:e.type,hasOutreach:e.hasOutreach(),onSelect:(0,a.bind)(this.triggerMethod,this,"add:programAction",e)})))},showAdd(){this.showChildView("tools",new hs({headingText:cs.addActionHeadingText,lists:[{collection:new(o().Collection)(this.addOpts)}]}))},toggleBulkSelect(){this.selected=this.getState().getSelected(this.editableCollection),this.showSelectAll(),this.selected.length?this.showBulkEditButtonView():this.showAdd()},showBulkEditButtonView(){const e=new ql({tagName:"span",collection:this.selected});this.listenTo(e,{"click:cancel":this.onClickBulkCancel,"click:edit":this.onClickBulkEdit}),this.showChildView("tools",e)},onClickBulkCancel(){this.getState().clearSelected()},onClickBulkEdit(){const e=this.startChildApp("bulkEditActions",{state:{collection:this.selected}});this.listenTo(e,{save(t){const n=this.selected.length;this.selected.save(t).then((()=>{this.showUpdateSuccess(n),e.stop(),this.getState().clearSelected()})).catch((()=>{l().request("alert","show:error",h.ZP.patients.worklist.worklistApp.bulkEditFailure),this.getState().clearSelected(),this.restart()}))},delete(){const t=this.selected.length;this.selected.destroy().then((()=>{this.showDeleteSuccess(t),e.stop(),this.getState().clearSelected()}))}})},showDeleteSuccess(e){l().request("alert","show:success",(0,h.SM)(Ul,{itemCount:e}))},showUpdateSuccess(e){l().request("alert","show:success",(0,h.SM)(zl,{itemCount:e}))},showDisabledSelectAll(){this.showChildView("selectAll",new rs({isDisabled:!0}))},showSelectAll(){if(!this.editableCollection.length)return void this.showDisabledSelectAll();const e=new rs({isSelectAll:this.selected.length===this.editableCollection.length,isSelectNone:!this.selected.length});this.listenTo(e,"click",this.onClickBulkSelect),this.showChildView("selectAll",e)},onClickBulkSelect(){this.selected.length!==this.editableCollection.length?this.getState().selectMultiple(this.editableCollection.map("id")):this.getState().clearSelected()},onAddProgramAction(e){const t=e.getAction({flowId:this.flow.id});t.saveAll().then((()=>{this.actions.push(t),l().trigger("event-router","flow:action",this.flow.id,t.id)}))},showActionList(){const e=new ss({collection:this.actions,editableCollection:this.editableCollection,state:this.getState()});this.listenTo(e,"change:canEdit",(()=>{this.editableCollection.reset(this._getListEditable(e))})),this.showChildView("actionList",e)},_getListEditable(e){return this.flow.isDone()?[]:e.children.reduce(((e,{canEdit:t,model:n})=>(t&&e.push(n),e)),[])},showSidebar(){this.startChildApp("patient",{region:this.getRegion("sidebar"),patient:this.patient})},showActionSidebar(e,t){const n=this.getChildApp("action");this.listenToOnce(n,{start(e,t){this.setState("actionBeingEdited",t.id),t.trigger("editing",!0)},stop(){this.setState("actionBeingEdited",null)}}),this.startChildApp("action",{actionId:t})},onEditFlow(){l().request("sidebar","start","flow",{flow:this.flow})}}),ms={"program-actions":"add:programAction","program-flows":"add:programFlow",new:"add:newAction"},ps=r.Z.extend({beforeStart:()=>[l().request("entities","fetch:programs:collection"),l().request("entities","fetch:programActions:collection"),l().request("entities","fetch:programFlows:collection")],onStart(e,t){t.comparator="name";const n=t.filter((e=>{const t=!!e.get("published_at"),n=!!e.get("archived_at");return t&&!n}));t.reset(n),this.showView(new hs({lists:this.getLists(t)}))},getLists(e){const t=this.getProgramsOpts(e),n={itemType:"program-actions",text:cs.newActionText,onSelect:(0,a.bind)(this.triggerMethod,this,ms.new)};return t.unshift({collection:new(o().Collection)([n]),itemClassName:"u-text--italic"}),t},getProgramsOpts(e){return e.map((e=>{const t=e.get("name"),n=e.getAddable(),i={itemType:"program-actions",text:cs.noResultsText,isDisabled:!0};if(!n.length)return{itemClassName:"picklist--no-results",headingText:t,collection:new(o().Collection)([i]),getItemSearchText:a.noop};const l=this.getProgramItemsOpts(n);return{headingText:t,collection:new(o().Collection)(l)}}))},getProgramItemsOpts(e){return e.map((e=>({text:e.get("name"),itemType:e.type,hasOutreach:"program-actions"===e.type&&e.hasOutreach(),onSelect:(0,a.bind)(this.triggerMethod,this,ms[e.type],e)})))}});var gs=n(1711),fs=n.n(gs),ws=n(9409),vs=n.n(ws),bs=n(5446),ys=n.n(bs);const _s=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="patient__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"patient"))&&s(l,"dashboard"))&&s(l,"dashboardViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),xs=g.Behavior.extend({modelEvents:{editing:"onEditing",change:"onChange"},onChange(){this.view.render()},onEditing(e){this.$el.toggleClass("is-selected",e)},onInitialize(){this.view.model.isNew()&&this.$el.addClass("is-selected")}}),ks=g.Behavior.extend({modelEvents:{"change:_state":"onChangeState"},onChangeState(){this.view.model.isDone()?(0,at.Z)({targets:this.el,delay:300,duration:500,opacity:[1,0],easing:"easeOutQuad",complete:()=>{this.view.triggerMethod("change:visible")}}):(this.$el.css({opacity:1}),this.view.triggerMethod("change:visible"))}}),Cs=g.View.extend({className:"table-list__item",tagName:"tr",modelEvents:{"change:_owner":"render"},behaviors:[xs,ks],regions:{state:"[data-state-region]",owner:"[data-owner-region]",dueDate:"[data-due-date-region]",dueTime:"[data-due-time-region]",form:"[data-form-region]"},template:fs(),templateContext(){return{icon:this.model.hasOutreach()?"share-from-square":"file-lines",hasAttachments:this.model.hasAttachments()}},triggers:{click:"click","click .js-no-click":"prevent-row-click"},onClick(){l().trigger("event-router","patient:action",this.model.get("_patient"),this.model.id)},onRender(){this.canEdit=this.model.canEdit(),this.showState(),this.showOwner(),this.showDueDate(),this.showDueTime(),this.showForm()},showState(){if(!this.canEdit){const e=new me({model:this.model,isCompact:!0});return void this.showChildView("state",e)}const e=this.model.isNew(),t=new I({stateId:this.model.get("_state"),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",t)},showOwner(){if(!this.canEdit){const e=new pe({model:this.model,isCompact:!0});return void this.showChildView("owner",e)}const e=this.model.isNew(),t=new $({owner:this.model.getOwner(),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",t)},showDueDate(){if(!this.canEdit){const e=new ge({model:this.model});return void this.showChildView("dueDate",e)}const e=this.model.isNew(),t=new Q({date:this.model.get("due_date"),isCompact:!0,state:{isDisabled:e},isOverdue:this.model.isOverdue()});this.listenTo(t,"change:due",(e=>{this.model.saveDueDate(e)})),this.showChildView("dueDate",t)},showDueTime(){if(!this.canEdit){const e=new fe({model:this.model});return void this.showChildView("dueTime",e)}const e=this.model.isNew()||!this.model.get("due_date"),t=new ie({time:this.model.get("due_time"),isCompact:!0,state:{isDisabled:e},isOverdue:this.model.isOverdue()});this.listenTo(t,"change:time",(e=>{this.model.saveDueTime(e)})),this.showChildView("dueTime",t)},showForm(){this.model.getForm()&&this.showChildView("form",new he({model:this.model}))}}),Ss=g.View.extend({className:"table-list__item",tagName:"tr",modelEvents:{"change:_owner":"render"},behaviors:[xs],regions:{owner:"[data-owner-region]"},template:vs(),templateContext(){return{stateOptions:this.model.getState().get("options")}},triggers:{click:"click","click .js-no-click":"prevent-row-click"},onClick(){l().trigger("event-router","flow",this.model.id)},onRender(){this.canEdit=this.model.canEdit(),this.showOwner()},showOwner(){if(!this.canEdit){const e=new pe({model:this.model,isCompact:!0});return void this.showChildView("owner",e)}const e=this.model.isNew(),t=new $({owner:this.model.getOwner(),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",t)}}),Os=g.CollectionView.extend({childViewEvents:{"change:visible":"filter"},className:"table-list patient__list",tagName:"table",childView:e=>"flows"===e.type?Ss:Cs,emptyView:_s,viewComparator:(e,t)=>(0,Ie.XQ)("desc",e.model.get("updated_at"),t.model.get("updated_at")),viewFilter:({model:e})=>!e.isDone()}),Ts=g.View.extend({className:"flex-region patient__content",regions:{content:{el:"[data-content-region]",regionClass:w.Z,replaceElement:!0},addWorkflow:"[data-add-workflow-region]"},ui:{loading:".js-loading"},template:ys(),triggers:{"click .js-archive":"click:archive"},onClickArchive(){l().trigger("event-router","patient:archive",this.model.id)},onRender(){(0,at.Z)({targets:this.ui.loading[0],opacity:.5,loop:!0,easing:"easeInOutSine",duration:400,direction:"alternate"})}}),Ds=r.Z.extend({childApps:{addWorkflow:ps},onBeforeStart({patient:e}){this.currentUser=l().request("bootstrap","currentUser"),this.patient=e,this.showView(new Ts({model:e})),this.currentUser.can("work:own")||this.getRegion("addWorkflow").empty(),this.getRegion("content").startPreloader()},beforeStart({patient:e}){const t={state:l().request("bootstrap","currentWorkspace").getStates().groupByDone().notDone.getFilterIds()};return[l().request("entities","fetch:actions:collection:byPatient",{patientId:e.id,filter:t}),l().request("entities","fetch:flows:collection:byPatient",{patientId:e.id,filter:t})]},onStart(e,t,n){this.collection=new(o().Collection)([...t.models,...n.models]),this.showChildView("content",new Os({collection:this.collection})),this.startAddWorkflow()},startAddWorkflow(){if(!this.currentUser.can("work:own"))return;const e=this.startChildApp("addWorkflow",{region:this.getRegion("addWorkflow"),patient:this.patient});this.listenTo(e,{"add:newAction":this.onAddNewAction,"add:programAction":this.onAddProgramAction,"add:programFlow":this.onAddProgramFlow})},onAddNewAction(){l().trigger("event-router","patient:action:new",this.patient.id)},onAddProgramAction(e){const t=e.getAction({patientId:this.patient.id});t.saveAll().then((()=>{this.collection.unshift(t),l().trigger("event-router","patient:action",this.patient.id,t.id)}))},onAddProgramFlow(e){const t=e.getFlow(this.patient.id);t.saveAll().then((()=>{l().trigger("event-router","flow",t.id)}))},onEditAction(e){e.isNew()?this.collection.unshift(e):e.trigger("editing",!0)}});var Vs=n(8367),Ms=n.n(Vs),Ps=n(4331),Es=n.n(Ps);const js=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="patient__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"patient"))&&s(l,"archive"))&&s(l,"archiveViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),As=g.Behavior.extend({modelEvents:{editing:"onEditing",change:"onChange"},onChange(){this.view.render()},onEditing(e){this.$el.toggleClass("is-selected",e)}}),Ns=g.Behavior.extend({modelEvents:{"change:_state":"onChangeState"},onChangeState(){this.view.model.isDone()?(this.$el.css({opacity:1}),this.view.triggerMethod("change:visible")):(0,at.Z)({targets:this.el,delay:300,duration:500,opacity:[1,0],easing:"easeOutQuad",complete:()=>{this.view.triggerMethod("change:visible")}})}}),Fs=g.View.extend({className:"table-list__item",tagName:"tr",modelEvents:{"change:_owner":"render"},behaviors:[As,Ns],regions:{state:"[data-state-region]",owner:"[data-owner-region]",dueDate:"[data-due-date-region]",dueTime:"[data-due-time-region]",form:"[data-form-region]"},template:Ms(),templateContext(){return{icon:this.model.hasOutreach()?"share-from-square":"file-lines",hasAttachments:this.model.hasAttachments()}},triggers:{click:"click","click .js-no-click":"prevent-row-click"},onClick(){l().trigger("event-router","patient:action",this.model.get("_patient"),this.model.id)},onRender(){this.canEdit=this.model.canEdit(),this.showState(),this.showOwner(),this.showDueDay(),this.showDueTime(),this.showForm()},showState(){if(!this.canEdit){const e=new me({model:this.model,isCompact:!0});return void this.showChildView("state",e)}const e=new I({stateId:this.model.get("_state"),isCompact:!0});this.listenTo(e,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",e)},showOwner(){if(!this.canEdit){const e=new pe({model:this.model,isCompact:!0});return void this.showChildView("owner",e)}const e=new $({owner:this.model.getOwner(),isCompact:!0,state:{isDisabled:!0}});this.showChildView("owner",e)},showDueDay(){if(!this.canEdit){const e=new ge({model:this.model});return void this.showChildView("dueDate",e)}const e=new Q({date:this.model.get("due_date"),isCompact:!0,state:{isDisabled:!0},isOverdue:this.model.isOverdue()});this.showChildView("dueDate",e)},showDueTime(){if(!this.canEdit){const e=new fe({model:this.model});return void this.showChildView("dueTime",e)}const e=new ie({time:this.model.get("due_time"),isCompact:!0,state:{isDisabled:!0},isOverdue:this.model.isOverdue()});this.showChildView("dueTime",e)},showForm(){this.model.getForm()&&this.showChildView("form",new he({model:this.model}))}}),Is=g.View.extend({className:"table-list__item",tagName:"tr",modelEvents:{"change:_owner":"render"},behaviors:[As,Ns],regions:{state:"[data-state-region]",owner:"[data-owner-region]"},template:Es(),triggers:{click:"click","click .js-no-click":"prevent-row-click"},onClick(){l().trigger("event-router","flow",this.model.id)},onRender(){this.canEdit=this.model.canEdit(),this.showState(),this.showOwner()},showState(){if(!this.canEdit){const e=new me({model:this.model,isCompact:!0});return void this.showChildView("state",e)}const e=new I({stateId:this.model.get("_state"),isCompact:!0});this.listenTo(e,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",e)},showOwner(){if(!this.canEdit){const e=new pe({model:this.model,isCompact:!0});return void this.showChildView("owner",e)}const e=new $({owner:this.model.getOwner(),isCompact:!0,state:{isDisabled:!0}});this.showChildView("owner",e)}}),Rs=g.CollectionView.extend({childViewEvents:{"change:visible":"filter"},className:"table-list patient__list",tagName:"table",childView:e=>"flows"===e.type?Is:Fs,emptyView:js,viewComparator:({model:e},{model:t})=>(0,Ie.XQ)("desc",e.get("updated_at"),t.get("updated_at")),viewFilter:({model:e})=>"patient-events"===e.type||e.isDone()}),Ls=g.View.extend({className:"flex-region patient__content",regions:{content:{el:"[data-content-region]",regionClass:w.Z,replaceElement:!0}},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div>\n      <button class="patient__tab js-dashboard">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"archive"))&&r(l,"archiveViews"))&&r(l,"dashboardBtn"),t))+'</button>\n      <span class="patient__tab--selected">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"archive"))&&r(l,"archiveViews"))&&r(l,"archiveBtn"),t))+"</span>\n    </div>\n    <div data-content-region></div>\n  "},useData:!0}),triggers:{"click .js-dashboard":"click:dashboard"},onClickDashboard(){l().trigger("event-router","patient:dashboard",this.model.id)}}),qs=r.Z.extend({onBeforeStart({patient:e}){this.showView(new Ls({model:e})),this.getRegion("content").startPreloader()},beforeStart({patient:e}){const t={state:l().request("bootstrap","currentWorkspace").getStates().groupByDone().done.getFilterIds()};return[l().request("entities","fetch:actions:collection:byPatient",{patientId:e.id,filter:t}),l().request("entities","fetch:flows:collection:byPatient",{patientId:e.id,filter:t})]},onStart({patient:e},t,n){this.collection=new(o().Collection)([...t.models,...n.models]),this.showChildView("content",new Rs({collection:this.collection}))},onEditAction(e){e.trigger("editing",!0)}}),Bs=g.View.extend({className:"patient__context-trail",template:p().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-back patient__context-link">\n        '+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:30}}}))+r(e.lambda((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"patient"))&&c(l,"patientViews"))&&c(l,"contextBackBtn"),t))+"\n      </a>\n      "+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:29}}}))+"\n    "},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=h(n,"if").call(o,null!=t?h(t,"hasLatestList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:7,column:11}}}))?l:"")+d(typeof(s=null!=(s=h(n,"first_name")||(null!=t?h(t,"first_name"):t))?s:r)===c?s.call(o,{name:"first_name",hash:{},data:i,loc:{start:{line:7,column:11},end:{line:7,column:27}}}):s)+" "+d(typeof(s=null!=(s=h(n,"last_name")||(null!=t?h(t,"last_name"):t))?s:r)===c?s.call(o,{name:"last_name",hash:{},data:i,loc:{start:{line:7,column:28},end:{line:7,column:43}}}):s)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back"},modelEvents:{"change:first_name change:last_name":"render"},onClickBack(){l().request("history","go:latestList")},templateContext:()=>({hasLatestList:l().request("history","has:latestList")})}),Hs=g.View.extend({className:"patient__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="patient__layout">\n        <div data-context-trail-region></div>\n        <div data-content-region></div>\n    </div>\n    <div class="patient__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},sidebar:"[data-sidebar-region]",content:{el:"[data-content-region]",regionClass:w.Z,replaceElement:!0}},onRender(){this.showChildView("contextTrail",new Bs({model:this.model}))}}),Gs=Dl.extend({eventRoutes(){return{"patient:dashboard":(0,a.partial)(this.startCurrent,"dashboard"),"patient:archive":(0,a.partial)(this.startCurrent,"archive"),"patient:action":this.startPatientAction,"patient:action:new":this.startPatientAction}},childApps:{dashboard:Ds,archive:qs,action:El,patient:al},currentAppOptions(){return{region:this.getRegion("content"),patient:this.getOption("patient")}},onBeforeStart(){this.getRegion().startPreloader()},beforeStart:({patientId:e})=>l().request("entities","fetch:patients:model",e),onStart({currentRoute:e},t){this.patient=t,this.setView(new Hs({model:t})),this.showSidebar(),this.startRoute(e),this.showView()},startPatientAction(e,t){const n=this.getChildApp("action");this.listenToOnce(n,{start(e,t){this.editActionList(t)},fail(){this.startCurrent("dashboard")}}),this.startChildApp("action",{actionId:t,patientId:e})},startActionList(e){return e.isDone()?this.startCurrent("archive"):this.startCurrent("dashboard")},editActionList(e){const t=this.getCurrent()||this.startActionList(e);t.isRunning()?t.triggerMethod("edit:action",e):this.listenToOnce(t,"start",(()=>{t.triggerMethod("edit:action",e)}))},showSidebar(){this.startChildApp("patient",{region:this.getRegion("sidebar"),patient:this.patient})}});var Ws=n(7948);const Zs=new(o().Collection)(u.cB),$s=o().Model.extend({defaults(){return{actionsSortId:"sortCreatedDesc",flowsSortId:"sortCreatedDesc",actionsDateFilters:{dateType:"created_at",selectedDate:null,selectedMonth:null,selectedWeek:null,relativeDate:null},flowsDateFilters:{dateType:"created_at",selectedDate:null,selectedMonth:null,selectedWeek:null,relativeDate:null},clinicianId:this.currentClinician.id,teamId:this.currentClinician.getTeam().id,noOwner:!1,lastSelectedIndex:null,actionsSelected:{},flowsSelected:{},searchQuery:"",listType:"actions"}},getFiltersState(){return{customFilters:this.get("customFilters"),states:this.get("states"),flowStates:this.get("flowStates"),listType:this.get("listType"),isDoneOnly:"done-last-thirty-days"===this.id}},preinitialize(){this.currentClinician=l().request("bootstrap","currentUser"),this.currentWorkspace=l().request("bootstrap","currentWorkspace")},initialize(){this.on("change",this.onChange)},getStoreKey(e){return`${e}_${this.currentClinician.id}_${this.currentWorkspace.id}-v6`},getStore(e){return ri().get(this.getStoreKey(e))},onChange(){ri().set(this.getStoreKey(this.id),(0,a.omit)(this.attributes,"lastSelectedIndex","searchQuery"))},setSearchQuery(e=""){return this.set({searchQuery:e.length>2?e:"",lastSelectedIndex:null})},getType(){return this.get("listType")},setType(e){return this.set({listType:e,lastSelectedIndex:null})},isFlowType(){return"flows"===this.getType()},getSort(){return this.get(`${this.getType()}SortId`)},setSort(e){this.set(`${this.getType()}SortId`,e)},setDateFilters(e){return this.set(`${this.getType()}DateFilters`,(0,a.clone)(e))},getDateFilters(){return(0,a.clone)(this.get(`${this.getType()}DateFilters`))},formatDateRange(e,t,n){const a="due_date"===e?"YYYY-MM-DD":"";return`${d()(t).startOf(n).format(a)},${d()(t).endOf(n).format(a)}`},getDateRange({dateType:e,selectedDate:t,selectedMonth:n,selectedWeek:a,relativeDate:i}){if(t)return this.formatDateRange(e,t,"day");if(n)return this.formatDateRange(e,n,"month");if(a)return this.formatDateRange(e,a,"week");i=i||"thismonth";const{prev:l,unit:s}=Zs.get(i).pick("prev","unit"),o=d()().subtract(l,s);return this.formatDateRange(e,o,s)},getStaticDateFilter(){return{"new-past-day":{created_at:d()().subtract(24,"hours").format()},"updated-past-three-days":{updated_at:d()().startOf("day").subtract(3,"days").format()},"done-last-thirty-days":{updated_at:d()().startOf("day").subtract(30,"days").format()}}[this.id]},getEntityDateFilter(){const e=this.getStaticDateFilter();if(e)return e;const t=this.getDateFilters();return"alltime"===t.relativeDate?{}:{[t.dateType]:this.getDateRange(t)}},getEntityStatesFilter(){const e=this.get("states").join()||Ws.Z;return this.isFlowType()?{state:e}:{state:e,"flow.state":this.get("flowStates").join()||Ws.Z}},isOwnerTeam(){const e=this.get("clinicianId");return"shared-by"===this.id||!e},getOwner(){const e=this.get("clinicianId");return this.isOwnerTeam()?l().request("entities","teams:model",this.get("teamId")):l().request("entities","clinicians:model",e)},getEntityOwnerFilter(){const e=this.get("clinicianId");if(this.isOwnerTeam()){const e=this.get("teamId"),t=this.get("noOwner"),n=this.currentClinician.can("app:worklist:clinician_filter");return t||!n?{team:e,clinician:Ws.Z}:{team:e}}return{clinician:e}},getEntityCustomFilter(){const e=this.get("customFilters");return(0,a.reduce)(e,((e,t,n)=>(null!==t&&(e[`@${n}`]=t),e)),{})},getEntityFilter(){const e={};return(0,a.extend)(e,this.getEntityDateFilter()),(0,a.extend)(e,this.getEntityStatesFilter()),(0,a.extend)(e,this.getEntityOwnerFilter()),(0,a.extend)(e,this.getEntityCustomFilter()),e}});(0,a.extend)($s.prototype,Vl);const zs=$s,Ys=o().Model.extend({preinitialize(){const e=l().request("bootstrap","currentWorkspace").getStates(),{done:t,notDone:n}=e.groupByDone();this.states={done:t,notDone:n,all:e}},defaults(){const e=this.get("isDoneOnly"),t=this.states.done.map("id"),n=this.states.notDone.map("id");return{customFilters:{},states:e?t:n,flowStates:n}},initialize(){this.initStates(),this.setFiltersCount=(0,a.debounce)(this.setFiltersCount,30),this.on("change:customFilters change:states change:flowStates change:listType",this.setFiltersCount),this.setFiltersCount()},isFlowType(){return"flows"===this.get("listType")},initStates(){const e=this.getAvailableStates().map("id");this.set({states:(0,a.intersection)(this.get("states"),e),flowStates:(0,a.intersection)(this.get("flowStates"),e)})},getFiltersState(){return{filtersCount:this.get("filtersCount"),customFilters:this.get("customFilters"),states:this.get("states"),flowStates:this.get("flowStates")}},_isSameIds:(e,t)=>(0,a.isEqual)((0,a.sortBy)(e),(0,a.sortBy)(t)),setFiltersCount(){const{states:e,flowStates:t}=this.defaults(),n=(0,a.size)((0,a.omit)(this.get("customFilters"),a.isNull)),i=this._isSameIds(this.get("states"),e)?0:1;if(this.isFlowType())return this.set("filtersCount",n+i);const l=this._isSameIds(this.get("flowStates"),t)?0:1;return this.set("filtersCount",n+i+l)},getAvailableStates(){return this.get("isDoneOnly")?this.states.done:this.states.all},setDefaultFilterStates(){return this.set(this.defaults())},selectStatesFilter(e,t,n="states"){const i=(0,a.clone)(this.get(`${n}`));return t?this.set(n,[...i,e]):this.set(n,(0,a.without)(i,e))},selectFlowStatesFilter(e,t){return this.selectStatesFilter(e,t,"flowStates")},getFilter(e){return this.get("customFilters")[e]},setFilter(e,t){const n=(0,a.clone)(this.get("customFilters"));return n[e]=t,this.set("customFilters",n)}}),Us=o().Model.extend({initialize({collection:e}){const t=e.at(0);this.initBulkState(e,t),this.initBulkOwner(e,t)},initBulkState(e,t){const n=t.getState().id,a=e.some((e=>e.getState().id!==n));this.set({stateMulti:a,stateId:a?null:n})},initBulkOwner(e,t){const n=t.getOwner(),a=e.some((e=>e.getOwner().id!==n.id));this.set({ownerMulti:a,owner:a?null:n})},setState(e){return this.set({stateId:e.id,stateMulti:!1,stateChanged:!0})},setOwner(e){return this.set({owner:e,ownerMulti:!1,ownerChanged:!0})},someComplete(){return this.get("collection").some((e=>e.isDone()))},getData(){const{stateChanged:e,stateId:t,ownerChanged:n,owner:i}=this.attributes,l={};return e&&(l._state=t),n&&(l._owner=(0,a.pick)(i,"id","type")),l}}),Qs=r.Z.extend({StateModel:Us,onStart(){const e=new Hl({collection:this.getState("collection")}),t=new Zl({model:this.getState(),collection:this.getState("collection")});this.modal=l().request("modal","show:sidebar",{headerView:e,bodyView:t,onSubmit:this.onSubmit.bind(this)}),this.listenTo(e,{delete:(0,a.partial)(this.triggerMethod,"delete")}),this.listenTo(this.modal,{destroy:this.stop})},onSubmit(){this.modal.disableSubmit(),!!this.getState("applyOwner")&&this.triggerMethod("applyOwner",this.getState("owner")),this.triggerMethod("save",this.getState().getData())},onStop(){this.modal.destroy()}});var Ks=n(1962),Xs=n(2908);const Js=new(o().Collection)(u.cB),eo=g.View.extend({tagName:"button",className:"button-filter button__group flex-grow",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.components.dateFilterComponent.dateTypes",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:84}}}),{name:"formatMessage",hash:{type:null!=t?o(t,"id"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:95}}}))},useData:!0}),onRender(){this.$el.toggleClass("button--blue",this.getOption("selected")===this.model.id)},triggers:{click:"click"}}),to=g.CollectionView.extend({modelEvents:{"change:dateType":"render"},className:"flex",childView:eo,childViewTriggers:{click:"click"},onClick({model:e}){this.model.set("dateType",e.id)},childViewOptions(){return{selected:this.model.get("dateType")}}}),no=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"selectedDate"):t,"MM/DD/YYYY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:44}}}))+o((r(n,"far")||t&&r(t,"far")||s).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:44},end:{line:1,column:64}}}))},useData:!0}),ao=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"selectedMonth"):t,"MMM YYYY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:43}}}))+o((r(n,"far")||t&&r(t,"far")||s).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:43},end:{line:1,column:63}}}))},useData:!0}),io=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"selectedWeek"):t,"MM/DD/YYYY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:44}}}))+" - "+o((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||s).call(l,null!=t?r(t,"selectedEndWeek"):t,"MM/DD/YYYY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:47},end:{line:1,column:94}}}))+o((r(n,"far")||t&&r(t,"far")||s).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:94},end:{line:1,column:114}}}))},useData:!0}),lo=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.shared.components.dateFilterComponent.relativeDate",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:87}}}),{name:"formatMessage",hash:{relativeTo:null!=t?r(t,"relativeDate"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:114}}}))+o((r(n,"far")||t&&r(t,"far")||s).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:114},end:{line:1,column:134}}}))},useData:!0}),so=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s(e.lambda((l=(l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"components"))&&o(l,"dateFilterComponent"))&&o(l,"dateFilterViews"))&&o(l,"defaultTemplate"))&&o(l,"thisMonth"),t))+s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:100},end:{line:1,column:120}}}))},useData:!0}),oo=g.View.extend({template:p().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button class="button-secondary--compact u-margin--r-8 js-prev">'+r((c(n,"far")||t&&c(t,"far")||o).call(s,"angle-left",{name:"far",hash:{},data:i,loc:{start:{line:3,column:70},end:{line:3,column:90}}}))+"</button>"+r("function"==typeof(l=null!=(l=c(n,"remove_whitespace")||(null!=t?c(t,"remove_whitespace"):t))?l:o)?l.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:3,column:99},end:{line:3,column:124}}}):l)},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button class="button-secondary--compact u-margin--l-8 js-next">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"angle-right",{name:"far",hash:{},data:i,loc:{start:{line:11,column:70},end:{line:11,column:91}}}))+"</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"hidePrevNextButtons"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:4,column:15}}}))?l:"")+'    <button class="button-filter js-date">\n      '+c((h(n,"far")||t&&h(t,"far")||r).call(o,"calendar-days",{name:"far",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:29}}}))+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:29},end:{line:6,column:54}}}):s)+c((h(n,"formatMessage")||t&&h(t,"formatMessage")||r).call(o,(h(n,"intlGet")||t&&h(t,"intlGet")||r).call(o,"patients.shared.components.dateFilterComponent.dateTypes",{name:"intlGet",hash:{},data:i,loc:{start:{line:7,column:22},end:{line:7,column:90}}}),{name:"formatMessage",hash:{type:null!=t?h(t,"dateType"):t},data:i,loc:{start:{line:7,column:6},end:{line:7,column:107}}}))+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:107},end:{line:7,column:132}}}):s)+":\n      <span data-date-picker-label-region></span>\n    </button>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:13},end:{line:9,column:38}}}):s)+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"hidePrevNextButtons"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:10,column:4},end:{line:12,column:15}}}))?l:"")+"  "},useData:!0}),regions:{datepicker:{el:"[data-date-picker-label-region]",replaceElement:!0}},ui:{next:".js-next",prev:".js-prev",date:".js-date"},triggers:{"click @ui.prev":"click:prev","click @ui.next":"click:next","click @ui.date":"click:date"},getLabelTemplate(){return this.model.get("selectedDate")?no:this.model.get("selectedMonth")?ao:this.model.get("selectedWeek")?io:this.model.get("relativeDate")?lo:so},onRender(){this.showChildView("datepicker",{tagName:"span",model:this.model,template:this.getLabelTemplate(),templateContext(){return this.model.get("selectedWeek")?{selectedEndWeek:this.model.dayjs("selectedWeek").endOf("week")}:{}}}),"alltime"!==this.model.get("relativeDate")&&this.getTooltips()},templateContext(){return{hidePrevNextButtons:"alltime"===this.model.get("relativeDate")}},getTooltips(){const e=this.getTooltipMessages();new T.Z({message:e.prevMessage,uiView:this,ui:this.ui.prev}),new T.Z({message:e.nextMessage,uiView:this,ui:this.ui.next})},getTooltipMessages(){if(this.model.get("selectedDate"))return this._getTooltipDayMessage(this.model.dayjs("selectedDate"));if(this.model.get("selectedMonth"))return this._getTooltipMonthMessage(this.model.dayjs("selectedMonth"));if(this.model.get("selectedWeek"))return this._getTooltipWeekMessage(this.model.dayjs("selectedWeek"));const e=this.model.get("relativeDate"),{prev:t,unit:n}=Js.get(e||"thismonth").pick("prev","unit");return this[{day:"_getTooltipDayMessage",month:"_getTooltipMonthMessage",week:"_getTooltipWeekMessage"}[n]].call(this,d()().subtract(t,n).startOf(n))},_getTooltipDayMessage:e=>({prevMessage:d()(e).subtract(1,"day").format("MM/DD/YYYY"),nextMessage:d()(e).add(1,"day").format("MM/DD/YYYY")}),_getTooltipMonthMessage:e=>({prevMessage:d()(e).subtract(1,"month").format("MMM YYYY"),nextMessage:d()(e).add(1,"month").format("MMM YYYY")}),_getTooltipWeekMessage(e){const t=d()(e).subtract(1,"week"),n=d()(e).add(1,"week");return{prevMessage:`${t.format("MM/DD/YYYY")} - ${t.endOf("week").format("MM/DD/YYYY")}`,nextMessage:`${n.format("MM/DD/YYYY")} - ${n.endOf("week").format("MM/DD/YYYY")}`}}}),ro=g.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.lambda,r=e.escapeExpression,c=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,h="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="datepicker__button js-today">'+r(o((l=(l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"shared"))&&u(l,"components"))&&u(l,"dateFilterComponent"))&&u(l,"dateFilterViews"))&&u(l,"actionView"))&&u(l,"today"),t))+"</button>"+r(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:d)===h?s.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:148},end:{line:2,column:173}}}):s)+'<button class="datepicker__button js-current-week">'+r(o((l=(l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"shared"))&&u(l,"components"))&&u(l,"dateFilterComponent"))&&u(l,"dateFilterViews"))&&u(l,"actionView"))&&u(l,"week"),t))+"</button>"+r(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:d)===h?s.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:3,column:154},end:{line:3,column:179}}}):s)+'<button class="datepicker__button js-current-month">'+r(o((l=(l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"shared"))&&u(l,"components"))&&u(l,"dateFilterComponent"))&&u(l,"dateFilterViews"))&&u(l,"actionView"))&&u(l,"month"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-current-week":"click:currentWeek","click .js-today":"click:today","click .js-current-month":"click:currentMonth"}}),co=g.View.extend({className:"date-filter",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="date-filter__label">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"components"))&&s(l,"dateFilterComponent"))&&s(l,"dateFilterViews"))&&s(l,"layoutView"))&&s(l,"dateLabel"),t))+'</div>\n    <div class="date-filter__toggle" data-date-type-region></div>\n    <div data-component-region></div>\n  '},useData:!0}),regions:{dateType:"[data-date-type-region]",component:"[data-component-region]"}}),ho=Xs.Z.extend({className:"date-filter__ranges",itemTemplate:p().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"check",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:121},end:{line:1,column:136}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(s,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(s,"patients.shared.components.dateFilterComponent.relativeDate",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:87}}}),{name:"formatMessage",hash:{relativeTo:null!=t?r(t,"id"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:103}}}))+(null!=(l=r(n,"if").call(s,null!=t?r(t,"isSelected"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:103},end:{line:1,column:143}}}))?l:"")},useData:!0}),itemTemplateContext(){return{isSelected:this.model===this.state.get("selected")}},viewEvents:{"picklist:item:select":"onItemSelect"},onItemSelect({model:e}){this.triggerMethod("select",e.id)}}),uo=new(o().Collection)(u.cB),mo={day:"setDate",week:"setWeek",month:"setMonth"},po=o().Model.extend({setRelativeDate(e,t){this.set({relativeDate:e,selectedDate:null,selectedWeek:null,selectedMonth:null,dateType:t})},setMonth(e,t){this.set({relativeDate:null,selectedDate:null,selectedWeek:null,selectedMonth:e,dateType:t||this.get("dateType")})},setWeek(e,t){this.set({relativeDate:null,selectedDate:null,selectedWeek:e,selectedMonth:null,dateType:t||this.get("dateType")})},setDate(e,t){this.set({relativeDate:null,selectedDate:e,selectedWeek:null,selectedMonth:null,dateType:t||this.get("dateType")})},incrementBackward(){if(this.dayjs("selectedDate"))return void this.setDate(this.dayjs("selectedDate").subtract(1,"day"));if(this.dayjs("selectedMonth"))return void this.setMonth(this.dayjs("selectedMonth").subtract(1,"month").startOf("month"));if(this.dayjs("selectedWeek"))return void this.setWeek(this.dayjs("selectedWeek").subtract(1,"week").startOf("week"));const e=this.get("relativeDate")||"thismonth",{prev:t,unit:n}=uo.get(e).pick("prev","unit");this[mo[n]].call(this,d()().subtract(t+1,n).startOf(n))},incrementForward(){if(this.dayjs("selectedDate"))return void this.setDate(this.dayjs("selectedDate").add(1,"day"));if(this.dayjs("selectedMonth"))return void this.setMonth(this.dayjs("selectedMonth").add(1,"month").startOf("month"));if(this.dayjs("selectedWeek"))return void this.setWeek(this.dayjs("selectedWeek").add(1,"week").startOf("week"));const e=this.get("relativeDate")||"thismonth",{prev:t,unit:n}=uo.get(e).pick("prev","unit");this[mo[n]].call(this,d()().add(1-t,n).startOf(n))}}),go=new(o().Collection)([...u.cB,{id:"calendar"},{id:"alltime"}]),fo=z.Z.extend({stateEvents:{change:"show","change:selectedDate":"onChangeStateSelectedDate","change:selectedMonth":"onChangeStateSelectedMonth"},getActionsView(){const e=new ro;return this.listenTo(e,{"click:today":this.onClickToday,"click:currentWeek":this.onClickCurrentWeek,"click:currentMonth":this.onClickCurrentMonth}),e},onClickToday(){this.triggerMethod("select:today")},onClickCurrentWeek(){this.triggerMethod("select:currentWeek")},onClickCurrentMonth(){this.triggerMethod("select:currentMonth")},onSelectToday:a.noop,regionOptions:a.noop}),wo=di.Z.extend({dateTypes:["create_at","updated_at","due_date"],StateModel:po,stateEvents:{change:"show"},ViewClass:oo,viewOptions(){return{model:this.getState()}},viewEvents:{"click:date"(){this.showPop()},"click:prev"(){this.getState().incrementBackward()},"click:next"(){this.getState().incrementForward()}},initialize(){this.dateTypes=new(o().Collection)((0,Ks.Z)(this.getOption("dateTypes"),"id")),this.dateTypeState=new(o().Model)({dateType:this.getState("dateType")})},showPop(){const e=this.getView().getBounds(this.getView().$el);this.popView=new co,this.popView.listenTo(this,"destroy",this.popView.destroy),this.listenTo(this.popView,"destroy",(()=>{this.setState("dateType",this.dateTypeState.get("dateType"))})),this.showRanges(),this.showDateTypes(),l().request("app","show:pop",this.popView,{popWidth:256,...e})},showDateTypes(){this.popView.showChildView("dateType",new to({collection:this.dateTypes,model:this.dateTypeState}))},showRanges(){const e=this.getState(),{selectedDate:t,selectedMonth:n,selectedWeek:a,relativeDate:i}=e.pick("selectedDate","selectedMonth","selectedWeek","relativeDate"),l=go.get(i||!t&&!n&&!a&&"thismonth"),s=new ho({lists:[{collection:go}],state:{selected:l}});this.listenTo(s,"select",(t=>{"calendar"!==t?(e.setRelativeDate(t,this.dateTypeState.get("dateType")),this.popView.destroy()):this.showDatePicker()})),this.popView.showChildView("component",s)},showDatePicker(){const e=this.getState(),t=new fo({state:e.pick("selectedDate","selectedMonth"),canSelectMonth:!0});this.listenTo(t,{"select:currentWeek"(){e.setRelativeDate("thisweek",this.dateTypeState.get("dateType")),this.popView.destroy()},"select:today"(){e.setRelativeDate("today",this.dateTypeState.get("dateType")),this.popView.destroy()},"select:currentMonth"(){e.setRelativeDate("thismonth",this.dateTypeState.get("dateType")),this.popView.destroy()},"change:selectedDate"(t){e.setDate(t,this.dateTypeState.get("dateType")),this.popView.destroy()},"change:selectedMonth"(t){e.setMonth(t,this.dateTypeState.get("dateType")),this.popView.destroy()}}),t.showIn(this.popView.getRegion("component"))}}),vo=p().template({1:function(e,t,n,a,i){return"is-hidden"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <span class="list-search__search-icon">'+c((d(n,"far")||t&&d(t,"far")||r).call(o,"magnifying-glass",{name:"far",hash:{},data:i,loc:{start:{line:2,column:41},end:{line:2,column:67}}}))+'</span>\n  <input\n    class="list-search__input input-primary--small js-input w-100"\n    type="text"\n    placeholder="'+c(e.lambda((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"shared"))&&d(l,"components"))&&d(l,"listSearch"))&&d(l,"listSearchViews"))&&d(l,"placeholder"),t))+'"\n    value="'+c("function"==typeof(s=null!=(s=d(n,"query")||(null!=t?d(t,"query"):t))?s:r)?s.call(o,{name:"query",hash:{},data:i,loc:{start:{line:7,column:11},end:{line:7,column:20}}}):s)+'"\n  />\n  <span class="list-search__clear-icon js-clear '+(null!=(l=d(n,"unless").call(o,null!=t?d(t,"query"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:9,column:48},end:{line:9,column:85}}}))?l:"")+'">'+c((d(n,"fas")||t&&d(t,"fas")||r).call(o,"circle-xmark",{name:"fas",hash:{},data:i,loc:{start:{line:9,column:87},end:{line:9,column:109}}}))+"</span>\n"},useData:!0}),bo=g.View.extend({behaviors:{InputWatcherBehavior:O.Z},className(){return this.getOption("state").query.length>2?"list-search__container is-applied":"list-search__container"},template:vo,templateContext(){return{query:this.getOption("state").query}},ui:{input:".js-input",clear:".js-clear"},triggers:{"click @ui.clear":"clear"},onWatchChange(e){this.ui.clear.toggleClass("is-hidden",!e.length),this.$el.toggleClass("is-applied",e.length>2)},onClear(){this.ui.input.val(""),this.ui.clear.addClass("is-hidden"),this.$el.removeClass("is-applied")}}),yo=o().Model.extend({defaults:{query:""}}),_o=di.Z.extend({StateModel:yo,ViewClass:bo,viewEvents:{"watch:change":"onViewWatchChange",clear:"onViewClear"},onViewClear(){this.setState("query","")},onViewWatchChange(e){this.setState("query",e)}}),xo=p().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"      "+e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.listViews.countView.flowsCount",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:22},end:{line:4,column:80}}}),{name:"formatMessage",hash:{itemCount:null!=t?o(t,"count"):t},data:i,loc:{start:{line:4,column:6},end:{line:4,column:98}}}))+"\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"      "+e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.shared.listViews.countView.actionsCount",{name:"intlGet",hash:{},data:i,loc:{start:{line:6,column:22},end:{line:6,column:82}}}),{name:"formatMessage",hash:{itemCount:null!=t?o(t,"count"):t},data:i,loc:{start:{line:6,column:6},end:{line:6,column:100}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  <strong>\n"+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"isFlowList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:3,column:4},end:{line:7,column:11}}}))?l:"")+"  </strong>\n"},useData:!0}),ko=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  <div>"+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||o).call(s,(c(n,"intlGet")||t&&c(t,"intlGet")||o).call(s,"patients.shared.listViews.countView.maximumListCount",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:23},end:{line:2,column:87}}}),{name:"formatMessage",hash:{isFlowList:null!=t?c(t,"isFlowList"):t,totalInDb:null!=t?c(t,"totalInDb"):t,maximumCount:null!=t?c(t,"maximumCount"):t},data:i,loc:{start:{line:2,column:7},end:{line:2,column:157}}}))+"</div>\n  <div>"+r(e.lambda((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"shared"))&&c(l,"listViews"))&&c(l,"countView"))&&c(l,"narrowFilters"),t))+"</div>\n"},useData:!0}),Co=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  <div>\n    "+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||o).call(s,(c(n,"intlGet")||t&&c(t,"intlGet")||o).call(s,"patients.shared.listViews.countView.maximumListCountNarrowed",{name:"intlGet",hash:{},data:i,loc:{start:{line:3,column:20},end:{line:3,column:92}}}),{name:"formatMessage",hash:{isFlowList:null!=t?c(t,"isFlowList"):t,maximumCount:null!=t?c(t,"maximumCount"):t,itemCount:null!=t?c(t,"count"):t},data:i,loc:{start:{line:3,column:4},end:{line:3,column:158}}}))+"\n  </div>\n  <div>"+r(e.lambda((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"shared"))&&c(l,"listViews"))&&c(l,"countView"))&&c(l,"narrowFilters"),t))+"</div>\n"},useData:!0}),So=g.View.extend({initialize(){const e=this.getOption("isFlowList")?"flows":"actions";this.totalInDb=(0,a.get)(this.collection.getMeta(e),"total")},getTemplate(){const e=this.getOption("filteredCollection");if(!this.collection||!e.length)return p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return""},useData:!0});const t=this.collection.length<this.totalInDb,n=t&&e.length<this.collection.length;return t?n?Co:ko:xo},templateContext(){const e=this.getOption("filteredCollection");return{maximumCount:this.collection.length,count:e.length,isFlowList:!!this.getOption("isFlowList"),totalInDb:this.totalInDb}}});var Oo=n(9386),To=n(2889);const Do=e=>{const t=(0,a.map)((0,To.Z)(e),RegExp.escape);return(0,a.map)(t,(function(e){return new RegExp(`\\b${e}`,"i")}))};var Vo=n(3969),Mo=n.n(Vo);const Po=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.worklist.actionViews.actionListTooltips",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:76}}}),{name:"formatMessage",hash:{team:null!=t?o(t,"owner"):t,title:null!=t?o(t,"worklistId"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:106}}}))},useData:!0}),Eo=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"actionViews"))&&s(l,"actionEmptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),jo=g.View.extend({className:"table-list__item work-list__item",tagName:"tr",template:Mo(),regions:{check:"[data-check-region]",state:"[data-state-region]",owner:"[data-owner-region]",dueDate:"[data-due-date-region]",dueTime:"[data-due-time-region]",form:"[data-form-region]",details:"[data-details-region]"},templateContext(){const e=this.model.getState();return{isOverdue:this.model.isOverdue(),state:e.get("name"),stateOptions:e.get("options"),flowName:this.flow&&this.flow.get("name"),patient:this.model.getPatient().attributes,owner:this.model.getOwner().get("name"),icon:this.model.hasOutreach()?"share-from-square":"file-lines",hasAttachments:this.model.hasAttachments()}},initialize({state:e}){this.state=e,this.flow=this.model.getFlow(),this.listenTo(e,{"select:multiple":this.showCheck,"select:none":this.showCheck})},modelEvents:{change:"render"},triggers:{click:"click","click .js-patient-sidebar-button":"click:patientSidebarButton","click .js-patient":"click:patient","click .js-no-click":"prevent-row-click"},onClick(){this.flow?l().trigger("event-router","flow:action",this.flow.id,this.model.id):l().trigger("event-router","patient:action",this.model.get("_patient"),this.model.id)},onClickPatient(){l().trigger("event-router","patient:dashboard",this.model.get("_patient"))},onRender(){this.showForm(),this.showDetailsTooltip();const e=this.canEdit;this.canEdit=!this.model.isFlowDone()&&this.model.canEdit(),this.showCheck(),this.showState(),this.showOwner(),this.showDueDate(),this.showDueTime(),e!==this.canEdit&&(this.canEdit||this.toggleSelected(!1),this.triggerMethod("change:canEdit"))},toggleSelected(e){this.$el.toggleClass("is-selected",e)},showCheck(){if(!this.canEdit)return;const e=this.state.isSelected(this.model);this.toggleSelected(e);const t=new V({state:{isSelected:e}});this.listenTo(t,{select(e){this.triggerMethod("select",this,!!e.shiftKey)},"change:isSelected":this.toggleSelected}),this.showChildView("check",t)},showState(){if(this.canEdit)this.stateComponent=new I({stateId:this.model.get("_state"),isCompact:!0}),this.listenTo(this.stateComponent,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",this.stateComponent);else{const e=new me({model:this.model,isCompact:!0});this.showChildView("state",e)}},showOwner(){if(!this.canEdit){const e=new pe({model:this.model,isCompact:!0});return void this.showChildView("owner",e)}const e=this.model.isDone();this.ownerComponent=new $({owner:this.model.getOwner(),isCompact:!0,state:{isDisabled:e}}),this.listenTo(this.ownerComponent,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",this.ownerComponent)},showDueDate(){if(!this.canEdit){const e=new ge({model:this.model});return void this.showChildView("dueDate",e)}const e=this.model.isDone();this.dueDateComponent=new Q({date:this.model.get("due_date"),isCompact:!0,state:{isDisabled:e},isOverdue:this.model.isOverdue()}),this.listenTo(this.dueDateComponent,"change:due",(e=>{this.model.saveDueDate(e)})),this.showChildView("dueDate",this.dueDateComponent)},showDueTime(){if(!this.canEdit){const e=new fe({model:this.model});return void this.showChildView("dueTime",e)}const e=this.model.isDone()||!this.model.get("due_date");this.dueTimeComponent=new ie({time:this.model.get("due_time"),isCompact:!0,state:{isDisabled:e},isOverdue:this.model.isOverdue()}),this.listenTo(this.dueTimeComponent,"change:time",(e=>{this.model.saveDueTime(e)})),this.showChildView("dueTime",this.dueTimeComponent)},showForm(){this.model.getForm()&&this.showChildView("form",new he({model:this.model}))},showDetailsTooltip(){this.model.get("details")&&this.showChildView("details",new ue({model:this.model}))}});var Ao=n(6844),No=n.n(Ao);const Fo=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.worklist.flowViews.flowListTooltips",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:72}}}),{name:"formatMessage",hash:{team:null!=t?o(t,"owner"):t,title:null!=t?o(t,"worklistId"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:102}}}))},useData:!0}),Io=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"flowViews"))&&s(l,"flowEmptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Ro=g.View.extend({className:"table-list__item work-list__item",tagName:"tr",template:No(),regions:{check:"[data-check-region]",state:"[data-state-region]",owner:"[data-owner-region]"},templateContext(){return{patient:this.model.getPatient().attributes,owner:this.model.getOwner().get("name"),state:this.model.getState().get("name")}},modelEvents:{change:"render"},triggers:{click:"click","click .js-patient-sidebar-button":"click:patientSidebarButton","click .js-patient":"click:patient","click .js-no-click":"prevent-row-click"},initialize({state:e}){this.state=e,this.listenTo(e,{"select:multiple":this.showCheck,"select:none":this.showCheck})},onClick(){l().trigger("event-router","flow",this.model.id)},onClickPatient(){l().trigger("event-router","patient:dashboard",this.model.get("_patient"))},onRender(){const e=this.canEdit;this.canEdit=this.model.canEdit(),this.showCheck(),this.showState(),this.showOwner(),e!==this.canEdit&&(this.canEdit||this.toggleSelected(!1),this.triggerMethod("change:canEdit"))},toggleSelected(e){this.$el.toggleClass("is-selected",e)},showCheck(){if(!this.canEdit)return;const e=this.state.isSelected(this.model);this.toggleSelected(e);const t=new V({state:{isSelected:e}});this.listenTo(t,{select(e){this.triggerMethod("select",this,!!e.shiftKey)},"change:isSelected":this.toggleSelected}),this.showChildView("check",t)},showState(){if(!this.model.isDone()||!this.canEdit){const e=new me({model:this.model,isCompact:!0});return void this.showChildView("state",e)}const e=new ct({stateId:this.model.get("_state"),isCompact:!0});this.listenTo(e,"change:state",(e=>{this.model.saveState(e)})),this.showChildView("state",e)},showOwner(){if(!this.canEdit){const e=new pe({model:this.model,isCompact:!0});return void this.showChildView("owner",e)}const e=this.model.isDone();this.ownerComponent=new $({owner:this.model.getOwner(),isCompact:!0,state:{isDisabled:e}}),this.listenTo(this.ownerComponent,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",this.ownerComponent)}});var Lo=n(9794),qo=n.n(Lo),Bo=n(6360),Ho=n.n(Bo);const Go=h.ZP.patients.worklist.worklistViews,Wo=g.View.extend({className:"flex-region",template:qo(),regions:{dateFilter:"[data-date-filter-region]",filters:"[data-filters-region]",toggle:"[data-toggle-region]",sort:"[data-sort-region]",table:"[data-table-region]",list:{el:"[data-list-region]",regionClass:w.Z},selectAll:"[data-select-all-region]",title:{el:"[data-title-region]",replaceElement:!0},search:"[data-search-region]",count:"[data-count-region]"},childViewEvents:{"update:listDom":"fixWidth"},triggers:{"click @ui.select":"click:select"},ui:{listHeader:".js-list-header",list:".js-list",select:".js-select"},initialize(){const e=l().channel("user-activity");this.listenTo(e,"window:resize",this.fixWidth)},fixWidth(){if(!this.isRendered())return;const e=this.ui.listHeader.width(),t=this.ui.list.contents().width(),n=parseInt(this.ui.list.css("paddingRight"),10),a=e-t;this.ui.list.css({paddingRight:n-a+"px"})}}),Zo=g.View.extend({tagName:"button",className:"button--checkbox",attributes(){if(this.getOption("isDisabled"))return{disabled:"disabled"}},triggers:{click:"click"},getTemplate(){return this.getOption("isSelectAll")?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-check",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0}):this.getOption("isSelectNone")||this.getOption("isDisabled")?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))},useData:!0}):p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-minus",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0})}}),$o=g.View.extend({template:p().template({1:function(e,t,n,a,i){return"button--blue"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="'+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"isFlowList"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:19},end:{line:2,column:64}}}))?l:"")+' button-filter button__group js-toggle-actions">'+c((h(n,"far")||t&&h(t,"far")||r).call(o,"file-lines",{name:"far",hash:{},data:i,loc:{start:{line:2,column:112},end:{line:2,column:132}}}))+"<span>"+c(d((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"worklist"))&&h(l,"worklistViews"))&&h(l,"typeToggleView"))&&h(l,"actionsButton"),t))+"</span></button>"+c("function"==typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:226},end:{line:2,column:251}}}):s)+'<button class="'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"isFlowList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:19},end:{line:3,column:56}}}))?l:"")+' button-filter button__group js-toggle-flows">'+c((h(n,"fas")||t&&h(t,"fas")||r).call(o,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:102},end:{line:3,column:118}}}))+"<span>"+c(d((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"worklist"))&&h(l,"worklistViews"))&&h(l,"typeToggleView"))&&h(l,"flowsButton"),t))+"</span></button>\n  "},useData:!0}),templateContext(){return{isFlowList:this.getOption("isFlowList")}},triggers:{"click .js-toggle-actions":"click:toggleActions","click .js-toggle-flows":"click:toggleFlows"},ui:{buttons:"button"},onClickToggleActions(){this.triggerMethod("toggle:listType","actions")},onClickToggleFlows(){this.triggerMethod("toggle:listType","flows")}}),zo=g.View.extend({className:"u-margin--l-24 u-margin--r-16",template:p().template({1:function(e,t,n,a,i){return"button--blue"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"xmark",{name:"far",hash:{},data:i,loc:{start:{line:3,column:90},end:{line:3,column:105}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button-filter-toggle '+(null!=(l=o(n,"if").call(s,null!=t?o(t,"noOwner"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:40},end:{line:2,column:74}}}))?l:"")+'">\n      '+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"worklist"))&&o(l,"worklistViews"))&&o(l,"noOwnerToggleView"))&&o(l,"noOwner"),t))+(null!=(l=o(n,"if").call(s,null!=t?o(t,"noOwner"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:75},end:{line:3,column:112}}}))?l:"")+"\n    </button>\n  "},useData:!0}),triggers:{click:"click"}}),Yo={"owned-by":["list"],"shared-by":["arrow-right-arrow-left"],"new-past-day":["angle-left","1"],"updated-past-three-days":["angle-left","3"],"done-last-thirty-days":["3","0"]},Uo=g.View.extend({className:"u-text--nowrap",getTemplate(){return this.getOption("owner")?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.worklist.worklistViews.listTitleLabelView.listTitles",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:89}}}),{name:"formatMessage",hash:{owner:null!=t?o(t,"owner"):t,title:null!=t?o(t,"worklistId"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:120}}}))},useData:!0}):p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.worklist.worklistViews.listTitleLabelView.listLabels",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:89}}}),{name:"formatMessage",hash:{title:null!=t?o(t,"worklistId"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:108}}}))},useData:!0})},templateContext(){return{owner:this.getOption("owner"),worklistId:(0,Oo.Z)(this.getOption("worklistId"))}}}),Qo=$.extend({align:"right",isTitleFilter:!0}),Ko=g.View.extend({regions:{label:"[data-label-region]",owner:"[data-owner-filter-region]",ownerToggle:"[data-owner-toggle-region]"},className:"flex list-page__title-filter",template:p().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},t,{name:"far",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:20}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <span class="list-page__title-icon">\n'+(null!=(l=o(n,"each").call(s,null!=t?o(t,"icons"):t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:6},end:{line:5,column:15}}}))?l:"")+'    </span>\n    <div data-label-region></div>\n    <div data-owner-filter-region></div>\n    <span class="list-page__header-icon js-title-info">'+e.escapeExpression((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(s,"circle-info",{name:"far",hash:{},data:i,loc:{start:{line:9,column:55},end:{line:9,column:76}}}))+"</span>\n    <div data-owner-toggle-region></div>\n  "},useData:!0}),ui:{tooltip:".js-title-info"},templateContext(){return{owner:this.owner.get("name"),worklistId:(0,Oo.Z)(this.model.id),icons:Yo[this.model.id]}},initialize(){const e=l().request("bootstrap","currentUser");this.canViewAssignedActions=e.can("app:worklist:clinician_filter"),this.shouldShowTeam="owned-by"!==this.model.id,this.shouldShowClinician="shared-by"!==this.model.id,this.shouldShowDroplist=this.shouldShowClinician&&this.canViewAssignedActions||this.shouldShowTeam,this.owner=this.model.getOwner()},onRender(){this.showLabel(),this.showOwnerDroplist(),this.showOwnerToggle();const e=this.model.isFlowType()?Fo:Po;new T.Z({message:(0,h.SM)(e,this.templateContext()),uiView:this,ui:this.ui.tooltip,orientation:"vertical"})},showLabel(){const e=new Uo({owner:this.shouldShowDroplist?null:this.owner.get("name"),worklistId:this.model.id});this.showChildView("label",e)},showOwnerDroplist(){if(!this.shouldShowDroplist)return;const e=Go.titleOwnerDroplist,t=new Qo({owner:this.owner,hasClinicians:this.shouldShowClinician&&this.canViewAssignedActions,hasTeams:this.shouldShowTeam,hasCurrentClinician:this.shouldShowClinician,headingText:this.shouldShowClinician?e.ownerFilterHeadingText:e.teamsFilterHeadingText,placeholderText:this.shouldShowClinician?e.ownerFilterPlaceholderText:e.teamsFilterPlaceholderText});this.listenTo(t,"change:owner",(e=>{this.triggerMethod("change:owner",e)})),this.showChildView("owner",t)},showOwnerToggle(){if(this.shouldShowClinician||!this.canViewAssignedActions)return;const e=new zo({model:this.model});this.listenTo(e,"click",(()=>{this.triggerMethod("toggle:noOwner")})),this.showChildView("ownerToggle",e)}}),Xo=g.View.extend({tagName:"button",className:"button--link-large",template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"("+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"filtersCount")||(null!=t?s(t,"filtersCount"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"filtersCount",hash:{},data:i,loc:{start:{line:1,column:133},end:{line:1,column:149}}}):l)+")"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(s,"sliders",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:17}}}))+"<span>"+o(e.lambda((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"worklist"))&&r(l,"worklistViews"))&&r(l,"allFiltersButtonView"))&&r(l,"allFiltersButton"),t))+"</span> "+(null!=(l=r(n,"if").call(s,null!=t?r(t,"filtersCount"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:112},end:{line:1,column:157}}}))?l:"")},useData:!0}),triggers:{click:"click"},modelEvents:{"change:filtersCount":"render"}}),Jo=g.View.extend({template:Ho(),tagName:"tr",templateContext(){return{isFlowList:this.getOption("isFlowList")}}}),er=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"worklistViews"))&&s(l,"emptyFindInListView"))&&s(l,"noResults"),t))+"</h2>\n    </td>\n  "},useData:!0})}),tr=g.CollectionView.extend({className:"table-list",tagName:"table",childView(){return this.isFlowList?Ro:jo},emptyView(){return this.collection.length&&this.state.get("searchQuery")?er:this.isFlowList?Io:Eo},childViewOptions(){return{state:this.state}},childViewTriggers:{render:"listItem:render","change:canEdit":"listItem:canEdit","click:patientSidebarButton":"click:patientSidebarButton",select:"select"},onListItemRender(e){e.searchString=e.$el.text()},onListItemCanEdit(){this.triggerMethod("change:canEdit")},initialize({state:e,editableCollection:t}){this.state=e,this.editableCollection=t,this.isFlowList=e.isFlowType(),this.onListItemCanEdit=(0,a.debounce)(this.onListItemCanEdit,60),this.listenTo(e,"change:searchQuery",this.searchList)},onAttach(){this.triggerMethod("update:listDom",this),this.searchList(null,this.state.get("searchQuery"))},onRenderChildren(){this.isAttached()&&(this.triggerMethod("update:listDom",this),this.triggerMethod("filtered",this.children.map("model")))},onSelect(e,t){this.state.selectRange(this.editableCollection,e.model,t)},searchList(e,t){if(!t)return void this.removeFilter();const n=Do(t);this.setFilter((function({searchString:e}){return(0,a.every)(n,(function(t){return t.test(e)}))}))}}),nr=M.Z.extend({align:"right",popWidth:248,picklistOptions:{headingText:Go.sortDroplist.headingText},viewOptions:{className:"button-filter",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||o).call(s,"arrow-down-arrow-up",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:29}}}))+r("function"==typeof(l=null!=(l=c(n,"text")||(null!=t?c(t,"text"):t))?l:o)?l.call(s,{name:"text",hash:{},data:i,loc:{start:{line:1,column:29},end:{line:1,column:37}}}):l)+r((c(n,"far")||t&&c(t,"far")||o).call(s,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:37},end:{line:1,column:57}}}))},useData:!0})}});function ar(e,t,n){const i=e.getPatient().getField(t);return i?(0,a.get)(i.getValue(),n):null}const ir=o().Model.extend({defaults:{direction:"desc",field_key:"value",entities:["actions","flows"]},getComparator(){const e=this.get("comparator");if(e)return e.bind(this);const t=this.get("field_name"),n=this.get("field_key").split("."),a=this.get("direction"),i=this.get("sort_type");return(e,l)=>{const s=ar(e.model,t,n),o=ar(l.model,t,n);return"numeric"===i?(0,Ie.oC)(a,s,o):(0,Ie.XQ)(a,s,o)}}}),lr=o().Collection.extend({model:ir,getByType(e){const t=this.clone(),n=this.filter((t=>t.get("entities").includes(e)));return t.reset(n),t},getInclude(){const e=(0,a.compact)(this.map("field_name"));return(0,a.map)((0,a.uniq)(e),(e=>`patient.patient-fields.${e}`)).join(",")}}),sr=function(e,t){return(0,Ie.XQ)(this.get("direction"),e.model.getPatient().getSortName(),t.model.getPatient().getSortName())},or=function(e,t){return(0,Ie.XQ)(this.get("direction"),e.model.get("updated_at"),t.model.get("updated_at"))},rr=function(e,t){return(0,Ie.XQ)(this.get("direction"),e.model.get("created_at"),t.model.get("created_at"))},cr=[{id:"sortPatientAsc",text:Go.sortPatientOptions.asc,direction:"asc",comparator:sr},{id:"sortPatientDesc",text:Go.sortPatientOptions.desc,comparator:sr},{id:"sortDueAsc",text:Go.sortDueOptions.asc,entities:["actions"],direction:"asc",comparator(e,t){const n=e.model.get("due_date"),a=t.model.get("due_date");return n===a?(0,Ie.XQ)(this.get("direction"),e.model.get("due_time"),t.model.get("due_time"),"24"):(0,Ie.XQ)(this.get("direction"),n,a)}},{id:"sortDueDesc",text:Go.sortDueOptions.desc,entities:["actions"],comparator(e,t){const n=e.model.get("due_date"),a=t.model.get("due_date");return n===a?(0,Ie.XQ)(this.get("direction"),e.model.get("due_time"),t.model.get("due_time")):(0,Ie.XQ)(this.get("direction"),n,a)}},{id:"sortUpdateAsc",text:Go.sortUpdateOptions.asc,direction:"asc",comparator:or},{id:"sortUpdateDesc",text:Go.sortUpdateOptions.desc,comparator:or},{id:"sortCreatedAsc",text:Go.sortCreatedOptions.asc,direction:"asc",comparator:rr},{id:"sortCreatedDesc",text:Go.sortCreatedOptions.desc,comparator:rr}],dr=r.Z.extend({StateModel:Ys}),hr=r.Z.extend({StateModel:zs,childApps:{filters:{AppClass:dr,restartWithParent:!1},bulkEditActions:Kl,bulkEditFlows:Qs},stateEvents:{"change:listType change:clinicianId change:teamId change:noOwner":"restart","change:customFilters change:states change:flowStates":"restart","change:actionsDateFilters change:flowsDateFilters":"restart","change:actionsSortId change:flowsSortId":"onChangeStateSort","change:actionsSelected change:flowsSelected":"onChangeSelected","change:searchQuery":"onChangeSearchQuery"},startFiltersApp({setDefaults:e}={}){const t=this.startChildApp("filters",{state:this.getState().getFiltersState()}),n=t.getState();t.listenTo(n,"change",(()=>{this.setState(n.getFiltersState())})),e&&n.setDefaultFilterStates(),this.setState(n.getFiltersState())},onChangeStateSort(){this.isRunning()&&this.getChildView("list").setComparator(this.getComparator())},onChangeSelected(){this.toggleBulkSelect()},onChangeSearchQuery(e){this.currentSearchQuery=e.get("searchQuery")},initListState(){const e=this.getState().getStore(this.worklistId);if(this.getState().setSearchQuery(this.currentSearchQuery),e)return this.setState(e),void this.startFiltersApp();this.setState({id:this.worklistId}),this.startFiltersApp({setDefaults:!0})},onBeforeStop(){this.collection=null,this.isRestarting()||this.stopChildApp("filters")},onBeforeStart({worklistId:e}){if(this.isRestarting())return this.getChildApp("filters").setState(this.getState().getFiltersState()),this.getRegion("count").empty(),this.showTypeViews(),void this.getRegion("list").startPreloader();this.worklistId=e,this.initListState(),this.setView(new Wo),this.showDisabledSelectAll(),this.showSearchView(),this.showFiltersButtonView(),this.showTypeViews(),this.getRegion("list").startPreloader(),this.showView()},beforeStart(){const e=this.getState().getType(),t={filter:this.getState().getEntityFilter(),include:this.sortOptions.getInclude()};return"actions"===e&&(t.fields={flows:["name","state"]}),l().request("entities",`fetch:${e}:collection`,{data:t})},onStart(e,t){this.collection=t,this.filteredCollection=t.clone(),this.editableCollection=t.clone(),this.listenTo(this.filteredCollection,"reset",this.showCountView),this.showCountView(),this.listenTo(this.editableCollection,"reset",this.toggleBulkSelect),this.toggleBulkSelect(),this.showList()},showTypeViews(){this.showListTitle(),this.showTypeToggleView(),this.showDateFilter(),this.showSortDroplist(),this.showTableHeaders()},showList(){const e=new tr({collection:this.collection,editableCollection:this.editableCollection,state:this.getState(),viewComparator:this.getComparator()});this.listenTo(e,{filtered(t){this.filteredCollection.reset(t),this.editableCollection.reset(this._getListEditable(e))},"change:canEdit"(){this.editableCollection.reset(this._getListEditable(e))},"click:patientSidebarButton"({model:t}){const n=l().request("sidebar","start","patient",{patient:t.getPatient()});e.on("destroy",(()=>n.stop()))}}),this.showChildView("list",e)},_getListEditable:e=>e.children.reduce(((e,{canEdit:t,model:n})=>(t&&e.push(n),e)),[]),showFiltersButtonView(){const e=this.getChildApp("filters").getState(),t=new Xo({model:e});this.listenTo(t,"click",(()=>{l().request("sidebar","start","filters",{filtersState:e})})),this.showChildView("filters",t)},toggleBulkSelect(){this.selected=this.getState().getSelected(this.editableCollection),this.showSelectAll(),this.selected.length?this.showBulkEditButtonView():this.showFiltersButtonView()},showBulkEditButtonView(){const e=new ql({isFlowType:this.getState().isFlowType(),collection:this.selected});this.listenTo(e,{"click:cancel":this.onClickBulkCancel,"click:edit":this.onClickBulkEdit}),this.showChildView("filters",e)},onClickBulkCancel(){this.getState().clearSelected()},onClickBulkEdit(){const e=this.getState().isFlowType()?"bulkEditFlows":"bulkEditActions",t=this.startChildApp(e,{state:{collection:this.selected}});this.listenTo(t,{applyOwner(e){this.selected.applyOwner(e)},save(e){const n=this.selected.length;this.selected.save(e).then((()=>{this.showUpdateSuccess(n),t.stop(),this.getState().clearSelected()})).catch((()=>{l().request("alert","show:error",h.ZP.patients.worklist.worklistApp.bulkEditFailure),this.getState().clearSelected(),this.restart()}))},delete(){const e=this.selected.length;this.selected.destroy().then((()=>{this.showDeleteSuccess(e),t.stop(),this.getState().clearSelected()}))}})},showDeleteSuccess(e){this.getState().isFlowType()?l().request("alert","show:success",(0,h.SM)(Yl,{itemCount:e})):l().request("alert","show:success",(0,h.SM)(Ul,{itemCount:e}))},showUpdateSuccess(e){this.getState().isFlowType()?l().request("alert","show:success",(0,h.SM)($l,{itemCount:e})):l().request("alert","show:success",(0,h.SM)(zl,{itemCount:e}))},showDisabledSelectAll(){this.showChildView("selectAll",new Zo({isDisabled:!0}))},showSelectAll(){if(!this.editableCollection.length)return void this.showDisabledSelectAll();const e=new Zo({isSelectAll:this.selected.length===this.editableCollection.length,isSelectNone:!this.selected.length});this.listenTo(e,"click",this.onClickBulkSelect),this.showChildView("selectAll",e)},onClickBulkSelect(){this.selected.length!==this.editableCollection.length?this.getState().selectMultiple(this.editableCollection.map("id")):this.getState().clearSelected()},getSortOption(e){const t=this.sortOptions.get(e);if(!t){const e=this.getState().defaults()[`${this.getState().getType()}SortId`];return this.sortOptions.get(e)}return t},getComparator(){const e=this.getState().getSort();return this.getSortOption(e).getComparator()},showCountView(){const e=new So({isFlowList:this.getState().isFlowType(),collection:this.collection,filteredCollection:this.filteredCollection});this.showChildView("count",e)},showDateFilter(){if(this.getState().getStaticDateFilter())return;const e=this.getState().isFlowType()?["created_at","updated_at"]:["created_at","updated_at","due_date"],t=new wo({dateTypes:e,state:this.getState().getDateFilters()});this.listenTo(t.getState(),"change",(({attributes:e})=>{this.getState().setDateFilters(e)})),this.showChildView("dateFilter",t)},showSortDroplist(){this.sortOptions=function(e){const t=l().request("bootstrap","setting","sorting");return new lr((0,a.union)(cr,t)).getByType(e)}(this.getState().getType());const e=new nr({collection:this.sortOptions,state:{selected:this.getSortOption(this.getState().getSort())}});this.listenTo(e.getState(),"change:selected",((e,t)=>{this.getState().setSort(t.id)})),this.showChildView("sort",e)},showTableHeaders(){const e=new Jo({isFlowList:this.getState().isFlowType()});this.showChildView("table",e)},showListTitle(){const e=new Ko({model:this.getState()});this.listenTo(e,{"change:owner"({id:e,type:t}){"teams"===t?this.setState({teamId:e,clinicianId:null}):this.setState({clinicianId:e,teamId:null})},"toggle:noOwner"(){this.toggleState("noOwner")}}),this.showChildView("title",e)},showTypeToggleView(){const e=new $o({isFlowList:this.getState().isFlowType()});this.listenTo(e,"toggle:listType",(e=>{this.getState().setType(e)})),this.showChildView("toggle",e)},showSearchView(){const e=new _o({state:{query:this.getState("searchQuery")}});this.listenTo(e.getState(),"change:query",((e,t)=>{this.getState().setSearchQuery(t)})),this.showChildView("search",e)}}),ur=new(o().Collection)(u.cB),mr=o().Model.extend({defaults(){return{clinicianId:this.currentClinician.id,dateFilters:{dateType:"due_date",selectedDate:null,selectedMonth:null,selectedWeek:null,relativeDate:null},lastSelectedIndex:null,actionsSelected:{},searchQuery:""}},getFiltersState(){return{customFilters:this.get("customFilters"),states:this.get("states"),flowStates:this.get("flowStates"),listType:this.getType()}},preinitialize(){this.currentClinician=l().request("bootstrap","currentUser"),this.currentWorkspace=l().request("bootstrap","currentWorkspace")},initialize(){this.on("change",this.onChange)},getStoreKey(){return`schedule_${this.currentClinician.id}_${this.currentWorkspace.id}-v6`},getStore(){return ri().get(this.getStoreKey())},onChange(){ri().set(this.getStoreKey(),(0,a.omit)(this.attributes,"filtersCount","lastSelectedIndex","searchQuery"))},setSearchQuery(e=""){return this.set({searchQuery:e.length>2?e:"",lastSelectedIndex:null})},getType:()=>"actions",setDateFilters(e){this.set("dateFilters",(0,a.clone)(e))},getDateFilters(){return(0,a.clone)(this.get("dateFilters"))},formatDateRange(e,t){const n="YYYY-MM-DD";return`${d()(e).startOf(t).format(n)},${d()(e).endOf(t).format(n)}`},getDateRange({selectedDate:e,selectedMonth:t,selectedWeek:n,relativeDate:a}){if(e)return this.formatDateRange(e,"day");if(t)return this.formatDateRange(t,"month");if(n)return this.formatDateRange(n,"week");a=a||"thismonth";const{prev:i,unit:l}=ur.get(a).pick("prev","unit"),s=d()().subtract(i,l);return this.formatDateRange(s,l)},getEntityDateFilter(){const e=this.getDateFilters();return"alltime"===e.relativeDate?{}:{due_date:this.getDateRange(e)}},getEntityStatesFilter(){return{state:this.get("states").join()||Ws.Z,"flow.state":this.get("flowStates").join()||Ws.Z}},getOwner(){const e=this.get("clinicianId");return l().request("entities","clinicians:model",e)},getEntityOwnerFilter(){return{clinician:this.get("clinicianId")}},getEntityCustomFilter(){const e=this.get("customFilters");return(0,a.reduce)(e,((e,t,n)=>(null!==t&&(e[`@${n}`]=t),e)),{})},getEntityFilter(){const e={};return(0,a.extend)(e,this.getEntityDateFilter()),(0,a.extend)(e,this.getEntityStatesFilter()),(0,a.extend)(e,this.getEntityOwnerFilter()),(0,a.extend)(e,this.getEntityCustomFilter()),e}});(0,a.extend)(mr.prototype,Vl);const pr=mr;var gr=n(2603),fr=n.n(gr);const wr=g.View.extend({className:"flex-region",template:fr(),regions:{filters:"[data-filters-region]",table:"[data-table-region]",list:{el:"[data-list-region]",regionClass:w.Z},selectAll:"[data-select-all-region]",title:{el:"[data-title-region]",replaceElement:!0},dateFilter:"[data-date-filter-region]",search:"[data-search-region]",count:"[data-count-region]"},templateContext(){return{isReduced:this.getOption("isReduced")}}}),vr=g.View.extend({className:"u-text--nowrap",getTemplate(){return this.getOption("owner")?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(n,"formatMessage")||t&&o(t,"formatMessage")||s).call(l,(o(n,"intlGet")||t&&o(t,"intlGet")||s).call(l,"patients.schedule.scheduleViews.titleLabelView.title",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:80}}}),{name:"formatMessage",hash:{owner:null!=t?o(t,"owner"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:94}}}))},useData:!0}):p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"schedule"))&&s(l,"scheduleViews"))&&s(l,"titleLabelView"))&&s(l,"label"),t))},useData:!0})},templateContext(){return{owner:this.getOption("owner")}}}),br=$.extend({align:"right",isTitleFilter:!0,hasTeams:!1}),yr=g.View.extend({regions:{label:"[data-label-region]",owner:"[data-owner-filter-region]"},className:"flex list-page__title-filter",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <span class="list-page__title-icon">'+o((r(n,"far")||t&&r(t,"far")||s).call(l,"calendar-star",{name:"far",hash:{},data:i,loc:{start:{line:2,column:40},end:{line:2,column:63}}}))+'</span>\n    <div data-label-region></div>\n    <div data-owner-filter-region></div>\n    <span class="list-page__header-icon js-title-info">'+o((r(n,"far")||t&&r(t,"far")||s).call(l,"circle-info",{name:"far",hash:{},data:i,loc:{start:{line:5,column:55},end:{line:5,column:76}}}))+"</span>\n  "},useData:!0}),ui:{tooltip:".js-title-info"},initialize(){const e=l().request("bootstrap","currentUser");this.shouldShowDroplist=e.can("app:schedule:clinician_filter"),this.owner=this.model.getOwner()},onRender(){this.showLabel(),this.showOwnerDroplist(),new T.Z({message:h.ZP.patients.schedule.scheduleViews.scheduleTitleView.tooltip,uiView:this,ui:this.ui.tooltip,orientation:"vertical"})},showLabel(){const e=new vr({owner:this.shouldShowDroplist?null:this.owner.get("name")});this.showChildView("label",e)},showOwnerDroplist(){if(!this.shouldShowDroplist)return;const e=new br({owner:this.owner});this.listenTo(e,"change:owner",(e=>{this.triggerMethod("change:owner",e)})),this.showChildView("owner",e)}}),_r=g.View.extend({tagName:"button",className:"button--link-large",template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"("+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"filtersCount")||(null!=t?s(t,"filtersCount"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"filtersCount",hash:{},data:i,loc:{start:{line:1,column:133},end:{line:1,column:149}}}):l)+")"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(s,"sliders",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:17}}}))+"<span>"+o(e.lambda((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"scheduleViews"))&&r(l,"allFiltersButtonView"))&&r(l,"allFiltersButton"),t))+"</span> "+(null!=(l=r(n,"if").call(s,null!=t?r(t,"filtersCount"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:112},end:{line:1,column:157}}}))?l:"")},useData:!0}),triggers:{click:"click"},modelEvents:{"change:filtersCount":"render"}}),xr=g.View.extend({tagName:"button",className:"button--checkbox",attributes(){if(this.getOption("isDisabled"))return{disabled:"disabled"}},triggers:{click:"click"},getTemplate(){return this.getOption("isSelectAll")?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-check",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0}):this.getOption("isSelectNone")||this.getOption("isDisabled")?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))},useData:!0}):p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-minus",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0})}}),kr=g.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="schedule-list__header schedule-list__header-due-date">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"scheduleViews"))&&r(l,"tableHeaderView"))&&r(l,"dueDateHeader"),t))+'</td>\n    <td class="schedule-list__header schedule-list__header-state-patient">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"scheduleViews"))&&r(l,"tableHeaderView"))&&r(l,"patientHeader"),t))+'</td>\n    <td class="schedule-list__header schedule-list__header-action">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"scheduleViews"))&&r(l,"tableHeaderView"))&&r(l,"actionHeader"),t))+'</td>\n    <td class="schedule-list__header schedule-list__header-form">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"scheduleViews"))&&r(l,"tableHeaderView"))&&r(l,"formheader"),t))+"</td>\n  "},useData:!0}),tagName:"tr"}),Cr=g.View.extend({tagName:"tr",className(){const e="schedule-list__day-list-row";return this.getOption("state").get("isReduced")?`${e} is-reduced`:e},template:p().template({1:function(e,t,n,a,i){return"is-overdue"},3:function(e,t,n,a,i){return'<span class="u-margin--r-8" data-check-region></span>'},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression((l(n,"formatDateTime")||t&&l(t,"formatDateTime")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"due_time"):t,"TIME",{name:"formatDateTime",hash:{inputFormat:"HH:mm:ss"},data:i,loc:{start:{line:5,column:8},end:{line:5,column:65}}}))+"&#8203;\n"},7:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span class="schedule-list__no-time">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"schedule"))&&s(l,"scheduleViews"))&&s(l,"dayItemView"))&&s(l,"noTime"),t))+"</span>&#8203;\n"},9:function(e,t,n,a,i){return"is-reduced"},11:function(e,t,n,a,i){return"js-patient"},13:function(e,t,n,a,i){return"js-action"},15:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="js-form schedule-list__action-form-icon">'+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"hasOutreach"):t,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.program(18,i,0),data:i,loc:{start:{line:29,column:72},end:{line:29,column:165}}}))?l:"")+"</span>"},16:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"share-from-square",{name:"far",hash:{},data:i,loc:{start:{line:29,column:91},end:{line:29,column:118}}}))},18:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:29,column:126},end:{line:29,column:158}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="schedule-list__action-list-cell schedule-list__due-time '+(null!=(l=u(n,"if").call(o,null!=t?u(t,"isOverdue"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:71},end:{line:2,column:105}}}))?l:"")+'">\n      '+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"isReduced"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:6},end:{line:3,column:91}}}))?l:"")+"\n"+(null!=(l=u(n,"if").call(o,null!=t?u(t,"due_time"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i,loc:{start:{line:4,column:6},end:{line:8,column:13}}}))?l:"")+'    </td>\n    <td class="schedule-list__action-list-cell schedule-list__patient">\n      <div class="schedule-list__patient-details">\n        <span class="schedule-list__patient-sidebar-icon">\n          <button class="js-patient-sidebar-button">\n            '+c((u(n,"far")||t&&u(t,"far")||r).call(o,"address-card",{name:"far",hash:{},data:i,loc:{start:{line:14,column:12},end:{line:14,column:34}}}))+"\n          </button>\n        </span>&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:22},end:{line:16,column:47}}}):s)+'<span class="schedule-list__patient-name '+(null!=(l=u(n,"if").call(o,null!=t?u(t,"isReduced"):t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.program(11,i,0),data:i,loc:{start:{line:17,column:49},end:{line:17,column:101}}}))?l:"")+'">'+c(h(null!=(l=null!=t?u(t,"patient"):t)?u(l,"first_name"):l,t))+" "+c(h(null!=(l=null!=t?u(t,"patient"):t)?u(l,"last_name"):l,t))+'</span>&#8203;\n      </div>\n    </td>\n    <td class="schedule-list__action-list-cell">\n      <div class="schedule-list__action-state-name">\n        <span class="schedule-list__action-state action--'+c(h(null!=(l=null!=t?u(t,"stateOptions"):t)?u(l,"color"):l,t))+'">'+c((u(n,"fa")||t&&u(t,"fa")||r).call(o,null!=(l=null!=t?u(t,"stateOptions"):t)?u(l,"iconType"):l,null!=(l=null!=t?u(t,"stateOptions"):t)?u(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:22,column:83},end:{line:22,column:129}}}))+'</span><span class="schedule-list__search-helper">'+c(typeof(s=null!=(s=u(n,"state")||(null!=t?u(t,"state"):t))?s:r)===d?s.call(o,{name:"state",hash:{},data:i,loc:{start:{line:22,column:179},end:{line:22,column:190}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:22,column:204},end:{line:22,column:229}}}):s)+'<span class="'+(null!=(l=u(n,"unless").call(o,null!=t?u(t,"isReduced"):t,{name:"unless",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i,loc:{start:{line:23,column:21},end:{line:23,column:62}}}))?l:"")+'">'+c(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:23,column:64},end:{line:23,column:74}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:23,column:88},end:{line:23,column:113}}}):s)+'<span class="schedule-list__search-helper">'+c(typeof(s=null!=(s=u(n,"flow")||(null!=t?u(t,"flow"):t))?s:r)===d?s.call(o,{name:"flow",hash:{},data:i,loc:{start:{line:24,column:51},end:{line:24,column:61}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:24,column:75},end:{line:24,column:100}}}):s)+'</div>\n    </td>\n    <td class="schedule-list__action-list-cell schedule-list__action-details" data-details-region></td>\n    <td class="schedule-list__action-list-cell schedule-list__action-form">\n      '+(null!=(l=u(n,"if").call(o,null!=t?u(t,"form"):t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i,loc:{start:{line:29,column:6},end:{line:29,column:179}}}))?l:"")+"\n    </td>\n  "},useData:!0}),regions:{check:"[data-check-region]",details:"[data-details-region]"},templateContext(){const e=this.model.getState();return{isOverdue:this.model.isOverdue(),state:e.get("name"),stateOptions:e.get("options"),patient:this.model.getPatient().attributes,form:this.model.getForm(),flow:this.model.getFlow()&&this.model.getFlow().get("name"),hasOutreach:this.model.hasOutreach(),isReduced:this.isReduced}},ui:{actionName:".js-action"},triggers:{"click .js-form":"click:form","click .js-patient-sidebar-button":"click:patientSidebarButton","click .js-patient":"click:patient",click:"click"},modelEvents:{change:"render"},initialize({state:e}){this.state=e,this.flow=this.model.getFlow(),this.isReduced=e.get("isReduced"),this.listenTo(e,{"select:multiple":this.showCheck,"select:none":this.showCheck})},onRender(){const e=this.canEdit;this.canEdit=!this.model.isFlowDone()&&this.model.canEdit(),this.showDetailsTooltip(),this.showCheck(),e!==this.canEdit&&(this.canEdit||this.toggleSelected(!1),this.triggerMethod("change:canEdit"))},toggleSelected(e){this.$el.toggleClass("is-selected",e)},showCheck(){if(this.isReduced||!this.canEdit)return;const e=this.state.isSelected(this.model);this.toggleSelected(e);const t=new V({state:{isSelected:e}});this.listenTo(t,{select(e){this.triggerMethod("select",this,!!e.shiftKey)},"change:isSelected":this.toggleSelected}),this.showChildView("check",t)},onClickPatientSidebarButton(){const e=this.model.getPatient(),t=l().request("sidebar","start","patient",{patient:e});this.on("destroy",(()=>t.stop()))},onClickPatient(){l().trigger("event-router","patient:dashboard",this.model.get("_patient"))},onClickForm(){l().trigger("event-router","form:patientAction",this.model.id,this.model.getForm().id)},onClick(){this.isReduced||(this.flow?l().trigger("event-router","flow:action",this.flow.id,this.model.id):l().trigger("event-router","patient:action",this.model.get("_patient"),this.model.id))},showDetailsTooltip(){this.model.get("details")&&this.showChildView("details",new ue({model:this.model}))}}),Sr=g.CollectionView.extend({childView:Cr,childViewOptions(){return{state:this.state}},tagName:"tr",className:"schedule-list__list-row",template:p().template({1:function(e,t,n,a,i){return"is-today"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="schedule-list__list-cell">\n      <div class="schedule-list__row-header">\n        <span class="schedule-list__date '+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isToday"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:41},end:{line:4,column:71}}}))?l:"")+'">'+r((c(n,"formatDateTime")||t&&c(t,"formatDateTime")||o).call(s,null!=t?c(t,"date"):t,"D",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:4,column:73},end:{line:4,column:100}}}))+'</span>\n        <span class="schedule-list__month-day">'+r((c(n,"formatDateTime")||t&&c(t,"formatDateTime")||o).call(s,null!=t?c(t,"date"):t,"MMM, ddd",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:5,column:47},end:{line:5,column:81}}}))+'</span>\n      </div>\n      <div class="schedule-list__day-list">\n        <table class="schedule-list__day-list-table w-100" data-actions-region></table>\n      </div>\n    </td>\n  '},useData:!0}),templateContext(){const e=d()(this.model.get("date")),t=d()();return{isToday:e.isSame(t,"day")}},childViewContainer:"[data-actions-region]",viewComparator:(e,t)=>(0,Ie.XQ)("asc",e.model.get("due_time"),t.model.get("due_time"),"24"),initialize({state:e}){this.state=e,this.listenTo(e,"change:searchQuery",this.searchList)},onAttach(){this.searchList(null,this.state.get("searchQuery"))},childViewTriggers:{render:"listItem:render","change:canEdit":"change:canEdit",select:"select"},onSelect(e,t){this.triggerMethod("select:list:item",e,t)},onListItemRender(e){const t=d()(this.model.get("date"));e.searchString=`${t.format("D")} ${t.format("MMM, ddd")} ${e.$el.text()}`},searchList(e,t){if(!t)return void this.removeFilter();const n=Do(t);this.setFilter((function({searchString:e}){return(0,a.every)(n,(function(t){return t.test(e)}))}))}}),Or=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"schedule"))&&s(l,"scheduleViews"))&&s(l,"emptyView"))&&s(l,"noScheduledActions"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Tr=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"schedule"))&&s(l,"scheduleViews"))&&s(l,"emptyFindInListView"))&&s(l,"noResults"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Dr=g.CollectionView.extend({tagName:"table",className:"schedule-list__table",childView:Sr,childViewOptions(e){if(e)return{collection:e.get("actions"),state:this.state}},childViewTriggers:{"select:list:item":"select","change:canEdit":"listItem:canEdit"},childViewEvents:{"render:children":"onChildFilter"},emptyView(){return this.collection.length&&this.state.get("searchQuery")?Tr:Or},viewComparator:(e,t)=>(0,Ie.XQ)("asc",e.model.get("date"),t.model.get("date")),viewFilter(e){return this.isAttached()&&this.state.get("searchQuery")?!e.isEmpty():"null"!==e.model.get("date")},initialize({state:e,editableCollection:t}){this.state=e,this.editableCollection=t,this.onListItemCanEdit=(0,a.debounce)(this.onListItemCanEdit,60)},onListItemCanEdit(){this.triggerMethod("change:canEdit")},onRenderChildren(){this.setVisibleChildren()},onChildFilter:(0,a.debounce)((function(){this.filter()}),10),setVisibleChildren(){const e=this.children.reduce(((e,t)=>e.concat(t.children.pluck("model"))),[]);this.triggerMethod("filtered",e)},onSelect(e,t){this.state.selectRange(this.editableCollection,e.model,t)}}),Vr=r.Z.extend({StateModel:Ys}),Mr=r.Z.extend({StateModel:pr,childApps:{filters:{AppClass:Vr,restartWithParent:!1},bulkEditActions:Kl},stateEvents:{"change:clinicianId change:dateFilters change:customFilters change:states change:flowStates":"restart","change:actionsSelected":"onChangeSelected","change:searchQuery":"onChangeSearchQuery"},startFiltersApp({setDefaults:e}={}){const t=this.startChildApp("filters",{state:this.getState().getFiltersState()}),n=t.getState();t.listenTo(n,"change",(()=>{this.setState(n.getFiltersState())})),e&&n.setDefaultFilterStates(),this.setState(n.getFiltersState())},onChangeSelected(){this.toggleBulkSelect()},onChangeSearchQuery(e){this.currentSearchQuery=e.get("searchQuery")},initListState(){const e=this.getState().getStore();if(this.getState().setSearchQuery(this.currentSearchQuery),e)return this.setState(e),void this.startFiltersApp();const t=l().request("bootstrap","currentUser");this.setState({id:`schedule_${t.id}`}),this.startFiltersApp({setDefaults:!0})},onBeforeStop(){this.collection=null,this.isRestarting()||this.stopChildApp("filters")},onBeforeStart(){if(this.isRestarting())return this.getChildApp("filters").setState(this.getState().getFiltersState()),this.getRegion("count").empty(),void this.getRegion("list").startPreloader();this.initListState(),this.setView(new wr({isReduced:this.getState("isReduced")})),this.showDisabledSelectAll(),this.showSearchView(),this.showTableHeaders(),this.showScheduleTitle(),this.showDateFilter(),this.showFiltersButtonView(),this.getRegion("list").startPreloader(),this.showView()},beforeStart(){const e=this.getState().getEntityFilter();return l().request("entities","fetch:actions:collection",{data:{filter:e,fields:{flows:["name","state"]}}})},onStart(e,t){this.collection=t,this.filteredCollection=t.clone(),this.editableCollection=t.clone(),this.listenTo(this.filteredCollection,"reset",this.showCountView),this.showCountView(),this.listenTo(this.editableCollection,"reset",this.toggleBulkSelect),this.toggleBulkSelect(),this.showList()},showList(){const e=new Dr({collection:this.collection.groupByDate(),editableCollection:this.editableCollection,state:this.getState()});this.listenTo(e,{filtered(t){this.filteredCollection.reset(t),this.editableCollection.reset(this._getListEditable(e))},"change:canEdit"(){this.editableCollection.reset(this._getListEditable(e))}}),this.showChildView("list",e)},_getListEditable:e=>e.children.reduce(((e,t)=>t.children.reduce(((e,{canEdit:t,model:n})=>(t&&e.push(n),e)),e)),[]),showFiltersButtonView(){const e=this.getChildApp("filters").getState(),t=new _r({model:e});this.listenTo(t,"click",(()=>{l().request("sidebar","start","filters",{filtersState:e})})),this.showChildView("filters",t)},toggleBulkSelect(){this.selected=this.getState().getSelected(this.editableCollection),this.showSelectAll(),this.selected.length?this.showBulkEditButtonView():this.showFiltersButtonView()},showBulkEditButtonView(){const e=new ql({collection:this.selected});this.listenTo(e,{"click:cancel":this.onClickBulkCancel,"click:edit":this.onClickBulkEdit}),this.showChildView("filters",e)},onClickBulkCancel(){this.getState().clearSelected()},onClickBulkEdit(){const e=this.startChildApp("bulkEditActions",{state:{collection:this.selected}});this.listenTo(e,{save(t){const n=this.selected.length;this.selected.save(t).then((()=>{if(l().request("alert","show:success",(0,h.SM)(zl,{itemCount:n})),e.stop(),t.due_date&&this.selected.some((e=>e.changed.due_date)))return this.getState().clearSelected(),void this.restart();this.getState().clearSelected()})).catch((()=>{l().request("alert","show:error",h.ZP.patients.schedule.scheduleApp.bulkEditFailure),this.getState().clearSelected(),this.restart()}))},delete(){const t=this.selected.length;this.selected.destroy().then((()=>{l().request("alert","show:success",(0,h.SM)(Ul,{itemCount:t})),e.stop(),this.getState().clearSelected(),this.showList()}))}})},showDisabledSelectAll(){this.showChildView("selectAll",new xr({isDisabled:!0}))},showSelectAll(){if(!this.editableCollection.length)return void this.showDisabledSelectAll();const e=new xr({isSelectAll:this.selected.length===this.editableCollection.length,isSelectNone:!this.selected.length});this.listenTo(e,"click",this.onClickBulkSelect),this.showChildView("selectAll",e)},onClickBulkSelect(){this.selected.length!==this.editableCollection.length?this.getState().selectMultiple(this.editableCollection.map("id")):this.getState().clearSelected()},showCountView(){const e=new So({collection:this.collection,filteredCollection:this.filteredCollection});this.showChildView("count",e)},showDateFilter(){const e=new wo({dateTypes:["due_date"],state:this.getState().getDateFilters()});this.listenTo(e.getState(),"change",(({attributes:e})=>{this.getState().setDateFilters(e)})),this.showChildView("dateFilter",e)},showTableHeaders(){const e=new kr;this.showChildView("table",e)},showScheduleTitle(){const e=new yr({model:this.getState()});this.listenTo(e,"change:owner",(({id:e})=>{this.setState({clinicianId:e})})),this.showChildView("title",e)},showSearchView(){const e=new _o({state:{query:this.getState("searchQuery")}});this.listenTo(e.getState(),"change:query",((e,t)=>{this.getState().setSearchQuery(t)})),this.showChildView("search",e)}}),Pr=ci.Z.extend({routerAppName:"PatientsApp",childApps:{flow:us,patient:Gs,ownedBy:hr,forTeam:hr,newPastDay:hr,pastThree:hr,lastThirty:hr,schedule:Mr},eventRoutes:{worklist:{action:"showPatientsWorklist",route:"worklist/:id",isList:!0},"patient:dashboard":{action:"showPatient",route:"patient/dashboard/:id"},"patient:archive":{action:"showPatient",route:"patient/archive/:id"},"patient:action":{action:"showPatient",route:"patient/:id/action/:id"},"patient:action:new":{action:"showPatient",route:"patient/:id/action"},flow:{action:"showFlow",route:"flow/:id"},"flow:action":{action:"showFlow",route:"flow/:id/action/:id"},schedule:{action:"showSchedule",route:"schedule",isList:!0}},showPatient(e){this.startRoute("patient",{patientId:e})},showPatientsWorklist(e){const t={"owned-by":"ownedBy","shared-by":"forTeam","new-past-day":"newPastDay","updated-past-three-days":"pastThree","done-last-thirty-days":"lastThirty"};t[e]?this.startCurrent(t[e],{worklistId:e}):l().trigger("event-router","notFound")},showFlow(e){this.startRoute("flow",{flowId:e})},showSchedule(){this.startCurrent("schedule")}}),Er=o().Model.extend({defaults:()=>({isReduced:!0,searchQuery:""}),getFiltersState(){return{customFilters:this.get("customFilters"),states:this.get("states"),flowStates:this.get("flowStates"),listType:"actions"}},preinitialize(){this.currentClinician=l().request("bootstrap","currentUser"),this.currentWorkspace=l().request("bootstrap","currentWorkspace")},initialize(){this.on("change",this.onChange)},getStoreKey(){return`reduced-schedule_${this.currentClinician.id}_${this.currentWorkspace.id}-v6`},getStore(){return ri().get(this.getStoreKey())},onChange(){ri().set(this.getStoreKey(),(0,a.omit)(this.attributes,"filtersCount","searchQuery"))},setSearchQuery(e=""){return this.set({searchQuery:e.length>2?e:"",lastSelectedIndex:null})},getEntityStatesFilter(){return{state:this.get("states").join()||Ws.Z,"flow.state":this.get("flowStates").join()||Ws.Z}},getOwner(){return this.currentClinician},getEntityCustomFilter(){const e=this.get("customFilters");return(0,a.reduce)(e,((e,t,n)=>(null!==t&&(e[`@${n}`]=t),e)),{})},getEntityFilter(){const e={clinician:this.currentClinician.id};return(0,a.extend)(e,this.getEntityStatesFilter()),(0,a.extend)(e,this.getEntityCustomFilter()),e}}),jr=r.Z.extend({StateModel:Ys}),Ar=r.Z.extend({StateModel:Er,childApps:{filters:{AppClass:jr,restartWithParent:!1}},stateEvents:{"change:customFilters change:states change:flowStates":"restart","change:searchQuery":"onChangeSearchQuery"},startFiltersApp({setDefaults:e}={}){const t=this.startChildApp("filters",{state:this.getState().getFiltersState()}),n=t.getState();t.listenTo(n,"change",(()=>{this.setState(n.getFiltersState())})),e&&n.setDefaultFilterStates(),this.setState(n.getFiltersState())},onChangeSearchQuery(e){this.currentSearchQuery=e.get("searchQuery")},initListState(){const e=this.getState().getStore();if(this.getState().setSearchQuery(this.currentSearchQuery),e)return this.setState(e),void this.startFiltersApp();const t=l().request("bootstrap","currentUser");this.setState({id:`reduced-schedule_${t.id}`}),this.startFiltersApp({setDefaults:!0})},onBeforeStart(){if(this.isRestarting())return this.getRegion("count").empty(),void this.getRegion("list").startPreloader();this.initListState(),this.setView(new wr({isReduced:this.getState("isReduced")})),this.showSearchView(),this.showTableHeaders(),this.showScheduleTitle(),this.showFiltersButtonView(),this.getRegion("list").startPreloader(),this.showView()},onBeforeStop(){this.collection=null,this.isRestarting()||this.stopChildApp("filters")},beforeStart(){const e=this.getState().getEntityFilter();return l().request("entities","fetch:actions:collection",{data:{filter:e}})},onStart(e,t){this.collection=t,this.filteredCollection=t.clone(),this.listenTo(this.filteredCollection,"reset",this.showCountView),this.showCountView(),this.showList()},showList(){const e=new Dr({collection:this.collection.groupByDate(),state:this.getState()});this.listenTo(e,"filtered",(e=>{this.filteredCollection.reset(e)})),this.showChildView("list",e)},showFiltersButtonView(){const e=this.getChildApp("filters").getState(),t=new _r({model:e});this.listenTo(t,"click",(()=>{l().request("sidebar","start","filters",{filtersState:e})})),this.showChildView("filters",t)},showCountView(){const e=new So({collection:this.collection,filteredCollection:this.filteredCollection});this.showChildView("count",e)},showTableHeaders(){const e=new kr;this.showChildView("table",e)},showScheduleTitle(){this.showChildView("title",new yr({model:this.getState()}))},showSearchView(){const e=new _o({state:{query:this.getState("searchQuery")}});this.listenTo(e.getState(),"change:query",((e,t)=>{this.getState().setSearchQuery(t)})),this.showChildView("search",e)}}),Nr=ci.Z.extend({routerAppName:"PatientsApp",childApps:()=>({flow:us,patient:Gs,schedule:Ar}),eventRoutes:{schedule:{action:"showSchedule",route:"schedule",isList:!0},"patient:dashboard":{action:"showPatient",route:"patient/dashboard/:id"},"patient:archive":{action:"showPatient",route:"patient/archive/:id"},"patient:action":{action:"showPatient",route:"patient/:id/action/:id"},"patient:action:new":{action:"showPatient",route:"patient/:id/action"},flow:{action:"showFlow",route:"flow/:id"},"flow:action":{action:"showFlow",route:"flow/:id/action/:id"}},showPatient(e){this.startRoute("patient",{patientId:e})},showFlow(e){this.startRoute("flow",{flowId:e})},showSchedule(){this.startCurrent("schedule")}}),Fr=g.Behavior.extend({modelEvents:{editing:"onEditing",change:"onChange"},onChange(){this.view.render()},onEditing(e){this.$el.toggleClass("is-selected",e)}}),Ir=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=i&&s(i,"intl"))&&s(l,"clinicians"))&&s(l,"cliniciansAllViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Rr=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"clinicians"))&&s(l,"cliniciansAllViews"))&&s(l,"emptyFindInListView"))&&s(l,"noResults"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Lr=g.View.extend({modelEvents:{"change:enabled":"render"},className:"table-list__item",behaviors:[Fr],tagName:"tr",regions:{team:"[data-team-region]",role:"[data-role-region]",state:"[data-state-region]"},triggers:{click:"click"},template:p().template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"clinicians"))&&s(l,"cliniciansAllViews"))&&s(l,"itemView"))&&s(l,"newClinician"),t))},3:function(e,t,n,a,i){return"table-list__cell--empty"},5:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(l=s(n,"unless").call(null!=t?t:e.nullContext||{},i&&s(i,"first"),{name:"unless",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:115},end:{line:3,column:146}}}))?l:"")+e.escapeExpression(e.lambda(null!=t?s(t,"name"):t,t))},6:function(e,t,n,a,i){return", "},8:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"clinicians"))&&s(l,"cliniciansAllViews"))&&s(l,"itemView"))&&s(l,"noWorkspaces"),t))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-list__cell w-20">'+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:38},end:{line:2,column:128}}}))?l:"")+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:128},end:{line:2,column:138}}}):s)+'&#8203;</td>\n    <td class="table-list__cell w-30 '+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"workspaces"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:37},end:{line:3,column:93}}}))?l:"")+'">'+(null!=(l=h(n,"each").call(o,null!=t?h(t,"workspaces"):t,{name:"each",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:95},end:{line:3,column:170}}}))?l:"")+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"workspaces"):t,{name:"unless",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:170},end:{line:3,column:266}}}))?l:"")+'&#8203;</td>\n    <td class="table-list__cell w-30">\n      <span class="u-margin--r-8" data-state-region></span>&#8203;'+d(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===c?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:5,column:66},end:{line:5,column:91}}}):s)+'<span class="u-margin--r-8" data-role-region></span>&#8203;'+d(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===c?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:65},end:{line:6,column:90}}}):s)+"<span data-team-region></span>&#8203;"+d(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===c?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:43},end:{line:7,column:68}}}):s)+'</td>\n    <td class="table-list__cell w-20 '+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"last_active_at"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:9,column:37},end:{line:9,column:97}}}))?l:"")+'">'+d((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"last_active_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{defaultHtml:(h(n,"intlGet")||t&&h(t,"intlGet")||r).call(o,"clinicians.cliniciansAllViews.itemView.noLastActive",{name:"intlGet",hash:{},data:i,loc:{start:{line:9,column:157},end:{line:9,column:220}}})},data:i,loc:{start:{line:9,column:99},end:{line:9,column:222}}}))+"&#8203;</td>\n  "},useData:!0}),templateContext(){return{workspaces:(0,a.sortBy)((0,a.map)(this.model.getWorkspaces().models,"attributes"),"name")}},onRender(){this.showTeam(),this.showRole(),this.showState()},onClick(){l().trigger("event-router","clinician",this.model.id)},showState(){const e=this.model.isActive(),t=this.model.get("enabled")?"enabled":"disabled",n=new fa({isActive:e,selectedId:t,isCompact:!0});this.listenTo(n,"change:selected",(e=>{this.model.save({enabled:"disabled"!==e.id})})),this.showChildView("state",n)},showRole(){const e=new ia({role:this.model.getRole(),isCompact:!0,state:{isDisabled:!this.model.get("enabled")}});this.listenTo(e,"change:role",(e=>{this.model.saveRole(e)})),this.showChildView("role",e)},showTeam(){const e=new Yt({team:this.model.getTeam(),isCompact:!0,state:{isDisabled:!this.model.get("enabled")}});this.listenTo(e,"change:team",(e=>{this.model.saveTeam(e)})),this.showChildView("team",e)}}),qr=g.View.extend({className:"flex-region",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="list-page__header">\n      <div class="flex list-page__title">\n        <div class="flex list-page__title-filter">\n          <span class="list-page__title-icon">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"users-gear",{name:"far",hash:{},data:i,loc:{start:{line:5,column:46},end:{line:5,column:66}}}))+"</span>"+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"clinicians"))&&d(l,"cliniciansAllViews"))&&d(l,"layoutView"))&&d(l,"title"),t))+'\n        </div>\n        <div class="clinicians__list-search" data-search-region></div>\n      </div>\n      <button class="u-margin--b-16 button-primary js-add-clinician">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"circle-plus",{name:"far",hash:{},data:i,loc:{start:{line:9,column:69},end:{line:9,column:90}}}))+"<span>"+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"clinicians"))&&d(l,"cliniciansAllViews"))&&d(l,"layoutView"))&&d(l,"addClinicianButton"),t))+'</span></button>\n    </div>\n    <div class="flex-region list-page__list">\n      <table class="w-100"><tr>\n        <td class="table-list__header w-20">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"clinicians"))&&d(l,"cliniciansAllViews"))&&d(l,"layoutView"))&&d(l,"clinicianHeader"),t))+'</td>\n        <td class="table-list__header w-30">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"clinicians"))&&d(l,"cliniciansAllViews"))&&d(l,"layoutView"))&&d(l,"workspacesHeader"),t))+'</td>\n        <td class="table-list__header w-30">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"clinicians"))&&d(l,"cliniciansAllViews"))&&d(l,"layoutView"))&&d(l,"attributesHeader"),t))+'</td>\n        <td class="table-list__header w-20">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"clinicians"))&&d(l,"cliniciansAllViews"))&&d(l,"layoutView"))&&d(l,"lastActiveHeader"),t))+'</td>\n      </tr></table>\n      <div class="flex-region" data-list-region></div>\n    </div>\n  '},useData:!0}),regions:{list:{el:"[data-list-region]",regionClass:w.Z},sidebar:"[data-sidebar-region]",addClinician:{el:"[data-add-region]",replaceElement:!0},search:"[data-search-region]"},triggers:{"click .js-add-clinician":"click:addClinician"}}),Br=g.CollectionView.extend({className:"table-list",tagName:"table",childView:Lr,emptyView(){return this.collection.length&&this.state.get("searchQuery")?Rr:Ir},collectionEvents:{"change:name":"sort"},childViewTriggers:{render:"listItem:render"},viewComparator:({model:e})=>String(e.get("name")).toLowerCase(),initialize({state:e}){this.state=e,this.listenTo(e,"change:searchQuery",this.searchList)},onAttach(){this.searchList(null,this.state.get("searchQuery"))},onListItemRender(e){e.searchString=e.$el.text()},onRenderChildren(){this.triggerMethod("filtered",this.children.pluck("model"))},searchList(e,t){if(!t)return void this.removeFilter();const n=Do(t);this.setFilter((function({searchString:e}){return(0,a.every)(n,(function(t){return t.test(e)}))}))}});var Hr=n(3952),Gr=n.n(Hr);const Wr=h.ZP.clinicians.clinicianModal.clinicianModalViews,Zr=g.View.extend({behaviors(){if(this.getOption("shouldFocus"))return[{behaviorClass:hi.Z,selector:".js-input"}]},className:"pos--relative",template:p().template({1:function(e,t,n,a,i){return"has-error"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <input class="input-primary w-100 js-input '+(null!=(l=h(n,"if").call(o,null!=t?h(t,"hasError"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:47},end:{line:2,column:79}}}))?l:"")+'" placeholder="'+d(typeof(s=null!=(s=h(n,"placeholder")||(null!=t?h(t,"placeholder"):t))?s:r)===c?s.call(o,{name:"placeholder",hash:{},data:i,loc:{start:{line:2,column:94},end:{line:2,column:111}}}):s)+'" value="'+d(typeof(s=null!=(s=h(n,"value")||(null!=t?h(t,"value"):t))?s:r)===c?s.call(o,{name:"value",hash:{},data:i,loc:{start:{line:2,column:120},end:{line:2,column:131}}}):s)+'" />\n  '},useData:!0}),templateContext(){const e=this.getOption("state").get("errors");return{hasError:e&&e[this.getOption("attr")],placeholder:this.getOption("placeholder"),value:this.model.get(this.getOption("attr"))}},ui:{input:".js-input"},events:{"input @ui.input":"onChange"},initialize({state:e}){this.listenTo(e,"change:errors",this.render)},onChange(){const e=this.ui.input.val();this.model.set(this.getOption("attr"),(0,S.Z)(e))},onDomRefresh(){this.getOption("shouldFocus")&&this.ui.input.focus()}}),$r=g.View.extend({className:"modal__content",regions:{name:"[data-name-region]",email:"[data-email-region]",role:"[data-role-region]",team:"[data-team-region]",workspaces:"[data-workspaces-region]"},modelEvents:{change:"onChange"},template:Gr(),initialize({state:e}){this.initState({state:e})},onRender(){this.showNameView(),this.showEmailView(),this.showRole(),this.showTeam(),this.showWorkspacesComponent()},showNameView(){this.showChildView("name",new Zr({model:this.model,state:this.getState(),attr:"name",placeholder:Wr.clinicianModal.name,shouldFocus:!0}))},showEmailView(){this.showChildView("email",new Zr({model:this.model,state:this.getState(),attr:"email",placeholder:Wr.clinicianModal.email}))},showRole(){const e=new ia({role:this.model.getRole(),className:"modal__form-component"});this.listenTo(e,"change:role",(e=>{this.model.set("_role",e.id)})),this.showChildView("role",e)},showTeam(){const e=new Yt({team:this.model.get("_team"),className:"modal__form-component"});this.listenTo(e,"change:team",(e=>{this.model.set("_team",e.id)})),this.showChildView("team",e)},showWorkspacesComponent(){const e=this.showChildView("workspaces",new da({className:"modal__form-component",workspaces:l().request("bootstrap","workspaces"),member:this.model}));this.listenTo(e,{"add:member"(e,t){this.model.addWorkspace(t)},"remove:member"(e,t){this.model.removeWorkspace(t)}})}});(0,D.j_)($r);const zr=Dl.extend({routerAppName:"CliniciansApp",eventRoutes:{clinician:"showClinicianSidebar"},viewEvents:{"click:addClinician":"onClickAddClinician"},stateEvents:{"change:searchQuery":"onChangSearchQuery"},onChangSearchQuery(e){this.currentSearchQuery=e.get("searchQuery")},onBeforeStart(){this.showView(new qr),this.getRegion("list").startPreloader(),this.setState({searchQuery:this.currentSearchQuery}),this.showSearchView()},beforeStart:()=>l().request("entities","fetch:clinicians:collection"),onStart({currentRoute:e},t){this.clinicians=t,this.showChildView("list",new Br({collection:this.clinicians,state:this.getState()})),this.startRoute(e)},_getClinician(e){return e?this.clinicians.get(e):l().request("entities","clinicians:model",{enabled:!0,disabled_at:null})},showSearchView(){const e=this.showChildView("search",new _o({state:{query:this.getState("searchQuery")}}));this.listenTo(e.getState(),"change:query",this.setSearchState)},setSearchState(e,t){this.setState({searchQuery:t.length>2?t:""})},showClinicianSidebar(e){const t=this._getClinician(e);if(!t)return l().request("alert","show:error",h.ZP.clinicians.cliniciansAllApp.notFound),void l().trigger("event-router","clinicians:all");l().request("sidebar","start","clinician",{clinician:t}),t.trigger("editing",!0)},onClickAddClinician(){this.showAddModal()},showAddModal(){const e=this._getClinician(),t=e.clone(),n=l().request("modal","show",function(e){const t=new $r({model:e.clinician});return(0,a.extend)({bodyView:t,headerIcon:"users-gear"},Wr.clinicianModal,e)}({clinician:t,onSubmit:()=>{n.disableSubmit(),e.saveAll(t.attributes).then((()=>{this.clinicians.add(e),l().trigger("event-router","clinician",e.id),n.destroy()})).catch((t=>{n.disableSubmit();const i=e.parseErrors(t.responseData);n.getChildView("body").setState({errors:i}),l().request("alert","show:error",(0,a.values)(i).join(", "))}))}}));n.disableSubmit(),n.listenTo(t,{change(){n.disableSubmit(!t.isValid())}})}}),Yr=ci.Z.extend({routerAppName:"CliniciansApp",childApps:{cliniciansAll:zr},eventRoutes:{"clinicians:all":{action:"showCliniciansAll",route:"clinicians",isList:!0},clinician:{action:"showCliniciansAll",route:"clinicians/:id"},"clinician:new":{action:"showCliniciansAll",route:"clinicians/new"}},showCliniciansAll(){this.startRoute("cliniciansAll")}}),Ur=g.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-list__cell w-100">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"name")||(null!=t?s(t,"name"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:2,column:39},end:{line:2,column:49}}}):l)+"</td>\n  "},useData:!0}),className:"table-list__item",tagName:"tr",triggers:{click:"click"},onClick(){l().trigger("event-router","dashboard",this.model.id)}}),Qr=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=i&&s(i,"intl"))&&s(l,"dashboards"))&&s(l,"dashboardsAllViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Kr=g.CollectionView.extend({childView:Ur,className:"table-list",tagName:"table",emptyView:Qr}),Xr=g.View.extend({className:"flex-region",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lambda,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <div class="list-page__header">\n    <div class="flex list-page__title">\n      <div class="flex list-page__title-filter">\n        <span class="list-page__title-icon">'+s((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"gauge",{name:"far",hash:{},data:i,loc:{start:{line:5,column:44},end:{line:5,column:59}}}))+"</span>"+s(o((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"dashboards"))&&r(l,"dashboardsAllViews"))&&r(l,"layoutView"))&&r(l,"title"),t))+'\n      </div>\n    </div>\n  </div>\n  <div class="flex-region list-page__list">\n    <table class="w-100"><tr>\n      <td class="table-list__header w-100">'+s(o((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"dashboards"))&&r(l,"dashboardsAllViews"))&&r(l,"layoutView"))&&r(l,"nameHeader"),t))+'</td>\n    </tr></table>\n    <div class="flex-region" data-list-region></div>\n  </div>\n  '},useData:!0}),regions:{list:{el:"[data-list-region]",regionClass:w.Z}}}),Jr=r.Z.extend({onBeforeStart(){this.showView(new Xr),this.getRegion("list").startPreloader()},beforeStart:()=>l().request("entities","fetch:dashboards:collection"),onStart(e,t){this.programs=t,this.showChildView("list",new Kr({collection:t}))}}),ec=g.View.extend({className:"dashboard__context-trail",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <a class="js-back dashboard__context-link">\n      '+c((d(n,"fas")||t&&d(t,"fas")||r).call(o,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:6},end:{line:3,column:28}}}))+c(e.lambda((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"dashboards"))&&d(l,"dashboardViews"))&&d(l,"contextTrailView"))&&d(l,"contextBackBtn"),t))+"\n    </a>\n    "+c((d(n,"fas")||t&&d(t,"fas")||r).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:5,column:4},end:{line:5,column:27}}}))+c("function"==typeof(s=null!=(s=d(n,"name")||(null!=t?d(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:5,column:27},end:{line:5,column:37}}}):s)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back"},onClickBack(){l().trigger("event-router","dashboards:all")}}),tc=g.View.extend({className:"flex-grow",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<iframe src="'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"embed_url")||(null!=t?s(t,"embed_url"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"embed_url",hash:{},data:i,loc:{start:{line:1,column:13},end:{line:1,column:28}}}):l)+'"></iframe>'},useData:!0})}),nc=g.View.extend({className:"dashboard__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n  <div class="dashboard__layout">\n    <div data-context-trail-region></div>\n    <div class="dashboard__iframe flex" data-dashboard-region></div>\n  </div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},dashboard:{el:"[data-dashboard-region]",regionClass:w.Z}}}),ac=r.Z.extend({onBeforeStart(){this.showView(new nc),this.getRegion("dashboard").startPreloader()},beforeStart:({dashboardId:e})=>l().request("entities","fetch:dashboards:model",e),onStart(e,t){this.showChildView("contextTrail",new ec({model:t})),this.showChildView("dashboard",new tc({model:t}))},onFail(){l().request("alert","show:error",h.ZP.dashboards.dashboardApp.notFound),l().trigger("event-router","dashboards:all"),this.stop()}}),ic=ci.Z.extend({routerAppName:"DashboardsApp",childApps:{dashboardsAll:Jr,dashboard:ac},eventRoutes:{"dashboards:all":{action:"showDashboardsAll",route:"dashboards",isList:!0},dashboard:{action:"showDashboard",route:"dashboards/:id"}},showDashboardsAll(){this.startCurrent("dashboardsAll")},showDashboard(e){this.startCurrent("dashboard",{dashboardId:e})}}),lc=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"programsAllViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),sc=g.View.extend({className:"table-list__item",tagName:"tr",template:p().template({1:function(e,t,n,a,i){return" is-published"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-on",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:23},end:{line:4,column:42}}}))},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-off",{name:"far",hash:{},data:i,loc:{start:{line:4,column:50},end:{line:4,column:70}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-list__cell w-60">'+c("function"==typeof(s=null!=(s=d(n,"name")||(null!=t?d(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:38},end:{line:2,column:48}}}):s)+'</td>\n    <td class="table-list__cell w-20 programs-list__published'+(null!=(l=d(n,"if").call(o,null!=t?d(t,"published"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:61},end:{line:3,column:98}}}))?l:"")+'">\n      '+(null!=(l=d(n,"if").call(o,null!=t?d(t,"published"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:4,column:6},end:{line:4,column:77}}}))?l:"")+"\n      "+c((d(n,"formatMessage")||t&&d(t,"formatMessage")||r).call(o,(d(n,"intlGet")||t&&d(t,"intlGet")||r).call(o,"programs.programsAllViews.itemView.published",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:78}}}),{name:"formatMessage",hash:{published:null!=t?d(t,"published"):t},data:i,loc:{start:{line:5,column:6},end:{line:5,column:100}}}))+'\n    </td>\n    <td class="table-list__cell w-20 programs-list__updated-ts">'+c((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||r).call(o,null!=t?d(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:64},end:{line:7,column:107}}}))+"</td>\n  "},useData:!0}),templateContext(){return{published:!!this.model.get("published_at")}},triggers:{click:"click"},onClick(){l().trigger("event-router","program:details",this.model.id)}}),oc=g.View.extend({className:"flex-region",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="list-page__header">\n      <div class="flex list-page__title">\n        <div class="flex list-page__title-filter">\n          <span class="list-page__title-icon">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"screwdriver-wrench",{name:"far",hash:{},data:i,loc:{start:{line:5,column:46},end:{line:5,column:74}}}))+"</span>"+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"programsAllViews"))&&d(l,"layoutView"))&&d(l,"title"),t))+'\n        </div>\n      </div>\n      <button class="u-margin--b-16 button-primary js-add">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"circle-plus",{name:"far",hash:{},data:i,loc:{start:{line:8,column:59},end:{line:8,column:80}}}))+"<span>"+r(c((l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"programsAllViews"))&&d(l,"addProgramBtn"),t))+'</span></button>\n    </div>\n    <div class="flex-region list-page__list">\n      <table class="w-100"><tr>\n        <td class="table-list__header w-60">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"programsAllViews"))&&d(l,"layoutView"))&&d(l,"programHeader"),t))+'</td>\n        <td class="table-list__header w-20">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"programsAllViews"))&&d(l,"layoutView"))&&d(l,"stateHeader"),t))+'</td>\n        <td class="table-list__header w-20">'+r(c((l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"programsAllViews"))&&d(l,"layoutView"))&&d(l,"updatedHeader"),t))+'</td>\n      </tr></table>\n      <div class="flex-region" data-list-region></div>\n    </div>\n  '},useData:!0}),regions:{list:{el:"[data-list-region]",regionClass:w.Z}},triggers:{"click .js-add":"click:add"}}),rc=g.CollectionView.extend({className:"table-list",tagName:"table",childView:sc,viewComparator:(e,t)=>(0,Ie.XQ)("desc",e.model.get("updated_at"),t.model.get("updated_at")),emptyView:lc}),cc=r.Z.extend({viewTriggers:{"click:add":"click:add"},onBeforeStart(){this.showView(new oc),this.getRegion("list").startPreloader()},beforeStart:()=>l().request("entities","fetch:programs:collection"),onStart(e,t){this.programs=t,this.showChildView("list",new rc({collection:t}))},onClickAdd(){const e=l().request("entities","programs:model",{}),t=l().request("sidebar","start","program",{program:e});this.listenTo(t,"stop",(()=>{e.isNew()||this.programs.add(e)}))}});var dc=n(6081),hc=n.n(dc),uc=n(7606),mc=n.n(uc),pc=n(2730),gc=n.n(pc);const fc=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="workflows__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"workflows"))&&s(l,"workflowsViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),wc=g.Behavior.extend({modelEvents:{editing:"onEditing",change:"onChange"},onChange(){this.view.render()},onEditing(e){this.$el.toggleClass("is-selected",e)},onInitialize(){this.view.model.isNew()&&this.$el.addClass("is-selected")}}),vc=g.View.extend({className:"table-list__item",tagName:"tr",behaviors:[wc],regions:{behavior:"[data-behavior-region]",owner:"[data-owner-region]",due:"[data-due-region]"},template:hc(),templateContext(){return{hasForm:this.model.getForm(),icon:this.model.hasOutreach()?"share-from-square":"file-lines"}},ui:{form:".js-form"},triggers:{click:"click","click @ui.form":"click:form"},onClick(){this.model.isNew()?l().trigger("event-router","program:action:new",this.model.get("_program")):l().trigger("event-router","program:action",this.model.get("_program"),this.model.id)},onClickForm(){const e=this.model.getForm();l().trigger("event-router","form:preview",e.id)},onRender(){this.showBehavior(),this.showOwner(),this.showDue()},showBehavior(){const e=this.model.isNew(),t=!!this.model.get("_program_flow"),n=new Zt({isConditionalAvailable:t,behavior:this.model.get("behavior"),isCompact:!0,state:{isDisabled:e}});this.listenTo(n,"change:status",(({behavior:e})=>{this.model.save({behavior:e})})),this.showChildView("behavior",n)},showOwner(){const e=this.model.isNew(),t=!!this.model.get("_program_flow"),n=new Fn({owner:this.model.getOwner(),isFromFlow:t,isCompact:!0,state:{isDisabled:e}});this.listenTo(n,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",n)},showDue(){const e=this.model.isNew(),t=new An({day:this.model.get("days_until_due"),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:day",(e=>{this.model.save({days_until_due:e})})),this.showChildView("due",t)}}),bc=g.View.extend({className:"table-list__item",tagName:"tr",behaviors:[wc],regions:{owner:"[data-owner-region]"},template:mc(),templateContext(){return{published:!!this.model.get("published_at"),isAutomated:this.model.get("behavior")===u.g6.AUTOMATED}},triggers:{click:"click"},onClick(){this.model.isNew()?l().trigger("event-router","programFlow:new",this.model.get("_program")):l().trigger("event-router","programFlow",this.model.id)},onRender(){this.showOwner()},showOwner(){const e=this.model.isNew(),t=new Kt({owner:this.model.getOwner(),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",t)}}),yc=g.CollectionView.extend({className:"table-list workflows__list",tagName:"table",childView:e=>"program-flows"===e.type?bc:vc,emptyView:fc,viewComparator:(e,t)=>(0,Ie.XQ)("desc",e.model.get("updated_at"),t.model.get("updated_at"))}),_c=g.View.extend({className:"flex-region workflows__content",regions:{content:{el:"[data-content-region]",regionClass:w.Z,replaceElement:!0},add:"[data-add-region]"},template:gc()}),xc=M.Z.extend({popWidth:248,picklistOptions:()=>({headingText:h.ZP.programs.program.workflows.workflowsViews.addActionHeading,itemClassName:"u-text--italic"}),viewOptions:{className:"button-primary",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||o).call(s,"circle-plus",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+"<span>"+r(e.lambda((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"programs"))&&c(l,"program"))&&c(l,"workflows"))&&c(l,"workflowsViews"))&&c(l,"addAction"),t))+"</span>"+r((c(n,"far")||t&&c(t,"far")||o).call(s,"angle-down",{name:"far",hash:{classes:"workflows__arrow"},data:i,loc:{start:{line:1,column:97},end:{line:1,column:144}}}))},useData:!0})},picklistEvents:{"picklist:item:select":"onSelect"},onSelect({model:e}){e.get("onSelect")()}}),kc=r.Z.extend({viewTriggers:{"click:add":"click:add"},onBeforeStart({program:e}){this.program=e,this.showView(new _c({model:e})),this.getRegion("content").startPreloader()},beforeStart:({program:e})=>[l().request("entities","fetch:programActions:collection:byProgram",{programId:e.id}),l().request("entities","fetch:programFlows:collection:byProgram",{programId:e.id})],onStart({program:e},t,n){this.collection=new(o().Collection)([...t.models,...n.models]),this.showChildView("content",new yc({collection:this.collection}));const a=new(o().Collection)([{onSelect:()=>{l().trigger("event-router","program:action:new",this.program.id)},icon:{type:"far",icon:"file-lines",classes:"workflows--add-action"},text:h.ZP.programs.program.workflows.workflowsApp.newAction},{onSelect:()=>{l().trigger("event-router","programFlow:new",this.program.id)},icon:{type:"fas",icon:"folder",classes:"workflows--add-flow"},text:h.ZP.programs.program.workflows.workflowsApp.newFlow}]);this.showChildView("add",new xc({collection:a}))},onEditItem(e){e.isNew()?this.collection.unshift(e):e.trigger("editing",!0)}}),Cc=r.Z.extend({beforeStart:({actionId:e,programId:t,flowId:n})=>e?l().request("entities","fetch:programActions:model",e):l().request("entities","programActions:model",{_program:t,_program_flow:n,_owner:null,days_until_due:null,behavior:u.g6.STANDARD,published_at:null,archived_at:null,outreach:u.Ww.DISABLED}),onFail(){l().request("alert","show:error",h.ZP.programs.program.action.actionApp.notFound),this.stop()},onStart(e,t){const n=l().request("sidebar","start","programAction",{action:t});this.listenTo(n,"stop",this.stop)}}),Sc=g.View.extend({modelEvents:{"change:name":"render"},className:"program__context-trail",template:p().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-back program__context-link">\n        '+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:30}}}))+r(e.lambda((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"programs"))&&c(l,"program"))&&c(l,"programViews"))&&c(l,"contextBackBtn"),t))+"\n      </a>\n      "+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:29}}}))+"\n    "},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=r(n,"if").call(o,null!=t?r(t,"hasLatestList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:7,column:11}}}))?l:"")+e.escapeExpression("function"==typeof(s=null!=(s=r(n,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:7,column:11},end:{line:7,column:21}}}):s)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back"},onClickBack(){l().request("history","go:latestList")},templateContext:()=>({hasLatestList:l().request("history","has:latestList")})}),Oc=g.View.extend({className:"program__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="program__layout">\n        <div data-context-trail-region></div>\n        <div data-content-region></div>\n    </div>\n    <div class="program__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},sidebar:"[data-sidebar-region]",content:{el:"[data-content-region]",regionClass:w.Z,replaceElement:!0}},onRender(){this.showChildView("contextTrail",new Sc({model:this.model}))}});var Tc=n(1315),Dc=n.n(Tc);const Vc=h.ZP.programs.program.sidebar.sidebarViews,Mc=g.View.extend({className:"program-sidebar",template:Dc(),regionClass:g.Region.extend({replaceElement:!0}),triggers:{"click @ui.menu":"click:menu"},ui:{menu:".js-menu"},modelEvents:{change:"render"},templateContext(){return{published:!!this.model.get("published_at")}},onClickMenu(){const e=new(o().Collection)([{onSelect:(0,a.bind)(this.triggerMethod,this,"edit"),icon:"pen-to-square",className:"program-sidebar__edit",text:Vc.menuOptions.edit}]);new v.Z({ui:this.ui.menu,uiView:this,headingText:Vc.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span class="+c(typeof(l=null!=(l=d(n,"className")||(null!=t?d(t,"className"):t))?l:o)===r?l.call(s,{name:"className",hash:{},data:i,loc:{start:{line:1,column:12},end:{line:1,column:27}}}):l)+">"+c((d(n,"far")||t&&d(t,"far")||o).call(s,null!=t?d(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:1,column:28},end:{line:1,column:40}}}))+c(typeof(l=null!=(l=d(n,"text")||(null!=t?d(t,"text"):t))?l:o)===r?l.call(s,{name:"text",hash:{},data:i,loc:{start:{line:1,column:40},end:{line:1,column:50}}}):l)+"</span>"},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()}}),Pc=Dl.extend({eventRoutes(){return{"program:details":(0,a.partial)(this.startCurrent,"workflows"),"program:action":this.startProgramAction,"program:action:new":this.startProgramAction,"programFlow:new":this.startFlowSidebar}},childApps:{workflows:kc,action:Cc},currentAppOptions(){return{region:this.getRegion("content"),program:this.getOption("program")}},onBeforeStart(){this.getRegion().startPreloader()},beforeStart:({programId:e})=>l().request("entities","fetch:programs:model",e),onStart({currentRoute:e},t){this.program=t,this.setView(new Oc({model:t})),this.showSidebar(),this.listenTo(l().channel("sidebar"),{show:this.emptySidebar,close:this.showSidebar}),this.startRoute(e),this.showView()},startProgramAction(e,t){const n=this.getChildApp("action");this.listenToOnce(n,{start(e,t){this.editList(t)},fail(){this.startCurrent("workflows")}}),this.startChildApp("action",{actionId:t,programId:e})},editList(e){const t=this.getCurrent()||this.startCurrent("workflows");t.isRunning()?t.triggerMethod("edit:item",e):this.listenToOnce(t,"start",(()=>{t.triggerMethod("edit:item",e)}))},startFlowSidebar(e){const t=l().request("entities","programFlows:model",{_program:e,_owner:null,published_at:null,archived_at:null,behavior:u.g6.STANDARD});l().request("sidebar","start","programFlow",{flow:t}),this.editList(t)},showSidebar(){const e=new Mc({model:this.program});this.listenTo(e,{edit:this.onEdit}),this.showChildView("sidebar",e)},emptySidebar(){this.getRegion("sidebar").empty()},onEdit(){l().request("sidebar","start","program",{program:this.program})}});var Ec=n(6675);const jc=g.Behavior.extend({options:{handle:".js-sort",item:".js-draggable"},initialize(){this.shouldDisable=this.getOption("shouldDisable")},shouldDisable(){return this.view.collection.length<2},collectionEvents:{"update change:id":"updateDisabled"},updateDisabled(){const e=this.shouldDisable();this.view.$el.toggleClass("is-draggable",!e),this.sortable.option("disabled",e)},onRender(){this.sortable&&this.sortable.destroy(),this.sortable=Ec.ZP.create(this.el,{handle:this.getOption("handle"),item:this.getOption("item"),direction:"vertical",onEnd:this.onEnd.bind(this),onStart:this.onStart.bind(this)}),this.updateDisabled()},onBeforeDestroy(){this.sortable.destroy()},onEnd({oldIndex:e,newIndex:t}){const n=this.view.collection.models[e];this.view.$el.removeClass("is-dragging"),this.view.collection.models.splice(e,1),this.view.collection.models.splice(t,0,n),this.view.triggerMethod("drag:end",n)},onStart({oldIndex:e}){const t=this.view.collection.models[e];this.view.$el.addClass("is-dragging"),this.view.triggerMethod("drag:start",t)}});var Ac=n(6551),Nc=n.n(Ac),Fc=n(9317),Ic=n.n(Fc);const Rc=g.View.extend({modelEvents:{"change:name":"render"},initialize({program:e}){this.program=e,this.listenTo(this.program,"change:name",this.render)},className:"program-flow__context-trail",template:p().template({1:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-back program-flow__context-link">\n        '+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:30}}}))+r(e.lambda((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"programs"))&&c(l,"program"))&&c(l,"flow"))&&c(l,"flowViews"))&&c(l,"contextBackBtn"),t))+"\n      </a>\n      "+r((c(n,"fas")||t&&c(t,"fas")||o).call(s,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:29}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=h(n,"if").call(o,null!=t?h(t,"hasLatestList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:7,column:11}}}))?l:"")+'    <a class="js-program program-flow__context-link">'+d(typeof(s=null!=(s=h(n,"programName")||(null!=t?h(t,"programName"):t))?s:r)===c?s.call(o,{name:"programName",hash:{},data:i,loc:{start:{line:8,column:53},end:{line:8,column:70}}}):s)+"</a>"+d((h(n,"fas")||t&&h(t,"fas")||r).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:74},end:{line:8,column:97}}}))+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:8,column:97},end:{line:8,column:107}}}):s)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back","click .js-program":"click:program"},onClickBack(){l().request("history","go:latestList")},onClickProgram(){l().trigger("event-router","program:details",this.program.id)},templateContext(){return{hasLatestList:l().request("history","has:latestList"),programName:this.program.get("name")}}}),Lc=g.View.extend({className:"program-flow__header",modelEvents:{editing:"onEditing",change:"render"},onEditing(e){this.$el.toggleClass("is-selected",e)},template:Ic(),regions:{behavior:"[data-behavior-region]",owner:"[data-owner-region]"},triggers:{click:"edit"},onRender(){this.showBehavior(),this.showOwner()},showBehavior(){const e=new Ut({behavior:this.model.get("behavior"),isCompact:!0});this.listenTo(e,"change:status",(({behavior:e})=>{this.model.save({behavior:e})})),this.showChildView("behavior",e)},showOwner(){const e=new Kt({owner:this.model.getOwner(),isCompact:!0});this.listenTo(e,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",e)}}),qc=g.View.extend({className:"program-flow__actions",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button-primary js-add-action">\n      '+s((o(n,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-plus",{name:"far",hash:{},data:i,loc:{start:{line:3,column:6},end:{line:3,column:27}}}))+"<span>"+s(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"programs"))&&o(l,"program"))&&o(l,"flow"))&&o(l,"flowViews"))&&o(l,"addActionBtn"),t))+"</span>\n    </button>\n  "},useData:!0}),triggers:{"click .js-add-action":"click:addAction"}}),Bc=g.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="program-flow__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"flow"))&&s(l,"flowViews"))&&s(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Hc=g.View.extend({modelEvents:{change:"render",editing:"onEditing"},className(){const e="table-list__item program-flow__action-item js-draggable";return this.model.isNew()?`${e} is-selected`:e},template:Nc(),templateContext(){return{hasForm:this.model.getForm(),icon:this.model.hasOutreach()?"share-from-square":"file-lines"}},tagName:"tr",regions:{behavior:"[data-behavior-region]",owner:"[data-owner-region]",due:"[data-due-region]"},ui:{form:".js-form"},triggers:{click:"click","click @ui.form":"click:form"},onClick(){this.model.isNew()?l().trigger("event-router","programFlow:action:new",this.model.get("_program_flow")):l().trigger("event-router","programFlow:action",this.model.get("_program_flow"),this.model.id)},onClickForm(){const e=this.model.getForm();l().trigger("event-router","form:preview",e.id)},onEditing(e){this.$el.toggleClass("is-selected",e)},onRender(){this.showBehavior(),this.showOwner(),this.showDue()},showDue(){const e=this.model.isNew(),t=new An({day:this.model.get("days_until_due"),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:day",(e=>{this.model.save({days_until_due:e})})),this.showChildView("due",t)},showBehavior(){const e=this.model.isNew(),t=new Zt({behavior:this.model.get("behavior"),isCompact:!0,state:{isDisabled:e}});this.listenTo(t,"change:status",(({behavior:e})=>{this.model.save({behavior:e})})),this.showChildView("behavior",t)},showOwner(){const e=this.model.isNew(),t=!!this.model.get("_program_flow"),n=new Fn({owner:this.model.getOwner(),isFromFlow:t,isCompact:!0,state:{isDisabled:e}});this.listenTo(n,"change:owner",(e=>{this.model.saveOwner(e)})),this.showChildView("owner",n)}}),Gc=g.CollectionView.extend({behaviors:[{behaviorClass:jc,shouldDisable(){return this.view.collection.length<2||this.view.collection.last().isNew()}}],collectionEvents:{"change:id":"onChangeId"},className:"table-list program-flow__list",tagName:"table",childView:Hc,emptyView:Bc,onDragEnd(){this.collection.updateSequences()},onChangeId(){this.collection.updateSequences()}}),Wc=g.View.extend({className:"program-flow__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="program-flow__layout">\n      <div data-context-trail-region></div>\n      <div data-header-region></div>\n      <div data-add-action-region></div>\n      <div data-action-list-region></div>\n    </div>\n    <div class="program-flow__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},header:"[data-header-region]",addAction:"[data-add-action-region]",sidebar:"[data-sidebar-region]",actionList:{el:"[data-action-list-region]",regionClass:w.Z,replaceElement:!0}}}),Zc=Dl.extend({routerAppName:"ProgramFlowApp",childApps:{action:Cc},eventRoutes:{"programFlow:action":"showActionSidebar","programFlow:action:new":"showActionSidebar"},onBeforeStart(){this.showView(new Wc)},beforeStart:({flowId:e})=>[l().request("entities","fetch:programs:model:byProgramFlow",e),l().request("entities","fetch:programFlows:model",e),l().request("entities","fetch:programActions:collection:byProgramFlow",e)],onFail(){l().trigger("event-router","notFound"),this.stop()},onStart({currentRoute:e},t,n,a){this.program=t,this.flow=n,this.actions=a,this.maintainFlowActions(),this.showChildView("contextTrail",new Rc({model:this.flow,program:this.program})),this.showHeader(),this.showAddAction(),this.showActionList(),this.showProgramSidebar(),this.startRoute(e)},maintainFlowActions(){this.listenTo(this.actions,"change:id destroy",(()=>{const e=this.actions.map((({id:e})=>({id:e})));this.flow.set("_program_actions",e)}))},showHeader(){const e=new Lc({model:this.flow});this.listenTo(e,{edit:this.onEditFlow}),this.showChildView("header",e)},showAddAction(){const e=new qc;this.listenTo(e,{"click:addAction":()=>{l().trigger("event-router","programFlow:action:new",this.flow.id)}}),this.showChildView("addAction",e)},showActionList(){this.showChildView("actionList",new Gc({collection:this.actions}))},showProgramSidebar(){const e=new Mc({model:this.program});this.listenTo(e,{edit:this.onEditProgram}),this.showChildView("sidebar",e)},showActionSidebar(e,t){const n=this.getChildApp("action");this.listenToOnce(n,{start(e,t){this.editAction(t)}}),this.startChildApp("action",{actionId:t,flowId:e})},editAction(e){if(e.isNew())return e.set({sequence:this.actions.length}),void this.actions.add(e);e.trigger("editing",!0)},onEditProgram(){l().request("sidebar","start","program",{program:this.program})},onEditFlow(){l().request("sidebar","start","programFlow",{flow:this.flow})}}),$c=ci.Z.extend({routerAppName:"ProgramsApp",childApps:{programsAll:cc,program:Pc,programflow:Zc},eventRoutes:{"programs:all":{action:"showProgramsAll",route:"programs",isList:!0},"program:details":{action:"showProgram",route:"program/:id"},"program:action":{action:"showProgram",route:"program/:id/action/:id"},"program:action:new":{action:"showProgram",route:"program/:id/action"},"programFlow:new":{action:"showProgram",route:"program/:id/flow"},programFlow:{action:"showProgramFlow",route:"program-flow/:id"},"programFlow:action":{action:"showProgramFlow",route:"program-flow/:id/action/:id"},"programFlow:action:new":{action:"showProgramFlow",route:"program-flow/:id/action"}},showProgramsAll(){this.startCurrent("programsAll")},showProgram(e){this.startRoute("program",{programId:e})},showProgramFlow(e){this.startRoute("programflow",{flowId:e})}}),zc=r.Z.extend({routers:[],onBeforeStart(){this.currentWorkspace=l().request("bootstrap","currentWorkspace"),this.getRegion("content").empty(),this.isRestarting()||(new Ji({region:this.getRegion("nav")}),new si({region:this.getRegion("sidebar")}),this.listenTo(l().channel("bootstrap"),"change:workspace",this.restart))},beforeStart(){return[l().request("entities","fetch:clinicians:byWorkspace",this.currentWorkspace.id),l().request("entities","fetch:states:collection"),l().request("entities","fetch:forms:collection")]},onStart(e,t){this.currentWorkspace.updateClinicians(t);const n=l().request("bootstrap","currentUser");this.startPatientsMain(n),n.can("dashboards:view")&&this.initRouter(ic),n.can("clinicians:manage")&&this.initRouter(Yr),n.can("programs:manage")&&this.initRouter($c),this.initFormsApp(),(0,a.defer)((()=>{o().history.loadUrl(),(0,a.some)(this.routers,(e=>e.isRunning()))||l().trigger("event-router","notFound")}))},onStop(){(0,a.invoke)(this.routers,"destroy"),this.routers=[]},initRouter(e){const t=new e({region:this.getRegion("content")});return this.routers.push(t),t},startPatientsMain(e){e.can("app:schedule:reduced")?this.initRouter(Nr):this.initRouter(Pr)},initFormsApp(){const e=this.initRouter(Tl);this.listenTo(e,{start:(0,a.partial)(this.toggleNav,!1),stop:(0,a.partial)(this.toggleNav,!0)})},toggleNav(e){this.isRunning()&&this.getView().toggleNav(!!e)}})},1529:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button-secondary  date-select__date'+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"isDisabled"):t,{name:"unless",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:50},end:{line:3,column:97}}}))?l:"")+(null!=(l=h(n,"if").call(o,null!=t?h(t,"hasError"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:97},end:{line:3,column:130}}}))?l:"")+'" tabindex="-1" '+(null!=(l=h(n,"if").call(o,null!=t?h(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:146},end:{line:3,column:179}}}))?l:"")+">"+c((h(n,"far")||t&&h(t,"far")||r).call(o,"calendar-days",{name:"far",hash:{},data:i,loc:{start:{line:3,column:180},end:{line:3,column:203}}}))+"<span>"+c(typeof(s=null!=(s=h(n,"date")||(null!=t?h(t,"date"):t))?s:r)===d?s.call(o,{name:"date",hash:{},data:i,loc:{start:{line:3,column:209},end:{line:3,column:217}}}):s)+"</span></button>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:3,column:233},end:{line:3,column:258}}}):s)+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"isDisabled"):t,{name:"unless",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:0},end:{line:4,column:130}}}))?l:"")+"\n"},2:function(e,t,n,a,i){return" button__group"},4:function(e,t,n,a,i){return" has-error"},6:function(e,t,n,a,i){return"disabled"},8:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button-secondary--compact button__group js-cancel">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-xmark",{name:"far",hash:{},data:i,loc:{start:{line:4,column:88},end:{line:4,column:110}}}))+"</button>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div data-select-region></div>\n"+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"date"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:0},end:{line:5,column:7}}}))?l:"")},useData:!0})},3952:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"clinicianModal"))&&r(l,"clinicianModalTemplate"))&&r(l,"name"),t))+'</div><div class="flex-grow" data-name-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"clinicianModal"))&&r(l,"clinicianModalTemplate"))&&r(l,"email"),t))+'</div><div class="flex-grow" data-email-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"clinicianModal"))&&r(l,"clinicianModalTemplate"))&&r(l,"role"),t))+'</div><div class="modal__form-component" data-role-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"clinicianModal"))&&r(l,"clinicianModalTemplate"))&&r(l,"team"),t))+'</div><div class="modal__form-component" data-team-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"clinicianModal"))&&r(l,"clinicianModalTemplate"))&&r(l,"workspaces"),t))+'</div><div class="modal__form-component list-manager__wrapper" data-workspaces-region></div></div>\n'},useData:!0})},1437:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=e.lambda,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">Clinician</h3>\n    </div>\n    <div>\n      <button class="button--icon js-close">'+s((r(n,"fas")||t&&r(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:7,column:44},end:{line:7,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-email-region></div>\n    <div data-save-region></div>\n\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"sidebar"))&&r(l,"clinicianSidebarTemplate"))&&r(l,"state"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"sidebar"))&&r(l,"clinicianSidebarTemplate"))&&r(l,"role"),t))+'</h4><div class="flex-grow" data-role-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"sidebar"))&&r(l,"clinicianSidebarTemplate"))&&r(l,"team"),t))+'</h4><div class="flex-grow" data-team-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"clinicians"))&&r(l,"sidebar"))&&r(l,"clinicianSidebarTemplate"))&&r(l,"workspaces"),t))+'</h4><div class="flex-grow clinician-sidebar__workspaces" data-workspaces-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8"></h4><div class="flex-grow" data-info-region></div></div>\n  </div>\n</div>\n<div data-timestamps-region></div>\n'},useData:!0})},4341:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"patientModal"))&&r(l,"patientModalTemplate"))&&r(l,"firstName"),t))+'</div><div class="flex-grow" data-first-name-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"patientModal"))&&r(l,"patientModalTemplate"))&&r(l,"lastName"),t))+'</div><div class="flex-grow" data-last-name-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"patientModal"))&&r(l,"patientModalTemplate"))&&r(l,"dateOfBirth"),t))+'</div><div data-dob-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"patientModal"))&&r(l,"patientModalTemplate"))&&r(l,"sex"),t))+'</div><div data-sex-region></div></div>\n<div class="u-margin--b-8 flex"><div class="modal__form-label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"patientModal"))&&r(l,"patientModalTemplate"))&&r(l,"workspaces"),t))+'</div><div class="modal__form-component" data-workspaces-region></div></div>\n'},useData:!0})},8367:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="patient__action-attachment">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"paperclip",{name:"far",hash:{},data:i,loc:{start:{line:13,column:65},end:{line:13,column:84}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell">\n  <span class="patient__action-icon">'+c((h(n,"far")||t&&h(t,"far")||r).call(o,null!=t?h(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:2,column:37},end:{line:2,column:49}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:56},end:{line:2,column:81}}}):s)+'<span class="patient__action-name">'+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:3,column:37},end:{line:3,column:47}}}):s)+'</span>\n</td>\n<td class="table-list__cell patient__list-meta">\n  <span class="table-list__meta" data-state-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:58},end:{line:6,column:83}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:58},end:{line:7,column:83}}}):s)+'<span class="table-list__meta">'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:8,column:33},end:{line:8,column:58}}}):s)+"<span data-due-date-region></span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:38},end:{line:9,column:63}}}):s)+"<span data-due-time-region></span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:38},end:{line:10,column:63}}}):s)+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:9},end:{line:11,column:34}}}):s)+'<span class="table-list__meta" data-form-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:57},end:{line:12,column:82}}}):s)+(null!=(l=h(n,"if").call(o,null!=t?h(t,"hasAttachments"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:13,column:2},end:{line:13,column:98}}}))?l:"")+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:98},end:{line:13,column:123}}}):s)+'<span class="patient__action-ts">'+c((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:14,column:35},end:{line:14,column:78}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:14,column:85},end:{line:14,column:110}}}):s)+"</td>\n"},useData:!0})},4331:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <td class="table-list__cell">\n      <span class="patient__flow-icon">'+c((u(n,"fas")||t&&u(t,"fas")||r).call(o,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:39},end:{line:2,column:55}}}))+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:62},end:{line:2,column:87}}}):s)+'<span class="patient__action-name">'+c(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:3,column:41},end:{line:3,column:51}}}):s)+'</span>\n    </td>\n    <td class="table-list__cell patient__list-meta">\n      <span class="table-list__meta" data-state-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:62},end:{line:6,column:87}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:62},end:{line:7,column:87}}}):s)+'<progress class="progress-bar patient__flow-progress" value='+c(h(null!=(l=null!=t?u(t,"_progress"):t)?u(l,"complete"):l,t))+" max="+c(h(null!=(l=null!=t?u(t,"_progress"):t)?u(l,"total"):l,t))+"></progress>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:8,column:128},end:{line:8,column:153}}}):s)+'<span class="patient__action-ts">'+c((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(o,null!=t?u(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:9,column:39},end:{line:9,column:82}}}))+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:89},end:{line:9,column:114}}}):s)+"</td>\n"},useData:!0})},1711:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"patient"))&&s(l,"dashboard"))&&s(l,"dashboardViews"))&&s(l,"newAction"),t))+"</em>"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="patient__action-attachment">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"paperclip",{name:"far",hash:{},data:i,loc:{start:{line:16,column:65},end:{line:16,column:84}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell">\n  <span class="patient__action-icon">'+c((h(n,"far")||t&&h(t,"far")||r).call(o,null!=t?h(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:2,column:37},end:{line:2,column:49}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:56},end:{line:2,column:81}}}):s)+'<span class="patient__action-name">\n    '+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:14}}}):s)+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:39}}}):s)+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:5,column:105}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell patient__list-meta">\n  <span class="table-list__meta" data-state-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:58},end:{line:9,column:83}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:58},end:{line:10,column:83}}}):s)+'<span class="table-list__meta">'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:33},end:{line:11,column:58}}}):s)+"<span data-due-date-region></span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:38},end:{line:12,column:63}}}):s)+"<span data-due-time-region></span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:38},end:{line:13,column:63}}}):s)+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:14,column:9},end:{line:14,column:34}}}):s)+'<span class="table-list__meta" data-form-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:15,column:57},end:{line:15,column:82}}}):s)+(null!=(l=h(n,"if").call(o,null!=t?h(t,"hasAttachments"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:16,column:2},end:{line:16,column:98}}}))?l:"")+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:98},end:{line:16,column:123}}}):s)+'<span class="patient__action-ts">'+c((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:17,column:35},end:{line:17,column:78}}}))+"</span>\n</td>\n"},useData:!0})},9409:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell">\n  <span class="patient__flow-icon">'+c((u(n,"fas")||t&&u(t,"fas")||r).call(o,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:35},end:{line:2,column:51}}}))+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:58},end:{line:2,column:83}}}):s)+'<span class="patient__action-name">'+c(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:3,column:37},end:{line:3,column:47}}}):s)+'</span>\n</td>\n<td class="table-list__cell patient__list-meta">\n  <span class="table-list__meta">'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:33},end:{line:6,column:58}}}):s)+'<span class="patient__flow-status action--'+c(h(null!=(l=null!=t?u(t,"stateOptions"):t)?u(l,"color"):l,t))+'">'+c((u(n,"fa")||t&&u(t,"fa")||r).call(o,null!=(l=null!=t?u(t,"stateOptions"):t)?u(l,"iconType"):l,null!=(l=null!=t?u(t,"stateOptions"):t)?u(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:7,column:72},end:{line:7,column:118}}}))+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:125},end:{line:7,column:150}}}):s)+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:8,column:9},end:{line:8,column:34}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:58},end:{line:9,column:83}}}):s)+'<progress class="progress-bar patient__flow-progress" value='+c(h(null!=(l=null!=t?u(t,"_progress"):t)?u(l,"complete"):l,t))+" max="+c(h(null!=(l=null!=t?u(t,"_progress"):t)?u(l,"total"):l,t))+"></progress>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:124},end:{line:10,column:149}}}):s)+'<span class="patient__action-ts">'+c((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(o,null!=t?u(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:11,column:35},end:{line:11,column:78}}}))+"</span>\n</td>\n"},useData:!0})},5446:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div>\n  <span class="patient__tab--selected">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"dashboard"))&&r(l,"dashboardViews"))&&r(l,"dashboardBtn"),t))+'</span>\n  <button class="patient__tab js-archive">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"dashboard"))&&r(l,"dashboardViews"))&&r(l,"archiveBtn"),t))+'</button>\n</div>\n<div class="patient__actions" data-add-workflow-region>\n  <span class="button-primary">\n    <span class="js-loading">\n      '+o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-plus",{name:"far",hash:{},data:i,loc:{start:{line:12,column:6},end:{line:12,column:27}}}))+"\n      <span>"+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"dashboard"))&&r(l,"dashboardViews"))&&r(l,"actionLoading"),t))+"</span>\n    </span>\n  </span>\n</div>\n<div data-content-region></div>\n"},useData:!0})},8790:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"patient"))&&s(l,"dashboard"))&&s(l,"dashboardViews"))&&s(l,"newAction"),t))+"</em>"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="patient__action-attachment">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"paperclip",{name:"far",hash:{},data:i,loc:{start:{line:17,column:65},end:{line:17,column:84}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell table-list__item-check js-no-click"><span data-check-region></span></td>\n<td class="table-list__cell">\n  <span class="patient__action-icon">'+c((h(n,"far")||t&&h(t,"far")||r).call(o,null!=t?h(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:3,column:37},end:{line:3,column:49}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:3,column:56},end:{line:3,column:81}}}):s)+'<span class="patient__action-name">\n    '+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:5,column:4},end:{line:5,column:14}}}):s)+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:5,column:14},end:{line:5,column:39}}}):s)+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:6,column:4},end:{line:6,column:105}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell patient__list-meta">\n  <span class="table-list__meta" data-state-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:58},end:{line:10,column:83}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:58},end:{line:11,column:83}}}):s)+'<span class="table-list__meta">'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:33},end:{line:12,column:58}}}):s)+"<span data-due-date-region></span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:38},end:{line:13,column:63}}}):s)+"<span data-due-time-region></span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:14,column:38},end:{line:14,column:63}}}):s)+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:15,column:9},end:{line:15,column:34}}}):s)+'<span class="table-list__meta" data-form-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:57},end:{line:16,column:82}}}):s)+(null!=(l=h(n,"if").call(o,null!=t?h(t,"hasAttachments"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:17,column:2},end:{line:17,column:98}}}))?l:"")+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:17,column:98},end:{line:17,column:123}}}):s)+'<span class="patient__action-ts">'+c((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:18,column:35},end:{line:18,column:78}}}))+"</span>\n</td>\n"},useData:!0})},2252:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h1 class="patient-flow__name">'+c((u(n,"fas")||t&&u(t,"fas")||r).call(o,"folder-open",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:31},end:{line:1,column:52}}}))+" "+c(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:53},end:{line:1,column:63}}}):s)+'</h1>\n<table class="table-list">\n  <td class="patient-flow__details">'+c(typeof(s=null!=(s=u(n,"details")||(null!=t?u(t,"details"):t))?s:r)===d?s.call(o,{name:"details",hash:{},data:i,loc:{start:{line:3,column:36},end:{line:3,column:49}}}):s)+"</td>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:3,column:54},end:{line:3,column:79}}}):s)+'<td class="patient-flow__meta">\n    <span class="table-list__meta" data-state-region></span>\n    <span class="table-list__meta" data-owner-region></span>\n    <progress class="js-progress progress-bar patient-flow__progress" value='+c(h(null!=(l=null!=t?u(t,"_progress"):t)?u(l,"complete"):l,t))+" max="+c(h(null!=(l=null!=t?u(t,"_progress"):t)?u(l,"total"):l,t))+"></progress>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:138},end:{line:7,column:163}}}):s)+"</td>\n</table>\n"},useData:!0})},2603:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){return'      <div class="flex u-margin--r-24" data-select-all-region></div>\n'},3:function(e,t,n,a,i){return" is-reduced"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="list-page__header">\n  <div class="flex list-page__title">\n    <div data-title-region></div>\n    <div class="schedule__list-search" data-search-region></div>\n  </div>\n  <div class="list-page__filters flex">\n'+(null!=(l=o(n,"unless").call(s,null!=t?o(t,"isReduced"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:7,column:4},end:{line:9,column:15}}}))?l:"")+'    <div class="flex flex-align-center w-100" data-filters-region></div>\n    <div class="schedule__count'+(null!=(l=o(n,"if").call(s,null!=t?o(t,"isReduced"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:11,column:31},end:{line:11,column:66}}}))?l:"")+'" data-count-region></div>\n    <div class="flex u-text--nowrap" data-date-filter-region></div>\n  </div>\n  <table class="w-100" data-table-region></table>\n</div>\n<div class="flex-region list-page__list" data-list-region></div>\n'},useData:!0})},5473:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.lambda,r=e.escapeExpression,c=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,h="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"shared"))&&u(l,"bulkEdit"))&&u(l,"bulkEditViews"))&&u(l,"bulkEditActionBodyTemplate"))&&u(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n<div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"shared"))&&u(l,"bulkEdit"))&&u(l,"bulkEditViews"))&&u(l,"bulkEditActionBodyTemplate"))&&u(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n<div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"shared"))&&u(l,"bulkEdit"))&&u(l,"bulkEditViews"))&&u(l,"bulkEditActionBodyTemplate"))&&u(l,"dueDateLabel"),t))+'</h4>\n  <div class="flex flex-grow">'+r(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:d)===h?s.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:30},end:{line:4,column:55}}}):s)+'<div class="flex-grow" data-due-date-region></div>'+r(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:d)===h?s.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:5,column:54},end:{line:5,column:79}}}):s)+'<div class="flex-grow" data-due-time-region></div>'+r(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:d)===h?s.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:54},end:{line:6,column:79}}}):s)+'</div>\n</div>\n<div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"shared"))&&u(l,"bulkEdit"))&&u(l,"bulkEditViews"))&&u(l,"bulkEditActionBodyTemplate"))&&u(l,"durationLabel"),t))+'</h4><div class="flex-grow" data-duration-region></div></div>\n'},useData:!0})},8210:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex"><h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"shared"))&&r(l,"bulkEdit"))&&r(l,"bulkEditViews"))&&r(l,"bulkEditFlowBodyTemplate"))&&r(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n<div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"shared"))&&r(l,"bulkEdit"))&&r(l,"bulkEditViews"))&&r(l,"bulkEditFlowBodyTemplate"))&&r(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n<div class="flex u-margin--t-8 u-margin--b-8"><h4 class="sidebar__label u-margin--t-8"></h4><div class="flex-grow" data-apply-owner-region></div></div>\n'},useData:!0})},4790:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+o(e.lambda((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"patients"))&&h(l,"sidebar"))&&h(l,"action"))&&h(l,"actionDetailsTemplate"))&&h(l,"placeholder"),t))+'">'+o(typeof(s=null!=(s=h(n,"details")||(null!=t?h(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:1,column:148},end:{line:1,column:161}}}):s)+'</textarea>\n<div class="textarea-flex__container input-secondary sidebar__details js-spacer">'+o(typeof(s=null!=(s=h(n,"details")||(null!=t?h(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):s)+" </div>\n"},useData:!0})},7144:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="action-sidebar__name">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"name")||(null!=t?s(t,"name"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:2,column:34},end:{line:2,column:44}}}):l)+"</div>\n"},3:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-primary textarea-flex__input js-input"'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:61},end:{line:4,column:95}}}))?l:"")+(null!=(l=h(n,"if").call(o,null!=t?h(t,"isNew"):t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:95},end:{line:4,column:196}}}))?l:"")+">"+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:4,column:197},end:{line:4,column:207}}}):s)+'</textarea>\n<div class="textarea-flex__container input-primary js-spacer">'+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:5,column:62},end:{line:5,column:72}}}):s)+" </div>\n"},4:function(e,t,n,a,i){return" disabled"},6:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' placeholder="'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionNameTemplate"))&&s(l,"placeholder"),t))+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"isReadOnly"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:1,column:0},end:{line:6,column:7}}}))?l:""},useData:!0})},6197:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">'+o((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(l,"patients.sidebar.action.actionSidebarTemplate.headingText",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:51},end:{line:4,column:120}}}),{name:"formatMessage",hash:{outreach:null!=t?r(t,"outreach"):t},data:i,loc:{start:{line:4,column:35},end:{line:4,column:140}}}))+'</h3>\n    </div>\n    <div>\n      <span class="u-margin--r-8" data-menu-region></span>\n      <button class="button--icon js-close">'+o((r(n,"fas")||t&&r(t,"fas")||s).call(l,"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16" data-action-region></div>\n  <div data-form-region></div>\n  <div data-attachments-region></div>\n  <div class="action-sidebar__activity" data-activity-region></div>\n</div>\n<div class="u-margin--t-16" data-comment-region></div>\n<div data-timestamps-region></div>\n'},useData:!0})},5195:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="u-margin--t-8 u-text-align--right">\n  <button class="button--link js-response">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"formSharingTemplate"))&&s(l,"buttonResponseText"),t))+"</button>\n</div>\n"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="u-margin--t-8">\n  <button class="button--link js-undo-cancel"'+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"isDone"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i,loc:{start:{line:24,column:45},end:{line:24,column:75}}}))?l:"")+">"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"formSharingTemplate"))&&s(l,"buttonUndoText"),t))+"</button>\n</div>\n"},4:function(e,t,n,a,i){return" disabled"},6:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="u-margin--t-8">\n  <button class="button--link js-cancel">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"formSharingTemplate"))&&s(l,"buttonCancelText"),t))+"</button>\n</div>\n"},8:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.lambda,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex u-margin--t-8">\n  <div class="flex-grow">\n    <button class="button--link js-cancel"'+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isDone"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i,loc:{start:{line:37,column:42},end:{line:37,column:72}}}))?l:"")+">"+r(o((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"sidebar"))&&c(l,"action"))&&c(l,"formSharingTemplate"))&&c(l,"buttonCancelText"),t))+'</button>\n  </div>\n  <button class="button--link js-share"'+(null!=(l=c(n,"if").call(s,null!=t?c(t,"isDone"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i,loc:{start:{line:39,column:39},end:{line:39,column:69}}}))?l:"")+">"+r(o((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"sidebar"))&&c(l,"action"))&&c(l,"formSharingTemplate"))&&c(l,"buttonShareText"),t))+"</button>\n</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex">\n  <h3 class="sidebar__heading flex-grow">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"share-from-square",{name:"far",hash:{classes:"u-margin--r-8"},data:i,loc:{start:{line:2,column:41},end:{line:2,column:92}}}))+r(c((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"formSharingTemplate"))&&d(l,"label"),t))+'</h3>\n</div>\n<div class="flex u-margin--t-16">\n  <h4 class="sidebar__label--inset u-margin--t-8">'+r(c((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"formSharingTemplate"))&&d(l,"recipientLabel"),t))+'</h4>\n  <div class="flex-grow"><button class="button-secondary w-100" disabled>'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"user-plus",{name:"far",hash:{},data:i,loc:{start:{line:6,column:73},end:{line:6,column:92}}}))+"<span>"+r(c(null!=(l=null!=t?d(t,"patient"):t)?d(l,"first_name"):l,t))+" "+r(c(null!=(l=null!=t?d(t,"patient"):t)?d(l,"last_name"):l,t))+'</span></button></div>\n</div>\n<div class="flex u-margin--t-8">\n  <h4 class="sidebar__label--inset u-margin--t-8">'+r(c((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"formSharingTemplate"))&&d(l,"stateLabel"),t))+'</h4>\n  <div class="flex-grow action-sidebar__sharing-state">\n    <span class="action--'+r(c(null!=(l=null!=t?d(t,"stateOptions"):t)?d(l,"color"):l,t))+'">'+r((d(n,"fa")||t&&d(t,"fa")||o).call(s,null!=(l=null!=t?d(t,"stateOptions"):t)?d(l,"iconType"):l,null!=(l=null!=t?d(t,"stateOptions"):t)?d(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:11,column:51},end:{line:11,column:98}}}))+"<span>"+r((d(n,"formatMessage")||t&&d(t,"formatMessage")||o).call(s,(d(n,"intlGet")||t&&d(t,"intlGet")||o).call(s,"patients.sidebar.action.formSharingTemplate.stateText",{name:"intlGet",hash:{},data:i,loc:{start:{line:12,column:28},end:{line:12,column:93}}}),{name:"formatMessage",hash:{sharing:null!=t?d(t,"sharing"):t},data:i,loc:{start:{line:12,column:12},end:{line:12,column:111}}}))+"</span>\n    </span>\n  </div>\n</div>"+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isResponded"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:16,column:0},end:{line:20,column:8}}}))?l:"")+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isCanceled"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:22,column:0},end:{line:26,column:8}}}))?l:"")+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isWaiting"):t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i,loc:{start:{line:28,column:0},end:{line:32,column:8}}}))?l:"")+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isError"):t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i,loc:{start:{line:34,column:0},end:{line:41,column:8}}}))?l:"")},useData:!0})},3220:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="sidebar--no-results">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"flow"))&&s(l,"flowSidebarTemplate"))&&s(l,"noDetails"),t))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.lambda,r=e.escapeExpression,c=null!=t?t:e.nullContext||{},d=e.hooks.helperMissing,h="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">'+r(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"flow"))&&u(l,"flowSidebarTemplate"))&&u(l,"headingText"),t))+'</h3>\n    </div>\n    <div>\n      <span class="u-margin--r-8" data-menu-region></span>\n      <button class="button--icon js-close">'+r((u(n,"fas")||t&&u(t,"fas")||d).call(c,"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div class="patient-flow-sidebar__name">'+r(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:d)===h?s.call(c,{name:"name",hash:{},data:i,loc:{start:{line:12,column:44},end:{line:12,column:54}}}):s)+'</div>\n    <div class="sidebar__details">'+r(typeof(s=null!=(s=u(n,"details")||(null!=t?u(t,"details"):t))?s:d)===h?s.call(c,{name:"details",hash:{},data:i,loc:{start:{line:13,column:34},end:{line:13,column:47}}}):s)+(null!=(l=u(n,"unless").call(c,null!=t?u(t,"details"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:13,column:47},end:{line:13,column:181}}}))?l:"")+'</div>\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"flow"))&&u(l,"flowSidebarTemplate"))&&u(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"flow"))&&u(l,"flowSidebarTemplate"))&&u(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n    <div data-permission-region></div>\n  </div>\n  <div class="u-margin--t-24">\n    <h3 class="sidebar__heading">'+r(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"flow"))&&u(l,"flowSidebarTemplate"))&&u(l,"activityHeadingText"),t))+'</h3>\n    <div class="u-margin--t-8 sidebar__activity" data-activity-region></div>\n  </div>\n</div>\n<div data-timestamps-region></div>\n'},useData:!0})},2729:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,r=e.escapeExpression,c="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <span class="worklist-patient-sidebar__user-icon">'+r((d(n,"far")||t&&d(t,"far")||o).call(s,"address-card",{name:"far",hash:{},data:i,loc:{start:{line:4,column:56},end:{line:4,column:78}}}))+'</span>\n    </div>\n    <div class="worklist-patient-sidebar__close-icon">\n      <button class="button--icon js-close">'+r((d(n,"fas")||t&&d(t,"fas")||o).call(s,"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:7,column:44},end:{line:7,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="worklist-patient-sidebar__patient-info js-patient">\n    <div class="worklist-patient-sidebar__patient-name">'+r(typeof(l=null!=(l=d(n,"first_name")||(null!=t?d(t,"first_name"):t))?l:o)===c?l.call(s,{name:"first_name",hash:{},data:i,loc:{start:{line:11,column:56},end:{line:11,column:72}}}):l)+" "+r(typeof(l=null!=(l=d(n,"last_name")||(null!=t?d(t,"last_name"):t))?l:o)===c?l.call(s,{name:"last_name",hash:{},data:i,loc:{start:{line:11,column:73},end:{line:11,column:88}}}):l)+'</div>\n    <div>\n      <button class="button--link">View Patient Dashboard</button>\n    </div>\n  </div>\n  <div class="worklist-patient-sidebar__widgets" data-widgets-region></div>\n</div>\n'},useData:!0})},3969:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="worklist-list__flow-name">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"flowName")||(null!=t?s(t,"flowName"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"flowName",hash:{},data:i,loc:{start:{line:15,column:58},end:{line:15,column:72}}}):l)+"</div>"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="worklist-list__display-icon u-margin--l-8">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"paperclip",{name:"far",hash:{},data:i,loc:{start:{line:28,column:80},end:{line:28,column:99}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lambda,h="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell table-list__item-check js-no-click"><span data-check-region></span></td>\n<td class="table-list__cell w-15">\n  <span class="worklist-list__patient-sidebar-icon">\n    <button class="button-secondary--compact js-patient-sidebar-button">\n      '+c((u(n,"far")||t&&u(t,"far")||r).call(o,"address-card",{name:"far",hash:{},data:i,loc:{start:{line:5,column:6},end:{line:5,column:28}}}))+'&#8203;\n    </button>\n  </span>\n  <div class="worklist-list__patient-name js-patient">\n    '+c(d(null!=(l=null!=t?u(t,"patient"):t)?u(l,"first_name"):l,t))+" "+c(d(null!=(l=null!=t?u(t,"patient"):t)?u(l,"last_name"):l,t))+'&#8203;\n  </div>\n</td>\n<td class="table-list__cell worklist-list__item-name">\n  <span class="worklist-list__action-icon">'+c((u(n,"far")||t&&u(t,"far")||r).call(o,null!=t?u(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:13,column:43},end:{line:13,column:55}}}))+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:62},end:{line:13,column:87}}}):s)+'<div class="worklist-list__name">\n    '+(null!=(l=u(n,"if").call(o,null!=t?u(t,"flowName"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:15,column:4},end:{line:15,column:85}}}))?l:"")+"&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:15,column:92},end:{line:15,column:117}}}):s)+c(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===h?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:16,column:4},end:{line:16,column:14}}}):s)+"&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:21},end:{line:16,column:46}}}):s)+'</div>\n</td>\n<td class="table-list__cell worklist-list__meta">\n  <span class="worklist-list__display-icon u-margin--r-16" data-details-region></span>&#8203;'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:20,column:93},end:{line:20,column:118}}}):s)+'<span class="table-list__meta" data-state-region></span>&#8203;<span class="worklist-list__search-helper">'+c(typeof(s=null!=(s=u(n,"state")||(null!=t?u(t,"state"):t))?s:r)===h?s.call(o,{name:"state",hash:{},data:i,loc:{start:{line:21,column:108},end:{line:21,column:119}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:21,column:133},end:{line:21,column:158}}}):s)+'<span class="table-list__meta" data-owner-region></span>&#8203;<span class="worklist-list__search-helper">'+c(typeof(s=null!=(s=u(n,"owner")||(null!=t?u(t,"owner"):t))?s:r)===h?s.call(o,{name:"owner",hash:{},data:i,loc:{start:{line:22,column:108},end:{line:22,column:119}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:22,column:133},end:{line:22,column:158}}}):s)+'<span class="table-list__meta">'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:23,column:33},end:{line:23,column:58}}}):s)+"<span data-due-date-region></span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:24,column:38},end:{line:24,column:63}}}):s)+"<span data-due-time-region></span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:25,column:38},end:{line:25,column:63}}}):s)+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:26,column:9},end:{line:26,column:34}}}):s)+'<span class="table-list__meta" data-form-region></span>'+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:27,column:57},end:{line:27,column:82}}}):s)+"&#8203;\n  "+(null!=(l=u(n,"if").call(o,null!=t?u(t,"hasAttachments"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:28,column:2},end:{line:28,column:113}}}))?l:"")+"&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:28,column:120},end:{line:28,column:145}}}):s)+'</td>\n<td class="table-list__cell worklist-list__action-ts w-7-5">'+c((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(o,null!=t?u(t,"created_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:30,column:60},end:{line:30,column:103}}}))+'&#8203;</td>\n<td class="table-list__cell worklist-list__action-ts w-7-5">'+c((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(o,null!=t?u(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:31,column:60},end:{line:31,column:103}}}))+"&#8203;</td>\n"},useData:!0})},6844:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="worklist-list__flow-name">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"flowName")||(null!=t?s(t,"flowName"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"flowName",hash:{},data:i,loc:{start:{line:15,column:58},end:{line:15,column:72}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lambda,h="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell table-list__item-check js-no-click"><span data-check-region></span></td>\n<td class="table-list__cell w-15">\n  <span class="worklist-list__patient-sidebar-icon">\n    <button class="button-secondary--compact js-patient-sidebar-button">\n      '+c((u(n,"far")||t&&u(t,"far")||r).call(o,"address-card",{name:"far",hash:{},data:i,loc:{start:{line:5,column:6},end:{line:5,column:28}}}))+'&#8203;\n    </button>\n  </span>\n  <div class="worklist-list__patient-name js-patient">\n    '+c(d(null!=(l=null!=t?u(t,"patient"):t)?u(l,"first_name"):l,t))+" "+c(d(null!=(l=null!=t?u(t,"patient"):t)?u(l,"last_name"):l,t))+'&#8203;\n  </div>\n</td>\n<td class="table-list__cell w-30">\n  <span class="worklist-list__flow-icon">'+c((u(n,"fas")||t&&u(t,"fas")||r).call(o,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:13,column:41},end:{line:13,column:57}}}))+"</span>"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:64},end:{line:13,column:89}}}):s)+'<div class="worklist-list__name">\n    '+(null!=(l=u(n,"if").call(o,null!=t?u(t,"flowName"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:15,column:4},end:{line:15,column:85}}}))?l:"")+"&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:15,column:92},end:{line:15,column:117}}}):s)+c(typeof(s=null!=(s=u(n,"name")||(null!=t?u(t,"name"):t))?s:r)===h?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:16,column:4},end:{line:16,column:14}}}):s)+"&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:21},end:{line:16,column:46}}}):s)+'</div>\n</td>\n<td class="table-list__cell w-40">\n  <span class="table-list__meta" data-state-region></span>&#8203;<span class="worklist-list__search-helper">'+c(typeof(s=null!=(s=u(n,"state")||(null!=t?u(t,"state"):t))?s:r)===h?s.call(o,{name:"state",hash:{},data:i,loc:{start:{line:20,column:108},end:{line:20,column:119}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:20,column:133},end:{line:20,column:158}}}):s)+'<span class="table-list__meta" data-owner-region></span>&#8203;<span class="worklist-list__search-helper">'+c(typeof(s=null!=(s=u(n,"owner")||(null!=t?u(t,"owner"):t))?s:r)===h?s.call(o,{name:"owner",hash:{},data:i,loc:{start:{line:21,column:108},end:{line:21,column:119}}}):s)+"</span>&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:21,column:133},end:{line:21,column:158}}}):s)+'<progress class="progress-bar worklist-list__flow-progress" value='+c(d(null!=(l=null!=t?u(t,"_progress"):t)?u(l,"complete"):l,t))+" max="+c(d(null!=(l=null!=t?u(t,"_progress"):t)?u(l,"total"):l,t))+"></progress>&#8203;"+c(typeof(s=null!=(s=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?s:r)===h?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:22,column:137},end:{line:22,column:162}}}):s)+'</td>\n<td class="table-list__cell worklist-list__action-ts w-7-5">'+c((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(o,null!=t?u(t,"created_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:24,column:60},end:{line:24,column:103}}}))+'&#8203;</td>\n<td class="table-list__cell worklist-list__action-ts w-7-5">'+c((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(o,null!=t?u(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:25,column:60},end:{line:25,column:103}}}))+"&#8203;</td>\n"},useData:!0})},9794:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<div class="list-page__header">\n  <div class="flex list-page__title">\n    <div data-title-region></div>\n    <div class="worklist-list__toggle" data-toggle-region></div>\n    <div class="u-margin--l-16" data-search-region></div>\n  </div>\n  <div class="list-page__filters flex">\n    <div class="flex u-margin--r-24" data-select-all-region></div>\n    <div class="flex flex-align-center w-100" data-filters-region></div>\n    <div class="flex">\n      <span class="worklist-list__count" data-count-region></span>\n      <span class="u-margin--r-16 u-text--nowrap" data-date-filter-region></span>\n      <span class="worklist-list__filter-sort" data-sort-region></span>\n    </div>\n  </div>\n  <table class="worklist__header w-100 js-list-header" data-table-region></table>\n</div>\n<div class="flex-region list-page__list js-list" data-list-region></div>\n'},useData:!0})},6360:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"tableHeaderTemplate"))&&s(l,"flowHeader"),t))+"\n"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"tableHeaderTemplate"))&&s(l,"actionHeader"),t))+"\n"},5:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"tableHeaderTemplate"))&&s(l,"flowAttrHeader"),t))+"\n"},7:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"worklist"))&&s(l,"tableHeaderTemplate"))&&s(l,"actionAttrHeader"),t))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__header table-list__item-check"></td>\n<td class="table-list__header w-15">'+o(s((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"worklist"))&&c(l,"tableHeaderTemplate"))&&c(l,"patientHeader"),t))+'</td>\n<td class="table-list__header worklist-list__name-header">\n'+(null!=(l=c(n,"if").call(r,null!=t?c(t,"isFlowList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:4,column:2},end:{line:8,column:9}}}))?l:"")+'</td>\n<td class="table-list__header worklist-list__meta-header">\n'+(null!=(l=c(n,"if").call(r,null!=t?c(t,"isFlowList"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i,loc:{start:{line:11,column:2},end:{line:15,column:9}}}))?l:"")+'</td>\n<td class="table-list__header w-7-5">'+o(s((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"worklist"))&&c(l,"tableHeaderTemplate"))&&c(l,"createdHeader"),t))+'</td>\n<td class="table-list__header w-7-5">'+o(s((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"worklist"))&&c(l,"tableHeaderTemplate"))&&c(l,"updatedHeader"),t))+"</td>\n"},useData:!0})},6551:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"flow"))&&s(l,"actionItemTemplate"))&&s(l,"newProgramFlowAction"),t))+"</em>"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <button class="js-form button-secondary--compact">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:15,column:58},end:{line:15,column:90}}}))+"</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell w-40">\n  <span class="program-flow__action-icon">'+c((h(n,"far")||t&&h(t,"far")||r).call(o,null!=t?h(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:2,column:42},end:{line:2,column:54}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:61},end:{line:2,column:86}}}):s)+'<span class="program-flow__action-name">\n    '+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:14}}}):s)+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:39}}}):s)+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:5,column:115}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell w-60">\n  <div class="pos--relative">\n    <span class="table-list__meta" data-behavior-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:63},end:{line:10,column:88}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:60},end:{line:11,column:85}}}):s)+'<span class="table-list__meta" data-due-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:58},end:{line:12,column:83}}}):s)+'<span class="table-list__meta">\n'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"hasForm"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:14,column:6},end:{line:16,column:14}}}))?l:"")+"    </span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:17,column:11},end:{line:17,column:36}}}):s)+'<span class="program-flow__action-ts">'+c((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:18,column:42},end:{line:18,column:85}}}))+'</span>\n    <span class="program-flow__sort-handle js-sort">'+c((h(n,"fas")||t&&h(t,"fas")||r).call(o,"grip-vertical",{name:"fas",hash:{},data:i,loc:{start:{line:19,column:52},end:{line:19,column:75}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:19,column:82},end:{line:19,column:107}}}):s)+"</div>\n</td>\n"},useData:!0})},9317:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"details")||(null!=t?s(t,"details"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"details",hash:{},data:i,loc:{start:{line:5,column:4},end:{line:5,column:17}}}):l)+"\n"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <button class="program-flow__meta button-secondary">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"pen-to-square",{name:"far",hash:{},data:i,loc:{start:{line:7,column:56},end:{line:7,column:79}}}))+" Add Details</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h1 class="program-flow__name">'+c((h(n,"fas")||t&&h(t,"fas")||r).call(o,"folder-open",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:31},end:{line:1,column:52}}}))+" "+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:53},end:{line:1,column:63}}}):s)+'</h1>\n<div>\n  <p class="program-flow__details">\n'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"details"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:4,column:2},end:{line:8,column:9}}}))?l:"")+"  </p>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:6},end:{line:9,column:31}}}):s)+'<span class="program-flow__meta" data-behavior-region></span>\n  <span class="program-flow__meta" data-owner-region></span>\n</div>\n'},useData:!0})},1315:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(l=null!=(l=s(n,"details")||(null!=t?s(t,"details"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"details",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:35}}}):l)},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="u-text--italic">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"sidebar"))&&s(l,"sidebarLayoutTemplate"))&&s(l,"noDetails"),t))+"</span>"},5:function(e,t,n,a,i){return" is-published"},7:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-on",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:21},end:{line:8,column:40}}}))},9:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-off",{name:"far",hash:{},data:i,loc:{start:{line:8,column:48},end:{line:8,column:68}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d=e.lambda,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h1 class="program-sidebar__name">'+c("function"==typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:34},end:{line:1,column:44}}}):s)+'</h1>\n<button class="button--icon program-sidebar__context-menu js-menu">'+c((h(n,"far")||t&&h(t,"far")||r).call(o,"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:2,column:67},end:{line:2,column:85}}}))+'</button>\n<div class="u-margin--t-16">\n  <div class="program-sidebar__heading">'+c(d((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"programs"))&&h(l,"program"))&&h(l,"sidebar"))&&h(l,"sidebarLayoutTemplate"))&&h(l,"details"),t))+"</div>\n  <div>"+(null!=(l=h(n,"if").call(o,null!=t?h(t,"details"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:5,column:7},end:{line:5,column:154}}}))?l:"")+'</div>\n  <div class="program-sidebar__heading">'+c(d((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"programs"))&&h(l,"program"))&&h(l,"sidebar"))&&h(l,"sidebarLayoutTemplate"))&&h(l,"state"),t))+'</div>\n  <div class="program-sidebar__published'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"published"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:7,column:40},end:{line:7,column:77}}}))?l:"")+'">\n    '+(null!=(l=h(n,"if").call(o,null!=t?h(t,"published"):t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i,loc:{start:{line:8,column:4},end:{line:8,column:75}}}))?l:"")+"\n    "+c((h(n,"formatMessage")||t&&h(t,"formatMessage")||r).call(o,(h(n,"intlGet")||t&&h(t,"intlGet")||r).call(o,"programs.program.sidebar.sidebarLayoutTemplate.published",{name:"intlGet",hash:{},data:i,loc:{start:{line:9,column:20},end:{line:9,column:88}}}),{name:"formatMessage",hash:{published:null!=t?h(t,"published"):t},data:i,loc:{start:{line:9,column:4},end:{line:9,column:110}}}))+"\n  </div>\n</div>\n"},useData:!0})},6081:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"workflows"))&&s(l,"actionItemTemplate"))&&s(l,"newProgramAction"),t))+"</em>"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button class="js-form button-secondary--compact">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square-poll-horizontal",{name:"far",hash:{},data:i,loc:{start:{line:14,column:56},end:{line:14,column:88}}}))+"</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell w-40">\n  <span class="workflows__action-icon">'+c((h(n,"far")||t&&h(t,"far")||r).call(o,null!=t?h(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:2,column:39},end:{line:2,column:51}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:58},end:{line:2,column:83}}}):s)+'<span class="workflows__action-name">\n    '+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:14}}}):s)+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:39}}}):s)+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:5,column:116}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell w-60">\n  <span class="table-list__meta" data-behavior-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:61},end:{line:9,column:86}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:58},end:{line:10,column:83}}}):s)+'<span class="table-list__meta" data-due-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:56},end:{line:11,column:81}}}):s)+'<span class="table-list__meta">\n'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"hasForm"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:13,column:4},end:{line:15,column:12}}}))?l:"")+"  </span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:9},end:{line:16,column:34}}}):s)+'<span class="workflows__item-ts">'+c((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:17,column:35},end:{line:17,column:78}}}))+"</span>\n</td>\n"},useData:!0})},7606:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"workflows"))&&s(l,"flowItemTemplate"))&&s(l,"newProgramFlow"),t))+"</em>"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"isAutomated"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i,loc:{start:{line:11,column:6},end:{line:15,column:13}}}))?l:""},4:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span class="workflows-action--automated">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"bolt",{name:"far",hash:{},data:i,loc:{start:{line:12,column:50},end:{line:12,column:64}}}))+"</span>\n"},6:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span class="workflows-action--published">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-play",{name:"far",hash:{},data:i,loc:{start:{line:14,column:50},end:{line:14,column:71}}}))+"</span>\n"},8:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="workflows-action--draft">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"pen-to-square",{name:"far",hash:{},data:i,loc:{start:{line:17,column:44},end:{line:17,column:67}}}))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell w-40">\n  <span class="workflows__flow-icon">'+c((h(n,"fas")||t&&h(t,"fas")||r).call(o,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:37},end:{line:2,column:53}}}))+"</span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:60},end:{line:2,column:85}}}):s)+'<span class="workflows__flow-name">\n    '+c(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===d?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:14}}}):s)+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:39}}}):s)+(null!=(l=h(n,"unless").call(o,null!=t?h(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:5,column:112}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell w-60">\n  <span class="table-list__meta workflows__flow-status">\n'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"published"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(8,i,0),data:i,loc:{start:{line:10,column:4},end:{line:18,column:11}}}))?l:"")+"  </span>"+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:19,column:9},end:{line:19,column:34}}}):s)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(s=null!=(s=h(n,"remove_whitespace")||(null!=t?h(t,"remove_whitespace"):t))?s:r)===d?s.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:20,column:58},end:{line:20,column:83}}}):s)+'<span class="workflows__item-ts">'+c((h(n,"formatDateTime")||t&&h(t,"formatDateTime")||r).call(o,null!=t?h(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:21,column:35},end:{line:21,column:78}}}))+"</span>\n</td>\n"},useData:!0})},2730:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div>\n  <span class="workflows__tab--selected">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"program"))&&s(l,"workflows"))&&s(l,"layoutTemplate"))&&s(l,"workflowsLabel"),t))+'</span>\n</div>\n<div class="workflows__actions" data-add-region></div>\n<div data-content-region></div>\n'},useData:!0})},4611:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+o(e.lambda((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"programs"))&&h(l,"sidebar"))&&h(l,"action"))&&h(l,"actionDetailsTemplate"))&&h(l,"placeholder"),t))+'">'+o(typeof(s=null!=(s=h(n,"details")||(null!=t?h(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:1,column:148},end:{line:1,column:161}}}):s)+'</textarea>\n<div class="textarea-flex__container input-secondary sidebar__details js-spacer">'+o(typeof(s=null!=(s=h(n,"details")||(null!=t?h(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):s)+" </div>\n"},useData:!0})},2223:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' placeholder="'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionNameTemplate"))&&s(l,"placeholder"),t))+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-primary textarea-flex__input js-input"'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"isNew"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:61},end:{line:1,column:162}}}))?l:"")+">"+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:163},end:{line:1,column:173}}}):s)+'</textarea>\n<div class="textarea-flex__container input-primary js-spacer">'+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:62},end:{line:2,column:72}}}):s)+" </div>\n"},useData:!0})},6047:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="sidebar__section">\n      <div><h3 class="sidebar__section-label">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"actionSidebarTemplate"))&&s(l,"tagsLabel"),t))+"</h3></div>\n      <div data-tags-region></div>\n    </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading" data-heading-region>'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarTemplate"))&&d(l,"headingText"),t))+'</h3>\n    </div>\n    <div>\n      <button class="button--icon u-margin--r-8 js-menu">'+o((d(n,"far")||t&&d(t,"far")||c).call(r,"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:7,column:57},end:{line:7,column:75}}}))+'</button>\n      <button class="button--icon js-close">'+o((d(n,"fas")||t&&d(t,"fas")||c).call(r,"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-details-region></div>\n    <div data-save-region></div>\n    <div class="flex u-margin--t-16">\n      <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarTemplate"))&&d(l,"publishedLabel"),t))+'</h4>\n      <div class="flex-grow" data-published-region></div>\n    </div>\n    <div class="flex u-margin--t-8">\n      <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarTemplate"))&&d(l,"archivedLabel"),t))+'</h4>\n      <div class="flex-grow" data-archived-region></div>\n    </div>\n    <div class="flex u-margin--t-8">\n      <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarTemplate"))&&d(l,"behaviorLabel"),t))+'</h4>\n      <div class="flex-grow" data-behavior-region></div>\n    </div>\n    <div class="flex u-margin--t-8">\n      <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarTemplate"))&&d(l,"ownerLabel"),t))+'</h4>\n      <div class="flex-grow" data-owner-region></div>\n    </div>\n    <div class="flex u-margin--t-8">\n      <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarTemplate"))&&d(l,"dueDayLabel"),t))+'</h4>\n      <div class="flex-grow" data-due-region></div>\n    </div>\n    <div class="flex u-margin--t-8">\n      <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionSidebarTemplate"))&&d(l,"formLabel"),t))+'</h4>\n      <div class="flex-grow" data-form-region></div>\n    </div>\n    <div class="u-margin--t-24" data-form-sharing-region></div>\n    <div class="u-margin--t-24" data-allow-uploads-region></div>\n'+(null!=(l=d(n,"if").call(r,null!=t?d(t,"canTag"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:41,column:4},end:{line:46,column:11}}}))?l:"")+"  </div>\n</div>\n<div data-timestamps-region></div>\n"},useData:!0})},5168:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+o(e.lambda((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"programs"))&&h(l,"sidebar"))&&h(l,"flow"))&&h(l,"flowDetailsTemplate"))&&h(l,"placeholder"),t))+'">'+o(typeof(s=null!=(s=h(n,"details")||(null!=t?h(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:1,column:144},end:{line:1,column:157}}}):s)+'</textarea>\n<div class="textarea-flex__container input-secondary sidebar__details js-spacer">'+o(typeof(s=null!=(s=h(n,"details")||(null!=t?h(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):s)+" </div>\n"},useData:!0})},7200:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' placeholder="'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"flow"))&&s(l,"flowNameTemplate"))&&s(l,"placeholder"),t))+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-primary textarea-flex__input js-input"'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"isNew"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:61},end:{line:1,column:158}}}))?l:"")+">"+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:159},end:{line:1,column:169}}}):s)+'</textarea>\n<div class="textarea-flex__container input-primary js-spacer">'+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:62},end:{line:2,column:72}}}):s)+" </div>\n"},useData:!0})},8687:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="sidebar__section">\n      <div><h3 class="sidebar__section-label">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"flow"))&&s(l,"flowSidebarTemplate"))&&s(l,"tagsLabel"),t))+"</h3></div>\n      <div data-tags-region></div>\n    </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarTemplate"))&&d(l,"headingText"),t))+'</h3>\n    </div>\n    <div>\n      <button class="button--icon u-margin--r-8 js-menu">'+o((d(n,"far")||t&&d(t,"far")||c).call(r,"ellipsis",{name:"far",hash:{},data:i,loc:{start:{line:7,column:57},end:{line:7,column:75}}}))+'</button>\n      <button class="button--icon js-close">'+o((d(n,"fas")||t&&d(t,"fas")||c).call(r,"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-details-region></div>\n    <div data-save-region></div>\n    <div class="flex u-margin--t-16">\n      <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarTemplate"))&&d(l,"publishedLabel"),t))+'</h4>\n      <div class="flex-grow" data-published-region></div>\n    </div>\n    <div class="flex u-margin--t-8">\n      <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarTemplate"))&&d(l,"archivedLabel"),t))+'</h4>\n      <div class="flex-grow" data-archived-region></div>\n    </div>\n    <div class="flex u-margin--t-8">\n      <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarTemplate"))&&d(l,"behaviorLabel"),t))+'</h4>\n      <div class="flex-grow" data-behavior-region></div>\n    </div>\n    <div class="flex u-margin--t-8">\n      <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"programs"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowSidebarTemplate"))&&d(l,"ownerLabel"),t))+'</h4>\n      <div class="flex-grow" data-owner-region></div>\n    </div>\n'+(null!=(l=d(n,"if").call(r,null!=t?d(t,"canTag"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:31,column:4},end:{line:36,column:11}}}))?l:"")+"  </div>\n</div>\n<div data-timestamps-region></div>\n"},useData:!0})},9949:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+o(e.lambda((l=(l=(l=(l=(l=i&&h(i,"intl"))&&h(l,"programs"))&&h(l,"sidebar"))&&h(l,"program"))&&h(l,"programDetailsTemplate"))&&h(l,"placeholder"),t))+'">'+o(typeof(s=null!=(s=h(n,"details")||(null!=t?h(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:1,column:150},end:{line:1,column:163}}}):s)+'</textarea>\n<div class="textarea-flex__container input-secondary sidebar__details js-spacer">'+o(typeof(s=null!=(s=h(n,"details")||(null!=t?h(t,"details"):t))?s:c)===d?s.call(r,{name:"details",hash:{},data:i,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):s)+" </div>\n"},useData:!0})},318:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){return" has-error"},3:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' placeholder="'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"programs"))&&s(l,"sidebar"))&&s(l,"program"))&&s(l,"programNameTemplate"))&&s(l,"placeholder"),t))+'"'},5:function(e,t,n,a,i){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form-error u-margin--b-4">'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"error")||(null!=t?s(t,"error"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"error",hash:{},data:i,loc:{start:{line:5,column:51},end:{line:5,column:62}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s,o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="pos--relative">\n  <textarea class="input-primary textarea-flex__input js-input'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"error"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:62},end:{line:2,column:92}}}))?l:"")+'"'+(null!=(l=h(n,"if").call(o,null!=t?h(t,"isNew"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:93},end:{line:2,column:196}}}))?l:"")+">"+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:197},end:{line:2,column:207}}}):s)+'</textarea>\n  <div class="textarea-flex__container input-primary js-spacer">'+d(typeof(s=null!=(s=h(n,"name")||(null!=t?h(t,"name"):t))?s:r)===c?s.call(o,{name:"name",hash:{},data:i,loc:{start:{line:3,column:64},end:{line:3,column:74}}}):s)+" </div>\n</div>\n"+(null!=(l=h(n,"if").call(o,null!=t?h(t,"error"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:0},end:{line:5,column:75}}}))?l:"")+"\n"},useData:!0})},4269:(e,t,n)=>{var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,s=e.lambda,o=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="flex u-margin--t-16">\n        <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"program"))&&r(l,"programSidebarTemplate"))&&r(l,"publishedLabel"),t))+'</h4>\n        <div class="flex-grow" data-published-region></div>\n      </div>\n      <div class="flex u-margin--t-8">\n        <h4 class="sidebar__label u-margin--t-8">'+o(s((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"program"))&&r(l,"programSidebarTemplate"))&&r(l,"archivedLabel"),t))+'</h4>\n        <div class="flex-grow" data-archived-region></div>\n      </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,s=e.escapeExpression,o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">'+s(e.lambda((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"programs"))&&r(l,"sidebar"))&&r(l,"program"))&&r(l,"programSidebarTemplate"))&&r(l,"headingText"),t))+'</h3>\n    </div>\n    <div>\n      <button class="button--icon js-close">'+s((r(n,"fas")||t&&r(t,"fas")||e.hooks.helperMissing).call(o,"xmark",{name:"fas",hash:{},data:i,loc:{start:{line:7,column:44},end:{line:7,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-details-region></div>\n    <div data-save-region></div>\n'+(null!=(l=r(n,"unless").call(o,null!=t?r(t,"isNew"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:14,column:4},end:{line:23,column:15}}}))?l:"")+"  </div>\n</div>\n<div data-timestamps-region></div>\n"},useData:!0})}}]);