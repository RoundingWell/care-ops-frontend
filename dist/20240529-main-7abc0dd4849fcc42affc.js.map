{"version":3,"file":"20240529-main-7abc0dd4849fcc42affc.js","mappings":"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","sources":["webpack://care-ops-frontend/webpack/runtime/chunk loaded","webpack://care-ops-frontend/webpack/runtime/load script","webpack://care-ops-frontend/./src/js/config.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/display.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/catchUserErrors.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/monitor.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/polyfills.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/boot/init.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/getGlobalObject.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/byteUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/getZoneJsOriginalValue.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/timer.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/functionUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/serialisation/jsonStringify.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/objectUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/context/customerDataTracker.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/typeUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/mergeInto.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/serialisation/sanitize.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/observable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/context/contextManager.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/trackingConsent.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/experimentalFeatures.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/numberUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/timeUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/browser/addEventListener.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/context/storeContextManager.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/encoder.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/stackTrace/computeStackTrace.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/stackTrace/handlingStack.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/error/error.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/configuration/intakeSites.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/sendToExtension.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/connectivity/connectivity.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/telemetry/rawTelemetryEvent.types.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/telemetry/telemetry.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/user/user.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/boot/displayAlreadyInitializedError.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/arrayUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/boundedBuffer.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/transport/eventBridge.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/stringUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/browser/cookie.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/synthetics/syntheticsWorkerValues.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/browserDetection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/storeStrategies/sessionStoreStrategy.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/sessionConstants.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/sessionState.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/oldCookiesMigration.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/storeStrategies/sessionInCookie.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/storeStrategies/sessionInLocalStorage.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/sessionStoreOperations.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/sessionStore.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/urlPolyfill.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/configuration/endpointBuilder.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/configuration/tags.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/configuration/configuration.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/configuration/transportConfiguration.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/matchOption.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/tracing/tracer.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/configuration.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/boot/preStartRum.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/browser/pageExitObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/browser/domMutationObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/browser/runOnReadyState.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/resource/resourceUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/browser/htmlDomUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/tracing/getDocumentTraceId.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/browser/performanceCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/error/error.types.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/eventRateLimiter/createEventRateLimiter.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/limitModification.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/assembly.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/syntheticsContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/abstractLifeCycle.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/browser/xhrObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/lifeCycle.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/valueHistory.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/viewContexts.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/instrumentMethod.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/browser/fetchObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/responseUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/readBytesFromStream.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/requestCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/trackEventCounts.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/waitPageActivityEnd.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/browser/polyfills.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/action/getActionNameFromElement.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/getSelectorFromElement.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/action/clickChain.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/action/listenActionEvents.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/action/computeFrustration.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/action/trackClickActions.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/action/actionCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/error/trackRuntimeError.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/console/consoleObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/report/reportObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/resource/matchRequestTiming.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/resource/resourceCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackFirstContentfulPaint.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackLargestContentfulPaint.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/interactionCountPolyfill.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackInitialViewMetrics.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackNavigationTimings.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackFirstHidden.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackFirstInput.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/browser/viewportObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackInteractionToNextPaint.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/browser/scroll.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackScrollMetrics.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackCommonViewMetrics.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackLoadingTime.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackCumulativeLayoutShift.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/trackViews.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/viewCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/view/trackViewEventCounts.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/sessionManager.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumSessionManager.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/transport/batch.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/transport/sendWithRetryStrategy.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/transport/httpRequest.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/transport/startBatchWithReplica.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/transport/flushController.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/urlContexts.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/featureFlagContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/startCustomerDataTelemetry.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/pageStateHistory.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/browser/cookieObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/ciVisibilityContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/replayStats.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/constants.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/privacy.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializationUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/types/sessionReplayConstants.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeStyleSheets.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeAttribute.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeAttributes.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeNode.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeDocument.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/eventsUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/viewports.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/assembly.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackMove.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackMouseInteraction.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackScroll.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackViewportResize.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackMediaInteraction.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackStyleSheet.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackFocus.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackFrustration.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackViewEnd.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackInput.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/mutationBatch.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackMutation.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/record.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/elementsScrollPositions.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/shadowRootsController.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/startFullSnapshots.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/recordIds.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/segmentCollection/segment.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/segmentCollection/segmentCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/segmentCollection/buildReplayPayload.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/boot/isBrowserSupported.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/getSessionReplayLink.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/getSessionReplayUrl.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/deflate/deflateEncoder.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/deflate/deflateWorker.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/entries/main.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/boot/recorderApi.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/boot/startRecording.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/startRecordBridge.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/boot/rumPublicApi.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/commonContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/boot/startRum.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/transport/startRumEventBridge.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/transport/startRumBatch.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/browser/locationChangeObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/displayContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/longTask/longTaskCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/error/errorCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/error/trackConsoleError.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/error/trackReportError.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/vital/vitalCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/internalContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/logger.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/configuration.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/boot/logsPublicApi.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/logsSessionManager.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/contexts/rumInternalContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/console/consoleCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/report/reportCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/networkError/networkErrorCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/lifeCycle.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/logger/loggerCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/entries/main.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/contexts/commonContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/boot/preStartLogs.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/boot/startLogs.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/reportError.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/logsTelemetry.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/runtimeError/runtimeErrorCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/contexts/internalContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/assembly.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/transport/startLogsBridge.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/transport/startLogsBatch.js","webpack://care-ops-frontend/./src/js/datadog.js","webpack://care-ops-frontend/./src/js/utils/root-route.js","webpack://care-ops-frontend/./node_modules/core-js/internals/a-callable.js","webpack://care-ops-frontend/./node_modules/core-js/internals/a-possible-prototype.js","webpack://care-ops-frontend/./node_modules/core-js/internals/an-instance.js","webpack://care-ops-frontend/./node_modules/core-js/internals/an-object.js","webpack://care-ops-frontend/./node_modules/core-js/internals/array-includes.js","webpack://care-ops-frontend/./node_modules/core-js/internals/classof-raw.js","webpack://care-ops-frontend/./node_modules/core-js/internals/classof.js","webpack://care-ops-frontend/./node_modules/core-js/internals/copy-constructor-properties.js","webpack://care-ops-frontend/./node_modules/core-js/internals/create-non-enumerable-property.js","webpack://care-ops-frontend/./node_modules/core-js/internals/create-property-descriptor.js","webpack://care-ops-frontend/./node_modules/core-js/internals/create-property.js","webpack://care-ops-frontend/./node_modules/core-js/internals/define-built-in.js","webpack://care-ops-frontend/./node_modules/core-js/internals/define-global-property.js","webpack://care-ops-frontend/./node_modules/core-js/internals/descriptors.js","webpack://care-ops-frontend/./node_modules/core-js/internals/detach-transferable.js","webpack://care-ops-frontend/./node_modules/core-js/internals/document-create-element.js","webpack://care-ops-frontend/./node_modules/core-js/internals/dom-exception-constants.js","webpack://care-ops-frontend/./node_modules/core-js/internals/engine-is-browser.js","webpack://care-ops-frontend/./node_modules/core-js/internals/engine-is-deno.js","webpack://care-ops-frontend/./node_modules/core-js/internals/engine-is-node.js","webpack://care-ops-frontend/./node_modules/core-js/internals/engine-user-agent.js","webpack://care-ops-frontend/./node_modules/core-js/internals/engine-v8-version.js","webpack://care-ops-frontend/./node_modules/core-js/internals/enum-bug-keys.js","webpack://care-ops-frontend/./node_modules/core-js/internals/error-stack-clear.js","webpack://care-ops-frontend/./node_modules/core-js/internals/error-stack-installable.js","webpack://care-ops-frontend/./node_modules/core-js/internals/export.js","webpack://care-ops-frontend/./node_modules/core-js/internals/fails.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-bind-context.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-bind-native.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-call.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-name.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-uncurry-this-accessor.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-uncurry-this-clause.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-uncurry-this.js","webpack://care-ops-frontend/./node_modules/core-js/internals/get-built-in.js","webpack://care-ops-frontend/./node_modules/core-js/internals/get-iterator-method.js","webpack://care-ops-frontend/./node_modules/core-js/internals/get-iterator.js","webpack://care-ops-frontend/./node_modules/core-js/internals/get-method.js","webpack://care-ops-frontend/./node_modules/core-js/internals/global.js","webpack://care-ops-frontend/./node_modules/core-js/internals/has-own-property.js","webpack://care-ops-frontend/./node_modules/core-js/internals/hidden-keys.js","webpack://care-ops-frontend/./node_modules/core-js/internals/ie8-dom-define.js","webpack://care-ops-frontend/./node_modules/core-js/internals/indexed-object.js","webpack://care-ops-frontend/./node_modules/core-js/internals/inherit-if-required.js","webpack://care-ops-frontend/./node_modules/core-js/internals/inspect-source.js","webpack://care-ops-frontend/./node_modules/core-js/internals/internal-state.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-array-iterator-method.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-callable.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-constructor.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-forced.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-null-or-undefined.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-object.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-possible-prototype.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-pure.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-symbol.js","webpack://care-ops-frontend/./node_modules/core-js/internals/iterate-simple.js","webpack://care-ops-frontend/./node_modules/core-js/internals/iterate.js","webpack://care-ops-frontend/./node_modules/core-js/internals/iterator-close.js","webpack://care-ops-frontend/./node_modules/core-js/internals/iterators.js","webpack://care-ops-frontend/./node_modules/core-js/internals/length-of-array-like.js","webpack://care-ops-frontend/./node_modules/core-js/internals/make-built-in.js","webpack://care-ops-frontend/./node_modules/core-js/internals/map-helpers.js","webpack://care-ops-frontend/./node_modules/core-js/internals/math-trunc.js","webpack://care-ops-frontend/./node_modules/core-js/internals/normalize-string-argument.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-define-property.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-get-own-property-names.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-is-prototype-of.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-keys-internal.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-property-is-enumerable.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-set-prototype-of.js","webpack://care-ops-frontend/./node_modules/core-js/internals/ordinary-to-primitive.js","webpack://care-ops-frontend/./node_modules/core-js/internals/own-keys.js","webpack://care-ops-frontend/./node_modules/core-js/internals/regexp-flags.js","webpack://care-ops-frontend/./node_modules/core-js/internals/regexp-get-flags.js","webpack://care-ops-frontend/./node_modules/core-js/internals/require-object-coercible.js","webpack://care-ops-frontend/./node_modules/core-js/internals/set-helpers.js","webpack://care-ops-frontend/./node_modules/core-js/internals/set-iterate.js","webpack://care-ops-frontend/./node_modules/core-js/internals/shared-key.js","webpack://care-ops-frontend/./node_modules/core-js/internals/shared-store.js","webpack://care-ops-frontend/./node_modules/core-js/internals/shared.js","webpack://care-ops-frontend/./node_modules/core-js/internals/structured-clone-proper-transfer.js","webpack://care-ops-frontend/./node_modules/core-js/internals/symbol-constructor-detection.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-absolute-index.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-indexed-object.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-integer-or-infinity.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-length.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-object.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-primitive.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-property-key.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-string-tag-support.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-string.js","webpack://care-ops-frontend/./node_modules/core-js/internals/try-node-require.js","webpack://care-ops-frontend/./node_modules/core-js/internals/try-to-string.js","webpack://care-ops-frontend/./node_modules/core-js/internals/uid.js","webpack://care-ops-frontend/./node_modules/core-js/internals/use-symbol-as-uid.js","webpack://care-ops-frontend/./node_modules/core-js/internals/v8-prototype-define-bug.js","webpack://care-ops-frontend/./node_modules/core-js/internals/validate-arguments-length.js","webpack://care-ops-frontend/./node_modules/core-js/internals/weak-map-basic-detection.js","webpack://care-ops-frontend/./node_modules/core-js/internals/well-known-symbol.js","webpack://care-ops-frontend/./node_modules/core-js/modules/web.dom-exception.stack.js","webpack://care-ops-frontend/./node_modules/core-js/modules/web.structured-clone.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_setup.js","webpack://care-ops-frontend/./node_modules/underscore/modules/restArguments.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isObject.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isNull.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isUndefined.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isBoolean.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isElement.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_tagTester.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isString.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isNumber.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isDate.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isRegExp.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isError.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isSymbol.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isArrayBuffer.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isFunction.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_hasObjectTag.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_stringTagBug.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isDataView.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isArray.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_has.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isArguments.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isFinite.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isNaN.js","webpack://care-ops-frontend/./node_modules/underscore/modules/constant.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_createSizePropertyCheck.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_shallowProperty.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_getByteLength.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_isBufferLike.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isTypedArray.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_getLength.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_collectNonEnumProps.js","webpack://care-ops-frontend/./node_modules/underscore/modules/keys.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isEmpty.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isMatch.js","webpack://care-ops-frontend/./node_modules/underscore/modules/underscore.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_toBufferView.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isEqual.js","webpack://care-ops-frontend/./node_modules/underscore/modules/allKeys.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_methodFingerprint.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isMap.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isWeakMap.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isSet.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isWeakSet.js","webpack://care-ops-frontend/./node_modules/underscore/modules/values.js","webpack://care-ops-frontend/./node_modules/underscore/modules/pairs.js","webpack://care-ops-frontend/./node_modules/underscore/modules/invert.js","webpack://care-ops-frontend/./node_modules/underscore/modules/functions.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_createAssigner.js","webpack://care-ops-frontend/./node_modules/underscore/modules/extend.js","webpack://care-ops-frontend/./node_modules/underscore/modules/extendOwn.js","webpack://care-ops-frontend/./node_modules/underscore/modules/defaults.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_baseCreate.js","webpack://care-ops-frontend/./node_modules/underscore/modules/create.js","webpack://care-ops-frontend/./node_modules/underscore/modules/clone.js","webpack://care-ops-frontend/./node_modules/underscore/modules/tap.js","webpack://care-ops-frontend/./node_modules/underscore/modules/toPath.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_toPath.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_deepGet.js","webpack://care-ops-frontend/./node_modules/underscore/modules/get.js","webpack://care-ops-frontend/./node_modules/underscore/modules/has.js","webpack://care-ops-frontend/./node_modules/underscore/modules/identity.js","webpack://care-ops-frontend/./node_modules/underscore/modules/matcher.js","webpack://care-ops-frontend/./node_modules/underscore/modules/property.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_optimizeCb.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_baseIteratee.js","webpack://care-ops-frontend/./node_modules/underscore/modules/iteratee.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_cb.js","webpack://care-ops-frontend/./node_modules/underscore/modules/mapObject.js","webpack://care-ops-frontend/./node_modules/underscore/modules/noop.js","webpack://care-ops-frontend/./node_modules/underscore/modules/propertyOf.js","webpack://care-ops-frontend/./node_modules/underscore/modules/times.js","webpack://care-ops-frontend/./node_modules/underscore/modules/random.js","webpack://care-ops-frontend/./node_modules/underscore/modules/now.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_createEscaper.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_escapeMap.js","webpack://care-ops-frontend/./node_modules/underscore/modules/escape.js","webpack://care-ops-frontend/./node_modules/underscore/modules/unescape.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_unescapeMap.js","webpack://care-ops-frontend/./node_modules/underscore/modules/templateSettings.js","webpack://care-ops-frontend/./node_modules/underscore/modules/template.js","webpack://care-ops-frontend/./node_modules/underscore/modules/result.js","webpack://care-ops-frontend/./node_modules/underscore/modules/uniqueId.js","webpack://care-ops-frontend/./node_modules/underscore/modules/chain.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_executeBound.js","webpack://care-ops-frontend/./node_modules/underscore/modules/partial.js","webpack://care-ops-frontend/./node_modules/underscore/modules/bind.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_isArrayLike.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_flatten.js","webpack://care-ops-frontend/./node_modules/underscore/modules/bindAll.js","webpack://care-ops-frontend/./node_modules/underscore/modules/memoize.js","webpack://care-ops-frontend/./node_modules/underscore/modules/delay.js","webpack://care-ops-frontend/./node_modules/underscore/modules/defer.js","webpack://care-ops-frontend/./node_modules/underscore/modules/throttle.js","webpack://care-ops-frontend/./node_modules/underscore/modules/debounce.js","webpack://care-ops-frontend/./node_modules/underscore/modules/wrap.js","webpack://care-ops-frontend/./node_modules/underscore/modules/negate.js","webpack://care-ops-frontend/./node_modules/underscore/modules/compose.js","webpack://care-ops-frontend/./node_modules/underscore/modules/after.js","webpack://care-ops-frontend/./node_modules/underscore/modules/before.js","webpack://care-ops-frontend/./node_modules/underscore/modules/once.js","webpack://care-ops-frontend/./node_modules/underscore/modules/findKey.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_createPredicateIndexFinder.js","webpack://care-ops-frontend/./node_modules/underscore/modules/findIndex.js","webpack://care-ops-frontend/./node_modules/underscore/modules/findLastIndex.js","webpack://care-ops-frontend/./node_modules/underscore/modules/sortedIndex.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_createIndexFinder.js","webpack://care-ops-frontend/./node_modules/underscore/modules/indexOf.js","webpack://care-ops-frontend/./node_modules/underscore/modules/lastIndexOf.js","webpack://care-ops-frontend/./node_modules/underscore/modules/find.js","webpack://care-ops-frontend/./node_modules/underscore/modules/findWhere.js","webpack://care-ops-frontend/./node_modules/underscore/modules/each.js","webpack://care-ops-frontend/./node_modules/underscore/modules/map.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_createReduce.js","webpack://care-ops-frontend/./node_modules/underscore/modules/reduce.js","webpack://care-ops-frontend/./node_modules/underscore/modules/reduceRight.js","webpack://care-ops-frontend/./node_modules/underscore/modules/filter.js","webpack://care-ops-frontend/./node_modules/underscore/modules/reject.js","webpack://care-ops-frontend/./node_modules/underscore/modules/every.js","webpack://care-ops-frontend/./node_modules/underscore/modules/some.js","webpack://care-ops-frontend/./node_modules/underscore/modules/contains.js","webpack://care-ops-frontend/./node_modules/underscore/modules/invoke.js","webpack://care-ops-frontend/./node_modules/underscore/modules/pluck.js","webpack://care-ops-frontend/./node_modules/underscore/modules/where.js","webpack://care-ops-frontend/./node_modules/underscore/modules/max.js","webpack://care-ops-frontend/./node_modules/underscore/modules/min.js","webpack://care-ops-frontend/./node_modules/underscore/modules/toArray.js","webpack://care-ops-frontend/./node_modules/underscore/modules/sample.js","webpack://care-ops-frontend/./node_modules/underscore/modules/shuffle.js","webpack://care-ops-frontend/./node_modules/underscore/modules/sortBy.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_group.js","webpack://care-ops-frontend/./node_modules/underscore/modules/groupBy.js","webpack://care-ops-frontend/./node_modules/underscore/modules/indexBy.js","webpack://care-ops-frontend/./node_modules/underscore/modules/countBy.js","webpack://care-ops-frontend/./node_modules/underscore/modules/partition.js","webpack://care-ops-frontend/./node_modules/underscore/modules/size.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_keyInObj.js","webpack://care-ops-frontend/./node_modules/underscore/modules/pick.js","webpack://care-ops-frontend/./node_modules/underscore/modules/omit.js","webpack://care-ops-frontend/./node_modules/underscore/modules/initial.js","webpack://care-ops-frontend/./node_modules/underscore/modules/first.js","webpack://care-ops-frontend/./node_modules/underscore/modules/rest.js","webpack://care-ops-frontend/./node_modules/underscore/modules/last.js","webpack://care-ops-frontend/./node_modules/underscore/modules/compact.js","webpack://care-ops-frontend/./node_modules/underscore/modules/flatten.js","webpack://care-ops-frontend/./node_modules/underscore/modules/difference.js","webpack://care-ops-frontend/./node_modules/underscore/modules/without.js","webpack://care-ops-frontend/./node_modules/underscore/modules/uniq.js","webpack://care-ops-frontend/./node_modules/underscore/modules/union.js","webpack://care-ops-frontend/./node_modules/underscore/modules/intersection.js","webpack://care-ops-frontend/./node_modules/underscore/modules/unzip.js","webpack://care-ops-frontend/./node_modules/underscore/modules/zip.js","webpack://care-ops-frontend/./node_modules/underscore/modules/object.js","webpack://care-ops-frontend/./node_modules/underscore/modules/range.js","webpack://care-ops-frontend/./node_modules/underscore/modules/chunk.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_chainResult.js","webpack://care-ops-frontend/./node_modules/underscore/modules/mixin.js","webpack://care-ops-frontend/./node_modules/underscore/modules/underscore-array-methods.js","webpack://care-ops-frontend/./node_modules/underscore/modules/index-default.js","webpack://care-ops-frontend/webpack/bootstrap","webpack://care-ops-frontend/webpack/runtime/chunk prefetch function","webpack://care-ops-frontend/webpack/runtime/compat get default export","webpack://care-ops-frontend/webpack/runtime/define property getters","webpack://care-ops-frontend/webpack/runtime/ensure chunk","webpack://care-ops-frontend/webpack/runtime/get javascript chunk filename","webpack://care-ops-frontend/webpack/runtime/get mini-css chunk filename","webpack://care-ops-frontend/webpack/runtime/global","webpack://care-ops-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://care-ops-frontend/webpack/runtime/make namespace object","webpack://care-ops-frontend/webpack/runtime/publicPath","webpack://care-ops-frontend/webpack/runtime/css loading","webpack://care-ops-frontend/webpack/runtime/jsonp chunk loading","webpack://care-ops-frontend/webpack/runtime/startup prefetch","webpack://care-ops-frontend/./node_modules/workbox-window/build/workbox-window.prod.es5.mjs","webpack://care-ops-frontend/./src/js/index.js"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"care-ops-frontend:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import { extend } from 'underscore';\n\nconst auth0Config = {};\nconst kindeConfig = {};\nconst datadogConfig = {};\nconst appConfig = {};\nconst versions = {};\n\nfunction fetchConfig(success) {\n  fetch(`/appconfig.json?${ new URLSearchParams({ _: _NOW_ }) }`)\n    .then(response => response.json())\n    .then(config => {\n      extend(auth0Config, config.auth0);\n      extend(kindeConfig, config.kinde);\n      extend(datadogConfig, config.datadog);\n      extend(appConfig, config.app);\n      extend(versions, config.versions);\n      success();\n    });\n}\n\nexport {\n  auth0Config,\n  fetchConfig,\n  kindeConfig,\n  datadogConfig,\n  appConfig,\n  versions,\n};\n","/* eslint-disable local-rules/disallow-side-effects */\n/**\n * Keep references on console methods to avoid triggering patched behaviors\n *\n * NB: in some setup, console could already be patched by another SDK.\n * In this case, some display messages can be sent by the other SDK\n * but we should be safe from infinite loop nonetheless.\n */\nexport var ConsoleApiName = {\n    log: 'log',\n    debug: 'debug',\n    info: 'info',\n    warn: 'warn',\n    error: 'error',\n};\n/**\n * When building JS bundles, some users might use a plugin[1] or configuration[2] to remove\n * \"console.*\" references. This causes some issue as we expect `console.*` to be defined.\n * As a workaround, let's use a variable alias, so those expressions won't be taken into account by\n * simple static analysis.\n *\n * [1]: https://babeljs.io/docs/babel-plugin-transform-remove-console/\n * [2]: https://github.com/terser/terser#compress-options (look for drop_console)\n */\nexport var globalConsole = console;\nexport var originalConsoleMethods = {};\nObject.keys(ConsoleApiName).forEach(function (name) {\n    originalConsoleMethods[name] = globalConsole[name];\n});\nvar PREFIX = 'Datadog Browser SDK:';\nexport var display = {\n    debug: originalConsoleMethods.debug.bind(globalConsole, PREFIX),\n    log: originalConsoleMethods.log.bind(globalConsole, PREFIX),\n    info: originalConsoleMethods.info.bind(globalConsole, PREFIX),\n    warn: originalConsoleMethods.warn.bind(globalConsole, PREFIX),\n    error: originalConsoleMethods.error.bind(globalConsole, PREFIX),\n};\n","import { display } from './display';\nexport function catchUserErrors(fn, errorMsg) {\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        try {\n            return fn.apply(void 0, args);\n        }\n        catch (err) {\n            display.error(errorMsg, err);\n        }\n    };\n}\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { display } from './display';\nvar onMonitorErrorCollected;\nvar debugMode = false;\nexport function startMonitorErrorCollection(newOnMonitorErrorCollected) {\n    onMonitorErrorCollected = newOnMonitorErrorCollected;\n}\nexport function setDebugMode(newDebugMode) {\n    debugMode = newDebugMode;\n}\nexport function resetMonitor() {\n    onMonitorErrorCollected = undefined;\n    debugMode = false;\n}\nexport function monitored(_, __, descriptor) {\n    var originalMethod = descriptor.value;\n    descriptor.value = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var decorated = onMonitorErrorCollected ? monitor(originalMethod) : originalMethod;\n        return decorated.apply(this, args);\n    };\n}\nexport function monitor(fn) {\n    return function () {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return callMonitored(fn, this, arguments);\n    }; // consider output type has input type\n}\nexport function callMonitored(fn, context, args) {\n    try {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return fn.apply(context, args);\n    }\n    catch (e) {\n        displayIfDebugEnabled(e);\n        if (onMonitorErrorCollected) {\n            try {\n                onMonitorErrorCollected(e);\n            }\n            catch (e) {\n                displayIfDebugEnabled(e);\n            }\n        }\n    }\n}\nexport function displayIfDebugEnabled() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    if (debugMode) {\n        display.error.apply(display, __spreadArray(['[MONITOR]'], args, false));\n    }\n}\n","export function includes(candidate, search) {\n    return candidate.indexOf(search) !== -1;\n}\nexport function arrayFrom(arrayLike) {\n    if (Array.from) {\n        return Array.from(arrayLike);\n    }\n    var array = [];\n    if (arrayLike instanceof Set) {\n        arrayLike.forEach(function (item) { return array.push(item); });\n    }\n    else {\n        for (var i = 0; i < arrayLike.length; i++) {\n            array.push(arrayLike[i]);\n        }\n    }\n    return array;\n}\nexport function find(array, predicate) {\n    for (var i = 0; i < array.length; i += 1) {\n        var item = array[i];\n        if (predicate(item, i)) {\n            return item;\n        }\n    }\n    return undefined;\n}\nexport function findLast(array, predicate) {\n    for (var i = array.length - 1; i >= 0; i -= 1) {\n        var item = array[i];\n        if (predicate(item, i, array)) {\n            return item;\n        }\n    }\n    return undefined;\n}\nexport function forEach(list, callback) {\n    Array.prototype.forEach.call(list, callback);\n}\nexport function objectValues(object) {\n    return Object.keys(object).map(function (key) { return object[key]; });\n}\nexport function objectEntries(object) {\n    return Object.keys(object).map(function (key) { return [key, object[key]]; });\n}\nexport function startsWith(candidate, search) {\n    return candidate.slice(0, search.length) === search;\n}\nexport function endsWith(candidate, search) {\n    return candidate.slice(-search.length) === search;\n}\nexport function assign(target) {\n    var toAssign = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        toAssign[_i - 1] = arguments[_i];\n    }\n    toAssign.forEach(function (source) {\n        for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n                target[key] = source[key];\n            }\n        }\n    });\n    return target;\n}\n","import { catchUserErrors } from '../tools/catchUserErrors';\nimport { setDebugMode } from '../tools/monitor';\nimport { assign } from '../tools/utils/polyfills';\nexport function makePublicApi(stub) {\n    var publicApi = assign({\n        version: \"5.17.1\",\n        // This API method is intentionally not monitored, since the only thing executed is the\n        // user-provided 'callback'.  All SDK usages executed in the callback should be monitored, and\n        // we don't want to interfere with the user uncaught exceptions.\n        onReady: function (callback) {\n            callback();\n        },\n    }, stub);\n    // Add a \"hidden\" property to set debug mode. We define it that way to hide it\n    // as much as possible but of course it's not a real protection.\n    Object.defineProperty(publicApi, '_setDebug', {\n        get: function () {\n            return setDebugMode;\n        },\n        enumerable: false,\n    });\n    return publicApi;\n}\nexport function defineGlobal(global, name, api) {\n    var existingGlobalVariable = global[name];\n    global[name] = api;\n    if (existingGlobalVariable && existingGlobalVariable.q) {\n        existingGlobalVariable.q.forEach(function (fn) { return catchUserErrors(fn, 'onReady callback threw an error:')(); });\n    }\n}\n","/**\n * inspired by https://mathiasbynens.be/notes/globalthis\n */\nexport function getGlobalObject() {\n    if (typeof globalThis === 'object') {\n        return globalThis;\n    }\n    Object.defineProperty(Object.prototype, '_dd_temp_', {\n        get: function () {\n            return this;\n        },\n        configurable: true,\n    });\n    // @ts-ignore _dd_temp is defined using defineProperty\n    var globalObject = _dd_temp_;\n    // @ts-ignore _dd_temp is defined using defineProperty\n    delete Object.prototype._dd_temp_;\n    if (typeof globalObject !== 'object') {\n        // on safari _dd_temp_ is available on window but not globally\n        // fallback on other browser globals check\n        if (typeof self === 'object') {\n            globalObject = self;\n        }\n        else if (typeof window === 'object') {\n            globalObject = window;\n        }\n        else {\n            globalObject = {};\n        }\n    }\n    return globalObject;\n}\n","export var ONE_KIBI_BYTE = 1024;\nexport var ONE_MEBI_BYTE = 1024 * ONE_KIBI_BYTE;\n// eslint-disable-next-line no-control-regex\nvar HAS_MULTI_BYTES_CHARACTERS = /[^\\u0000-\\u007F]/;\nexport function computeBytesCount(candidate) {\n    // Accurate bytes count computations can degrade performances when there is a lot of events to process\n    if (!HAS_MULTI_BYTES_CHARACTERS.test(candidate)) {\n        return candidate.length;\n    }\n    if (window.TextEncoder !== undefined) {\n        return new TextEncoder().encode(candidate).length;\n    }\n    return new Blob([candidate]).size;\n}\nexport function concatBuffers(buffers) {\n    var length = buffers.reduce(function (total, buffer) { return total + buffer.length; }, 0);\n    var result = new Uint8Array(length);\n    var offset = 0;\n    for (var _i = 0, buffers_1 = buffers; _i < buffers_1.length; _i++) {\n        var buffer = buffers_1[_i];\n        result.set(buffer, offset);\n        offset += buffer.length;\n    }\n    return result;\n}\n","import { getGlobalObject } from './getGlobalObject';\n/**\n * Gets the original value for a DOM API that was potentially patched by Zone.js.\n *\n * Zone.js[1] is a library that patches a bunch of JS and DOM APIs. It usually stores the original\n * value of the patched functions/constructors/methods in a hidden property prefixed by\n * __zone_symbol__.\n *\n * In multiple occasions, we observed that Zone.js is the culprit of important issues leading to\n * browser resource exhaustion (memory leak, high CPU usage). This method is used as a workaround to\n * use the original DOM API instead of the one patched by Zone.js.\n *\n * [1]: https://github.com/angular/angular/tree/main/packages/zone.js\n */\nexport function getZoneJsOriginalValue(target, name) {\n    var browserWindow = getGlobalObject();\n    var original;\n    if (browserWindow.Zone && typeof browserWindow.Zone.__symbol__ === 'function') {\n        original = target[browserWindow.Zone.__symbol__(name)];\n    }\n    if (!original) {\n        original = target[name];\n    }\n    return original;\n}\n","import { getZoneJsOriginalValue } from './getZoneJsOriginalValue';\nimport { monitor } from './monitor';\nimport { getGlobalObject } from './getGlobalObject';\nexport function setTimeout(callback, delay) {\n    return getZoneJsOriginalValue(getGlobalObject(), 'setTimeout')(monitor(callback), delay);\n}\nexport function clearTimeout(timeoutId) {\n    getZoneJsOriginalValue(getGlobalObject(), 'clearTimeout')(timeoutId);\n}\nexport function setInterval(callback, delay) {\n    return getZoneJsOriginalValue(getGlobalObject(), 'setInterval')(monitor(callback), delay);\n}\nexport function clearInterval(timeoutId) {\n    getZoneJsOriginalValue(getGlobalObject(), 'clearInterval')(timeoutId);\n}\n","import { setTimeout, clearTimeout } from '../timer';\n// use lodash API\nexport function throttle(fn, wait, options) {\n    var needLeadingExecution = options && options.leading !== undefined ? options.leading : true;\n    var needTrailingExecution = options && options.trailing !== undefined ? options.trailing : true;\n    var inWaitPeriod = false;\n    var pendingExecutionWithParameters;\n    var pendingTimeoutId;\n    return {\n        throttled: function () {\n            var parameters = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                parameters[_i] = arguments[_i];\n            }\n            if (inWaitPeriod) {\n                pendingExecutionWithParameters = parameters;\n                return;\n            }\n            if (needLeadingExecution) {\n                fn.apply(void 0, parameters);\n            }\n            else {\n                pendingExecutionWithParameters = parameters;\n            }\n            inWaitPeriod = true;\n            pendingTimeoutId = setTimeout(function () {\n                if (needTrailingExecution && pendingExecutionWithParameters) {\n                    fn.apply(void 0, pendingExecutionWithParameters);\n                }\n                inWaitPeriod = false;\n                pendingExecutionWithParameters = undefined;\n            }, wait);\n        },\n        cancel: function () {\n            clearTimeout(pendingTimeoutId);\n            inWaitPeriod = false;\n            pendingExecutionWithParameters = undefined;\n        },\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nexport function noop() { }\n","import { noop } from '../utils/functionUtils';\n/**\n * Custom implementation of JSON.stringify that ignores some toJSON methods. We need to do that\n * because some sites badly override toJSON on certain objects. Removing all toJSON methods from\n * nested values would be too costly, so we just detach them from the root value, and native classes\n * used to build JSON values (Array and Object).\n *\n * Note: this still assumes that JSON.stringify is correct.\n */\nexport function jsonStringify(value, replacer, space) {\n    if (typeof value !== 'object' || value === null) {\n        return JSON.stringify(value);\n    }\n    // Note: The order matter here. We need to detach toJSON methods on parent classes before their\n    // subclasses.\n    var restoreObjectPrototypeToJson = detachToJsonMethod(Object.prototype);\n    var restoreArrayPrototypeToJson = detachToJsonMethod(Array.prototype);\n    var restoreValuePrototypeToJson = detachToJsonMethod(Object.getPrototypeOf(value));\n    var restoreValueToJson = detachToJsonMethod(value);\n    try {\n        return JSON.stringify(value, replacer, space);\n    }\n    catch (_a) {\n        return '<error: unable to serialize object>';\n    }\n    finally {\n        restoreObjectPrototypeToJson();\n        restoreArrayPrototypeToJson();\n        restoreValuePrototypeToJson();\n        restoreValueToJson();\n    }\n}\nexport function detachToJsonMethod(value) {\n    var object = value;\n    var objectToJson = object.toJSON;\n    if (objectToJson) {\n        delete object.toJSON;\n        return function () {\n            object.toJSON = objectToJson;\n        };\n    }\n    return noop;\n}\n","import { assign } from './polyfills';\nexport function shallowClone(object) {\n    return assign({}, object);\n}\nexport function objectHasValue(object, value) {\n    return Object.keys(object).some(function (key) { return object[key] === value; });\n}\nexport function isEmptyObject(object) {\n    return Object.keys(object).length === 0;\n}\nexport function mapValues(object, fn) {\n    var newObject = {};\n    for (var _i = 0, _a = Object.keys(object); _i < _a.length; _i++) {\n        var key = _a[_i];\n        newObject[key] = fn(object[key]);\n    }\n    return newObject;\n}\n","import { ONE_KIBI_BYTE, computeBytesCount } from '../../tools/utils/byteUtils';\nimport { throttle } from '../../tools/utils/functionUtils';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nimport { display } from '../../tools/display';\nimport { isEmptyObject } from '../../tools/utils/objectUtils';\n// RUM and logs batch bytes limit is 16KB\n// ensure that we leave room for other event attributes and maintain a decent amount of event per batch\n// (3KB (customer data) + 1KB (other attributes)) * 4 (events per batch) = 16KB\nexport var CUSTOMER_DATA_BYTES_LIMIT = 3 * ONE_KIBI_BYTE;\n// We observed that the compression ratio is around 8 in general, but we also want to keep a margin\n// because some data might not be compressed (ex: last view update on page exit). We chose 16KiB\n// because it is also the limit of the 'batchBytesCount' that we use for RUM and Logs data, but this\n// is a bit arbitrary.\nexport var CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT = 16 * ONE_KIBI_BYTE;\nexport var BYTES_COMPUTATION_THROTTLING_DELAY = 200;\nexport function createCustomerDataTrackerManager(compressionStatus) {\n    if (compressionStatus === void 0) { compressionStatus = 2 /* CustomerDataCompressionStatus.Disabled */; }\n    var customerDataTrackers = new Map();\n    var alreadyWarned = false;\n    function checkCustomerDataLimit(initialBytesCount) {\n        if (initialBytesCount === void 0) { initialBytesCount = 0; }\n        if (alreadyWarned || compressionStatus === 0 /* CustomerDataCompressionStatus.Unknown */) {\n            return;\n        }\n        var bytesCountLimit = compressionStatus === 2 /* CustomerDataCompressionStatus.Disabled */\n            ? CUSTOMER_DATA_BYTES_LIMIT\n            : CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT;\n        var bytesCount = initialBytesCount;\n        customerDataTrackers.forEach(function (tracker) {\n            bytesCount += tracker.getBytesCount();\n        });\n        if (bytesCount > bytesCountLimit) {\n            displayCustomerDataLimitReachedWarning(bytesCountLimit);\n            alreadyWarned = true;\n        }\n    }\n    return {\n        /**\n         * Creates a detached tracker. The manager will not store a reference to that tracker, and the\n         * bytes count will be counted independently from other detached trackers.\n         *\n         * This is particularly useful when we don't know when the tracker will be unused, so we don't\n         * leak memory (ex: when used in Logger instances).\n         */\n        createDetachedTracker: function () {\n            var tracker = createCustomerDataTracker(function () { return checkCustomerDataLimit(tracker.getBytesCount()); });\n            return tracker;\n        },\n        /**\n         * Creates a tracker if it doesn't exist, and returns it.\n         */\n        getOrCreateTracker: function (type) {\n            if (!customerDataTrackers.has(type)) {\n                customerDataTrackers.set(type, createCustomerDataTracker(checkCustomerDataLimit));\n            }\n            return customerDataTrackers.get(type);\n        },\n        setCompressionStatus: function (newCompressionStatus) {\n            if (compressionStatus === 0 /* CustomerDataCompressionStatus.Unknown */) {\n                compressionStatus = newCompressionStatus;\n                checkCustomerDataLimit();\n            }\n        },\n        getCompressionStatus: function () { return compressionStatus; },\n        stop: function () {\n            customerDataTrackers.forEach(function (tracker) { return tracker.stop(); });\n            customerDataTrackers.clear();\n        },\n    };\n}\nexport function createCustomerDataTracker(checkCustomerDataLimit) {\n    var bytesCountCache = 0;\n    // Throttle the bytes computation to minimize the impact on performance.\n    // Especially useful if the user call context APIs synchronously multiple times in a row\n    var _a = throttle(function (context) {\n        bytesCountCache = computeBytesCount(jsonStringify(context));\n        checkCustomerDataLimit();\n    }, BYTES_COMPUTATION_THROTTLING_DELAY), computeBytesCountThrottled = _a.throttled, cancelComputeBytesCount = _a.cancel;\n    var resetBytesCount = function () {\n        cancelComputeBytesCount();\n        bytesCountCache = 0;\n    };\n    return {\n        updateCustomerData: function (context) {\n            if (isEmptyObject(context)) {\n                resetBytesCount();\n            }\n            else {\n                computeBytesCountThrottled(context);\n            }\n        },\n        resetCustomerData: resetBytesCount,\n        getBytesCount: function () { return bytesCountCache; },\n        stop: function () {\n            cancelComputeBytesCount();\n        },\n    };\n}\nfunction displayCustomerDataLimitReachedWarning(bytesCountLimit) {\n    display.warn(\"Customer data exceeds the recommended \".concat(bytesCountLimit / ONE_KIBI_BYTE, \"KiB threshold. More details: https://docs.datadoghq.com/real_user_monitoring/browser/troubleshooting/#customer-data-exceeds-the-recommended-threshold-warning\"));\n}\n","/**\n * Similar to `typeof`, but distinguish plain objects from `null` and arrays\n */\nexport function getType(value) {\n    if (value === null) {\n        return 'null';\n    }\n    if (Array.isArray(value)) {\n        return 'array';\n    }\n    return typeof value;\n}\n","import { getType } from './utils/typeUtils';\n/**\n * Iterate over source and affect its sub values into destination, recursively.\n * If the source and destination can't be merged, return source.\n */\nexport function mergeInto(destination, source, circularReferenceChecker) {\n    if (circularReferenceChecker === void 0) { circularReferenceChecker = createCircularReferenceChecker(); }\n    // ignore the source if it is undefined\n    if (source === undefined) {\n        return destination;\n    }\n    if (typeof source !== 'object' || source === null) {\n        // primitive values - just return source\n        return source;\n    }\n    else if (source instanceof Date) {\n        return new Date(source.getTime());\n    }\n    else if (source instanceof RegExp) {\n        var flags = source.flags ||\n            // old browsers compatibility\n            [\n                source.global ? 'g' : '',\n                source.ignoreCase ? 'i' : '',\n                source.multiline ? 'm' : '',\n                source.sticky ? 'y' : '',\n                source.unicode ? 'u' : '',\n            ].join('');\n        return new RegExp(source.source, flags);\n    }\n    if (circularReferenceChecker.hasAlreadyBeenSeen(source)) {\n        // remove circular references\n        return undefined;\n    }\n    else if (Array.isArray(source)) {\n        var merged_1 = Array.isArray(destination) ? destination : [];\n        for (var i = 0; i < source.length; ++i) {\n            merged_1[i] = mergeInto(merged_1[i], source[i], circularReferenceChecker);\n        }\n        return merged_1;\n    }\n    var merged = getType(destination) === 'object' ? destination : {};\n    for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n            merged[key] = mergeInto(merged[key], source[key], circularReferenceChecker);\n        }\n    }\n    return merged;\n}\n/**\n * A simplistic implementation of a deep clone algorithm.\n * Caveats:\n * - It doesn't maintain prototype chains - don't use with instances of custom classes.\n * - It doesn't handle Map and Set\n */\nexport function deepClone(value) {\n    return mergeInto(undefined, value);\n}\nexport function combine() {\n    var sources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sources[_i] = arguments[_i];\n    }\n    var destination;\n    for (var _a = 0, sources_1 = sources; _a < sources_1.length; _a++) {\n        var source = sources_1[_a];\n        // Ignore any undefined or null sources.\n        if (source === undefined || source === null) {\n            continue;\n        }\n        destination = mergeInto(destination, source);\n    }\n    return destination;\n}\nfunction createCircularReferenceChecker() {\n    if (typeof WeakSet !== 'undefined') {\n        var set_1 = new WeakSet();\n        return {\n            hasAlreadyBeenSeen: function (value) {\n                var has = set_1.has(value);\n                if (!has) {\n                    set_1.add(value);\n                }\n                return has;\n            },\n        };\n    }\n    var array = [];\n    return {\n        hasAlreadyBeenSeen: function (value) {\n            var has = array.indexOf(value) >= 0;\n            if (!has) {\n                array.push(value);\n            }\n            return has;\n        },\n    };\n}\n","import { display } from '../display';\nimport { ONE_KIBI_BYTE } from '../utils/byteUtils';\nimport { detachToJsonMethod } from './jsonStringify';\n// The maximum size of a single event is 256KiB. By default, we ensure that user-provided data\n// going through sanitize fits inside our events, while leaving room for other contexts, metadata, ...\nvar SANITIZE_DEFAULT_MAX_CHARACTER_COUNT = 220 * ONE_KIBI_BYTE;\n// Symbol for the root element of the JSONPath used for visited objects\nvar JSON_PATH_ROOT_ELEMENT = '$';\n// When serializing (using JSON.stringify) a key of an object, { key: 42 } gets wrapped in quotes as \"key\".\n// With the separator (:), we need to add 3 characters to the count.\nvar KEY_DECORATION_LENGTH = 3;\nexport function sanitize(source, maxCharacterCount) {\n    var _a;\n    if (maxCharacterCount === void 0) { maxCharacterCount = SANITIZE_DEFAULT_MAX_CHARACTER_COUNT; }\n    // Unbind any toJSON function we may have on [] or {} prototypes\n    var restoreObjectPrototypeToJson = detachToJsonMethod(Object.prototype);\n    var restoreArrayPrototypeToJson = detachToJsonMethod(Array.prototype);\n    // Initial call to sanitizeProcessor - will populate containerQueue if source is an Array or a plain Object\n    var containerQueue = [];\n    var visitedObjectsWithPath = new WeakMap();\n    var sanitizedData = sanitizeProcessor(source, JSON_PATH_ROOT_ELEMENT, undefined, containerQueue, visitedObjectsWithPath);\n    var accumulatedCharacterCount = ((_a = JSON.stringify(sanitizedData)) === null || _a === void 0 ? void 0 : _a.length) || 0;\n    if (accumulatedCharacterCount > maxCharacterCount) {\n        warnOverCharacterLimit(maxCharacterCount, 'discarded', source);\n        return undefined;\n    }\n    while (containerQueue.length > 0 && accumulatedCharacterCount < maxCharacterCount) {\n        var containerToProcess = containerQueue.shift();\n        var separatorLength = 0; // 0 for the first element, 1 for subsequent elements\n        // Arrays and Objects have to be handled distinctly to ensure\n        // we do not pick up non-numerical properties from Arrays\n        if (Array.isArray(containerToProcess.source)) {\n            for (var key = 0; key < containerToProcess.source.length; key++) {\n                var targetData = sanitizeProcessor(containerToProcess.source[key], containerToProcess.path, key, containerQueue, visitedObjectsWithPath);\n                if (targetData !== undefined) {\n                    accumulatedCharacterCount += JSON.stringify(targetData).length;\n                }\n                else {\n                    // When an element of an Array (targetData) is undefined, it is serialized as null:\n                    // JSON.stringify([undefined]) => '[null]' - This accounts for 4 characters\n                    accumulatedCharacterCount += 4;\n                }\n                accumulatedCharacterCount += separatorLength;\n                separatorLength = 1;\n                if (accumulatedCharacterCount > maxCharacterCount) {\n                    warnOverCharacterLimit(maxCharacterCount, 'truncated', source);\n                    break;\n                }\n                ;\n                containerToProcess.target[key] = targetData;\n            }\n        }\n        else {\n            for (var key in containerToProcess.source) {\n                if (Object.prototype.hasOwnProperty.call(containerToProcess.source, key)) {\n                    var targetData = sanitizeProcessor(containerToProcess.source[key], containerToProcess.path, key, containerQueue, visitedObjectsWithPath);\n                    // When a property of an object has an undefined value, it will be dropped during serialization:\n                    // JSON.stringify({a:undefined}) => '{}'\n                    if (targetData !== undefined) {\n                        accumulatedCharacterCount +=\n                            JSON.stringify(targetData).length + separatorLength + key.length + KEY_DECORATION_LENGTH;\n                        separatorLength = 1;\n                    }\n                    if (accumulatedCharacterCount > maxCharacterCount) {\n                        warnOverCharacterLimit(maxCharacterCount, 'truncated', source);\n                        break;\n                    }\n                    ;\n                    containerToProcess.target[key] = targetData;\n                }\n            }\n        }\n    }\n    // Rebind detached toJSON functions\n    restoreObjectPrototypeToJson();\n    restoreArrayPrototypeToJson();\n    return sanitizedData;\n}\n/**\n * Internal function to factorize the process common to the\n * initial call to sanitize, and iterations for Arrays and Objects\n *\n */\nfunction sanitizeProcessor(source, parentPath, key, queue, visitedObjectsWithPath) {\n    // Start by handling toJSON, as we want to sanitize its output\n    var sourceToSanitize = tryToApplyToJSON(source);\n    if (!sourceToSanitize || typeof sourceToSanitize !== 'object') {\n        return sanitizePrimitivesAndFunctions(sourceToSanitize);\n    }\n    var sanitizedSource = sanitizeObjects(sourceToSanitize);\n    if (sanitizedSource !== '[Object]' && sanitizedSource !== '[Array]' && sanitizedSource !== '[Error]') {\n        return sanitizedSource;\n    }\n    // Handle potential cyclic references\n    // We need to use source as sourceToSanitize could be a reference to a new object\n    // At this stage, we know the source is an object type\n    var sourceAsObject = source;\n    if (visitedObjectsWithPath.has(sourceAsObject)) {\n        return \"[Reference seen at \".concat(visitedObjectsWithPath.get(sourceAsObject), \"]\");\n    }\n    // Add processed source to queue\n    var currentPath = key !== undefined ? \"\".concat(parentPath, \".\").concat(key) : parentPath;\n    var target = Array.isArray(sourceToSanitize) ? [] : {};\n    visitedObjectsWithPath.set(sourceAsObject, currentPath);\n    queue.push({ source: sourceToSanitize, target: target, path: currentPath });\n    return target;\n}\n/**\n * Handles sanitization of simple, non-object types\n *\n */\nfunction sanitizePrimitivesAndFunctions(value) {\n    // BigInt cannot be serialized by JSON.stringify(), convert it to a string representation\n    if (typeof value === 'bigint') {\n        return \"[BigInt] \".concat(value.toString());\n    }\n    // Functions cannot be serialized by JSON.stringify(). Moreover, if a faulty toJSON is present, it needs to be converted\n    // so it won't prevent stringify from serializing later\n    if (typeof value === 'function') {\n        return \"[Function] \".concat(value.name || 'unknown');\n    }\n    // JSON.stringify() does not serialize symbols.\n    if (typeof value === 'symbol') {\n        return \"[Symbol] \".concat(value.description || value.toString());\n    }\n    return value;\n}\n/**\n * Handles sanitization of object types\n *\n * LIMITATIONS\n * - If a class defines a toStringTag Symbol, it will fall in the catch-all method and prevent enumeration of properties.\n * To avoid this, a toJSON method can be defined.\n * - IE11 does not return a distinct type for objects such as Map, WeakMap, ... These objects will pass through and their\n * properties enumerated if any.\n *\n */\nfunction sanitizeObjects(value) {\n    try {\n        // Handle events - Keep a simple implementation to avoid breaking changes\n        if (value instanceof Event) {\n            return {\n                isTrusted: value.isTrusted,\n            };\n        }\n        // Handle all remaining object types in a generic way\n        var result = Object.prototype.toString.call(value);\n        var match = result.match(/\\[object (.*)\\]/);\n        if (match && match[1]) {\n            return \"[\".concat(match[1], \"]\");\n        }\n    }\n    catch (_a) {\n        // If the previous serialization attempts failed, and we cannot convert using\n        // Object.prototype.toString, declare the value unserializable\n    }\n    return '[Unserializable]';\n}\n/**\n * Checks if a toJSON function exists and tries to execute it\n *\n */\nfunction tryToApplyToJSON(value) {\n    var object = value;\n    if (object && typeof object.toJSON === 'function') {\n        try {\n            return object.toJSON();\n        }\n        catch (_a) {\n            // If toJSON fails, we continue by trying to serialize the value manually\n        }\n    }\n    return value;\n}\n/**\n * Helper function to display the warning when the accumulated character count is over the limit\n */\nfunction warnOverCharacterLimit(maxCharacterCount, changeType, source) {\n    display.warn(\"The data provided has been \".concat(changeType, \" as it is over the limit of \").concat(maxCharacterCount, \" characters:\"), source);\n}\n","var Observable = /** @class */ (function () {\n    function Observable(onFirstSubscribe) {\n        this.onFirstSubscribe = onFirstSubscribe;\n        this.observers = [];\n    }\n    Observable.prototype.subscribe = function (f) {\n        var _this = this;\n        if (!this.observers.length && this.onFirstSubscribe) {\n            this.onLastUnsubscribe = this.onFirstSubscribe(this) || undefined;\n        }\n        this.observers.push(f);\n        return {\n            unsubscribe: function () {\n                _this.observers = _this.observers.filter(function (other) { return f !== other; });\n                if (!_this.observers.length && _this.onLastUnsubscribe) {\n                    _this.onLastUnsubscribe();\n                }\n            },\n        };\n    };\n    Observable.prototype.notify = function (data) {\n        this.observers.forEach(function (observer) { return observer(data); });\n    };\n    return Observable;\n}());\nexport { Observable };\nexport function mergeObservables() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    return new Observable(function (globalObservable) {\n        var subscriptions = observables.map(function (observable) {\n            return observable.subscribe(function (data) { return globalObservable.notify(data); });\n        });\n        return function () { return subscriptions.forEach(function (subscription) { return subscription.unsubscribe(); }); };\n    });\n}\n","import { deepClone } from '../../tools/mergeInto';\nimport { getType } from '../../tools/utils/typeUtils';\nimport { sanitize } from '../../tools/serialisation/sanitize';\nimport { Observable } from '../../tools/observable';\nexport function createContextManager(customerDataTracker) {\n    var context = {};\n    var changeObservable = new Observable();\n    var contextManager = {\n        getContext: function () { return deepClone(context); },\n        setContext: function (newContext) {\n            if (getType(newContext) === 'object') {\n                context = sanitize(newContext);\n                customerDataTracker.updateCustomerData(context);\n            }\n            else {\n                contextManager.clearContext();\n            }\n            changeObservable.notify();\n        },\n        setContextProperty: function (key, property) {\n            context[key] = sanitize(property);\n            customerDataTracker.updateCustomerData(context);\n            changeObservable.notify();\n        },\n        removeContextProperty: function (key) {\n            delete context[key];\n            customerDataTracker.updateCustomerData(context);\n            changeObservable.notify();\n        },\n        clearContext: function () {\n            context = {};\n            customerDataTracker.resetCustomerData();\n            changeObservable.notify();\n        },\n        changeObservable: changeObservable,\n    };\n    return contextManager;\n}\n","import { Observable } from '../tools/observable';\nexport var TrackingConsent = {\n    GRANTED: 'granted',\n    NOT_GRANTED: 'not-granted',\n};\nexport function createTrackingConsentState(currentConsent) {\n    var observable = new Observable();\n    return {\n        tryToInit: function (trackingConsent) {\n            if (!currentConsent) {\n                currentConsent = trackingConsent;\n            }\n        },\n        update: function (trackingConsent) {\n            currentConsent = trackingConsent;\n            observable.notify();\n        },\n        isGranted: function () {\n            return currentConsent === TrackingConsent.GRANTED;\n        },\n        observable: observable,\n    };\n}\n","/**\n * LIMITATION:\n * For NPM setup, this feature flag singleton is shared between RUM and Logs product.\n * This means that an experimental flag set on the RUM product will be set on the Logs product.\n * So keep in mind that in certain configurations, your experimental feature flag may affect other products.\n *\n * FORMAT:\n * All feature flags should be snake_cased\n */\n// We want to use a real enum (i.e. not a const enum) here, to be able to check whether an arbitrary\n// string is an expected feature flag\n// eslint-disable-next-line no-restricted-syntax\nexport var ExperimentalFeature;\n(function (ExperimentalFeature) {\n    ExperimentalFeature[\"PAGEHIDE\"] = \"pagehide\";\n    ExperimentalFeature[\"RESOURCE_PAGE_STATES\"] = \"resource_page_states\";\n    ExperimentalFeature[\"COLLECT_FLUSH_REASON\"] = \"collect_flush_reason\";\n    ExperimentalFeature[\"ZERO_LCP_TELEMETRY\"] = \"zero_lcp_telemetry\";\n    ExperimentalFeature[\"DISABLE_REPLAY_INLINE_CSS\"] = \"disable_replay_inline_css\";\n    ExperimentalFeature[\"WRITABLE_RESOURCE_GRAPHQL\"] = \"writable_resource_graphql\";\n    ExperimentalFeature[\"CUSTOM_VITALS\"] = \"custom_vitals\";\n    ExperimentalFeature[\"TOLERANT_RESOURCE_TIMINGS\"] = \"tolerant_resource_timings\";\n})(ExperimentalFeature || (ExperimentalFeature = {}));\nvar enabledExperimentalFeatures = new Set();\nexport function addExperimentalFeatures(enabledFeatures) {\n    enabledFeatures.forEach(function (flag) {\n        enabledExperimentalFeatures.add(flag);\n    });\n}\nexport function isExperimentalFeatureEnabled(featureName) {\n    return enabledExperimentalFeatures.has(featureName);\n}\nexport function resetExperimentalFeatures() {\n    enabledExperimentalFeatures.clear();\n}\nexport function getExperimentalFeatures() {\n    return enabledExperimentalFeatures;\n}\n","/**\n * Return true if the draw is successful\n * @param threshold between 0 and 100\n */\nexport function performDraw(threshold) {\n    return threshold !== 0 && Math.random() * 100 <= threshold;\n}\nexport function round(num, decimals) {\n    return +num.toFixed(decimals);\n}\nexport function isPercentage(value) {\n    return isNumber(value) && value >= 0 && value <= 100;\n}\nexport function isNumber(value) {\n    return typeof value === 'number';\n}\n","import { isNumber, round } from './numberUtils';\nexport var ONE_SECOND = 1000;\nexport var ONE_MINUTE = 60 * ONE_SECOND;\nexport var ONE_HOUR = 60 * ONE_MINUTE;\nexport var ONE_DAY = 24 * ONE_HOUR;\nexport var ONE_YEAR = 365 * ONE_DAY;\nexport function relativeToClocks(relative) {\n    return { relative: relative, timeStamp: getCorrectedTimeStamp(relative) };\n}\nexport function timeStampToClocks(timeStamp) {\n    return { relative: getRelativeTime(timeStamp), timeStamp: timeStamp };\n}\nfunction getCorrectedTimeStamp(relativeTime) {\n    var correctedOrigin = (dateNow() - performance.now());\n    // apply correction only for positive drift\n    if (correctedOrigin > getNavigationStart()) {\n        return Math.round(addDuration(correctedOrigin, relativeTime));\n    }\n    return getTimeStamp(relativeTime);\n}\nexport function currentDrift() {\n    return Math.round(dateNow() - addDuration(getNavigationStart(), performance.now()));\n}\nexport function toServerDuration(duration) {\n    if (!isNumber(duration)) {\n        return duration;\n    }\n    return round(duration * 1e6, 0);\n}\nexport function dateNow() {\n    // Do not use `Date.now` because sometimes websites are wrongly \"polyfilling\" it. For example, we\n    // had some users using a very old version of `datejs`, which patched `Date.now` to return a Date\n    // instance instead of a timestamp[1]. Those users are unlikely to fix this, so let's handle this\n    // case ourselves.\n    // [1]: https://github.com/datejs/Datejs/blob/97f5c7c58c5bc5accdab8aa7602b6ac56462d778/src/core-debug.js#L14-L16\n    return new Date().getTime();\n}\nexport function timeStampNow() {\n    return dateNow();\n}\nexport function relativeNow() {\n    return performance.now();\n}\nexport function clocksNow() {\n    return { relative: relativeNow(), timeStamp: timeStampNow() };\n}\nexport function clocksOrigin() {\n    return { relative: 0, timeStamp: getNavigationStart() };\n}\nexport function elapsed(start, end) {\n    return (end - start);\n}\nexport function addDuration(a, b) {\n    return a + b;\n}\n/**\n * Get the time since the navigation was started.\n *\n * Note: this does not use `performance.timeOrigin` because it doesn't seem to reflect the actual\n * time on which the navigation has started: it may be much farther in the past, at least in Firefox 71.\n * Related issue in Firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=1429926\n */\nexport function getRelativeTime(timestamp) {\n    return (timestamp - getNavigationStart());\n}\nexport function getTimeStamp(relativeTime) {\n    return Math.round(addDuration(getNavigationStart(), relativeTime));\n}\nexport function looksLikeRelativeTime(time) {\n    return time < ONE_YEAR;\n}\n/**\n * Navigation start slightly change on some rare cases\n */\nvar navigationStart;\nfunction getNavigationStart() {\n    if (navigationStart === undefined) {\n        navigationStart = performance.timing.navigationStart;\n    }\n    return navigationStart;\n}\nexport function resetNavigationStart() {\n    navigationStart = undefined;\n}\n","import { monitor } from '../tools/monitor';\nimport { getZoneJsOriginalValue } from '../tools/getZoneJsOriginalValue';\n// We want to use a real enum (i.e. not a const enum) here, to be able to iterate over it to automatically add _ddIsTrusted in e2e tests\n// eslint-disable-next-line no-restricted-syntax\nexport var DOM_EVENT;\n(function (DOM_EVENT) {\n    DOM_EVENT[\"BEFORE_UNLOAD\"] = \"beforeunload\";\n    DOM_EVENT[\"CLICK\"] = \"click\";\n    DOM_EVENT[\"DBL_CLICK\"] = \"dblclick\";\n    DOM_EVENT[\"KEY_DOWN\"] = \"keydown\";\n    DOM_EVENT[\"LOAD\"] = \"load\";\n    DOM_EVENT[\"POP_STATE\"] = \"popstate\";\n    DOM_EVENT[\"SCROLL\"] = \"scroll\";\n    DOM_EVENT[\"TOUCH_START\"] = \"touchstart\";\n    DOM_EVENT[\"TOUCH_END\"] = \"touchend\";\n    DOM_EVENT[\"TOUCH_MOVE\"] = \"touchmove\";\n    DOM_EVENT[\"VISIBILITY_CHANGE\"] = \"visibilitychange\";\n    DOM_EVENT[\"PAGE_SHOW\"] = \"pageshow\";\n    DOM_EVENT[\"FREEZE\"] = \"freeze\";\n    DOM_EVENT[\"RESUME\"] = \"resume\";\n    DOM_EVENT[\"DOM_CONTENT_LOADED\"] = \"DOMContentLoaded\";\n    DOM_EVENT[\"POINTER_DOWN\"] = \"pointerdown\";\n    DOM_EVENT[\"POINTER_UP\"] = \"pointerup\";\n    DOM_EVENT[\"POINTER_CANCEL\"] = \"pointercancel\";\n    DOM_EVENT[\"HASH_CHANGE\"] = \"hashchange\";\n    DOM_EVENT[\"PAGE_HIDE\"] = \"pagehide\";\n    DOM_EVENT[\"MOUSE_DOWN\"] = \"mousedown\";\n    DOM_EVENT[\"MOUSE_UP\"] = \"mouseup\";\n    DOM_EVENT[\"MOUSE_MOVE\"] = \"mousemove\";\n    DOM_EVENT[\"FOCUS\"] = \"focus\";\n    DOM_EVENT[\"BLUR\"] = \"blur\";\n    DOM_EVENT[\"CONTEXT_MENU\"] = \"contextmenu\";\n    DOM_EVENT[\"RESIZE\"] = \"resize\";\n    DOM_EVENT[\"CHANGE\"] = \"change\";\n    DOM_EVENT[\"INPUT\"] = \"input\";\n    DOM_EVENT[\"PLAY\"] = \"play\";\n    DOM_EVENT[\"PAUSE\"] = \"pause\";\n    DOM_EVENT[\"SECURITY_POLICY_VIOLATION\"] = \"securitypolicyviolation\";\n    DOM_EVENT[\"SELECTION_CHANGE\"] = \"selectionchange\";\n    DOM_EVENT[\"STORAGE\"] = \"storage\";\n})(DOM_EVENT || (DOM_EVENT = {}));\n/**\n * Add an event listener to an event target object (Window, Element, mock object...).  This provides\n * a few conveniences compared to using `element.addEventListener` directly:\n *\n * * supports IE11 by: using an option object only if needed and emulating the `once` option\n *\n * * wraps the listener with a `monitor` function\n *\n * * returns a `stop` function to remove the listener\n */\nexport function addEventListener(configuration, eventTarget, eventName, listener, options) {\n    return addEventListeners(configuration, eventTarget, [eventName], listener, options);\n}\n/**\n * Add event listeners to an event target object (Window, Element, mock object...).  This provides\n * a few conveniences compared to using `element.addEventListener` directly:\n *\n * * supports IE11 by: using an option object only if needed and emulating the `once` option\n *\n * * wraps the listener with a `monitor` function\n *\n * * returns a `stop` function to remove the listener\n *\n * * with `once: true`, the listener will be called at most once, even if different events are listened\n */\nexport function addEventListeners(configuration, eventTarget, eventNames, listener, _a) {\n    var _b = _a === void 0 ? {} : _a, once = _b.once, capture = _b.capture, passive = _b.passive;\n    var listenerWithMonitor = monitor(function (event) {\n        if (!event.isTrusted && !event.__ddIsTrusted && !configuration.allowUntrustedEvents) {\n            return;\n        }\n        if (once) {\n            stop();\n        }\n        listener(event);\n    });\n    var options = passive ? { capture: capture, passive: passive } : capture;\n    var add = getZoneJsOriginalValue(eventTarget, 'addEventListener');\n    eventNames.forEach(function (eventName) { return add.call(eventTarget, eventName, listenerWithMonitor, options); });\n    function stop() {\n        var remove = getZoneJsOriginalValue(eventTarget, 'removeEventListener');\n        eventNames.forEach(function (eventName) { return remove.call(eventTarget, eventName, listenerWithMonitor, options); });\n    }\n    return {\n        stop: stop,\n    };\n}\n","import { addEventListener, DOM_EVENT } from '../../browser/addEventListener';\nimport { combine } from '../../tools/mergeInto';\nvar CONTEXT_STORE_KEY_PREFIX = '_dd_c';\nvar storageListeners = [];\nexport function storeContextManager(configuration, contextManager, productKey, customerDataType) {\n    var storageKey = buildStorageKey(productKey, customerDataType);\n    storageListeners.push(addEventListener(configuration, window, DOM_EVENT.STORAGE, function (_a) {\n        var key = _a.key;\n        if (storageKey === key) {\n            synchronizeWithStorage();\n        }\n    }));\n    contextManager.changeObservable.subscribe(dumpToStorage);\n    contextManager.setContext(combine(getFromStorage(), contextManager.getContext()));\n    function synchronizeWithStorage() {\n        contextManager.setContext(getFromStorage());\n    }\n    function dumpToStorage() {\n        localStorage.setItem(storageKey, JSON.stringify(contextManager.getContext()));\n    }\n    function getFromStorage() {\n        var rawContext = localStorage.getItem(storageKey);\n        return rawContext !== null ? JSON.parse(rawContext) : {};\n    }\n}\nexport function buildStorageKey(productKey, customerDataType) {\n    return \"\".concat(CONTEXT_STORE_KEY_PREFIX, \"_\").concat(productKey, \"_\").concat(customerDataType);\n}\nexport function removeStorageListeners() {\n    storageListeners.map(function (listener) { return listener.stop(); });\n}\n","import { computeBytesCount } from './utils/byteUtils';\nexport function createIdentityEncoder() {\n    var output = '';\n    var outputBytesCount = 0;\n    return {\n        isAsync: false,\n        get isEmpty() {\n            return !output;\n        },\n        write: function (data, callback) {\n            var additionalEncodedBytesCount = computeBytesCount(data);\n            outputBytesCount += additionalEncodedBytesCount;\n            output += data;\n            if (callback) {\n                callback(additionalEncodedBytesCount);\n            }\n        },\n        finish: function (callback) {\n            callback(this.finishSync());\n        },\n        finishSync: function () {\n            var result = {\n                output: output,\n                outputBytesCount: outputBytesCount,\n                rawBytesCount: outputBytesCount,\n                pendingData: '',\n            };\n            output = '';\n            outputBytesCount = 0;\n            return result;\n        },\n        estimateEncodedBytesCount: function (data) {\n            return data.length;\n        },\n    };\n}\n","/**\n * Cross-browser stack trace computation.\n *\n * Reference implementation: https://github.com/csnover/TraceKit/blob/04530298073c3823de72deb0b97e7b38ca7bcb59/tracekit.js\n */\nimport { startsWith } from '../utils/polyfills';\nvar UNKNOWN_FUNCTION = '?';\nexport function computeStackTrace(ex) {\n    var stack = [];\n    var stackProperty = tryToGetString(ex, 'stack');\n    var exString = String(ex);\n    if (stackProperty && startsWith(stackProperty, exString)) {\n        stackProperty = stackProperty.slice(exString.length);\n    }\n    if (stackProperty) {\n        stackProperty.split('\\n').forEach(function (line) {\n            var stackFrame = parseChromeLine(line) || parseChromeAnonymousLine(line) || parseWinLine(line) || parseGeckoLine(line);\n            if (stackFrame) {\n                if (!stackFrame.func && stackFrame.line) {\n                    stackFrame.func = UNKNOWN_FUNCTION;\n                }\n                stack.push(stackFrame);\n            }\n        });\n    }\n    return {\n        message: tryToGetString(ex, 'message'),\n        name: tryToGetString(ex, 'name'),\n        stack: stack,\n    };\n}\nvar fileUrl = '((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\\\w+\\\\.|\\\\/).*?)';\nvar filePosition = '(?::(\\\\d+))';\nvar CHROME_LINE_RE = new RegExp(\"^\\\\s*at (.*?) ?\\\\(\".concat(fileUrl).concat(filePosition, \"?\").concat(filePosition, \"?\\\\)?\\\\s*$\"), 'i');\nvar CHROME_EVAL_RE = new RegExp(\"\\\\((\\\\S*)\".concat(filePosition).concat(filePosition, \"\\\\)\"));\nfunction parseChromeLine(line) {\n    var parts = CHROME_LINE_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    var isNative = parts[2] && parts[2].indexOf('native') === 0; // start of line\n    var isEval = parts[2] && parts[2].indexOf('eval') === 0; // start of line\n    var submatch = CHROME_EVAL_RE.exec(parts[2]);\n    if (isEval && submatch) {\n        // throw out eval line/column and use top-most line/column number\n        parts[2] = submatch[1]; // url\n        parts[3] = submatch[2]; // line\n        parts[4] = submatch[3]; // column\n    }\n    return {\n        args: isNative ? [parts[2]] : [],\n        column: parts[4] ? +parts[4] : undefined,\n        func: parts[1] || UNKNOWN_FUNCTION,\n        line: parts[3] ? +parts[3] : undefined,\n        url: !isNative ? parts[2] : undefined,\n    };\n}\nvar CHROME_ANONYMOUS_FUNCTION_RE = new RegExp(\"^\\\\s*at ?\".concat(fileUrl).concat(filePosition, \"?\").concat(filePosition, \"??\\\\s*$\"), 'i');\nfunction parseChromeAnonymousLine(line) {\n    var parts = CHROME_ANONYMOUS_FUNCTION_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    return {\n        args: [],\n        column: parts[3] ? +parts[3] : undefined,\n        func: UNKNOWN_FUNCTION,\n        line: parts[2] ? +parts[2] : undefined,\n        url: parts[1],\n    };\n}\nvar WINJS_LINE_RE = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\nfunction parseWinLine(line) {\n    var parts = WINJS_LINE_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    return {\n        args: [],\n        column: parts[4] ? +parts[4] : undefined,\n        func: parts[1] || UNKNOWN_FUNCTION,\n        line: +parts[3],\n        url: parts[2],\n    };\n}\nvar GECKO_LINE_RE = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\\[native).*?|[^@]*bundle)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nvar GECKO_EVAL_RE = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\nfunction parseGeckoLine(line) {\n    var parts = GECKO_LINE_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    var isEval = parts[3] && parts[3].indexOf(' > eval') > -1;\n    var submatch = GECKO_EVAL_RE.exec(parts[3]);\n    if (isEval && submatch) {\n        // throw out eval line/column and use top-most line number\n        parts[3] = submatch[1];\n        parts[4] = submatch[2];\n        parts[5] = undefined; // no column when eval\n    }\n    return {\n        args: parts[2] ? parts[2].split(',') : [],\n        column: parts[5] ? +parts[5] : undefined,\n        func: parts[1] || UNKNOWN_FUNCTION,\n        line: parts[4] ? +parts[4] : undefined,\n        url: parts[3],\n    };\n}\nfunction tryToGetString(candidate, property) {\n    if (typeof candidate !== 'object' || !candidate || !(property in candidate)) {\n        return undefined;\n    }\n    var value = candidate[property];\n    return typeof value === 'string' ? value : undefined;\n}\nexport function computeStackTraceFromOnErrorMessage(messageObj, url, line, column) {\n    var stack = [{ url: url, column: column, line: line }];\n    var _a = tryToParseMessage(messageObj), name = _a.name, message = _a.message;\n    return {\n        name: name,\n        message: message,\n        stack: stack,\n    };\n}\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Error_types\nvar ERROR_TYPES_RE = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\\s\\S]*)$/;\nfunction tryToParseMessage(messageObj) {\n    var _a;\n    var name;\n    var message;\n    if ({}.toString.call(messageObj) === '[object String]') {\n        ;\n        _a = ERROR_TYPES_RE.exec(messageObj), name = _a[1], message = _a[2];\n    }\n    return { name: name, message: message };\n}\n","import { callMonitored } from '../monitor';\nimport { noop } from '../utils/functionUtils';\nimport { computeStackTrace } from './computeStackTrace';\n/**\n * Creates a stacktrace without SDK internal frames.\n * Constraints:\n * - Has to be called at the utmost position of the call stack.\n * - No monitored function should encapsulate it, that is why we need to use callMonitored inside it.\n */\nexport function createHandlingStack() {\n    /**\n     * Skip the two internal frames:\n     * - SDK API (console.error, ...)\n     * - this function\n     * in order to keep only the user calls\n     */\n    var internalFramesToSkip = 2;\n    var error = new Error();\n    var formattedStack;\n    // IE needs to throw the error to fill in the stack trace\n    if (!error.stack) {\n        try {\n            throw error;\n        }\n        catch (e) {\n            noop();\n        }\n    }\n    callMonitored(function () {\n        var stackTrace = computeStackTrace(error);\n        stackTrace.stack = stackTrace.stack.slice(internalFramesToSkip);\n        formattedStack = toStackTraceString(stackTrace);\n    });\n    return formattedStack;\n}\nexport function toStackTraceString(stack) {\n    var result = formatErrorMessage(stack);\n    stack.stack.forEach(function (frame) {\n        var func = frame.func === '?' ? '<anonymous>' : frame.func;\n        var args = frame.args && frame.args.length > 0 ? \"(\".concat(frame.args.join(', '), \")\") : '';\n        var line = frame.line ? \":\".concat(frame.line) : '';\n        var column = frame.line && frame.column ? \":\".concat(frame.column) : '';\n        result += \"\\n  at \".concat(func).concat(args, \" @ \").concat(frame.url).concat(line).concat(column);\n    });\n    return result;\n}\nexport function formatErrorMessage(stack) {\n    return \"\".concat(stack.name || 'Error', \": \").concat(stack.message);\n}\n","import { sanitize } from '../../tools/serialisation/sanitize';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nimport { computeStackTrace } from '../../tools/stackTrace/computeStackTrace';\nimport { toStackTraceString } from '../../tools/stackTrace/handlingStack';\nexport var NO_ERROR_STACK_PRESENT_MESSAGE = 'No stack, consider using an instance of Error';\nexport function computeRawError(_a) {\n    var stackTrace = _a.stackTrace, originalError = _a.originalError, handlingStack = _a.handlingStack, startClocks = _a.startClocks, nonErrorPrefix = _a.nonErrorPrefix, source = _a.source, handling = _a.handling;\n    var isErrorInstance = originalError instanceof Error;\n    var message = computeMessage(stackTrace, isErrorInstance, nonErrorPrefix, originalError);\n    var stack = hasUsableStack(isErrorInstance, stackTrace)\n        ? toStackTraceString(stackTrace)\n        : NO_ERROR_STACK_PRESENT_MESSAGE;\n    var causes = isErrorInstance ? flattenErrorCauses(originalError, source) : undefined;\n    var type = stackTrace === null || stackTrace === void 0 ? void 0 : stackTrace.name;\n    var fingerprint = tryToGetFingerprint(originalError);\n    return {\n        startClocks: startClocks,\n        source: source,\n        handling: handling,\n        handlingStack: handlingStack,\n        originalError: originalError,\n        type: type,\n        message: message,\n        stack: stack,\n        causes: causes,\n        fingerprint: fingerprint,\n    };\n}\nfunction computeMessage(stackTrace, isErrorInstance, nonErrorPrefix, originalError) {\n    // Favor stackTrace message only if tracekit has really been able to extract something meaningful (message + name)\n    // TODO rework tracekit integration to avoid scattering error building logic\n    return (stackTrace === null || stackTrace === void 0 ? void 0 : stackTrace.message) && (stackTrace === null || stackTrace === void 0 ? void 0 : stackTrace.name)\n        ? stackTrace.message\n        : !isErrorInstance\n            ? \"\".concat(nonErrorPrefix, \" \").concat(jsonStringify(sanitize(originalError)))\n            : 'Empty message';\n}\nfunction hasUsableStack(isErrorInstance, stackTrace) {\n    if (stackTrace === undefined) {\n        return false;\n    }\n    if (isErrorInstance) {\n        return true;\n    }\n    // handle cases where tracekit return stack = [] or stack = [{url: undefined, line: undefined, column: undefined}]\n    // TODO rework tracekit integration to avoid generating those unusable stack\n    return stackTrace.stack.length > 0 && (stackTrace.stack.length > 1 || stackTrace.stack[0].url !== undefined);\n}\nexport function tryToGetFingerprint(originalError) {\n    return originalError instanceof Error && 'dd_fingerprint' in originalError\n        ? String(originalError.dd_fingerprint)\n        : undefined;\n}\nexport function getFileFromStackTraceString(stack) {\n    var _a;\n    return (_a = /@ (.+)/.exec(stack)) === null || _a === void 0 ? void 0 : _a[1];\n}\nexport function flattenErrorCauses(error, parentSource) {\n    var currentError = error;\n    var causes = [];\n    while ((currentError === null || currentError === void 0 ? void 0 : currentError.cause) instanceof Error && causes.length < 10) {\n        var stackTrace = computeStackTrace(currentError.cause);\n        causes.push({\n            message: currentError.cause.message,\n            source: parentSource,\n            type: stackTrace === null || stackTrace === void 0 ? void 0 : stackTrace.name,\n            stack: stackTrace && toStackTraceString(stackTrace),\n        });\n        currentError = currentError.cause;\n    }\n    return causes.length ? causes : undefined;\n}\n","export var INTAKE_SITE_STAGING = 'datad0g.com';\nexport var INTAKE_SITE_FED_STAGING = 'dd0g-gov.com';\nexport var INTAKE_SITE_US1 = 'datadoghq.com';\nexport var INTAKE_SITE_EU1 = 'datadoghq.eu';\nexport var INTAKE_SITE_US1_FED = 'ddog-gov.com';\nexport var PCI_INTAKE_HOST_US1 = 'pci.browser-intake-datadoghq.com';\n","export function sendToExtension(type, payload) {\n    var callback = window.__ddBrowserSdkExtensionCallback;\n    if (callback) {\n        callback({ type: type, payload: payload });\n    }\n}\n","export function getConnectivity() {\n    var _a;\n    var navigator = window.navigator;\n    return {\n        status: navigator.onLine ? 'connected' : 'not_connected',\n        interfaces: navigator.connection && navigator.connection.type ? [navigator.connection.type] : undefined,\n        effective_type: (_a = navigator.connection) === null || _a === void 0 ? void 0 : _a.effectiveType,\n    };\n}\n","export var TelemetryType = {\n    log: 'log',\n    configuration: 'configuration',\n    usage: 'usage',\n};\n","import { ConsoleApiName } from '../../tools/display';\nimport { NO_ERROR_STACK_PRESENT_MESSAGE } from '../error/error';\nimport { toStackTraceString } from '../../tools/stackTrace/handlingStack';\nimport { getExperimentalFeatures } from '../../tools/experimentalFeatures';\nimport { INTAKE_SITE_STAGING, INTAKE_SITE_US1_FED } from '../configuration';\nimport { Observable } from '../../tools/observable';\nimport { timeStampNow } from '../../tools/utils/timeUtils';\nimport { displayIfDebugEnabled, startMonitorErrorCollection } from '../../tools/monitor';\nimport { sendToExtension } from '../../tools/sendToExtension';\nimport { startsWith, arrayFrom, includes, assign } from '../../tools/utils/polyfills';\nimport { performDraw } from '../../tools/utils/numberUtils';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nimport { combine } from '../../tools/mergeInto';\nimport { computeStackTrace } from '../../tools/stackTrace/computeStackTrace';\nimport { getConnectivity } from '../connectivity';\nimport { TelemetryType } from './rawTelemetryEvent.types';\nvar ALLOWED_FRAME_URLS = [\n    'https://www.datadoghq-browser-agent.com',\n    'https://www.datad0g-browser-agent.com',\n    'https://d3uc069fcn7uxw.cloudfront.net',\n    'https://d20xtzwzcl0ceb.cloudfront.net',\n    'http://localhost',\n    '<anonymous>',\n];\nvar TELEMETRY_EXCLUDED_SITES = [INTAKE_SITE_US1_FED];\nvar telemetryConfiguration = {\n    maxEventsPerPage: 0,\n    sentEventCount: 0,\n};\nvar onRawTelemetryEventCollected;\nexport function startTelemetry(telemetryService, configuration) {\n    var _a;\n    var contextProvider;\n    var observable = new Observable();\n    var telemetryEnabled = !includes(TELEMETRY_EXCLUDED_SITES, configuration.site) && performDraw(configuration.telemetrySampleRate);\n    var telemetryEnabledPerType = (_a = {},\n        _a[TelemetryType.log] = telemetryEnabled,\n        _a[TelemetryType.configuration] = telemetryEnabled && performDraw(configuration.telemetryConfigurationSampleRate),\n        _a[TelemetryType.usage] = telemetryEnabled && performDraw(configuration.telemetryUsageSampleRate),\n        _a);\n    var runtimeEnvInfo = getRuntimeEnvInfo();\n    onRawTelemetryEventCollected = function (rawEvent) {\n        if (telemetryEnabledPerType[rawEvent.type]) {\n            var event_1 = toTelemetryEvent(telemetryService, rawEvent, runtimeEnvInfo);\n            observable.notify(event_1);\n            sendToExtension('telemetry', event_1);\n        }\n    };\n    startMonitorErrorCollection(addTelemetryError);\n    assign(telemetryConfiguration, {\n        maxEventsPerPage: configuration.maxTelemetryEventsPerPage,\n        sentEventCount: 0,\n    });\n    function toTelemetryEvent(telemetryService, event, runtimeEnvInfo) {\n        return combine({\n            type: 'telemetry',\n            date: timeStampNow(),\n            service: telemetryService,\n            version: \"5.17.1\",\n            source: 'browser',\n            _dd: {\n                format_version: 2,\n            },\n            telemetry: combine(event, {\n                runtime_env: runtimeEnvInfo,\n                connectivity: getConnectivity(),\n            }),\n            experimental_features: arrayFrom(getExperimentalFeatures()),\n        }, contextProvider !== undefined ? contextProvider() : {});\n    }\n    return {\n        setContextProvider: function (provider) {\n            contextProvider = provider;\n        },\n        observable: observable,\n        enabled: telemetryEnabled,\n    };\n}\nfunction getRuntimeEnvInfo() {\n    return {\n        is_local_file: window.location.protocol === 'file:',\n        is_worker: 'WorkerGlobalScope' in self,\n    };\n}\nexport function startFakeTelemetry() {\n    var events = [];\n    assign(telemetryConfiguration, {\n        maxEventsPerPage: Infinity,\n        sentEventCount: 0,\n    });\n    onRawTelemetryEventCollected = function (event) {\n        events.push(event);\n    };\n    return events;\n}\nexport function resetTelemetry() {\n    onRawTelemetryEventCollected = undefined;\n}\n/**\n * Avoid mixing telemetry events from different data centers\n * but keep replicating staging events for reliability\n */\nexport function isTelemetryReplicationAllowed(configuration) {\n    return configuration.site === INTAKE_SITE_STAGING;\n}\nexport function addTelemetryDebug(message, context) {\n    displayIfDebugEnabled(ConsoleApiName.debug, message, context);\n    addTelemetry(assign({\n        type: TelemetryType.log,\n        message: message,\n        status: \"debug\" /* StatusType.debug */,\n    }, context));\n}\nexport function addTelemetryError(e, context) {\n    addTelemetry(assign({\n        type: TelemetryType.log,\n        status: \"error\" /* StatusType.error */,\n    }, formatError(e), context));\n}\nexport function addTelemetryConfiguration(configuration) {\n    addTelemetry({\n        type: TelemetryType.configuration,\n        configuration: configuration,\n    });\n}\nexport function addTelemetryUsage(usage) {\n    addTelemetry({\n        type: TelemetryType.usage,\n        usage: usage,\n    });\n}\nfunction addTelemetry(event) {\n    if (onRawTelemetryEventCollected && telemetryConfiguration.sentEventCount < telemetryConfiguration.maxEventsPerPage) {\n        telemetryConfiguration.sentEventCount += 1;\n        onRawTelemetryEventCollected(event);\n    }\n}\nexport function formatError(e) {\n    if (e instanceof Error) {\n        var stackTrace = computeStackTrace(e);\n        return {\n            error: {\n                kind: stackTrace.name,\n                stack: toStackTraceString(scrubCustomerFrames(stackTrace)),\n            },\n            message: stackTrace.message,\n        };\n    }\n    return {\n        error: {\n            stack: NO_ERROR_STACK_PRESENT_MESSAGE,\n        },\n        message: \"\".concat(\"Uncaught\" /* NonErrorPrefix.UNCAUGHT */, \" \").concat(jsonStringify(e)),\n    };\n}\nexport function scrubCustomerFrames(stackTrace) {\n    stackTrace.stack = stackTrace.stack.filter(function (frame) { return !frame.url || ALLOWED_FRAME_URLS.some(function (allowedFrameUrl) { return startsWith(frame.url, allowedFrameUrl); }); });\n    return stackTrace;\n}\n","import { display } from '../../tools/display';\nimport { getType } from '../../tools/utils/typeUtils';\nimport { assign } from '../../tools/utils/polyfills';\n/**\n * Clone input data and ensure known user properties (id, name, email)\n * are strings, as defined here:\n * https://docs.datadoghq.com/logs/log_configuration/attributes_naming_convention/#user-related-attributes\n */\nexport function sanitizeUser(newUser) {\n    // We shallow clone only to prevent mutation of user data.\n    var user = assign({}, newUser);\n    var keys = ['id', 'name', 'email'];\n    keys.forEach(function (key) {\n        if (key in user) {\n            user[key] = String(user[key]);\n        }\n    });\n    return user;\n}\n/**\n * Simple check to ensure user is valid\n */\nexport function checkUser(newUser) {\n    var isValid = getType(newUser) === 'object';\n    if (!isValid) {\n        display.error('Unsupported user:', newUser);\n    }\n    return isValid;\n}\n","import { display } from '../tools/display';\nexport function displayAlreadyInitializedError(sdkName, initConfiguration) {\n    if (!initConfiguration.silentMultipleInit) {\n        display.error(\"\".concat(sdkName, \" is already initialized.\"));\n    }\n}\n","import { arrayFrom } from './polyfills';\nexport function removeDuplicates(array) {\n    var set = new Set();\n    array.forEach(function (item) { return set.add(item); });\n    return arrayFrom(set);\n}\nexport function removeItem(array, item) {\n    var index = array.indexOf(item);\n    if (index >= 0) {\n        array.splice(index, 1);\n    }\n}\n","import { removeItem } from './utils/arrayUtils';\nvar BUFFER_LIMIT = 500;\nvar BoundedBuffer = /** @class */ (function () {\n    function BoundedBuffer() {\n        this.buffer = [];\n    }\n    BoundedBuffer.prototype.add = function (callback) {\n        var length = this.buffer.push(callback);\n        if (length > BUFFER_LIMIT) {\n            this.buffer.splice(0, 1);\n        }\n    };\n    BoundedBuffer.prototype.remove = function (callback) {\n        removeItem(this.buffer, callback);\n    };\n    BoundedBuffer.prototype.drain = function (arg) {\n        this.buffer.forEach(function (callback) { return callback(arg); });\n        this.buffer.length = 0;\n    };\n    return BoundedBuffer;\n}());\nexport { BoundedBuffer };\n","import { endsWith, includes } from '../tools/utils/polyfills';\nimport { getGlobalObject } from '../tools/getGlobalObject';\nexport function getEventBridge() {\n    var eventBridgeGlobal = getEventBridgeGlobal();\n    if (!eventBridgeGlobal) {\n        return;\n    }\n    return {\n        getCapabilities: function () {\n            var _a;\n            return JSON.parse(((_a = eventBridgeGlobal.getCapabilities) === null || _a === void 0 ? void 0 : _a.call(eventBridgeGlobal)) || '[]');\n        },\n        getPrivacyLevel: function () {\n            var _a;\n            return (_a = eventBridgeGlobal.getPrivacyLevel) === null || _a === void 0 ? void 0 : _a.call(eventBridgeGlobal);\n        },\n        getAllowedWebViewHosts: function () {\n            return JSON.parse(eventBridgeGlobal.getAllowedWebViewHosts());\n        },\n        send: function (eventType, event, viewId) {\n            var view = viewId ? { id: viewId } : undefined;\n            eventBridgeGlobal.send(JSON.stringify({ eventType: eventType, event: event, view: view }));\n        },\n    };\n}\nexport function bridgeSupports(capability) {\n    var bridge = getEventBridge();\n    return !!bridge && includes(bridge.getCapabilities(), capability);\n}\nexport function canUseEventBridge(currentHost) {\n    var _a;\n    if (currentHost === void 0) { currentHost = (_a = getGlobalObject().location) === null || _a === void 0 ? void 0 : _a.hostname; }\n    var bridge = getEventBridge();\n    return (!!bridge &&\n        bridge\n            .getAllowedWebViewHosts()\n            .some(function (allowedHost) { return currentHost === allowedHost || endsWith(currentHost, \".\".concat(allowedHost)); }));\n}\nfunction getEventBridgeGlobal() {\n    return getGlobalObject().DatadogEventBridge;\n}\n","/**\n * UUID v4\n * from https://gist.github.com/jed/982883\n */\nexport function generateUUID(placeholder) {\n    return placeholder\n        ? // eslint-disable-next-line  no-bitwise\n            (parseInt(placeholder, 10) ^ ((Math.random() * 16) >> (parseInt(placeholder, 10) / 4))).toString(16)\n        : \"\".concat(1e7, \"-\").concat(1e3, \"-\").concat(4e3, \"-\").concat(8e3, \"-\").concat(1e11).replace(/[018]/g, generateUUID);\n}\nvar COMMA_SEPARATED_KEY_VALUE = /([\\w-]+)\\s*=\\s*([^;]+)/g;\nexport function findCommaSeparatedValue(rawString, name) {\n    COMMA_SEPARATED_KEY_VALUE.lastIndex = 0;\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        var match = COMMA_SEPARATED_KEY_VALUE.exec(rawString);\n        if (match) {\n            if (match[1] === name) {\n                return match[2];\n            }\n        }\n        else {\n            break;\n        }\n    }\n}\nexport function findCommaSeparatedValues(rawString) {\n    var result = new Map();\n    COMMA_SEPARATED_KEY_VALUE.lastIndex = 0;\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        var match = COMMA_SEPARATED_KEY_VALUE.exec(rawString);\n        if (match) {\n            result.set(match[1], match[2]);\n        }\n        else {\n            break;\n        }\n    }\n    return result;\n}\nexport function safeTruncate(candidate, length, suffix) {\n    if (suffix === void 0) { suffix = ''; }\n    var lastChar = candidate.charCodeAt(length - 1);\n    var isLastCharSurrogatePair = lastChar >= 0xd800 && lastChar <= 0xdbff;\n    var correctedLength = isLastCharSurrogatePair ? length + 1 : length;\n    if (candidate.length <= correctedLength) {\n        return candidate;\n    }\n    return \"\".concat(candidate.slice(0, correctedLength)).concat(suffix);\n}\n","import { display } from '../tools/display';\nimport { ONE_MINUTE, ONE_SECOND } from '../tools/utils/timeUtils';\nimport { findCommaSeparatedValue, findCommaSeparatedValues, generateUUID } from '../tools/utils/stringUtils';\nexport function setCookie(name, value, expireDelay, options) {\n    var date = new Date();\n    date.setTime(date.getTime() + expireDelay);\n    var expires = \"expires=\".concat(date.toUTCString());\n    var sameSite = options && options.crossSite ? 'none' : 'strict';\n    var domain = options && options.domain ? \";domain=\".concat(options.domain) : '';\n    var secure = options && options.secure ? ';secure' : '';\n    var partitioned = options && options.partitioned ? ';partitioned' : '';\n    document.cookie = \"\".concat(name, \"=\").concat(value, \";\").concat(expires, \";path=/;samesite=\").concat(sameSite).concat(domain).concat(secure).concat(partitioned);\n}\nexport function getCookie(name) {\n    return findCommaSeparatedValue(document.cookie, name);\n}\nvar initCookieParsed;\n/**\n * Returns a cached value of the cookie. Use this during SDK initialization (and whenever possible)\n * to avoid accessing document.cookie multiple times.\n */\nexport function getInitCookie(name) {\n    if (!initCookieParsed) {\n        initCookieParsed = findCommaSeparatedValues(document.cookie);\n    }\n    return initCookieParsed.get(name);\n}\nexport function resetInitCookies() {\n    initCookieParsed = undefined;\n}\nexport function deleteCookie(name, options) {\n    setCookie(name, '', 0, options);\n}\nexport function areCookiesAuthorized(options) {\n    if (document.cookie === undefined || document.cookie === null) {\n        return false;\n    }\n    try {\n        // Use a unique cookie name to avoid issues when the SDK is initialized multiple times during\n        // the test cookie lifetime\n        var testCookieName = \"dd_cookie_test_\".concat(generateUUID());\n        var testCookieValue = 'test';\n        setCookie(testCookieName, testCookieValue, ONE_MINUTE, options);\n        var isCookieCorrectlySet = getCookie(testCookieName) === testCookieValue;\n        deleteCookie(testCookieName, options);\n        return isCookieCorrectlySet;\n    }\n    catch (error) {\n        display.error(error);\n        return false;\n    }\n}\n/**\n * No API to retrieve it, number of levels for subdomain and suffix are unknown\n * strategy: find the minimal domain on which cookies are allowed to be set\n * https://web.dev/same-site-same-origin/#site\n */\nvar getCurrentSiteCache;\nexport function getCurrentSite() {\n    if (getCurrentSiteCache === undefined) {\n        // Use a unique cookie name to avoid issues when the SDK is initialized multiple times during\n        // the test cookie lifetime\n        var testCookieName = \"dd_site_test_\".concat(generateUUID());\n        var testCookieValue = 'test';\n        var domainLevels = window.location.hostname.split('.');\n        var candidateDomain = domainLevels.pop();\n        while (domainLevels.length && !getCookie(testCookieName)) {\n            candidateDomain = \"\".concat(domainLevels.pop(), \".\").concat(candidateDomain);\n            setCookie(testCookieName, testCookieValue, ONE_SECOND, { domain: candidateDomain });\n        }\n        deleteCookie(testCookieName, { domain: candidateDomain });\n        getCurrentSiteCache = candidateDomain;\n    }\n    return getCurrentSiteCache;\n}\n","import { getInitCookie } from '../../browser/cookie';\nexport var SYNTHETICS_TEST_ID_COOKIE_NAME = 'datadog-synthetics-public-id';\nexport var SYNTHETICS_RESULT_ID_COOKIE_NAME = 'datadog-synthetics-result-id';\nexport var SYNTHETICS_INJECTS_RUM_COOKIE_NAME = 'datadog-synthetics-injects-rum';\nexport function willSyntheticsInjectRum() {\n    return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM || getInitCookie(SYNTHETICS_INJECTS_RUM_COOKIE_NAME));\n}\nexport function getSyntheticsTestId() {\n    var value = window._DATADOG_SYNTHETICS_PUBLIC_ID || getInitCookie(SYNTHETICS_TEST_ID_COOKIE_NAME);\n    return typeof value === 'string' ? value : undefined;\n}\nexport function getSyntheticsResultId() {\n    var value = window._DATADOG_SYNTHETICS_RESULT_ID || getInitCookie(SYNTHETICS_RESULT_ID_COOKIE_NAME);\n    return typeof value === 'string' ? value : undefined;\n}\n","export function isIE() {\n    return detectBrowserCached() === 0 /* Browser.IE */;\n}\nexport function isChromium() {\n    return detectBrowserCached() === 1 /* Browser.CHROMIUM */;\n}\nexport function isSafari() {\n    return detectBrowserCached() === 2 /* Browser.SAFARI */;\n}\nvar browserCache;\nfunction detectBrowserCached() {\n    return browserCache !== null && browserCache !== void 0 ? browserCache : (browserCache = detectBrowser());\n}\n// Exported only for tests\nexport function detectBrowser(browserWindow) {\n    var _a;\n    if (browserWindow === void 0) { browserWindow = window; }\n    var userAgent = browserWindow.navigator.userAgent;\n    if (browserWindow.chrome || /HeadlessChrome/.test(userAgent)) {\n        return 1 /* Browser.CHROMIUM */;\n    }\n    if (\n    // navigator.vendor is deprecated, but it is the most resilient way we found to detect\n    // \"Apple maintained browsers\" (AKA Safari). If one day it gets removed, we still have the\n    // useragent test as a semi-working fallback.\n    ((_a = browserWindow.navigator.vendor) === null || _a === void 0 ? void 0 : _a.indexOf('Apple')) === 0 ||\n        (/safari/i.test(userAgent) && !/chrome|android/i.test(userAgent))) {\n        return 2 /* Browser.SAFARI */;\n    }\n    if (browserWindow.document.documentMode) {\n        return 0 /* Browser.IE */;\n    }\n    return 3 /* Browser.OTHER */;\n}\n","export var SESSION_STORE_KEY = '_dd_s';\n","import { ONE_HOUR, ONE_MINUTE } from '../../tools/utils/timeUtils';\nexport var SESSION_TIME_OUT_DELAY = 4 * ONE_HOUR;\nexport var SESSION_EXPIRATION_DELAY = 15 * ONE_MINUTE;\n","import { isEmptyObject } from '../../tools/utils/objectUtils';\nimport { objectEntries } from '../../tools/utils/polyfills';\nimport { dateNow } from '../../tools/utils/timeUtils';\nimport { SESSION_EXPIRATION_DELAY, SESSION_TIME_OUT_DELAY } from './sessionConstants';\nvar SESSION_ENTRY_REGEXP = /^([a-zA-Z]+)=([a-z0-9-]+)$/;\nvar SESSION_ENTRY_SEPARATOR = '&';\nexport var EXPIRED = '1';\nexport function getExpiredSessionState() {\n    return {\n        isExpired: EXPIRED,\n    };\n}\nexport function isSessionInNotStartedState(session) {\n    return isEmptyObject(session);\n}\nexport function isSessionStarted(session) {\n    return !isSessionInNotStartedState(session);\n}\nexport function isSessionInExpiredState(session) {\n    return session.isExpired !== undefined || !isActiveSession(session);\n}\n// An active session is a session in either `Tracked` or `NotTracked` state\nfunction isActiveSession(sessionState) {\n    // created and expire can be undefined for versions which was not storing them\n    // these checks could be removed when older versions will not be available/live anymore\n    return ((sessionState.created === undefined || dateNow() - Number(sessionState.created) < SESSION_TIME_OUT_DELAY) &&\n        (sessionState.expire === undefined || dateNow() < Number(sessionState.expire)));\n}\nexport function expandSessionState(session) {\n    session.expire = String(dateNow() + SESSION_EXPIRATION_DELAY);\n}\nexport function toSessionString(session) {\n    return objectEntries(session)\n        .map(function (_a) {\n        var key = _a[0], value = _a[1];\n        return \"\".concat(key, \"=\").concat(value);\n    })\n        .join(SESSION_ENTRY_SEPARATOR);\n}\nexport function toSessionState(sessionString) {\n    var session = {};\n    if (isValidSessionString(sessionString)) {\n        sessionString.split(SESSION_ENTRY_SEPARATOR).forEach(function (entry) {\n            var matches = SESSION_ENTRY_REGEXP.exec(entry);\n            if (matches !== null) {\n                var key = matches[1], value = matches[2];\n                session[key] = value;\n            }\n        });\n    }\n    return session;\n}\nfunction isValidSessionString(sessionString) {\n    return (!!sessionString &&\n        (sessionString.indexOf(SESSION_ENTRY_SEPARATOR) !== -1 || SESSION_ENTRY_REGEXP.test(sessionString)));\n}\n","import { getInitCookie } from '../../browser/cookie';\nimport { SESSION_STORE_KEY } from './storeStrategies/sessionStoreStrategy';\nimport { expandSessionState, isSessionStarted } from './sessionState';\nexport var OLD_SESSION_COOKIE_NAME = '_dd';\nexport var OLD_RUM_COOKIE_NAME = '_dd_r';\nexport var OLD_LOGS_COOKIE_NAME = '_dd_l';\n// duplicate values to avoid dependency issues\nexport var RUM_SESSION_KEY = 'rum';\nexport var LOGS_SESSION_KEY = 'logs';\n/**\n * This migration should remain in the codebase as long as older versions are available/live\n * to allow older sdk versions to be upgraded to newer versions without compatibility issues.\n */\nexport function tryOldCookiesMigration(cookieStoreStrategy) {\n    var sessionString = getInitCookie(SESSION_STORE_KEY);\n    if (!sessionString) {\n        var oldSessionId = getInitCookie(OLD_SESSION_COOKIE_NAME);\n        var oldRumType = getInitCookie(OLD_RUM_COOKIE_NAME);\n        var oldLogsType = getInitCookie(OLD_LOGS_COOKIE_NAME);\n        var session = {};\n        if (oldSessionId) {\n            session.id = oldSessionId;\n        }\n        if (oldLogsType && /^[01]$/.test(oldLogsType)) {\n            session[LOGS_SESSION_KEY] = oldLogsType;\n        }\n        if (oldRumType && /^[012]$/.test(oldRumType)) {\n            session[RUM_SESSION_KEY] = oldRumType;\n        }\n        if (isSessionStarted(session)) {\n            expandSessionState(session);\n            cookieStoreStrategy.persistSession(session);\n        }\n    }\n}\n","import { isChromium } from '../../../tools/utils/browserDetection';\nimport { getCurrentSite, areCookiesAuthorized, getCookie, setCookie } from '../../../browser/cookie';\nimport { tryOldCookiesMigration } from '../oldCookiesMigration';\nimport { SESSION_EXPIRATION_DELAY, SESSION_TIME_OUT_DELAY } from '../sessionConstants';\nimport { toSessionString, toSessionState, getExpiredSessionState } from '../sessionState';\nimport { SESSION_STORE_KEY } from './sessionStoreStrategy';\nexport function selectCookieStrategy(initConfiguration) {\n    var cookieOptions = buildCookieOptions(initConfiguration);\n    return areCookiesAuthorized(cookieOptions) ? { type: 'Cookie', cookieOptions: cookieOptions } : undefined;\n}\nexport function initCookieStrategy(cookieOptions) {\n    var cookieStore = {\n        /**\n         * Lock strategy allows mitigating issues due to concurrent access to cookie.\n         * This issue concerns only chromium browsers and enabling this on firefox increases cookie write failures.\n         */\n        isLockEnabled: isChromium(),\n        persistSession: persistSessionCookie(cookieOptions),\n        retrieveSession: retrieveSessionCookie,\n        expireSession: function () { return expireSessionCookie(cookieOptions); },\n    };\n    tryOldCookiesMigration(cookieStore);\n    return cookieStore;\n}\nfunction persistSessionCookie(options) {\n    return function (session) {\n        setCookie(SESSION_STORE_KEY, toSessionString(session), SESSION_EXPIRATION_DELAY, options);\n    };\n}\nfunction expireSessionCookie(options) {\n    setCookie(SESSION_STORE_KEY, toSessionString(getExpiredSessionState()), SESSION_TIME_OUT_DELAY, options);\n}\nfunction retrieveSessionCookie() {\n    var sessionString = getCookie(SESSION_STORE_KEY);\n    return toSessionState(sessionString);\n}\nexport function buildCookieOptions(initConfiguration) {\n    var cookieOptions = {};\n    cookieOptions.secure =\n        !!initConfiguration.useSecureSessionCookie ||\n            !!initConfiguration.usePartitionedCrossSiteSessionCookie ||\n            !!initConfiguration.useCrossSiteSessionCookie;\n    cookieOptions.crossSite =\n        !!initConfiguration.usePartitionedCrossSiteSessionCookie || !!initConfiguration.useCrossSiteSessionCookie;\n    cookieOptions.partitioned = !!initConfiguration.usePartitionedCrossSiteSessionCookie;\n    if (initConfiguration.trackSessionAcrossSubdomains) {\n        cookieOptions.domain = getCurrentSite();\n    }\n    return cookieOptions;\n}\n","import { generateUUID } from '../../../tools/utils/stringUtils';\nimport { toSessionString, toSessionState, getExpiredSessionState } from '../sessionState';\nimport { SESSION_STORE_KEY } from './sessionStoreStrategy';\nvar LOCAL_STORAGE_TEST_KEY = '_dd_test_';\nexport function selectLocalStorageStrategy() {\n    try {\n        var id = generateUUID();\n        var testKey = \"\".concat(LOCAL_STORAGE_TEST_KEY).concat(id);\n        localStorage.setItem(testKey, id);\n        var retrievedId = localStorage.getItem(testKey);\n        localStorage.removeItem(testKey);\n        return id === retrievedId ? { type: 'LocalStorage' } : undefined;\n    }\n    catch (e) {\n        return undefined;\n    }\n}\nexport function initLocalStorageStrategy() {\n    return {\n        isLockEnabled: false,\n        persistSession: persistInLocalStorage,\n        retrieveSession: retrieveSessionFromLocalStorage,\n        expireSession: expireSessionFromLocalStorage,\n    };\n}\nfunction persistInLocalStorage(sessionState) {\n    localStorage.setItem(SESSION_STORE_KEY, toSessionString(sessionState));\n}\nfunction retrieveSessionFromLocalStorage() {\n    var sessionString = localStorage.getItem(SESSION_STORE_KEY);\n    return toSessionState(sessionString);\n}\nfunction expireSessionFromLocalStorage() {\n    persistInLocalStorage(getExpiredSessionState());\n}\n","import { setTimeout } from '../../tools/timer';\nimport { generateUUID } from '../../tools/utils/stringUtils';\nimport { assign } from '../../tools/utils/polyfills';\nimport { expandSessionState, isSessionInExpiredState } from './sessionState';\nexport var LOCK_RETRY_DELAY = 10;\nexport var LOCK_MAX_TRIES = 100;\nvar bufferedOperations = [];\nvar ongoingOperations;\nexport function processSessionStoreOperations(operations, sessionStoreStrategy, numberOfRetries) {\n    var _a;\n    if (numberOfRetries === void 0) { numberOfRetries = 0; }\n    var isLockEnabled = sessionStoreStrategy.isLockEnabled, persistSession = sessionStoreStrategy.persistSession, expireSession = sessionStoreStrategy.expireSession;\n    var persistWithLock = function (session) { return persistSession(assign({}, session, { lock: currentLock })); };\n    var retrieveStore = function () {\n        var session = sessionStoreStrategy.retrieveSession();\n        var lock = session.lock;\n        if (session.lock) {\n            delete session.lock;\n        }\n        return {\n            session: session,\n            lock: lock,\n        };\n    };\n    if (!ongoingOperations) {\n        ongoingOperations = operations;\n    }\n    if (operations !== ongoingOperations) {\n        bufferedOperations.push(operations);\n        return;\n    }\n    if (isLockEnabled && numberOfRetries >= LOCK_MAX_TRIES) {\n        next(sessionStoreStrategy);\n        return;\n    }\n    var currentLock;\n    var currentStore = retrieveStore();\n    if (isLockEnabled) {\n        // if someone has lock, retry later\n        if (currentStore.lock) {\n            retryLater(operations, sessionStoreStrategy, numberOfRetries);\n            return;\n        }\n        // acquire lock\n        currentLock = generateUUID();\n        persistWithLock(currentStore.session);\n        // if lock is not acquired, retry later\n        currentStore = retrieveStore();\n        if (currentStore.lock !== currentLock) {\n            retryLater(operations, sessionStoreStrategy, numberOfRetries);\n            return;\n        }\n    }\n    var processedSession = operations.process(currentStore.session);\n    if (isLockEnabled) {\n        // if lock corrupted after process, retry later\n        currentStore = retrieveStore();\n        if (currentStore.lock !== currentLock) {\n            retryLater(operations, sessionStoreStrategy, numberOfRetries);\n            return;\n        }\n    }\n    if (processedSession) {\n        if (isSessionInExpiredState(processedSession)) {\n            expireSession();\n        }\n        else {\n            expandSessionState(processedSession);\n            isLockEnabled ? persistWithLock(processedSession) : persistSession(processedSession);\n        }\n    }\n    if (isLockEnabled) {\n        // correctly handle lock around expiration would require to handle this case properly at several levels\n        // since we don't have evidence of lock issues around expiration, let's just not do the corruption check for it\n        if (!(processedSession && isSessionInExpiredState(processedSession))) {\n            // if lock corrupted after persist, retry later\n            currentStore = retrieveStore();\n            if (currentStore.lock !== currentLock) {\n                retryLater(operations, sessionStoreStrategy, numberOfRetries);\n                return;\n            }\n            persistSession(currentStore.session);\n            processedSession = currentStore.session;\n        }\n    }\n    // call after even if session is not persisted in order to perform operations on\n    // up-to-date session state value => the value could have been modified by another tab\n    (_a = operations.after) === null || _a === void 0 ? void 0 : _a.call(operations, processedSession || currentStore.session);\n    next(sessionStoreStrategy);\n}\nfunction retryLater(operations, sessionStore, currentNumberOfRetries) {\n    setTimeout(function () {\n        processSessionStoreOperations(operations, sessionStore, currentNumberOfRetries + 1);\n    }, LOCK_RETRY_DELAY);\n}\nfunction next(sessionStore) {\n    ongoingOperations = undefined;\n    var nextOperations = bufferedOperations.shift();\n    if (nextOperations) {\n        processSessionStoreOperations(nextOperations, sessionStore);\n    }\n}\n","import { clearInterval, setInterval } from '../../tools/timer';\nimport { Observable } from '../../tools/observable';\nimport { ONE_SECOND, dateNow } from '../../tools/utils/timeUtils';\nimport { throttle } from '../../tools/utils/functionUtils';\nimport { generateUUID } from '../../tools/utils/stringUtils';\nimport { selectCookieStrategy, initCookieStrategy } from './storeStrategies/sessionInCookie';\nimport { getExpiredSessionState, isSessionInExpiredState, isSessionInNotStartedState } from './sessionState';\nimport { initLocalStorageStrategy, selectLocalStorageStrategy } from './storeStrategies/sessionInLocalStorage';\nimport { processSessionStoreOperations } from './sessionStoreOperations';\n/**\n * Every second, the storage will be polled to check for any change that can occur\n * to the session state in another browser tab, or another window.\n * This value has been determined from our previous cookie-only implementation.\n */\nexport var STORAGE_POLL_DELAY = ONE_SECOND;\n/**\n * Checks if cookies are available as the preferred storage\n * Else, checks if LocalStorage is allowed and available\n */\nexport function selectSessionStoreStrategyType(initConfiguration) {\n    var sessionStoreStrategyType = selectCookieStrategy(initConfiguration);\n    if (!sessionStoreStrategyType && initConfiguration.allowFallbackToLocalStorage) {\n        sessionStoreStrategyType = selectLocalStorageStrategy();\n    }\n    return sessionStoreStrategyType;\n}\n/**\n * Different session concepts:\n * - tracked, the session has an id and is updated along the user navigation\n * - not tracked, the session does not have an id but it is updated along the user navigation\n * - inactive, no session in store or session expired, waiting for a renew session\n */\nexport function startSessionStore(sessionStoreStrategyType, productKey, computeSessionState) {\n    var renewObservable = new Observable();\n    var expireObservable = new Observable();\n    var sessionStoreStrategy = sessionStoreStrategyType.type === 'Cookie'\n        ? initCookieStrategy(sessionStoreStrategyType.cookieOptions)\n        : initLocalStorageStrategy();\n    var expireSession = sessionStoreStrategy.expireSession;\n    var watchSessionTimeoutId = setInterval(watchSession, STORAGE_POLL_DELAY);\n    var sessionCache;\n    startSession();\n    var _a = throttle(function () {\n        var isTracked;\n        processSessionStoreOperations({\n            process: function (sessionState) {\n                if (isSessionInNotStartedState(sessionState)) {\n                    return;\n                }\n                var synchronizedSession = synchronizeSession(sessionState);\n                isTracked = expandOrRenewSessionState(synchronizedSession);\n                return synchronizedSession;\n            },\n            after: function (sessionState) {\n                if (isTracked && !hasSessionInCache()) {\n                    renewSessionInCache(sessionState);\n                }\n                sessionCache = sessionState;\n            },\n        }, sessionStoreStrategy);\n    }, STORAGE_POLL_DELAY), throttledExpandOrRenewSession = _a.throttled, cancelExpandOrRenewSession = _a.cancel;\n    function expandSession() {\n        processSessionStoreOperations({\n            process: function (sessionState) { return (hasSessionInCache() ? synchronizeSession(sessionState) : undefined); },\n        }, sessionStoreStrategy);\n    }\n    /**\n     * allows two behaviors:\n     * - if the session is active, synchronize the session cache without updating the session store\n     * - if the session is not active, clear the session store and expire the session cache\n     */\n    function watchSession() {\n        processSessionStoreOperations({\n            process: function (sessionState) { return (isSessionInExpiredState(sessionState) ? getExpiredSessionState() : undefined); },\n            after: synchronizeSession,\n        }, sessionStoreStrategy);\n    }\n    function synchronizeSession(sessionState) {\n        if (isSessionInExpiredState(sessionState)) {\n            sessionState = getExpiredSessionState();\n        }\n        if (hasSessionInCache()) {\n            if (isSessionInCacheOutdated(sessionState)) {\n                expireSessionInCache();\n            }\n            else {\n                sessionCache = sessionState;\n            }\n        }\n        return sessionState;\n    }\n    function startSession() {\n        processSessionStoreOperations({\n            process: function (sessionState) {\n                if (isSessionInNotStartedState(sessionState)) {\n                    return getExpiredSessionState();\n                }\n            },\n            after: function (sessionState) {\n                sessionCache = sessionState;\n            },\n        }, sessionStoreStrategy);\n    }\n    function expandOrRenewSessionState(sessionState) {\n        if (isSessionInNotStartedState(sessionState)) {\n            return false;\n        }\n        var _a = computeSessionState(sessionState[productKey]), trackingType = _a.trackingType, isTracked = _a.isTracked;\n        sessionState[productKey] = trackingType;\n        delete sessionState.isExpired;\n        if (isTracked && !sessionState.id) {\n            sessionState.id = generateUUID();\n            sessionState.created = String(dateNow());\n        }\n        return isTracked;\n    }\n    function hasSessionInCache() {\n        return sessionCache[productKey] !== undefined;\n    }\n    function isSessionInCacheOutdated(sessionState) {\n        return sessionCache.id !== sessionState.id || sessionCache[productKey] !== sessionState[productKey];\n    }\n    function expireSessionInCache() {\n        sessionCache = getExpiredSessionState();\n        expireObservable.notify();\n    }\n    function renewSessionInCache(sessionState) {\n        sessionCache = sessionState;\n        renewObservable.notify();\n    }\n    return {\n        expandOrRenewSession: throttledExpandOrRenewSession,\n        expandSession: expandSession,\n        getSession: function () { return sessionCache; },\n        renewObservable: renewObservable,\n        expireObservable: expireObservable,\n        restartSession: startSession,\n        expire: function () {\n            cancelExpandOrRenewSession();\n            expireSession();\n            synchronizeSession(getExpiredSessionState());\n        },\n        stop: function () {\n            clearInterval(watchSessionTimeoutId);\n        },\n    };\n}\n","import { jsonStringify } from '../serialisation/jsonStringify';\nexport function normalizeUrl(url) {\n    return buildUrl(url, location.href).href;\n}\nexport function isValidUrl(url) {\n    try {\n        return !!buildUrl(url);\n    }\n    catch (_a) {\n        return false;\n    }\n}\nexport function getPathName(url) {\n    var pathname = buildUrl(url).pathname;\n    return pathname[0] === '/' ? pathname : \"/\".concat(pathname);\n}\nexport function buildUrl(url, base) {\n    var supportedURL = getSupportedUrl();\n    if (supportedURL) {\n        try {\n            return base !== undefined ? new supportedURL(url, base) : new supportedURL(url);\n        }\n        catch (error) {\n            throw new Error(\"Failed to construct URL: \".concat(String(error), \" \").concat(jsonStringify({ url: url, base: base })));\n        }\n    }\n    if (base === undefined && !/:/.test(url)) {\n        throw new Error(\"Invalid URL: '\".concat(url, \"'\"));\n    }\n    var doc = document;\n    var anchorElement = doc.createElement('a');\n    if (base !== undefined) {\n        doc = document.implementation.createHTMLDocument('');\n        var baseElement = doc.createElement('base');\n        baseElement.href = base;\n        doc.head.appendChild(baseElement);\n        doc.body.appendChild(anchorElement);\n    }\n    anchorElement.href = url;\n    return anchorElement;\n}\nvar originalURL = URL;\nvar isURLSupported;\nfunction getSupportedUrl() {\n    if (isURLSupported === undefined) {\n        try {\n            var url = new originalURL('http://test/path');\n            isURLSupported = url.href === 'http://test/path';\n        }\n        catch (_a) {\n            isURLSupported = false;\n        }\n    }\n    return isURLSupported ? originalURL : undefined;\n}\n","import { timeStampNow } from '../../tools/utils/timeUtils';\nimport { normalizeUrl } from '../../tools/utils/urlPolyfill';\nimport { ExperimentalFeature, isExperimentalFeatureEnabled } from '../../tools/experimentalFeatures';\nimport { generateUUID } from '../../tools/utils/stringUtils';\nimport { INTAKE_SITE_US1, INTAKE_SITE_FED_STAGING, PCI_INTAKE_HOST_US1 } from './intakeSites';\nexport function createEndpointBuilder(initConfiguration, trackType, configurationTags) {\n    var buildUrlWithParameters = createEndpointUrlWithParametersBuilder(initConfiguration, trackType);\n    return {\n        build: function (api, payload) {\n            var parameters = buildEndpointParameters(initConfiguration, trackType, configurationTags, api, payload);\n            return buildUrlWithParameters(parameters);\n        },\n        urlPrefix: buildUrlWithParameters(''),\n        trackType: trackType,\n    };\n}\n/**\n * Create a function used to build a full endpoint url from provided parameters. The goal of this\n * function is to pre-compute some parts of the URL to avoid re-computing everything on every\n * request, as only parameters are changing.\n */\nfunction createEndpointUrlWithParametersBuilder(initConfiguration, trackType) {\n    var path = \"/api/v2/\".concat(trackType);\n    var proxy = initConfiguration.proxy;\n    if (typeof proxy === 'string') {\n        var normalizedProxyUrl_1 = normalizeUrl(proxy);\n        return function (parameters) { return \"\".concat(normalizedProxyUrl_1, \"?ddforward=\").concat(encodeURIComponent(\"\".concat(path, \"?\").concat(parameters))); };\n    }\n    if (typeof proxy === 'function') {\n        return function (parameters) { return proxy({ path: path, parameters: parameters }); };\n    }\n    var host = buildEndpointHost(trackType, initConfiguration);\n    return function (parameters) { return \"https://\".concat(host).concat(path, \"?\").concat(parameters); };\n}\nfunction buildEndpointHost(trackType, initConfiguration) {\n    var _a = initConfiguration.site, site = _a === void 0 ? INTAKE_SITE_US1 : _a, internalAnalyticsSubdomain = initConfiguration.internalAnalyticsSubdomain;\n    if (trackType === 'logs' && initConfiguration.usePciIntake && site === INTAKE_SITE_US1) {\n        return PCI_INTAKE_HOST_US1;\n    }\n    if (internalAnalyticsSubdomain && site === INTAKE_SITE_US1) {\n        return \"\".concat(internalAnalyticsSubdomain, \".\").concat(INTAKE_SITE_US1);\n    }\n    if (site === INTAKE_SITE_FED_STAGING) {\n        return \"http-intake.logs.\".concat(site);\n    }\n    var domainParts = site.split('.');\n    var extension = domainParts.pop();\n    return \"browser-intake-\".concat(domainParts.join('-'), \".\").concat(extension);\n}\n/**\n * Build parameters to be used for an intake request. Parameters should be re-built for each\n * request, as they change randomly.\n */\nfunction buildEndpointParameters(_a, trackType, configurationTags, api, _b) {\n    var clientToken = _a.clientToken, internalAnalyticsSubdomain = _a.internalAnalyticsSubdomain;\n    var retry = _b.retry, flushReason = _b.flushReason, encoding = _b.encoding;\n    var tags = [\"sdk_version:\".concat(\"5.17.1\"), \"api:\".concat(api)].concat(configurationTags);\n    if (flushReason && isExperimentalFeatureEnabled(ExperimentalFeature.COLLECT_FLUSH_REASON)) {\n        tags.push(\"flush_reason:\".concat(flushReason));\n    }\n    if (retry) {\n        tags.push(\"retry_count:\".concat(retry.count), \"retry_after:\".concat(retry.lastFailureStatus));\n    }\n    var parameters = [\n        'ddsource=browser',\n        \"ddtags=\".concat(encodeURIComponent(tags.join(','))),\n        \"dd-api-key=\".concat(clientToken),\n        \"dd-evp-origin-version=\".concat(encodeURIComponent(\"5.17.1\")),\n        'dd-evp-origin=browser',\n        \"dd-request-id=\".concat(generateUUID()),\n    ];\n    if (encoding) {\n        parameters.push(\"dd-evp-encoding=\".concat(encoding));\n    }\n    if (trackType === 'rum') {\n        parameters.push(\"batch_time=\".concat(timeStampNow()));\n    }\n    if (internalAnalyticsSubdomain) {\n        parameters.reverse();\n    }\n    return parameters.join('&');\n}\n","import { display } from '../../tools/display';\nexport var TAG_SIZE_LIMIT = 200;\nexport function buildTags(configuration) {\n    var env = configuration.env, service = configuration.service, version = configuration.version, datacenter = configuration.datacenter;\n    var tags = [];\n    if (env) {\n        tags.push(buildTag('env', env));\n    }\n    if (service) {\n        tags.push(buildTag('service', service));\n    }\n    if (version) {\n        tags.push(buildTag('version', version));\n    }\n    if (datacenter) {\n        tags.push(buildTag('datacenter', datacenter));\n    }\n    return tags;\n}\nvar FORBIDDEN_CHARACTERS = /[^a-z0-9_:./-]/;\nexport function buildTag(key, rawValue) {\n    // See https://docs.datadoghq.com/getting_started/tagging/#defining-tags for tags syntax. Note\n    // that the backend may not follow the exact same rules, so we only want to display an informal\n    // warning.\n    var valueSizeLimit = TAG_SIZE_LIMIT - key.length - 1;\n    if (rawValue.length > valueSizeLimit || FORBIDDEN_CHARACTERS.test(rawValue)) {\n        display.warn(\"\".concat(key, \" value doesn't meet tag requirements and will be sanitized\"));\n    }\n    // Let the backend do most of the sanitization, but still make sure multiple tags can't be crafted\n    // by forging a value containing commas.\n    var sanitizedValue = rawValue.replace(/,/g, '_');\n    return \"\".concat(key, \":\").concat(sanitizedValue);\n}\n","import { catchUserErrors } from '../../tools/catchUserErrors';\nimport { display } from '../../tools/display';\nimport { ExperimentalFeature, addExperimentalFeatures } from '../../tools/experimentalFeatures';\nimport { ONE_SECOND } from '../../tools/utils/timeUtils';\nimport { isPercentage } from '../../tools/utils/numberUtils';\nimport { ONE_KIBI_BYTE } from '../../tools/utils/byteUtils';\nimport { objectHasValue } from '../../tools/utils/objectUtils';\nimport { assign } from '../../tools/utils/polyfills';\nimport { selectSessionStoreStrategyType } from '../session/sessionStore';\nimport { TrackingConsent } from '../trackingConsent';\nimport { computeTransportConfiguration } from './transportConfiguration';\nexport var DOC_LINK = 'https://docs.datadoghq.com/getting_started/site/';\nexport var DefaultPrivacyLevel = {\n    ALLOW: 'allow',\n    MASK: 'mask',\n    MASK_USER_INPUT: 'mask-user-input',\n};\nexport var TraceContextInjection = {\n    ALL: 'all',\n    SAMPLED: 'sampled',\n};\nfunction isDatadogSite(site) {\n    return /(datadog|ddog|datad0g|dd0g)/.test(site);\n}\nexport function validateAndBuildConfiguration(initConfiguration) {\n    var _a, _b, _c, _d, _e;\n    if (!initConfiguration || !initConfiguration.clientToken) {\n        display.error('Client Token is not configured, we will not send any data.');\n        return;\n    }\n    if (initConfiguration.sessionSampleRate !== undefined && !isPercentage(initConfiguration.sessionSampleRate)) {\n        display.error('Session Sample Rate should be a number between 0 and 100');\n        return;\n    }\n    if (initConfiguration.telemetrySampleRate !== undefined && !isPercentage(initConfiguration.telemetrySampleRate)) {\n        display.error('Telemetry Sample Rate should be a number between 0 and 100');\n        return;\n    }\n    if (initConfiguration.telemetryConfigurationSampleRate !== undefined &&\n        !isPercentage(initConfiguration.telemetryConfigurationSampleRate)) {\n        display.error('Telemetry Configuration Sample Rate should be a number between 0 and 100');\n        return;\n    }\n    if (initConfiguration.telemetryUsageSampleRate !== undefined &&\n        !isPercentage(initConfiguration.telemetryUsageSampleRate)) {\n        display.error('Telemetry Usage Sample Rate should be a number between 0 and 100');\n        return;\n    }\n    if (initConfiguration.trackingConsent !== undefined &&\n        !objectHasValue(TrackingConsent, initConfiguration.trackingConsent)) {\n        display.error('Tracking Consent should be either \"granted\" or \"not-granted\"');\n        return;\n    }\n    if (initConfiguration.site && !isDatadogSite(initConfiguration.site)) {\n        display.error(\"Site should be a valid Datadog site. Learn more here: \".concat(DOC_LINK, \".\"));\n        return;\n    }\n    // Set the experimental feature flags as early as possible, so we can use them in most places\n    if (Array.isArray(initConfiguration.enableExperimentalFeatures)) {\n        addExperimentalFeatures(initConfiguration.enableExperimentalFeatures.filter(function (flag) {\n            return objectHasValue(ExperimentalFeature, flag);\n        }));\n    }\n    return assign({\n        beforeSend: initConfiguration.beforeSend && catchUserErrors(initConfiguration.beforeSend, 'beforeSend threw an error:'),\n        sessionStoreStrategyType: selectSessionStoreStrategyType(initConfiguration),\n        sessionSampleRate: (_a = initConfiguration.sessionSampleRate) !== null && _a !== void 0 ? _a : 100,\n        telemetrySampleRate: (_b = initConfiguration.telemetrySampleRate) !== null && _b !== void 0 ? _b : 20,\n        telemetryConfigurationSampleRate: (_c = initConfiguration.telemetryConfigurationSampleRate) !== null && _c !== void 0 ? _c : 5,\n        telemetryUsageSampleRate: (_d = initConfiguration.telemetryUsageSampleRate) !== null && _d !== void 0 ? _d : 5,\n        service: initConfiguration.service,\n        silentMultipleInit: !!initConfiguration.silentMultipleInit,\n        allowUntrustedEvents: !!initConfiguration.allowUntrustedEvents,\n        trackingConsent: (_e = initConfiguration.trackingConsent) !== null && _e !== void 0 ? _e : TrackingConsent.GRANTED,\n        /**\n         * beacon payload max queue size implementation is 64kb\n         * ensure that we leave room for logs, rum and potential other users\n         */\n        batchBytesLimit: 16 * ONE_KIBI_BYTE,\n        eventRateLimiterThreshold: 3000,\n        maxTelemetryEventsPerPage: 15,\n        /**\n         * flush automatically, aim to be lower than ALB connection timeout\n         * to maximize connection reuse.\n         */\n        flushTimeout: (30 * ONE_SECOND),\n        /**\n         * Logs intake limit\n         */\n        batchMessagesLimit: 50,\n        messageBytesLimit: 256 * ONE_KIBI_BYTE,\n    }, computeTransportConfiguration(initConfiguration));\n}\nexport function serializeConfiguration(initConfiguration) {\n    return {\n        session_sample_rate: initConfiguration.sessionSampleRate,\n        telemetry_sample_rate: initConfiguration.telemetrySampleRate,\n        telemetry_configuration_sample_rate: initConfiguration.telemetryConfigurationSampleRate,\n        telemetry_usage_sample_rate: initConfiguration.telemetryUsageSampleRate,\n        use_before_send: !!initConfiguration.beforeSend,\n        use_cross_site_session_cookie: initConfiguration.useCrossSiteSessionCookie,\n        use_partitioned_cross_site_session_cookie: initConfiguration.usePartitionedCrossSiteSessionCookie,\n        use_secure_session_cookie: initConfiguration.useSecureSessionCookie,\n        use_proxy: !!initConfiguration.proxy,\n        silent_multiple_init: initConfiguration.silentMultipleInit,\n        track_session_across_subdomains: initConfiguration.trackSessionAcrossSubdomains,\n        allow_fallback_to_local_storage: !!initConfiguration.allowFallbackToLocalStorage,\n        store_contexts_across_pages: !!initConfiguration.storeContextsAcrossPages,\n        allow_untrusted_events: !!initConfiguration.allowUntrustedEvents,\n        tracking_consent: initConfiguration.trackingConsent,\n    };\n}\n","import { objectValues, assign } from '../../tools/utils/polyfills';\nimport { createEndpointBuilder } from './endpointBuilder';\nimport { buildTags } from './tags';\nimport { INTAKE_SITE_US1, PCI_INTAKE_HOST_US1 } from './intakeSites';\nexport function computeTransportConfiguration(initConfiguration) {\n    var site = initConfiguration.site || INTAKE_SITE_US1;\n    var tags = buildTags(initConfiguration);\n    var endpointBuilders = computeEndpointBuilders(initConfiguration, tags);\n    var intakeUrlPrefixes = computeIntakeUrlPrefixes(endpointBuilders, site);\n    var replicaConfiguration = computeReplicaConfiguration(initConfiguration, intakeUrlPrefixes, tags);\n    return assign({\n        isIntakeUrl: function (url) { return intakeUrlPrefixes.some(function (intakeEndpoint) { return url.indexOf(intakeEndpoint) === 0; }); },\n        replica: replicaConfiguration,\n        site: site,\n    }, endpointBuilders);\n}\nfunction computeEndpointBuilders(initConfiguration, tags) {\n    return {\n        logsEndpointBuilder: createEndpointBuilder(initConfiguration, 'logs', tags),\n        rumEndpointBuilder: createEndpointBuilder(initConfiguration, 'rum', tags),\n        sessionReplayEndpointBuilder: createEndpointBuilder(initConfiguration, 'replay', tags),\n    };\n}\nfunction computeReplicaConfiguration(initConfiguration, intakeUrlPrefixes, tags) {\n    if (!initConfiguration.replica) {\n        return;\n    }\n    var replicaConfiguration = assign({}, initConfiguration, {\n        site: INTAKE_SITE_US1,\n        clientToken: initConfiguration.replica.clientToken,\n    });\n    var replicaEndpointBuilders = {\n        logsEndpointBuilder: createEndpointBuilder(replicaConfiguration, 'logs', tags),\n        rumEndpointBuilder: createEndpointBuilder(replicaConfiguration, 'rum', tags),\n    };\n    intakeUrlPrefixes.push.apply(intakeUrlPrefixes, objectValues(replicaEndpointBuilders).map(function (builder) { return builder.urlPrefix; }));\n    return assign({ applicationId: initConfiguration.replica.applicationId }, replicaEndpointBuilders);\n}\nfunction computeIntakeUrlPrefixes(endpointBuilders, site) {\n    var intakeUrlPrefixes = objectValues(endpointBuilders).map(function (builder) { return builder.urlPrefix; });\n    if (site === INTAKE_SITE_US1) {\n        intakeUrlPrefixes.push(\"https://\".concat(PCI_INTAKE_HOST_US1, \"/\"));\n    }\n    return intakeUrlPrefixes;\n}\n","import { startsWith } from './utils/polyfills';\nimport { display } from './display';\nimport { getType } from './utils/typeUtils';\nexport function isMatchOption(item) {\n    var itemType = getType(item);\n    return itemType === 'string' || itemType === 'function' || item instanceof RegExp;\n}\n/**\n * Returns true if value can be matched by at least one of the provided MatchOptions.\n * When comparing strings, setting useStartsWith to true will compare the value with the start of\n * the option, instead of requiring an exact match.\n */\nexport function matchList(list, value, useStartsWith) {\n    if (useStartsWith === void 0) { useStartsWith = false; }\n    return list.some(function (item) {\n        try {\n            if (typeof item === 'function') {\n                return item(value);\n            }\n            else if (item instanceof RegExp) {\n                return item.test(value);\n            }\n            else if (typeof item === 'string') {\n                return useStartsWith ? startsWith(value, item) : item === value;\n            }\n        }\n        catch (e) {\n            display.error(e);\n        }\n        return false;\n    });\n}\n","import { objectEntries, shallowClone, performDraw, isNumber, assign, find, getType, isMatchOption, matchList, TraceContextInjection, } from '@datadog/browser-core';\nexport function isTracingOption(item) {\n    var expectedItem = item;\n    return (getType(expectedItem) === 'object' &&\n        isMatchOption(expectedItem.match) &&\n        Array.isArray(expectedItem.propagatorTypes));\n}\n/**\n * Clear tracing information to avoid incomplete traces. Ideally, we should do it when the\n * request did not reach the server, but the browser does not expose this. So, we clear tracing\n * information if the request ended with status 0 without being aborted by the application.\n *\n * Reasoning:\n *\n * * Applications are usually aborting requests after a bit of time, for example when the user is\n * typing (autocompletion) or navigating away (in a SPA). With a performant device and good\n * network conditions, the request is likely to reach the server before being canceled.\n *\n * * Requests aborted otherwise (ex: lack of internet, CORS issue, blocked by a privacy extension)\n * are likely to finish quickly and without reaching the server.\n *\n * Of course, it might not be the case every time, but it should limit having incomplete traces a\n * bit.\n * */\nexport function clearTracingIfNeeded(context) {\n    if (context.status === 0 && !context.isAborted) {\n        context.traceId = undefined;\n        context.spanId = undefined;\n        context.traceSampled = undefined;\n    }\n}\nexport function startTracer(configuration, sessionManager) {\n    return {\n        clearTracingIfNeeded: clearTracingIfNeeded,\n        traceFetch: function (context) {\n            return injectHeadersIfTracingAllowed(configuration, context, sessionManager, function (tracingHeaders) {\n                var _a;\n                if (context.input instanceof Request && !((_a = context.init) === null || _a === void 0 ? void 0 : _a.headers)) {\n                    context.input = new Request(context.input);\n                    Object.keys(tracingHeaders).forEach(function (key) {\n                        ;\n                        context.input.headers.append(key, tracingHeaders[key]);\n                    });\n                }\n                else {\n                    context.init = shallowClone(context.init);\n                    var headers_1 = [];\n                    if (context.init.headers instanceof Headers) {\n                        context.init.headers.forEach(function (value, key) {\n                            headers_1.push([key, value]);\n                        });\n                    }\n                    else if (Array.isArray(context.init.headers)) {\n                        context.init.headers.forEach(function (header) {\n                            headers_1.push(header);\n                        });\n                    }\n                    else if (context.init.headers) {\n                        Object.keys(context.init.headers).forEach(function (key) {\n                            headers_1.push([key, context.init.headers[key]]);\n                        });\n                    }\n                    context.init.headers = headers_1.concat(objectEntries(tracingHeaders));\n                }\n            });\n        },\n        traceXhr: function (context, xhr) {\n            return injectHeadersIfTracingAllowed(configuration, context, sessionManager, function (tracingHeaders) {\n                Object.keys(tracingHeaders).forEach(function (name) {\n                    xhr.setRequestHeader(name, tracingHeaders[name]);\n                });\n            });\n        },\n    };\n}\nfunction injectHeadersIfTracingAllowed(configuration, context, sessionManager, inject) {\n    if (!isTracingSupported() || !sessionManager.findTrackedSession()) {\n        return;\n    }\n    var tracingOption = find(configuration.allowedTracingUrls, function (tracingOption) {\n        return matchList([tracingOption.match], context.url, true);\n    });\n    if (!tracingOption) {\n        return;\n    }\n    context.traceSampled = !isNumber(configuration.traceSampleRate) || performDraw(configuration.traceSampleRate);\n    if (!context.traceSampled && configuration.traceContextInjection !== TraceContextInjection.ALL) {\n        return;\n    }\n    context.traceId = new TraceIdentifier();\n    context.spanId = new TraceIdentifier();\n    inject(makeTracingHeaders(context.traceId, context.spanId, context.traceSampled, tracingOption.propagatorTypes));\n}\nexport function isTracingSupported() {\n    return getCrypto() !== undefined;\n}\nfunction getCrypto() {\n    return window.crypto || window.msCrypto;\n}\n/**\n * When trace is not sampled, set priority to '0' instead of not adding the tracing headers\n * to prepare the implementation for sampling delegation.\n */\nfunction makeTracingHeaders(traceId, spanId, traceSampled, propagatorTypes) {\n    var tracingHeaders = {};\n    propagatorTypes.forEach(function (propagatorType) {\n        switch (propagatorType) {\n            case 'datadog': {\n                assign(tracingHeaders, {\n                    'x-datadog-origin': 'rum',\n                    'x-datadog-parent-id': spanId.toDecimalString(),\n                    'x-datadog-sampling-priority': traceSampled ? '1' : '0',\n                    'x-datadog-trace-id': traceId.toDecimalString(),\n                });\n                break;\n            }\n            // https://www.w3.org/TR/trace-context/\n            case 'tracecontext': {\n                assign(tracingHeaders, {\n                    traceparent: \"00-0000000000000000\".concat(traceId.toPaddedHexadecimalString(), \"-\").concat(spanId.toPaddedHexadecimalString(), \"-0\").concat(traceSampled ? '1' : '0'),\n                });\n                break;\n            }\n            // https://github.com/openzipkin/b3-propagation\n            case 'b3': {\n                assign(tracingHeaders, {\n                    b3: \"\".concat(traceId.toPaddedHexadecimalString(), \"-\").concat(spanId.toPaddedHexadecimalString(), \"-\").concat(traceSampled ? '1' : '0'),\n                });\n                break;\n            }\n            case 'b3multi': {\n                assign(tracingHeaders, {\n                    'X-B3-TraceId': traceId.toPaddedHexadecimalString(),\n                    'X-B3-SpanId': spanId.toPaddedHexadecimalString(),\n                    'X-B3-Sampled': traceSampled ? '1' : '0',\n                });\n                break;\n            }\n        }\n    });\n    return tracingHeaders;\n}\n/* eslint-disable no-bitwise */\nvar TraceIdentifier = /** @class */ (function () {\n    function TraceIdentifier() {\n        this.buffer = new Uint8Array(8);\n        getCrypto().getRandomValues(this.buffer);\n        this.buffer[0] = this.buffer[0] & 0x7f; // force 63-bit\n    }\n    TraceIdentifier.prototype.toString = function (radix) {\n        var high = this.readInt32(0);\n        var low = this.readInt32(4);\n        var str = '';\n        do {\n            var mod = (high % radix) * 4294967296 + low;\n            high = Math.floor(high / radix);\n            low = Math.floor(mod / radix);\n            str = (mod % radix).toString(radix) + str;\n        } while (high || low);\n        return str;\n    };\n    /**\n     * Format used everywhere except the trace intake\n     */\n    TraceIdentifier.prototype.toDecimalString = function () {\n        return this.toString(10);\n    };\n    /**\n     * Format used by OTel headers\n     */\n    TraceIdentifier.prototype.toPaddedHexadecimalString = function () {\n        var traceId = this.toString(16);\n        return Array(17 - traceId.length).join('0') + traceId;\n    };\n    TraceIdentifier.prototype.readInt32 = function (offset) {\n        return (this.buffer[offset] * 16777216 +\n            (this.buffer[offset + 1] << 16) +\n            (this.buffer[offset + 2] << 8) +\n            this.buffer[offset + 3]);\n    };\n    return TraceIdentifier;\n}());\nexport { TraceIdentifier };\n/* eslint-enable no-bitwise */\n","import { getType, arrayFrom, isMatchOption, serializeConfiguration, assign, DefaultPrivacyLevel, TraceContextInjection, display, isPercentage, objectHasValue, validateAndBuildConfiguration, } from '@datadog/browser-core';\nimport { isTracingOption } from './tracing/tracer';\nexport var DEFAULT_PROPAGATOR_TYPES = ['tracecontext', 'datadog'];\nexport function validateAndBuildRumConfiguration(initConfiguration) {\n    var _a, _b;\n    if (!initConfiguration.applicationId) {\n        display.error('Application ID is not configured, no RUM data will be collected.');\n        return;\n    }\n    if (initConfiguration.sessionReplaySampleRate !== undefined &&\n        !isPercentage(initConfiguration.sessionReplaySampleRate)) {\n        display.error('Session Replay Sample Rate should be a number between 0 and 100');\n        return;\n    }\n    if (initConfiguration.traceSampleRate !== undefined && !isPercentage(initConfiguration.traceSampleRate)) {\n        display.error('Trace Sample Rate should be a number between 0 and 100');\n        return;\n    }\n    if (initConfiguration.excludedActivityUrls !== undefined && !Array.isArray(initConfiguration.excludedActivityUrls)) {\n        display.error('Excluded Activity Urls should be an array');\n        return;\n    }\n    var allowedTracingUrls = validateAndBuildTracingOptions(initConfiguration);\n    if (!allowedTracingUrls) {\n        return;\n    }\n    var baseConfiguration = validateAndBuildConfiguration(initConfiguration);\n    if (!baseConfiguration) {\n        return;\n    }\n    return assign({\n        applicationId: initConfiguration.applicationId,\n        version: initConfiguration.version,\n        actionNameAttribute: initConfiguration.actionNameAttribute,\n        sessionReplaySampleRate: (_a = initConfiguration.sessionReplaySampleRate) !== null && _a !== void 0 ? _a : 0,\n        startSessionReplayRecordingManually: !!initConfiguration.startSessionReplayRecordingManually,\n        traceSampleRate: initConfiguration.traceSampleRate,\n        allowedTracingUrls: allowedTracingUrls,\n        excludedActivityUrls: (_b = initConfiguration.excludedActivityUrls) !== null && _b !== void 0 ? _b : [],\n        workerUrl: initConfiguration.workerUrl,\n        compressIntakeRequests: !!initConfiguration.compressIntakeRequests,\n        trackUserInteractions: !!initConfiguration.trackUserInteractions,\n        trackViewsManually: !!initConfiguration.trackViewsManually,\n        trackResources: !!initConfiguration.trackResources,\n        trackLongTasks: !!initConfiguration.trackLongTasks,\n        subdomain: initConfiguration.subdomain,\n        defaultPrivacyLevel: objectHasValue(DefaultPrivacyLevel, initConfiguration.defaultPrivacyLevel)\n            ? initConfiguration.defaultPrivacyLevel\n            : DefaultPrivacyLevel.MASK,\n        customerDataTelemetrySampleRate: 1,\n        traceContextInjection: objectHasValue(TraceContextInjection, initConfiguration.traceContextInjection)\n            ? initConfiguration.traceContextInjection\n            : TraceContextInjection.ALL,\n    }, baseConfiguration);\n}\n/**\n * Validates allowedTracingUrls and converts match options to tracing options\n */\nfunction validateAndBuildTracingOptions(initConfiguration) {\n    if (initConfiguration.allowedTracingUrls !== undefined) {\n        if (!Array.isArray(initConfiguration.allowedTracingUrls)) {\n            display.error('Allowed Tracing URLs should be an array');\n            return;\n        }\n        if (initConfiguration.allowedTracingUrls.length !== 0 && initConfiguration.service === undefined) {\n            display.error('Service needs to be configured when tracing is enabled');\n            return;\n        }\n        // Convert from (MatchOption | TracingOption) to TracingOption, remove unknown properties\n        var tracingOptions_1 = [];\n        initConfiguration.allowedTracingUrls.forEach(function (option) {\n            if (isMatchOption(option)) {\n                tracingOptions_1.push({ match: option, propagatorTypes: DEFAULT_PROPAGATOR_TYPES });\n            }\n            else if (isTracingOption(option)) {\n                tracingOptions_1.push(option);\n            }\n            else {\n                display.warn('Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter', option);\n            }\n        });\n        return tracingOptions_1;\n    }\n    return [];\n}\n/**\n * Combines the selected tracing propagators from the different options in allowedTracingUrls\n */\nfunction getSelectedTracingPropagators(configuration) {\n    var usedTracingPropagators = new Set();\n    if (Array.isArray(configuration.allowedTracingUrls) && configuration.allowedTracingUrls.length > 0) {\n        configuration.allowedTracingUrls.forEach(function (option) {\n            if (isMatchOption(option)) {\n                DEFAULT_PROPAGATOR_TYPES.forEach(function (propagatorType) { return usedTracingPropagators.add(propagatorType); });\n            }\n            else if (getType(option) === 'object' && Array.isArray(option.propagatorTypes)) {\n                // Ensure we have an array, as we cannot rely on types yet (configuration is provided by users)\n                option.propagatorTypes.forEach(function (propagatorType) { return usedTracingPropagators.add(propagatorType); });\n            }\n        });\n    }\n    return arrayFrom(usedTracingPropagators);\n}\nexport function serializeRumConfiguration(configuration) {\n    var baseSerializedConfiguration = serializeConfiguration(configuration);\n    return assign({\n        session_replay_sample_rate: configuration.sessionReplaySampleRate,\n        start_session_replay_recording_manually: configuration.startSessionReplayRecordingManually,\n        trace_sample_rate: configuration.traceSampleRate,\n        trace_context_injection: configuration.traceContextInjection,\n        action_name_attribute: configuration.actionNameAttribute,\n        use_allowed_tracing_urls: Array.isArray(configuration.allowedTracingUrls) && configuration.allowedTracingUrls.length > 0,\n        selected_tracing_propagators: getSelectedTracingPropagators(configuration),\n        default_privacy_level: configuration.defaultPrivacyLevel,\n        use_excluded_activity_urls: Array.isArray(configuration.excludedActivityUrls) && configuration.excludedActivityUrls.length > 0,\n        use_worker_url: !!configuration.workerUrl,\n        compress_intake_requests: configuration.compressIntakeRequests,\n        track_views_manually: configuration.trackViewsManually,\n        track_user_interactions: configuration.trackUserInteractions,\n        track_resources: configuration.trackResources,\n        track_long_task: configuration.trackLongTasks,\n    }, baseSerializedConfiguration);\n}\n","import { BoundedBuffer, display, canUseEventBridge, displayAlreadyInitializedError, willSyntheticsInjectRum, noop, timeStampNow, clocksNow, assign, getEventBridge, } from '@datadog/browser-core';\nimport { validateAndBuildRumConfiguration, } from '../domain/configuration';\nexport function createPreStartStrategy(_a, getCommonContext, trackingConsentState, doStartRum) {\n    var ignoreInitIfSyntheticsWillInjectRum = _a.ignoreInitIfSyntheticsWillInjectRum, startDeflateWorker = _a.startDeflateWorker;\n    var bufferApiCalls = new BoundedBuffer();\n    var firstStartViewCall;\n    var deflateWorker;\n    var cachedInitConfiguration;\n    var cachedConfiguration;\n    var trackingConsentStateSubscription = trackingConsentState.observable.subscribe(tryStartRum);\n    function tryStartRum() {\n        if (!cachedInitConfiguration || !cachedConfiguration || !trackingConsentState.isGranted()) {\n            return;\n        }\n        trackingConsentStateSubscription.unsubscribe();\n        var initialViewOptions;\n        if (cachedConfiguration.trackViewsManually) {\n            if (!firstStartViewCall) {\n                return;\n            }\n            // An initial view is always created when starting RUM.\n            // When tracking views automatically, any startView call before RUM start creates an extra\n            // view.\n            // When tracking views manually, we use the ViewOptions from the first startView call as the\n            // initial view options, and we remove the actual startView call so we don't create an extra\n            // view.\n            bufferApiCalls.remove(firstStartViewCall.callback);\n            initialViewOptions = firstStartViewCall.options;\n        }\n        var startRumResult = doStartRum(cachedInitConfiguration, cachedConfiguration, deflateWorker, initialViewOptions);\n        bufferApiCalls.drain(startRumResult);\n    }\n    return {\n        init: function (initConfiguration) {\n            if (!initConfiguration) {\n                display.error('Missing configuration');\n                return;\n            }\n            var eventBridgeAvailable = canUseEventBridge();\n            if (eventBridgeAvailable) {\n                initConfiguration = overrideInitConfigurationForBridge(initConfiguration);\n            }\n            // Expose the initial configuration regardless of initialization success.\n            cachedInitConfiguration = initConfiguration;\n            if (cachedConfiguration) {\n                displayAlreadyInitializedError('DD_RUM', initConfiguration);\n                return;\n            }\n            // If we are in a Synthetics test configured to automatically inject a RUM instance, we want\n            // to completely discard the customer application RUM instance by ignoring their init() call.\n            // But, we should not ignore the init() call from the Synthetics-injected RUM instance, so the\n            // internal `ignoreInitIfSyntheticsWillInjectRum` option is here to bypass this condition.\n            if (ignoreInitIfSyntheticsWillInjectRum && willSyntheticsInjectRum()) {\n                return;\n            }\n            var configuration = validateAndBuildRumConfiguration(initConfiguration);\n            if (!configuration) {\n                return;\n            }\n            if (!eventBridgeAvailable && !configuration.sessionStoreStrategyType) {\n                display.warn('No storage available for session. We will not send any data.');\n                return;\n            }\n            if (configuration.compressIntakeRequests && !eventBridgeAvailable && startDeflateWorker) {\n                deflateWorker = startDeflateWorker(configuration, 'Datadog RUM', \n                // Worker initialization can fail asynchronously, especially in Firefox where even CSP\n                // issues are reported asynchronously. For now, the SDK will continue its execution even if\n                // data won't be sent to Datadog. We could improve this behavior in the future.\n                noop);\n                if (!deflateWorker) {\n                    // `startDeflateWorker` should have logged an error message explaining the issue\n                    return;\n                }\n            }\n            cachedConfiguration = configuration;\n            trackingConsentState.tryToInit(configuration.trackingConsent);\n            tryStartRum();\n        },\n        get initConfiguration() {\n            return cachedInitConfiguration;\n        },\n        getInternalContext: noop,\n        stopSession: noop,\n        addTiming: function (name, time) {\n            if (time === void 0) { time = timeStampNow(); }\n            bufferApiCalls.add(function (startRumResult) { return startRumResult.addTiming(name, time); });\n        },\n        startView: function (options, startClocks) {\n            if (startClocks === void 0) { startClocks = clocksNow(); }\n            var callback = function (startRumResult) {\n                startRumResult.startView(options, startClocks);\n            };\n            bufferApiCalls.add(callback);\n            if (!firstStartViewCall) {\n                firstStartViewCall = { options: options, callback: callback };\n                tryStartRum();\n            }\n        },\n        addAction: function (action, commonContext) {\n            if (commonContext === void 0) { commonContext = getCommonContext(); }\n            bufferApiCalls.add(function (startRumResult) { return startRumResult.addAction(action, commonContext); });\n        },\n        addError: function (providedError, commonContext) {\n            if (commonContext === void 0) { commonContext = getCommonContext(); }\n            bufferApiCalls.add(function (startRumResult) { return startRumResult.addError(providedError, commonContext); });\n        },\n        addFeatureFlagEvaluation: function (key, value) {\n            bufferApiCalls.add(function (startRumResult) { return startRumResult.addFeatureFlagEvaluation(key, value); });\n        },\n        startDurationVital: function (vitalStart) {\n            bufferApiCalls.add(function (startRumResult) { return startRumResult.startDurationVital(vitalStart); });\n        },\n        stopDurationVital: function (vitalStart) {\n            bufferApiCalls.add(function (startRumResult) { return startRumResult.stopDurationVital(vitalStart); });\n        },\n    };\n}\nfunction overrideInitConfigurationForBridge(initConfiguration) {\n    var _a, _b;\n    return assign({}, initConfiguration, {\n        applicationId: '00000000-aaaa-0000-aaaa-000000000000',\n        clientToken: 'empty',\n        sessionSampleRate: 100,\n        defaultPrivacyLevel: (_a = initConfiguration.defaultPrivacyLevel) !== null && _a !== void 0 ? _a : (_b = getEventBridge()) === null || _b === void 0 ? void 0 : _b.getPrivacyLevel(),\n    });\n}\n","import { isExperimentalFeatureEnabled, ExperimentalFeature } from '../tools/experimentalFeatures';\nimport { Observable } from '../tools/observable';\nimport { objectValues, includes } from '../tools/utils/polyfills';\nimport { noop } from '../tools/utils/functionUtils';\nimport { addEventListeners, addEventListener, DOM_EVENT } from './addEventListener';\nexport var PageExitReason = {\n    HIDDEN: 'visibility_hidden',\n    UNLOADING: 'before_unload',\n    PAGEHIDE: 'page_hide',\n    FROZEN: 'page_frozen',\n};\nexport function createPageExitObservable(configuration) {\n    return new Observable(function (observable) {\n        var pagehideEnabled = isExperimentalFeatureEnabled(ExperimentalFeature.PAGEHIDE);\n        var stopListeners = addEventListeners(configuration, window, [DOM_EVENT.VISIBILITY_CHANGE, DOM_EVENT.FREEZE, DOM_EVENT.PAGE_HIDE], function (event) {\n            if (event.type === DOM_EVENT.PAGE_HIDE && pagehideEnabled) {\n                /**\n                 * Only event that detect page unload events while being compatible with the back/forward cache (bfcache)\n                 */\n                observable.notify({ reason: PageExitReason.PAGEHIDE });\n            }\n            else if (event.type === DOM_EVENT.VISIBILITY_CHANGE && document.visibilityState === 'hidden') {\n                /**\n                 * Only event that guarantee to fire on mobile devices when the page transitions to background state\n                 * (e.g. when user switches to a different application, goes to homescreen, etc), or is being unloaded.\n                 */\n                observable.notify({ reason: PageExitReason.HIDDEN });\n            }\n            else if (event.type === DOM_EVENT.FREEZE) {\n                /**\n                 * After transitioning in background a tab can be freezed to preserve resources. (cf: https://developer.chrome.com/blog/page-lifecycle-api)\n                 * Allow to collect events happening between hidden and frozen state.\n                 */\n                observable.notify({ reason: PageExitReason.FROZEN });\n            }\n        }, { capture: true }).stop;\n        var stopBeforeUnloadListener = noop;\n        if (!pagehideEnabled) {\n            stopBeforeUnloadListener = addEventListener(configuration, window, DOM_EVENT.BEFORE_UNLOAD, function () {\n                observable.notify({ reason: PageExitReason.UNLOADING });\n            }).stop;\n        }\n        return function () {\n            stopListeners();\n            stopBeforeUnloadListener();\n        };\n    });\n}\nexport function isPageExitReason(reason) {\n    return includes(objectValues(PageExitReason), reason);\n}\n","import { monitor, noop, Observable, getZoneJsOriginalValue } from '@datadog/browser-core';\nexport function createDOMMutationObservable() {\n    var MutationObserver = getMutationObserverConstructor();\n    return new Observable(function (observable) {\n        if (!MutationObserver) {\n            return;\n        }\n        var observer = new MutationObserver(monitor(function () { return observable.notify(); }));\n        observer.observe(document, {\n            attributes: true,\n            characterData: true,\n            childList: true,\n            subtree: true,\n        });\n        return function () { return observer.disconnect(); };\n    });\n}\nexport function getMutationObserverConstructor() {\n    var constructor;\n    var browserWindow = window;\n    // Angular uses Zone.js to provide a context persisting across async tasks.  Zone.js replaces the\n    // global MutationObserver constructor with a patched version to support the context propagation.\n    // There is an ongoing issue[1][2] with this setup when using a MutationObserver within a Angular\n    // component: on some occasions, the callback is being called in an infinite loop, causing the\n    // page to freeze (even if the callback is completely empty).\n    //\n    // To work around this issue, we try to get the original MutationObserver constructor stored by\n    // Zone.js.\n    //\n    // [1] https://github.com/angular/angular/issues/26948\n    // [2] https://github.com/angular/angular/issues/31712\n    if (browserWindow.Zone) {\n        // Zone.js 0.8.6+ is storing original class constructors into the browser 'window' object[3].\n        //\n        // [3] https://github.com/angular/angular/blob/6375fa79875c0fe7b815efc45940a6e6f5c9c9eb/packages/zone.js/lib/common/utils.ts#L288\n        constructor = getZoneJsOriginalValue(browserWindow, 'MutationObserver');\n        if (browserWindow.MutationObserver && constructor === browserWindow.MutationObserver) {\n            // Anterior Zone.js versions (used in Angular 2) does not expose the original MutationObserver\n            // in the 'window' object. Luckily, the patched MutationObserver class is storing an original\n            // instance in its properties[4]. Let's get the original MutationObserver constructor from\n            // there.\n            //\n            // [4] https://github.com/angular/zone.js/blob/v0.8.5/lib/common/utils.ts#L412\n            var patchedInstance = new browserWindow.MutationObserver(noop);\n            var originalInstance = getZoneJsOriginalValue(patchedInstance, 'originalInstance');\n            constructor = originalInstance && originalInstance.constructor;\n        }\n    }\n    if (!constructor) {\n        constructor = browserWindow.MutationObserver;\n    }\n    return constructor;\n}\n","import { DOM_EVENT, addEventListener } from './addEventListener';\nexport function runOnReadyState(configuration, expectedReadyState, callback) {\n    if (document.readyState === expectedReadyState || document.readyState === 'complete') {\n        callback();\n    }\n    else {\n        var eventName = expectedReadyState === 'complete' ? DOM_EVENT.LOAD : DOM_EVENT.DOM_CONTENT_LOADED;\n        addEventListener(configuration, window, eventName, callback, { once: true });\n    }\n}\n","import { addTelemetryDebug, elapsed, ExperimentalFeature, getPathName, includes, isExperimentalFeatureEnabled, isValidUrl, toServerDuration, } from '@datadog/browser-core';\nexport var FAKE_INITIAL_DOCUMENT = 'initial_document';\nvar RESOURCE_TYPES = [\n    [\"document\" /* ResourceType.DOCUMENT */, function (initiatorType) { return FAKE_INITIAL_DOCUMENT === initiatorType; }],\n    [\"xhr\" /* ResourceType.XHR */, function (initiatorType) { return 'xmlhttprequest' === initiatorType; }],\n    [\"fetch\" /* ResourceType.FETCH */, function (initiatorType) { return 'fetch' === initiatorType; }],\n    [\"beacon\" /* ResourceType.BEACON */, function (initiatorType) { return 'beacon' === initiatorType; }],\n    [\"css\" /* ResourceType.CSS */, function (_, path) { return /\\.css$/i.test(path); }],\n    [\"js\" /* ResourceType.JS */, function (_, path) { return /\\.js$/i.test(path); }],\n    [\n        \"image\" /* ResourceType.IMAGE */,\n        function (initiatorType, path) {\n            return includes(['image', 'img', 'icon'], initiatorType) || /\\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(path) !== null;\n        },\n    ],\n    [\"font\" /* ResourceType.FONT */, function (_, path) { return /\\.(woff|eot|woff2|ttf)$/i.exec(path) !== null; }],\n    [\n        \"media\" /* ResourceType.MEDIA */,\n        function (initiatorType, path) {\n            return includes(['audio', 'video'], initiatorType) || /\\.(mp3|mp4)$/i.exec(path) !== null;\n        },\n    ],\n];\nexport function computeResourceKind(timing) {\n    var url = timing.name;\n    if (!isValidUrl(url)) {\n        addTelemetryDebug(\"Failed to construct URL for \\\"\".concat(timing.name, \"\\\"\"));\n        return \"other\" /* ResourceType.OTHER */;\n    }\n    var path = getPathName(url);\n    for (var _i = 0, RESOURCE_TYPES_1 = RESOURCE_TYPES; _i < RESOURCE_TYPES_1.length; _i++) {\n        var _a = RESOURCE_TYPES_1[_i], type = _a[0], isType = _a[1];\n        if (isType(timing.initiatorType, path)) {\n            return type;\n        }\n    }\n    return \"other\" /* ResourceType.OTHER */;\n}\nfunction areInOrder() {\n    var numbers = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        numbers[_i] = arguments[_i];\n    }\n    for (var i = 1; i < numbers.length; i += 1) {\n        if (numbers[i - 1] > numbers[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function isRequestKind(timing) {\n    return timing.initiatorType === 'xmlhttprequest' || timing.initiatorType === 'fetch';\n}\nexport function computePerformanceResourceDuration(entry) {\n    var duration = entry.duration, startTime = entry.startTime, responseEnd = entry.responseEnd;\n    // Safari duration is always 0 on timings blocked by cross origin policies.\n    if (duration === 0 && startTime < responseEnd) {\n        return toServerDuration(elapsed(startTime, responseEnd));\n    }\n    return toServerDuration(duration);\n}\nexport function computePerformanceResourceDetails(entry) {\n    var validEntry = toValidEntry(entry);\n    if (!validEntry) {\n        return undefined;\n    }\n    var startTime = validEntry.startTime, fetchStart = validEntry.fetchStart, redirectStart = validEntry.redirectStart, redirectEnd = validEntry.redirectEnd, domainLookupStart = validEntry.domainLookupStart, domainLookupEnd = validEntry.domainLookupEnd, connectStart = validEntry.connectStart, secureConnectionStart = validEntry.secureConnectionStart, connectEnd = validEntry.connectEnd, requestStart = validEntry.requestStart, responseStart = validEntry.responseStart, responseEnd = validEntry.responseEnd;\n    var details = {\n        download: formatTiming(startTime, responseStart, responseEnd),\n        first_byte: formatTiming(startTime, requestStart, responseStart),\n    };\n    // Make sure a connection occurred\n    if (fetchStart < connectEnd) {\n        details.connect = formatTiming(startTime, connectStart, connectEnd);\n        // Make sure a secure connection occurred\n        if (connectStart <= secureConnectionStart && secureConnectionStart <= connectEnd) {\n            details.ssl = formatTiming(startTime, secureConnectionStart, connectEnd);\n        }\n    }\n    // Make sure a domain lookup occurred\n    if (fetchStart < domainLookupEnd) {\n        details.dns = formatTiming(startTime, domainLookupStart, domainLookupEnd);\n    }\n    // Make sure a redirection occurred\n    if (startTime < redirectEnd) {\n        details.redirect = formatTiming(startTime, redirectStart, redirectEnd);\n    }\n    return details;\n}\nexport function toValidEntry(entry) {\n    if (isExperimentalFeatureEnabled(ExperimentalFeature.TOLERANT_RESOURCE_TIMINGS)) {\n        return entry;\n    }\n    // Ensure timings are in the right order. On top of filtering out potential invalid\n    // RumPerformanceResourceTiming, it will ignore entries from requests where timings cannot be\n    // collected, for example cross origin requests without a \"Timing-Allow-Origin\" header allowing\n    // it.\n    var areCommonTimingsInOrder = areInOrder(entry.startTime, entry.fetchStart, entry.domainLookupStart, entry.domainLookupEnd, entry.connectStart, entry.connectEnd, entry.requestStart, entry.responseStart, entry.responseEnd);\n    var areRedirectionTimingsInOrder = hasRedirection(entry)\n        ? areInOrder(entry.startTime, entry.redirectStart, entry.redirectEnd, entry.fetchStart)\n        : true;\n    if (areCommonTimingsInOrder && areRedirectionTimingsInOrder) {\n        return entry;\n    }\n}\nfunction hasRedirection(entry) {\n    return entry.redirectEnd > entry.startTime;\n}\nfunction formatTiming(origin, start, end) {\n    if (origin <= start && start <= end) {\n        return {\n            duration: toServerDuration(elapsed(start, end)),\n            start: toServerDuration(elapsed(origin, start)),\n        };\n    }\n}\nexport function computeSize(entry) {\n    // Make sure a request actually occurred\n    if (entry.startTime < entry.responseStart) {\n        var encodedBodySize = entry.encodedBodySize, decodedBodySize = entry.decodedBodySize, transferSize = entry.transferSize;\n        return {\n            size: decodedBodySize,\n            encoded_body_size: encodedBodySize,\n            decoded_body_size: decodedBodySize,\n            transfer_size: transferSize,\n        };\n    }\n    return {\n        size: undefined,\n        encoded_body_size: undefined,\n        decoded_body_size: undefined,\n        transfer_size: undefined,\n    };\n}\nexport function isAllowedRequestUrl(configuration, url) {\n    return url && !configuration.isIntakeUrl(url);\n}\nvar DATA_URL_REGEX = /data:(.+)?(;base64)?,/g;\nexport var MAX_ATTRIBUTE_VALUE_CHAR_LENGTH = 24000;\nexport function isLongDataUrl(url) {\n    if (url.length <= MAX_ATTRIBUTE_VALUE_CHAR_LENGTH) {\n        return false;\n    }\n    else if (url.substring(0, 5) === 'data:') {\n        // Avoid String.match RangeError: Maximum call stack size exceeded\n        url = url.substring(0, MAX_ATTRIBUTE_VALUE_CHAR_LENGTH);\n        return true;\n    }\n    return false;\n}\nexport function sanitizeDataUrl(url) {\n    return \"\".concat(url.match(DATA_URL_REGEX)[0], \"[...]\");\n}\n","export function isTextNode(node) {\n    return node.nodeType === Node.TEXT_NODE;\n}\nexport function isCommentNode(node) {\n    return node.nodeType === Node.COMMENT_NODE;\n}\nexport function isElementNode(node) {\n    return node.nodeType === Node.ELEMENT_NODE;\n}\nexport function isNodeShadowHost(node) {\n    return isElementNode(node) && Boolean(node.shadowRoot);\n}\nexport function isNodeShadowRoot(node) {\n    var shadowRoot = node;\n    return !!shadowRoot.host && shadowRoot.nodeType === Node.DOCUMENT_FRAGMENT_NODE && isElementNode(shadowRoot.host);\n}\nexport function hasChildNodes(node) {\n    return node.childNodes.length > 0 || isNodeShadowHost(node);\n}\nexport function forEachChildNodes(node, callback) {\n    var child = node.firstChild;\n    while (child) {\n        callback(child);\n        child = child.nextSibling;\n    }\n    if (isNodeShadowHost(node)) {\n        callback(node.shadowRoot);\n    }\n}\n/**\n * Return `host` in case if the current node is a shadow root otherwise will return the `parentNode`\n */\nexport function getParentNode(node) {\n    return isNodeShadowRoot(node) ? node.host : node.parentNode;\n}\n","import { dateNow, findCommaSeparatedValue, ONE_MINUTE } from '@datadog/browser-core';\nimport { isCommentNode, isTextNode } from '../../browser/htmlDomUtils';\nexport var INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD = 2 * ONE_MINUTE;\nexport function getDocumentTraceId(document) {\n    var data = getDocumentTraceDataFromMeta(document) || getDocumentTraceDataFromComment(document);\n    if (!data || data.traceTime <= dateNow() - INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD) {\n        return undefined;\n    }\n    return data.traceId;\n}\nexport function getDocumentTraceDataFromMeta(document) {\n    var traceIdMeta = document.querySelector('meta[name=dd-trace-id]');\n    var traceTimeMeta = document.querySelector('meta[name=dd-trace-time]');\n    return createDocumentTraceData(traceIdMeta && traceIdMeta.content, traceTimeMeta && traceTimeMeta.content);\n}\nexport function getDocumentTraceDataFromComment(document) {\n    var comment = findTraceComment(document);\n    if (!comment) {\n        return undefined;\n    }\n    return createDocumentTraceData(findCommaSeparatedValue(comment, 'trace-id'), findCommaSeparatedValue(comment, 'trace-time'));\n}\nexport function createDocumentTraceData(traceId, rawTraceTime) {\n    var traceTime = rawTraceTime && Number(rawTraceTime);\n    if (!traceId || !traceTime) {\n        return undefined;\n    }\n    return {\n        traceId: traceId,\n        traceTime: traceTime,\n    };\n}\nexport function findTraceComment(document) {\n    // 1. Try to find the comment as a direct child of the document\n    // Note: TSLint advises to use a 'for of', but TS doesn't allow to use 'for of' if the iterated\n    // value is not an array or string (here, a NodeList).\n    for (var i = 0; i < document.childNodes.length; i += 1) {\n        var comment = getTraceCommentFromNode(document.childNodes[i]);\n        if (comment) {\n            return comment;\n        }\n    }\n    // 2. If the comment is placed after the </html> tag, but have some space or new lines before or\n    // after, the DOM parser will lift it (and the surrounding text) at the end of the <body> tag.\n    // Try to look for the comment at the end of the <body> by by iterating over its child nodes in\n    // reverse order, stopping if we come across a non-text node.\n    if (document.body) {\n        for (var i = document.body.childNodes.length - 1; i >= 0; i -= 1) {\n            var node = document.body.childNodes[i];\n            var comment = getTraceCommentFromNode(node);\n            if (comment) {\n                return comment;\n            }\n            if (!isTextNode(node)) {\n                break;\n            }\n        }\n    }\n}\nfunction getTraceCommentFromNode(node) {\n    if (node && isCommentNode(node)) {\n        var match = /^\\s*DATADOG;(.*?)\\s*$/.exec(node.data);\n        if (match) {\n            return match[1];\n        }\n    }\n}\n","import { dateNow, assign, addEventListeners, DOM_EVENT, getRelativeTime, isNumber, monitor, setTimeout, relativeNow, runOnReadyState, addEventListener, objectHasValue, } from '@datadog/browser-core';\nimport { FAKE_INITIAL_DOCUMENT, isAllowedRequestUrl } from '../domain/resource/resourceUtils';\nimport { getDocumentTraceId } from '../domain/tracing/getDocumentTraceId';\n// We want to use a real enum (i.e. not a const enum) here, to be able to check whether an arbitrary\n// string is an expected performance entry\n// eslint-disable-next-line no-restricted-syntax\nexport var RumPerformanceEntryType;\n(function (RumPerformanceEntryType) {\n    RumPerformanceEntryType[\"EVENT\"] = \"event\";\n    RumPerformanceEntryType[\"FIRST_INPUT\"] = \"first-input\";\n    RumPerformanceEntryType[\"LARGEST_CONTENTFUL_PAINT\"] = \"largest-contentful-paint\";\n    RumPerformanceEntryType[\"LAYOUT_SHIFT\"] = \"layout-shift\";\n    RumPerformanceEntryType[\"LONG_TASK\"] = \"longtask\";\n    RumPerformanceEntryType[\"NAVIGATION\"] = \"navigation\";\n    RumPerformanceEntryType[\"PAINT\"] = \"paint\";\n    RumPerformanceEntryType[\"RESOURCE\"] = \"resource\";\n})(RumPerformanceEntryType || (RumPerformanceEntryType = {}));\nfunction supportPerformanceObject() {\n    return window.performance !== undefined && 'getEntries' in performance;\n}\nexport function supportPerformanceTimingEvent(entryType) {\n    return (window.PerformanceObserver &&\n        PerformanceObserver.supportedEntryTypes !== undefined &&\n        PerformanceObserver.supportedEntryTypes.includes(entryType));\n}\nexport function startPerformanceCollection(lifeCycle, configuration) {\n    var cleanupTasks = [];\n    retrieveInitialDocumentResourceTiming(configuration, function (timing) {\n        handleRumPerformanceEntries(lifeCycle, configuration, [timing]);\n    });\n    if (supportPerformanceObject()) {\n        var performanceEntries_1 = performance.getEntries();\n        // Because the performance entry list can be quite large\n        // delay the computation to prevent the SDK from blocking the main thread on init\n        setTimeout(function () { return handleRumPerformanceEntries(lifeCycle, configuration, performanceEntries_1); });\n    }\n    if (window.PerformanceObserver) {\n        var handlePerformanceEntryList_1 = monitor(function (entries) {\n            return handleRumPerformanceEntries(lifeCycle, configuration, entries.getEntries());\n        });\n        var mainEntries = [\n            RumPerformanceEntryType.RESOURCE,\n            RumPerformanceEntryType.NAVIGATION,\n            RumPerformanceEntryType.LONG_TASK,\n            RumPerformanceEntryType.PAINT,\n        ];\n        var experimentalEntries = [\n            RumPerformanceEntryType.LARGEST_CONTENTFUL_PAINT,\n            RumPerformanceEntryType.FIRST_INPUT,\n            RumPerformanceEntryType.LAYOUT_SHIFT,\n            RumPerformanceEntryType.EVENT,\n        ];\n        try {\n            // Experimental entries are not retrieved by performance.getEntries()\n            // use a single PerformanceObserver with buffered flag by type\n            // to get values that could happen before SDK init\n            experimentalEntries.forEach(function (type) {\n                var observer = new window.PerformanceObserver(handlePerformanceEntryList_1);\n                observer.observe({\n                    type: type,\n                    buffered: true,\n                    // durationThreshold only impact PerformanceEventTiming entries used for INP computation which requires a threshold at 40 (default is 104ms)\n                    // cf: https://github.com/GoogleChrome/web-vitals/blob/3806160ffbc93c3c4abf210a167b81228172b31c/src/onINP.ts#L209\n                    durationThreshold: 40,\n                });\n                cleanupTasks.push(function () { return observer.disconnect(); });\n            });\n        }\n        catch (e) {\n            // Some old browser versions (ex: chrome 67) don't support the PerformanceObserver type and buffered options\n            // In these cases, fallback to PerformanceObserver with entryTypes\n            mainEntries.push.apply(mainEntries, experimentalEntries);\n        }\n        var mainObserver_1 = new PerformanceObserver(handlePerformanceEntryList_1);\n        mainObserver_1.observe({ entryTypes: mainEntries });\n        cleanupTasks.push(function () { return mainObserver_1.disconnect(); });\n        if (supportPerformanceObject() && 'addEventListener' in performance) {\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1559377\n            var removePerformanceListener = addEventListener(configuration, performance, 'resourcetimingbufferfull', function () {\n                performance.clearResourceTimings();\n            }).stop;\n            cleanupTasks.push(removePerformanceListener);\n        }\n    }\n    if (!supportPerformanceTimingEvent(RumPerformanceEntryType.NAVIGATION)) {\n        retrieveNavigationTiming(configuration, function (timing) {\n            handleRumPerformanceEntries(lifeCycle, configuration, [timing]);\n        });\n    }\n    if (!supportPerformanceTimingEvent(RumPerformanceEntryType.FIRST_INPUT)) {\n        var stopFirstInputTiming = retrieveFirstInputTiming(configuration, function (timing) {\n            handleRumPerformanceEntries(lifeCycle, configuration, [timing]);\n        }).stop;\n        cleanupTasks.push(stopFirstInputTiming);\n    }\n    return {\n        stop: function () {\n            cleanupTasks.forEach(function (task) { return task(); });\n        },\n    };\n}\nexport function retrieveInitialDocumentResourceTiming(configuration, callback) {\n    runOnReadyState(configuration, 'interactive', function () {\n        var timing;\n        var forcedAttributes = {\n            entryType: RumPerformanceEntryType.RESOURCE,\n            initiatorType: FAKE_INITIAL_DOCUMENT,\n            traceId: getDocumentTraceId(document),\n            toJSON: function () { return assign({}, timing, { toJSON: undefined }); },\n        };\n        if (supportPerformanceTimingEvent(RumPerformanceEntryType.NAVIGATION) &&\n            performance.getEntriesByType(RumPerformanceEntryType.NAVIGATION).length > 0) {\n            var navigationEntry = performance.getEntriesByType(RumPerformanceEntryType.NAVIGATION)[0];\n            timing = assign(navigationEntry.toJSON(), forcedAttributes);\n        }\n        else {\n            var relativePerformanceTiming = computeRelativePerformanceTiming();\n            timing = assign(relativePerformanceTiming, {\n                decodedBodySize: 0,\n                encodedBodySize: 0,\n                transferSize: 0,\n                renderBlockingStatus: 'non-blocking',\n                duration: relativePerformanceTiming.responseEnd,\n                name: window.location.href,\n                startTime: 0,\n            }, forcedAttributes);\n        }\n        callback(timing);\n    });\n}\nfunction retrieveNavigationTiming(configuration, callback) {\n    function sendFakeTiming() {\n        callback(assign(computeRelativePerformanceTiming(), {\n            entryType: RumPerformanceEntryType.NAVIGATION,\n        }));\n    }\n    runOnReadyState(configuration, 'complete', function () {\n        // Send it a bit after the actual load event, so the \"loadEventEnd\" timing is accurate\n        setTimeout(sendFakeTiming);\n    });\n}\n/**\n * first-input timing entry polyfill based on\n * https://github.com/GoogleChrome/web-vitals/blob/master/src/lib/polyfills/firstInputPolyfill.ts\n */\nfunction retrieveFirstInputTiming(configuration, callback) {\n    var startTimeStamp = dateNow();\n    var timingSent = false;\n    var removeEventListeners = addEventListeners(configuration, window, [DOM_EVENT.CLICK, DOM_EVENT.MOUSE_DOWN, DOM_EVENT.KEY_DOWN, DOM_EVENT.TOUCH_START, DOM_EVENT.POINTER_DOWN], function (evt) {\n        // Only count cancelable events, which should trigger behavior important to the user.\n        if (!evt.cancelable) {\n            return;\n        }\n        // This timing will be used to compute the \"first Input delay\", which is the delta between\n        // when the system received the event (e.g. evt.timeStamp) and when it could run the callback\n        // (e.g. performance.now()).\n        var timing = {\n            entryType: RumPerformanceEntryType.FIRST_INPUT,\n            processingStart: relativeNow(),\n            processingEnd: relativeNow(),\n            startTime: evt.timeStamp,\n            duration: 0, // arbitrary value to avoid nullable duration and simplify INP logic\n            name: '',\n        };\n        if (evt.type === DOM_EVENT.POINTER_DOWN) {\n            sendTimingIfPointerIsNotCancelled(configuration, timing);\n        }\n        else {\n            sendTiming(timing);\n        }\n    }, { passive: true, capture: true }).stop;\n    return { stop: removeEventListeners };\n    /**\n     * Pointer events are a special case, because they can trigger main or compositor thread behavior.\n     * We differentiate these cases based on whether or not we see a pointercancel event, which are\n     * fired when we scroll. If we're scrolling we don't need to report input delay since FID excludes\n     * scrolling and pinch/zooming.\n     */\n    function sendTimingIfPointerIsNotCancelled(configuration, timing) {\n        addEventListeners(configuration, window, [DOM_EVENT.POINTER_UP, DOM_EVENT.POINTER_CANCEL], function (event) {\n            if (event.type === DOM_EVENT.POINTER_UP) {\n                sendTiming(timing);\n            }\n        }, { once: true });\n    }\n    function sendTiming(timing) {\n        if (!timingSent) {\n            timingSent = true;\n            removeEventListeners();\n            // In some cases the recorded delay is clearly wrong, e.g. it's negative or it's larger than\n            // the time between now and when the page was loaded.\n            // - https://github.com/GoogleChromeLabs/first-input-delay/issues/4\n            // - https://github.com/GoogleChromeLabs/first-input-delay/issues/6\n            // - https://github.com/GoogleChromeLabs/first-input-delay/issues/7\n            var delay = timing.processingStart - timing.startTime;\n            if (delay >= 0 && delay < dateNow() - startTimeStamp) {\n                callback(timing);\n            }\n        }\n    }\n}\nfunction computeRelativePerformanceTiming() {\n    var result = {};\n    var timing = performance.timing;\n    for (var key in timing) {\n        if (isNumber(timing[key])) {\n            var numberKey = key;\n            var timingElement = timing[numberKey];\n            result[numberKey] = timingElement === 0 ? 0 : getRelativeTime(timingElement);\n        }\n    }\n    return result;\n}\nfunction handleRumPerformanceEntries(lifeCycle, configuration, entries) {\n    var rumPerformanceEntries = entries.filter(function (entry) {\n        return objectHasValue(RumPerformanceEntryType, entry.entryType);\n    });\n    var rumAllowedPerformanceEntries = rumPerformanceEntries.filter(function (entry) { return !isIncompleteNavigation(entry) && !isForbiddenResource(configuration, entry); });\n    if (rumAllowedPerformanceEntries.length) {\n        lifeCycle.notify(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, rumAllowedPerformanceEntries);\n    }\n}\nfunction isIncompleteNavigation(entry) {\n    return entry.entryType === RumPerformanceEntryType.NAVIGATION && entry.loadEventEnd <= 0;\n}\nfunction isForbiddenResource(configuration, entry) {\n    return entry.entryType === RumPerformanceEntryType.RESOURCE && !isAllowedRequestUrl(configuration, entry.name);\n}\n","export var ErrorSource = {\n    AGENT: 'agent',\n    CONSOLE: 'console',\n    CUSTOM: 'custom',\n    LOGGER: 'logger',\n    NETWORK: 'network',\n    SOURCE: 'source',\n    REPORT: 'report',\n};\n","import { setTimeout } from '../../tools/timer';\nimport { clocksNow, ONE_MINUTE } from '../../tools/utils/timeUtils';\nimport { ErrorSource } from '../error/error.types';\nexport function createEventRateLimiter(eventType, limit, onLimitReached) {\n    var eventCount = 0;\n    var allowNextEvent = false;\n    return {\n        isLimitReached: function () {\n            if (eventCount === 0) {\n                setTimeout(function () {\n                    eventCount = 0;\n                }, ONE_MINUTE);\n            }\n            eventCount += 1;\n            if (eventCount <= limit || allowNextEvent) {\n                allowNextEvent = false;\n                return false;\n            }\n            if (eventCount === limit + 1) {\n                allowNextEvent = true;\n                try {\n                    onLimitReached({\n                        message: \"Reached max number of \".concat(eventType, \"s by minute: \").concat(limit),\n                        source: ErrorSource.AGENT,\n                        startClocks: clocksNow(),\n                    });\n                }\n                finally {\n                    allowNextEvent = false;\n                }\n            }\n            return true;\n        },\n    };\n}\n","import { sanitize, deepClone, getType, objectEntries } from '@datadog/browser-core';\n/**\n * Current limitation:\n * - field path do not support array, 'a.b.c' only\n */\nexport function limitModification(object, modifiableFieldPaths, modifier) {\n    var clone = deepClone(object);\n    var result = modifier(clone);\n    objectEntries(modifiableFieldPaths).forEach(function (_a) {\n        var fieldPath = _a[0], fieldType = _a[1];\n        var newValue = get(clone, fieldPath);\n        var newType = getType(newValue);\n        if (newType === fieldType) {\n            set(object, fieldPath, sanitize(newValue));\n        }\n        else if (fieldType === 'object' && (newType === 'undefined' || newType === 'null')) {\n            set(object, fieldPath, {});\n        }\n    });\n    return result;\n}\nfunction get(object, path) {\n    var current = object;\n    for (var _i = 0, _a = path.split('.'); _i < _a.length; _i++) {\n        var field = _a[_i];\n        if (!isValidObjectContaining(current, field)) {\n            return;\n        }\n        current = current[field];\n    }\n    return current;\n}\nfunction set(object, path, value) {\n    var current = object;\n    var fields = path.split('.');\n    for (var i = 0; i < fields.length; i += 1) {\n        var field = fields[i];\n        if (!isValidObject(current)) {\n            return;\n        }\n        if (i !== fields.length - 1) {\n            current = current[field];\n        }\n        else {\n            current[field] = value;\n        }\n    }\n}\nfunction isValidObject(object) {\n    return getType(object) === 'object';\n}\nfunction isValidObjectContaining(object, field) {\n    return isValidObject(object) && Object.prototype.hasOwnProperty.call(object, field);\n}\n","import { combine, isEmptyObject, timeStampNow, currentDrift, display, createEventRateLimiter, canUseEventBridge, assign, round, isExperimentalFeatureEnabled, ExperimentalFeature, getConnectivity, } from '@datadog/browser-core';\nimport { getSyntheticsContext } from './contexts/syntheticsContext';\nimport { limitModification } from './limitModification';\nvar VIEW_MODIFIABLE_FIELD_PATHS = {\n    'view.name': 'string',\n    'view.url': 'string',\n    'view.referrer': 'string',\n};\nvar USER_CUSTOMIZABLE_FIELD_PATHS = {\n    context: 'object',\n};\nvar modifiableFieldPathsByEvent;\nexport function startRumAssembly(configuration, lifeCycle, sessionManager, viewContexts, urlContexts, actionContexts, displayContext, ciVisibilityContext, getCommonContext, reportError) {\n    var _a, _b;\n    modifiableFieldPathsByEvent = (_a = {},\n        _a[\"view\" /* RumEventType.VIEW */] = VIEW_MODIFIABLE_FIELD_PATHS,\n        _a[\"error\" /* RumEventType.ERROR */] = assign({\n            'error.message': 'string',\n            'error.stack': 'string',\n            'error.resource.url': 'string',\n            'error.fingerprint': 'string',\n        }, USER_CUSTOMIZABLE_FIELD_PATHS, VIEW_MODIFIABLE_FIELD_PATHS),\n        _a[\"resource\" /* RumEventType.RESOURCE */] = assign({\n            'resource.url': 'string',\n        }, isExperimentalFeatureEnabled(ExperimentalFeature.WRITABLE_RESOURCE_GRAPHQL) && {\n            'resource.graphql': 'object',\n        }, USER_CUSTOMIZABLE_FIELD_PATHS, VIEW_MODIFIABLE_FIELD_PATHS),\n        _a[\"action\" /* RumEventType.ACTION */] = assign({\n            'action.target.name': 'string',\n        }, USER_CUSTOMIZABLE_FIELD_PATHS, VIEW_MODIFIABLE_FIELD_PATHS),\n        _a[\"long_task\" /* RumEventType.LONG_TASK */] = assign({}, USER_CUSTOMIZABLE_FIELD_PATHS, VIEW_MODIFIABLE_FIELD_PATHS),\n        _a[\"vital\" /* RumEventType.VITAL */] = assign({}, USER_CUSTOMIZABLE_FIELD_PATHS, VIEW_MODIFIABLE_FIELD_PATHS),\n        _a);\n    var eventRateLimiters = (_b = {},\n        _b[\"error\" /* RumEventType.ERROR */] = createEventRateLimiter(\"error\" /* RumEventType.ERROR */, configuration.eventRateLimiterThreshold, reportError),\n        _b[\"action\" /* RumEventType.ACTION */] = createEventRateLimiter(\"action\" /* RumEventType.ACTION */, configuration.eventRateLimiterThreshold, reportError),\n        _b[\"vital\" /* RumEventType.VITAL */] = createEventRateLimiter(\"vital\" /* RumEventType.VITAL */, configuration.eventRateLimiterThreshold, reportError),\n        _b);\n    var syntheticsContext = getSyntheticsContext();\n    lifeCycle.subscribe(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, function (_a) {\n        var startTime = _a.startTime, rawRumEvent = _a.rawRumEvent, domainContext = _a.domainContext, savedCommonContext = _a.savedCommonContext, customerContext = _a.customerContext;\n        var viewContext = viewContexts.findView(startTime);\n        var urlContext = urlContexts.findUrl(startTime);\n        var session = sessionManager.findTrackedSession(startTime);\n        if (session && viewContext && urlContext) {\n            var commonContext = savedCommonContext || getCommonContext();\n            var actionId = actionContexts.findActionId(startTime);\n            var rumContext = {\n                _dd: {\n                    format_version: 2,\n                    drift: currentDrift(),\n                    configuration: {\n                        session_sample_rate: round(configuration.sessionSampleRate, 3),\n                        session_replay_sample_rate: round(configuration.sessionReplaySampleRate, 3),\n                    },\n                    browser_sdk_version: canUseEventBridge() ? \"5.17.1\" : undefined,\n                },\n                application: {\n                    id: configuration.applicationId,\n                },\n                date: timeStampNow(),\n                service: viewContext.service || configuration.service,\n                version: viewContext.version || configuration.version,\n                source: 'browser',\n                session: {\n                    id: session.id,\n                    type: syntheticsContext\n                        ? \"synthetics\" /* SessionType.SYNTHETICS */\n                        : ciVisibilityContext.get()\n                            ? \"ci_test\" /* SessionType.CI_TEST */\n                            : \"user\" /* SessionType.USER */,\n                },\n                view: {\n                    id: viewContext.id,\n                    name: viewContext.name,\n                    url: urlContext.url,\n                    referrer: urlContext.referrer,\n                },\n                action: needToAssembleWithAction(rawRumEvent) && actionId ? { id: actionId } : undefined,\n                synthetics: syntheticsContext,\n                ci_test: ciVisibilityContext.get(),\n                display: displayContext.get(),\n                connectivity: getConnectivity(),\n            };\n            var serverRumEvent = combine(rumContext, rawRumEvent);\n            serverRumEvent.context = combine(commonContext.context, customerContext);\n            if (!('has_replay' in serverRumEvent.session)) {\n                ;\n                serverRumEvent.session.has_replay = commonContext.hasReplay;\n            }\n            if (serverRumEvent.type === 'view') {\n                ;\n                serverRumEvent.session.sampled_for_replay = session.sessionReplayAllowed;\n            }\n            if (!isEmptyObject(commonContext.user)) {\n                ;\n                serverRumEvent.usr = commonContext.user;\n            }\n            if (shouldSend(serverRumEvent, configuration.beforeSend, domainContext, eventRateLimiters)) {\n                if (isEmptyObject(serverRumEvent.context)) {\n                    delete serverRumEvent.context;\n                }\n                lifeCycle.notify(13 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, serverRumEvent);\n            }\n        }\n    });\n}\nfunction shouldSend(event, beforeSend, domainContext, eventRateLimiters) {\n    var _a;\n    if (beforeSend) {\n        var result = limitModification(event, modifiableFieldPathsByEvent[event.type], function (event) {\n            return beforeSend(event, domainContext);\n        });\n        if (result === false && event.type !== \"view\" /* RumEventType.VIEW */) {\n            return false;\n        }\n        if (result === false) {\n            display.warn(\"Can't dismiss view events using beforeSend!\");\n        }\n    }\n    var rateLimitReached = (_a = eventRateLimiters[event.type]) === null || _a === void 0 ? void 0 : _a.isLimitReached();\n    return !rateLimitReached;\n}\nfunction needToAssembleWithAction(event) {\n    return [\"error\" /* RumEventType.ERROR */, \"resource\" /* RumEventType.RESOURCE */, \"long_task\" /* RumEventType.LONG_TASK */].indexOf(event.type) !== -1;\n}\n","import { getSyntheticsResultId, getSyntheticsTestId, willSyntheticsInjectRum } from '@datadog/browser-core';\nexport function getSyntheticsContext() {\n    var testId = getSyntheticsTestId();\n    var resultId = getSyntheticsResultId();\n    if (testId && resultId) {\n        return {\n            test_id: testId,\n            result_id: resultId,\n            injected: willSyntheticsInjectRum(),\n        };\n    }\n}\n","var AbstractLifeCycle = /** @class */ (function () {\n    function AbstractLifeCycle() {\n        this.callbacks = {};\n    }\n    AbstractLifeCycle.prototype.notify = function (eventType, data) {\n        var eventCallbacks = this.callbacks[eventType];\n        if (eventCallbacks) {\n            eventCallbacks.forEach(function (callback) { return callback(data); });\n        }\n    };\n    AbstractLifeCycle.prototype.subscribe = function (eventType, callback) {\n        var _this = this;\n        if (!this.callbacks[eventType]) {\n            this.callbacks[eventType] = [];\n        }\n        this.callbacks[eventType].push(callback);\n        return {\n            unsubscribe: function () {\n                _this.callbacks[eventType] = _this.callbacks[eventType].filter(function (other) { return callback !== other; });\n            },\n        };\n    };\n    return AbstractLifeCycle;\n}());\nexport { AbstractLifeCycle };\n","import { instrumentMethod } from '../tools/instrumentMethod';\nimport { Observable } from '../tools/observable';\nimport { elapsed, clocksNow, timeStampNow } from '../tools/utils/timeUtils';\nimport { normalizeUrl } from '../tools/utils/urlPolyfill';\nimport { shallowClone } from '../tools/utils/objectUtils';\nimport { addEventListener } from './addEventListener';\nvar xhrObservable;\nvar xhrContexts = new WeakMap();\nexport function initXhrObservable(configuration) {\n    if (!xhrObservable) {\n        xhrObservable = createXhrObservable(configuration);\n    }\n    return xhrObservable;\n}\nfunction createXhrObservable(configuration) {\n    return new Observable(function (observable) {\n        var stopInstrumentingStart = instrumentMethod(XMLHttpRequest.prototype, 'open', openXhr).stop;\n        var stopInstrumentingSend = instrumentMethod(XMLHttpRequest.prototype, 'send', function (call) {\n            sendXhr(call, configuration, observable);\n        }).stop;\n        var stopInstrumentingAbort = instrumentMethod(XMLHttpRequest.prototype, 'abort', abortXhr).stop;\n        return function () {\n            stopInstrumentingStart();\n            stopInstrumentingSend();\n            stopInstrumentingAbort();\n        };\n    });\n}\nfunction openXhr(_a) {\n    var xhr = _a.target, _b = _a.parameters, method = _b[0], url = _b[1];\n    xhrContexts.set(xhr, {\n        state: 'open',\n        method: String(method).toUpperCase(),\n        url: normalizeUrl(String(url)),\n    });\n}\nfunction sendXhr(_a, configuration, observable) {\n    var xhr = _a.target;\n    var context = xhrContexts.get(xhr);\n    if (!context) {\n        return;\n    }\n    var startContext = context;\n    startContext.state = 'start';\n    startContext.startClocks = clocksNow();\n    startContext.isAborted = false;\n    startContext.xhr = xhr;\n    var hasBeenReported = false;\n    var stopInstrumentingOnReadyStateChange = instrumentMethod(xhr, 'onreadystatechange', function () {\n        if (xhr.readyState === XMLHttpRequest.DONE) {\n            // Try to report the XHR as soon as possible, because the XHR may be mutated by the\n            // application during a future event. For example, Angular is calling .abort() on\n            // completed requests during an onreadystatechange event, so the status becomes '0'\n            // before the request is collected.\n            onEnd();\n        }\n    }).stop;\n    var onEnd = function () {\n        unsubscribeLoadEndListener();\n        stopInstrumentingOnReadyStateChange();\n        if (hasBeenReported) {\n            return;\n        }\n        hasBeenReported = true;\n        var completeContext = context;\n        completeContext.state = 'complete';\n        completeContext.duration = elapsed(startContext.startClocks.timeStamp, timeStampNow());\n        completeContext.status = xhr.status;\n        observable.notify(shallowClone(completeContext));\n    };\n    var unsubscribeLoadEndListener = addEventListener(configuration, xhr, 'loadend', onEnd).stop;\n    observable.notify(startContext);\n}\nfunction abortXhr(_a) {\n    var xhr = _a.target;\n    var context = xhrContexts.get(xhr);\n    if (context) {\n        context.isAborted = true;\n    }\n}\n","import { AbstractLifeCycle } from '@datadog/browser-core';\nexport var LifeCycle = (AbstractLifeCycle);\n","import { setInterval, clearInterval } from './timer';\nimport { removeItem } from './utils/arrayUtils';\nimport { addDuration, relativeNow, ONE_MINUTE } from './utils/timeUtils';\nvar END_OF_TIMES = Infinity;\nexport var CLEAR_OLD_VALUES_INTERVAL = ONE_MINUTE;\n/**\n * Store and keep track of values spans. This whole class assumes that values are added in\n * chronological order (i.e. all entries have an increasing start time).\n */\nvar ValueHistory = /** @class */ (function () {\n    function ValueHistory(expireDelay, maxEntries) {\n        var _this = this;\n        this.expireDelay = expireDelay;\n        this.maxEntries = maxEntries;\n        this.entries = [];\n        this.clearOldValuesInterval = setInterval(function () { return _this.clearOldValues(); }, CLEAR_OLD_VALUES_INTERVAL);\n    }\n    /**\n     * Add a value to the history associated with a start time. Returns a reference to this newly\n     * added entry that can be removed or closed.\n     */\n    ValueHistory.prototype.add = function (value, startTime) {\n        var _this = this;\n        var entry = {\n            value: value,\n            startTime: startTime,\n            endTime: END_OF_TIMES,\n            remove: function () {\n                removeItem(_this.entries, entry);\n            },\n            close: function (endTime) {\n                entry.endTime = endTime;\n            },\n        };\n        if (this.maxEntries && this.entries.length >= this.maxEntries) {\n            this.entries.pop();\n        }\n        this.entries.unshift(entry);\n        return entry;\n    };\n    /**\n     * Return the latest value that was active during `startTime`, or the currently active value\n     * if no `startTime` is provided. This method assumes that entries are not overlapping.\n     */\n    ValueHistory.prototype.find = function (startTime) {\n        if (startTime === void 0) { startTime = END_OF_TIMES; }\n        for (var _i = 0, _a = this.entries; _i < _a.length; _i++) {\n            var entry = _a[_i];\n            if (entry.startTime <= startTime) {\n                if (startTime <= entry.endTime) {\n                    return entry.value;\n                }\n                break;\n            }\n        }\n    };\n    /**\n     * Helper function to close the currently active value, if any. This method assumes that entries\n     * are not overlapping.\n     */\n    ValueHistory.prototype.closeActive = function (endTime) {\n        var latestEntry = this.entries[0];\n        if (latestEntry && latestEntry.endTime === END_OF_TIMES) {\n            latestEntry.close(endTime);\n        }\n    };\n    /**\n     * Return all values with an active period overlapping with the duration,\n     * or all values that were active during `startTime` if no duration is provided,\n     * or all currently active values if no `startTime` is provided.\n     */\n    ValueHistory.prototype.findAll = function (startTime, duration) {\n        if (startTime === void 0) { startTime = END_OF_TIMES; }\n        if (duration === void 0) { duration = 0; }\n        var endTime = addDuration(startTime, duration);\n        return this.entries\n            .filter(function (entry) { return entry.startTime <= endTime && startTime <= entry.endTime; })\n            .map(function (entry) { return entry.value; });\n    };\n    /**\n     * Remove all entries from this collection.\n     */\n    ValueHistory.prototype.reset = function () {\n        this.entries = [];\n    };\n    /**\n     * Stop internal garbage collection of past entries.\n     */\n    ValueHistory.prototype.stop = function () {\n        clearInterval(this.clearOldValuesInterval);\n    };\n    ValueHistory.prototype.clearOldValues = function () {\n        var oldTimeThreshold = relativeNow() - this.expireDelay;\n        while (this.entries.length > 0 && this.entries[this.entries.length - 1].endTime < oldTimeThreshold) {\n            this.entries.pop();\n        }\n    };\n    return ValueHistory;\n}());\nexport { ValueHistory };\n","import { SESSION_TIME_OUT_DELAY, ValueHistory } from '@datadog/browser-core';\nexport var VIEW_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY;\nexport function startViewContexts(lifeCycle) {\n    var viewContextHistory = new ValueHistory(VIEW_CONTEXT_TIME_OUT_DELAY);\n    lifeCycle.subscribe(2 /* LifeCycleEventType.BEFORE_VIEW_CREATED */, function (view) {\n        viewContextHistory.add(buildViewContext(view), view.startClocks.relative);\n    });\n    lifeCycle.subscribe(6 /* LifeCycleEventType.AFTER_VIEW_ENDED */, function (_a) {\n        var endClocks = _a.endClocks;\n        viewContextHistory.closeActive(endClocks.relative);\n    });\n    lifeCycle.subscribe(10 /* LifeCycleEventType.SESSION_RENEWED */, function () {\n        viewContextHistory.reset();\n    });\n    function buildViewContext(view) {\n        return {\n            service: view.service,\n            version: view.version,\n            id: view.id,\n            name: view.name,\n            startClocks: view.startClocks,\n        };\n    }\n    return {\n        findView: function (startTime) { return viewContextHistory.find(startTime); },\n        stop: function () {\n            viewContextHistory.stop();\n        },\n    };\n}\n","import { setTimeout } from './timer';\nimport { callMonitored } from './monitor';\nimport { noop } from './utils/functionUtils';\nimport { arrayFrom, startsWith } from './utils/polyfills';\n/**\n * Instruments a method on a object, calling the given callback before the original method is\n * invoked. The callback receives an object with information about the method call.\n *\n * This function makes sure that we are \"good citizens\" regarding third party instrumentations: when\n * removing the instrumentation, the original method is usually restored, but if a third party\n * instrumentation was set after ours, we keep it in place and just replace our instrumentation with\n * a noop.\n *\n * Note: it is generally better to instrument methods that are \"owned\" by the object instead of ones\n * that are inherited from the prototype chain. Example:\n * * do:    `instrumentMethod(Array.prototype, 'push', ...)`\n * * don't: `instrumentMethod([], 'push', ...)`\n *\n * This method is also used to set event handler properties (ex: window.onerror = ...), as it has\n * the same requirements as instrumenting a method:\n * * if the event handler is already set by a third party, we need to call it and not just blindly\n * override it.\n * * if the event handler is set by a third party after us, we need to keep it in place when\n * removing ours.\n *\n * @example\n *\n *  instrumentMethod(window, 'fetch', ({ target, parameters, onPostCall }) => {\n *    console.log('Before calling fetch on', target, 'with parameters', parameters)\n *\n *    onPostCall((result) => {\n *      console.log('After fetch calling on', target, 'with parameters', parameters, 'and result', result)\n *    })\n *  })\n */\nexport function instrumentMethod(targetPrototype, method, onPreCall) {\n    var original = targetPrototype[method];\n    if (typeof original !== 'function') {\n        if (startsWith(method, 'on')) {\n            original = noop;\n        }\n        else {\n            return { stop: noop };\n        }\n    }\n    var instrumentation = createInstrumentedMethod(original, onPreCall);\n    var instrumentationWrapper = function () {\n        if (typeof instrumentation !== 'function') {\n            return undefined;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call\n        return instrumentation.apply(this, arguments);\n    };\n    targetPrototype[method] = instrumentationWrapper;\n    return {\n        stop: function () {\n            if (targetPrototype[method] === instrumentationWrapper) {\n                targetPrototype[method] = original;\n            }\n            else {\n                instrumentation = original;\n            }\n        },\n    };\n}\nfunction createInstrumentedMethod(original, onPreCall) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    return function () {\n        var parameters = arrayFrom(arguments);\n        var postCallCallback;\n        callMonitored(onPreCall, null, [\n            {\n                target: this,\n                parameters: parameters,\n                onPostCall: function (callback) {\n                    postCallCallback = callback;\n                },\n            },\n        ]);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        var result = original.apply(this, parameters);\n        if (postCallCallback) {\n            callMonitored(postCallCallback, null, [result]);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return result;\n    };\n}\nexport function instrumentSetter(targetPrototype, property, after) {\n    var originalDescriptor = Object.getOwnPropertyDescriptor(targetPrototype, property);\n    if (!originalDescriptor || !originalDescriptor.set || !originalDescriptor.configurable) {\n        return { stop: noop };\n    }\n    var stoppedInstrumentation = noop;\n    var instrumentation = function (target, value) {\n        // put hooked setter into event loop to avoid of set latency\n        setTimeout(function () {\n            if (instrumentation !== stoppedInstrumentation) {\n                after(target, value);\n            }\n        }, 0);\n    };\n    var instrumentationWrapper = function (value) {\n        originalDescriptor.set.call(this, value);\n        instrumentation(this, value);\n    };\n    Object.defineProperty(targetPrototype, property, {\n        set: instrumentationWrapper,\n    });\n    return {\n        stop: function () {\n            var _a;\n            if (((_a = Object.getOwnPropertyDescriptor(targetPrototype, property)) === null || _a === void 0 ? void 0 : _a.set) === instrumentationWrapper) {\n                Object.defineProperty(targetPrototype, property, originalDescriptor);\n            }\n            instrumentation = stoppedInstrumentation;\n        },\n    };\n}\n","import { instrumentMethod } from '../tools/instrumentMethod';\nimport { monitor } from '../tools/monitor';\nimport { Observable } from '../tools/observable';\nimport { clocksNow } from '../tools/utils/timeUtils';\nimport { normalizeUrl } from '../tools/utils/urlPolyfill';\nvar fetchObservable;\nexport function initFetchObservable() {\n    if (!fetchObservable) {\n        fetchObservable = createFetchObservable();\n    }\n    return fetchObservable;\n}\nfunction createFetchObservable() {\n    return new Observable(function (observable) {\n        if (!window.fetch) {\n            return;\n        }\n        var stop = instrumentMethod(window, 'fetch', function (call) { return beforeSend(call, observable); }).stop;\n        return stop;\n    });\n}\nfunction beforeSend(_a, observable) {\n    var parameters = _a.parameters, onPostCall = _a.onPostCall;\n    var input = parameters[0], init = parameters[1];\n    var methodFromParams = init && init.method;\n    if (methodFromParams === undefined && input instanceof Request) {\n        methodFromParams = input.method;\n    }\n    var method = methodFromParams !== undefined ? String(methodFromParams).toUpperCase() : 'GET';\n    var url = input instanceof Request ? input.url : normalizeUrl(String(input));\n    var startClocks = clocksNow();\n    var context = {\n        state: 'start',\n        init: init,\n        input: input,\n        method: method,\n        startClocks: startClocks,\n        url: url,\n    };\n    observable.notify(context);\n    // Those properties can be changed by observable subscribers\n    parameters[0] = context.input;\n    parameters[1] = context.init;\n    onPostCall(function (responsePromise) { return afterSend(observable, responsePromise, context); });\n}\nfunction afterSend(observable, responsePromise, startContext) {\n    var reportFetch = function (response) {\n        var context = startContext;\n        context.state = 'resolve';\n        if ('stack' in response || response instanceof Error) {\n            context.status = 0;\n            context.isAborted = response instanceof DOMException && response.code === DOMException.ABORT_ERR;\n            context.error = response;\n        }\n        else if ('status' in response) {\n            context.response = response;\n            context.responseType = response.type;\n            context.status = response.status;\n            context.isAborted = false;\n        }\n        observable.notify(context);\n    };\n    responsePromise.then(monitor(reportFetch), monitor(reportFetch));\n}\n","export function isServerError(status) {\n    return status >= 500;\n}\nexport function tryToClone(response) {\n    try {\n        return response.clone();\n    }\n    catch (e) {\n        // clone can throw if the response has already been used by another instrumentation or is disturbed\n        return;\n    }\n}\n","import { monitor } from './monitor';\nimport { noop } from './utils/functionUtils';\n/**\n * Read bytes from a ReadableStream until at least `limit` bytes have been read (or until the end of\n * the stream). The callback is invoked with the at most `limit` bytes, and indicates that the limit\n * has been exceeded if more bytes were available.\n */\nexport function readBytesFromStream(stream, callback, options) {\n    var reader = stream.getReader();\n    var chunks = [];\n    var readBytesCount = 0;\n    readMore();\n    function readMore() {\n        reader.read().then(monitor(function (result) {\n            if (result.done) {\n                onDone();\n                return;\n            }\n            if (options.collectStreamBody) {\n                chunks.push(result.value);\n            }\n            readBytesCount += result.value.length;\n            if (readBytesCount > options.bytesLimit) {\n                onDone();\n            }\n            else {\n                readMore();\n            }\n        }), monitor(function (error) { return callback(error); }));\n    }\n    function onDone() {\n        reader.cancel().catch(\n        // we don't care if cancel fails, but we still need to catch the error to avoid reporting it\n        // as an unhandled rejection\n        noop);\n        var bytes;\n        var limitExceeded;\n        if (options.collectStreamBody) {\n            var completeBuffer_1;\n            if (chunks.length === 1) {\n                // optimization: if the response is small enough to fit in a single buffer (provided by the browser), just\n                // use it directly.\n                completeBuffer_1 = chunks[0];\n            }\n            else {\n                // else, we need to copy buffers into a larger buffer to concatenate them.\n                completeBuffer_1 = new Uint8Array(readBytesCount);\n                var offset_1 = 0;\n                chunks.forEach(function (chunk) {\n                    completeBuffer_1.set(chunk, offset_1);\n                    offset_1 += chunk.length;\n                });\n            }\n            bytes = completeBuffer_1.slice(0, options.bytesLimit);\n            limitExceeded = completeBuffer_1.length > options.bytesLimit;\n        }\n        callback(undefined, bytes, limitExceeded);\n    }\n}\n","import { initFetchObservable, initXhrObservable, readBytesFromStream, elapsed, timeStampNow, tryToClone, } from '@datadog/browser-core';\nimport { isAllowedRequestUrl } from './resource/resourceUtils';\nimport { startTracer } from './tracing/tracer';\nvar nextRequestIndex = 1;\nexport function startRequestCollection(lifeCycle, configuration, sessionManager) {\n    var tracer = startTracer(configuration, sessionManager);\n    trackXhr(lifeCycle, configuration, tracer);\n    trackFetch(lifeCycle, configuration, tracer);\n}\nexport function trackXhr(lifeCycle, configuration, tracer) {\n    var subscription = initXhrObservable(configuration).subscribe(function (rawContext) {\n        var context = rawContext;\n        if (!isAllowedRequestUrl(configuration, context.url)) {\n            return;\n        }\n        switch (context.state) {\n            case 'start':\n                tracer.traceXhr(context, context.xhr);\n                context.requestIndex = getNextRequestIndex();\n                lifeCycle.notify(7 /* LifeCycleEventType.REQUEST_STARTED */, {\n                    requestIndex: context.requestIndex,\n                    url: context.url,\n                });\n                break;\n            case 'complete':\n                tracer.clearTracingIfNeeded(context);\n                lifeCycle.notify(8 /* LifeCycleEventType.REQUEST_COMPLETED */, {\n                    duration: context.duration,\n                    method: context.method,\n                    requestIndex: context.requestIndex,\n                    spanId: context.spanId,\n                    startClocks: context.startClocks,\n                    status: context.status,\n                    traceId: context.traceId,\n                    traceSampled: context.traceSampled,\n                    type: \"xhr\" /* RequestType.XHR */,\n                    url: context.url,\n                    xhr: context.xhr,\n                    isAborted: context.isAborted,\n                });\n                break;\n        }\n    });\n    return { stop: function () { return subscription.unsubscribe(); } };\n}\nexport function trackFetch(lifeCycle, configuration, tracer) {\n    var subscription = initFetchObservable().subscribe(function (rawContext) {\n        var context = rawContext;\n        if (!isAllowedRequestUrl(configuration, context.url)) {\n            return;\n        }\n        switch (context.state) {\n            case 'start':\n                tracer.traceFetch(context);\n                context.requestIndex = getNextRequestIndex();\n                lifeCycle.notify(7 /* LifeCycleEventType.REQUEST_STARTED */, {\n                    requestIndex: context.requestIndex,\n                    url: context.url,\n                });\n                break;\n            case 'resolve':\n                waitForResponseToComplete(context, function (duration) {\n                    tracer.clearTracingIfNeeded(context);\n                    lifeCycle.notify(8 /* LifeCycleEventType.REQUEST_COMPLETED */, {\n                        duration: duration,\n                        method: context.method,\n                        requestIndex: context.requestIndex,\n                        responseType: context.responseType,\n                        spanId: context.spanId,\n                        startClocks: context.startClocks,\n                        status: context.status,\n                        traceId: context.traceId,\n                        traceSampled: context.traceSampled,\n                        type: \"fetch\" /* RequestType.FETCH */,\n                        url: context.url,\n                        response: context.response,\n                        init: context.init,\n                        input: context.input,\n                        isAborted: context.isAborted,\n                    });\n                });\n                break;\n        }\n    });\n    return { stop: function () { return subscription.unsubscribe(); } };\n}\nfunction getNextRequestIndex() {\n    var result = nextRequestIndex;\n    nextRequestIndex += 1;\n    return result;\n}\nfunction waitForResponseToComplete(context, callback) {\n    var clonedResponse = context.response && tryToClone(context.response);\n    if (!clonedResponse || !clonedResponse.body) {\n        // do not try to wait for the response if the clone failed, fetch error or null body\n        callback(elapsed(context.startClocks.timeStamp, timeStampNow()));\n    }\n    else {\n        readBytesFromStream(clonedResponse.body, function () {\n            callback(elapsed(context.startClocks.timeStamp, timeStampNow()));\n        }, {\n            bytesLimit: Number.POSITIVE_INFINITY,\n            collectStreamBody: false,\n        });\n    }\n}\n","import { noop } from '@datadog/browser-core';\nexport function trackEventCounts(_a) {\n    var lifeCycle = _a.lifeCycle, isChildEvent = _a.isChildEvent, _b = _a.onChange, callback = _b === void 0 ? noop : _b;\n    var eventCounts = {\n        errorCount: 0,\n        longTaskCount: 0,\n        resourceCount: 0,\n        actionCount: 0,\n        frustrationCount: 0,\n    };\n    var subscription = lifeCycle.subscribe(13 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (event) {\n        var _a;\n        if (event.type === 'view' || event.type === 'vital' || !isChildEvent(event)) {\n            return;\n        }\n        switch (event.type) {\n            case \"error\" /* RumEventType.ERROR */:\n                eventCounts.errorCount += 1;\n                callback();\n                break;\n            case \"action\" /* RumEventType.ACTION */:\n                eventCounts.actionCount += 1;\n                if (event.action.frustration) {\n                    eventCounts.frustrationCount += event.action.frustration.type.length;\n                }\n                callback();\n                break;\n            case \"long_task\" /* RumEventType.LONG_TASK */:\n                eventCounts.longTaskCount += 1;\n                callback();\n                break;\n            case \"resource\" /* RumEventType.RESOURCE */:\n                if (!((_a = event._dd) === null || _a === void 0 ? void 0 : _a.discarded)) {\n                    eventCounts.resourceCount += 1;\n                    callback();\n                }\n                break;\n        }\n    });\n    return {\n        stop: function () {\n            subscription.unsubscribe();\n        },\n        eventCounts: eventCounts,\n    };\n}\n","import { instrumentMethod, matchList, monitor, Observable, timeStampNow, setTimeout, clearTimeout, } from '@datadog/browser-core';\nimport { RumPerformanceEntryType } from '../browser/performanceCollection';\n// Delay to wait for a page activity to validate the tracking process\nexport var PAGE_ACTIVITY_VALIDATION_DELAY = 100;\n// Delay to wait after a page activity to end the tracking process\nexport var PAGE_ACTIVITY_END_DELAY = 100;\n/**\n * Wait for the page activity end\n *\n * Detection lifecycle:\n * ```\n *                        Wait page activity end\n *              .-------------------'--------------------.\n *              v                                        v\n *     [Wait for a page activity ]          [Wait for a maximum duration]\n *     [timeout: VALIDATION_DELAY]          [  timeout: maxDuration     ]\n *          /                  \\                           |\n *         v                    v                          |\n *  [No page activity]   [Page activity]                   |\n *         |                   |,----------------------.   |\n *         v                   v                       |   |\n *     (Discard)     [Wait for a page activity]        |   |\n *                   [   timeout: END_DELAY   ]        |   |\n *                       /                \\            |   |\n *                      v                  v           |   |\n *             [No page activity]    [Page activity]   |   |\n *                      |                 |            |   |\n *                      |                 '------------'   |\n *                      '-----------. ,--------------------'\n *                                   v\n *                                 (End)\n * ```\n *\n * Note: by assuming that maxDuration is greater than VALIDATION_DELAY, we are sure that if the\n * process is still alive after maxDuration, it has been validated.\n */\nexport function waitPageActivityEnd(lifeCycle, domMutationObservable, configuration, pageActivityEndCallback, maxDuration) {\n    var pageActivityObservable = createPageActivityObservable(lifeCycle, domMutationObservable, configuration);\n    return doWaitPageActivityEnd(pageActivityObservable, pageActivityEndCallback, maxDuration);\n}\nexport function doWaitPageActivityEnd(pageActivityObservable, pageActivityEndCallback, maxDuration) {\n    var pageActivityEndTimeoutId;\n    var hasCompleted = false;\n    var validationTimeoutId = setTimeout(monitor(function () { return complete({ hadActivity: false }); }), PAGE_ACTIVITY_VALIDATION_DELAY);\n    var maxDurationTimeoutId = maxDuration !== undefined\n        ? setTimeout(monitor(function () { return complete({ hadActivity: true, end: timeStampNow() }); }), maxDuration)\n        : undefined;\n    var pageActivitySubscription = pageActivityObservable.subscribe(function (_a) {\n        var isBusy = _a.isBusy;\n        clearTimeout(validationTimeoutId);\n        clearTimeout(pageActivityEndTimeoutId);\n        var lastChangeTime = timeStampNow();\n        if (!isBusy) {\n            pageActivityEndTimeoutId = setTimeout(monitor(function () { return complete({ hadActivity: true, end: lastChangeTime }); }), PAGE_ACTIVITY_END_DELAY);\n        }\n    });\n    var stop = function () {\n        hasCompleted = true;\n        clearTimeout(validationTimeoutId);\n        clearTimeout(pageActivityEndTimeoutId);\n        clearTimeout(maxDurationTimeoutId);\n        pageActivitySubscription.unsubscribe();\n    };\n    function complete(event) {\n        if (hasCompleted) {\n            return;\n        }\n        stop();\n        pageActivityEndCallback(event);\n    }\n    return { stop: stop };\n}\nexport function createPageActivityObservable(lifeCycle, domMutationObservable, configuration) {\n    return new Observable(function (observable) {\n        var subscriptions = [];\n        var firstRequestIndex;\n        var pendingRequestsCount = 0;\n        subscriptions.push(domMutationObservable.subscribe(notifyPageActivity), lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n            if (entries.some(function (entry) { return entry.entryType === RumPerformanceEntryType.RESOURCE && !isExcludedUrl(configuration, entry.name); })) {\n                notifyPageActivity();\n            }\n        }), lifeCycle.subscribe(7 /* LifeCycleEventType.REQUEST_STARTED */, function (startEvent) {\n            if (isExcludedUrl(configuration, startEvent.url)) {\n                return;\n            }\n            if (firstRequestIndex === undefined) {\n                firstRequestIndex = startEvent.requestIndex;\n            }\n            pendingRequestsCount += 1;\n            notifyPageActivity();\n        }), lifeCycle.subscribe(8 /* LifeCycleEventType.REQUEST_COMPLETED */, function (request) {\n            if (isExcludedUrl(configuration, request.url) ||\n                firstRequestIndex === undefined ||\n                // If the request started before the tracking start, ignore it\n                request.requestIndex < firstRequestIndex) {\n                return;\n            }\n            pendingRequestsCount -= 1;\n            notifyPageActivity();\n        }));\n        var stopTrackingWindowOpen = trackWindowOpen(notifyPageActivity).stop;\n        return function () {\n            stopTrackingWindowOpen();\n            subscriptions.forEach(function (s) { return s.unsubscribe(); });\n        };\n        function notifyPageActivity() {\n            observable.notify({ isBusy: pendingRequestsCount > 0 });\n        }\n    });\n}\nfunction isExcludedUrl(configuration, requestUrl) {\n    return matchList(configuration.excludedActivityUrls, requestUrl);\n}\nfunction trackWindowOpen(callback) {\n    return instrumentMethod(window, 'open', callback);\n}\n","// https://github.com/jquery/jquery/blob/a684e6ba836f7c553968d7d026ed7941e1a612d8/src/selector/escapeSelector.js\nexport function cssEscape(str) {\n    if (window.CSS && window.CSS.escape) {\n        return window.CSS.escape(str);\n    }\n    // eslint-disable-next-line no-control-regex\n    return str.replace(/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g, function (ch, asCodePoint) {\n        if (asCodePoint) {\n            // U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n            if (ch === '\\0') {\n                return '\\uFFFD';\n            }\n            // Control characters and (dependent upon position) numbers get escaped as code points\n            return \"\".concat(ch.slice(0, -1), \"\\\\\").concat(ch.charCodeAt(ch.length - 1).toString(16), \" \");\n        }\n        // Other potentially-special ASCII characters get backslash-escaped\n        return \"\\\\\".concat(ch);\n    });\n}\nexport function elementMatches(element, selector) {\n    if (element.matches) {\n        return element.matches(selector);\n    }\n    // IE11 support\n    if (element.msMatchesSelector) {\n        return element.msMatchesSelector(selector);\n    }\n    return false;\n}\n/**\n * Return the parentElement of an node\n *\n * In cases where parentElement is not supported, such as in IE11 for SVG nodes, we fallback to parentNode\n */\nexport function getParentElement(node) {\n    if (node.parentElement) {\n        return node.parentElement;\n    }\n    while (node.parentNode) {\n        if (node.parentNode.nodeType === Node.ELEMENT_NODE) {\n            return node.parentNode;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\n// let parentNode = node.parentNode\n// while (parentNode !== null && parentNode.nodeType !== Node.ELEMENT_NODE) {\n//   parentNode = node.parentNode\n// }\n// let parentNode = document.querySelector('span').parentNode\n// while (parentNode !== null && parentNode.nodeType !== Node.ELEMENT_NODE) {\n//   parentNode = node.parentNode\n// }\n// console.log(parentNode)\n/**\n * Return the classList of an element or an array of classes if classList is not supported\n *\n * In cases where classList is not supported, such as in IE11 for SVG and MathML elements,\n * we fallback to using element.getAttribute('class').\n * We opt for element.getAttribute('class') over element.className because className returns an SVGAnimatedString for SVG elements.\n */\nexport function getClassList(element) {\n    var _a;\n    if (element.classList) {\n        return element.classList;\n    }\n    var classes = (_a = element.getAttribute('class')) === null || _a === void 0 ? void 0 : _a.trim();\n    return classes ? classes.split(/\\s+/) : [];\n}\n","import { safeTruncate, isIE, find } from '@datadog/browser-core';\nimport { getParentElement } from '../../browser/polyfills';\n/**\n * Get the action name from the attribute 'data-dd-action-name' on the element or any of its parent.\n * It can also be retrieved from a user defined attribute.\n */\nexport var DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE = 'data-dd-action-name';\nexport function getActionNameFromElement(element, userProgrammaticAttribute) {\n    // Proceed to get the action name in two steps:\n    // * first, get the name programmatically, explicitly defined by the user.\n    // * then, use strategies that are known to return good results. Those strategies will be used on\n    //   the element and a few parents, but it's likely that they won't succeed at all.\n    // * if no name is found this way, use strategies returning less accurate names as a fallback.\n    //   Those are much likely to succeed.\n    return (getActionNameFromElementProgrammatically(element, DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE) ||\n        (userProgrammaticAttribute && getActionNameFromElementProgrammatically(element, userProgrammaticAttribute)) ||\n        getActionNameFromElementForStrategies(element, userProgrammaticAttribute, priorityStrategies) ||\n        getActionNameFromElementForStrategies(element, userProgrammaticAttribute, fallbackStrategies) ||\n        '');\n}\nfunction getActionNameFromElementProgrammatically(targetElement, programmaticAttribute) {\n    var elementWithAttribute;\n    // We don't use getActionNameFromElementForStrategies here, because we want to consider all parents,\n    // without limit. It is up to the user to declare a relevant naming strategy.\n    // If available, use element.closest() to match get the attribute from the element or any of its\n    // parent.  Else fallback to a more traditional implementation.\n    if (supportsElementClosest()) {\n        elementWithAttribute = targetElement.closest(\"[\".concat(programmaticAttribute, \"]\"));\n    }\n    else {\n        var element = targetElement;\n        while (element) {\n            if (element.hasAttribute(programmaticAttribute)) {\n                elementWithAttribute = element;\n                break;\n            }\n            element = getParentElement(element);\n        }\n    }\n    if (!elementWithAttribute) {\n        return;\n    }\n    var name = elementWithAttribute.getAttribute(programmaticAttribute);\n    return truncate(normalizeWhitespace(name.trim()));\n}\nvar priorityStrategies = [\n    // associated LABEL text\n    function (element, userProgrammaticAttribute) {\n        // IE does not support element.labels, so we fallback to a CSS selector based on the element id\n        // instead\n        if (supportsLabelProperty()) {\n            if ('labels' in element && element.labels && element.labels.length > 0) {\n                return getTextualContent(element.labels[0], userProgrammaticAttribute);\n            }\n        }\n        else if (element.id) {\n            var label = element.ownerDocument &&\n                find(element.ownerDocument.querySelectorAll('label'), function (label) { return label.htmlFor === element.id; });\n            return label && getTextualContent(label, userProgrammaticAttribute);\n        }\n    },\n    // INPUT button (and associated) value\n    function (element) {\n        if (element.nodeName === 'INPUT') {\n            var input = element;\n            var type = input.getAttribute('type');\n            if (type === 'button' || type === 'submit' || type === 'reset') {\n                return input.value;\n            }\n        }\n    },\n    // BUTTON, LABEL or button-like element text\n    function (element, userProgrammaticAttribute) {\n        if (element.nodeName === 'BUTTON' || element.nodeName === 'LABEL' || element.getAttribute('role') === 'button') {\n            return getTextualContent(element, userProgrammaticAttribute);\n        }\n    },\n    function (element) { return element.getAttribute('aria-label'); },\n    // associated element text designated by the aria-labelledby attribute\n    function (element, userProgrammaticAttribute) {\n        var labelledByAttribute = element.getAttribute('aria-labelledby');\n        if (labelledByAttribute) {\n            return labelledByAttribute\n                .split(/\\s+/)\n                .map(function (id) { return getElementById(element, id); })\n                .filter(function (label) { return Boolean(label); })\n                .map(function (element) { return getTextualContent(element, userProgrammaticAttribute); })\n                .join(' ');\n        }\n    },\n    function (element) { return element.getAttribute('alt'); },\n    function (element) { return element.getAttribute('name'); },\n    function (element) { return element.getAttribute('title'); },\n    function (element) { return element.getAttribute('placeholder'); },\n    // SELECT first OPTION text\n    function (element, userProgrammaticAttribute) {\n        if ('options' in element && element.options.length > 0) {\n            return getTextualContent(element.options[0], userProgrammaticAttribute);\n        }\n    },\n];\nvar fallbackStrategies = [\n    function (element, userProgrammaticAttribute) { return getTextualContent(element, userProgrammaticAttribute); },\n];\n/**\n * Iterates over the target element and its parent, using the strategies list to get an action name.\n * Each strategies are applied on each element, stopping as soon as a non-empty value is returned.\n */\nvar MAX_PARENTS_TO_CONSIDER = 10;\nfunction getActionNameFromElementForStrategies(targetElement, userProgrammaticAttribute, strategies) {\n    var element = targetElement;\n    var recursionCounter = 0;\n    while (recursionCounter <= MAX_PARENTS_TO_CONSIDER &&\n        element &&\n        element.nodeName !== 'BODY' &&\n        element.nodeName !== 'HTML' &&\n        element.nodeName !== 'HEAD') {\n        for (var _i = 0, strategies_1 = strategies; _i < strategies_1.length; _i++) {\n            var strategy = strategies_1[_i];\n            var name_1 = strategy(element, userProgrammaticAttribute);\n            if (typeof name_1 === 'string') {\n                var trimmedName = name_1.trim();\n                if (trimmedName) {\n                    return truncate(normalizeWhitespace(trimmedName));\n                }\n            }\n        }\n        // Consider a FORM as a contextual limit to get the action name.  This is experimental and may\n        // be reconsidered in the future.\n        if (element.nodeName === 'FORM') {\n            break;\n        }\n        element = getParentElement(element);\n        recursionCounter += 1;\n    }\n}\nfunction normalizeWhitespace(s) {\n    return s.replace(/\\s+/g, ' ');\n}\nfunction truncate(s) {\n    return s.length > 100 ? \"\".concat(safeTruncate(s, 100), \" [...]\") : s;\n}\nfunction getElementById(refElement, id) {\n    // Use the element ownerDocument here, because tests are executed in an iframe, so\n    // document.getElementById won't work.\n    return refElement.ownerDocument ? refElement.ownerDocument.getElementById(id) : null;\n}\nfunction getTextualContent(element, userProgrammaticAttribute) {\n    if (element.isContentEditable) {\n        return;\n    }\n    if ('innerText' in element) {\n        var text_1 = element.innerText;\n        var removeTextFromElements = function (query) {\n            var list = element.querySelectorAll(query);\n            for (var index = 0; index < list.length; index += 1) {\n                var element_1 = list[index];\n                if ('innerText' in element_1) {\n                    var textToReplace = element_1.innerText;\n                    if (textToReplace && textToReplace.trim().length > 0) {\n                        text_1 = text_1.replace(textToReplace, '');\n                    }\n                }\n            }\n        };\n        if (!supportsInnerTextScriptAndStyleRemoval()) {\n            // remove the inner text of SCRIPT and STYLES from the result. This is a bit dirty, but should\n            // be relatively fast and work in most cases.\n            removeTextFromElements('script, style');\n        }\n        // remove the text of elements with programmatic attribute value\n        removeTextFromElements(\"[\".concat(DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE, \"]\"));\n        if (userProgrammaticAttribute) {\n            removeTextFromElements(\"[\".concat(userProgrammaticAttribute, \"]\"));\n        }\n        return text_1;\n    }\n    return element.textContent;\n}\n/**\n * Returns true if element.innerText excludes the text from inline SCRIPT and STYLE element. This\n * should be the case everywhere except on Internet Explorer 10 and 11 (see [1])\n *\n * The innerText property relies on what is actually rendered to compute its output, so to check if\n * it actually excludes SCRIPT and STYLE content, a solution would be to create a style element, set\n * its content to '*', inject it in the document body, and check if the style element innerText\n * property returns '*'. Using a new `document` instance won't work as it is not rendered.\n *\n * This solution requires specific CSP rules (see [2]) to be set by the customer. We want to avoid\n * this, so instead we rely on browser detection. In case of false negative, the impact should be\n * low, since we rely on this result to remove the SCRIPT and STYLE innerText (which will be empty)\n * from a parent element innerText.\n *\n * [1]: https://web.archive.org/web/20210602165716/http://perfectionkills.com/the-poor-misunderstood-innerText/#diff-with-textContent\n * [2]: https://github.com/DataDog/browser-sdk/issues/1084\n */\nfunction supportsInnerTextScriptAndStyleRemoval() {\n    return !isIE();\n}\n/**\n * Returns true if the browser supports the element.labels property.  This should be the case\n * everywhere except on Internet Explorer.\n * Note: The result is computed lazily, because we don't want any DOM access when the SDK is\n * evaluated.\n */\nvar supportsLabelPropertyResult;\nfunction supportsLabelProperty() {\n    if (supportsLabelPropertyResult === undefined) {\n        supportsLabelPropertyResult = 'labels' in HTMLInputElement.prototype;\n    }\n    return supportsLabelPropertyResult;\n}\n/**\n * Returns true if the browser supports the element.closest method.  This should be the case\n * everywhere except on Internet Explorer.\n * Note: The result is computed lazily, because we don't want any DOM access when the SDK is\n * evaluated.\n */\nvar supportsElementClosestResult;\nfunction supportsElementClosest() {\n    if (supportsElementClosestResult === undefined) {\n        supportsElementClosestResult = 'closest' in HTMLElement.prototype;\n    }\n    return supportsElementClosestResult;\n}\n","import { cssEscape, getClassList, getParentElement } from '../browser/polyfills';\nimport { DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE } from './action/getActionNameFromElement';\n/**\n * Stable attributes are attributes that are commonly used to identify parts of a UI (ex:\n * component). Those attribute values should not be generated randomly (hardcoded most of the time)\n * and stay the same across deploys. They are not necessarily unique across the document.\n */\nexport var STABLE_ATTRIBUTES = [\n    DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE,\n    // Common test attributes (list provided by google recorder)\n    'data-testid',\n    'data-test',\n    'data-qa',\n    'data-cy',\n    'data-test-id',\n    'data-qa-id',\n    'data-testing',\n    // FullStory decorator attributes:\n    'data-component',\n    'data-element',\n    'data-source-file',\n];\n// Selectors to use if they target a single element on the whole document. Those selectors are\n// considered as \"stable\" and uniquely identify an element regardless of the page state. If we find\n// one, we should consider the selector \"complete\" and stop iterating over ancestors.\nvar GLOBALLY_UNIQUE_SELECTOR_GETTERS = [getStableAttributeSelector, getIDSelector];\n// Selectors to use if they target a single element among an element descendants. Those selectors\n// are more brittle than \"globally unique\" selectors and should be combined with ancestor selectors\n// to improve specificity.\nvar UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS = [\n    getStableAttributeSelector,\n    getClassSelector,\n    getTagNameSelector,\n];\nexport function getSelectorFromElement(targetElement, actionNameAttribute) {\n    var targetElementSelector = '';\n    var element = targetElement;\n    while (element && element.nodeName !== 'HTML') {\n        var globallyUniqueSelector = findSelector(element, GLOBALLY_UNIQUE_SELECTOR_GETTERS, isSelectorUniqueGlobally, actionNameAttribute, targetElementSelector);\n        if (globallyUniqueSelector) {\n            return globallyUniqueSelector;\n        }\n        var uniqueSelectorAmongChildren = findSelector(element, UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS, isSelectorUniqueAmongSiblings, actionNameAttribute, targetElementSelector);\n        targetElementSelector =\n            uniqueSelectorAmongChildren || combineSelector(getPositionSelector(element), targetElementSelector);\n        element = getParentElement(element);\n    }\n    return targetElementSelector;\n}\nfunction isGeneratedValue(value) {\n    // To compute the \"URL path group\", the backend replaces every URL path parts as a question mark\n    // if it thinks the part is an identifier. The condition it uses is to checks whether a digit is\n    // present.\n    //\n    // Here, we use the same strategy: if a the value contains a digit, we consider it generated. This\n    // strategy might be a bit naive and fail in some cases, but there are many fallbacks to generate\n    // CSS selectors so it should be fine most of the time. We might want to allow customers to\n    // provide their own `isGeneratedValue` at some point.\n    return /[0-9]/.test(value);\n}\nfunction getIDSelector(element) {\n    if (element.id && !isGeneratedValue(element.id)) {\n        return \"#\".concat(cssEscape(element.id));\n    }\n}\nfunction getClassSelector(element) {\n    if (element.tagName === 'BODY') {\n        return;\n    }\n    var classList = getClassList(element);\n    for (var i = 0; i < classList.length; i += 1) {\n        var className = classList[i];\n        if (isGeneratedValue(className)) {\n            continue;\n        }\n        return \"\".concat(cssEscape(element.tagName), \".\").concat(cssEscape(className));\n    }\n}\nfunction getTagNameSelector(element) {\n    return cssEscape(element.tagName);\n}\nfunction getStableAttributeSelector(element, actionNameAttribute) {\n    if (actionNameAttribute) {\n        var selector = getAttributeSelector(actionNameAttribute);\n        if (selector) {\n            return selector;\n        }\n    }\n    for (var _i = 0, STABLE_ATTRIBUTES_1 = STABLE_ATTRIBUTES; _i < STABLE_ATTRIBUTES_1.length; _i++) {\n        var attributeName = STABLE_ATTRIBUTES_1[_i];\n        var selector = getAttributeSelector(attributeName);\n        if (selector) {\n            return selector;\n        }\n    }\n    function getAttributeSelector(attributeName) {\n        if (element.hasAttribute(attributeName)) {\n            return \"\".concat(cssEscape(element.tagName), \"[\").concat(attributeName, \"=\\\"\").concat(cssEscape(element.getAttribute(attributeName)), \"\\\"]\");\n        }\n    }\n}\nfunction getPositionSelector(element) {\n    var sibling = getParentElement(element).firstElementChild;\n    var elementIndex = 1;\n    while (sibling && sibling !== element) {\n        if (sibling.tagName === element.tagName) {\n            elementIndex += 1;\n        }\n        sibling = sibling.nextElementSibling;\n    }\n    return \"\".concat(cssEscape(element.tagName), \":nth-of-type(\").concat(elementIndex, \")\");\n}\nfunction findSelector(element, selectorGetters, predicate, actionNameAttribute, childSelector) {\n    for (var _i = 0, selectorGetters_1 = selectorGetters; _i < selectorGetters_1.length; _i++) {\n        var selectorGetter = selectorGetters_1[_i];\n        var elementSelector = selectorGetter(element, actionNameAttribute);\n        if (!elementSelector) {\n            continue;\n        }\n        var fullSelector = combineSelector(elementSelector, childSelector);\n        if (predicate(element, fullSelector)) {\n            return fullSelector;\n        }\n    }\n}\n/**\n * Check whether the selector is unique among the whole document.\n */\nfunction isSelectorUniqueGlobally(element, selector) {\n    return element.ownerDocument.querySelectorAll(selector).length === 1;\n}\n/**\n * Check whether the selector is unique among the element siblings. In other words, it returns true\n * if \"ELEMENT_PARENT > SELECTOR\" returns a single element.\n *\n * The result will be less accurate on browsers that don't support :scope (i. e. IE): it will check\n * for any element matching the selector contained in the parent (in other words,\n * \"ELEMENT_PARENT SELECTOR\" returns a single element), regardless of whether the selector is a\n * direct descendent of the element parent. This should not impact results too much: if it\n * inaccurately returns false, we'll just fall back to another strategy.\n */\nfunction isSelectorUniqueAmongSiblings(element, selector) {\n    return (getParentElement(element).querySelectorAll(supportScopeSelector() ? combineSelector(':scope', selector) : selector)\n        .length === 1);\n}\nfunction combineSelector(parent, child) {\n    return child ? \"\".concat(parent, \">\").concat(child) : parent;\n}\nvar supportScopeSelectorCache;\nexport function supportScopeSelector() {\n    if (supportScopeSelectorCache === undefined) {\n        try {\n            document.querySelector(':scope');\n            supportScopeSelectorCache = true;\n        }\n        catch (_a) {\n            supportScopeSelectorCache = false;\n        }\n    }\n    return supportScopeSelectorCache;\n}\n","import { ONE_SECOND, clearTimeout, setTimeout } from '@datadog/browser-core';\nexport var MAX_DURATION_BETWEEN_CLICKS = ONE_SECOND;\nexport var MAX_DISTANCE_BETWEEN_CLICKS = 100;\nexport function createClickChain(firstClick, onFinalize) {\n    var bufferedClicks = [];\n    var status = 0 /* ClickChainStatus.WaitingForMoreClicks */;\n    var maxDurationBetweenClicksTimeoutId;\n    appendClick(firstClick);\n    function appendClick(click) {\n        click.stopObservable.subscribe(tryFinalize);\n        bufferedClicks.push(click);\n        clearTimeout(maxDurationBetweenClicksTimeoutId);\n        maxDurationBetweenClicksTimeoutId = setTimeout(dontAcceptMoreClick, MAX_DURATION_BETWEEN_CLICKS);\n    }\n    function tryFinalize() {\n        if (status === 1 /* ClickChainStatus.WaitingForClicksToStop */ && bufferedClicks.every(function (click) { return click.isStopped(); })) {\n            status = 2 /* ClickChainStatus.Finalized */;\n            onFinalize(bufferedClicks);\n        }\n    }\n    function dontAcceptMoreClick() {\n        clearTimeout(maxDurationBetweenClicksTimeoutId);\n        if (status === 0 /* ClickChainStatus.WaitingForMoreClicks */) {\n            status = 1 /* ClickChainStatus.WaitingForClicksToStop */;\n            tryFinalize();\n        }\n    }\n    return {\n        tryAppend: function (click) {\n            if (status !== 0 /* ClickChainStatus.WaitingForMoreClicks */) {\n                return false;\n            }\n            if (bufferedClicks.length > 0 &&\n                !areEventsSimilar(bufferedClicks[bufferedClicks.length - 1].event, click.event)) {\n                dontAcceptMoreClick();\n                return false;\n            }\n            appendClick(click);\n            return true;\n        },\n        stop: function () {\n            dontAcceptMoreClick();\n        },\n    };\n}\n/**\n * Checks whether two events are similar by comparing their target, position and timestamp\n */\nfunction areEventsSimilar(first, second) {\n    return (first.target === second.target &&\n        mouseEventDistance(first, second) <= MAX_DISTANCE_BETWEEN_CLICKS &&\n        first.timeStamp - second.timeStamp <= MAX_DURATION_BETWEEN_CLICKS);\n}\nfunction mouseEventDistance(origin, other) {\n    return Math.sqrt(Math.pow(origin.clientX - other.clientX, 2) + Math.pow(origin.clientY - other.clientY, 2));\n}\n","import { addEventListener, DOM_EVENT } from '@datadog/browser-core';\nexport function listenActionEvents(configuration, _a) {\n    var onPointerDown = _a.onPointerDown, onPointerUp = _a.onPointerUp;\n    var selectionEmptyAtPointerDown;\n    var userActivity = {\n        selection: false,\n        input: false,\n        scroll: false,\n    };\n    var clickContext;\n    var listeners = [\n        addEventListener(configuration, window, DOM_EVENT.POINTER_DOWN, function (event) {\n            if (isValidPointerEvent(event)) {\n                selectionEmptyAtPointerDown = isSelectionEmpty();\n                userActivity = {\n                    selection: false,\n                    input: false,\n                    scroll: false,\n                };\n                clickContext = onPointerDown(event);\n            }\n        }, { capture: true }),\n        addEventListener(configuration, window, DOM_EVENT.SELECTION_CHANGE, function () {\n            if (!selectionEmptyAtPointerDown || !isSelectionEmpty()) {\n                userActivity.selection = true;\n            }\n        }, { capture: true }),\n        addEventListener(configuration, window, DOM_EVENT.SCROLL, function () {\n            userActivity.scroll = true;\n        }, { capture: true, passive: true }),\n        addEventListener(configuration, window, DOM_EVENT.POINTER_UP, function (event) {\n            if (isValidPointerEvent(event) && clickContext) {\n                // Use a scoped variable to make sure the value is not changed by other clicks\n                var localUserActivity_1 = userActivity;\n                onPointerUp(clickContext, event, function () { return localUserActivity_1; });\n                clickContext = undefined;\n            }\n        }, { capture: true }),\n        addEventListener(configuration, window, DOM_EVENT.INPUT, function () {\n            userActivity.input = true;\n        }, { capture: true }),\n    ];\n    return {\n        stop: function () {\n            listeners.forEach(function (listener) { return listener.stop(); });\n        },\n    };\n}\nfunction isSelectionEmpty() {\n    var selection = window.getSelection();\n    return !selection || selection.isCollapsed;\n}\nfunction isValidPointerEvent(event) {\n    return (event.target instanceof Element &&\n        // Only consider 'primary' pointer events for now. Multi-touch support could be implemented in\n        // the future.\n        event.isPrimary !== false);\n}\n","import { ONE_SECOND } from '@datadog/browser-core';\nimport { elementMatches } from '../../browser/polyfills';\nvar MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE = 3;\nexport function computeFrustration(clicks, rageClick) {\n    if (isRage(clicks)) {\n        rageClick.addFrustration(\"rage_click\" /* FrustrationType.RAGE_CLICK */);\n        if (clicks.some(isDead)) {\n            rageClick.addFrustration(\"dead_click\" /* FrustrationType.DEAD_CLICK */);\n        }\n        if (rageClick.hasError) {\n            rageClick.addFrustration(\"error_click\" /* FrustrationType.ERROR_CLICK */);\n        }\n        return { isRage: true };\n    }\n    var hasSelectionChanged = clicks.some(function (click) { return click.getUserActivity().selection; });\n    clicks.forEach(function (click) {\n        if (click.hasError) {\n            click.addFrustration(\"error_click\" /* FrustrationType.ERROR_CLICK */);\n        }\n        if (isDead(click) &&\n            // Avoid considering clicks part of a double-click or triple-click selections as dead clicks\n            !hasSelectionChanged) {\n            click.addFrustration(\"dead_click\" /* FrustrationType.DEAD_CLICK */);\n        }\n    });\n    return { isRage: false };\n}\nexport function isRage(clicks) {\n    if (clicks.some(function (click) { return click.getUserActivity().selection || click.getUserActivity().scroll; })) {\n        return false;\n    }\n    for (var i = 0; i < clicks.length - (MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE - 1); i += 1) {\n        if (clicks[i + MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE - 1].event.timeStamp - clicks[i].event.timeStamp <=\n            ONE_SECOND) {\n            return true;\n        }\n    }\n    return false;\n}\nvar DEAD_CLICK_EXCLUDE_SELECTOR = \n// inputs that don't trigger a meaningful event like \"input\" when clicked, including textual\n// inputs (using a negative selector is shorter here)\n'input:not([type=\"checkbox\"]):not([type=\"radio\"]):not([type=\"button\"]):not([type=\"submit\"]):not([type=\"reset\"]):not([type=\"range\"]),' +\n    'textarea,' +\n    'select,' +\n    // contenteditable and their descendants don't always trigger meaningful changes when manipulated\n    '[contenteditable],' +\n    '[contenteditable] *,' +\n    // canvas, as there is no good way to detect activity occurring on them\n    'canvas,' +\n    // links that are interactive (have an href attribute) or any of their descendants, as they can\n    // open a new tab or navigate to a hash without triggering a meaningful event\n    'a[href],' +\n    'a[href] *';\nexport function isDead(click) {\n    if (click.hasPageActivity || click.getUserActivity().input || click.getUserActivity().scroll) {\n        return false;\n    }\n    return !elementMatches(click.event.target, DEAD_CLICK_EXCLUDE_SELECTOR);\n}\n","import { includes, timeStampNow, Observable, assign, getRelativeTime, ONE_MINUTE, ValueHistory, generateUUID, clocksNow, ONE_SECOND, elapsed, } from '@datadog/browser-core';\nimport { trackEventCounts } from '../trackEventCounts';\nimport { PAGE_ACTIVITY_VALIDATION_DELAY, waitPageActivityEnd } from '../waitPageActivityEnd';\nimport { getSelectorFromElement } from '../getSelectorFromElement';\nimport { createClickChain } from './clickChain';\nimport { getActionNameFromElement } from './getActionNameFromElement';\nimport { listenActionEvents } from './listenActionEvents';\nimport { computeFrustration } from './computeFrustration';\n// Maximum duration for click actions\nexport var CLICK_ACTION_MAX_DURATION = 10 * ONE_SECOND;\nexport var ACTION_CONTEXT_TIME_OUT_DELAY = 5 * ONE_MINUTE; // arbitrary\nexport function trackClickActions(lifeCycle, domMutationObservable, configuration) {\n    var history = new ValueHistory(ACTION_CONTEXT_TIME_OUT_DELAY);\n    var stopObservable = new Observable();\n    var currentClickChain;\n    lifeCycle.subscribe(10 /* LifeCycleEventType.SESSION_RENEWED */, function () {\n        history.reset();\n    });\n    lifeCycle.subscribe(5 /* LifeCycleEventType.VIEW_ENDED */, stopClickChain);\n    var stopActionEventsListener = listenActionEvents(configuration, {\n        onPointerDown: function (pointerDownEvent) {\n            return processPointerDown(configuration, lifeCycle, domMutationObservable, pointerDownEvent);\n        },\n        onPointerUp: function (_a, startEvent, getUserActivity) {\n            var clickActionBase = _a.clickActionBase, hadActivityOnPointerDown = _a.hadActivityOnPointerDown;\n            return startClickAction(configuration, lifeCycle, domMutationObservable, history, stopObservable, appendClickToClickChain, clickActionBase, startEvent, getUserActivity, hadActivityOnPointerDown);\n        },\n    }).stop;\n    var actionContexts = {\n        findActionId: function (startTime) { return history.findAll(startTime); },\n    };\n    return {\n        stop: function () {\n            stopClickChain();\n            stopObservable.notify();\n            stopActionEventsListener();\n        },\n        actionContexts: actionContexts,\n    };\n    function appendClickToClickChain(click) {\n        if (!currentClickChain || !currentClickChain.tryAppend(click)) {\n            var rageClick_1 = click.clone();\n            currentClickChain = createClickChain(click, function (clicks) {\n                finalizeClicks(clicks, rageClick_1);\n            });\n        }\n    }\n    function stopClickChain() {\n        if (currentClickChain) {\n            currentClickChain.stop();\n        }\n    }\n}\nfunction processPointerDown(configuration, lifeCycle, domMutationObservable, pointerDownEvent) {\n    var clickActionBase = computeClickActionBase(pointerDownEvent, configuration.actionNameAttribute);\n    var hadActivityOnPointerDown = false;\n    waitPageActivityEnd(lifeCycle, domMutationObservable, configuration, function (pageActivityEndEvent) {\n        hadActivityOnPointerDown = pageActivityEndEvent.hadActivity;\n    }, \n    // We don't care about the activity duration, we just want to know whether an activity did happen\n    // within the \"validation delay\" or not. Limit the duration so the callback is called sooner.\n    PAGE_ACTIVITY_VALIDATION_DELAY);\n    return { clickActionBase: clickActionBase, hadActivityOnPointerDown: function () { return hadActivityOnPointerDown; } };\n}\nfunction startClickAction(configuration, lifeCycle, domMutationObservable, history, stopObservable, appendClickToClickChain, clickActionBase, startEvent, getUserActivity, hadActivityOnPointerDown) {\n    var click = newClick(lifeCycle, history, getUserActivity, clickActionBase, startEvent);\n    appendClickToClickChain(click);\n    var stopWaitPageActivityEnd = waitPageActivityEnd(lifeCycle, domMutationObservable, configuration, function (pageActivityEndEvent) {\n        if (pageActivityEndEvent.hadActivity && pageActivityEndEvent.end < click.startClocks.timeStamp) {\n            // If the clock is looking weird, just discard the click\n            click.discard();\n        }\n        else {\n            if (pageActivityEndEvent.hadActivity) {\n                click.stop(pageActivityEndEvent.end);\n            }\n            else if (hadActivityOnPointerDown()) {\n                click.stop(\n                // using the click start as activity end, so the click will have some activity but its\n                // duration will be 0 (as the activity started before the click start)\n                click.startClocks.timeStamp);\n            }\n            else {\n                click.stop();\n            }\n        }\n    }, CLICK_ACTION_MAX_DURATION).stop;\n    var viewEndedSubscription = lifeCycle.subscribe(5 /* LifeCycleEventType.VIEW_ENDED */, function (_a) {\n        var endClocks = _a.endClocks;\n        click.stop(endClocks.timeStamp);\n    });\n    var stopSubscription = stopObservable.subscribe(function () {\n        click.stop();\n    });\n    click.stopObservable.subscribe(function () {\n        viewEndedSubscription.unsubscribe();\n        stopWaitPageActivityEnd();\n        stopSubscription.unsubscribe();\n    });\n}\nfunction computeClickActionBase(event, actionNameAttribute) {\n    var rect = event.target.getBoundingClientRect();\n    return {\n        type: \"click\" /* ActionType.CLICK */,\n        target: {\n            width: Math.round(rect.width),\n            height: Math.round(rect.height),\n            selector: getSelectorFromElement(event.target, actionNameAttribute),\n        },\n        position: {\n            // Use clientX and Y because for SVG element offsetX and Y are relatives to the <svg> element\n            x: Math.round(event.clientX - rect.left),\n            y: Math.round(event.clientY - rect.top),\n        },\n        name: getActionNameFromElement(event.target, actionNameAttribute),\n    };\n}\nfunction newClick(lifeCycle, history, getUserActivity, clickActionBase, startEvent) {\n    var id = generateUUID();\n    var startClocks = clocksNow();\n    var historyEntry = history.add(id, startClocks.relative);\n    var eventCountsSubscription = trackEventCounts({\n        lifeCycle: lifeCycle,\n        isChildEvent: function (event) {\n            return event.action !== undefined &&\n                (Array.isArray(event.action.id) ? includes(event.action.id, id) : event.action.id === id);\n        },\n    });\n    var status = 0 /* ClickStatus.ONGOING */;\n    var activityEndTime;\n    var frustrationTypes = [];\n    var stopObservable = new Observable();\n    function stop(newActivityEndTime) {\n        if (status !== 0 /* ClickStatus.ONGOING */) {\n            return;\n        }\n        activityEndTime = newActivityEndTime;\n        status = 1 /* ClickStatus.STOPPED */;\n        if (activityEndTime) {\n            historyEntry.close(getRelativeTime(activityEndTime));\n        }\n        else {\n            historyEntry.remove();\n        }\n        eventCountsSubscription.stop();\n        stopObservable.notify();\n    }\n    return {\n        event: startEvent,\n        stop: stop,\n        stopObservable: stopObservable,\n        get hasError() {\n            return eventCountsSubscription.eventCounts.errorCount > 0;\n        },\n        get hasPageActivity() {\n            return activityEndTime !== undefined;\n        },\n        getUserActivity: getUserActivity,\n        addFrustration: function (frustrationType) {\n            frustrationTypes.push(frustrationType);\n        },\n        startClocks: startClocks,\n        isStopped: function () { return status === 1 /* ClickStatus.STOPPED */ || status === 2 /* ClickStatus.FINALIZED */; },\n        clone: function () { return newClick(lifeCycle, history, getUserActivity, clickActionBase, startEvent); },\n        validate: function (domEvents) {\n            stop();\n            if (status !== 1 /* ClickStatus.STOPPED */) {\n                return;\n            }\n            var _a = eventCountsSubscription.eventCounts, resourceCount = _a.resourceCount, errorCount = _a.errorCount, longTaskCount = _a.longTaskCount;\n            var clickAction = assign({\n                type: \"click\" /* ActionType.CLICK */,\n                duration: activityEndTime && elapsed(startClocks.timeStamp, activityEndTime),\n                startClocks: startClocks,\n                id: id,\n                frustrationTypes: frustrationTypes,\n                counts: {\n                    resourceCount: resourceCount,\n                    errorCount: errorCount,\n                    longTaskCount: longTaskCount,\n                },\n                events: domEvents !== null && domEvents !== void 0 ? domEvents : [startEvent],\n                event: startEvent,\n            }, clickActionBase);\n            lifeCycle.notify(1 /* LifeCycleEventType.AUTO_ACTION_COMPLETED */, clickAction);\n            status = 2 /* ClickStatus.FINALIZED */;\n        },\n        discard: function () {\n            stop();\n            status = 2 /* ClickStatus.FINALIZED */;\n        },\n    };\n}\nexport function finalizeClicks(clicks, rageClick) {\n    var isRage = computeFrustration(clicks, rageClick).isRage;\n    if (isRage) {\n        clicks.forEach(function (click) { return click.discard(); });\n        rageClick.stop(timeStampNow());\n        rageClick.validate(clicks.map(function (click) { return click.event; }));\n    }\n    else {\n        rageClick.discard();\n        clicks.forEach(function (click) { return click.validate(); });\n    }\n}\n","import { noop, assign, combine, toServerDuration, generateUUID } from '@datadog/browser-core';\nimport { trackClickActions } from './trackClickActions';\nexport function startActionCollection(lifeCycle, domMutationObservable, configuration, pageStateHistory) {\n    lifeCycle.subscribe(1 /* LifeCycleEventType.AUTO_ACTION_COMPLETED */, function (action) {\n        return lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, processAction(action, pageStateHistory));\n    });\n    var actionContexts = { findActionId: noop };\n    if (configuration.trackUserInteractions) {\n        actionContexts = trackClickActions(lifeCycle, domMutationObservable, configuration).actionContexts;\n    }\n    return {\n        addAction: function (action, savedCommonContext) {\n            lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, assign({\n                savedCommonContext: savedCommonContext,\n            }, processAction(action, pageStateHistory)));\n        },\n        actionContexts: actionContexts,\n    };\n}\nfunction processAction(action, pageStateHistory) {\n    var autoActionProperties = isAutoAction(action)\n        ? {\n            action: {\n                id: action.id,\n                loading_time: toServerDuration(action.duration),\n                frustration: {\n                    type: action.frustrationTypes,\n                },\n                error: {\n                    count: action.counts.errorCount,\n                },\n                long_task: {\n                    count: action.counts.longTaskCount,\n                },\n                resource: {\n                    count: action.counts.resourceCount,\n                },\n            },\n            _dd: {\n                action: {\n                    target: action.target,\n                    position: action.position,\n                },\n            },\n        }\n        : undefined;\n    var customerContext = !isAutoAction(action) ? action.context : undefined;\n    var actionEvent = combine({\n        action: {\n            id: generateUUID(),\n            target: {\n                name: action.name,\n            },\n            type: action.type,\n        },\n        date: action.startClocks.timeStamp,\n        type: \"action\" /* RumEventType.ACTION */,\n        view: { in_foreground: pageStateHistory.wasInPageStateAt(\"active\" /* PageState.ACTIVE */, action.startClocks.relative) },\n    }, autoActionProperties);\n    return {\n        customerContext: customerContext,\n        rawRumEvent: actionEvent,\n        startTime: action.startClocks.relative,\n        domainContext: isAutoAction(action) ? { events: action.events } : {},\n    };\n}\nfunction isAutoAction(action) {\n    return action.type !== \"custom\" /* ActionType.CUSTOM */;\n}\n","import { instrumentMethod } from '../../tools/instrumentMethod';\nimport { clocksNow } from '../../tools/utils/timeUtils';\nimport { computeStackTrace, computeStackTraceFromOnErrorMessage } from '../../tools/stackTrace/computeStackTrace';\nimport { computeRawError } from './error';\nimport { ErrorSource } from './error.types';\nexport function trackRuntimeError(errorObservable) {\n    var handleRuntimeError = function (stackTrace, originalError) {\n        var rawError = computeRawError({\n            stackTrace: stackTrace,\n            originalError: originalError,\n            startClocks: clocksNow(),\n            nonErrorPrefix: \"Uncaught\" /* NonErrorPrefix.UNCAUGHT */,\n            source: ErrorSource.SOURCE,\n            handling: \"unhandled\" /* ErrorHandling.UNHANDLED */,\n        });\n        errorObservable.notify(rawError);\n    };\n    var stopInstrumentingOnError = instrumentOnError(handleRuntimeError).stop;\n    var stopInstrumentingOnUnhandledRejection = instrumentUnhandledRejection(handleRuntimeError).stop;\n    return {\n        stop: function () {\n            stopInstrumentingOnError();\n            stopInstrumentingOnUnhandledRejection();\n        },\n    };\n}\nexport function instrumentOnError(callback) {\n    return instrumentMethod(window, 'onerror', function (_a) {\n        var _b = _a.parameters, messageObj = _b[0], url = _b[1], line = _b[2], column = _b[3], errorObj = _b[4];\n        var stackTrace;\n        if (errorObj instanceof Error) {\n            stackTrace = computeStackTrace(errorObj);\n        }\n        else {\n            stackTrace = computeStackTraceFromOnErrorMessage(messageObj, url, line, column);\n        }\n        callback(stackTrace, errorObj !== null && errorObj !== void 0 ? errorObj : messageObj);\n    });\n}\nexport function instrumentUnhandledRejection(callback) {\n    return instrumentMethod(window, 'onunhandledrejection', function (_a) {\n        var e = _a.parameters[0];\n        var reason = e.reason || 'Empty reason';\n        var stack = computeStackTrace(reason);\n        callback(stack, reason);\n    });\n}\n","import { flattenErrorCauses, tryToGetFingerprint } from '../error/error';\nimport { mergeObservables, Observable } from '../../tools/observable';\nimport { ConsoleApiName, globalConsole } from '../../tools/display';\nimport { callMonitored } from '../../tools/monitor';\nimport { sanitize } from '../../tools/serialisation/sanitize';\nimport { find } from '../../tools/utils/polyfills';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nimport { computeStackTrace } from '../../tools/stackTrace/computeStackTrace';\nimport { createHandlingStack, toStackTraceString, formatErrorMessage } from '../../tools/stackTrace/handlingStack';\nvar consoleObservablesByApi = {};\nexport function initConsoleObservable(apis) {\n    var consoleObservables = apis.map(function (api) {\n        if (!consoleObservablesByApi[api]) {\n            consoleObservablesByApi[api] = createConsoleObservable(api);\n        }\n        return consoleObservablesByApi[api];\n    });\n    return mergeObservables.apply(void 0, consoleObservables);\n}\nexport function resetConsoleObservable() {\n    consoleObservablesByApi = {};\n}\nfunction createConsoleObservable(api) {\n    return new Observable(function (observable) {\n        var originalConsoleApi = globalConsole[api];\n        globalConsole[api] = function () {\n            var params = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                params[_i] = arguments[_i];\n            }\n            originalConsoleApi.apply(console, params);\n            var handlingStack = createHandlingStack();\n            callMonitored(function () {\n                observable.notify(buildConsoleLog(params, api, handlingStack));\n            });\n        };\n        return function () {\n            globalConsole[api] = originalConsoleApi;\n        };\n    });\n}\nfunction buildConsoleLog(params, api, handlingStack) {\n    var message = params.map(function (param) { return formatConsoleParameters(param); }).join(' ');\n    var stack;\n    var fingerprint;\n    var causes;\n    if (api === ConsoleApiName.error) {\n        var firstErrorParam = find(params, function (param) { return param instanceof Error; });\n        stack = firstErrorParam ? toStackTraceString(computeStackTrace(firstErrorParam)) : undefined;\n        fingerprint = tryToGetFingerprint(firstErrorParam);\n        causes = firstErrorParam ? flattenErrorCauses(firstErrorParam, 'console') : undefined;\n    }\n    return {\n        api: api,\n        message: message,\n        stack: stack,\n        handlingStack: handlingStack,\n        fingerprint: fingerprint,\n        causes: causes,\n    };\n}\nfunction formatConsoleParameters(param) {\n    if (typeof param === 'string') {\n        return sanitize(param);\n    }\n    if (param instanceof Error) {\n        return formatErrorMessage(computeStackTrace(param));\n    }\n    return jsonStringify(sanitize(param), undefined, 2);\n}\n","import { toStackTraceString } from '../../tools/stackTrace/handlingStack';\nimport { monitor } from '../../tools/monitor';\nimport { mergeObservables, Observable } from '../../tools/observable';\nimport { addEventListener, DOM_EVENT } from '../../browser/addEventListener';\nimport { includes } from '../../tools/utils/polyfills';\nimport { safeTruncate } from '../../tools/utils/stringUtils';\nexport var RawReportType = {\n    intervention: 'intervention',\n    deprecation: 'deprecation',\n    cspViolation: 'csp_violation',\n};\nexport function initReportObservable(configuration, apis) {\n    var observables = [];\n    if (includes(apis, RawReportType.cspViolation)) {\n        observables.push(createCspViolationReportObservable(configuration));\n    }\n    var reportTypes = apis.filter(function (api) { return api !== RawReportType.cspViolation; });\n    if (reportTypes.length) {\n        observables.push(createReportObservable(reportTypes));\n    }\n    return mergeObservables.apply(void 0, observables);\n}\nfunction createReportObservable(reportTypes) {\n    return new Observable(function (observable) {\n        if (!window.ReportingObserver) {\n            return;\n        }\n        var handleReports = monitor(function (reports, _) {\n            return reports.forEach(function (report) {\n                observable.notify(buildRawReportFromReport(report));\n            });\n        });\n        var observer = new window.ReportingObserver(handleReports, {\n            types: reportTypes,\n            buffered: true,\n        });\n        observer.observe();\n        return function () {\n            observer.disconnect();\n        };\n    });\n}\nfunction createCspViolationReportObservable(configuration) {\n    return new Observable(function (observable) {\n        var stop = addEventListener(configuration, document, DOM_EVENT.SECURITY_POLICY_VIOLATION, function (event) {\n            observable.notify(buildRawReportFromCspViolation(event));\n        }).stop;\n        return stop;\n    });\n}\nfunction buildRawReportFromReport(report) {\n    var type = report.type, body = report.body;\n    return {\n        type: type,\n        subtype: body.id,\n        message: \"\".concat(type, \": \").concat(body.message),\n        originalReport: report,\n        stack: buildStack(body.id, body.message, body.sourceFile, body.lineNumber, body.columnNumber),\n    };\n}\nfunction buildRawReportFromCspViolation(event) {\n    var type = RawReportType.cspViolation;\n    var message = \"'\".concat(event.blockedURI, \"' blocked by '\").concat(event.effectiveDirective, \"' directive\");\n    return {\n        type: RawReportType.cspViolation,\n        subtype: event.effectiveDirective,\n        message: \"\".concat(type, \": \").concat(message),\n        stack: buildStack(event.effectiveDirective, event.originalPolicy\n            ? \"\".concat(message, \" of the policy \\\"\").concat(safeTruncate(event.originalPolicy, 100, '...'), \"\\\"\")\n            : 'no policy', event.sourceFile, event.lineNumber, event.columnNumber),\n        originalReport: event,\n    };\n}\nfunction buildStack(name, message, sourceFile, lineNumber, columnNumber) {\n    return sourceFile\n        ? toStackTraceString({\n            name: name,\n            message: message,\n            stack: [\n                {\n                    func: '?',\n                    url: sourceFile,\n                    line: lineNumber !== null && lineNumber !== void 0 ? lineNumber : undefined,\n                    column: columnNumber !== null && columnNumber !== void 0 ? columnNumber : undefined,\n                },\n            ],\n        })\n        : undefined;\n}\n","import { addDuration } from '@datadog/browser-core';\nimport { toValidEntry } from './resourceUtils';\n/**\n * Look for corresponding timing in resource timing buffer\n *\n * Observations:\n * - Timing (start, end) are nested inside the request (start, end)\n * - Some timing can be not exactly nested, being off by < 1 ms\n *\n * Strategy:\n * - from valid nested entries (with 1 ms error margin)\n * - if a single timing match, return the timing\n * - otherwise we can't decide, return undefined\n */\nexport function matchRequestTiming(request) {\n    if (!performance || !('getEntriesByName' in performance)) {\n        return;\n    }\n    var sameNameEntries = performance.getEntriesByName(request.url, 'resource');\n    if (!sameNameEntries.length || !('toJSON' in sameNameEntries[0])) {\n        return;\n    }\n    var candidates = sameNameEntries\n        .map(function (entry) { return entry.toJSON(); })\n        .filter(toValidEntry)\n        .filter(function (entry) {\n        return isBetween(entry, request.startClocks.relative, endTime({ startTime: request.startClocks.relative, duration: request.duration }));\n    });\n    if (candidates.length === 1) {\n        return candidates[0];\n    }\n    return;\n}\nfunction endTime(timing) {\n    return addDuration(timing.startTime, timing.duration);\n}\nfunction isBetween(timing, start, end) {\n    var errorMargin = 1;\n    return timing.startTime >= start - errorMargin && endTime(timing) <= addDuration(end, errorMargin);\n}\n","import { combine, generateUUID, toServerDuration, relativeToClocks, assign, isNumber, isExperimentalFeatureEnabled, ExperimentalFeature, } from '@datadog/browser-core';\nimport { RumPerformanceEntryType } from '../../browser/performanceCollection';\nimport { matchRequestTiming } from './matchRequestTiming';\nimport { computePerformanceResourceDetails, computePerformanceResourceDuration, computeResourceKind, computeSize, isRequestKind, isLongDataUrl, sanitizeDataUrl, } from './resourceUtils';\nexport function startResourceCollection(lifeCycle, configuration, sessionManager, pageStateHistory) {\n    lifeCycle.subscribe(8 /* LifeCycleEventType.REQUEST_COMPLETED */, function (request) {\n        var rawEvent = processRequest(request, configuration, sessionManager, pageStateHistory);\n        if (rawEvent) {\n            lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, rawEvent);\n        }\n    });\n    lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if (entry.entryType === RumPerformanceEntryType.RESOURCE && !isRequestKind(entry)) {\n                var rawEvent = processResourceEntry(entry, configuration, sessionManager, pageStateHistory);\n                if (rawEvent) {\n                    lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, rawEvent);\n                }\n            }\n        }\n    });\n}\nfunction processRequest(request, configuration, sessionManager, pageStateHistory) {\n    var _a;\n    var matchingTiming = matchRequestTiming(request);\n    var startClocks = matchingTiming ? relativeToClocks(matchingTiming.startTime) : request.startClocks;\n    var shouldIndex = shouldIndexResource(configuration, sessionManager, startClocks);\n    var tracingInfo = computeRequestTracingInfo(request, configuration);\n    if (!shouldIndex && !tracingInfo) {\n        return;\n    }\n    var type = request.type === \"xhr\" /* RequestType.XHR */ ? \"xhr\" /* ResourceType.XHR */ : \"fetch\" /* ResourceType.FETCH */;\n    var correspondingTimingOverrides = matchingTiming ? computePerformanceEntryMetrics(matchingTiming) : undefined;\n    var duration = computeRequestDuration(pageStateHistory, startClocks, request.duration);\n    var pageStateInfo = computePageStateInfo(pageStateHistory, startClocks, (_a = matchingTiming === null || matchingTiming === void 0 ? void 0 : matchingTiming.duration) !== null && _a !== void 0 ? _a : request.duration);\n    var resourceEvent = combine({\n        date: startClocks.timeStamp,\n        resource: {\n            id: generateUUID(),\n            type: type,\n            duration: duration,\n            method: request.method,\n            status_code: request.status,\n            url: isLongDataUrl(request.url) ? sanitizeDataUrl(request.url) : request.url,\n        },\n        type: \"resource\" /* RumEventType.RESOURCE */,\n        _dd: {\n            discarded: !shouldIndex,\n        },\n    }, tracingInfo, correspondingTimingOverrides, pageStateInfo);\n    return {\n        startTime: startClocks.relative,\n        rawRumEvent: resourceEvent,\n        domainContext: {\n            performanceEntry: matchingTiming,\n            xhr: request.xhr,\n            response: request.response,\n            requestInput: request.input,\n            requestInit: request.init,\n            error: request.error,\n            isAborted: request.isAborted,\n        },\n    };\n}\nfunction processResourceEntry(entry, configuration, sessionManager, pageStateHistory) {\n    var startClocks = relativeToClocks(entry.startTime);\n    var shouldIndex = shouldIndexResource(configuration, sessionManager, startClocks);\n    var tracingInfo = computeEntryTracingInfo(entry, configuration);\n    if (!shouldIndex && !tracingInfo) {\n        return;\n    }\n    var type = computeResourceKind(entry);\n    var entryMetrics = computePerformanceEntryMetrics(entry);\n    var pageStateInfo = computePageStateInfo(pageStateHistory, startClocks, entry.duration);\n    var resourceEvent = combine({\n        date: startClocks.timeStamp,\n        resource: {\n            id: generateUUID(),\n            type: type,\n            url: entry.name,\n            status_code: discardZeroStatus(entry.responseStatus),\n        },\n        type: \"resource\" /* RumEventType.RESOURCE */,\n        _dd: {\n            discarded: !shouldIndex,\n        },\n    }, tracingInfo, entryMetrics, pageStateInfo);\n    return {\n        startTime: startClocks.relative,\n        rawRumEvent: resourceEvent,\n        domainContext: {\n            performanceEntry: entry,\n        },\n    };\n}\nfunction shouldIndexResource(configuration, sessionManager, resourceStart) {\n    return configuration.trackResources && sessionManager.findTrackedSession(resourceStart.relative);\n}\nfunction computePerformanceEntryMetrics(timing) {\n    var renderBlockingStatus = timing.renderBlockingStatus;\n    return {\n        resource: assign({\n            duration: computePerformanceResourceDuration(timing),\n            render_blocking_status: renderBlockingStatus,\n        }, computeSize(timing), computePerformanceResourceDetails(timing)),\n    };\n}\nfunction computeRequestTracingInfo(request, configuration) {\n    var hasBeenTraced = request.traceSampled && request.traceId && request.spanId;\n    if (!hasBeenTraced) {\n        return undefined;\n    }\n    return {\n        _dd: {\n            span_id: request.spanId.toDecimalString(),\n            trace_id: request.traceId.toDecimalString(),\n            rule_psr: getRulePsr(configuration),\n        },\n    };\n}\nfunction computeEntryTracingInfo(entry, configuration) {\n    var hasBeenTraced = entry.traceId;\n    if (!hasBeenTraced) {\n        return undefined;\n    }\n    return {\n        _dd: {\n            trace_id: entry.traceId,\n            rule_psr: getRulePsr(configuration),\n        },\n    };\n}\n/**\n * @returns number between 0 and 1 which represents trace sample rate\n */\nfunction getRulePsr(configuration) {\n    return isNumber(configuration.traceSampleRate) ? configuration.traceSampleRate / 100 : undefined;\n}\nfunction computePageStateInfo(pageStateHistory, startClocks, duration) {\n    if (!isExperimentalFeatureEnabled(ExperimentalFeature.RESOURCE_PAGE_STATES)) {\n        return;\n    }\n    return {\n        _dd: {\n            page_states: pageStateHistory.findAll(startClocks.relative, duration),\n            page_was_discarded: String(document.wasDiscarded),\n        },\n    };\n}\nfunction computeRequestDuration(pageStateHistory, startClocks, duration) {\n    return !pageStateHistory.wasInPageStateDuringPeriod(\"frozen\" /* PageState.FROZEN */, startClocks.relative, duration)\n        ? toServerDuration(duration)\n        : undefined;\n}\n/**\n * The status is 0 for cross-origin resources without CORS headers, so the status is meaningless, and we shouldn't report it\n * https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming/responseStatus#cross-origin_response_status_codes\n */\nfunction discardZeroStatus(statusCode) {\n    return statusCode === 0 ? undefined : statusCode;\n}\n","import { ONE_MINUTE, find } from '@datadog/browser-core';\nimport { RumPerformanceEntryType } from '../../../browser/performanceCollection';\n// Discard FCP timings above a certain delay to avoid incorrect data\n// It happens in some cases like sleep mode or some browser implementations\nexport var FCP_MAXIMUM_DELAY = 10 * ONE_MINUTE;\nexport function trackFirstContentfulPaint(lifeCycle, firstHidden, callback) {\n    var unsubscribeLifeCycle = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        var fcpEntry = find(entries, function (entry) {\n            return entry.entryType === RumPerformanceEntryType.PAINT &&\n                entry.name === 'first-contentful-paint' &&\n                entry.startTime < firstHidden.timeStamp &&\n                entry.startTime < FCP_MAXIMUM_DELAY;\n        });\n        if (fcpEntry) {\n            callback(fcpEntry.startTime);\n        }\n    }).unsubscribe;\n    return {\n        stop: unsubscribeLifeCycle,\n    };\n}\n","import { DOM_EVENT, ExperimentalFeature, ONE_MINUTE, addEventListeners, addTelemetryDebug, findLast, isExperimentalFeatureEnabled, relativeNow, } from '@datadog/browser-core';\nimport { RumPerformanceEntryType } from '../../../browser/performanceCollection';\nimport { getSelectorFromElement } from '../../getSelectorFromElement';\n// Discard LCP timings above a certain delay to avoid incorrect data\n// It happens in some cases like sleep mode or some browser implementations\nexport var LCP_MAXIMUM_DELAY = 10 * ONE_MINUTE;\nvar wrongLcpReported = false;\nvar previousLcp;\n/**\n * Track the largest contentful paint (LCP) occurring during the initial View.  This can yield\n * multiple values, only the most recent one should be used.\n * Documentation: https://web.dev/lcp/\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/master/src/onLCP.ts\n */\nexport function trackLargestContentfulPaint(lifeCycle, configuration, firstHidden, eventTarget, callback) {\n    // Ignore entries that come after the first user interaction. According to the documentation, the\n    // browser should not send largest-contentful-paint entries after a user interact with the page,\n    // but the web-vitals reference implementation uses this as a safeguard.\n    var firstInteractionTimestamp = Infinity;\n    var stopEventListener = addEventListeners(configuration, eventTarget, [DOM_EVENT.POINTER_DOWN, DOM_EVENT.KEY_DOWN], function (event) {\n        firstInteractionTimestamp = event.timeStamp;\n    }, { capture: true, once: true }).stop;\n    var biggestLcpSize = 0;\n    var unsubscribeLifeCycle = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        var lcpEntry = findLast(entries, function (entry) {\n            return entry.entryType === RumPerformanceEntryType.LARGEST_CONTENTFUL_PAINT &&\n                entry.startTime < firstInteractionTimestamp &&\n                entry.startTime < firstHidden.timeStamp &&\n                entry.startTime < LCP_MAXIMUM_DELAY &&\n                // Ensure to get the LCP entry with the biggest size, see\n                // https://bugs.chromium.org/p/chromium/issues/detail?id=1516655\n                entry.size > biggestLcpSize;\n        });\n        if (lcpEntry) {\n            var lcpTargetSelector = void 0;\n            if (lcpEntry.element) {\n                lcpTargetSelector = getSelectorFromElement(lcpEntry.element, configuration.actionNameAttribute);\n            }\n            if (isExperimentalFeatureEnabled(ExperimentalFeature.ZERO_LCP_TELEMETRY)) {\n                monitorLcpEntries(lcpEntry, entries.filter(function (entry) {\n                    return entry.entryType === RumPerformanceEntryType.LARGEST_CONTENTFUL_PAINT;\n                }));\n            }\n            callback({\n                value: lcpEntry.startTime,\n                targetSelector: lcpTargetSelector,\n            });\n            biggestLcpSize = lcpEntry.size;\n        }\n    }).unsubscribe;\n    return {\n        stop: function () {\n            stopEventListener();\n            unsubscribeLifeCycle();\n        },\n    };\n}\nfunction monitorLcpEntries(lcpEntry, lcpEntries) {\n    if (wrongLcpReported) {\n        return;\n    }\n    var wrongLcpDetected = lcpEntry.startTime === 0\n        ? 'LCP with startTime = 0'\n        : previousLcp !== undefined && lcpEntry.startTime < previousLcp.startTime\n            ? 'LCP with startTime < previous LCP'\n            : previousLcp !== undefined && lcpEntry.size < previousLcp.size\n                ? 'LCP with size < previous LCP'\n                : undefined;\n    if (wrongLcpDetected) {\n        wrongLcpReported = true;\n        addTelemetryDebug(wrongLcpDetected, {\n            debug: {\n                entry: toSerializableLCP(lcpEntry),\n                previousLcp: previousLcp,\n                timeOrigin: performance.timeOrigin,\n                now: relativeNow(),\n                lcpEntries: lcpEntries.map(toSerializableLCP),\n            },\n        });\n    }\n    previousLcp = toSerializableLCP(lcpEntry);\n}\nfunction toSerializableLCP(entry) {\n    var jsonEntry = entry.toJSON();\n    delete jsonEntry.element;\n    return jsonEntry;\n}\n","/**\n * performance.interactionCount polyfill\n *\n * The interactionCount is an integer which counts the total number of distinct user interactions,\n * for which there was a unique interactionId.\n *\n * The interactionCount polyfill is an estimate based on a convention specific to Chrome. Cf: https://github.com/GoogleChrome/web-vitals/pull/213\n * This is currently not an issue as the polyfill is only used for INP which is currently only supported on Chrome.\n * Hopefully when/if other browsers will support INP, they will also implement performance.interactionCount at the same time, so we won't need that polyfill.\n *\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/main/src/lib/polyfills/interactionCountPolyfill.ts\n */\nimport { monitor } from '@datadog/browser-core';\nvar observer;\nvar interactionCountEstimate = 0;\nvar minKnownInteractionId = Infinity;\nvar maxKnownInteractionId = 0;\nexport function initInteractionCountPolyfill() {\n    if ('interactionCount' in performance || observer) {\n        return;\n    }\n    observer = new window.PerformanceObserver(monitor(function (entries) {\n        entries.getEntries().forEach(function (e) {\n            var entry = e;\n            if (entry.interactionId) {\n                minKnownInteractionId = Math.min(minKnownInteractionId, entry.interactionId);\n                maxKnownInteractionId = Math.max(maxKnownInteractionId, entry.interactionId);\n                interactionCountEstimate = (maxKnownInteractionId - minKnownInteractionId) / 7 + 1;\n            }\n        });\n    }));\n    observer.observe({ type: 'event', buffered: true, durationThreshold: 0 });\n}\n/**\n * Returns the `interactionCount` value using the native API (if available)\n * or the polyfill estimate in this module.\n */\nexport var getInteractionCount = function () {\n    return observer ? interactionCountEstimate : window.performance.interactionCount || 0;\n};\n","import { trackFirstContentfulPaint } from './trackFirstContentfulPaint';\nimport { trackFirstInput } from './trackFirstInput';\nimport { trackNavigationTimings } from './trackNavigationTimings';\nimport { trackLargestContentfulPaint } from './trackLargestContentfulPaint';\nimport { trackFirstHidden } from './trackFirstHidden';\nexport function trackInitialViewMetrics(lifeCycle, configuration, setLoadEvent, scheduleViewUpdate) {\n    var initialViewMetrics = {};\n    var stopNavigationTracking = trackNavigationTimings(lifeCycle, function (navigationTimings) {\n        setLoadEvent(navigationTimings.loadEvent);\n        initialViewMetrics.navigationTimings = navigationTimings;\n        scheduleViewUpdate();\n    }).stop;\n    var firstHidden = trackFirstHidden(configuration);\n    var stopFCPTracking = trackFirstContentfulPaint(lifeCycle, firstHidden, function (firstContentfulPaint) {\n        initialViewMetrics.firstContentfulPaint = firstContentfulPaint;\n        scheduleViewUpdate();\n    }).stop;\n    var stopLCPTracking = trackLargestContentfulPaint(lifeCycle, configuration, firstHidden, window, function (largestContentfulPaint) {\n        initialViewMetrics.largestContentfulPaint = largestContentfulPaint;\n        scheduleViewUpdate();\n    }).stop;\n    var stopFIDTracking = trackFirstInput(lifeCycle, configuration, firstHidden, function (firstInput) {\n        initialViewMetrics.firstInput = firstInput;\n        scheduleViewUpdate();\n    }).stop;\n    function stop() {\n        stopNavigationTracking();\n        stopFCPTracking();\n        stopLCPTracking();\n        stopFIDTracking();\n        firstHidden.stop();\n    }\n    return {\n        stop: stop,\n        initialViewMetrics: initialViewMetrics,\n    };\n}\n","import { relativeNow } from '@datadog/browser-core';\nimport { RumPerformanceEntryType } from '../../../browser/performanceCollection';\nexport function trackNavigationTimings(lifeCycle, callback) {\n    var stop = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if (entry.entryType === RumPerformanceEntryType.NAVIGATION) {\n                callback({\n                    domComplete: entry.domComplete,\n                    domContentLoaded: entry.domContentLoadedEventEnd,\n                    domInteractive: entry.domInteractive,\n                    loadEvent: entry.loadEventEnd,\n                    // In some cases the value reported is negative or is larger\n                    // than the current page time. Ignore these cases:\n                    // https://github.com/GoogleChrome/web-vitals/issues/137\n                    // https://github.com/GoogleChrome/web-vitals/issues/162\n                    firstByte: entry.responseStart >= 0 && entry.responseStart <= relativeNow() ? entry.responseStart : undefined,\n                });\n            }\n        }\n    }).unsubscribe;\n    return { stop: stop };\n}\n","import { addEventListeners, DOM_EVENT } from '@datadog/browser-core';\nexport function trackFirstHidden(configuration, eventTarget) {\n    if (eventTarget === void 0) { eventTarget = window; }\n    var timeStamp;\n    var stopListeners;\n    if (document.visibilityState === 'hidden') {\n        timeStamp = 0;\n    }\n    else {\n        timeStamp = Infinity;\n        (stopListeners = addEventListeners(configuration, eventTarget, [DOM_EVENT.PAGE_HIDE, DOM_EVENT.VISIBILITY_CHANGE], function (event) {\n            if (event.type === DOM_EVENT.PAGE_HIDE || document.visibilityState === 'hidden') {\n                timeStamp = event.timeStamp;\n                stopListeners();\n            }\n        }, { capture: true }).stop);\n    }\n    return {\n        get timeStamp() {\n            return timeStamp;\n        },\n        stop: function () {\n            stopListeners === null || stopListeners === void 0 ? void 0 : stopListeners();\n        },\n    };\n}\n","import { elapsed, find } from '@datadog/browser-core';\nimport { isElementNode } from '../../../browser/htmlDomUtils';\nimport { RumPerformanceEntryType } from '../../../browser/performanceCollection';\nimport { getSelectorFromElement } from '../../getSelectorFromElement';\n/**\n * Track the first input occurring during the initial View to return:\n * - First Input Delay\n * - First Input Time\n * Callback is called at most one time.\n * Documentation: https://web.dev/fid/\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/master/src/getFID.ts\n */\nexport function trackFirstInput(lifeCycle, configuration, firstHidden, callback) {\n    var unsubscribeLifeCycle = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        var firstInputEntry = find(entries, function (entry) {\n            return entry.entryType === RumPerformanceEntryType.FIRST_INPUT && entry.startTime < firstHidden.timeStamp;\n        });\n        if (firstInputEntry) {\n            var firstInputDelay = elapsed(firstInputEntry.startTime, firstInputEntry.processingStart);\n            var firstInputTargetSelector = void 0;\n            if (firstInputEntry.target && isElementNode(firstInputEntry.target)) {\n                firstInputTargetSelector = getSelectorFromElement(firstInputEntry.target, configuration.actionNameAttribute);\n            }\n            callback({\n                // Ensure firstInputDelay to be positive, see\n                // https://bugs.chromium.org/p/chromium/issues/detail?id=1185815\n                delay: firstInputDelay >= 0 ? firstInputDelay : 0,\n                time: firstInputEntry.startTime,\n                targetSelector: firstInputTargetSelector,\n            });\n        }\n    }).unsubscribe;\n    return {\n        stop: unsubscribeLifeCycle,\n    };\n}\n","import { Observable, throttle, addEventListener, DOM_EVENT } from '@datadog/browser-core';\nvar viewportObservable;\nexport function initViewportObservable(configuration) {\n    if (!viewportObservable) {\n        viewportObservable = createViewportObservable(configuration);\n    }\n    return viewportObservable;\n}\nexport function createViewportObservable(configuration) {\n    return new Observable(function (observable) {\n        var updateDimension = throttle(function () {\n            observable.notify(getViewportDimension());\n        }, 200).throttled;\n        return addEventListener(configuration, window, DOM_EVENT.RESIZE, updateDimension, { capture: true, passive: true })\n            .stop;\n    });\n}\n// excludes the width and height of any rendered classic scrollbar that is fixed to the visual viewport\nexport function getViewportDimension() {\n    var visual = window.visualViewport;\n    if (visual) {\n        return {\n            width: Number(visual.width * visual.scale),\n            height: Number(visual.height * visual.scale),\n        };\n    }\n    return {\n        width: Number(window.innerWidth || 0),\n        height: Number(window.innerHeight || 0),\n    };\n}\n","import { noop, ONE_MINUTE } from '@datadog/browser-core';\nimport { RumPerformanceEntryType, supportPerformanceTimingEvent } from '../../../browser/performanceCollection';\nimport { getSelectorFromElement } from '../../getSelectorFromElement';\nimport { isElementNode } from '../../../browser/htmlDomUtils';\nimport { getInteractionCount, initInteractionCountPolyfill } from './interactionCountPolyfill';\n// Arbitrary value to prevent unnecessary memory usage on views with lots of interactions.\nvar MAX_INTERACTION_ENTRIES = 10;\n// Arbitrary value to cap INP outliers\nexport var MAX_INP_VALUE = (1 * ONE_MINUTE);\n/**\n * Track the interaction to next paint (INP).\n * To avoid outliers, return the p98 worst interaction of the view.\n * Documentation: https://web.dev/inp/\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/main/src/onINP.ts\n */\nexport function trackInteractionToNextPaint(configuration, viewStart, viewLoadingType, lifeCycle) {\n    if (!isInteractionToNextPaintSupported()) {\n        return {\n            getInteractionToNextPaint: function () { return undefined; },\n            setViewEnd: noop,\n            stop: noop,\n        };\n    }\n    var _a = trackViewInteractionCount(viewLoadingType), getViewInteractionCount = _a.getViewInteractionCount, stopViewInteractionCount = _a.stopViewInteractionCount;\n    var viewEnd = Infinity;\n    var longestInteractions = trackLongestInteractions(getViewInteractionCount);\n    var interactionToNextPaint = -1;\n    var interactionToNextPaintTargetSelector;\n    var stop = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if ((entry.entryType === RumPerformanceEntryType.EVENT ||\n                entry.entryType === RumPerformanceEntryType.FIRST_INPUT) &&\n                entry.interactionId &&\n                // Check the entry start time is inside the view bounds because some view interactions can be reported after the view end (if long duration).\n                entry.startTime >= viewStart &&\n                entry.startTime <= viewEnd) {\n                longestInteractions.process(entry);\n            }\n        }\n        var newInteraction = longestInteractions.estimateP98Interaction();\n        if (newInteraction && newInteraction.duration !== interactionToNextPaint) {\n            interactionToNextPaint = newInteraction.duration;\n            if (newInteraction.target && isElementNode(newInteraction.target)) {\n                interactionToNextPaintTargetSelector = getSelectorFromElement(newInteraction.target, configuration.actionNameAttribute);\n            }\n            else {\n                interactionToNextPaintTargetSelector = undefined;\n            }\n        }\n    }).unsubscribe;\n    return {\n        getInteractionToNextPaint: function () {\n            // If no INP duration where captured because of the performanceObserver 40ms threshold\n            // but the view interaction count > 0 then report 0\n            if (interactionToNextPaint >= 0) {\n                return {\n                    value: Math.min(interactionToNextPaint, MAX_INP_VALUE),\n                    targetSelector: interactionToNextPaintTargetSelector,\n                };\n            }\n            else if (getViewInteractionCount()) {\n                return {\n                    value: 0,\n                };\n            }\n        },\n        setViewEnd: function (viewEndTime) {\n            viewEnd = viewEndTime;\n            stopViewInteractionCount();\n        },\n        stop: stop,\n    };\n}\nfunction trackLongestInteractions(getViewInteractionCount) {\n    var longestInteractions = [];\n    function sortAndTrimLongestInteractions() {\n        longestInteractions.sort(function (a, b) { return b.duration - a.duration; }).splice(MAX_INTERACTION_ENTRIES);\n    }\n    return {\n        /**\n         * Process the performance entry:\n         * - if its duration is long enough, add the performance entry to the list of worst interactions\n         * - if an entry with the same interaction id exists and its duration is lower than the new one, then replace it in the list of worst interactions\n         */\n        process: function (entry) {\n            var interactionIndex = longestInteractions.findIndex(function (interaction) { return entry.interactionId === interaction.interactionId; });\n            var minLongestInteraction = longestInteractions[longestInteractions.length - 1];\n            if (interactionIndex !== -1) {\n                if (entry.duration > longestInteractions[interactionIndex].duration) {\n                    longestInteractions[interactionIndex] = entry;\n                    sortAndTrimLongestInteractions();\n                }\n            }\n            else if (longestInteractions.length < MAX_INTERACTION_ENTRIES ||\n                entry.duration > minLongestInteraction.duration) {\n                longestInteractions.push(entry);\n                sortAndTrimLongestInteractions();\n            }\n        },\n        /**\n         * Compute the p98 longest interaction.\n         * For better performance the computation is based on 10 longest interactions and the interaction count of the current view.\n         */\n        estimateP98Interaction: function () {\n            var interactionIndex = Math.min(longestInteractions.length - 1, Math.floor(getViewInteractionCount() / 50));\n            return longestInteractions[interactionIndex];\n        },\n    };\n}\nexport function trackViewInteractionCount(viewLoadingType) {\n    initInteractionCountPolyfill();\n    var previousInteractionCount = viewLoadingType === \"initial_load\" /* ViewLoadingType.INITIAL_LOAD */ ? 0 : getInteractionCount();\n    var state = { stopped: false };\n    function computeViewInteractionCount() {\n        return getInteractionCount() - previousInteractionCount;\n    }\n    return {\n        getViewInteractionCount: function () {\n            if (state.stopped) {\n                return state.interactionCount;\n            }\n            return computeViewInteractionCount();\n        },\n        stopViewInteractionCount: function () {\n            state = { stopped: true, interactionCount: computeViewInteractionCount() };\n        },\n    };\n}\nexport function isInteractionToNextPaintSupported() {\n    return (supportPerformanceTimingEvent(RumPerformanceEntryType.EVENT) &&\n        window.PerformanceEventTiming &&\n        'interactionId' in PerformanceEventTiming.prototype);\n}\n","export function getScrollX() {\n    var scrollX;\n    var visual = window.visualViewport;\n    if (visual) {\n        scrollX = visual.pageLeft - visual.offsetLeft;\n    }\n    else if (window.scrollX !== undefined) {\n        scrollX = window.scrollX;\n    }\n    else {\n        scrollX = window.pageXOffset || 0;\n    }\n    return Math.round(scrollX);\n}\nexport function getScrollY() {\n    var scrollY;\n    var visual = window.visualViewport;\n    if (visual) {\n        scrollY = visual.pageTop - visual.offsetTop;\n    }\n    else if (window.scrollY !== undefined) {\n        scrollY = window.scrollY;\n    }\n    else {\n        scrollY = window.pageYOffset || 0;\n    }\n    return Math.round(scrollY);\n}\n","import { Observable, ONE_SECOND, elapsed, relativeNow, throttle, addEventListener, DOM_EVENT, monitor, } from '@datadog/browser-core';\nimport { getScrollY } from '../../../browser/scroll';\nimport { getViewportDimension } from '../../../browser/viewportObservable';\n/** Arbitrary scroll throttle duration */\nexport var THROTTLE_SCROLL_DURATION = ONE_SECOND;\nexport function trackScrollMetrics(configuration, viewStart, callback, scrollValues) {\n    if (scrollValues === void 0) { scrollValues = createScrollValuesObservable(configuration); }\n    var maxScrollDepth = 0;\n    var maxScrollHeight = 0;\n    var maxScrollHeightTime = 0;\n    var subscription = scrollValues.subscribe(function (_a) {\n        var scrollDepth = _a.scrollDepth, scrollTop = _a.scrollTop, scrollHeight = _a.scrollHeight;\n        var shouldUpdate = false;\n        if (scrollDepth > maxScrollDepth) {\n            maxScrollDepth = scrollDepth;\n            shouldUpdate = true;\n        }\n        if (scrollHeight > maxScrollHeight) {\n            maxScrollHeight = scrollHeight;\n            var now = relativeNow();\n            maxScrollHeightTime = elapsed(viewStart.relative, now);\n            shouldUpdate = true;\n        }\n        if (shouldUpdate) {\n            callback({\n                maxDepth: Math.min(maxScrollDepth, maxScrollHeight),\n                maxDepthScrollTop: scrollTop,\n                maxScrollHeight: maxScrollHeight,\n                maxScrollHeightTime: maxScrollHeightTime,\n            });\n        }\n    });\n    return {\n        stop: function () { return subscription.unsubscribe(); },\n    };\n}\nexport function computeScrollValues() {\n    var scrollTop = getScrollY();\n    var height = getViewportDimension().height;\n    var scrollHeight = Math.round((document.scrollingElement || document.documentElement).scrollHeight);\n    var scrollDepth = Math.round(height + scrollTop);\n    return {\n        scrollHeight: scrollHeight,\n        scrollDepth: scrollDepth,\n        scrollTop: scrollTop,\n    };\n}\nexport function createScrollValuesObservable(configuration, throttleDuration) {\n    if (throttleDuration === void 0) { throttleDuration = THROTTLE_SCROLL_DURATION; }\n    return new Observable(function (observable) {\n        function notify() {\n            observable.notify(computeScrollValues());\n        }\n        if (window.ResizeObserver) {\n            var throttledNotify_1 = throttle(notify, throttleDuration, {\n                leading: false,\n                trailing: true,\n            });\n            var observerTarget_1 = document.scrollingElement || document.documentElement;\n            var resizeObserver_1 = new ResizeObserver(monitor(throttledNotify_1.throttled));\n            resizeObserver_1.observe(observerTarget_1);\n            var eventListener_1 = addEventListener(configuration, window, DOM_EVENT.SCROLL, throttledNotify_1.throttled, {\n                passive: true,\n            });\n            return function () {\n                throttledNotify_1.cancel();\n                resizeObserver_1.unobserve(observerTarget_1);\n                eventListener_1.stop();\n            };\n        }\n    });\n}\n","import { trackCumulativeLayoutShift } from './trackCumulativeLayoutShift';\nimport { trackInteractionToNextPaint } from './trackInteractionToNextPaint';\nimport { trackLoadingTime } from './trackLoadingTime';\nimport { trackScrollMetrics } from './trackScrollMetrics';\nexport function trackCommonViewMetrics(lifeCycle, domMutationObservable, configuration, scheduleViewUpdate, loadingType, viewStart) {\n    var commonViewMetrics = {};\n    var _a = trackLoadingTime(lifeCycle, domMutationObservable, configuration, loadingType, viewStart, function (newLoadingTime) {\n        commonViewMetrics.loadingTime = newLoadingTime;\n        scheduleViewUpdate();\n    }), stopLoadingTimeTracking = _a.stop, setLoadEvent = _a.setLoadEvent;\n    var stopScrollMetricsTracking = trackScrollMetrics(configuration, viewStart, function (newScrollMetrics) {\n        commonViewMetrics.scroll = newScrollMetrics;\n    }).stop;\n    var stopCLSTracking = trackCumulativeLayoutShift(configuration, lifeCycle, function (cumulativeLayoutShift) {\n        commonViewMetrics.cumulativeLayoutShift = cumulativeLayoutShift;\n        scheduleViewUpdate();\n    }).stop;\n    var _b = trackInteractionToNextPaint(configuration, viewStart.relative, loadingType, lifeCycle), stopINPTracking = _b.stop, getInteractionToNextPaint = _b.getInteractionToNextPaint, setViewEnd = _b.setViewEnd;\n    return {\n        stop: function () {\n            stopLoadingTimeTracking();\n            stopCLSTracking();\n            stopScrollMetricsTracking();\n        },\n        stopINPTracking: stopINPTracking,\n        setLoadEvent: setLoadEvent,\n        setViewEnd: setViewEnd,\n        getCommonViewMetrics: function () {\n            commonViewMetrics.interactionToNextPaint = getInteractionToNextPaint();\n            return commonViewMetrics;\n        },\n    };\n}\n","import { elapsed } from '@datadog/browser-core';\nimport { waitPageActivityEnd } from '../../waitPageActivityEnd';\nexport function trackLoadingTime(lifeCycle, domMutationObservable, configuration, loadType, viewStart, callback) {\n    var isWaitingForLoadEvent = loadType === \"initial_load\" /* ViewLoadingType.INITIAL_LOAD */;\n    var isWaitingForActivityLoadingTime = true;\n    var loadingTimeCandidates = [];\n    function invokeCallbackIfAllCandidatesAreReceived() {\n        if (!isWaitingForActivityLoadingTime && !isWaitingForLoadEvent && loadingTimeCandidates.length > 0) {\n            callback(Math.max.apply(Math, loadingTimeCandidates));\n        }\n    }\n    var stop = waitPageActivityEnd(lifeCycle, domMutationObservable, configuration, function (event) {\n        if (isWaitingForActivityLoadingTime) {\n            isWaitingForActivityLoadingTime = false;\n            if (event.hadActivity) {\n                loadingTimeCandidates.push(elapsed(viewStart.timeStamp, event.end));\n            }\n            invokeCallbackIfAllCandidatesAreReceived();\n        }\n    }).stop;\n    return {\n        stop: stop,\n        setLoadEvent: function (loadEvent) {\n            if (isWaitingForLoadEvent) {\n                isWaitingForLoadEvent = false;\n                loadingTimeCandidates.push(loadEvent);\n                invokeCallbackIfAllCandidatesAreReceived();\n            }\n        },\n    };\n}\n","import { round, find, ONE_SECOND, noop } from '@datadog/browser-core';\nimport { isElementNode } from '../../../browser/htmlDomUtils';\nimport { supportPerformanceTimingEvent, RumPerformanceEntryType } from '../../../browser/performanceCollection';\nimport { getSelectorFromElement } from '../../getSelectorFromElement';\n/**\n * Track the cumulative layout shifts (CLS).\n * Layout shifts are grouped into session windows.\n * The minimum gap between session windows is 1 second.\n * The maximum duration of a session window is 5 second.\n * The session window layout shift value is the sum of layout shifts inside it.\n * The CLS value is the max of session windows values.\n *\n * This yields a new value whenever the CLS value is updated (a higher session window value is computed).\n *\n * See isLayoutShiftSupported to check for browser support.\n *\n * Documentation:\n * https://web.dev/cls/\n * https://web.dev/evolving-cls/\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/master/src/getCLS.ts\n */\nexport function trackCumulativeLayoutShift(configuration, lifeCycle, callback) {\n    if (!isLayoutShiftSupported()) {\n        return {\n            stop: noop,\n        };\n    }\n    var maxClsValue = 0;\n    // if no layout shift happen the value should be reported as 0\n    callback({\n        value: 0,\n    });\n    var window = slidingSessionWindow();\n    var stop = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if (entry.entryType === RumPerformanceEntryType.LAYOUT_SHIFT && !entry.hadRecentInput) {\n                window.update(entry);\n                if (window.value() > maxClsValue) {\n                    maxClsValue = window.value();\n                    var cls = round(maxClsValue, 4);\n                    var clsTarget = window.largestLayoutShiftTarget();\n                    var cslTargetSelector = void 0;\n                    if (clsTarget &&\n                        // Check if the CLS target have been removed from the DOM between the time we collect the target reference and when we compute the selector\n                        clsTarget.isConnected) {\n                        cslTargetSelector = getSelectorFromElement(clsTarget, configuration.actionNameAttribute);\n                    }\n                    callback({\n                        value: cls,\n                        targetSelector: cslTargetSelector,\n                    });\n                }\n            }\n        }\n    }).unsubscribe;\n    return {\n        stop: stop,\n    };\n}\nfunction slidingSessionWindow() {\n    var value = 0;\n    var startTime;\n    var endTime;\n    var largestLayoutShift = 0;\n    var largestLayoutShiftTarget;\n    var largestLayoutShiftTime;\n    return {\n        update: function (entry) {\n            var _a, _b;\n            var shouldCreateNewWindow = startTime === undefined ||\n                entry.startTime - endTime >= ONE_SECOND ||\n                entry.startTime - startTime >= 5 * ONE_SECOND;\n            if (shouldCreateNewWindow) {\n                startTime = endTime = entry.startTime;\n                value = entry.value;\n                largestLayoutShift = 0;\n                largestLayoutShiftTarget = undefined;\n            }\n            else {\n                value += entry.value;\n                endTime = entry.startTime;\n            }\n            if (entry.value > largestLayoutShift) {\n                largestLayoutShift = entry.value;\n                largestLayoutShiftTime = entry.startTime;\n                if ((_a = entry.sources) === null || _a === void 0 ? void 0 : _a.length) {\n                    largestLayoutShiftTarget = (_b = find(entry.sources, function (s) { return !!s.node && isElementNode(s.node); })) === null || _b === void 0 ? void 0 : _b.node;\n                }\n                else {\n                    largestLayoutShiftTarget = undefined;\n                }\n            }\n        },\n        value: function () { return value; },\n        largestLayoutShiftTarget: function () { return largestLayoutShiftTarget; },\n        largestLayoutShiftTime: function () { return largestLayoutShiftTime; },\n    };\n}\n/**\n * Check whether `layout-shift` is supported by the browser.\n */\nexport function isLayoutShiftSupported() {\n    return supportPerformanceTimingEvent(RumPerformanceEntryType.LAYOUT_SHIFT);\n}\n","import { noop, PageExitReason, shallowClone, elapsed, generateUUID, ONE_MINUTE, throttle, clocksNow, clocksOrigin, timeStampNow, display, looksLikeRelativeTime, setInterval, clearInterval, setTimeout, Observable, } from '@datadog/browser-core';\nimport { trackViewEventCounts } from './trackViewEventCounts';\nimport { trackInitialViewMetrics } from './viewMetrics/trackInitialViewMetrics';\nimport { trackCommonViewMetrics } from './viewMetrics/trackCommonViewMetrics';\nexport var THROTTLE_VIEW_UPDATE_PERIOD = 3000;\nexport var SESSION_KEEP_ALIVE_INTERVAL = 5 * ONE_MINUTE;\n// Some events or metrics can be captured after the end of the view. To avoid missing those;\n// an arbitrary delay is added for stopping their tracking after the view ends.\n//\n// Ideally, we would not stop and keep tracking events or metrics until the end of the session.\n// But this might have a small performance impact if there are many many views.\n// So let's have a fairly short delay improving the situation in most cases and avoid impacting performances too much.\nexport var KEEP_TRACKING_AFTER_VIEW_DELAY = 5 * ONE_MINUTE;\nexport function trackViews(location, lifeCycle, domMutationObservable, configuration, locationChangeObservable, areViewsTrackedAutomatically, initialViewOptions) {\n    var activeViews = new Set();\n    var currentView = startNewView(\"initial_load\" /* ViewLoadingType.INITIAL_LOAD */, clocksOrigin(), initialViewOptions);\n    startViewLifeCycle();\n    var locationChangeSubscription;\n    if (areViewsTrackedAutomatically) {\n        locationChangeSubscription = renewViewOnLocationChange(locationChangeObservable);\n    }\n    function startNewView(loadingType, startClocks, viewOptions) {\n        var newlyCreatedView = newView(lifeCycle, domMutationObservable, configuration, location, loadingType, startClocks, viewOptions);\n        activeViews.add(newlyCreatedView);\n        newlyCreatedView.stopObservable.subscribe(function () {\n            activeViews.delete(newlyCreatedView);\n        });\n        return newlyCreatedView;\n    }\n    function startViewLifeCycle() {\n        lifeCycle.subscribe(10 /* LifeCycleEventType.SESSION_RENEWED */, function () {\n            // Renew view on session renewal\n            currentView = startNewView(\"route_change\" /* ViewLoadingType.ROUTE_CHANGE */, undefined, {\n                name: currentView.name,\n                service: currentView.service,\n                version: currentView.version,\n            });\n        });\n        lifeCycle.subscribe(9 /* LifeCycleEventType.SESSION_EXPIRED */, function () {\n            currentView.end({ sessionIsActive: false });\n        });\n        // End the current view on page unload\n        lifeCycle.subscribe(11 /* LifeCycleEventType.PAGE_EXITED */, function (pageExitEvent) {\n            if (pageExitEvent.reason === PageExitReason.UNLOADING || pageExitEvent.reason === PageExitReason.PAGEHIDE) {\n                currentView.end();\n            }\n        });\n    }\n    function renewViewOnLocationChange(locationChangeObservable) {\n        return locationChangeObservable.subscribe(function (_a) {\n            var oldLocation = _a.oldLocation, newLocation = _a.newLocation;\n            if (areDifferentLocation(oldLocation, newLocation)) {\n                currentView.end();\n                currentView = startNewView(\"route_change\" /* ViewLoadingType.ROUTE_CHANGE */);\n            }\n        });\n    }\n    return {\n        addTiming: function (name, time) {\n            if (time === void 0) { time = timeStampNow(); }\n            currentView.addTiming(name, time);\n        },\n        startView: function (options, startClocks) {\n            currentView.end({ endClocks: startClocks });\n            currentView = startNewView(\"route_change\" /* ViewLoadingType.ROUTE_CHANGE */, startClocks, options);\n        },\n        stop: function () {\n            locationChangeSubscription === null || locationChangeSubscription === void 0 ? void 0 : locationChangeSubscription.unsubscribe();\n            currentView.end();\n            activeViews.forEach(function (view) { return view.stop(); });\n        },\n    };\n}\nfunction newView(lifeCycle, domMutationObservable, configuration, initialLocation, loadingType, startClocks, viewOptions) {\n    if (startClocks === void 0) { startClocks = clocksNow(); }\n    // Setup initial values\n    var id = generateUUID();\n    var stopObservable = new Observable();\n    var customTimings = {};\n    var documentVersion = 0;\n    var endClocks;\n    var location = shallowClone(initialLocation);\n    var sessionIsActive = true;\n    var name;\n    var service;\n    var version;\n    if (viewOptions) {\n        name = viewOptions.name;\n        service = viewOptions.service;\n        version = viewOptions.version;\n    }\n    var viewCreatedEvent = {\n        id: id,\n        name: name,\n        startClocks: startClocks,\n        service: service,\n        version: version,\n    };\n    lifeCycle.notify(2 /* LifeCycleEventType.BEFORE_VIEW_CREATED */, viewCreatedEvent);\n    lifeCycle.notify(3 /* LifeCycleEventType.VIEW_CREATED */, viewCreatedEvent);\n    // Update the view every time the measures are changing\n    var _a = throttle(triggerViewUpdate, THROTTLE_VIEW_UPDATE_PERIOD, {\n        leading: false,\n    }), scheduleViewUpdate = _a.throttled, cancelScheduleViewUpdate = _a.cancel;\n    var _b = trackCommonViewMetrics(lifeCycle, domMutationObservable, configuration, scheduleViewUpdate, loadingType, startClocks), setLoadEvent = _b.setLoadEvent, setViewEnd = _b.setViewEnd, stopCommonViewMetricsTracking = _b.stop, stopINPTracking = _b.stopINPTracking, getCommonViewMetrics = _b.getCommonViewMetrics;\n    var _c = loadingType === \"initial_load\" /* ViewLoadingType.INITIAL_LOAD */\n        ? trackInitialViewMetrics(lifeCycle, configuration, setLoadEvent, scheduleViewUpdate)\n        : { stop: noop, initialViewMetrics: {} }, stopInitialViewMetricsTracking = _c.stop, initialViewMetrics = _c.initialViewMetrics;\n    var _d = trackViewEventCounts(lifeCycle, id, scheduleViewUpdate), stopEventCountsTracking = _d.stop, eventCounts = _d.eventCounts;\n    // Session keep alive\n    var keepAliveIntervalId = setInterval(triggerViewUpdate, SESSION_KEEP_ALIVE_INTERVAL);\n    // Initial view update\n    triggerViewUpdate();\n    function triggerViewUpdate() {\n        cancelScheduleViewUpdate();\n        documentVersion += 1;\n        var currentEnd = endClocks === undefined ? timeStampNow() : endClocks.timeStamp;\n        lifeCycle.notify(4 /* LifeCycleEventType.VIEW_UPDATED */, {\n            customTimings: customTimings,\n            documentVersion: documentVersion,\n            id: id,\n            name: name,\n            service: service,\n            version: version,\n            loadingType: loadingType,\n            location: location,\n            startClocks: startClocks,\n            commonViewMetrics: getCommonViewMetrics(),\n            initialViewMetrics: initialViewMetrics,\n            duration: elapsed(startClocks.timeStamp, currentEnd),\n            isActive: endClocks === undefined,\n            sessionIsActive: sessionIsActive,\n            eventCounts: eventCounts,\n        });\n    }\n    return {\n        name: name,\n        service: service,\n        version: version,\n        stopObservable: stopObservable,\n        end: function (options) {\n            var _this = this;\n            var _a, _b;\n            if (options === void 0) { options = {}; }\n            if (endClocks) {\n                // view already ended\n                return;\n            }\n            endClocks = (_a = options.endClocks) !== null && _a !== void 0 ? _a : clocksNow();\n            sessionIsActive = (_b = options.sessionIsActive) !== null && _b !== void 0 ? _b : true;\n            lifeCycle.notify(5 /* LifeCycleEventType.VIEW_ENDED */, { endClocks: endClocks });\n            lifeCycle.notify(6 /* LifeCycleEventType.AFTER_VIEW_ENDED */, { endClocks: endClocks });\n            clearInterval(keepAliveIntervalId);\n            setViewEnd(endClocks.relative);\n            stopCommonViewMetricsTracking();\n            triggerViewUpdate();\n            setTimeout(function () {\n                _this.stop();\n            }, KEEP_TRACKING_AFTER_VIEW_DELAY);\n        },\n        stop: function () {\n            stopInitialViewMetricsTracking();\n            stopEventCountsTracking();\n            stopINPTracking();\n            stopObservable.notify();\n        },\n        addTiming: function (name, time) {\n            if (endClocks) {\n                return;\n            }\n            var relativeTime = looksLikeRelativeTime(time) ? time : elapsed(startClocks.timeStamp, time);\n            customTimings[sanitizeTiming(name)] = relativeTime;\n            scheduleViewUpdate();\n        },\n    };\n}\n/**\n * Timing name is used as facet path that must contain only letters, digits, or the characters - _ . @ $\n */\nfunction sanitizeTiming(name) {\n    var sanitized = name.replace(/[^a-zA-Z0-9-_.@$]/g, '_');\n    if (sanitized !== name) {\n        display.warn(\"Invalid timing name: \".concat(name, \", sanitized to: \").concat(sanitized));\n    }\n    return sanitized;\n}\nfunction areDifferentLocation(currentLocation, otherLocation) {\n    return (currentLocation.pathname !== otherLocation.pathname ||\n        (!isHashAnAnchor(otherLocation.hash) &&\n            getPathFromHash(otherLocation.hash) !== getPathFromHash(currentLocation.hash)));\n}\nfunction isHashAnAnchor(hash) {\n    var correspondingId = hash.substring(1);\n    // check if the correspondingId is empty because on Firefox an empty string passed to getElementById() prints a consol warning\n    return correspondingId !== '' && !!document.getElementById(correspondingId);\n}\nfunction getPathFromHash(hash) {\n    var index = hash.indexOf('?');\n    return index < 0 ? hash : hash.slice(0, index);\n}\n","import { isEmptyObject, mapValues, toServerDuration, isNumber } from '@datadog/browser-core';\nimport { trackViews } from './trackViews';\nexport function startViewCollection(lifeCycle, configuration, location, domMutationObservable, locationChangeObservable, featureFlagContexts, pageStateHistory, recorderApi, initialViewOptions) {\n    lifeCycle.subscribe(4 /* LifeCycleEventType.VIEW_UPDATED */, function (view) {\n        return lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, processViewUpdate(view, configuration, featureFlagContexts, recorderApi, pageStateHistory));\n    });\n    return trackViews(location, lifeCycle, domMutationObservable, configuration, locationChangeObservable, !configuration.trackViewsManually, initialViewOptions);\n}\nfunction processViewUpdate(view, configuration, featureFlagContexts, recorderApi, pageStateHistory) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n    var replayStats = recorderApi.getReplayStats(view.id);\n    var featureFlagContext = featureFlagContexts.findFeatureFlagEvaluations(view.startClocks.relative);\n    var pageStates = pageStateHistory.findAll(view.startClocks.relative, view.duration);\n    var viewEvent = {\n        _dd: {\n            document_version: view.documentVersion,\n            replay_stats: replayStats,\n            page_states: pageStates,\n            configuration: {\n                start_session_replay_recording_manually: configuration.startSessionReplayRecordingManually,\n            },\n        },\n        date: view.startClocks.timeStamp,\n        type: \"view\" /* RumEventType.VIEW */,\n        view: {\n            action: {\n                count: view.eventCounts.actionCount,\n            },\n            frustration: {\n                count: view.eventCounts.frustrationCount,\n            },\n            cumulative_layout_shift: (_a = view.commonViewMetrics.cumulativeLayoutShift) === null || _a === void 0 ? void 0 : _a.value,\n            cumulative_layout_shift_target_selector: (_b = view.commonViewMetrics.cumulativeLayoutShift) === null || _b === void 0 ? void 0 : _b.targetSelector,\n            first_byte: toServerDuration((_c = view.initialViewMetrics.navigationTimings) === null || _c === void 0 ? void 0 : _c.firstByte),\n            dom_complete: toServerDuration((_d = view.initialViewMetrics.navigationTimings) === null || _d === void 0 ? void 0 : _d.domComplete),\n            dom_content_loaded: toServerDuration((_e = view.initialViewMetrics.navigationTimings) === null || _e === void 0 ? void 0 : _e.domContentLoaded),\n            dom_interactive: toServerDuration((_f = view.initialViewMetrics.navigationTimings) === null || _f === void 0 ? void 0 : _f.domInteractive),\n            error: {\n                count: view.eventCounts.errorCount,\n            },\n            first_contentful_paint: toServerDuration(view.initialViewMetrics.firstContentfulPaint),\n            first_input_delay: toServerDuration((_g = view.initialViewMetrics.firstInput) === null || _g === void 0 ? void 0 : _g.delay),\n            first_input_time: toServerDuration((_h = view.initialViewMetrics.firstInput) === null || _h === void 0 ? void 0 : _h.time),\n            first_input_target_selector: (_j = view.initialViewMetrics.firstInput) === null || _j === void 0 ? void 0 : _j.targetSelector,\n            interaction_to_next_paint: toServerDuration((_k = view.commonViewMetrics.interactionToNextPaint) === null || _k === void 0 ? void 0 : _k.value),\n            interaction_to_next_paint_target_selector: (_l = view.commonViewMetrics.interactionToNextPaint) === null || _l === void 0 ? void 0 : _l.targetSelector,\n            is_active: view.isActive,\n            name: view.name,\n            largest_contentful_paint: toServerDuration((_m = view.initialViewMetrics.largestContentfulPaint) === null || _m === void 0 ? void 0 : _m.value),\n            largest_contentful_paint_target_selector: (_o = view.initialViewMetrics.largestContentfulPaint) === null || _o === void 0 ? void 0 : _o.targetSelector,\n            load_event: toServerDuration((_p = view.initialViewMetrics.navigationTimings) === null || _p === void 0 ? void 0 : _p.loadEvent),\n            loading_time: discardNegativeDuration(toServerDuration(view.commonViewMetrics.loadingTime)),\n            loading_type: view.loadingType,\n            long_task: {\n                count: view.eventCounts.longTaskCount,\n            },\n            resource: {\n                count: view.eventCounts.resourceCount,\n            },\n            time_spent: toServerDuration(view.duration),\n        },\n        feature_flags: featureFlagContext && !isEmptyObject(featureFlagContext) ? featureFlagContext : undefined,\n        display: view.commonViewMetrics.scroll\n            ? {\n                scroll: {\n                    max_depth: view.commonViewMetrics.scroll.maxDepth,\n                    max_depth_scroll_top: view.commonViewMetrics.scroll.maxDepthScrollTop,\n                    max_scroll_height: view.commonViewMetrics.scroll.maxScrollHeight,\n                    max_scroll_height_time: toServerDuration(view.commonViewMetrics.scroll.maxScrollHeightTime),\n                },\n            }\n            : undefined,\n        session: {\n            has_replay: replayStats ? true : undefined,\n            is_active: view.sessionIsActive ? undefined : false,\n        },\n        privacy: {\n            replay_level: configuration.defaultPrivacyLevel,\n        },\n    };\n    if (!isEmptyObject(view.customTimings)) {\n        viewEvent.view.custom_timings = mapValues(view.customTimings, toServerDuration);\n    }\n    return {\n        rawRumEvent: viewEvent,\n        startTime: view.startClocks.relative,\n        domainContext: {\n            location: view.location,\n        },\n    };\n}\nfunction discardNegativeDuration(duration) {\n    return isNumber(duration) && duration < 0 ? undefined : duration;\n}\n","import { trackEventCounts } from '../trackEventCounts';\nexport function trackViewEventCounts(lifeCycle, viewId, onChange) {\n    var _a = trackEventCounts({\n        lifeCycle: lifeCycle,\n        isChildEvent: function (event) { return event.view.id === viewId; },\n        onChange: onChange,\n    }), stop = _a.stop, eventCounts = _a.eventCounts;\n    return {\n        stop: stop,\n        eventCounts: eventCounts,\n    };\n}\n","import { Observable } from '../../tools/observable';\nimport { ValueHistory } from '../../tools/valueHistory';\nimport { relativeNow, clocksOrigin, ONE_MINUTE } from '../../tools/utils/timeUtils';\nimport { DOM_EVENT, addEventListener, addEventListeners } from '../../browser/addEventListener';\nimport { clearInterval, setInterval } from '../../tools/timer';\nimport { SESSION_TIME_OUT_DELAY } from './sessionConstants';\nimport { startSessionStore } from './sessionStore';\nexport var VISIBILITY_CHECK_DELAY = ONE_MINUTE;\nvar SESSION_CONTEXT_TIMEOUT_DELAY = SESSION_TIME_OUT_DELAY;\nvar stopCallbacks = [];\nexport function startSessionManager(configuration, productKey, computeSessionState, trackingConsentState) {\n    var renewObservable = new Observable();\n    var expireObservable = new Observable();\n    // TODO - Improve configuration type and remove assertion\n    var sessionStore = startSessionStore(configuration.sessionStoreStrategyType, productKey, computeSessionState);\n    stopCallbacks.push(function () { return sessionStore.stop(); });\n    var sessionContextHistory = new ValueHistory(SESSION_CONTEXT_TIMEOUT_DELAY);\n    stopCallbacks.push(function () { return sessionContextHistory.stop(); });\n    sessionStore.renewObservable.subscribe(function () {\n        sessionContextHistory.add(buildSessionContext(), relativeNow());\n        renewObservable.notify();\n    });\n    sessionStore.expireObservable.subscribe(function () {\n        expireObservable.notify();\n        sessionContextHistory.closeActive(relativeNow());\n    });\n    // We expand/renew session unconditionally as tracking consent is always granted when the session\n    // manager is started.\n    sessionStore.expandOrRenewSession();\n    sessionContextHistory.add(buildSessionContext(), clocksOrigin().relative);\n    trackingConsentState.observable.subscribe(function () {\n        if (trackingConsentState.isGranted()) {\n            sessionStore.expandOrRenewSession();\n        }\n        else {\n            sessionStore.expire();\n        }\n    });\n    trackActivity(configuration, function () {\n        if (trackingConsentState.isGranted()) {\n            sessionStore.expandOrRenewSession();\n        }\n    });\n    trackVisibility(configuration, function () { return sessionStore.expandSession(); });\n    trackResume(configuration, function () { return sessionStore.restartSession(); });\n    function buildSessionContext() {\n        return {\n            id: sessionStore.getSession().id,\n            trackingType: sessionStore.getSession()[productKey],\n        };\n    }\n    return {\n        findActiveSession: function (startTime) { return sessionContextHistory.find(startTime); },\n        renewObservable: renewObservable,\n        expireObservable: expireObservable,\n        expire: sessionStore.expire,\n    };\n}\nexport function stopSessionManager() {\n    stopCallbacks.forEach(function (e) { return e(); });\n    stopCallbacks = [];\n}\nfunction trackActivity(configuration, expandOrRenewSession) {\n    var stop = addEventListeners(configuration, window, [DOM_EVENT.CLICK, DOM_EVENT.TOUCH_START, DOM_EVENT.KEY_DOWN, DOM_EVENT.SCROLL], expandOrRenewSession, { capture: true, passive: true }).stop;\n    stopCallbacks.push(stop);\n}\nfunction trackVisibility(configuration, expandSession) {\n    var expandSessionWhenVisible = function () {\n        if (document.visibilityState === 'visible') {\n            expandSession();\n        }\n    };\n    var stop = addEventListener(configuration, document, DOM_EVENT.VISIBILITY_CHANGE, expandSessionWhenVisible).stop;\n    stopCallbacks.push(stop);\n    var visibilityCheckInterval = setInterval(expandSessionWhenVisible, VISIBILITY_CHECK_DELAY);\n    stopCallbacks.push(function () {\n        clearInterval(visibilityCheckInterval);\n    });\n}\nfunction trackResume(configuration, cb) {\n    var stop = addEventListener(configuration, window, DOM_EVENT.RESUME, cb, { capture: true }).stop;\n    stopCallbacks.push(stop);\n}\n","import { Observable, bridgeSupports, noop, performDraw, startSessionManager, } from '@datadog/browser-core';\nexport var RUM_SESSION_KEY = 'rum';\nexport function startRumSessionManager(configuration, lifeCycle, trackingConsentState) {\n    var sessionManager = startSessionManager(configuration, RUM_SESSION_KEY, function (rawTrackingType) { return computeSessionState(configuration, rawTrackingType); }, trackingConsentState);\n    sessionManager.expireObservable.subscribe(function () {\n        lifeCycle.notify(9 /* LifeCycleEventType.SESSION_EXPIRED */);\n    });\n    sessionManager.renewObservable.subscribe(function () {\n        lifeCycle.notify(10 /* LifeCycleEventType.SESSION_RENEWED */);\n    });\n    return {\n        findTrackedSession: function (startTime) {\n            var session = sessionManager.findActiveSession(startTime);\n            if (!session || !isTypeTracked(session.trackingType)) {\n                return;\n            }\n            return {\n                id: session.id,\n                sessionReplayAllowed: session.trackingType === \"1\" /* RumTrackingType.TRACKED_WITH_SESSION_REPLAY */,\n            };\n        },\n        expire: sessionManager.expire,\n        expireObservable: sessionManager.expireObservable,\n    };\n}\n/**\n * Start a tracked replay session stub\n */\nexport function startRumSessionManagerStub() {\n    var session = {\n        id: '00000000-aaaa-0000-aaaa-000000000000',\n        sessionReplayAllowed: bridgeSupports(\"records\" /* BridgeCapability.RECORDS */),\n    };\n    return {\n        findTrackedSession: function () { return session; },\n        expire: noop,\n        expireObservable: new Observable(),\n    };\n}\nfunction computeSessionState(configuration, rawTrackingType) {\n    var trackingType;\n    if (hasValidRumSession(rawTrackingType)) {\n        trackingType = rawTrackingType;\n    }\n    else if (!performDraw(configuration.sessionSampleRate)) {\n        trackingType = \"0\" /* RumTrackingType.NOT_TRACKED */;\n    }\n    else if (!performDraw(configuration.sessionReplaySampleRate)) {\n        trackingType = \"2\" /* RumTrackingType.TRACKED_WITHOUT_SESSION_REPLAY */;\n    }\n    else {\n        trackingType = \"1\" /* RumTrackingType.TRACKED_WITH_SESSION_REPLAY */;\n    }\n    return {\n        trackingType: trackingType,\n        isTracked: isTypeTracked(trackingType),\n    };\n}\nfunction hasValidRumSession(trackingType) {\n    return (trackingType === \"0\" /* RumTrackingType.NOT_TRACKED */ ||\n        trackingType === \"1\" /* RumTrackingType.TRACKED_WITH_SESSION_REPLAY */ ||\n        trackingType === \"2\" /* RumTrackingType.TRACKED_WITHOUT_SESSION_REPLAY */);\n}\nfunction isTypeTracked(rumSessionType) {\n    return (rumSessionType === \"2\" /* RumTrackingType.TRACKED_WITHOUT_SESSION_REPLAY */ ||\n        rumSessionType === \"1\" /* RumTrackingType.TRACKED_WITH_SESSION_REPLAY */);\n}\n","import { display } from '../tools/display';\nimport { objectValues } from '../tools/utils/polyfills';\nimport { isPageExitReason } from '../browser/pageExitObservable';\nimport { jsonStringify } from '../tools/serialisation/jsonStringify';\nimport { computeBytesCount } from '../tools/utils/byteUtils';\nvar Batch = /** @class */ (function () {\n    function Batch(encoder, request, flushController, messageBytesLimit) {\n        var _this = this;\n        this.encoder = encoder;\n        this.request = request;\n        this.flushController = flushController;\n        this.messageBytesLimit = messageBytesLimit;\n        this.upsertBuffer = {};\n        this.flushSubscription = this.flushController.flushObservable.subscribe(function (event) { return _this.flush(event); });\n    }\n    Batch.prototype.add = function (message) {\n        this.addOrUpdate(message);\n    };\n    Batch.prototype.upsert = function (message, key) {\n        this.addOrUpdate(message, key);\n    };\n    Batch.prototype.stop = function () {\n        this.flushSubscription.unsubscribe();\n    };\n    Batch.prototype.flush = function (event) {\n        var upsertMessages = objectValues(this.upsertBuffer).join('\\n');\n        this.upsertBuffer = {};\n        var isPageExit = isPageExitReason(event.reason);\n        var send = isPageExit ? this.request.sendOnExit : this.request.send;\n        if (isPageExit &&\n            // Note: checking that the encoder is async is not strictly needed, but it's an optimization:\n            // if the encoder is async we need to send two requests in some cases (one for encoded data\n            // and the other for non-encoded data). But if it's not async, we don't have to worry about\n            // it and always send a single request.\n            this.encoder.isAsync) {\n            var encoderResult = this.encoder.finishSync();\n            // Send encoded messages\n            if (encoderResult.outputBytesCount) {\n                send(formatPayloadFromEncoder(encoderResult, event));\n            }\n            // Send messages that are not yet encoded at this point\n            var pendingMessages = [encoderResult.pendingData, upsertMessages].filter(Boolean).join('\\n');\n            if (pendingMessages) {\n                send({\n                    data: pendingMessages,\n                    bytesCount: computeBytesCount(pendingMessages),\n                    flushReason: event.reason,\n                });\n            }\n        }\n        else {\n            if (upsertMessages) {\n                this.encoder.write(this.encoder.isEmpty ? upsertMessages : \"\\n\".concat(upsertMessages));\n            }\n            this.encoder.finish(function (encoderResult) {\n                send(formatPayloadFromEncoder(encoderResult, event));\n            });\n        }\n    };\n    Batch.prototype.addOrUpdate = function (message, key) {\n        var serializedMessage = jsonStringify(message);\n        var estimatedMessageBytesCount = this.encoder.estimateEncodedBytesCount(serializedMessage);\n        if (estimatedMessageBytesCount >= this.messageBytesLimit) {\n            display.warn(\"Discarded a message whose size was bigger than the maximum allowed size \".concat(this.messageBytesLimit, \"KB.\"));\n            return;\n        }\n        if (this.hasMessageFor(key)) {\n            this.remove(key);\n        }\n        this.push(serializedMessage, estimatedMessageBytesCount, key);\n    };\n    Batch.prototype.push = function (serializedMessage, estimatedMessageBytesCount, key) {\n        var _this = this;\n        this.flushController.notifyBeforeAddMessage(estimatedMessageBytesCount);\n        if (key !== undefined) {\n            this.upsertBuffer[key] = serializedMessage;\n            this.flushController.notifyAfterAddMessage();\n        }\n        else {\n            this.encoder.write(this.encoder.isEmpty ? serializedMessage : \"\\n\".concat(serializedMessage), function (realMessageBytesCount) {\n                _this.flushController.notifyAfterAddMessage(realMessageBytesCount - estimatedMessageBytesCount);\n            });\n        }\n    };\n    Batch.prototype.remove = function (key) {\n        var removedMessage = this.upsertBuffer[key];\n        delete this.upsertBuffer[key];\n        var messageBytesCount = this.encoder.estimateEncodedBytesCount(removedMessage);\n        this.flushController.notifyAfterRemoveMessage(messageBytesCount);\n    };\n    Batch.prototype.hasMessageFor = function (key) {\n        return key !== undefined && this.upsertBuffer[key] !== undefined;\n    };\n    return Batch;\n}());\nexport { Batch };\nfunction formatPayloadFromEncoder(encoderResult, flushEvent) {\n    var data;\n    if (typeof encoderResult.output === 'string') {\n        data = encoderResult.output;\n    }\n    else {\n        data = new Blob([encoderResult.output], {\n            // This will set the 'Content-Type: text/plain' header. Reasoning:\n            // * The intake rejects the request if there is no content type.\n            // * The browser will issue CORS preflight requests if we set it to 'application/json', which\n            // could induce higher intake load (and maybe has other impacts).\n            // * Also it's not quite JSON, since we are concatenating multiple JSON objects separated by\n            // new lines.\n            type: 'text/plain',\n        });\n    }\n    return {\n        data: data,\n        bytesCount: encoderResult.outputBytesCount,\n        encoding: encoderResult.encoding,\n        flushReason: flushEvent.reason,\n    };\n}\n","import { setTimeout } from '../tools/timer';\nimport { clocksNow, ONE_MINUTE, ONE_SECOND } from '../tools/utils/timeUtils';\nimport { ONE_MEBI_BYTE, ONE_KIBI_BYTE } from '../tools/utils/byteUtils';\nimport { isServerError } from '../tools/utils/responseUtils';\nimport { ErrorSource } from '../domain/error/error.types';\nexport var MAX_ONGOING_BYTES_COUNT = 80 * ONE_KIBI_BYTE;\nexport var MAX_ONGOING_REQUESTS = 32;\nexport var MAX_QUEUE_BYTES_COUNT = 3 * ONE_MEBI_BYTE;\nexport var MAX_BACKOFF_TIME = ONE_MINUTE;\nexport var INITIAL_BACKOFF_TIME = ONE_SECOND;\nexport function sendWithRetryStrategy(payload, state, sendStrategy, trackType, reportError) {\n    if (state.transportStatus === 0 /* TransportStatus.UP */ &&\n        state.queuedPayloads.size() === 0 &&\n        state.bandwidthMonitor.canHandle(payload)) {\n        send(payload, state, sendStrategy, {\n            onSuccess: function () { return retryQueuedPayloads(0 /* RetryReason.AFTER_SUCCESS */, state, sendStrategy, trackType, reportError); },\n            onFailure: function () {\n                state.queuedPayloads.enqueue(payload);\n                scheduleRetry(state, sendStrategy, trackType, reportError);\n            },\n        });\n    }\n    else {\n        state.queuedPayloads.enqueue(payload);\n    }\n}\nfunction scheduleRetry(state, sendStrategy, trackType, reportError) {\n    if (state.transportStatus !== 2 /* TransportStatus.DOWN */) {\n        return;\n    }\n    setTimeout(function () {\n        var payload = state.queuedPayloads.first();\n        send(payload, state, sendStrategy, {\n            onSuccess: function () {\n                state.queuedPayloads.dequeue();\n                state.currentBackoffTime = INITIAL_BACKOFF_TIME;\n                retryQueuedPayloads(1 /* RetryReason.AFTER_RESUME */, state, sendStrategy, trackType, reportError);\n            },\n            onFailure: function () {\n                state.currentBackoffTime = Math.min(MAX_BACKOFF_TIME, state.currentBackoffTime * 2);\n                scheduleRetry(state, sendStrategy, trackType, reportError);\n            },\n        });\n    }, state.currentBackoffTime);\n}\nfunction send(payload, state, sendStrategy, _a) {\n    var onSuccess = _a.onSuccess, onFailure = _a.onFailure;\n    state.bandwidthMonitor.add(payload);\n    sendStrategy(payload, function (response) {\n        state.bandwidthMonitor.remove(payload);\n        if (!shouldRetryRequest(response)) {\n            state.transportStatus = 0 /* TransportStatus.UP */;\n            onSuccess();\n        }\n        else {\n            // do not consider transport down if another ongoing request could succeed\n            state.transportStatus =\n                state.bandwidthMonitor.ongoingRequestCount > 0 ? 1 /* TransportStatus.FAILURE_DETECTED */ : 2 /* TransportStatus.DOWN */;\n            payload.retry = {\n                count: payload.retry ? payload.retry.count + 1 : 1,\n                lastFailureStatus: response.status,\n            };\n            onFailure();\n        }\n    });\n}\nfunction retryQueuedPayloads(reason, state, sendStrategy, trackType, reportError) {\n    if (reason === 0 /* RetryReason.AFTER_SUCCESS */ && state.queuedPayloads.isFull() && !state.queueFullReported) {\n        reportError({\n            message: \"Reached max \".concat(trackType, \" events size queued for upload: \").concat(MAX_QUEUE_BYTES_COUNT / ONE_MEBI_BYTE, \"MiB\"),\n            source: ErrorSource.AGENT,\n            startClocks: clocksNow(),\n        });\n        state.queueFullReported = true;\n    }\n    var previousQueue = state.queuedPayloads;\n    state.queuedPayloads = newPayloadQueue();\n    while (previousQueue.size() > 0) {\n        sendWithRetryStrategy(previousQueue.dequeue(), state, sendStrategy, trackType, reportError);\n    }\n}\nfunction shouldRetryRequest(response) {\n    return (response.type !== 'opaque' &&\n        ((response.status === 0 && !navigator.onLine) ||\n            response.status === 408 ||\n            response.status === 429 ||\n            isServerError(response.status)));\n}\nexport function newRetryState() {\n    return {\n        transportStatus: 0 /* TransportStatus.UP */,\n        currentBackoffTime: INITIAL_BACKOFF_TIME,\n        bandwidthMonitor: newBandwidthMonitor(),\n        queuedPayloads: newPayloadQueue(),\n        queueFullReported: false,\n    };\n}\nfunction newPayloadQueue() {\n    var queue = [];\n    return {\n        bytesCount: 0,\n        enqueue: function (payload) {\n            if (this.isFull()) {\n                return;\n            }\n            queue.push(payload);\n            this.bytesCount += payload.bytesCount;\n        },\n        first: function () {\n            return queue[0];\n        },\n        dequeue: function () {\n            var payload = queue.shift();\n            if (payload) {\n                this.bytesCount -= payload.bytesCount;\n            }\n            return payload;\n        },\n        size: function () {\n            return queue.length;\n        },\n        isFull: function () {\n            return this.bytesCount >= MAX_QUEUE_BYTES_COUNT;\n        },\n    };\n}\nfunction newBandwidthMonitor() {\n    return {\n        ongoingRequestCount: 0,\n        ongoingByteCount: 0,\n        canHandle: function (payload) {\n            return (this.ongoingRequestCount === 0 ||\n                (this.ongoingByteCount + payload.bytesCount <= MAX_ONGOING_BYTES_COUNT &&\n                    this.ongoingRequestCount < MAX_ONGOING_REQUESTS));\n        },\n        add: function (payload) {\n            this.ongoingRequestCount += 1;\n            this.ongoingByteCount += payload.bytesCount;\n        },\n        remove: function (payload) {\n            this.ongoingRequestCount -= 1;\n            this.ongoingByteCount -= payload.bytesCount;\n        },\n    };\n}\n","import { addTelemetryError } from '../domain/telemetry';\nimport { monitor } from '../tools/monitor';\nimport { addEventListener } from '../browser/addEventListener';\nimport { newRetryState, sendWithRetryStrategy } from './sendWithRetryStrategy';\nexport function createHttpRequest(configuration, endpointBuilder, bytesLimit, reportError) {\n    var retryState = newRetryState();\n    var sendStrategyForRetry = function (payload, onResponse) {\n        return fetchKeepAliveStrategy(configuration, endpointBuilder, bytesLimit, payload, onResponse);\n    };\n    return {\n        send: function (payload) {\n            sendWithRetryStrategy(payload, retryState, sendStrategyForRetry, endpointBuilder.trackType, reportError);\n        },\n        /**\n         * Since fetch keepalive behaves like regular fetch on Firefox,\n         * keep using sendBeaconStrategy on exit\n         */\n        sendOnExit: function (payload) {\n            sendBeaconStrategy(configuration, endpointBuilder, bytesLimit, payload);\n        },\n    };\n}\nfunction sendBeaconStrategy(configuration, endpointBuilder, bytesLimit, payload) {\n    var canUseBeacon = !!navigator.sendBeacon && payload.bytesCount < bytesLimit;\n    if (canUseBeacon) {\n        try {\n            var beaconUrl = endpointBuilder.build('beacon', payload);\n            var isQueued = navigator.sendBeacon(beaconUrl, payload.data);\n            if (isQueued) {\n                return;\n            }\n        }\n        catch (e) {\n            reportBeaconError(e);\n        }\n    }\n    var xhrUrl = endpointBuilder.build('xhr', payload);\n    sendXHR(configuration, xhrUrl, payload.data);\n}\nvar hasReportedBeaconError = false;\nfunction reportBeaconError(e) {\n    if (!hasReportedBeaconError) {\n        hasReportedBeaconError = true;\n        addTelemetryError(e);\n    }\n}\nexport function fetchKeepAliveStrategy(configuration, endpointBuilder, bytesLimit, payload, onResponse) {\n    var canUseKeepAlive = isKeepAliveSupported() && payload.bytesCount < bytesLimit;\n    if (canUseKeepAlive) {\n        var fetchUrl = endpointBuilder.build('fetch', payload);\n        fetch(fetchUrl, { method: 'POST', body: payload.data, keepalive: true, mode: 'cors' }).then(monitor(function (response) { return onResponse === null || onResponse === void 0 ? void 0 : onResponse({ status: response.status, type: response.type }); }), monitor(function () {\n            var xhrUrl = endpointBuilder.build('xhr', payload);\n            // failed to queue the request\n            sendXHR(configuration, xhrUrl, payload.data, onResponse);\n        }));\n    }\n    else {\n        var xhrUrl = endpointBuilder.build('xhr', payload);\n        sendXHR(configuration, xhrUrl, payload.data, onResponse);\n    }\n}\nfunction isKeepAliveSupported() {\n    // Request can throw, cf https://developer.mozilla.org/en-US/docs/Web/API/Request/Request#errors\n    try {\n        return window.Request && 'keepalive' in new Request('http://a');\n    }\n    catch (_a) {\n        return false;\n    }\n}\nexport function sendXHR(configuration, url, data, onResponse) {\n    var request = new XMLHttpRequest();\n    request.open('POST', url, true);\n    if (data instanceof Blob) {\n        // When using a Blob instance, IE does not use its 'type' to define the 'Content-Type' header\n        // automatically, so the intake request ends up being rejected with an HTTP status 415\n        // Defining the header manually fixes this issue.\n        request.setRequestHeader('Content-Type', data.type);\n    }\n    addEventListener(configuration, request, 'loadend', function () {\n        onResponse === null || onResponse === void 0 ? void 0 : onResponse({ status: request.status });\n    }, {\n        // prevent multiple onResponse callbacks\n        // if the xhr instance is reused by a third party\n        once: true,\n    });\n    request.send(data);\n}\n","import { Batch } from './batch';\nimport { createHttpRequest } from './httpRequest';\nimport { createFlushController } from './flushController';\nexport function startBatchWithReplica(configuration, primary, replica, reportError, pageExitObservable, sessionExpireObservable) {\n    var primaryBatch = createBatch(configuration, primary);\n    var replicaBatch = replica && createBatch(configuration, replica);\n    function createBatch(configuration, _a) {\n        var endpoint = _a.endpoint, encoder = _a.encoder;\n        return new Batch(encoder, createHttpRequest(configuration, endpoint, configuration.batchBytesLimit, reportError), createFlushController({\n            messagesLimit: configuration.batchMessagesLimit,\n            bytesLimit: configuration.batchBytesLimit,\n            durationLimit: configuration.flushTimeout,\n            pageExitObservable: pageExitObservable,\n            sessionExpireObservable: sessionExpireObservable,\n        }), configuration.messageBytesLimit);\n    }\n    return {\n        flushObservable: primaryBatch.flushController.flushObservable,\n        add: function (message, replicated) {\n            if (replicated === void 0) { replicated = true; }\n            primaryBatch.add(message);\n            if (replicaBatch && replicated) {\n                replicaBatch.add(replica.transformMessage ? replica.transformMessage(message) : message);\n            }\n        },\n        upsert: function (message, key) {\n            primaryBatch.upsert(message, key);\n            if (replicaBatch) {\n                replicaBatch.upsert(replica.transformMessage ? replica.transformMessage(message) : message, key);\n            }\n        },\n        stop: function () {\n            primaryBatch.stop();\n            replicaBatch === null || replicaBatch === void 0 ? void 0 : replicaBatch.stop();\n        },\n    };\n}\n","import { Observable } from '../tools/observable';\nimport { clearTimeout, setTimeout } from '../tools/timer';\n/**\n * Returns a \"flush controller\", responsible of notifying when flushing a pool of pending data needs\n * to happen. The implementation is designed to support both synchronous and asynchronous usages,\n * but relies on invariants described in each method documentation to keep a coherent state.\n */\nexport function createFlushController(_a) {\n    var messagesLimit = _a.messagesLimit, bytesLimit = _a.bytesLimit, durationLimit = _a.durationLimit, pageExitObservable = _a.pageExitObservable, sessionExpireObservable = _a.sessionExpireObservable;\n    var pageExitSubscription = pageExitObservable.subscribe(function (event) { return flush(event.reason); });\n    var sessionExpireSubscription = sessionExpireObservable.subscribe(function () { return flush('session_expire'); });\n    var flushObservable = new Observable(function () { return function () {\n        pageExitSubscription.unsubscribe();\n        sessionExpireSubscription.unsubscribe();\n    }; });\n    var currentBytesCount = 0;\n    var currentMessagesCount = 0;\n    function flush(flushReason) {\n        if (currentMessagesCount === 0) {\n            return;\n        }\n        var messagesCount = currentMessagesCount;\n        var bytesCount = currentBytesCount;\n        currentMessagesCount = 0;\n        currentBytesCount = 0;\n        cancelDurationLimitTimeout();\n        flushObservable.notify({\n            reason: flushReason,\n            messagesCount: messagesCount,\n            bytesCount: bytesCount,\n        });\n    }\n    var durationLimitTimeoutId;\n    function scheduleDurationLimitTimeout() {\n        if (durationLimitTimeoutId === undefined) {\n            durationLimitTimeoutId = setTimeout(function () {\n                flush('duration_limit');\n            }, durationLimit);\n        }\n    }\n    function cancelDurationLimitTimeout() {\n        clearTimeout(durationLimitTimeoutId);\n        durationLimitTimeoutId = undefined;\n    }\n    return {\n        flushObservable: flushObservable,\n        get messagesCount() {\n            return currentMessagesCount;\n        },\n        /**\n         * Notifies that a message will be added to a pool of pending messages waiting to be flushed.\n         *\n         * This function needs to be called synchronously, right before adding the message, so no flush\n         * event can happen after `notifyBeforeAddMessage` and before adding the message.\n         *\n         * @param estimatedMessageBytesCount: an estimation of the message bytes count once it is\n         * actually added.\n         */\n        notifyBeforeAddMessage: function (estimatedMessageBytesCount) {\n            if (currentBytesCount + estimatedMessageBytesCount >= bytesLimit) {\n                flush('bytes_limit');\n            }\n            // Consider the message to be added now rather than in `notifyAfterAddMessage`, because if no\n            // message was added yet and `notifyAfterAddMessage` is called asynchronously, we still want\n            // to notify when a flush is needed (for example on page exit).\n            currentMessagesCount += 1;\n            currentBytesCount += estimatedMessageBytesCount;\n            scheduleDurationLimitTimeout();\n        },\n        /**\n         * Notifies that a message *was* added to a pool of pending messages waiting to be flushed.\n         *\n         * This function can be called asynchronously after the message was added, but in this case it\n         * should not be called if a flush event occurred in between.\n         *\n         * @param messageBytesCountDiff: the difference between the estimated message bytes count and\n         * its actual bytes count once added to the pool.\n         */\n        notifyAfterAddMessage: function (messageBytesCountDiff) {\n            if (messageBytesCountDiff === void 0) { messageBytesCountDiff = 0; }\n            currentBytesCount += messageBytesCountDiff;\n            if (currentMessagesCount >= messagesLimit) {\n                flush('messages_limit');\n            }\n            else if (currentBytesCount >= bytesLimit) {\n                flush('bytes_limit');\n            }\n        },\n        /**\n         * Notifies that a message was removed from a pool of pending messages waiting to be flushed.\n         *\n         * This function needs to be called synchronously, right after removing the message, so no flush\n         * event can happen after removing the message and before `notifyAfterRemoveMessage`.\n         *\n         * @param messageBytesCount: the message bytes count that was added to the pool. Should\n         * correspond to the sum of bytes counts passed to `notifyBeforeAddMessage` and\n         * `notifyAfterAddMessage`.\n         */\n        notifyAfterRemoveMessage: function (messageBytesCount) {\n            currentBytesCount -= messageBytesCount;\n            currentMessagesCount -= 1;\n            if (currentMessagesCount === 0) {\n                cancelDurationLimitTimeout();\n            }\n        },\n    };\n}\n","import { SESSION_TIME_OUT_DELAY, relativeNow, ValueHistory } from '@datadog/browser-core';\n/**\n * We want to attach to an event:\n * - the url corresponding to its start\n * - the referrer corresponding to the previous view url (or document referrer for initial view)\n */\nexport var URL_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY;\nexport function startUrlContexts(lifeCycle, locationChangeObservable, location) {\n    var urlContextHistory = new ValueHistory(URL_CONTEXT_TIME_OUT_DELAY);\n    var previousViewUrl;\n    lifeCycle.subscribe(2 /* LifeCycleEventType.BEFORE_VIEW_CREATED */, function (_a) {\n        var startClocks = _a.startClocks;\n        var viewUrl = location.href;\n        urlContextHistory.add(buildUrlContext({\n            url: viewUrl,\n            referrer: !previousViewUrl ? document.referrer : previousViewUrl,\n        }), startClocks.relative);\n        previousViewUrl = viewUrl;\n    });\n    lifeCycle.subscribe(6 /* LifeCycleEventType.AFTER_VIEW_ENDED */, function (_a) {\n        var endClocks = _a.endClocks;\n        urlContextHistory.closeActive(endClocks.relative);\n    });\n    var locationChangeSubscription = locationChangeObservable.subscribe(function (_a) {\n        var newLocation = _a.newLocation;\n        var current = urlContextHistory.find();\n        if (current) {\n            var changeTime = relativeNow();\n            urlContextHistory.closeActive(changeTime);\n            urlContextHistory.add(buildUrlContext({\n                url: newLocation.href,\n                referrer: current.referrer,\n            }), changeTime);\n        }\n    });\n    function buildUrlContext(_a) {\n        var url = _a.url, referrer = _a.referrer;\n        return {\n            url: url,\n            referrer: referrer,\n        };\n    }\n    return {\n        findUrl: function (startTime) { return urlContextHistory.find(startTime); },\n        stop: function () {\n            locationChangeSubscription.unsubscribe();\n            urlContextHistory.stop();\n        },\n    };\n}\n","import { SESSION_TIME_OUT_DELAY, ValueHistory } from '@datadog/browser-core';\nexport var FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY;\nexport var BYTES_COMPUTATION_THROTTLING_DELAY = 200;\n/**\n * Start feature flag contexts\n *\n * Feature flag contexts follow the life of views.\n * A new context is added when a view is created and ended when the view is ended\n *\n * Note: we choose not to add a new context at each evaluation to save memory\n */\nexport function startFeatureFlagContexts(lifeCycle, customerDataTracker) {\n    var featureFlagContexts = new ValueHistory(FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY);\n    lifeCycle.subscribe(2 /* LifeCycleEventType.BEFORE_VIEW_CREATED */, function (_a) {\n        var startClocks = _a.startClocks;\n        featureFlagContexts.add({}, startClocks.relative);\n        customerDataTracker.resetCustomerData();\n    });\n    lifeCycle.subscribe(6 /* LifeCycleEventType.AFTER_VIEW_ENDED */, function (_a) {\n        var endClocks = _a.endClocks;\n        featureFlagContexts.closeActive(endClocks.relative);\n    });\n    return {\n        findFeatureFlagEvaluations: function (startTime) { return featureFlagContexts.find(startTime); },\n        addFeatureFlagEvaluation: function (key, value) {\n            var currentContext = featureFlagContexts.find();\n            if (currentContext) {\n                currentContext[key] = value;\n                customerDataTracker.updateCustomerData(currentContext);\n            }\n        },\n        stop: function () { return customerDataTracker.stop(); },\n    };\n}\n","import { includes, performDraw, ONE_SECOND, addTelemetryDebug, setInterval, } from '@datadog/browser-core';\nexport var MEASURES_PERIOD_DURATION = 10 * ONE_SECOND;\nvar currentPeriodMeasures;\nvar currentBatchMeasures;\nvar batchHasRumEvent;\nexport function startCustomerDataTelemetry(configuration, telemetry, lifeCycle, customerDataTrackerManager, batchFlushObservable) {\n    var customerDataTelemetryEnabled = telemetry.enabled && performDraw(configuration.customerDataTelemetrySampleRate);\n    if (!customerDataTelemetryEnabled) {\n        return;\n    }\n    initCurrentPeriodMeasures();\n    initCurrentBatchMeasures();\n    // We measure the data of every view updates even if there could only be one per batch due to the upsert\n    // It means that contexts bytes count sums can be higher than it really is\n    lifeCycle.subscribe(13 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (event) {\n        batchHasRumEvent = true;\n        updateMeasure(currentBatchMeasures.globalContextBytes, customerDataTrackerManager.getOrCreateTracker(2 /* CustomerDataType.GlobalContext */).getBytesCount());\n        updateMeasure(currentBatchMeasures.userContextBytes, customerDataTrackerManager.getOrCreateTracker(1 /* CustomerDataType.User */).getBytesCount());\n        updateMeasure(currentBatchMeasures.featureFlagBytes, includes([\"view\" /* RumEventType.VIEW */, \"error\" /* RumEventType.ERROR */], event.type)\n            ? customerDataTrackerManager.getOrCreateTracker(0 /* CustomerDataType.FeatureFlag */).getBytesCount()\n            : 0);\n    });\n    batchFlushObservable.subscribe(function (_a) {\n        var bytesCount = _a.bytesCount, messagesCount = _a.messagesCount;\n        // Don't measure batch that only contains telemetry events to avoid batch sending loop\n        // It could happen because after each batch we are adding a customer data measures telemetry event to the next one\n        if (!batchHasRumEvent) {\n            return;\n        }\n        currentPeriodMeasures.batchCount += 1;\n        updateMeasure(currentPeriodMeasures.batchBytesCount, bytesCount);\n        updateMeasure(currentPeriodMeasures.batchMessagesCount, messagesCount);\n        mergeMeasure(currentPeriodMeasures.globalContextBytes, currentBatchMeasures.globalContextBytes);\n        mergeMeasure(currentPeriodMeasures.userContextBytes, currentBatchMeasures.userContextBytes);\n        mergeMeasure(currentPeriodMeasures.featureFlagBytes, currentBatchMeasures.featureFlagBytes);\n        initCurrentBatchMeasures();\n    });\n    setInterval(sendCurrentPeriodMeasures, MEASURES_PERIOD_DURATION);\n}\nfunction sendCurrentPeriodMeasures() {\n    if (currentPeriodMeasures.batchCount === 0) {\n        return;\n    }\n    addTelemetryDebug('Customer data measures', currentPeriodMeasures);\n    initCurrentPeriodMeasures();\n}\nfunction createMeasure() {\n    return { min: Infinity, max: 0, sum: 0 };\n}\nfunction updateMeasure(measure, value) {\n    measure.sum += value;\n    measure.min = Math.min(measure.min, value);\n    measure.max = Math.max(measure.max, value);\n}\nfunction mergeMeasure(target, source) {\n    target.sum += source.sum;\n    target.min = Math.min(target.min, source.min);\n    target.max = Math.max(target.max, source.max);\n}\nfunction initCurrentPeriodMeasures() {\n    currentPeriodMeasures = {\n        batchCount: 0,\n        batchBytesCount: createMeasure(),\n        batchMessagesCount: createMeasure(),\n        globalContextBytes: createMeasure(),\n        userContextBytes: createMeasure(),\n        featureFlagBytes: createMeasure(),\n    };\n}\nfunction initCurrentBatchMeasures() {\n    batchHasRumEvent = false;\n    currentBatchMeasures = {\n        globalContextBytes: createMeasure(),\n        userContextBytes: createMeasure(),\n        featureFlagBytes: createMeasure(),\n    };\n}\n","import { elapsed, ValueHistory, SESSION_TIME_OUT_DELAY, toServerDuration, addEventListeners, relativeNow, DOM_EVENT, } from '@datadog/browser-core';\n// Arbitrary value to cap number of element for memory consumption in the browser\nexport var MAX_PAGE_STATE_ENTRIES = 4000;\n// Arbitrary value to cap number of element for backend & to save bandwidth\nexport var MAX_PAGE_STATE_ENTRIES_SELECTABLE = 500;\nexport var PAGE_STATE_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY;\nexport function startPageStateHistory(configuration, maxPageStateEntriesSelectable) {\n    if (maxPageStateEntriesSelectable === void 0) { maxPageStateEntriesSelectable = MAX_PAGE_STATE_ENTRIES_SELECTABLE; }\n    var pageStateEntryHistory = new ValueHistory(PAGE_STATE_CONTEXT_TIME_OUT_DELAY, MAX_PAGE_STATE_ENTRIES);\n    var currentPageState;\n    addPageState(getPageState(), relativeNow());\n    var stopEventListeners = addEventListeners(configuration, window, [\n        DOM_EVENT.PAGE_SHOW,\n        DOM_EVENT.FOCUS,\n        DOM_EVENT.BLUR,\n        DOM_EVENT.VISIBILITY_CHANGE,\n        DOM_EVENT.RESUME,\n        DOM_EVENT.FREEZE,\n        DOM_EVENT.PAGE_HIDE,\n    ], function (event) {\n        addPageState(computePageState(event), event.timeStamp);\n    }, { capture: true }).stop;\n    function addPageState(nextPageState, startTime) {\n        if (startTime === void 0) { startTime = relativeNow(); }\n        if (nextPageState === currentPageState) {\n            return;\n        }\n        currentPageState = nextPageState;\n        pageStateEntryHistory.closeActive(startTime);\n        pageStateEntryHistory.add({ state: currentPageState, startTime: startTime }, startTime);\n    }\n    var pageStateHistory = {\n        findAll: function (eventStartTime, duration) {\n            var pageStateEntries = pageStateEntryHistory.findAll(eventStartTime, duration);\n            if (pageStateEntries.length === 0) {\n                return;\n            }\n            var pageStateServerEntries = [];\n            // limit the number of entries to return\n            var limit = Math.max(0, pageStateEntries.length - maxPageStateEntriesSelectable);\n            // loop page state entries backward to return the selected ones in desc order\n            for (var index = pageStateEntries.length - 1; index >= limit; index--) {\n                var pageState = pageStateEntries[index];\n                // compute the start time relative to the event start time (ex: to be relative to the view start time)\n                var relativeStartTime = elapsed(eventStartTime, pageState.startTime);\n                pageStateServerEntries.push({\n                    state: pageState.state,\n                    start: toServerDuration(relativeStartTime),\n                });\n            }\n            return pageStateServerEntries;\n        },\n        wasInPageStateAt: function (state, startTime) {\n            return pageStateHistory.wasInPageStateDuringPeriod(state, startTime, 0);\n        },\n        wasInPageStateDuringPeriod: function (state, startTime, duration) {\n            return pageStateEntryHistory.findAll(startTime, duration).some(function (pageState) { return pageState.state === state; });\n        },\n        addPageState: addPageState,\n        stop: function () {\n            stopEventListeners();\n            pageStateEntryHistory.stop();\n        },\n    };\n    return pageStateHistory;\n}\nfunction computePageState(event) {\n    if (event.type === DOM_EVENT.FREEZE) {\n        return \"frozen\" /* PageState.FROZEN */;\n    }\n    else if (event.type === DOM_EVENT.PAGE_HIDE) {\n        return event.persisted ? \"frozen\" /* PageState.FROZEN */ : \"terminated\" /* PageState.TERMINATED */;\n    }\n    return getPageState();\n}\nfunction getPageState() {\n    if (document.visibilityState === 'hidden') {\n        return \"hidden\" /* PageState.HIDDEN */;\n    }\n    if (document.hasFocus()) {\n        return \"active\" /* PageState.ACTIVE */;\n    }\n    return \"passive\" /* PageState.PASSIVE */;\n}\n","import { setInterval, clearInterval, Observable, addEventListener, ONE_SECOND, findCommaSeparatedValue, DOM_EVENT, find, } from '@datadog/browser-core';\nexport function createCookieObservable(configuration, cookieName) {\n    var detectCookieChangeStrategy = window.cookieStore\n        ? listenToCookieStoreChange(configuration)\n        : watchCookieFallback;\n    return new Observable(function (observable) {\n        return detectCookieChangeStrategy(cookieName, function (event) { return observable.notify(event); });\n    });\n}\nfunction listenToCookieStoreChange(configuration) {\n    return function (cookieName, callback) {\n        var listener = addEventListener(configuration, window.cookieStore, DOM_EVENT.CHANGE, function (event) {\n            // Based on our experimentation, we're assuming that entries for the same cookie cannot be in both the 'changed' and 'deleted' arrays.\n            // However, due to ambiguity in the specification, we asked for clarification: https://github.com/WICG/cookie-store/issues/226\n            var changeEvent = find(event.changed, function (event) { return event.name === cookieName; }) ||\n                find(event.deleted, function (event) { return event.name === cookieName; });\n            if (changeEvent) {\n                callback(changeEvent.value);\n            }\n        });\n        return listener.stop;\n    };\n}\nexport var WATCH_COOKIE_INTERVAL_DELAY = ONE_SECOND;\nfunction watchCookieFallback(cookieName, callback) {\n    var previousCookieValue = findCommaSeparatedValue(document.cookie, cookieName);\n    var watchCookieIntervalId = setInterval(function () {\n        var cookieValue = findCommaSeparatedValue(document.cookie, cookieName);\n        if (cookieValue !== previousCookieValue) {\n            callback(cookieValue);\n        }\n    }, WATCH_COOKIE_INTERVAL_DELAY);\n    return function () {\n        clearInterval(watchCookieIntervalId);\n    };\n}\n","import { getInitCookie } from '@datadog/browser-core';\nimport { createCookieObservable } from '../../browser/cookieObservable';\nexport var CI_VISIBILITY_TEST_ID_COOKIE_NAME = 'datadog-ci-visibility-test-execution-id';\nexport function startCiVisibilityContext(configuration, cookieObservable) {\n    var _a;\n    if (cookieObservable === void 0) { cookieObservable = createCookieObservable(configuration, CI_VISIBILITY_TEST_ID_COOKIE_NAME); }\n    var testExecutionId = getInitCookie(CI_VISIBILITY_TEST_ID_COOKIE_NAME) || ((_a = window.Cypress) === null || _a === void 0 ? void 0 : _a.env('traceId'));\n    var cookieObservableSubscription = cookieObservable.subscribe(function (value) {\n        testExecutionId = value;\n    });\n    return {\n        get: function () {\n            if (typeof testExecutionId === 'string') {\n                return {\n                    test_execution_id: testExecutionId,\n                };\n            }\n        },\n        stop: function () { return cookieObservableSubscription.unsubscribe(); },\n    };\n}\n","export var MAX_STATS_HISTORY = 10;\nvar statsPerView;\nexport function getSegmentsCount(viewId) {\n    return getOrCreateReplayStats(viewId).segments_count;\n}\nexport function addSegment(viewId) {\n    getOrCreateReplayStats(viewId).segments_count += 1;\n}\nexport function addRecord(viewId) {\n    getOrCreateReplayStats(viewId).records_count += 1;\n}\nexport function addWroteData(viewId, additionalBytesCount) {\n    getOrCreateReplayStats(viewId).segments_total_raw_size += additionalBytesCount;\n}\nexport function getReplayStats(viewId) {\n    return statsPerView === null || statsPerView === void 0 ? void 0 : statsPerView.get(viewId);\n}\nexport function resetReplayStats() {\n    statsPerView = undefined;\n}\nfunction getOrCreateReplayStats(viewId) {\n    if (!statsPerView) {\n        statsPerView = new Map();\n    }\n    var replayStats;\n    if (statsPerView.has(viewId)) {\n        replayStats = statsPerView.get(viewId);\n    }\n    else {\n        replayStats = {\n            records_count: 0,\n            segments_count: 0,\n            segments_total_raw_size: 0,\n        };\n        statsPerView.set(viewId, replayStats);\n        if (statsPerView.size > MAX_STATS_HISTORY) {\n            deleteOldestStats();\n        }\n    }\n    return replayStats;\n}\nfunction deleteOldestStats() {\n    if (!statsPerView) {\n        return;\n    }\n    if (statsPerView.keys) {\n        statsPerView.delete(statsPerView.keys().next().value);\n    }\n    else {\n        // IE11 doesn't support map.keys\n        var isFirst_1 = true;\n        statsPerView.forEach(function (_value, key) {\n            if (isFirst_1) {\n                statsPerView.delete(key);\n                isFirst_1 = false;\n            }\n        });\n    }\n}\n","import { DefaultPrivacyLevel } from '@datadog/browser-core';\nexport var NodePrivacyLevel = {\n    IGNORE: 'ignore',\n    HIDDEN: 'hidden',\n    ALLOW: DefaultPrivacyLevel.ALLOW,\n    MASK: DefaultPrivacyLevel.MASK,\n    MASK_USER_INPUT: DefaultPrivacyLevel.MASK_USER_INPUT,\n};\nexport var PRIVACY_ATTR_NAME = 'data-dd-privacy';\n// Privacy Attrs\nexport var PRIVACY_ATTR_VALUE_ALLOW = 'allow';\nexport var PRIVACY_ATTR_VALUE_MASK = 'mask';\nexport var PRIVACY_ATTR_VALUE_MASK_USER_INPUT = 'mask-user-input';\nexport var PRIVACY_ATTR_VALUE_HIDDEN = 'hidden';\n// Privacy Classes - not all customers can set plain HTML attributes, so support classes too\nexport var PRIVACY_CLASS_ALLOW = 'dd-privacy-allow';\nexport var PRIVACY_CLASS_MASK = 'dd-privacy-mask';\nexport var PRIVACY_CLASS_MASK_USER_INPUT = 'dd-privacy-mask-user-input';\nexport var PRIVACY_CLASS_HIDDEN = 'dd-privacy-hidden';\n// Private Replacement Templates\nexport var CENSORED_STRING_MARK = '***';\nexport var CENSORED_IMG_MARK = 'data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==';\nexport var FORM_PRIVATE_TAG_NAMES = {\n    INPUT: true,\n    OUTPUT: true,\n    TEXTAREA: true,\n    SELECT: true,\n    OPTION: true,\n    DATALIST: true,\n    OPTGROUP: true,\n};\n","import { isElementNode, getParentNode, isTextNode } from '@datadog/browser-rum-core';\nimport { NodePrivacyLevel, PRIVACY_ATTR_NAME, PRIVACY_ATTR_VALUE_ALLOW, PRIVACY_ATTR_VALUE_MASK, PRIVACY_ATTR_VALUE_MASK_USER_INPUT, PRIVACY_ATTR_VALUE_HIDDEN, PRIVACY_CLASS_ALLOW, PRIVACY_CLASS_MASK, PRIVACY_CLASS_MASK_USER_INPUT, PRIVACY_CLASS_HIDDEN, FORM_PRIVATE_TAG_NAMES, CENSORED_STRING_MARK, } from '../../constants';\nvar TEXT_MASKING_CHAR = 'x';\n/**\n * Get node privacy level by iterating over its ancestors. When the direct parent privacy level is\n * know, it is best to use something like:\n *\n * derivePrivacyLevelGivenParent(getNodeSelfPrivacyLevel(node), parentNodePrivacyLevel)\n */\nexport function getNodePrivacyLevel(node, defaultPrivacyLevel, cache) {\n    if (cache && cache.has(node)) {\n        return cache.get(node);\n    }\n    var parentNode = getParentNode(node);\n    var parentNodePrivacyLevel = parentNode\n        ? getNodePrivacyLevel(parentNode, defaultPrivacyLevel, cache)\n        : defaultPrivacyLevel;\n    var selfNodePrivacyLevel = getNodeSelfPrivacyLevel(node);\n    var nodePrivacyLevel = reducePrivacyLevel(selfNodePrivacyLevel, parentNodePrivacyLevel);\n    if (cache) {\n        cache.set(node, nodePrivacyLevel);\n    }\n    return nodePrivacyLevel;\n}\n/**\n * Reduces the next privacy level based on self + parent privacy levels\n */\nexport function reducePrivacyLevel(childPrivacyLevel, parentNodePrivacyLevel) {\n    switch (parentNodePrivacyLevel) {\n        // These values cannot be overridden\n        case NodePrivacyLevel.HIDDEN:\n        case NodePrivacyLevel.IGNORE:\n            return parentNodePrivacyLevel;\n    }\n    switch (childPrivacyLevel) {\n        case NodePrivacyLevel.ALLOW:\n        case NodePrivacyLevel.MASK:\n        case NodePrivacyLevel.MASK_USER_INPUT:\n        case NodePrivacyLevel.HIDDEN:\n        case NodePrivacyLevel.IGNORE:\n            return childPrivacyLevel;\n        default:\n            return parentNodePrivacyLevel;\n    }\n}\n/**\n * Determines the node's own privacy level without checking for ancestors.\n */\nexport function getNodeSelfPrivacyLevel(node) {\n    // Only Element types can have a privacy level set\n    if (!isElementNode(node)) {\n        return;\n    }\n    var privAttr = node.getAttribute(PRIVACY_ATTR_NAME);\n    // Overrules for replay purpose\n    if (node.tagName === 'BASE') {\n        return NodePrivacyLevel.ALLOW;\n    }\n    // Overrules to enforce end-user protection\n    if (node.tagName === 'INPUT') {\n        var inputElement = node;\n        if (inputElement.type === 'password' || inputElement.type === 'email' || inputElement.type === 'tel') {\n            return NodePrivacyLevel.MASK;\n        }\n        if (inputElement.type === 'hidden') {\n            return NodePrivacyLevel.MASK;\n        }\n        var autocomplete = inputElement.getAttribute('autocomplete');\n        // Handle input[autocomplete=cc-number/cc-csc/cc-exp/cc-exp-month/cc-exp-year]\n        if (autocomplete && autocomplete.indexOf('cc-') === 0) {\n            return NodePrivacyLevel.MASK;\n        }\n    }\n    // Check HTML privacy attributes and classes\n    if (privAttr === PRIVACY_ATTR_VALUE_HIDDEN || node.classList.contains(PRIVACY_CLASS_HIDDEN)) {\n        return NodePrivacyLevel.HIDDEN;\n    }\n    if (privAttr === PRIVACY_ATTR_VALUE_MASK || node.classList.contains(PRIVACY_CLASS_MASK)) {\n        return NodePrivacyLevel.MASK;\n    }\n    if (privAttr === PRIVACY_ATTR_VALUE_MASK_USER_INPUT || node.classList.contains(PRIVACY_CLASS_MASK_USER_INPUT)) {\n        return NodePrivacyLevel.MASK_USER_INPUT;\n    }\n    if (privAttr === PRIVACY_ATTR_VALUE_ALLOW || node.classList.contains(PRIVACY_CLASS_ALLOW)) {\n        return NodePrivacyLevel.ALLOW;\n    }\n    if (shouldIgnoreElement(node)) {\n        return NodePrivacyLevel.IGNORE;\n    }\n}\n/**\n * Helper aiming to unify `mask` and `mask-user-input` privacy levels:\n *\n * In the `mask` case, it is trivial: we should mask the element.\n *\n * In the `mask-user-input` case, we should mask the element only if it is a \"form\" element or the\n * direct parent is a form element for text nodes).\n *\n * Other `shouldMaskNode` cases are edge cases that should not matter too much (ex: should we mask a\n * node if it is ignored or hidden? it doesn't matter since it won't be serialized).\n */\nexport function shouldMaskNode(node, privacyLevel) {\n    switch (privacyLevel) {\n        case NodePrivacyLevel.MASK:\n        case NodePrivacyLevel.HIDDEN:\n        case NodePrivacyLevel.IGNORE:\n            return true;\n        case NodePrivacyLevel.MASK_USER_INPUT:\n            return isTextNode(node) ? isFormElement(node.parentNode) : isFormElement(node);\n        default:\n            return false;\n    }\n}\nfunction isFormElement(node) {\n    if (!node || node.nodeType !== node.ELEMENT_NODE) {\n        return false;\n    }\n    var element = node;\n    if (element.tagName === 'INPUT') {\n        switch (element.type) {\n            case 'button':\n            case 'color':\n            case 'reset':\n            case 'submit':\n                return false;\n        }\n    }\n    return !!FORM_PRIVATE_TAG_NAMES[element.tagName];\n}\n/**\n * Text censoring non-destructively maintains whitespace characters in order to preserve text shape\n * during replay.\n */\nexport var censorText = function (text) { return text.replace(/\\S/g, TEXT_MASKING_CHAR); };\nexport function getTextContent(textNode, ignoreWhiteSpace, parentNodePrivacyLevel) {\n    var _a;\n    // The parent node may not be a html element which has a tagName attribute.\n    // So just let it be undefined which is ok in this use case.\n    var parentTagName = (_a = textNode.parentElement) === null || _a === void 0 ? void 0 : _a.tagName;\n    var textContent = textNode.textContent || '';\n    if (ignoreWhiteSpace && !textContent.trim()) {\n        return;\n    }\n    var nodePrivacyLevel = parentNodePrivacyLevel;\n    var isScript = parentTagName === 'SCRIPT';\n    if (isScript) {\n        // For perf reasons, we don't record script (heuristic)\n        textContent = CENSORED_STRING_MARK;\n    }\n    else if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n        // Should never occur, but just in case, we set to CENSORED_MARK.\n        textContent = CENSORED_STRING_MARK;\n    }\n    else if (shouldMaskNode(textNode, nodePrivacyLevel)) {\n        if (\n        // Scrambling the child list breaks text nodes for DATALIST/SELECT/OPTGROUP\n        parentTagName === 'DATALIST' ||\n            parentTagName === 'SELECT' ||\n            parentTagName === 'OPTGROUP') {\n            if (!textContent.trim()) {\n                return;\n            }\n        }\n        else if (parentTagName === 'OPTION') {\n            // <Option> has low entropy in charset + text length, so use `CENSORED_STRING_MARK` when masked\n            textContent = CENSORED_STRING_MARK;\n        }\n        else {\n            textContent = censorText(textContent);\n        }\n    }\n    return textContent;\n}\n/**\n * TODO: Preserve CSS element order, and record the presence of the tag, just don't render\n * We don't need this logic on the recorder side.\n * For security related meta's, customer can mask themmanually given they\n * are easy to identify in the HEAD tag.\n */\nexport function shouldIgnoreElement(element) {\n    if (element.nodeName === 'SCRIPT') {\n        return true;\n    }\n    if (element.nodeName === 'LINK') {\n        var relAttribute = getLowerCaseAttribute('rel');\n        return (\n        // Link as script - Ignore only when rel=preload, modulepreload or prefetch\n        (/preload|prefetch/i.test(relAttribute) && getLowerCaseAttribute('as') === 'script') ||\n            // Favicons\n            relAttribute === 'shortcut icon' ||\n            relAttribute === 'icon');\n    }\n    if (element.nodeName === 'META') {\n        var nameAttribute = getLowerCaseAttribute('name');\n        var relAttribute = getLowerCaseAttribute('rel');\n        var propertyAttribute = getLowerCaseAttribute('property');\n        return (\n        // Favicons\n        /^msapplication-tile(image|color)$/.test(nameAttribute) ||\n            nameAttribute === 'application-name' ||\n            relAttribute === 'icon' ||\n            relAttribute === 'apple-touch-icon' ||\n            relAttribute === 'shortcut icon' ||\n            // Description\n            nameAttribute === 'keywords' ||\n            nameAttribute === 'description' ||\n            // Social\n            /^(og|twitter|fb):/.test(propertyAttribute) ||\n            /^(og|twitter):/.test(nameAttribute) ||\n            nameAttribute === 'pinterest' ||\n            // Robots\n            nameAttribute === 'robots' ||\n            nameAttribute === 'googlebot' ||\n            nameAttribute === 'bingbot' ||\n            // Http headers. Ex: X-UA-Compatible, Content-Type, Content-Language, cache-control,\n            // X-Translated-By\n            element.hasAttribute('http-equiv') ||\n            // Authorship\n            nameAttribute === 'author' ||\n            nameAttribute === 'generator' ||\n            nameAttribute === 'framework' ||\n            nameAttribute === 'publisher' ||\n            nameAttribute === 'progid' ||\n            /^article:/.test(propertyAttribute) ||\n            /^product:/.test(propertyAttribute) ||\n            // Verification\n            nameAttribute === 'google-site-verification' ||\n            nameAttribute === 'yandex-verification' ||\n            nameAttribute === 'csrf-token' ||\n            nameAttribute === 'p:domain_verify' ||\n            nameAttribute === 'verify-v1' ||\n            nameAttribute === 'verification' ||\n            nameAttribute === 'shopify-checkout-api-token');\n    }\n    function getLowerCaseAttribute(name) {\n        return (element.getAttribute(name) || '').toLowerCase();\n    }\n    return false;\n}\n","import { buildUrl } from '@datadog/browser-core';\nimport { getParentNode, isNodeShadowRoot } from '@datadog/browser-rum-core';\nimport { CENSORED_STRING_MARK } from '../../../constants';\nimport { shouldMaskNode } from '../privacy';\nvar serializedNodeIds = new WeakMap();\nexport function hasSerializedNode(node) {\n    return serializedNodeIds.has(node);\n}\nexport function nodeAndAncestorsHaveSerializedNode(node) {\n    var current = node;\n    while (current) {\n        if (!hasSerializedNode(current) && !isNodeShadowRoot(current)) {\n            return false;\n        }\n        current = getParentNode(current);\n    }\n    return true;\n}\nexport function getSerializedNodeId(node) {\n    return serializedNodeIds.get(node);\n}\nexport function setSerializedNodeId(node, serializeNodeId) {\n    serializedNodeIds.set(node, serializeNodeId);\n}\n/**\n * Get the element \"value\" to be serialized as an attribute or an input update record. It respects\n * the input privacy mode of the element.\n * PERFROMANCE OPTIMIZATION: Assumes that privacy level `HIDDEN` is never encountered because of earlier checks.\n */\nexport function getElementInputValue(element, nodePrivacyLevel) {\n    /*\n     BROWSER SPEC NOTE: <input>, <select>\n     For some <input> elements, the `value` is an exceptional property/attribute that has the\n     value synced between el.value and el.getAttribute()\n     input[type=button,checkbox,hidden,image,radio,reset,submit]\n     */\n    var tagName = element.tagName;\n    var value = element.value;\n    if (shouldMaskNode(element, nodePrivacyLevel)) {\n        var type = element.type;\n        if (tagName === 'INPUT' && (type === 'button' || type === 'submit' || type === 'reset')) {\n            // Overrule `MASK` privacy level for button-like element values, as they are used during replay\n            // to display their label. They can still be hidden via the \"hidden\" privacy attribute or class name.\n            return value;\n        }\n        else if (!value || tagName === 'OPTION') {\n            // <Option> value provides no benefit\n            return;\n        }\n        return CENSORED_STRING_MARK;\n    }\n    if (tagName === 'OPTION' || tagName === 'SELECT') {\n        return element.value;\n    }\n    if (tagName !== 'INPUT' && tagName !== 'TEXTAREA') {\n        return;\n    }\n    return value;\n}\nexport var URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")([^\"]*)\"|([^)]*))\\)/gm;\nexport var ABSOLUTE_URL = /^[A-Za-z]+:|^\\/\\//;\nexport var DATA_URI = /^data:.*,/i;\nexport function switchToAbsoluteUrl(cssText, cssHref) {\n    return cssText.replace(URL_IN_CSS_REF, function (matchingSubstring, singleQuote, urlWrappedInSingleQuotes, doubleQuote, urlWrappedInDoubleQuotes, urlNotWrappedInQuotes) {\n        var url = urlWrappedInSingleQuotes || urlWrappedInDoubleQuotes || urlNotWrappedInQuotes;\n        if (!cssHref || !url || ABSOLUTE_URL.test(url) || DATA_URI.test(url)) {\n            return matchingSubstring;\n        }\n        var quote = singleQuote || doubleQuote || '';\n        return \"url(\".concat(quote).concat(makeUrlAbsolute(url, cssHref)).concat(quote, \")\");\n    });\n}\nexport function makeUrlAbsolute(url, baseUrl) {\n    try {\n        return buildUrl(url, baseUrl).href;\n    }\n    catch (_) {\n        return url;\n    }\n}\nvar TAG_NAME_REGEX = /[^a-z1-6-_]/;\nexport function getValidTagName(tagName) {\n    var processedTagName = tagName.toLowerCase().trim();\n    if (TAG_NAME_REGEX.test(processedTagName)) {\n        // if the tag name is odd and we cannot extract\n        // anything from the string, then we return a\n        // generic div\n        return 'div';\n    }\n    return processedTagName;\n}\nexport function censoredImageForSize(width, height) {\n    return \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='\".concat(width, \"' height='\").concat(height, \"' style='background-color:silver'%3E%3C/svg%3E\");\n}\n","export var RecordType = {\n    FullSnapshot: 2,\n    IncrementalSnapshot: 3,\n    Meta: 4,\n    Focus: 6,\n    ViewEnd: 7,\n    VisualViewport: 8,\n    FrustrationRecord: 9,\n};\nexport var NodeType = {\n    Document: 0,\n    DocumentType: 1,\n    Element: 2,\n    Text: 3,\n    CDATA: 4,\n    DocumentFragment: 11,\n};\nexport var IncrementalSource = {\n    Mutation: 0,\n    MouseMove: 1,\n    MouseInteraction: 2,\n    Scroll: 3,\n    ViewportResize: 4,\n    Input: 5,\n    TouchMove: 6,\n    MediaInteraction: 7,\n    StyleSheetRule: 8,\n    // CanvasMutation : 9,\n    // Font : 10,\n};\nexport var MouseInteractionType = {\n    MouseUp: 0,\n    MouseDown: 1,\n    Click: 2,\n    ContextMenu: 3,\n    DblClick: 4,\n    Focus: 5,\n    Blur: 6,\n    TouchStart: 7,\n    TouchEnd: 9,\n};\nexport var MediaInteractionType = {\n    Play: 0,\n    Pause: 1,\n};\n","export function serializeStyleSheets(cssStyleSheets) {\n    if (cssStyleSheets === undefined || cssStyleSheets.length === 0) {\n        return undefined;\n    }\n    return cssStyleSheets.map(function (cssStyleSheet) {\n        var rules = cssStyleSheet.cssRules || cssStyleSheet.rules;\n        var cssRules = Array.from(rules, function (cssRule) { return cssRule.cssText; });\n        var styleSheet = {\n            cssRules: cssRules,\n            disabled: cssStyleSheet.disabled || undefined,\n            media: cssStyleSheet.media.length > 0 ? Array.from(cssStyleSheet.media) : undefined,\n        };\n        return styleSheet;\n    });\n}\n","import { startsWith } from '@datadog/browser-core';\nimport { STABLE_ATTRIBUTES, isLongDataUrl, sanitizeDataUrl } from '@datadog/browser-rum-core';\nimport { NodePrivacyLevel, PRIVACY_ATTR_NAME, CENSORED_STRING_MARK, CENSORED_IMG_MARK } from '../../../constants';\nimport { censoredImageForSize } from './serializationUtils';\nexport function serializeAttribute(element, nodePrivacyLevel, attributeName, configuration) {\n    if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n        // dup condition for direct access case\n        return null;\n    }\n    var attributeValue = element.getAttribute(attributeName);\n    if (nodePrivacyLevel === NodePrivacyLevel.MASK &&\n        attributeName !== PRIVACY_ATTR_NAME &&\n        !STABLE_ATTRIBUTES.includes(attributeName) &&\n        attributeName !== configuration.actionNameAttribute) {\n        var tagName = element.tagName;\n        switch (attributeName) {\n            // Mask Attribute text content\n            case 'title':\n            case 'alt':\n            case 'placeholder':\n                return CENSORED_STRING_MARK;\n        }\n        // mask image URLs\n        if (tagName === 'IMG' && (attributeName === 'src' || attributeName === 'srcset')) {\n            // generate image with similar dimension than the original to have the same rendering behaviour\n            var image = element;\n            if (image.naturalWidth > 0) {\n                return censoredImageForSize(image.naturalWidth, image.naturalHeight);\n            }\n            var _a = element.getBoundingClientRect(), width = _a.width, height = _a.height;\n            if (width > 0 || height > 0) {\n                return censoredImageForSize(width, height);\n            }\n            // if we can't get the image size, fallback to the censored image\n            return CENSORED_IMG_MARK;\n        }\n        // mask source URLs\n        if (tagName === 'SOURCE' && (attributeName === 'src' || attributeName === 'srcset')) {\n            return CENSORED_IMG_MARK;\n        }\n        // mask <a> URLs\n        if (tagName === 'A' && attributeName === 'href') {\n            return CENSORED_STRING_MARK;\n        }\n        // mask data-* attributes\n        if (attributeValue && startsWith(attributeName, 'data-')) {\n            // Exception: it's safe to reveal the `${PRIVACY_ATTR_NAME}` attr\n            return CENSORED_STRING_MARK;\n        }\n        // mask iframe srcdoc\n        if (tagName === 'IFRAME' && attributeName === 'srcdoc') {\n            return CENSORED_STRING_MARK;\n        }\n    }\n    if (!attributeValue || typeof attributeValue !== 'string') {\n        return attributeValue;\n    }\n    // Minimum Fix for customer.\n    if (isLongDataUrl(attributeValue)) {\n        return sanitizeDataUrl(attributeValue);\n    }\n    return attributeValue;\n}\n","import { ExperimentalFeature, isExperimentalFeatureEnabled, isSafari } from '@datadog/browser-core';\nimport { NodePrivacyLevel } from '../../../constants';\nimport { shouldMaskNode } from '../privacy';\nimport { getElementInputValue, switchToAbsoluteUrl, getValidTagName } from './serializationUtils';\nimport { serializeAttribute } from './serializeAttribute';\nexport function serializeAttributes(element, nodePrivacyLevel, options) {\n    var _a;\n    if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n        return {};\n    }\n    var safeAttrs = {};\n    var tagName = getValidTagName(element.tagName);\n    var doc = element.ownerDocument;\n    for (var i = 0; i < element.attributes.length; i += 1) {\n        var attribute = element.attributes.item(i);\n        var attributeName = attribute.name;\n        var attributeValue = serializeAttribute(element, nodePrivacyLevel, attributeName, options.configuration);\n        if (attributeValue !== null) {\n            safeAttrs[attributeName] = attributeValue;\n        }\n    }\n    if (element.value &&\n        (tagName === 'textarea' || tagName === 'select' || tagName === 'option' || tagName === 'input')) {\n        var formValue = getElementInputValue(element, nodePrivacyLevel);\n        if (formValue !== undefined) {\n            safeAttrs.value = formValue;\n        }\n    }\n    /**\n     * <Option> can be selected, which occurs if its `value` matches ancestor `<Select>.value`\n     */\n    if (tagName === 'option' && nodePrivacyLevel === NodePrivacyLevel.ALLOW) {\n        // For privacy=`MASK`, all the values would be the same, so skip.\n        var optionElement = element;\n        if (optionElement.selected) {\n            safeAttrs.selected = optionElement.selected;\n        }\n    }\n    // remote css\n    if (tagName === 'link') {\n        var stylesheet = Array.from(doc.styleSheets).find(function (s) { return s.href === element.href; });\n        var cssText = getCssRulesString(stylesheet);\n        if (cssText && stylesheet && !isExperimentalFeatureEnabled(ExperimentalFeature.DISABLE_REPLAY_INLINE_CSS)) {\n            safeAttrs._cssText = cssText;\n        }\n    }\n    // dynamic stylesheet\n    if (tagName === 'style' && element.sheet) {\n        var cssText = getCssRulesString(element.sheet);\n        if (cssText) {\n            safeAttrs._cssText = cssText;\n        }\n    }\n    /**\n     * Forms: input[type=checkbox,radio]\n     * The `checked` property for <input> is a little bit special:\n     * 1. el.checked is a setter that returns if truthy.\n     * 2. getAttribute returns the string value\n     * getAttribute('checked') does not sync with `Element.checked`, so use JS property\n     * NOTE: `checked` property exists on `HTMLInputElement`. For serializer assumptions, we check for type=radio|check.\n     */\n    var inputElement = element;\n    if (tagName === 'input' && (inputElement.type === 'radio' || inputElement.type === 'checkbox')) {\n        if (nodePrivacyLevel === NodePrivacyLevel.ALLOW) {\n            safeAttrs.checked = !!inputElement.checked;\n        }\n        else if (shouldMaskNode(inputElement, nodePrivacyLevel)) {\n            delete safeAttrs.checked;\n        }\n    }\n    /**\n     * Serialize the media playback state\n     */\n    if (tagName === 'audio' || tagName === 'video') {\n        var mediaElement = element;\n        safeAttrs.rr_mediaState = mediaElement.paused ? 'paused' : 'played';\n    }\n    /**\n     * Serialize the scroll state for each element only for full snapshot\n     */\n    var scrollTop;\n    var scrollLeft;\n    var serializationContext = options.serializationContext;\n    switch (serializationContext.status) {\n        case 0 /* SerializationContextStatus.INITIAL_FULL_SNAPSHOT */:\n            scrollTop = Math.round(element.scrollTop);\n            scrollLeft = Math.round(element.scrollLeft);\n            if (scrollTop || scrollLeft) {\n                serializationContext.elementsScrollPositions.set(element, { scrollTop: scrollTop, scrollLeft: scrollLeft });\n            }\n            break;\n        case 1 /* SerializationContextStatus.SUBSEQUENT_FULL_SNAPSHOT */:\n            if (serializationContext.elementsScrollPositions.has(element)) {\n                ;\n                (_a = serializationContext.elementsScrollPositions.get(element), scrollTop = _a.scrollTop, scrollLeft = _a.scrollLeft);\n            }\n            break;\n    }\n    if (scrollLeft) {\n        safeAttrs.rr_scrollLeft = scrollLeft;\n    }\n    if (scrollTop) {\n        safeAttrs.rr_scrollTop = scrollTop;\n    }\n    return safeAttrs;\n}\nexport function getCssRulesString(cssStyleSheet) {\n    if (!cssStyleSheet) {\n        return null;\n    }\n    var rules;\n    try {\n        rules = cssStyleSheet.rules || cssStyleSheet.cssRules;\n    }\n    catch (_a) {\n        // if css is protected by CORS we cannot access cssRules see: https://www.w3.org/TR/cssom-1/#the-cssstylesheet-interface\n    }\n    if (!rules) {\n        return null;\n    }\n    var styleSheetCssText = Array.from(rules, isSafari() ? getCssRuleStringForSafari : getCssRuleString).join('');\n    return switchToAbsoluteUrl(styleSheetCssText, cssStyleSheet.href);\n}\nfunction getCssRuleStringForSafari(rule) {\n    // Safari does not escape attribute selectors containing : properly\n    // https://bugs.webkit.org/show_bug.cgi?id=184604\n    if (isCSSStyleRule(rule) && rule.selectorText.includes(':')) {\n        // This regex replaces [foo:bar] by [foo\\\\:bar]\n        var escapeColon = /(\\[[\\w-]+[^\\\\])(:[^\\]]+\\])/g;\n        return rule.cssText.replace(escapeColon, '$1\\\\$2');\n    }\n    return getCssRuleString(rule);\n}\nfunction getCssRuleString(rule) {\n    // If it's an @import rule, try to inline sub-rules recursively with `getCssRulesString`. This\n    // operation can fail if the imported stylesheet is protected by CORS, in which case we fallback\n    // to the @import rule CSS text.\n    return (isCSSImportRule(rule) && getCssRulesString(rule.styleSheet)) || rule.cssText;\n}\nfunction isCSSImportRule(rule) {\n    return 'styleSheet' in rule;\n}\nfunction isCSSStyleRule(rule) {\n    return 'selectorText' in rule;\n}\n","import { isNodeShadowRoot, hasChildNodes, forEachChildNodes } from '@datadog/browser-rum-core';\nimport { assign } from '@datadog/browser-core';\nimport { NodeType } from '../../../types';\nimport { NodePrivacyLevel, PRIVACY_ATTR_NAME, PRIVACY_ATTR_VALUE_HIDDEN } from '../../../constants';\nimport { reducePrivacyLevel, getNodeSelfPrivacyLevel, getTextContent } from '../privacy';\nimport { getSerializedNodeId, getValidTagName, setSerializedNodeId } from './serializationUtils';\nimport { serializeStyleSheets } from './serializeStyleSheets';\nimport { serializeAttributes } from './serializeAttributes';\nexport function serializeNodeWithId(node, options) {\n    var serializedNode = serializeNode(node, options);\n    if (!serializedNode) {\n        return null;\n    }\n    // Try to reuse the previous id\n    var id = getSerializedNodeId(node) || generateNextId();\n    var serializedNodeWithId = serializedNode;\n    serializedNodeWithId.id = id;\n    setSerializedNodeId(node, id);\n    if (options.serializedNodeIds) {\n        options.serializedNodeIds.add(id);\n    }\n    return serializedNodeWithId;\n}\nvar _nextId = 1;\nexport function generateNextId() {\n    return _nextId++;\n}\nexport function serializeChildNodes(node, options) {\n    var result = [];\n    forEachChildNodes(node, function (childNode) {\n        var serializedChildNode = serializeNodeWithId(childNode, options);\n        if (serializedChildNode) {\n            result.push(serializedChildNode);\n        }\n    });\n    return result;\n}\nfunction serializeNode(node, options) {\n    switch (node.nodeType) {\n        case node.DOCUMENT_NODE:\n            return serializeDocumentNode(node, options);\n        case node.DOCUMENT_FRAGMENT_NODE:\n            return serializeDocumentFragmentNode(node, options);\n        case node.DOCUMENT_TYPE_NODE:\n            return serializeDocumentTypeNode(node);\n        case node.ELEMENT_NODE:\n            return serializeElementNode(node, options);\n        case node.TEXT_NODE:\n            return serializeTextNode(node, options);\n        case node.CDATA_SECTION_NODE:\n            return serializeCDataNode();\n    }\n}\nexport function serializeDocumentNode(document, options) {\n    return {\n        type: NodeType.Document,\n        childNodes: serializeChildNodes(document, options),\n        adoptedStyleSheets: serializeStyleSheets(document.adoptedStyleSheets),\n    };\n}\nfunction serializeDocumentFragmentNode(element, options) {\n    var isShadowRoot = isNodeShadowRoot(element);\n    if (isShadowRoot) {\n        options.serializationContext.shadowRootsController.addShadowRoot(element);\n    }\n    return {\n        type: NodeType.DocumentFragment,\n        childNodes: serializeChildNodes(element, options),\n        isShadowRoot: isShadowRoot,\n        adoptedStyleSheets: isShadowRoot ? serializeStyleSheets(element.adoptedStyleSheets) : undefined,\n    };\n}\nfunction serializeDocumentTypeNode(documentType) {\n    return {\n        type: NodeType.DocumentType,\n        name: documentType.name,\n        publicId: documentType.publicId,\n        systemId: documentType.systemId,\n    };\n}\n/**\n * Serializing Element nodes involves capturing:\n * 1. HTML ATTRIBUTES:\n * 2. JS STATE:\n * - scroll offsets\n * - Form fields (input value, checkbox checked, option selection, range)\n * - Canvas state,\n * - Media (video/audio) play mode + currentTime\n * - iframe contents\n * - webcomponents\n * 3. CUSTOM PROPERTIES:\n * - height+width for when `hidden` to cover the element\n * 4. EXCLUDED INTERACTION STATE:\n * - focus (possible, but not worth perf impact)\n * - hover (tracked only via mouse activity)\n * - fullscreen mode\n */\nfunction serializeElementNode(element, options) {\n    var _a;\n    var tagName = getValidTagName(element.tagName);\n    var isSVG = isSVGElement(element) || undefined;\n    // For performance reason, we don't use getNodePrivacyLevel directly: we leverage the\n    // parentNodePrivacyLevel option to avoid iterating over all parents\n    var nodePrivacyLevel = reducePrivacyLevel(getNodeSelfPrivacyLevel(element), options.parentNodePrivacyLevel);\n    if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n        var _b = element.getBoundingClientRect(), width = _b.width, height = _b.height;\n        return {\n            type: NodeType.Element,\n            tagName: tagName,\n            attributes: (_a = {\n                    rr_width: \"\".concat(width, \"px\"),\n                    rr_height: \"\".concat(height, \"px\")\n                },\n                _a[PRIVACY_ATTR_NAME] = PRIVACY_ATTR_VALUE_HIDDEN,\n                _a),\n            childNodes: [],\n            isSVG: isSVG,\n        };\n    }\n    // Ignore Elements like Script and some Link, Metas\n    if (nodePrivacyLevel === NodePrivacyLevel.IGNORE) {\n        return;\n    }\n    var attributes = serializeAttributes(element, nodePrivacyLevel, options);\n    var childNodes = [];\n    if (hasChildNodes(element) &&\n        // Do not serialize style children as the css rules are already in the _cssText attribute\n        tagName !== 'style') {\n        // OBJECT POOLING OPTIMIZATION:\n        // We should not create a new object systematically as it could impact performances. Try to reuse\n        // the same object as much as possible, and clone it only if we need to.\n        var childNodesSerializationOptions = void 0;\n        if (options.parentNodePrivacyLevel === nodePrivacyLevel && options.ignoreWhiteSpace === (tagName === 'head')) {\n            childNodesSerializationOptions = options;\n        }\n        else {\n            childNodesSerializationOptions = assign({}, options, {\n                parentNodePrivacyLevel: nodePrivacyLevel,\n                ignoreWhiteSpace: tagName === 'head',\n            });\n        }\n        childNodes = serializeChildNodes(element, childNodesSerializationOptions);\n    }\n    return {\n        type: NodeType.Element,\n        tagName: tagName,\n        attributes: attributes,\n        childNodes: childNodes,\n        isSVG: isSVG,\n    };\n}\nfunction isSVGElement(el) {\n    return el.tagName === 'svg' || el instanceof SVGElement;\n}\n/**\n * Text Nodes are dependant on Element nodes\n * Privacy levels are set on elements so we check the parentElement of a text node\n * for privacy level.\n */\nfunction serializeTextNode(textNode, options) {\n    var textContent = getTextContent(textNode, options.ignoreWhiteSpace || false, options.parentNodePrivacyLevel);\n    if (textContent === undefined) {\n        return;\n    }\n    return {\n        type: NodeType.Text,\n        textContent: textContent,\n    };\n}\nfunction serializeCDataNode() {\n    return {\n        type: NodeType.CDATA,\n        textContent: '',\n    };\n}\n","import { serializeNodeWithId } from './serializeNode';\nexport function serializeDocument(document, configuration, serializationContext) {\n    // We are sure that Documents are never ignored, so this function never returns null\n    return serializeNodeWithId(document, {\n        serializationContext: serializationContext,\n        parentNodePrivacyLevel: configuration.defaultPrivacyLevel,\n        configuration: configuration,\n    });\n}\n","import { isNodeShadowHost } from '@datadog/browser-rum-core';\nexport function isTouchEvent(event) {\n    return Boolean(event.changedTouches);\n}\nexport function getEventTarget(event) {\n    if (event.composed === true && isNodeShadowHost(event.target)) {\n        return event.composedPath()[0];\n    }\n    return event.target;\n}\n","/**\n * Browsers have not standardized various dimension properties. Mobile devices typically report\n * dimensions in reference to the visual viewport, while desktop uses the layout viewport. For example,\n * Mobile Chrome will change innerWidth when a pinch zoom takes place, while Chrome Desktop (mac) will not.\n *\n * With the new Viewport API, we now calculate and normalize dimension properties to the layout viewport.\n * If the VisualViewport API is not supported by a browser, it isn't reasonably possible to detect or normalize\n * which viewport is being measured. Therefore these exported functions will fallback to assuming that the layout\n * viewport is being measured by the browser\n */\n// Scrollbar widths vary across properties on different devices and browsers\nvar TOLERANCE = 25;\n/**\n * Use the Visual Viewport API's properties to measure scrollX/Y in reference to the layout viewport\n * in order to determine if window.scrollX/Y is measuring the layout or visual viewport.\n * This finding corresponds to which viewport mouseEvent.clientX/Y and window.innerWidth/Height measures.\n */\nfunction isVisualViewportFactoredIn(visualViewport) {\n    return (Math.abs(visualViewport.pageTop - visualViewport.offsetTop - window.scrollY) > TOLERANCE ||\n        Math.abs(visualViewport.pageLeft - visualViewport.offsetLeft - window.scrollX) > TOLERANCE);\n}\nexport var convertMouseEventToLayoutCoordinates = function (clientX, clientY) {\n    var visualViewport = window.visualViewport;\n    var normalized = {\n        layoutViewportX: clientX,\n        layoutViewportY: clientY,\n        visualViewportX: clientX,\n        visualViewportY: clientY,\n    };\n    if (!visualViewport) {\n        // On old browsers, we cannot normalize, so fallback to clientX/Y\n        return normalized;\n    }\n    else if (isVisualViewportFactoredIn(visualViewport)) {\n        // Typically Mobile Devices\n        normalized.layoutViewportX = Math.round(clientX + visualViewport.offsetLeft);\n        normalized.layoutViewportY = Math.round(clientY + visualViewport.offsetTop);\n    }\n    else {\n        // Typically Desktop Devices\n        normalized.visualViewportX = Math.round(clientX - visualViewport.offsetLeft);\n        normalized.visualViewportY = Math.round(clientY - visualViewport.offsetTop);\n    }\n    return normalized;\n};\nexport var getVisualViewport = function (visualViewport) { return ({\n    scale: visualViewport.scale,\n    offsetLeft: visualViewport.offsetLeft,\n    offsetTop: visualViewport.offsetTop,\n    pageLeft: visualViewport.pageLeft,\n    pageTop: visualViewport.pageTop,\n    height: visualViewport.height,\n    width: visualViewport.width,\n}); };\n","import { assign, timeStampNow } from '@datadog/browser-core';\nimport { RecordType } from '../../types';\nexport function assembleIncrementalSnapshot(source, data) {\n    return {\n        data: assign({\n            source: source,\n        }, data),\n        type: RecordType.IncrementalSnapshot,\n        timestamp: timeStampNow(),\n    };\n}\n","import { addEventListeners, addTelemetryDebug, DOM_EVENT, throttle } from '@datadog/browser-core';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { IncrementalSource } from '../../../types';\nimport { getEventTarget, isTouchEvent } from '../eventsUtils';\nimport { convertMouseEventToLayoutCoordinates } from '../viewports';\nimport { assembleIncrementalSnapshot } from '../assembly';\nvar MOUSE_MOVE_OBSERVER_THRESHOLD = 50;\nexport function trackMove(configuration, moveCb) {\n    var _a = throttle(function (event) {\n        var target = getEventTarget(event);\n        if (hasSerializedNode(target)) {\n            var coordinates = tryToComputeCoordinates(event);\n            if (!coordinates) {\n                return;\n            }\n            var position = {\n                id: getSerializedNodeId(target),\n                timeOffset: 0,\n                x: coordinates.x,\n                y: coordinates.y,\n            };\n            moveCb(assembleIncrementalSnapshot(isTouchEvent(event) ? IncrementalSource.TouchMove : IncrementalSource.MouseMove, { positions: [position] }));\n        }\n    }, MOUSE_MOVE_OBSERVER_THRESHOLD, {\n        trailing: false,\n    }), updatePosition = _a.throttled, cancelThrottle = _a.cancel;\n    var removeListener = addEventListeners(configuration, document, [DOM_EVENT.MOUSE_MOVE, DOM_EVENT.TOUCH_MOVE], updatePosition, {\n        capture: true,\n        passive: true,\n    }).stop;\n    return {\n        stop: function () {\n            removeListener();\n            cancelThrottle();\n        },\n    };\n}\nexport function tryToComputeCoordinates(event) {\n    var _a = isTouchEvent(event) ? event.changedTouches[0] : event, x = _a.clientX, y = _a.clientY;\n    if (window.visualViewport) {\n        var _b = convertMouseEventToLayoutCoordinates(x, y), visualViewportX = _b.visualViewportX, visualViewportY = _b.visualViewportY;\n        x = visualViewportX;\n        y = visualViewportY;\n    }\n    if (!Number.isFinite(x) || !Number.isFinite(y)) {\n        if (event.isTrusted) {\n            addTelemetryDebug('mouse/touch event without x/y');\n        }\n        return undefined;\n    }\n    return { x: x, y: y };\n}\n","var _a;\nimport { assign, addEventListeners, DOM_EVENT } from '@datadog/browser-core';\nimport { NodePrivacyLevel } from '../../../constants';\nimport { IncrementalSource, MouseInteractionType } from '../../../types';\nimport { assembleIncrementalSnapshot } from '../assembly';\nimport { getEventTarget } from '../eventsUtils';\nimport { getNodePrivacyLevel } from '../privacy';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { tryToComputeCoordinates } from './trackMove';\nvar eventTypeToMouseInteraction = (_a = {},\n    // Listen for pointerup DOM events instead of mouseup for MouseInteraction/MouseUp records. This\n    // allows to reference such records from Frustration records.\n    //\n    // In the context of supporting Mobile Session Replay, we introduced `PointerInteraction` records\n    // used by the Mobile SDKs in place of `MouseInteraction`. In the future, we should replace\n    // `MouseInteraction` by `PointerInteraction` in the Browser SDK so we have an uniform way to\n    // convey such interaction. This would cleanly solve the issue since we would have\n    // `PointerInteraction/Up` records that we could reference from `Frustration` records.\n    _a[DOM_EVENT.POINTER_UP] = MouseInteractionType.MouseUp,\n    _a[DOM_EVENT.MOUSE_DOWN] = MouseInteractionType.MouseDown,\n    _a[DOM_EVENT.CLICK] = MouseInteractionType.Click,\n    _a[DOM_EVENT.CONTEXT_MENU] = MouseInteractionType.ContextMenu,\n    _a[DOM_EVENT.DBL_CLICK] = MouseInteractionType.DblClick,\n    _a[DOM_EVENT.FOCUS] = MouseInteractionType.Focus,\n    _a[DOM_EVENT.BLUR] = MouseInteractionType.Blur,\n    _a[DOM_EVENT.TOUCH_START] = MouseInteractionType.TouchStart,\n    _a[DOM_EVENT.TOUCH_END] = MouseInteractionType.TouchEnd,\n    _a);\nexport function trackMouseInteraction(configuration, mouseInteractionCb, recordIds) {\n    var handler = function (event) {\n        var target = getEventTarget(event);\n        if (getNodePrivacyLevel(target, configuration.defaultPrivacyLevel) === NodePrivacyLevel.HIDDEN ||\n            !hasSerializedNode(target)) {\n            return;\n        }\n        var id = getSerializedNodeId(target);\n        var type = eventTypeToMouseInteraction[event.type];\n        var interaction;\n        if (type !== MouseInteractionType.Blur && type !== MouseInteractionType.Focus) {\n            var coordinates = tryToComputeCoordinates(event);\n            if (!coordinates) {\n                return;\n            }\n            interaction = { id: id, type: type, x: coordinates.x, y: coordinates.y };\n        }\n        else {\n            interaction = { id: id, type: type };\n        }\n        var record = assign({ id: recordIds.getIdForEvent(event) }, assembleIncrementalSnapshot(IncrementalSource.MouseInteraction, interaction));\n        mouseInteractionCb(record);\n    };\n    return addEventListeners(configuration, document, Object.keys(eventTypeToMouseInteraction), handler, {\n        capture: true,\n        passive: true,\n    });\n}\n","import { DOM_EVENT, throttle, addEventListener } from '@datadog/browser-core';\nimport { getScrollX, getScrollY } from '@datadog/browser-rum-core';\nimport { getEventTarget } from '../eventsUtils';\nimport { getNodePrivacyLevel } from '../privacy';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { IncrementalSource } from '../../../types';\nimport { NodePrivacyLevel } from '../../../constants';\nimport { assembleIncrementalSnapshot } from '../assembly';\nvar SCROLL_OBSERVER_THRESHOLD = 100;\nexport function trackScroll(configuration, scrollCb, elementsScrollPositions, target) {\n    if (target === void 0) { target = document; }\n    var _a = throttle(function (event) {\n        var target = getEventTarget(event);\n        if (!target ||\n            getNodePrivacyLevel(target, configuration.defaultPrivacyLevel) === NodePrivacyLevel.HIDDEN ||\n            !hasSerializedNode(target)) {\n            return;\n        }\n        var id = getSerializedNodeId(target);\n        var scrollPositions = target === document\n            ? {\n                scrollTop: getScrollY(),\n                scrollLeft: getScrollX(),\n            }\n            : {\n                scrollTop: Math.round(target.scrollTop),\n                scrollLeft: Math.round(target.scrollLeft),\n            };\n        elementsScrollPositions.set(target, scrollPositions);\n        scrollCb(assembleIncrementalSnapshot(IncrementalSource.Scroll, {\n            id: id,\n            x: scrollPositions.scrollLeft,\n            y: scrollPositions.scrollTop,\n        }));\n    }, SCROLL_OBSERVER_THRESHOLD), updatePosition = _a.throttled, cancelThrottle = _a.cancel;\n    var removeListener = addEventListener(configuration, target, DOM_EVENT.SCROLL, updatePosition, {\n        capture: true,\n        passive: true,\n    }).stop;\n    return {\n        stop: function () {\n            removeListener();\n            cancelThrottle();\n        },\n    };\n}\n","import { throttle, DOM_EVENT, addEventListeners, timeStampNow, noop } from '@datadog/browser-core';\nimport { initViewportObservable } from '@datadog/browser-rum-core';\nimport { IncrementalSource, RecordType } from '../../../types';\nimport { getVisualViewport } from '../viewports';\nimport { assembleIncrementalSnapshot } from '../assembly';\nvar VISUAL_VIEWPORT_OBSERVER_THRESHOLD = 200;\nexport function trackViewportResize(configuration, viewportResizeCb) {\n    var viewportResizeSubscription = initViewportObservable(configuration).subscribe(function (data) {\n        viewportResizeCb(assembleIncrementalSnapshot(IncrementalSource.ViewportResize, data));\n    });\n    return {\n        stop: function () {\n            viewportResizeSubscription.unsubscribe();\n        },\n    };\n}\nexport function tackVisualViewportResize(configuration, visualViewportResizeCb) {\n    var visualViewport = window.visualViewport;\n    if (!visualViewport) {\n        return { stop: noop };\n    }\n    var _a = throttle(function () {\n        visualViewportResizeCb({\n            data: getVisualViewport(visualViewport),\n            type: RecordType.VisualViewport,\n            timestamp: timeStampNow(),\n        });\n    }, VISUAL_VIEWPORT_OBSERVER_THRESHOLD, {\n        trailing: false,\n    }), updateDimension = _a.throttled, cancelThrottle = _a.cancel;\n    var removeListener = addEventListeners(configuration, visualViewport, [DOM_EVENT.RESIZE, DOM_EVENT.SCROLL], updateDimension, {\n        capture: true,\n        passive: true,\n    }).stop;\n    return {\n        stop: function () {\n            removeListener();\n            cancelThrottle();\n        },\n    };\n}\n","import { DOM_EVENT, addEventListeners } from '@datadog/browser-core';\nimport { NodePrivacyLevel } from '../../../constants';\nimport { IncrementalSource, MediaInteractionType } from '../../../types';\nimport { getEventTarget } from '../eventsUtils';\nimport { getNodePrivacyLevel } from '../privacy';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { assembleIncrementalSnapshot } from '../assembly';\nexport function trackMediaInteraction(configuration, mediaInteractionCb) {\n    return addEventListeners(configuration, document, [DOM_EVENT.PLAY, DOM_EVENT.PAUSE], function (event) {\n        var target = getEventTarget(event);\n        if (!target ||\n            getNodePrivacyLevel(target, configuration.defaultPrivacyLevel) === NodePrivacyLevel.HIDDEN ||\n            !hasSerializedNode(target)) {\n            return;\n        }\n        mediaInteractionCb(assembleIncrementalSnapshot(IncrementalSource.MediaInteraction, {\n            id: getSerializedNodeId(target),\n            type: event.type === DOM_EVENT.PLAY ? MediaInteractionType.Play : MediaInteractionType.Pause,\n        }));\n    }, {\n        capture: true,\n        passive: true,\n    });\n}\n","import { instrumentMethod } from '@datadog/browser-core';\nimport { IncrementalSource } from '../../../types';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { assembleIncrementalSnapshot } from '../assembly';\nexport function trackStyleSheet(styleSheetCb) {\n    function checkStyleSheetAndCallback(styleSheet, callback) {\n        if (styleSheet && hasSerializedNode(styleSheet.ownerNode)) {\n            callback(getSerializedNodeId(styleSheet.ownerNode));\n        }\n    }\n    var instrumentationStoppers = [\n        instrumentMethod(CSSStyleSheet.prototype, 'insertRule', function (_a) {\n            var styleSheet = _a.target, _b = _a.parameters, rule = _b[0], index = _b[1];\n            checkStyleSheetAndCallback(styleSheet, function (id) {\n                return styleSheetCb(assembleIncrementalSnapshot(IncrementalSource.StyleSheetRule, {\n                    id: id,\n                    adds: [{ rule: rule, index: index }],\n                }));\n            });\n        }),\n        instrumentMethod(CSSStyleSheet.prototype, 'deleteRule', function (_a) {\n            var styleSheet = _a.target, index = _a.parameters[0];\n            checkStyleSheetAndCallback(styleSheet, function (id) {\n                return styleSheetCb(assembleIncrementalSnapshot(IncrementalSource.StyleSheetRule, {\n                    id: id,\n                    removes: [{ index: index }],\n                }));\n            });\n        }),\n    ];\n    if (typeof CSSGroupingRule !== 'undefined') {\n        instrumentGroupingCSSRuleClass(CSSGroupingRule);\n    }\n    else {\n        instrumentGroupingCSSRuleClass(CSSMediaRule);\n        instrumentGroupingCSSRuleClass(CSSSupportsRule);\n    }\n    function instrumentGroupingCSSRuleClass(cls) {\n        instrumentationStoppers.push(instrumentMethod(cls.prototype, 'insertRule', function (_a) {\n            var styleSheet = _a.target, _b = _a.parameters, rule = _b[0], index = _b[1];\n            checkStyleSheetAndCallback(styleSheet.parentStyleSheet, function (id) {\n                var path = getPathToNestedCSSRule(styleSheet);\n                if (path) {\n                    path.push(index || 0);\n                    styleSheetCb(assembleIncrementalSnapshot(IncrementalSource.StyleSheetRule, {\n                        id: id,\n                        adds: [{ rule: rule, index: path }],\n                    }));\n                }\n            });\n        }), instrumentMethod(cls.prototype, 'deleteRule', function (_a) {\n            var styleSheet = _a.target, index = _a.parameters[0];\n            checkStyleSheetAndCallback(styleSheet.parentStyleSheet, function (id) {\n                var path = getPathToNestedCSSRule(styleSheet);\n                if (path) {\n                    path.push(index);\n                    styleSheetCb(assembleIncrementalSnapshot(IncrementalSource.StyleSheetRule, {\n                        id: id,\n                        removes: [{ index: path }],\n                    }));\n                }\n            });\n        }));\n    }\n    return {\n        stop: function () {\n            instrumentationStoppers.forEach(function (stopper) { return stopper.stop(); });\n        },\n    };\n}\nexport function getPathToNestedCSSRule(rule) {\n    var path = [];\n    var currentRule = rule;\n    while (currentRule.parentRule) {\n        var rules_1 = Array.from(currentRule.parentRule.cssRules);\n        var index_1 = rules_1.indexOf(currentRule);\n        path.unshift(index_1);\n        currentRule = currentRule.parentRule;\n    }\n    // A rule may not be attached to a stylesheet\n    if (!currentRule.parentStyleSheet) {\n        return;\n    }\n    var rules = Array.from(currentRule.parentStyleSheet.cssRules);\n    var index = rules.indexOf(currentRule);\n    path.unshift(index);\n    return path;\n}\n","import { DOM_EVENT, addEventListeners, timeStampNow } from '@datadog/browser-core';\nimport { RecordType } from '../../../types';\nexport function trackFocus(configuration, focusCb) {\n    return addEventListeners(configuration, window, [DOM_EVENT.FOCUS, DOM_EVENT.BLUR], function () {\n        focusCb({\n            data: { has_focus: document.hasFocus() },\n            type: RecordType.Focus,\n            timestamp: timeStampNow(),\n        });\n    });\n}\n","import { RecordType } from '../../../types';\nexport function trackFrustration(lifeCycle, frustrationCb, recordIds) {\n    var frustrationSubscription = lifeCycle.subscribe(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, function (data) {\n        var _a, _b, _c;\n        if (data.rawRumEvent.type === \"action\" /* RumEventType.ACTION */ &&\n            data.rawRumEvent.action.type === \"click\" /* ActionType.CLICK */ &&\n            ((_b = (_a = data.rawRumEvent.action.frustration) === null || _a === void 0 ? void 0 : _a.type) === null || _b === void 0 ? void 0 : _b.length) &&\n            'events' in data.domainContext &&\n            ((_c = data.domainContext.events) === null || _c === void 0 ? void 0 : _c.length)) {\n            frustrationCb({\n                timestamp: data.rawRumEvent.date,\n                type: RecordType.FrustrationRecord,\n                data: {\n                    frustrationTypes: data.rawRumEvent.action.frustration.type,\n                    recordIds: data.domainContext.events.map(function (e) { return recordIds.getIdForEvent(e); }),\n                },\n            });\n        }\n    });\n    return {\n        stop: function () {\n            frustrationSubscription.unsubscribe();\n        },\n    };\n}\n","import { timeStampNow } from '@datadog/browser-core';\nimport { RecordType } from '../../../types';\nexport function trackViewEnd(lifeCycle, viewEndCb) {\n    var viewEndSubscription = lifeCycle.subscribe(5 /* LifeCycleEventType.VIEW_ENDED */, function () {\n        viewEndCb({\n            timestamp: timeStampNow(),\n            type: RecordType.ViewEnd,\n        });\n    });\n    return {\n        stop: function () {\n            viewEndSubscription.unsubscribe();\n        },\n    };\n}\n","import { instrumentSetter, assign, DOM_EVENT, addEventListeners, forEach, noop } from '@datadog/browser-core';\nimport { cssEscape } from '@datadog/browser-rum-core';\nimport { NodePrivacyLevel } from '../../../constants';\nimport { IncrementalSource } from '../../../types';\nimport { getEventTarget } from '../eventsUtils';\nimport { getNodePrivacyLevel, shouldMaskNode } from '../privacy';\nimport { getElementInputValue, getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { assembleIncrementalSnapshot } from '../assembly';\nexport function trackInput(configuration, inputCb, target) {\n    if (target === void 0) { target = document; }\n    var defaultPrivacyLevel = configuration.defaultPrivacyLevel;\n    var lastInputStateMap = new WeakMap();\n    var isShadowRoot = target !== document;\n    var stopEventListeners = addEventListeners(configuration, target, \n    // The 'input' event bubbles across shadow roots, so we don't have to listen for it on shadow\n    // roots since it will be handled by the event listener that we did add to the document. Only\n    // the 'change' event is blocked and needs to be handled on shadow roots.\n    isShadowRoot ? [DOM_EVENT.CHANGE] : [DOM_EVENT.INPUT, DOM_EVENT.CHANGE], function (event) {\n        var target = getEventTarget(event);\n        if (target instanceof HTMLInputElement ||\n            target instanceof HTMLTextAreaElement ||\n            target instanceof HTMLSelectElement) {\n            onElementChange(target);\n        }\n    }, {\n        capture: true,\n        passive: true,\n    }).stop;\n    var stopPropertySetterInstrumentation;\n    if (!isShadowRoot) {\n        var instrumentationStoppers_1 = [\n            instrumentSetter(HTMLInputElement.prototype, 'value', onElementChange),\n            instrumentSetter(HTMLInputElement.prototype, 'checked', onElementChange),\n            instrumentSetter(HTMLSelectElement.prototype, 'value', onElementChange),\n            instrumentSetter(HTMLTextAreaElement.prototype, 'value', onElementChange),\n            instrumentSetter(HTMLSelectElement.prototype, 'selectedIndex', onElementChange),\n        ];\n        stopPropertySetterInstrumentation = function () {\n            instrumentationStoppers_1.forEach(function (stopper) { return stopper.stop(); });\n        };\n    }\n    else {\n        stopPropertySetterInstrumentation = noop;\n    }\n    return {\n        stop: function () {\n            stopPropertySetterInstrumentation();\n            stopEventListeners();\n        },\n    };\n    function onElementChange(target) {\n        var nodePrivacyLevel = getNodePrivacyLevel(target, defaultPrivacyLevel);\n        if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n            return;\n        }\n        var type = target.type;\n        var inputState;\n        if (type === 'radio' || type === 'checkbox') {\n            if (shouldMaskNode(target, nodePrivacyLevel)) {\n                return;\n            }\n            inputState = { isChecked: target.checked };\n        }\n        else {\n            var value = getElementInputValue(target, nodePrivacyLevel);\n            if (value === undefined) {\n                return;\n            }\n            inputState = { text: value };\n        }\n        // Can be multiple changes on the same node within the same batched mutation observation.\n        cbWithDedup(target, inputState);\n        // If a radio was checked, other radios with the same name attribute will be unchecked.\n        var name = target.name;\n        if (type === 'radio' && name && target.checked) {\n            forEach(document.querySelectorAll(\"input[type=\\\"radio\\\"][name=\\\"\".concat(cssEscape(name), \"\\\"]\")), function (el) {\n                if (el !== target) {\n                    // TODO: Consider the privacy implications for various differing input privacy levels\n                    cbWithDedup(el, { isChecked: false });\n                }\n            });\n        }\n    }\n    /**\n     * There can be multiple changes on the same node within the same batched mutation observation.\n     */\n    function cbWithDedup(target, inputState) {\n        if (!hasSerializedNode(target)) {\n            return;\n        }\n        var lastInputState = lastInputStateMap.get(target);\n        if (!lastInputState ||\n            lastInputState.text !== inputState.text ||\n            lastInputState.isChecked !== inputState.isChecked) {\n            lastInputStateMap.set(target, inputState);\n            inputCb(assembleIncrementalSnapshot(IncrementalSource.Input, assign({\n                id: getSerializedNodeId(target),\n            }, inputState)));\n        }\n    }\n}\n","import { noop, monitor } from '@datadog/browser-core';\n/**\n * Maximum duration to wait before processing mutations. If the browser is idle, mutations will be\n * processed more quickly. If the browser is busy executing small tasks (ex: rendering frames), the\n * mutations will wait MUTATION_PROCESS_MAX_DELAY milliseconds before being processed. If the\n * browser is busy executing a longer task, mutations will be processed after this task.\n */\nvar MUTATION_PROCESS_MAX_DELAY = 100;\nexport function createMutationBatch(processMutationBatch) {\n    var cancelScheduledFlush = noop;\n    var pendingMutations = [];\n    function flush() {\n        cancelScheduledFlush();\n        processMutationBatch(pendingMutations);\n        pendingMutations = [];\n    }\n    return {\n        addMutations: function (mutations) {\n            if (pendingMutations.length === 0) {\n                cancelScheduledFlush = requestIdleCallback(flush, { timeout: MUTATION_PROCESS_MAX_DELAY });\n            }\n            pendingMutations.push.apply(pendingMutations, mutations);\n        },\n        flush: flush,\n        stop: function () {\n            cancelScheduledFlush();\n        },\n    };\n}\n/**\n * Use 'requestIdleCallback' when available: it will throttle the mutation processing if the\n * browser is busy rendering frames (ex: when frames are below 60fps). When not available, the\n * fallback on 'requestAnimationFrame' will still ensure the mutations are processed after any\n * browser rendering process (Layout, Recalculate Style, etc.), so we can serialize DOM nodes efficiently.\n *\n * Note: check both 'requestIdleCallback' and 'cancelIdleCallback' existence because some polyfills only implement 'requestIdleCallback'.\n */\nfunction requestIdleCallback(callback, opts) {\n    if (window.requestIdleCallback && window.cancelIdleCallback) {\n        var id_1 = window.requestIdleCallback(monitor(callback), opts);\n        return function () { return window.cancelIdleCallback(id_1); };\n    }\n    var id = window.requestAnimationFrame(monitor(callback));\n    return function () { return window.cancelAnimationFrame(id); };\n}\n","import { monitor, noop } from '@datadog/browser-core';\nimport { isNodeShadowHost, getMutationObserverConstructor, getParentNode, forEachChildNodes, } from '@datadog/browser-rum-core';\nimport { NodePrivacyLevel } from '../../../constants';\nimport { IncrementalSource } from '../../../types';\nimport { getNodePrivacyLevel, getTextContent } from '../privacy';\nimport { getElementInputValue, getSerializedNodeId, hasSerializedNode, nodeAndAncestorsHaveSerializedNode, serializeNodeWithId, serializeAttribute, } from '../serialization';\nimport { createMutationBatch } from '../mutationBatch';\nimport { assembleIncrementalSnapshot } from '../assembly';\n/**\n * Buffers and aggregate mutations generated by a MutationObserver into MutationPayload\n */\nexport function trackMutation(mutationCallback, configuration, shadowRootsController, target) {\n    var MutationObserver = getMutationObserverConstructor();\n    if (!MutationObserver) {\n        return { stop: noop, flush: noop };\n    }\n    var mutationBatch = createMutationBatch(function (mutations) {\n        processMutations(mutations.concat(observer.takeRecords()), mutationCallback, configuration, shadowRootsController);\n    });\n    var observer = new MutationObserver(monitor(mutationBatch.addMutations));\n    observer.observe(target, {\n        attributeOldValue: true,\n        attributes: true,\n        characterData: true,\n        characterDataOldValue: true,\n        childList: true,\n        subtree: true,\n    });\n    return {\n        stop: function () {\n            observer.disconnect();\n            mutationBatch.stop();\n        },\n        flush: function () {\n            mutationBatch.flush();\n        },\n    };\n}\nfunction processMutations(mutations, mutationCallback, configuration, shadowRootsController) {\n    var nodePrivacyLevelCache = new Map();\n    mutations\n        .filter(function (mutation) { return mutation.type === 'childList'; })\n        .forEach(function (mutation) {\n        mutation.removedNodes.forEach(function (removedNode) {\n            traverseRemovedShadowDom(removedNode, shadowRootsController.removeShadowRoot);\n        });\n    });\n    // Discard any mutation with a 'target' node that:\n    // * isn't injected in the current document or isn't known/serialized yet: those nodes are likely\n    // part of a mutation occurring in a parent Node\n    // * should be hidden or ignored\n    var filteredMutations = mutations.filter(function (mutation) {\n        return mutation.target.isConnected &&\n            nodeAndAncestorsHaveSerializedNode(mutation.target) &&\n            getNodePrivacyLevel(mutation.target, configuration.defaultPrivacyLevel, nodePrivacyLevelCache) !==\n                NodePrivacyLevel.HIDDEN;\n    });\n    var _a = processChildListMutations(filteredMutations.filter(function (mutation) { return mutation.type === 'childList'; }), configuration, shadowRootsController, nodePrivacyLevelCache), adds = _a.adds, removes = _a.removes, hasBeenSerialized = _a.hasBeenSerialized;\n    var texts = processCharacterDataMutations(filteredMutations.filter(function (mutation) {\n        return mutation.type === 'characterData' && !hasBeenSerialized(mutation.target);\n    }), configuration, nodePrivacyLevelCache);\n    var attributes = processAttributesMutations(filteredMutations.filter(function (mutation) {\n        return mutation.type === 'attributes' && !hasBeenSerialized(mutation.target);\n    }), configuration, nodePrivacyLevelCache);\n    if (!texts.length && !attributes.length && !removes.length && !adds.length) {\n        return;\n    }\n    mutationCallback(assembleIncrementalSnapshot(IncrementalSource.Mutation, { adds: adds, removes: removes, texts: texts, attributes: attributes }));\n}\nfunction processChildListMutations(mutations, configuration, shadowRootsController, nodePrivacyLevelCache) {\n    // First, we iterate over mutations to collect:\n    //\n    // * nodes that have been added in the document and not removed by a subsequent mutation\n    // * nodes that have been removed from the document but were not added in a previous mutation\n    //\n    // For this second category, we also collect their previous parent (mutation.target) because we'll\n    // need it to emit a 'remove' mutation.\n    //\n    // Those two categories may overlap: if a node moved from a position to another, it is reported as\n    // two mutation records, one with a \"removedNodes\" and the other with \"addedNodes\". In this case,\n    // the node will be in both sets.\n    var addedAndMovedNodes = new Set();\n    var removedNodes = new Map();\n    var _loop_1 = function (mutation) {\n        mutation.addedNodes.forEach(function (node) {\n            addedAndMovedNodes.add(node);\n        });\n        mutation.removedNodes.forEach(function (node) {\n            if (!addedAndMovedNodes.has(node)) {\n                removedNodes.set(node, mutation.target);\n            }\n            addedAndMovedNodes.delete(node);\n        });\n    };\n    for (var _i = 0, mutations_1 = mutations; _i < mutations_1.length; _i++) {\n        var mutation = mutations_1[_i];\n        _loop_1(mutation);\n    }\n    // Then, we sort nodes that are still in the document by topological order, for two reasons:\n    //\n    // * We will serialize each added nodes with their descendants. We don't want to serialize a node\n    // twice, so we need to iterate over the parent nodes first and skip any node that is contained in\n    // a precedent node.\n    //\n    // * To emit \"add\" mutations, we need references to the parent and potential next sibling of each\n    // added node. So we need to iterate over the parent nodes first, and when multiple nodes are\n    // siblings, we want to iterate from last to first. This will ensure that any \"next\" node is\n    // already serialized and have an id.\n    var sortedAddedAndMovedNodes = Array.from(addedAndMovedNodes);\n    sortAddedAndMovedNodes(sortedAddedAndMovedNodes);\n    // Then, we iterate over our sorted node sets to emit mutations. We collect the newly serialized\n    // node ids in a set to be able to skip subsequent related mutations.\n    var serializedNodeIds = new Set();\n    var addedNodeMutations = [];\n    for (var _a = 0, sortedAddedAndMovedNodes_1 = sortedAddedAndMovedNodes; _a < sortedAddedAndMovedNodes_1.length; _a++) {\n        var node = sortedAddedAndMovedNodes_1[_a];\n        if (hasBeenSerialized(node)) {\n            continue;\n        }\n        var parentNodePrivacyLevel = getNodePrivacyLevel(node.parentNode, configuration.defaultPrivacyLevel, nodePrivacyLevelCache);\n        if (parentNodePrivacyLevel === NodePrivacyLevel.HIDDEN || parentNodePrivacyLevel === NodePrivacyLevel.IGNORE) {\n            continue;\n        }\n        var serializedNode = serializeNodeWithId(node, {\n            serializedNodeIds: serializedNodeIds,\n            parentNodePrivacyLevel: parentNodePrivacyLevel,\n            serializationContext: { status: 2 /* SerializationContextStatus.MUTATION */, shadowRootsController: shadowRootsController },\n            configuration: configuration,\n        });\n        if (!serializedNode) {\n            continue;\n        }\n        var parentNode = getParentNode(node);\n        addedNodeMutations.push({\n            nextId: getNextSibling(node),\n            parentId: getSerializedNodeId(parentNode),\n            node: serializedNode,\n        });\n    }\n    // Finally, we emit remove mutations.\n    var removedNodeMutations = [];\n    removedNodes.forEach(function (parent, node) {\n        if (hasSerializedNode(node)) {\n            removedNodeMutations.push({\n                parentId: getSerializedNodeId(parent),\n                id: getSerializedNodeId(node),\n            });\n        }\n    });\n    return { adds: addedNodeMutations, removes: removedNodeMutations, hasBeenSerialized: hasBeenSerialized };\n    function hasBeenSerialized(node) {\n        return hasSerializedNode(node) && serializedNodeIds.has(getSerializedNodeId(node));\n    }\n    function getNextSibling(node) {\n        var nextSibling = node.nextSibling;\n        while (nextSibling) {\n            if (hasSerializedNode(nextSibling)) {\n                return getSerializedNodeId(nextSibling);\n            }\n            nextSibling = nextSibling.nextSibling;\n        }\n        return null;\n    }\n}\nfunction processCharacterDataMutations(mutations, configuration, nodePrivacyLevelCache) {\n    var _a;\n    var textMutations = [];\n    // Deduplicate mutations based on their target node\n    var handledNodes = new Set();\n    var filteredMutations = mutations.filter(function (mutation) {\n        if (handledNodes.has(mutation.target)) {\n            return false;\n        }\n        handledNodes.add(mutation.target);\n        return true;\n    });\n    // Emit mutations\n    for (var _i = 0, filteredMutations_1 = filteredMutations; _i < filteredMutations_1.length; _i++) {\n        var mutation = filteredMutations_1[_i];\n        var value = mutation.target.textContent;\n        if (value === mutation.oldValue) {\n            continue;\n        }\n        var parentNodePrivacyLevel = getNodePrivacyLevel(getParentNode(mutation.target), configuration.defaultPrivacyLevel, nodePrivacyLevelCache);\n        if (parentNodePrivacyLevel === NodePrivacyLevel.HIDDEN || parentNodePrivacyLevel === NodePrivacyLevel.IGNORE) {\n            continue;\n        }\n        textMutations.push({\n            id: getSerializedNodeId(mutation.target),\n            // TODO: pass a valid \"ignoreWhiteSpace\" argument\n            value: (_a = getTextContent(mutation.target, false, parentNodePrivacyLevel)) !== null && _a !== void 0 ? _a : null,\n        });\n    }\n    return textMutations;\n}\nfunction processAttributesMutations(mutations, configuration, nodePrivacyLevelCache) {\n    var attributeMutations = [];\n    // Deduplicate mutations based on their target node and changed attribute\n    var handledElements = new Map();\n    var filteredMutations = mutations.filter(function (mutation) {\n        var handledAttributes = handledElements.get(mutation.target);\n        if (handledAttributes === null || handledAttributes === void 0 ? void 0 : handledAttributes.has(mutation.attributeName)) {\n            return false;\n        }\n        if (!handledAttributes) {\n            handledElements.set(mutation.target, new Set([mutation.attributeName]));\n        }\n        else {\n            handledAttributes.add(mutation.attributeName);\n        }\n        return true;\n    });\n    // Emit mutations\n    var emittedMutations = new Map();\n    for (var _i = 0, filteredMutations_2 = filteredMutations; _i < filteredMutations_2.length; _i++) {\n        var mutation = filteredMutations_2[_i];\n        var uncensoredValue = mutation.target.getAttribute(mutation.attributeName);\n        if (uncensoredValue === mutation.oldValue) {\n            continue;\n        }\n        var privacyLevel = getNodePrivacyLevel(mutation.target, configuration.defaultPrivacyLevel, nodePrivacyLevelCache);\n        var attributeValue = serializeAttribute(mutation.target, privacyLevel, mutation.attributeName, configuration);\n        var transformedValue = void 0;\n        if (mutation.attributeName === 'value') {\n            var inputValue = getElementInputValue(mutation.target, privacyLevel);\n            if (inputValue === undefined) {\n                continue;\n            }\n            transformedValue = inputValue;\n        }\n        else if (typeof attributeValue === 'string') {\n            transformedValue = attributeValue;\n        }\n        else {\n            transformedValue = null;\n        }\n        var emittedMutation = emittedMutations.get(mutation.target);\n        if (!emittedMutation) {\n            emittedMutation = {\n                id: getSerializedNodeId(mutation.target),\n                attributes: {},\n            };\n            attributeMutations.push(emittedMutation);\n            emittedMutations.set(mutation.target, emittedMutation);\n        }\n        emittedMutation.attributes[mutation.attributeName] = transformedValue;\n    }\n    return attributeMutations;\n}\nexport function sortAddedAndMovedNodes(nodes) {\n    nodes.sort(function (a, b) {\n        var position = a.compareDocumentPosition(b);\n        /* eslint-disable no-bitwise */\n        if (position & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n            return -1;\n        }\n        else if (position & Node.DOCUMENT_POSITION_CONTAINS) {\n            return 1;\n        }\n        else if (position & Node.DOCUMENT_POSITION_FOLLOWING) {\n            return 1;\n        }\n        else if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n            return -1;\n        }\n        /* eslint-enable no-bitwise */\n        return 0;\n    });\n}\nfunction traverseRemovedShadowDom(removedNode, shadowDomRemovedCallback) {\n    if (isNodeShadowHost(removedNode)) {\n        shadowDomRemovedCallback(removedNode.shadowRoot);\n    }\n    forEachChildNodes(removedNode, function (childNode) { return traverseRemovedShadowDom(childNode, shadowDomRemovedCallback); });\n}\n","import { sendToExtension } from '@datadog/browser-core';\nimport * as replayStats from '../replayStats';\nimport { trackFocus, trackFrustration, trackInput, trackMediaInteraction, trackMouseInteraction, trackMove, trackMutation, trackScroll, trackStyleSheet, trackViewEnd, trackViewportResize, } from './trackers';\nimport { createElementsScrollPositions } from './elementsScrollPositions';\nimport { initShadowRootsController } from './shadowRootsController';\nimport { startFullSnapshots } from './startFullSnapshots';\nimport { initRecordIds } from './recordIds';\nexport function record(options) {\n    var emit = options.emit, configuration = options.configuration, lifeCycle = options.lifeCycle;\n    // runtime checks for user options\n    if (!emit) {\n        throw new Error('emit function is required');\n    }\n    var emitAndComputeStats = function (record) {\n        emit(record);\n        sendToExtension('record', { record: record });\n        var view = options.viewContexts.findView();\n        replayStats.addRecord(view.id);\n    };\n    var elementsScrollPositions = createElementsScrollPositions();\n    var shadowRootsController = initShadowRootsController(configuration, emitAndComputeStats, elementsScrollPositions);\n    var stopFullSnapshots = startFullSnapshots(elementsScrollPositions, shadowRootsController, lifeCycle, configuration, flushMutations, function (records) { return records.forEach(function (record) { return emitAndComputeStats(record); }); }).stop;\n    function flushMutations() {\n        shadowRootsController.flush();\n        mutationTracker.flush();\n    }\n    var recordIds = initRecordIds();\n    var mutationTracker = trackMutation(emitAndComputeStats, configuration, shadowRootsController, document);\n    var trackers = [\n        mutationTracker,\n        trackMove(configuration, emitAndComputeStats),\n        trackMouseInteraction(configuration, emitAndComputeStats, recordIds),\n        trackScroll(configuration, emitAndComputeStats, elementsScrollPositions, document),\n        trackViewportResize(configuration, emitAndComputeStats),\n        trackInput(configuration, emitAndComputeStats),\n        trackMediaInteraction(configuration, emitAndComputeStats),\n        trackStyleSheet(emitAndComputeStats),\n        trackFocus(configuration, emitAndComputeStats),\n        trackViewportResize(configuration, emitAndComputeStats),\n        trackFrustration(lifeCycle, emitAndComputeStats, recordIds),\n        trackViewEnd(lifeCycle, function (viewEndRecord) {\n            flushMutations();\n            emitAndComputeStats(viewEndRecord);\n        }),\n    ];\n    return {\n        stop: function () {\n            shadowRootsController.stop();\n            trackers.forEach(function (tracker) { return tracker.stop(); });\n            stopFullSnapshots();\n        },\n        flushMutations: flushMutations,\n        shadowRootsController: shadowRootsController,\n    };\n}\n","export function createElementsScrollPositions() {\n    var scrollPositionsByElement = new WeakMap();\n    return {\n        set: function (element, scrollPositions) {\n            if (element === document && !document.scrollingElement) {\n                // cf https://drafts.csswg.org/cssom-view/#dom-document-scrollingelement,\n                // in some cases scrolling elements can not be defined, we don't support those for now\n                return;\n            }\n            scrollPositionsByElement.set(element === document ? document.scrollingElement : element, scrollPositions);\n        },\n        get: function (element) {\n            return scrollPositionsByElement.get(element);\n        },\n        has: function (element) {\n            return scrollPositionsByElement.has(element);\n        },\n    };\n}\n","import { trackInput, trackMutation, trackScroll } from './trackers';\nexport var initShadowRootsController = function (configuration, callback, elementsScrollPositions) {\n    var controllerByShadowRoot = new Map();\n    var shadowRootsController = {\n        addShadowRoot: function (shadowRoot) {\n            if (controllerByShadowRoot.has(shadowRoot)) {\n                return;\n            }\n            var mutationTracker = trackMutation(callback, configuration, shadowRootsController, shadowRoot);\n            // The change event does not bubble up across the shadow root, we have to listen on the shadow root\n            var inputTracker = trackInput(configuration, callback, shadowRoot);\n            // The scroll event does not bubble up across the shadow root, we have to listen on the shadow root\n            var scrollTracker = trackScroll(configuration, callback, elementsScrollPositions, shadowRoot);\n            controllerByShadowRoot.set(shadowRoot, {\n                flush: function () { return mutationTracker.flush(); },\n                stop: function () {\n                    mutationTracker.stop();\n                    inputTracker.stop();\n                    scrollTracker.stop();\n                },\n            });\n        },\n        removeShadowRoot: function (shadowRoot) {\n            var entry = controllerByShadowRoot.get(shadowRoot);\n            if (!entry) {\n                // unidentified root cause: observed in some cases with shadow DOM added by browser extensions\n                return;\n            }\n            entry.stop();\n            controllerByShadowRoot.delete(shadowRoot);\n        },\n        stop: function () {\n            controllerByShadowRoot.forEach(function (_a) {\n                var stop = _a.stop;\n                return stop();\n            });\n        },\n        flush: function () {\n            controllerByShadowRoot.forEach(function (_a) {\n                var flush = _a.flush;\n                return flush();\n            });\n        },\n    };\n    return shadowRootsController;\n};\n","import { getScrollX, getScrollY, getViewportDimension } from '@datadog/browser-rum-core';\nimport { timeStampNow } from '@datadog/browser-core';\nimport { RecordType } from '../../types';\nimport { serializeDocument } from './serialization';\nimport { getVisualViewport } from './viewports';\nexport function startFullSnapshots(elementsScrollPositions, shadowRootsController, lifeCycle, configuration, flushMutations, fullSnapshotCallback) {\n    var takeFullSnapshot = function (timestamp, serializationContext) {\n        if (timestamp === void 0) { timestamp = timeStampNow(); }\n        if (serializationContext === void 0) { serializationContext = {\n            status: 0 /* SerializationContextStatus.INITIAL_FULL_SNAPSHOT */,\n            elementsScrollPositions: elementsScrollPositions,\n            shadowRootsController: shadowRootsController,\n        }; }\n        var _a = getViewportDimension(), width = _a.width, height = _a.height;\n        var records = [\n            {\n                data: {\n                    height: height,\n                    href: window.location.href,\n                    width: width,\n                },\n                type: RecordType.Meta,\n                timestamp: timestamp,\n            },\n            {\n                data: {\n                    has_focus: document.hasFocus(),\n                },\n                type: RecordType.Focus,\n                timestamp: timestamp,\n            },\n            {\n                data: {\n                    node: serializeDocument(document, configuration, serializationContext),\n                    initialOffset: {\n                        left: getScrollX(),\n                        top: getScrollY(),\n                    },\n                },\n                type: RecordType.FullSnapshot,\n                timestamp: timestamp,\n            },\n        ];\n        if (window.visualViewport) {\n            records.push({\n                data: getVisualViewport(window.visualViewport),\n                type: RecordType.VisualViewport,\n                timestamp: timestamp,\n            });\n        }\n        return records;\n    };\n    fullSnapshotCallback(takeFullSnapshot());\n    var unsubscribe = lifeCycle.subscribe(3 /* LifeCycleEventType.VIEW_CREATED */, function (view) {\n        flushMutations();\n        fullSnapshotCallback(takeFullSnapshot(view.startClocks.timeStamp, {\n            shadowRootsController: shadowRootsController,\n            status: 1 /* SerializationContextStatus.SUBSEQUENT_FULL_SNAPSHOT */,\n            elementsScrollPositions: elementsScrollPositions,\n        }));\n    }).unsubscribe;\n    return {\n        stop: unsubscribe,\n    };\n}\n","export function initRecordIds() {\n    var recordIds = new WeakMap();\n    var nextId = 1;\n    return {\n        getIdForEvent: function (event) {\n            if (!recordIds.has(event)) {\n                recordIds.set(event, nextId++);\n            }\n            return recordIds.get(event);\n        },\n    };\n}\n","import { assign } from '@datadog/browser-core';\nimport { RecordType } from '../../types';\nimport * as replayStats from '../replayStats';\nvar Segment = /** @class */ (function () {\n    function Segment(encoder, context, creationReason) {\n        this.encoder = encoder;\n        this.encodedBytesCount = 0;\n        var viewId = context.view.id;\n        this.metadata = assign({\n            start: Infinity,\n            end: -Infinity,\n            creation_reason: creationReason,\n            records_count: 0,\n            has_full_snapshot: false,\n            index_in_view: replayStats.getSegmentsCount(viewId),\n            source: 'browser',\n        }, context);\n        replayStats.addSegment(viewId);\n    }\n    Segment.prototype.addRecord = function (record, callback) {\n        var _this = this;\n        var _a;\n        this.metadata.start = Math.min(this.metadata.start, record.timestamp);\n        this.metadata.end = Math.max(this.metadata.end, record.timestamp);\n        this.metadata.records_count += 1;\n        (_a = this.metadata).has_full_snapshot || (_a.has_full_snapshot = record.type === RecordType.FullSnapshot);\n        var prefix = this.encoder.isEmpty ? '{\"records\":[' : ',';\n        this.encoder.write(prefix + JSON.stringify(record), function (additionalEncodedBytesCount) {\n            _this.encodedBytesCount += additionalEncodedBytesCount;\n            callback(_this.encodedBytesCount);\n        });\n    };\n    Segment.prototype.flush = function (callback) {\n        var _this = this;\n        if (this.encoder.isEmpty) {\n            throw new Error('Empty segment flushed');\n        }\n        this.encoder.write(\"],\".concat(JSON.stringify(this.metadata).slice(1), \"\\n\"));\n        this.encoder.finish(function (encoderResult) {\n            replayStats.addWroteData(_this.metadata.view.id, encoderResult.rawBytesCount);\n            callback(_this.metadata, encoderResult);\n        });\n    };\n    return Segment;\n}());\nexport { Segment };\n","import { isPageExitReason, ONE_SECOND, clearTimeout, setTimeout } from '@datadog/browser-core';\nimport { buildReplayPayload } from './buildReplayPayload';\nimport { Segment } from './segment';\nexport var SEGMENT_DURATION_LIMIT = 30 * ONE_SECOND;\n/**\n * beacon payload max queue size implementation is 64kb\n * ensure that we leave room for logs, rum and potential other users\n */\nexport var SEGMENT_BYTES_LIMIT = 60000;\n// Segments are the main data structure for session replays. They contain context information used\n// for indexing or UI needs, and a list of records (RRWeb 'events', renamed to avoid confusing\n// namings). They are stored without any processing from the intake, and fetched one after the\n// other while a session is being replayed. Their encoding (deflate) are carefully crafted to allow\n// concatenating multiple segments together. Segments have a size overhead (metadata), so our goal is to\n// build segments containing as many records as possible while complying with the various flush\n// strategies to guarantee a good replay quality.\n//\n// When the recording starts, a segment is initially created.  The segment is flushed (finalized and\n// sent) based on various events (non-exhaustive list):\n//\n// * the page visibility change or becomes to unload\n// * the segment duration reaches a limit\n// * the encoded segment bytes count reaches a limit\n// * ...\n//\n// A segment cannot be created without its context.  If the RUM session ends and no session id is\n// available when creating a new segment, records will be ignored, until the session is renewed and\n// a new session id is available.\n//\n// Empty segments (segments with no record) aren't useful and should be ignored.\n//\n// To help investigate session replays issues, each segment is created with a \"creation reason\",\n// indicating why the session has been created.\nexport function startSegmentCollection(lifeCycle, configuration, sessionManager, viewContexts, httpRequest, encoder) {\n    return doStartSegmentCollection(lifeCycle, function () { return computeSegmentContext(configuration.applicationId, sessionManager, viewContexts); }, httpRequest, encoder);\n}\nexport function doStartSegmentCollection(lifeCycle, getSegmentContext, httpRequest, encoder) {\n    var state = {\n        status: 0 /* SegmentCollectionStatus.WaitingForInitialRecord */,\n        nextSegmentCreationReason: 'init',\n    };\n    var unsubscribeViewCreated = lifeCycle.subscribe(3 /* LifeCycleEventType.VIEW_CREATED */, function () {\n        flushSegment('view_change');\n    }).unsubscribe;\n    var unsubscribePageExited = lifeCycle.subscribe(11 /* LifeCycleEventType.PAGE_EXITED */, function (pageExitEvent) {\n        flushSegment(pageExitEvent.reason);\n    }).unsubscribe;\n    function flushSegment(flushReason) {\n        if (state.status === 1 /* SegmentCollectionStatus.SegmentPending */) {\n            state.segment.flush(function (metadata, encoderResult) {\n                var payload = buildReplayPayload(encoderResult.output, metadata, encoderResult.rawBytesCount);\n                if (isPageExitReason(flushReason)) {\n                    httpRequest.sendOnExit(payload);\n                }\n                else {\n                    httpRequest.send(payload);\n                }\n            });\n            clearTimeout(state.expirationTimeoutId);\n        }\n        if (flushReason !== 'stop') {\n            state = {\n                status: 0 /* SegmentCollectionStatus.WaitingForInitialRecord */,\n                nextSegmentCreationReason: flushReason,\n            };\n        }\n        else {\n            state = {\n                status: 2 /* SegmentCollectionStatus.Stopped */,\n            };\n        }\n    }\n    return {\n        addRecord: function (record) {\n            if (state.status === 2 /* SegmentCollectionStatus.Stopped */) {\n                return;\n            }\n            if (state.status === 0 /* SegmentCollectionStatus.WaitingForInitialRecord */) {\n                var context = getSegmentContext();\n                if (!context) {\n                    return;\n                }\n                state = {\n                    status: 1 /* SegmentCollectionStatus.SegmentPending */,\n                    segment: new Segment(encoder, context, state.nextSegmentCreationReason),\n                    expirationTimeoutId: setTimeout(function () {\n                        flushSegment('segment_duration_limit');\n                    }, SEGMENT_DURATION_LIMIT),\n                };\n            }\n            state.segment.addRecord(record, function (encodedBytesCount) {\n                if (encodedBytesCount > SEGMENT_BYTES_LIMIT) {\n                    flushSegment('segment_bytes_limit');\n                }\n            });\n        },\n        stop: function () {\n            flushSegment('stop');\n            unsubscribeViewCreated();\n            unsubscribePageExited();\n        },\n    };\n}\nexport function computeSegmentContext(applicationId, sessionManager, viewContexts) {\n    var session = sessionManager.findTrackedSession();\n    var viewContext = viewContexts.findView();\n    if (!session || !viewContext) {\n        return undefined;\n    }\n    return {\n        application: {\n            id: applicationId,\n        },\n        session: {\n            id: session.id,\n        },\n        view: {\n            id: viewContext.id,\n        },\n    };\n}\nexport function setSegmentBytesLimit(newSegmentBytesLimit) {\n    if (newSegmentBytesLimit === void 0) { newSegmentBytesLimit = 60000; }\n    SEGMENT_BYTES_LIMIT = newSegmentBytesLimit;\n}\n","import { assign } from '@datadog/browser-core';\nexport function buildReplayPayload(data, metadata, rawSegmentBytesCount) {\n    var formData = new FormData();\n    formData.append('segment', new Blob([data], {\n        type: 'application/octet-stream',\n    }), \"\".concat(metadata.session.id, \"-\").concat(metadata.start));\n    var metadataAndSegmentSizes = assign({\n        raw_segment_size: rawSegmentBytesCount,\n        compressed_segment_size: data.byteLength,\n    }, metadata);\n    var serializedMetadataAndSegmentSizes = JSON.stringify(metadataAndSegmentSizes);\n    formData.append('event', new Blob([serializedMetadataAndSegmentSizes], { type: 'application/json' }));\n    return { data: formData, bytesCount: data.byteLength };\n}\n","/**\n * Test for Browser features used while recording\n */\nexport function isBrowserSupported() {\n    return (\n    // Array.from is a bit less supported by browsers than CSSSupportsRule, but has higher chances\n    // to be polyfilled. Test for both to be more confident. We could add more things if we find out\n    // this test is not sufficient.\n    typeof Array.from === 'function' &&\n        typeof CSSSupportsRule === 'function' &&\n        typeof URL.createObjectURL === 'function' &&\n        'forEach' in NodeList.prototype);\n}\n","import { getSessionReplayUrl } from '@datadog/browser-rum-core';\nimport { isBrowserSupported } from '../boot/isBrowserSupported';\nexport function getSessionReplayLink(configuration, sessionManager, viewContexts, isRecordingStarted) {\n    var session = sessionManager.findTrackedSession();\n    var errorType = getErrorType(session, isRecordingStarted);\n    var viewContext = viewContexts.findView();\n    return getSessionReplayUrl(configuration, {\n        viewContext: viewContext,\n        errorType: errorType,\n        session: session,\n    });\n}\nfunction getErrorType(session, isRecordingStarted) {\n    if (!isBrowserSupported()) {\n        return 'browser-not-supported';\n    }\n    if (!session) {\n        // possibilities:\n        // - rum sampled out\n        // - session expired (edge case)\n        return 'rum-not-tracked';\n    }\n    if (!session.sessionReplayAllowed) {\n        // possibilities\n        // - replay sampled out\n        return 'incorrect-session-plan';\n    }\n    if (!isRecordingStarted) {\n        return 'replay-not-started';\n    }\n}\n","import { INTAKE_SITE_STAGING, INTAKE_SITE_US1, INTAKE_SITE_EU1 } from '@datadog/browser-core';\nexport function getSessionReplayUrl(configuration, _a) {\n    var session = _a.session, viewContext = _a.viewContext, errorType = _a.errorType;\n    var sessionId = session ? session.id : 'no-session-id';\n    var parameters = [];\n    if (errorType !== undefined) {\n        parameters.push(\"error-type=\".concat(errorType));\n    }\n    if (viewContext) {\n        parameters.push(\"seed=\".concat(viewContext.id));\n        parameters.push(\"from=\".concat(viewContext.startClocks.timeStamp));\n    }\n    var origin = getDatadogSiteUrl(configuration);\n    var path = \"/rum/replay/sessions/\".concat(sessionId);\n    return \"\".concat(origin).concat(path, \"?\").concat(parameters.join('&'));\n}\nexport function getDatadogSiteUrl(rumConfiguration) {\n    var site = rumConfiguration.site;\n    var subdomain = rumConfiguration.subdomain || getSiteDefaultSubdomain(rumConfiguration);\n    return \"https://\".concat(subdomain ? \"\".concat(subdomain, \".\") : '').concat(site);\n}\nfunction getSiteDefaultSubdomain(configuration) {\n    switch (configuration.site) {\n        case INTAKE_SITE_US1:\n        case INTAKE_SITE_EU1:\n            return 'app';\n        case INTAKE_SITE_STAGING:\n            return 'dd';\n        default:\n            return undefined;\n    }\n}\n","import { addEventListener, addTelemetryDebug, assign, concatBuffers } from '@datadog/browser-core';\nexport function createDeflateEncoder(configuration, worker, streamId) {\n    var rawBytesCount = 0;\n    var compressedData = [];\n    var compressedDataTrailer;\n    var nextWriteActionId = 0;\n    var pendingWriteActions = [];\n    var removeMessageListener = addEventListener(configuration, worker, 'message', function (_a) {\n        var workerResponse = _a.data;\n        if (workerResponse.type !== 'wrote' || workerResponse.streamId !== streamId) {\n            return;\n        }\n        rawBytesCount += workerResponse.additionalBytesCount;\n        compressedData.push(workerResponse.result);\n        compressedDataTrailer = workerResponse.trailer;\n        var nextPendingAction = pendingWriteActions.shift();\n        if (nextPendingAction && nextPendingAction.id === workerResponse.id) {\n            if (nextPendingAction.writeCallback) {\n                nextPendingAction.writeCallback(workerResponse.result.byteLength);\n            }\n            else if (nextPendingAction.finishCallback) {\n                nextPendingAction.finishCallback();\n            }\n        }\n        else {\n            removeMessageListener();\n            addTelemetryDebug('Worker responses received out of order.');\n        }\n    }).stop;\n    function consumeResult() {\n        var output = compressedData.length === 0 ? new Uint8Array(0) : concatBuffers(compressedData.concat(compressedDataTrailer));\n        var result = {\n            rawBytesCount: rawBytesCount,\n            output: output,\n            outputBytesCount: output.byteLength,\n            encoding: 'deflate',\n        };\n        rawBytesCount = 0;\n        compressedData = [];\n        return result;\n    }\n    function sendResetIfNeeded() {\n        if (nextWriteActionId > 0) {\n            worker.postMessage({\n                action: 'reset',\n                streamId: streamId,\n            });\n            nextWriteActionId = 0;\n        }\n    }\n    return {\n        isAsync: true,\n        get isEmpty() {\n            return nextWriteActionId === 0;\n        },\n        write: function (data, callback) {\n            worker.postMessage({\n                action: 'write',\n                id: nextWriteActionId,\n                data: data,\n                streamId: streamId,\n            });\n            pendingWriteActions.push({\n                id: nextWriteActionId,\n                writeCallback: callback,\n                data: data,\n            });\n            nextWriteActionId += 1;\n        },\n        finish: function (callback) {\n            sendResetIfNeeded();\n            if (!pendingWriteActions.length) {\n                callback(consumeResult());\n            }\n            else {\n                // Make sure we do not call any write callback\n                pendingWriteActions.forEach(function (pendingWriteAction) {\n                    delete pendingWriteAction.writeCallback;\n                });\n                // Wait for the last action to finish before calling the finish callback\n                pendingWriteActions[pendingWriteActions.length - 1].finishCallback = function () { return callback(consumeResult()); };\n            }\n        },\n        finishSync: function () {\n            sendResetIfNeeded();\n            var pendingData = pendingWriteActions\n                .map(function (pendingWriteAction) {\n                // Make sure we do not call any write or finish callback\n                delete pendingWriteAction.writeCallback;\n                delete pendingWriteAction.finishCallback;\n                return pendingWriteAction.data;\n            })\n                .join('');\n            return assign(consumeResult(), {\n                pendingData: pendingData,\n            });\n        },\n        estimateEncodedBytesCount: function (data) {\n            // This is a rough estimation of the data size once it'll be encoded by deflate. We observed\n            // that if it's the first chunk of data pushed to the stream, the ratio is lower (3-4), but\n            // after that the ratio is greater (10+). We chose 8 here, which (on average) seems to produce\n            // requests of the expected size.\n            return data.length / 8;\n        },\n        stop: function () {\n            removeMessageListener();\n        },\n    };\n}\n","import { addTelemetryError, display, includes, addEventListener, setTimeout, ONE_SECOND } from '@datadog/browser-core';\nexport var INITIALIZATION_TIME_OUT_DELAY = 10 * ONE_SECOND;\nfunction createDeflateWorker(configuration) {\n    return new Worker(configuration.workerUrl || URL.createObjectURL(new Blob([\"!function(){\\\"use strict\\\";function t(t){for(var e=t.reduce((function(t,e){return t+e.length}),0),a=new Uint8Array(e),n=0,r=0,i=t;r<i.length;r++){var s=i[r];a.set(s,n),n+=s.length}return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,n=286,r=30,i=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);var d=new Array(60);e(d);var u=new Array(512);e(u);var f=new Array(256);e(f);var c=new Array(29);e(c);var p,g,w,v=new Array(r);function b(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(v);var y=function(t){return t<256?u[t]:u[256+(t>>>7)]},k=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,k(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},x=function(t,e,a){z(t,a[2*e],a[2*e+1])},A=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},E=function(t,e,a){var n,r,s=new Array(16),_=0;for(n=1;n<=i;n++)s[n]=_=_+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=A(s[h]++,h))}},Z=function(t){var e;for(e=0;e<n;e++)t.dyn_ltree[2*e]=0;for(e=0;e<r;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},U=function(t){t.bi_valid>8?k(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},R=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&S(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!S(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},L=function(t,e,n){var r,i,h,l,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?x(t,i,e):(h=f[i],x(t,h+a+1,e),0!==(l=s[h])&&(i-=c[h],z(t,i,l)),r--,h=y(r),x(t,h,n),0!==(l=_[h])&&(r-=v[h],z(t,r,l)))}while(o<t.last_lit);x(t,256,e)},F=function(t,e){var a,n,r,s=e.dyn_tree,_=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==s[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):s[2*a+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=_[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)R(t,s,a);r=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],R(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,s[2*r]=s[2*a]+s[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,s[2*a+1]=s[2*n+1]=r,t.heap[1]=r++,R(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,s,_,h,l=e.dyn_tree,o=e.max_code,d=e.stat_desc.static_tree,u=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=i;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(s=l[2*l[2*(n=t.heap[a])+1]+1]+1)>p&&(s=p,g++),l[2*n+1]=s,n>o||(t.bl_count[s]++,_=0,n>=c&&(_=f[n-c]),h=l[2*n],t.opt_len+=h*(s+_),u&&(t.static_len+=h*(d[2*n+1]+_)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--a])>o||(l[2*r+1]!==s&&(t.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),n--)}}(t,e),E(s,o,t.bl_count)},T=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++_<h&&r===s||(_<l?t.bl_tree[2*r]+=_:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):_<=10?t.bl_tree[34]++:t.bl_tree[36]++,_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))},I=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++_<h&&r===s)){if(_<l)do{x(t,r,t.bl_tree)}while(0!=--_);else 0!==r?(r!==i&&(x(t,r,t.bl_tree),_--),x(t,16,t.bl_tree),z(t,_-3,2)):_<=10?(x(t,17,t.bl_tree),z(t,_-3,3)):(x(t,18,t.bl_tree),z(t,_-11,7));_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4)}},N=!1,O=function(t,e,a,n){z(t,0+(n?1:0),3),function(t,e,a,n){U(t),n&&(k(t,a),k(t,~a)),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a,!0)},D=function(t,e,n,r){var i,s,_=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),F(t,t.l_desc),F(t,t.d_desc),_=function(t){var e;for(T(t,t.dyn_ltree,t.l_desc.max_code),T(t,t.dyn_dtree,t.d_desc.max_code),F(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?O(t,e,n,r):4===t.strategy||s===i?(z(t,2+(r?1:0),3),L(t,o,d)):(z(t,4+(r?1:0),3),function(t,e,a,n){var r;for(z(t,e-257,5),z(t,a-1,5),z(t,n-4,4),r=0;r<n;r++)z(t,t.bl_tree[2*l[r]+1],3);I(t,t.dyn_ltree,e-1),I(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,_+1),L(t,t.dyn_ltree,t.dyn_dtree)),Z(t),r&&U(t)},B={_tr_init:function(t){N||(!function(){var t,e,a,l,m,y=new Array(16);for(a=0,l=0;l<28;l++)for(c[l]=a,t=0;t<1<<s[l];t++)f[a++]=l;for(f[a-1]=l,m=0,l=0;l<16;l++)for(v[l]=m,t=0;t<1<<_[l];t++)u[m++]=l;for(m>>=7;l<r;l++)for(v[l]=m<<7,t=0;t<1<<_[l]-7;t++)u[256+m++]=l;for(e=0;e<=i;e++)y[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,y[8]++;for(;t<=255;)o[2*t+1]=9,t++,y[9]++;for(;t<=279;)o[2*t+1]=7,t++,y[7]++;for(;t<=287;)o[2*t+1]=8,t++,y[8]++;for(E(o,287,y),t=0;t<r;t++)d[2*t+1]=5,d[2*t]=A(t,5);p=new b(o,s,257,n,i),g=new b(d,_,0,r,i),w=new b(new Array(0),h,0,19,7)}(),N=!0),t.l_desc=new m(t.dyn_ltree,p),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,Z(t)},_tr_stored_block:O,_tr_flush_block:D,_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+a+1)]++,t.dyn_dtree[2*y(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){z(t,2,3),x(t,256,o),function(t){16===t.bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},C=function(t,e,a,n){for(var r=65535&t|0,i=t>>>16&65535|0,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16|0},H=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),M=function(t,e,a,n){var r=H,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},Y={2:\\\"need dictionary\\\",1:\\\"stream end\\\",0:\\\"\\\",\\\"-1\\\":\\\"file error\\\",\\\"-2\\\":\\\"stream error\\\",\\\"-3\\\":\\\"data error\\\",\\\"-4\\\":\\\"insufficient memory\\\",\\\"-5\\\":\\\"buffer error\\\",\\\"-6\\\":\\\"incompatible version\\\"},K={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},P=B._tr_init,j=B._tr_stored_block,G=B._tr_flush_block,X=B._tr_tally,W=B._tr_align,q=K.Z_NO_FLUSH,J=K.Z_PARTIAL_FLUSH,Q=K.Z_FULL_FLUSH,V=K.Z_FINISH,$=K.Z_BLOCK,tt=K.Z_OK,et=K.Z_STREAM_END,at=K.Z_STREAM_ERROR,nt=K.Z_DATA_ERROR,rt=K.Z_BUF_ERROR,it=K.Z_DEFAULT_COMPRESSION,st=K.Z_FILTERED,_t=K.Z_HUFFMAN_ONLY,ht=K.Z_RLE,lt=K.Z_FIXED,ot=K.Z_DEFAULT_STRATEGY,dt=K.Z_UNKNOWN,ut=K.Z_DEFLATED,ft=258,ct=262,pt=103,gt=113,wt=666,vt=function(t,e){return t.msg=Y[e],e},bt=function(t){return(t<<1)-(t>4?9:0)},mt=function(t){for(var e=t.length;--e>=0;)t[e]=0},yt=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},kt=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},zt=function(t,e){G(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,kt(t.strm)},xt=function(t,e){t.pending_buf[t.pending++]=e},At=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Et=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,_=t.nice_match,h=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,l=t.window,o=t.w_mask,d=t.prev,u=t.strstart+ft,f=l[i+s-1],c=l[i+s];t.prev_length>=t.good_match&&(r>>=2),_>t.lookahead&&(_=t.lookahead);do{if(l[(a=e)+s]===c&&l[a+s-1]===f&&l[a]===l[i]&&l[++a]===l[i+1]){i+=2,a++;do{}while(l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&i<u);if(n=ft-(u-i),i=u-ft,n>s){if(t.match_start=e,s=n,n>=_)break;f=l[i+s-1],c=l[i+s]}}}while((e=d[e&o])>h&&0!=--r);return s<=t.lookahead?s:t.lookahead},Zt=function(t){var e,a,n,r,i,s,_,h,l,o,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-ct)){t.window.set(t.window.subarray(d,d+d),0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--a);e=a=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--a);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,_=t.window,h=t.strstart+t.lookahead,l=r,o=void 0,(o=s.avail_in)>l&&(o=l),a=0===o?0:(s.avail_in-=o,_.set(s.input.subarray(s.next_in,s.next_in+o),h),1===s.state.wrap?s.adler=C(s.adler,_,o,h):2===s.state.wrap&&(s.adler=M(s.adler,_,o,h)),s.next_in+=o,s.total_in+=o,o),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=yt(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=yt(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ct&&0!==t.strm.avail_in)},Ut=function(t,e){for(var a,n;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a)),t.match_length>=3)if(n=X(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=yt(t,t.ins_h,t.window[t.strstart+1]);else n=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2},St=function(t,e){for(var a,n,r;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a),t.match_length<=5&&(t.strategy===st||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=X(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(zt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=X(t,0,t.window[t.strstart-1]))&&zt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=X(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2};function Rt(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var Lt=[new Rt(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Zt(t),0===t.lookahead&&e===q)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,zt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-ct&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(zt(t,!1),t.strm.avail_out),1)})),new Rt(4,4,8,4,Ut),new Rt(4,5,16,8,Ut),new Rt(4,6,32,32,Ut),new Rt(4,4,16,16,St),new Rt(8,16,32,32,St),new Rt(8,16,128,128,St),new Rt(8,32,128,256,St),new Rt(32,128,258,1024,St),new Rt(32,258,258,4096,St)];function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Tt=function(t){if(!t||!t.state)return vt(t,at);t.total_in=t.total_out=0,t.data_type=dt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:gt,t.adler=2===e.wrap?0:1,e.last_flush=q,P(e),tt},It=function(t){var e,a=Tt(t);return a===tt&&((e=t.state).window_size=2*e.w_size,mt(e.head),e.max_lazy_match=Lt[e.level].max_lazy,e.good_match=Lt[e.level].good_length,e.nice_match=Lt[e.level].nice_length,e.max_chain_length=Lt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a},Nt=function(t,e,a,n,r,i){if(!t)return at;var s=1;if(e===it&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||a!==ut||n<8||n>15||e<0||e>9||i<0||i>lt)return vt(t,at);8===n&&(n=9);var _=new Ft;return t.state=_,_.strm=t,_.wrap=s,_.gzhead=null,_.w_bits=n,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=r+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+3-1)/3),_.window=new Uint8Array(2*_.w_size),_.head=new Uint16Array(_.hash_size),_.prev=new Uint16Array(_.w_size),_.lit_bufsize=1<<r+6,_.pending_buf_size=4*_.lit_bufsize,_.pending_buf=new Uint8Array(_.pending_buf_size),_.d_buf=1*_.lit_bufsize,_.l_buf=3*_.lit_bufsize,_.level=e,_.strategy=i,_.method=a,It(t)},Ot={deflateInit:function(t,e){return Nt(t,e,ut,15,8,ot)},deflateInit2:Nt,deflateReset:It,deflateResetKeep:Tt,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?at:(t.state.gzhead=e,tt):at},deflate:function(t,e){var a,n;if(!t||!t.state||e>$||e<0)return t?vt(t,at):at;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===wt&&e!==V)return vt(t,0===t.avail_out?rt:at);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,xt(r,31),xt(r,139),xt(r,8),r.gzhead?(xt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),xt(r,255&r.gzhead.time),xt(r,r.gzhead.time>>8&255),xt(r,r.gzhead.time>>16&255),xt(r,r.gzhead.time>>24&255),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(xt(r,255&r.gzhead.extra.length),xt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=M(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,3),r.status=gt);else{var s=ut+(r.w_bits-8<<4)<<8;s|=(r.strategy>=_t||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=gt,At(r,s),0!==r.strstart&&(At(r,t.adler>>>16),At(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending!==r.pending_buf_size));)xt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=pt)}else r.status=pt;if(r.status===pt&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&kt(t),r.pending+2<=r.pending_buf_size&&(xt(r,255&t.adler),xt(r,t.adler>>8&255),t.adler=0,r.status=gt)):r.status=gt),0!==r.pending){if(kt(t),0===t.avail_out)return r.last_flush=-1,tt}else if(0===t.avail_in&&bt(e)<=bt(i)&&e!==V)return vt(t,rt);if(r.status===wt&&0!==t.avail_in)return vt(t,rt);if(0!==t.avail_in||0!==r.lookahead||e!==q&&r.status!==wt){var _=r.strategy===_t?function(t,e){for(var a;;){if(0===t.lookahead&&(Zt(t),0===t.lookahead)){if(e===q)return 1;break}if(t.match_length=0,a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):r.strategy===ht?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=ft){if(Zt(t),t.lookahead<=ft&&e===q)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+ft;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=ft-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=X(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):Lt[r.level].func(r,e);if(3!==_&&4!==_||(r.status=wt),1===_||3===_)return 0===t.avail_out&&(r.last_flush=-1),tt;if(2===_&&(e===J?W(r):e!==$&&(j(r,0,0,!1),e===Q&&(mt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),kt(t),0===t.avail_out))return r.last_flush=-1,tt}return e!==V?tt:r.wrap<=0?et:(2===r.wrap?(xt(r,255&t.adler),xt(r,t.adler>>8&255),xt(r,t.adler>>16&255),xt(r,t.adler>>24&255),xt(r,255&t.total_in),xt(r,t.total_in>>8&255),xt(r,t.total_in>>16&255),xt(r,t.total_in>>24&255)):(At(r,t.adler>>>16),At(r,65535&t.adler)),kt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?tt:et)},deflateEnd:function(t){if(!t||!t.state)return at;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==pt&&e!==gt&&e!==wt?vt(t,at):(t.state=null,e===gt?vt(t,nt):tt)},deflateSetDictionary:function(t,e){var a=e.length;if(!t||!t.state)return at;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return at;if(1===r&&(t.adler=C(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(mt(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,_=t.next_in,h=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Zt(n);n.lookahead>=3;){var l=n.strstart,o=n.lookahead-2;do{n.ins_h=yt(n,n.ins_h,n.window[l+3-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++}while(--o);n.strstart=l,n.lookahead=2,Zt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=_,t.input=h,t.avail_in=s,n.wrap=r,tt},deflateInfo:\\\"pako deflate (from Nodeca project)\\\"};for(var Dt=new Uint8Array(256),Bt=0;Bt<256;Bt++)Dt[Bt]=Bt>=252?6:Bt>=248?5:Bt>=240?4:Bt>=224?3:Bt>=192?2:1;Dt[254]=Dt[254]=1;var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\\\"\\\",this.state=null,this.data_type=2,this.adler=0},Ht=Object.prototype.toString,Mt=K.Z_NO_FLUSH,Yt=K.Z_SYNC_FLUSH,Kt=K.Z_FULL_FLUSH,Pt=K.Z_FINISH,jt=K.Z_OK,Gt=K.Z_STREAM_END,Xt=K.Z_DEFAULT_COMPRESSION,Wt=K.Z_DEFAULT_STRATEGY,qt=K.Z_DEFLATED;function Jt(){this.options={level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg=\\\"\\\",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;var e=Ot.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==jt)throw new Error(Y[e]);if(t.header&&Ot.deflateSetHeader(this.strm,t.header),t.dictionary){var a;if(a=\\\"[object ArrayBuffer]\\\"===Ht.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=Ot.deflateSetDictionary(this.strm,a))!==jt)throw new Error(Y[e]);this._dict_set=!0}}function Qt(t,e,a){try{t.postMessage({type:\\\"errored\\\",error:e,streamId:a})}catch(n){t.postMessage({type:\\\"errored\\\",error:String(e),streamId:a})}}function Vt(t){var e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}Jt.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?Pt:Mt,\\\"[object ArrayBuffer]\\\"===Ht.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(n===Yt||n===Kt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if((a=Ot.deflate(r,n))===Gt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Ot.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===jt;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===jt&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,_=t.length;i<_;i++){var h=t[i];r.set(h,s),s+=h.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e){void 0===e&&(e=self);try{var a=new Map;e.addEventListener(\\\"message\\\",(function(n){try{var r=function(e,a){switch(a.action){case\\\"init\\\":return{type:\\\"initialized\\\",version:\\\"5.17.1\\\"};case\\\"write\\\":var n=e.get(a.streamId);n||(n=new Jt,e.set(a.streamId,n));var r=n.chunks.length,i=function(t){if(\\\"function\\\"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var e,a,n,r,i,s=t.length,_=0;for(r=0;r<s;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),_+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(_),i=0,r=0;i<_;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,K.Z_SYNC_FLUSH),{type:\\\"wrote\\\",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:Vt(n),additionalBytesCount:i.length};case\\\"reset\\\":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){Qt(e,t,n.data&&\\\"streamId\\\"in n.data?n.data.streamId:void 0)}}))}catch(t){Qt(e,t)}}()}();\"])));\n}\nvar state = { status: 0 /* DeflateWorkerStatus.Nil */ };\nexport function startDeflateWorker(configuration, source, onInitializationFailure, createDeflateWorkerImpl) {\n    if (createDeflateWorkerImpl === void 0) { createDeflateWorkerImpl = createDeflateWorker; }\n    if (state.status === 0 /* DeflateWorkerStatus.Nil */) {\n        // doStartDeflateWorker updates the state to \"loading\" or \"error\"\n        doStartDeflateWorker(configuration, source, createDeflateWorkerImpl);\n    }\n    switch (state.status) {\n        case 1 /* DeflateWorkerStatus.Loading */:\n            state.initializationFailureCallbacks.push(onInitializationFailure);\n            return state.worker;\n        case 3 /* DeflateWorkerStatus.Initialized */:\n            return state.worker;\n    }\n}\nexport function resetDeflateWorkerState() {\n    if (state.status === 3 /* DeflateWorkerStatus.Initialized */ || state.status === 1 /* DeflateWorkerStatus.Loading */) {\n        state.stop();\n    }\n    state = { status: 0 /* DeflateWorkerStatus.Nil */ };\n}\nexport function getDeflateWorkerStatus() {\n    return state.status;\n}\n/**\n * Starts the deflate worker and handle messages and errors\n *\n * The spec allow browsers to handle worker errors differently:\n * - Chromium throws an exception\n * - Firefox fires an error event\n *\n * more details: https://bugzilla.mozilla.org/show_bug.cgi?id=1736865#c2\n */\nexport function doStartDeflateWorker(configuration, source, createDeflateWorkerImpl) {\n    if (createDeflateWorkerImpl === void 0) { createDeflateWorkerImpl = createDeflateWorker; }\n    try {\n        var worker = createDeflateWorkerImpl(configuration);\n        var removeErrorListener_1 = addEventListener(configuration, worker, 'error', function (error) {\n            onError(configuration, source, error);\n        }).stop;\n        var removeMessageListener_1 = addEventListener(configuration, worker, 'message', function (_a) {\n            var data = _a.data;\n            if (data.type === 'errored') {\n                onError(configuration, source, data.error, data.streamId);\n            }\n            else if (data.type === 'initialized') {\n                onInitialized(data.version);\n            }\n        }).stop;\n        worker.postMessage({ action: 'init' });\n        setTimeout(function () { return onTimeout(source); }, INITIALIZATION_TIME_OUT_DELAY);\n        var stop_1 = function () {\n            removeErrorListener_1();\n            removeMessageListener_1();\n        };\n        state = { status: 1 /* DeflateWorkerStatus.Loading */, worker: worker, stop: stop_1, initializationFailureCallbacks: [] };\n    }\n    catch (error) {\n        onError(configuration, source, error);\n    }\n}\nfunction onTimeout(source) {\n    if (state.status === 1 /* DeflateWorkerStatus.Loading */) {\n        display.error(\"\".concat(source, \" failed to start: a timeout occurred while initializing the Worker\"));\n        state.initializationFailureCallbacks.forEach(function (callback) { return callback(); });\n        state = { status: 2 /* DeflateWorkerStatus.Error */ };\n    }\n}\nfunction onInitialized(version) {\n    if (state.status === 1 /* DeflateWorkerStatus.Loading */) {\n        state = { status: 3 /* DeflateWorkerStatus.Initialized */, worker: state.worker, stop: state.stop, version: version };\n    }\n}\nfunction onError(configuration, source, error, streamId) {\n    if (state.status === 1 /* DeflateWorkerStatus.Loading */ || state.status === 0 /* DeflateWorkerStatus.Nil */) {\n        display.error(\"\".concat(source, \" failed to start: an error occurred while creating the Worker:\"), error);\n        if (error instanceof Event || (error instanceof Error && isMessageCspRelated(error.message))) {\n            var baseMessage = void 0;\n            if (configuration.workerUrl) {\n                baseMessage = \"Please make sure the Worker URL \".concat(configuration.workerUrl, \" is correct and CSP is correctly configured.\");\n            }\n            else {\n                baseMessage = 'Please make sure CSP is correctly configured.';\n            }\n            display.error(\"\".concat(baseMessage, \" See documentation at https://docs.datadoghq.com/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay\"));\n        }\n        else {\n            addTelemetryError(error);\n        }\n        if (state.status === 1 /* DeflateWorkerStatus.Loading */) {\n            state.initializationFailureCallbacks.forEach(function (callback) { return callback(); });\n        }\n        state = { status: 2 /* DeflateWorkerStatus.Error */ };\n    }\n    else {\n        addTelemetryError(error, {\n            worker_version: state.status === 3 /* DeflateWorkerStatus.Initialized */ && state.version,\n            stream_id: streamId,\n        });\n    }\n}\nfunction isMessageCspRelated(message) {\n    return (includes(message, 'Content Security Policy') ||\n        // Related to `require-trusted-types-for` CSP: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/require-trusted-types-for\n        includes(message, \"requires 'TrustedScriptURL'\"));\n}\n","// Keep the following in sync with packages/rum-slim/src/entries/main.ts\nimport { defineGlobal, getGlobalObject } from '@datadog/browser-core';\nimport { makeRumPublicApi, startRum } from '@datadog/browser-rum-core';\nimport { startRecording } from '../boot/startRecording';\nimport { makeRecorderApi } from '../boot/recorderApi';\nimport { createDeflateEncoder, startDeflateWorker } from '../domain/deflate';\nexport { DefaultPrivacyLevel } from '@datadog/browser-core';\nvar recorderApi = makeRecorderApi(startRecording);\nexport var datadogRum = makeRumPublicApi(startRum, recorderApi, { startDeflateWorker: startDeflateWorker, createDeflateEncoder: createDeflateEncoder });\ndefineGlobal(getGlobalObject(), 'DD_RUM', datadogRum);\n","import { canUseEventBridge, noop, runOnReadyState, PageExitReason, bridgeSupports, } from '@datadog/browser-core';\nimport { getReplayStats as getReplayStatsImpl } from '../domain/replayStats';\nimport { getSessionReplayLink } from '../domain/getSessionReplayLink';\nimport { createDeflateEncoder, startDeflateWorker, getDeflateWorkerStatus, } from '../domain/deflate';\nimport { isBrowserSupported } from './isBrowserSupported';\nexport function makeRecorderApi(startRecordingImpl, createDeflateWorkerImpl) {\n    if ((canUseEventBridge() && !bridgeSupports(\"records\" /* BridgeCapability.RECORDS */)) || !isBrowserSupported()) {\n        return {\n            start: noop,\n            stop: noop,\n            getReplayStats: function () { return undefined; },\n            onRumStart: noop,\n            isRecording: function () { return false; },\n            getSessionReplayLink: function () { return undefined; },\n        };\n    }\n    var state = {\n        status: 1 /* RecorderStatus.IntentToStart */,\n    };\n    var startStrategy = function () {\n        state = { status: 1 /* RecorderStatus.IntentToStart */ };\n    };\n    var stopStrategy = function () {\n        state = { status: 0 /* RecorderStatus.Stopped */ };\n    };\n    var getSessionReplayLinkStrategy = noop;\n    return {\n        start: function () { return startStrategy(); },\n        stop: function () { return stopStrategy(); },\n        getSessionReplayLink: function () { return getSessionReplayLinkStrategy(); },\n        onRumStart: function (lifeCycle, configuration, sessionManager, viewContexts, worker) {\n            if (configuration.startSessionReplayRecordingManually) {\n                state = { status: 0 /* RecorderStatus.Stopped */ };\n            }\n            lifeCycle.subscribe(9 /* LifeCycleEventType.SESSION_EXPIRED */, function () {\n                if (state.status === 2 /* RecorderStatus.Starting */ || state.status === 3 /* RecorderStatus.Started */) {\n                    stopStrategy();\n                    state = { status: 1 /* RecorderStatus.IntentToStart */ };\n                }\n            });\n            // Stop the recorder on page unload to avoid sending records after the page is ended.\n            lifeCycle.subscribe(11 /* LifeCycleEventType.PAGE_EXITED */, function (pageExitEvent) {\n                if (pageExitEvent.reason === PageExitReason.UNLOADING || pageExitEvent.reason === PageExitReason.PAGEHIDE) {\n                    stopStrategy();\n                }\n            });\n            lifeCycle.subscribe(10 /* LifeCycleEventType.SESSION_RENEWED */, function () {\n                if (state.status === 1 /* RecorderStatus.IntentToStart */) {\n                    startStrategy();\n                }\n            });\n            var cachedDeflateEncoder;\n            function getOrCreateDeflateEncoder() {\n                if (!cachedDeflateEncoder) {\n                    if (!worker) {\n                        worker = startDeflateWorker(configuration, 'Datadog Session Replay', function () {\n                            stopStrategy();\n                        }, createDeflateWorkerImpl);\n                    }\n                    if (worker) {\n                        cachedDeflateEncoder = createDeflateEncoder(configuration, worker, 1 /* DeflateEncoderStreamId.REPLAY */);\n                    }\n                }\n                return cachedDeflateEncoder;\n            }\n            startStrategy = function () {\n                var session = sessionManager.findTrackedSession();\n                if (!session || !session.sessionReplayAllowed) {\n                    state = { status: 1 /* RecorderStatus.IntentToStart */ };\n                    return;\n                }\n                if (state.status === 2 /* RecorderStatus.Starting */ || state.status === 3 /* RecorderStatus.Started */) {\n                    return;\n                }\n                state = { status: 2 /* RecorderStatus.Starting */ };\n                runOnReadyState(configuration, 'interactive', function () {\n                    if (state.status !== 2 /* RecorderStatus.Starting */) {\n                        return;\n                    }\n                    var deflateEncoder = getOrCreateDeflateEncoder();\n                    if (!deflateEncoder) {\n                        state = {\n                            status: 0 /* RecorderStatus.Stopped */,\n                        };\n                        return;\n                    }\n                    var stopRecording = startRecordingImpl(lifeCycle, configuration, sessionManager, viewContexts, deflateEncoder).stop;\n                    state = {\n                        status: 3 /* RecorderStatus.Started */,\n                        stopRecording: stopRecording,\n                    };\n                });\n            };\n            stopStrategy = function () {\n                if (state.status === 0 /* RecorderStatus.Stopped */) {\n                    return;\n                }\n                if (state.status === 3 /* RecorderStatus.Started */) {\n                    state.stopRecording();\n                }\n                state = {\n                    status: 0 /* RecorderStatus.Stopped */,\n                };\n            };\n            getSessionReplayLinkStrategy = function () {\n                return getSessionReplayLink(configuration, sessionManager, viewContexts, state.status !== 0 /* RecorderStatus.Stopped */);\n            };\n            if (state.status === 1 /* RecorderStatus.IntentToStart */) {\n                startStrategy();\n            }\n        },\n        isRecording: function () {\n            // The worker is started optimistically, meaning we could have started to record but its\n            // initialization fails a bit later. This could happen when:\n            // * the worker URL (blob or plain URL) is blocked by CSP in Firefox only (Chromium and Safari\n            // throw an exception when instantiating the worker, and IE doesn't care about CSP)\n            // * the browser fails to load the worker in case the workerUrl is used\n            // * an unexpected error occurs in the Worker before initialization, ex:\n            //   * a runtime exception collected by monitor()\n            //   * a syntax error notified by the browser via an error event\n            // * the worker is unresponsive for some reason and timeouts\n            //\n            // It is not expected to happen often. Nonetheless, the \"replayable\" status on RUM events is\n            // an important part of the Datadog App:\n            // * If we have a false positive (we set has_replay: true even if no replay data is present),\n            // we might display broken links to the Session Replay player.\n            // * If we have a false negative (we don't set has_replay: true even if replay data is\n            // available), it is less noticeable because no link will be displayed.\n            //\n            // Thus, it is better to have false negative, so let's make sure the worker is correctly\n            // initialized before advertizing that we are recording.\n            //\n            // In the future, when the compression worker will also be used for RUM data, this will be\n            // less important since no RUM event will be sent when the worker fails to initialize.\n            return getDeflateWorkerStatus() === 3 /* DeflateWorkerStatus.Initialized */ && state.status === 3 /* RecorderStatus.Started */;\n        },\n        getReplayStats: function (viewId) {\n            return getDeflateWorkerStatus() === 3 /* DeflateWorkerStatus.Initialized */ ? getReplayStatsImpl(viewId) : undefined;\n        },\n    };\n}\n","import { createHttpRequest, addTelemetryDebug, canUseEventBridge } from '@datadog/browser-core';\nimport { record } from '../domain/record';\nimport { startSegmentCollection, SEGMENT_BYTES_LIMIT } from '../domain/segmentCollection';\nimport { startRecordBridge } from '../domain/startRecordBridge';\nexport function startRecording(lifeCycle, configuration, sessionManager, viewContexts, encoder, httpRequest) {\n    var cleanupTasks = [];\n    var reportError = function (error) {\n        lifeCycle.notify(14 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, { error: error });\n        addTelemetryDebug('Error reported to customer', { 'error.message': error.message });\n    };\n    var replayRequest = httpRequest ||\n        createHttpRequest(configuration, configuration.sessionReplayEndpointBuilder, SEGMENT_BYTES_LIMIT, reportError);\n    var addRecord;\n    if (!canUseEventBridge()) {\n        var segmentCollection = startSegmentCollection(lifeCycle, configuration, sessionManager, viewContexts, replayRequest, encoder);\n        addRecord = segmentCollection.addRecord;\n        cleanupTasks.push(segmentCollection.stop);\n    }\n    else {\n        ;\n        (addRecord = startRecordBridge(viewContexts).addRecord);\n    }\n    var stopRecording = record({\n        emit: addRecord,\n        configuration: configuration,\n        lifeCycle: lifeCycle,\n        viewContexts: viewContexts,\n    }).stop;\n    cleanupTasks.push(stopRecording);\n    return {\n        stop: function () {\n            cleanupTasks.forEach(function (task) { return task(); });\n        },\n    };\n}\n","import { getEventBridge } from '@datadog/browser-core';\nexport function startRecordBridge(viewContexts) {\n    var bridge = getEventBridge();\n    return {\n        addRecord: function (record) {\n            // Get the current active view, not at the time of the record, aligning with the segment logic.\n            // This approach could potentially associate the record to an incorrect view, in case the record date is in the past (e.g. frustration records).\n            // However the risk is minimal. We could address the issue when potential negative impact are identified.\n            var view = viewContexts.findView();\n            bridge.send('record', record, view.id);\n        },\n    };\n}\n","import { addTelemetryUsage, timeStampToClocks, isExperimentalFeatureEnabled, ExperimentalFeature, assign, createContextManager, deepClone, makePublicApi, monitor, clocksNow, callMonitored, createHandlingStack, checkUser, sanitizeUser, sanitize, createIdentityEncoder, createCustomerDataTrackerManager, storeContextManager, displayAlreadyInitializedError, createTrackingConsentState, } from '@datadog/browser-core';\nimport { buildCommonContext } from '../domain/contexts/commonContext';\nimport { createPreStartStrategy } from './preStartRum';\nvar RUM_STORAGE_KEY = 'rum';\nexport function makeRumPublicApi(startRumImpl, recorderApi, options) {\n    if (options === void 0) { options = {}; }\n    var customerDataTrackerManager = createCustomerDataTrackerManager(0 /* CustomerDataCompressionStatus.Unknown */);\n    var globalContextManager = createContextManager(customerDataTrackerManager.getOrCreateTracker(2 /* CustomerDataType.GlobalContext */));\n    var userContextManager = createContextManager(customerDataTrackerManager.getOrCreateTracker(1 /* CustomerDataType.User */));\n    var trackingConsentState = createTrackingConsentState();\n    function getCommonContext() {\n        return buildCommonContext(globalContextManager, userContextManager, recorderApi);\n    }\n    var strategy = createPreStartStrategy(options, getCommonContext, trackingConsentState, function (initConfiguration, configuration, deflateWorker, initialViewOptions) {\n        if (isExperimentalFeatureEnabled(ExperimentalFeature.CUSTOM_VITALS)) {\n            /**\n             * Start a custom duration vital\n             * stored in @vital.custom.<name>\n             *\n             * @param name name of the custom vital\n             * @param options.context custom context attached to the vital\n             * @param options.startTime epoch timestamp of the start of the custom vital (if not set, will use current time)\n             */\n            ;\n            rumPublicApi.startDurationVital = monitor(function (name, options) {\n                strategy.startDurationVital({\n                    name: sanitize(name),\n                    startClocks: (options === null || options === void 0 ? void 0 : options.startTime) ? timeStampToClocks(options.startTime) : clocksNow(),\n                    context: sanitize(options === null || options === void 0 ? void 0 : options.context),\n                });\n            });\n            rumPublicApi.stopDurationVital = monitor(function (name, options) {\n                strategy.stopDurationVital({\n                    name: sanitize(name),\n                    stopClocks: (options === null || options === void 0 ? void 0 : options.stopTime) ? timeStampToClocks(options.stopTime) : clocksNow(),\n                    context: sanitize(options === null || options === void 0 ? void 0 : options.context),\n                });\n            });\n        }\n        if (initConfiguration.storeContextsAcrossPages) {\n            storeContextManager(configuration, globalContextManager, RUM_STORAGE_KEY, 2 /* CustomerDataType.GlobalContext */);\n            storeContextManager(configuration, userContextManager, RUM_STORAGE_KEY, 1 /* CustomerDataType.User */);\n        }\n        customerDataTrackerManager.setCompressionStatus(deflateWorker ? 1 /* CustomerDataCompressionStatus.Enabled */ : 2 /* CustomerDataCompressionStatus.Disabled */);\n        var startRumResult = startRumImpl(initConfiguration, configuration, recorderApi, customerDataTrackerManager, getCommonContext, initialViewOptions, deflateWorker && options.createDeflateEncoder\n            ? function (streamId) { return options.createDeflateEncoder(configuration, deflateWorker, streamId); }\n            : createIdentityEncoder, trackingConsentState);\n        recorderApi.onRumStart(startRumResult.lifeCycle, configuration, startRumResult.session, startRumResult.viewContexts, deflateWorker);\n        strategy = createPostStartStrategy(initConfiguration, startRumResult);\n        return startRumResult;\n    });\n    var startView = monitor(function (options) {\n        var sanitizedOptions = typeof options === 'object' ? options : { name: options };\n        strategy.startView(sanitizedOptions);\n    });\n    var rumPublicApi = makePublicApi({\n        init: monitor(function (initConfiguration) { return strategy.init(initConfiguration); }),\n        /**\n         * Set the tracking consent of the current user.\n         *\n         * @param {\"granted\" | \"not-granted\"} trackingConsent The user tracking consent\n         *\n         * Data will be sent only if it is set to \"granted\". This value won't be stored by the library\n         * across page loads: you will need to call this method or set the appropriate `trackingConsent`\n         * field in the init() method at each page load.\n         *\n         * If this method is called before the init() method, the provided value will take precedence\n         * over the one provided as initialization parameter.\n         */\n        setTrackingConsent: monitor(function (trackingConsent) {\n            trackingConsentState.update(trackingConsent);\n            addTelemetryUsage({ feature: 'set-tracking-consent', tracking_consent: trackingConsent });\n        }),\n        setGlobalContextProperty: monitor(function (key, value) { return globalContextManager.setContextProperty(key, value); }),\n        removeGlobalContextProperty: monitor(function (key) { return globalContextManager.removeContextProperty(key); }),\n        getGlobalContext: monitor(function () { return globalContextManager.getContext(); }),\n        setGlobalContext: monitor(function (context) { return globalContextManager.setContext(context); }),\n        clearGlobalContext: monitor(function () { return globalContextManager.clearContext(); }),\n        getInternalContext: monitor(function (startTime) { return strategy.getInternalContext(startTime); }),\n        getInitConfiguration: monitor(function () { return deepClone(strategy.initConfiguration); }),\n        addAction: monitor(function (name, context) {\n            strategy.addAction({\n                name: sanitize(name),\n                context: sanitize(context),\n                startClocks: clocksNow(),\n                type: \"custom\" /* ActionType.CUSTOM */,\n            });\n        }),\n        addError: function (error, context) {\n            var handlingStack = createHandlingStack();\n            callMonitored(function () {\n                strategy.addError({\n                    error: error, // Do not sanitize error here, it is needed unserialized by computeRawError()\n                    handlingStack: handlingStack,\n                    context: sanitize(context),\n                    startClocks: clocksNow(),\n                });\n            });\n        },\n        /**\n         * Add a custom timing relative to the start of the current view,\n         * stored in `@view.custom_timings.<timing_name>`\n         *\n         * @param name Name of the custom timing\n         * @param [time] Epoch timestamp of the custom timing (if not set, will use current time)\n         *\n         * Note: passing a relative time is discouraged since it is actually used as-is but displayed relative to the view start.\n         * We currently don't provide a way to retrieve the view start time, so it can be challenging to provide a timing relative to the view start.\n         * see https://github.com/DataDog/browser-sdk/issues/2552\n         */\n        addTiming: monitor(function (name, time) {\n            // TODO: next major decide to drop relative time support or update its behaviour\n            strategy.addTiming(sanitize(name), time);\n        }),\n        setUser: monitor(function (newUser) {\n            if (checkUser(newUser)) {\n                userContextManager.setContext(sanitizeUser(newUser));\n            }\n        }),\n        getUser: monitor(function () { return userContextManager.getContext(); }),\n        setUserProperty: monitor(function (key, property) {\n            var _a;\n            var sanitizedProperty = sanitizeUser((_a = {}, _a[key] = property, _a))[key];\n            userContextManager.setContextProperty(key, sanitizedProperty);\n        }),\n        removeUserProperty: monitor(function (key) { return userContextManager.removeContextProperty(key); }),\n        clearUser: monitor(function () { return userContextManager.clearContext(); }),\n        startView: startView,\n        stopSession: monitor(function () {\n            strategy.stopSession();\n            addTelemetryUsage({ feature: 'stop-session' });\n        }),\n        /**\n         * Add a feature flag evaluation,\n         * stored in `@feature_flags.<feature_flag_key>`\n         *\n         * @param {string} key The key of the feature flag.\n         * @param {any} value The value of the feature flag.\n         *\n         * We recommend enabling the intake request compression when using feature flags `compressIntakeRequests: true`.\n         * For more information see the full [feature flag tracking guide](https://docs.datadoghq.com/real_user_monitoring/feature_flag_tracking/).\n         */\n        addFeatureFlagEvaluation: monitor(function (key, value) {\n            strategy.addFeatureFlagEvaluation(sanitize(key), sanitize(value));\n        }),\n        getSessionReplayLink: monitor(function () { return recorderApi.getSessionReplayLink(); }),\n        startSessionReplayRecording: monitor(function () {\n            recorderApi.start();\n            addTelemetryUsage({ feature: 'start-session-replay-recording' });\n        }),\n        stopSessionReplayRecording: monitor(function () { return recorderApi.stop(); }),\n    });\n    return rumPublicApi;\n}\nfunction createPostStartStrategy(initConfiguration, startRumResult) {\n    return assign({\n        init: function (initConfiguration) {\n            displayAlreadyInitializedError('DD_RUM', initConfiguration);\n        },\n        initConfiguration: initConfiguration,\n    }, startRumResult);\n}\n","export function buildCommonContext(globalContextManager, userContextManager, recorderApi) {\n    return {\n        context: globalContextManager.getContext(),\n        user: userContextManager.getContext(),\n        hasReplay: recorderApi.isRecording() ? true : undefined,\n    };\n}\n","import { sendToExtension, createPageExitObservable, addTelemetryConfiguration, startTelemetry, canUseEventBridge, getEventBridge, addTelemetryDebug, } from '@datadog/browser-core';\nimport { createDOMMutationObservable } from '../browser/domMutationObservable';\nimport { startPerformanceCollection } from '../browser/performanceCollection';\nimport { startRumAssembly } from '../domain/assembly';\nimport { startInternalContext } from '../domain/contexts/internalContext';\nimport { LifeCycle } from '../domain/lifeCycle';\nimport { startViewContexts } from '../domain/contexts/viewContexts';\nimport { startRequestCollection } from '../domain/requestCollection';\nimport { startActionCollection } from '../domain/action/actionCollection';\nimport { startErrorCollection } from '../domain/error/errorCollection';\nimport { startLongTaskCollection } from '../domain/longTask/longTaskCollection';\nimport { startResourceCollection } from '../domain/resource/resourceCollection';\nimport { startViewCollection } from '../domain/view/viewCollection';\nimport { startRumSessionManager, startRumSessionManagerStub } from '../domain/rumSessionManager';\nimport { startRumBatch } from '../transport/startRumBatch';\nimport { startRumEventBridge } from '../transport/startRumEventBridge';\nimport { startUrlContexts } from '../domain/contexts/urlContexts';\nimport { createLocationChangeObservable } from '../browser/locationChangeObservable';\nimport { serializeRumConfiguration } from '../domain/configuration';\nimport { startFeatureFlagContexts } from '../domain/contexts/featureFlagContext';\nimport { startCustomerDataTelemetry } from '../domain/startCustomerDataTelemetry';\nimport { startPageStateHistory } from '../domain/contexts/pageStateHistory';\nimport { startDisplayContext } from '../domain/contexts/displayContext';\nimport { startVitalCollection } from '../domain/vital/vitalCollection';\nimport { startCiVisibilityContext } from '../domain/contexts/ciVisibilityContext';\nexport function startRum(initConfiguration, configuration, recorderApi, customerDataTrackerManager, getCommonContext, initialViewOptions, createEncoder, \n// `startRum` and its subcomponents assume tracking consent is granted initially and starts\n// collecting logs unconditionally. As such, `startRum` should be called with a\n// `trackingConsentState` set to \"granted\".\ntrackingConsentState) {\n    var cleanupTasks = [];\n    var lifeCycle = new LifeCycle();\n    lifeCycle.subscribe(13 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (event) { return sendToExtension('rum', event); });\n    var telemetry = startRumTelemetry(configuration);\n    telemetry.setContextProvider(function () {\n        var _a, _b;\n        return ({\n            application: {\n                id: configuration.applicationId,\n            },\n            session: {\n                id: (_a = session.findTrackedSession()) === null || _a === void 0 ? void 0 : _a.id,\n            },\n            view: {\n                id: (_b = viewContexts.findView()) === null || _b === void 0 ? void 0 : _b.id,\n            },\n            action: {\n                id: actionContexts.findActionId(),\n            },\n        });\n    });\n    var reportError = function (error) {\n        lifeCycle.notify(14 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, { error: error });\n        addTelemetryDebug('Error reported to customer', { 'error.message': error.message });\n    };\n    var featureFlagContexts = startFeatureFlagContexts(lifeCycle, customerDataTrackerManager.getOrCreateTracker(0 /* CustomerDataType.FeatureFlag */));\n    var pageExitObservable = createPageExitObservable(configuration);\n    var pageExitSubscription = pageExitObservable.subscribe(function (event) {\n        lifeCycle.notify(11 /* LifeCycleEventType.PAGE_EXITED */, event);\n    });\n    cleanupTasks.push(function () { return pageExitSubscription.unsubscribe(); });\n    var session = !canUseEventBridge()\n        ? startRumSessionManager(configuration, lifeCycle, trackingConsentState)\n        : startRumSessionManagerStub();\n    if (!canUseEventBridge()) {\n        var batch_1 = startRumBatch(configuration, lifeCycle, telemetry.observable, reportError, pageExitObservable, session.expireObservable, createEncoder);\n        cleanupTasks.push(function () { return batch_1.stop(); });\n        startCustomerDataTelemetry(configuration, telemetry, lifeCycle, customerDataTrackerManager, batch_1.flushObservable);\n    }\n    else {\n        startRumEventBridge(lifeCycle);\n    }\n    var domMutationObservable = createDOMMutationObservable();\n    var locationChangeObservable = createLocationChangeObservable(configuration, location);\n    var _a = startRumEventCollection(lifeCycle, configuration, location, session, locationChangeObservable, domMutationObservable, getCommonContext, reportError), viewContexts = _a.viewContexts, pageStateHistory = _a.pageStateHistory, urlContexts = _a.urlContexts, actionContexts = _a.actionContexts, addAction = _a.addAction, stopRumEventCollection = _a.stop;\n    cleanupTasks.push(stopRumEventCollection);\n    addTelemetryConfiguration(serializeRumConfiguration(initConfiguration));\n    startLongTaskCollection(lifeCycle, configuration, session);\n    startResourceCollection(lifeCycle, configuration, session, pageStateHistory);\n    var _b = startViewCollection(lifeCycle, configuration, location, domMutationObservable, locationChangeObservable, featureFlagContexts, pageStateHistory, recorderApi, initialViewOptions), addTiming = _b.addTiming, startView = _b.startView, stopViewCollection = _b.stop;\n    cleanupTasks.push(stopViewCollection);\n    var addError = startErrorCollection(lifeCycle, configuration, pageStateHistory, featureFlagContexts).addError;\n    startRequestCollection(lifeCycle, configuration, session);\n    var stopPerformanceCollection = startPerformanceCollection(lifeCycle, configuration).stop;\n    cleanupTasks.push(stopPerformanceCollection);\n    var vitalCollection = startVitalCollection(lifeCycle, pageStateHistory);\n    var internalContext = startInternalContext(configuration.applicationId, session, viewContexts, actionContexts, urlContexts);\n    return {\n        addAction: addAction,\n        addError: addError,\n        addTiming: addTiming,\n        addFeatureFlagEvaluation: featureFlagContexts.addFeatureFlagEvaluation,\n        startView: startView,\n        lifeCycle: lifeCycle,\n        viewContexts: viewContexts,\n        session: session,\n        stopSession: function () { return session.expire(); },\n        getInternalContext: internalContext.get,\n        startDurationVital: vitalCollection.startDurationVital,\n        stopDurationVital: vitalCollection.stopDurationVital,\n        stop: function () {\n            cleanupTasks.forEach(function (task) { return task(); });\n        },\n    };\n}\nfunction startRumTelemetry(configuration) {\n    var telemetry = startTelemetry(\"browser-rum-sdk\" /* TelemetryService.RUM */, configuration);\n    if (canUseEventBridge()) {\n        var bridge_1 = getEventBridge();\n        telemetry.observable.subscribe(function (event) { return bridge_1.send('internal_telemetry', event); });\n    }\n    return telemetry;\n}\nexport function startRumEventCollection(lifeCycle, configuration, location, sessionManager, locationChangeObservable, domMutationObservable, getCommonContext, reportError) {\n    var viewContexts = startViewContexts(lifeCycle);\n    var urlContexts = startUrlContexts(lifeCycle, locationChangeObservable, location);\n    var pageStateHistory = startPageStateHistory(configuration);\n    var _a = startActionCollection(lifeCycle, domMutationObservable, configuration, pageStateHistory), addAction = _a.addAction, actionContexts = _a.actionContexts;\n    var displayContext = startDisplayContext(configuration);\n    var ciVisibilityContext = startCiVisibilityContext(configuration);\n    startRumAssembly(configuration, lifeCycle, sessionManager, viewContexts, urlContexts, actionContexts, displayContext, ciVisibilityContext, getCommonContext, reportError);\n    return {\n        viewContexts: viewContexts,\n        pageStateHistory: pageStateHistory,\n        urlContexts: urlContexts,\n        addAction: addAction,\n        actionContexts: actionContexts,\n        stop: function () {\n            ciVisibilityContext.stop();\n            displayContext.stop();\n            pageStateHistory.stop();\n            urlContexts.stop();\n            viewContexts.stop();\n            pageStateHistory.stop();\n        },\n    };\n}\n","import { getEventBridge } from '@datadog/browser-core';\nexport function startRumEventBridge(lifeCycle) {\n    var bridge = getEventBridge();\n    lifeCycle.subscribe(13 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (serverRumEvent) {\n        bridge.send('rum', serverRumEvent);\n    });\n}\n","import { combine, isTelemetryReplicationAllowed, startBatchWithReplica, } from '@datadog/browser-core';\nexport function startRumBatch(configuration, lifeCycle, telemetryEventObservable, reportError, pageExitObservable, sessionExpireObservable, createEncoder) {\n    var replica = configuration.replica;\n    var batch = startBatchWithReplica(configuration, {\n        endpoint: configuration.rumEndpointBuilder,\n        encoder: createEncoder(2 /* DeflateEncoderStreamId.RUM */),\n    }, replica && {\n        endpoint: replica.rumEndpointBuilder,\n        transformMessage: function (message) { return combine(message, { application: { id: replica.applicationId } }); },\n        encoder: createEncoder(3 /* DeflateEncoderStreamId.RUM_REPLICA */),\n    }, reportError, pageExitObservable, sessionExpireObservable);\n    lifeCycle.subscribe(13 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (serverRumEvent) {\n        if (serverRumEvent.type === \"view\" /* RumEventType.VIEW */) {\n            batch.upsert(serverRumEvent, serverRumEvent.view.id);\n        }\n        else {\n            batch.add(serverRumEvent);\n        }\n    });\n    telemetryEventObservable.subscribe(function (event) { return batch.add(event, isTelemetryReplicationAllowed(configuration)); });\n    return batch;\n}\n","import { addEventListener, DOM_EVENT, instrumentMethod, Observable, shallowClone } from '@datadog/browser-core';\nexport function createLocationChangeObservable(configuration, location) {\n    var currentLocation = shallowClone(location);\n    return new Observable(function (observable) {\n        var stopHistoryTracking = trackHistory(configuration, onLocationChange).stop;\n        var stopHashTracking = trackHash(configuration, onLocationChange).stop;\n        function onLocationChange() {\n            if (currentLocation.href === location.href) {\n                return;\n            }\n            var newLocation = shallowClone(location);\n            observable.notify({\n                newLocation: newLocation,\n                oldLocation: currentLocation,\n            });\n            currentLocation = newLocation;\n        }\n        return function () {\n            stopHistoryTracking();\n            stopHashTracking();\n        };\n    });\n}\nfunction trackHistory(configuration, onHistoryChange) {\n    var stopInstrumentingPushState = instrumentMethod(history, 'pushState', function (_a) {\n        var onPostCall = _a.onPostCall;\n        onPostCall(onHistoryChange);\n    }).stop;\n    var stopInstrumentingReplaceState = instrumentMethod(history, 'replaceState', function (_a) {\n        var onPostCall = _a.onPostCall;\n        onPostCall(onHistoryChange);\n    }).stop;\n    var removeListener = addEventListener(configuration, window, DOM_EVENT.POP_STATE, onHistoryChange).stop;\n    return {\n        stop: function () {\n            stopInstrumentingPushState();\n            stopInstrumentingReplaceState();\n            removeListener();\n        },\n    };\n}\nfunction trackHash(configuration, onHashChange) {\n    return addEventListener(configuration, window, DOM_EVENT.HASH_CHANGE, onHashChange);\n}\n","import { getViewportDimension, initViewportObservable } from '../../browser/viewportObservable';\nexport function startDisplayContext(configuration) {\n    var viewport = getViewportDimension();\n    var unsubscribeViewport = initViewportObservable(configuration).subscribe(function (viewportDimension) {\n        viewport = viewportDimension;\n    }).unsubscribe;\n    return {\n        get: function () { return ({ viewport: viewport }); },\n        stop: unsubscribeViewport,\n    };\n}\n","import { toServerDuration, relativeToClocks, generateUUID } from '@datadog/browser-core';\nimport { RumPerformanceEntryType } from '../../browser/performanceCollection';\nexport function startLongTaskCollection(lifeCycle, configuration, sessionManager) {\n    lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if (entry.entryType !== RumPerformanceEntryType.LONG_TASK) {\n                break;\n            }\n            var session = sessionManager.findTrackedSession(entry.startTime);\n            if (!session || !configuration.trackLongTasks) {\n                break;\n            }\n            var startClocks = relativeToClocks(entry.startTime);\n            var rawRumEvent = {\n                date: startClocks.timeStamp,\n                long_task: {\n                    id: generateUUID(),\n                    duration: toServerDuration(entry.duration),\n                },\n                type: \"long_task\" /* RumEventType.LONG_TASK */,\n                _dd: {\n                    discarded: false,\n                },\n            };\n            lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, {\n                rawRumEvent: rawRumEvent,\n                startTime: startClocks.relative,\n                domainContext: { performanceEntry: entry },\n            });\n        }\n    });\n}\n","import { isEmptyObject, assign, ErrorSource, generateUUID, computeRawError, computeStackTrace, Observable, trackRuntimeError, } from '@datadog/browser-core';\nimport { trackConsoleError } from './trackConsoleError';\nimport { trackReportError } from './trackReportError';\nexport function startErrorCollection(lifeCycle, configuration, pageStateHistory, featureFlagContexts) {\n    var errorObservable = new Observable();\n    trackConsoleError(errorObservable);\n    trackRuntimeError(errorObservable);\n    trackReportError(configuration, errorObservable);\n    errorObservable.subscribe(function (error) { return lifeCycle.notify(14 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, { error: error }); });\n    return doStartErrorCollection(lifeCycle, pageStateHistory, featureFlagContexts);\n}\nexport function doStartErrorCollection(lifeCycle, pageStateHistory, featureFlagContexts) {\n    lifeCycle.subscribe(14 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, function (_a) {\n        var error = _a.error, customerContext = _a.customerContext, savedCommonContext = _a.savedCommonContext;\n        lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, assign({\n            customerContext: customerContext,\n            savedCommonContext: savedCommonContext,\n        }, processError(error, pageStateHistory, featureFlagContexts)));\n    });\n    return {\n        addError: function (_a, savedCommonContext) {\n            var error = _a.error, handlingStack = _a.handlingStack, startClocks = _a.startClocks, customerContext = _a.context;\n            var stackTrace = error instanceof Error ? computeStackTrace(error) : undefined;\n            var rawError = computeRawError({\n                stackTrace: stackTrace,\n                originalError: error,\n                handlingStack: handlingStack,\n                startClocks: startClocks,\n                nonErrorPrefix: \"Provided\" /* NonErrorPrefix.PROVIDED */,\n                source: ErrorSource.CUSTOM,\n                handling: \"handled\" /* ErrorHandling.HANDLED */,\n            });\n            lifeCycle.notify(14 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, {\n                customerContext: customerContext,\n                savedCommonContext: savedCommonContext,\n                error: rawError,\n            });\n        },\n    };\n}\nfunction processError(error, pageStateHistory, featureFlagContexts) {\n    var rawRumEvent = {\n        date: error.startClocks.timeStamp,\n        error: {\n            id: generateUUID(),\n            message: error.message,\n            source: error.source,\n            stack: error.stack,\n            handling_stack: error.handlingStack,\n            type: error.type,\n            handling: error.handling,\n            causes: error.causes,\n            source_type: 'browser',\n            fingerprint: error.fingerprint,\n            csp: error.csp,\n        },\n        type: \"error\" /* RumEventType.ERROR */,\n        view: { in_foreground: pageStateHistory.wasInPageStateAt(\"active\" /* PageState.ACTIVE */, error.startClocks.relative) },\n    };\n    var featureFlagContext = featureFlagContexts.findFeatureFlagEvaluations(error.startClocks.relative);\n    if (featureFlagContext && !isEmptyObject(featureFlagContext)) {\n        rawRumEvent.feature_flags = featureFlagContext;\n    }\n    return {\n        rawRumEvent: rawRumEvent,\n        startTime: error.startClocks.relative,\n        domainContext: {\n            error: error.originalError,\n        },\n    };\n}\n","import { clocksNow, initConsoleObservable, ErrorSource, ConsoleApiName } from '@datadog/browser-core';\nexport function trackConsoleError(errorObservable) {\n    var subscription = initConsoleObservable([ConsoleApiName.error]).subscribe(function (consoleError) {\n        return errorObservable.notify({\n            startClocks: clocksNow(),\n            message: consoleError.message,\n            stack: consoleError.stack,\n            fingerprint: consoleError.fingerprint,\n            source: ErrorSource.CONSOLE,\n            handling: \"handled\" /* ErrorHandling.HANDLED */,\n            handlingStack: consoleError.handlingStack,\n        });\n    });\n    return {\n        stop: function () {\n            subscription.unsubscribe();\n        },\n    };\n}\n","import { clocksNow, ErrorSource, initReportObservable, RawReportType } from '@datadog/browser-core';\nexport function trackReportError(configuration, errorObservable) {\n    var subscription = initReportObservable(configuration, [\n        RawReportType.cspViolation,\n        RawReportType.intervention,\n    ]).subscribe(function (reportError) {\n        var rawError = {\n            startClocks: clocksNow(),\n            message: reportError.message,\n            stack: reportError.stack,\n            type: reportError.subtype,\n            source: ErrorSource.REPORT,\n            handling: \"unhandled\" /* ErrorHandling.UNHANDLED */,\n            originalError: reportError.originalReport,\n        };\n        if (reportError.originalReport.type === 'securitypolicyviolation') {\n            rawError.csp = {\n                disposition: reportError.originalReport.disposition,\n            };\n        }\n        return errorObservable.notify(rawError);\n    });\n    return {\n        stop: function () {\n            subscription.unsubscribe();\n        },\n    };\n}\n","import { combine, elapsed, generateUUID } from '@datadog/browser-core';\nexport function startVitalCollection(lifeCycle, pageStateHistory) {\n    var vitalStartsByName = new Map();\n    lifeCycle.subscribe(10 /* LifeCycleEventType.SESSION_RENEWED */, function () {\n        // Discard all the vitals that have not been stopped to avoid memory leaks\n        vitalStartsByName.clear();\n    });\n    function isValid(vital) {\n        return !pageStateHistory.wasInPageStateDuringPeriod(\"frozen\" /* PageState.FROZEN */, vital.startClocks.relative, vital.value);\n    }\n    return {\n        startDurationVital: function (vitalStart) {\n            vitalStartsByName.set(vitalStart.name, vitalStart);\n        },\n        stopDurationVital: function (vitalStop) {\n            var vitalStart = vitalStartsByName.get(vitalStop.name);\n            if (!vitalStart) {\n                return;\n            }\n            var vital = buildDurationVital(vitalStart, vitalStop);\n            vitalStartsByName.delete(vital.name);\n            if (isValid(vital)) {\n                lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, processVital(vital, true));\n            }\n        },\n    };\n}\nfunction buildDurationVital(vitalStart, vitalStop) {\n    return {\n        name: vitalStart.name,\n        type: \"duration\" /* VitalType.DURATION */,\n        startClocks: vitalStart.startClocks,\n        value: elapsed(vitalStart.startClocks.timeStamp, vitalStop.stopClocks.timeStamp),\n        context: combine(vitalStart.context, vitalStop.context),\n    };\n}\nfunction processVital(vital, valueComputedBySdk) {\n    var _a;\n    var rawRumEvent = {\n        date: vital.startClocks.timeStamp,\n        vital: {\n            id: generateUUID(),\n            type: vital.type,\n            name: vital.name,\n            custom: (_a = {},\n                _a[vital.name] = vital.value,\n                _a),\n        },\n        type: \"vital\" /* RumEventType.VITAL */,\n    };\n    if (valueComputedBySdk) {\n        rawRumEvent._dd = {\n            vital: {\n                computed_value: true,\n            },\n        };\n    }\n    return {\n        rawRumEvent: rawRumEvent,\n        startTime: vital.startClocks.relative,\n        customerContext: vital.context,\n        domainContext: {},\n    };\n}\n","/**\n * Internal context keep returning v1 format\n * to not break compatibility with logs data format\n */\nexport function startInternalContext(applicationId, sessionManager, viewContexts, actionContexts, urlContexts) {\n    return {\n        get: function (startTime) {\n            var viewContext = viewContexts.findView(startTime);\n            var urlContext = urlContexts.findUrl(startTime);\n            var session = sessionManager.findTrackedSession(startTime);\n            if (session && viewContext && urlContext) {\n                var actionId = actionContexts.findActionId(startTime);\n                return {\n                    application_id: applicationId,\n                    session_id: session.id,\n                    user_action: actionId ? { id: actionId } : undefined,\n                    view: { id: viewContext.id, name: viewContext.name, referrer: urlContext.referrer, url: urlContext.url },\n                };\n            }\n        },\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { clocksNow, computeRawError, computeStackTrace, combine, createContextManager, ErrorSource, monitored, sanitize, } from '@datadog/browser-core';\nexport var StatusType = {\n    debug: 'debug',\n    error: 'error',\n    info: 'info',\n    warn: 'warn',\n};\nexport var HandlerType = {\n    console: 'console',\n    http: 'http',\n    silent: 'silent',\n};\nexport var STATUSES = Object.keys(StatusType);\nvar Logger = /** @class */ (function () {\n    function Logger(handleLogStrategy, customerDataTracker, name, handlerType, level, loggerContext) {\n        if (handlerType === void 0) { handlerType = HandlerType.http; }\n        if (level === void 0) { level = StatusType.debug; }\n        if (loggerContext === void 0) { loggerContext = {}; }\n        this.handleLogStrategy = handleLogStrategy;\n        this.handlerType = handlerType;\n        this.level = level;\n        this.contextManager = createContextManager(customerDataTracker);\n        this.contextManager.setContext(loggerContext);\n        if (name) {\n            this.contextManager.setContextProperty('logger', { name: name });\n        }\n    }\n    Logger.prototype.log = function (message, messageContext, status, error) {\n        if (status === void 0) { status = StatusType.info; }\n        var errorContext;\n        if (error !== undefined && error !== null) {\n            var stackTrace = error instanceof Error ? computeStackTrace(error) : undefined;\n            var rawError = computeRawError({\n                stackTrace: stackTrace,\n                originalError: error,\n                nonErrorPrefix: \"Provided\" /* NonErrorPrefix.PROVIDED */,\n                source: ErrorSource.LOGGER,\n                handling: \"handled\" /* ErrorHandling.HANDLED */,\n                startClocks: clocksNow(),\n            });\n            errorContext = {\n                stack: rawError.stack,\n                kind: rawError.type,\n                message: rawError.message,\n                causes: rawError.causes,\n            };\n        }\n        var sanitizedMessageContext = sanitize(messageContext);\n        var context = errorContext\n            ? combine({ error: errorContext }, sanitizedMessageContext)\n            : sanitizedMessageContext;\n        this.handleLogStrategy({\n            message: sanitize(message),\n            context: context,\n            status: status,\n        }, this);\n    };\n    Logger.prototype.debug = function (message, messageContext, error) {\n        this.log(message, messageContext, StatusType.debug, error);\n    };\n    Logger.prototype.info = function (message, messageContext, error) {\n        this.log(message, messageContext, StatusType.info, error);\n    };\n    Logger.prototype.warn = function (message, messageContext, error) {\n        this.log(message, messageContext, StatusType.warn, error);\n    };\n    Logger.prototype.error = function (message, messageContext, error) {\n        this.log(message, messageContext, StatusType.error, error);\n    };\n    Logger.prototype.setContext = function (context) {\n        this.contextManager.setContext(context);\n    };\n    Logger.prototype.getContext = function () {\n        return this.contextManager.getContext();\n    };\n    Logger.prototype.setContextProperty = function (key, value) {\n        this.contextManager.setContextProperty(key, value);\n    };\n    Logger.prototype.removeContextProperty = function (key) {\n        this.contextManager.removeContextProperty(key);\n    };\n    Logger.prototype.clearContext = function () {\n        this.contextManager.clearContext();\n    };\n    Logger.prototype.setHandler = function (handler) {\n        this.handlerType = handler;\n    };\n    Logger.prototype.getHandler = function () {\n        return this.handlerType;\n    };\n    Logger.prototype.setLevel = function (level) {\n        this.level = level;\n    };\n    Logger.prototype.getLevel = function () {\n        return this.level;\n    };\n    __decorate([\n        monitored\n    ], Logger.prototype, \"log\", null);\n    return Logger;\n}());\nexport { Logger };\n","import { serializeConfiguration, assign, ONE_KIBI_BYTE, validateAndBuildConfiguration, display, removeDuplicates, ConsoleApiName, RawReportType, includes, objectValues, } from '@datadog/browser-core';\n/**\n * arbitrary value, byte precision not needed\n */\nexport var DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT = 32 * ONE_KIBI_BYTE;\nexport function validateAndBuildLogsConfiguration(initConfiguration) {\n    if (initConfiguration.usePciIntake === true && initConfiguration.site && initConfiguration.site !== 'datadoghq.com') {\n        display.warn('PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.');\n    }\n    var baseConfiguration = validateAndBuildConfiguration(initConfiguration);\n    var forwardConsoleLogs = validateAndBuildForwardOption(initConfiguration.forwardConsoleLogs, objectValues(ConsoleApiName), 'Forward Console Logs');\n    var forwardReports = validateAndBuildForwardOption(initConfiguration.forwardReports, objectValues(RawReportType), 'Forward Reports');\n    if (!baseConfiguration || !forwardConsoleLogs || !forwardReports) {\n        return;\n    }\n    if (initConfiguration.forwardErrorsToLogs && !includes(forwardConsoleLogs, ConsoleApiName.error)) {\n        forwardConsoleLogs.push(ConsoleApiName.error);\n    }\n    return assign({\n        forwardErrorsToLogs: initConfiguration.forwardErrorsToLogs !== false,\n        forwardConsoleLogs: forwardConsoleLogs,\n        forwardReports: forwardReports,\n        requestErrorResponseLengthLimit: DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT,\n    }, baseConfiguration);\n}\nexport function validateAndBuildForwardOption(option, allowedValues, label) {\n    if (option === undefined) {\n        return [];\n    }\n    if (!(option === 'all' || (Array.isArray(option) && option.every(function (api) { return includes(allowedValues, api); })))) {\n        display.error(\"\".concat(label, \" should be \\\"all\\\" or an array with allowed values \\\"\").concat(allowedValues.join('\", \"'), \"\\\"\"));\n        return;\n    }\n    return option === 'all' ? allowedValues : removeDuplicates(option);\n}\nexport function serializeLogsConfiguration(configuration) {\n    var baseSerializedInitConfiguration = serializeConfiguration(configuration);\n    return assign({\n        forward_errors_to_logs: configuration.forwardErrorsToLogs,\n        forward_console_logs: configuration.forwardConsoleLogs,\n        forward_reports: configuration.forwardReports,\n        use_pci_intake: configuration.usePciIntake,\n    }, baseSerializedInitConfiguration);\n}\n","import { addTelemetryUsage, assign, createContextManager, makePublicApi, monitor, checkUser, sanitizeUser, sanitize, createCustomerDataTrackerManager, storeContextManager, displayAlreadyInitializedError, deepClone, createTrackingConsentState, } from '@datadog/browser-core';\nimport { Logger } from '../domain/logger';\nimport { buildCommonContext } from '../domain/contexts/commonContext';\nimport { createPreStartStrategy } from './preStartLogs';\nvar LOGS_STORAGE_KEY = 'logs';\nexport function makeLogsPublicApi(startLogsImpl) {\n    var customerDataTrackerManager = createCustomerDataTrackerManager();\n    var globalContextManager = createContextManager(customerDataTrackerManager.getOrCreateTracker(2 /* CustomerDataType.GlobalContext */));\n    var userContextManager = createContextManager(customerDataTrackerManager.getOrCreateTracker(1 /* CustomerDataType.User */));\n    var trackingConsentState = createTrackingConsentState();\n    function getCommonContext() {\n        return buildCommonContext(globalContextManager, userContextManager);\n    }\n    var strategy = createPreStartStrategy(getCommonContext, trackingConsentState, function (initConfiguration, configuration) {\n        if (initConfiguration.storeContextsAcrossPages) {\n            storeContextManager(configuration, globalContextManager, LOGS_STORAGE_KEY, 2 /* CustomerDataType.GlobalContext */);\n            storeContextManager(configuration, userContextManager, LOGS_STORAGE_KEY, 1 /* CustomerDataType.User */);\n        }\n        var startLogsResult = startLogsImpl(initConfiguration, configuration, getCommonContext, trackingConsentState);\n        strategy = createPostStartStrategy(initConfiguration, startLogsResult);\n        return startLogsResult;\n    });\n    var customLoggers = {};\n    var mainLogger = new Logger(function () {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        return strategy.handleLog.apply(strategy, params);\n    }, customerDataTrackerManager.createDetachedTracker());\n    return makePublicApi({\n        logger: mainLogger,\n        init: monitor(function (initConfiguration) { return strategy.init(initConfiguration); }),\n        /**\n         * Set the tracking consent of the current user.\n         *\n         * @param {\"granted\" | \"not-granted\"} trackingConsent The user tracking consent\n         *\n         * Logs will be sent only if it is set to \"granted\". This value won't be stored by the library\n         * across page loads: you will need to call this method or set the appropriate `trackingConsent`\n         * field in the init() method at each page load.\n         *\n         * If this method is called before the init() method, the provided value will take precedence\n         * over the one provided as initialization parameter.\n         */\n        setTrackingConsent: monitor(function (trackingConsent) {\n            trackingConsentState.update(trackingConsent);\n            addTelemetryUsage({ feature: 'set-tracking-consent', tracking_consent: trackingConsent });\n        }),\n        getGlobalContext: monitor(function () { return globalContextManager.getContext(); }),\n        setGlobalContext: monitor(function (context) { return globalContextManager.setContext(context); }),\n        setGlobalContextProperty: monitor(function (key, value) { return globalContextManager.setContextProperty(key, value); }),\n        removeGlobalContextProperty: monitor(function (key) { return globalContextManager.removeContextProperty(key); }),\n        clearGlobalContext: monitor(function () { return globalContextManager.clearContext(); }),\n        createLogger: monitor(function (name, conf) {\n            if (conf === void 0) { conf = {}; }\n            customLoggers[name] = new Logger(function () {\n                var params = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    params[_i] = arguments[_i];\n                }\n                return strategy.handleLog.apply(strategy, params);\n            }, customerDataTrackerManager.createDetachedTracker(), sanitize(name), conf.handler, conf.level, sanitize(conf.context));\n            return customLoggers[name];\n        }),\n        getLogger: monitor(function (name) { return customLoggers[name]; }),\n        getInitConfiguration: monitor(function () { return deepClone(strategy.initConfiguration); }),\n        getInternalContext: monitor(function (startTime) { return strategy.getInternalContext(startTime); }),\n        setUser: monitor(function (newUser) {\n            if (checkUser(newUser)) {\n                userContextManager.setContext(sanitizeUser(newUser));\n            }\n        }),\n        getUser: monitor(function () { return userContextManager.getContext(); }),\n        setUserProperty: monitor(function (key, property) {\n            var _a;\n            var sanitizedProperty = sanitizeUser((_a = {}, _a[key] = property, _a))[key];\n            userContextManager.setContextProperty(key, sanitizedProperty);\n        }),\n        removeUserProperty: monitor(function (key) { return userContextManager.removeContextProperty(key); }),\n        clearUser: monitor(function () { return userContextManager.clearContext(); }),\n    });\n}\nfunction createPostStartStrategy(initConfiguration, startLogsResult) {\n    return assign({\n        init: function (initConfiguration) {\n            displayAlreadyInitializedError('DD_LOGS', initConfiguration);\n        },\n        initConfiguration: initConfiguration,\n    }, startLogsResult);\n}\n","import { Observable, performDraw, startSessionManager } from '@datadog/browser-core';\nexport var LOGS_SESSION_KEY = 'logs';\nexport function startLogsSessionManager(configuration, trackingConsentState) {\n    var sessionManager = startSessionManager(configuration, LOGS_SESSION_KEY, function (rawTrackingType) { return computeSessionState(configuration, rawTrackingType); }, trackingConsentState);\n    return {\n        findTrackedSession: function (startTime) {\n            var session = sessionManager.findActiveSession(startTime);\n            return session && session.trackingType === \"1\" /* LoggerTrackingType.TRACKED */\n                ? {\n                    id: session.id,\n                }\n                : undefined;\n        },\n        expireObservable: sessionManager.expireObservable,\n    };\n}\nexport function startLogsSessionManagerStub(configuration) {\n    var isTracked = computeTrackingType(configuration) === \"1\" /* LoggerTrackingType.TRACKED */;\n    var session = isTracked ? {} : undefined;\n    return {\n        findTrackedSession: function () { return session; },\n        expireObservable: new Observable(),\n    };\n}\nfunction computeTrackingType(configuration) {\n    if (!performDraw(configuration.sessionSampleRate)) {\n        return \"0\" /* LoggerTrackingType.NOT_TRACKED */;\n    }\n    return \"1\" /* LoggerTrackingType.TRACKED */;\n}\nfunction computeSessionState(configuration, rawSessionType) {\n    var trackingType = hasValidLoggerSession(rawSessionType) ? rawSessionType : computeTrackingType(configuration);\n    return {\n        trackingType: trackingType,\n        isTracked: trackingType === \"1\" /* LoggerTrackingType.TRACKED */,\n    };\n}\nfunction hasValidLoggerSession(trackingType) {\n    return trackingType === \"0\" /* LoggerTrackingType.NOT_TRACKED */ || trackingType === \"1\" /* LoggerTrackingType.TRACKED */;\n}\n","import { willSyntheticsInjectRum, addTelemetryDebug, getSyntheticsTestId, getSyntheticsResultId, } from '@datadog/browser-core';\nvar logsSentBeforeRumInjectionTelemetryAdded = false;\nexport function getRUMInternalContext(startTime) {\n    var browserWindow = window;\n    if (willSyntheticsInjectRum()) {\n        var context = getInternalContextFromRumGlobal(browserWindow.DD_RUM_SYNTHETICS);\n        if (!context && !logsSentBeforeRumInjectionTelemetryAdded) {\n            logsSentBeforeRumInjectionTelemetryAdded = true;\n            addTelemetryDebug('Logs sent before RUM is injected by the synthetics worker', {\n                testId: getSyntheticsTestId(),\n                resultId: getSyntheticsResultId(),\n            });\n        }\n        return context;\n    }\n    return getInternalContextFromRumGlobal(browserWindow.DD_RUM);\n    function getInternalContextFromRumGlobal(rumGlobal) {\n        if (rumGlobal && rumGlobal.getInternalContext) {\n            return rumGlobal.getInternalContext(startTime);\n        }\n    }\n}\nexport function resetRUMInternalContext() {\n    logsSentBeforeRumInjectionTelemetryAdded = false;\n}\n","var _a;\nimport { timeStampNow, ConsoleApiName, ErrorSource, initConsoleObservable } from '@datadog/browser-core';\nimport { StatusType } from '../logger';\nexport var LogStatusForApi = (_a = {},\n    _a[ConsoleApiName.log] = StatusType.info,\n    _a[ConsoleApiName.debug] = StatusType.debug,\n    _a[ConsoleApiName.info] = StatusType.info,\n    _a[ConsoleApiName.warn] = StatusType.warn,\n    _a[ConsoleApiName.error] = StatusType.error,\n    _a);\nexport function startConsoleCollection(configuration, lifeCycle) {\n    var consoleSubscription = initConsoleObservable(configuration.forwardConsoleLogs).subscribe(function (log) {\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                date: timeStampNow(),\n                message: log.message,\n                origin: ErrorSource.CONSOLE,\n                error: log.api === ConsoleApiName.error\n                    ? {\n                        stack: log.stack,\n                        fingerprint: log.fingerprint,\n                        causes: log.causes,\n                    }\n                    : undefined,\n                status: LogStatusForApi[log.api],\n            },\n        });\n    });\n    return {\n        stop: function () {\n            consoleSubscription.unsubscribe();\n        },\n    };\n}\n","var _a;\nimport { timeStampNow, ErrorSource, RawReportType, getFileFromStackTraceString, initReportObservable, } from '@datadog/browser-core';\nimport { StatusType } from '../logger';\nvar LogStatusForReport = (_a = {},\n    _a[RawReportType.cspViolation] = StatusType.error,\n    _a[RawReportType.intervention] = StatusType.error,\n    _a[RawReportType.deprecation] = StatusType.warn,\n    _a);\nexport function startReportCollection(configuration, lifeCycle) {\n    var reportSubscription = initReportObservable(configuration, configuration.forwardReports).subscribe(function (report) {\n        var message = report.message;\n        var status = LogStatusForReport[report.type];\n        var error;\n        if (status === StatusType.error) {\n            error = {\n                kind: report.subtype,\n                stack: report.stack,\n            };\n        }\n        else if (report.stack) {\n            message += \" Found in \".concat(getFileFromStackTraceString(report.stack));\n        }\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                date: timeStampNow(),\n                message: message,\n                origin: ErrorSource.REPORT,\n                error: error,\n                status: status,\n            },\n        });\n    });\n    return {\n        stop: function () {\n            reportSubscription.unsubscribe();\n        },\n    };\n}\n","import { ErrorSource, initXhrObservable, initFetchObservable, computeStackTrace, toStackTraceString, monitor, noop, readBytesFromStream, tryToClone, isServerError, } from '@datadog/browser-core';\nimport { StatusType } from '../logger';\nexport function startNetworkErrorCollection(configuration, lifeCycle) {\n    if (!configuration.forwardErrorsToLogs) {\n        return { stop: noop };\n    }\n    var xhrSubscription = initXhrObservable(configuration).subscribe(function (context) {\n        if (context.state === 'complete') {\n            handleResponse(\"xhr\" /* RequestType.XHR */, context);\n        }\n    });\n    var fetchSubscription = initFetchObservable().subscribe(function (context) {\n        if (context.state === 'resolve') {\n            handleResponse(\"fetch\" /* RequestType.FETCH */, context);\n        }\n    });\n    function handleResponse(type, request) {\n        if (!configuration.isIntakeUrl(request.url) && (isRejected(request) || isServerError(request.status))) {\n            if ('xhr' in request) {\n                computeXhrResponseData(request.xhr, configuration, onResponseDataAvailable);\n            }\n            else if (request.response) {\n                computeFetchResponseText(request.response, configuration, onResponseDataAvailable);\n            }\n            else if (request.error) {\n                computeFetchErrorText(request.error, configuration, onResponseDataAvailable);\n            }\n        }\n        function onResponseDataAvailable(responseData) {\n            var domainContext = {\n                isAborted: request.isAborted,\n            };\n            lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n                rawLogsEvent: {\n                    message: \"\".concat(format(type), \" error \").concat(request.method, \" \").concat(request.url),\n                    date: request.startClocks.timeStamp,\n                    error: {\n                        stack: responseData || 'Failed to load',\n                    },\n                    http: {\n                        method: request.method, // Cast resource method because of case mismatch cf issue RUMF-1152\n                        status_code: request.status,\n                        url: request.url,\n                    },\n                    status: StatusType.error,\n                    origin: ErrorSource.NETWORK,\n                },\n                domainContext: domainContext,\n            });\n        }\n    }\n    return {\n        stop: function () {\n            xhrSubscription.unsubscribe();\n            fetchSubscription.unsubscribe();\n        },\n    };\n}\n// TODO: ideally, computeXhrResponseData should always call the callback with a string instead of\n// `unknown`. But to keep backward compatibility, in the case of XHR with a `responseType` different\n// than \"text\", the response data should be whatever `xhr.response` is. This is a bit confusing as\n// Logs event 'stack' is expected to be a string. This should be changed in a future major version\n// as it could be a breaking change.\nexport function computeXhrResponseData(xhr, configuration, callback) {\n    if (typeof xhr.response === 'string') {\n        callback(truncateResponseText(xhr.response, configuration));\n    }\n    else {\n        callback(xhr.response);\n    }\n}\nexport function computeFetchErrorText(error, configuration, callback) {\n    callback(truncateResponseText(toStackTraceString(computeStackTrace(error)), configuration));\n}\nexport function computeFetchResponseText(response, configuration, callback) {\n    var clonedResponse = tryToClone(response);\n    if (!clonedResponse || !clonedResponse.body) {\n        // if the clone failed or if the body is null, let's not try to read it.\n        callback();\n    }\n    else if (!window.TextDecoder) {\n        // If the browser doesn't support TextDecoder, let's read the whole response then truncate it.\n        //\n        // This should only be the case on early versions of Edge (before they migrated to Chromium).\n        // Even if it could be possible to implement a workaround for the missing TextDecoder API (using\n        // a Blob and FileReader), we found another issue preventing us from reading only the first\n        // bytes from the response: contrary to other browsers, when reading from the cloned response,\n        // if the original response gets canceled, the cloned response is also canceled and we can't\n        // know about it.  In the following illustration, the promise returned by `reader.read()` may\n        // never be fulfilled:\n        //\n        // fetch('/').then((response) => {\n        //   const reader = response.clone().body.getReader()\n        //   readMore()\n        //   function readMore() {\n        //     reader.read().then(\n        //       (result) => {\n        //         if (result.done) {\n        //           console.log('done')\n        //         } else {\n        //           readMore()\n        //         }\n        //       },\n        //       () => console.log('error')\n        //     )\n        //   }\n        //   response.body.getReader().cancel()\n        // })\n        clonedResponse.text().then(monitor(function (text) { return callback(truncateResponseText(text, configuration)); }), monitor(function (error) { return callback(\"Unable to retrieve response: \".concat(error)); }));\n    }\n    else {\n        truncateResponseStream(clonedResponse.body, configuration.requestErrorResponseLengthLimit, function (error, responseText) {\n            if (error) {\n                callback(\"Unable to retrieve response: \".concat(error));\n            }\n            else {\n                callback(responseText);\n            }\n        });\n    }\n}\nfunction isRejected(request) {\n    return request.status === 0 && request.responseType !== 'opaque';\n}\nfunction truncateResponseText(responseText, configuration) {\n    if (responseText.length > configuration.requestErrorResponseLengthLimit) {\n        return \"\".concat(responseText.substring(0, configuration.requestErrorResponseLengthLimit), \"...\");\n    }\n    return responseText;\n}\nfunction format(type) {\n    if (\"xhr\" /* RequestType.XHR */ === type) {\n        return 'XHR';\n    }\n    return 'Fetch';\n}\nfunction truncateResponseStream(stream, bytesLimit, callback) {\n    readBytesFromStream(stream, function (error, bytes, limitExceeded) {\n        if (error) {\n            callback(error);\n        }\n        else {\n            var responseText = new TextDecoder().decode(bytes);\n            if (limitExceeded) {\n                responseText += '...';\n            }\n            callback(undefined, responseText);\n        }\n    }, {\n        bytesLimit: bytesLimit,\n        collectStreamBody: true,\n    });\n}\n","import { AbstractLifeCycle } from '@datadog/browser-core';\nexport var LifeCycle = (AbstractLifeCycle);\n","var _a;\nimport { includes, combine, ErrorSource, timeStampNow, originalConsoleMethods, globalConsole, } from '@datadog/browser-core';\nimport { StatusType, HandlerType } from '../logger';\nexport var STATUS_PRIORITIES = (_a = {},\n    _a[StatusType.debug] = 0,\n    _a[StatusType.info] = 1,\n    _a[StatusType.warn] = 2,\n    _a[StatusType.error] = 3,\n    _a);\nexport function startLoggerCollection(lifeCycle) {\n    function handleLog(logsMessage, logger, savedCommonContext, savedDate) {\n        var messageContext = combine(logger.getContext(), logsMessage.context);\n        if (isAuthorized(logsMessage.status, HandlerType.console, logger)) {\n            displayInConsole(logsMessage, messageContext);\n        }\n        if (isAuthorized(logsMessage.status, HandlerType.http, logger)) {\n            lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n                rawLogsEvent: {\n                    date: savedDate || timeStampNow(),\n                    message: logsMessage.message,\n                    status: logsMessage.status,\n                    origin: ErrorSource.LOGGER,\n                },\n                messageContext: messageContext,\n                savedCommonContext: savedCommonContext,\n            });\n        }\n    }\n    return {\n        handleLog: handleLog,\n    };\n}\nexport function isAuthorized(status, handlerType, logger) {\n    var loggerHandler = logger.getHandler();\n    var sanitizedHandlerType = Array.isArray(loggerHandler) ? loggerHandler : [loggerHandler];\n    return (STATUS_PRIORITIES[status] >= STATUS_PRIORITIES[logger.getLevel()] && includes(sanitizedHandlerType, handlerType));\n}\nfunction displayInConsole(logsMessage, messageContext) {\n    originalConsoleMethods[logsMessage.status].call(globalConsole, logsMessage.message, messageContext);\n}\n","import { defineGlobal, getGlobalObject } from '@datadog/browser-core';\nimport { makeLogsPublicApi } from '../boot/logsPublicApi';\nimport { startLogs } from '../boot/startLogs';\nexport { Logger, StatusType, HandlerType } from '../domain/logger';\nexport var datadogLogs = makeLogsPublicApi(startLogs);\ndefineGlobal(getGlobalObject(), 'DD_LOGS', datadogLogs);\n","export function buildCommonContext(globalContextManager, userContextManager) {\n    return {\n        view: {\n            referrer: document.referrer,\n            url: window.location.href,\n        },\n        context: globalContextManager.getContext(),\n        user: userContextManager.getContext(),\n    };\n}\n","import { BoundedBuffer, assign, canUseEventBridge, display, displayAlreadyInitializedError, noop, timeStampNow, } from '@datadog/browser-core';\nimport { validateAndBuildLogsConfiguration, } from '../domain/configuration';\nexport function createPreStartStrategy(getCommonContext, trackingConsentState, doStartLogs) {\n    var bufferApiCalls = new BoundedBuffer();\n    var cachedInitConfiguration;\n    var cachedConfiguration;\n    var trackingConsentStateSubscription = trackingConsentState.observable.subscribe(tryStartLogs);\n    function tryStartLogs() {\n        if (!cachedConfiguration || !cachedInitConfiguration || !trackingConsentState.isGranted()) {\n            return;\n        }\n        trackingConsentStateSubscription.unsubscribe();\n        var startLogsResult = doStartLogs(cachedInitConfiguration, cachedConfiguration);\n        bufferApiCalls.drain(startLogsResult);\n    }\n    return {\n        init: function (initConfiguration) {\n            if (!initConfiguration) {\n                display.error('Missing configuration');\n                return;\n            }\n            if (canUseEventBridge()) {\n                initConfiguration = overrideInitConfigurationForBridge(initConfiguration);\n            }\n            // Expose the initial configuration regardless of initialization success.\n            cachedInitConfiguration = initConfiguration;\n            if (cachedConfiguration) {\n                displayAlreadyInitializedError('DD_LOGS', initConfiguration);\n                return;\n            }\n            var configuration = validateAndBuildLogsConfiguration(initConfiguration);\n            if (!configuration) {\n                return;\n            }\n            cachedConfiguration = configuration;\n            trackingConsentState.tryToInit(configuration.trackingConsent);\n            tryStartLogs();\n        },\n        get initConfiguration() {\n            return cachedInitConfiguration;\n        },\n        getInternalContext: noop,\n        handleLog: function (message, statusType, context, date) {\n            if (context === void 0) { context = getCommonContext(); }\n            if (date === void 0) { date = timeStampNow(); }\n            bufferApiCalls.add(function (startLogsResult) { return startLogsResult.handleLog(message, statusType, context, date); });\n        },\n    };\n}\nfunction overrideInitConfigurationForBridge(initConfiguration) {\n    return assign({}, initConfiguration, { clientToken: 'empty' });\n}\n","import { sendToExtension, createPageExitObservable, willSyntheticsInjectRum, canUseEventBridge, } from '@datadog/browser-core';\nimport { startLogsSessionManager, startLogsSessionManagerStub } from '../domain/logsSessionManager';\nimport { startLogsAssembly } from '../domain/assembly';\nimport { startConsoleCollection } from '../domain/console/consoleCollection';\nimport { startReportCollection } from '../domain/report/reportCollection';\nimport { startNetworkErrorCollection } from '../domain/networkError/networkErrorCollection';\nimport { startRuntimeErrorCollection } from '../domain/runtimeError/runtimeErrorCollection';\nimport { LifeCycle } from '../domain/lifeCycle';\nimport { startLoggerCollection } from '../domain/logger/loggerCollection';\nimport { startLogsBatch } from '../transport/startLogsBatch';\nimport { startLogsBridge } from '../transport/startLogsBridge';\nimport { startInternalContext } from '../domain/contexts/internalContext';\nimport { startReportError } from '../domain/reportError';\nimport { startLogsTelemetry } from '../domain/logsTelemetry';\nexport function startLogs(initConfiguration, configuration, getCommonContext, \n// `startLogs` and its subcomponents assume tracking consent is granted initially and starts\n// collecting logs unconditionally. As such, `startLogs` should be called with a\n// `trackingConsentState` set to \"granted\".\ntrackingConsentState) {\n    var lifeCycle = new LifeCycle();\n    var cleanupTasks = [];\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, function (log) { return sendToExtension('logs', log); });\n    var reportError = startReportError(lifeCycle);\n    var pageExitObservable = createPageExitObservable(configuration);\n    var session = configuration.sessionStoreStrategyType && !canUseEventBridge() && !willSyntheticsInjectRum()\n        ? startLogsSessionManager(configuration, trackingConsentState)\n        : startLogsSessionManagerStub(configuration);\n    var stopLogsTelemetry = startLogsTelemetry(initConfiguration, configuration, reportError, pageExitObservable, session).stop;\n    cleanupTasks.push(function () { return stopLogsTelemetry(); });\n    startNetworkErrorCollection(configuration, lifeCycle);\n    startRuntimeErrorCollection(configuration, lifeCycle);\n    startConsoleCollection(configuration, lifeCycle);\n    startReportCollection(configuration, lifeCycle);\n    var handleLog = startLoggerCollection(lifeCycle).handleLog;\n    startLogsAssembly(session, configuration, lifeCycle, getCommonContext, reportError);\n    if (!canUseEventBridge()) {\n        var stopLogsBatch_1 = startLogsBatch(configuration, lifeCycle, reportError, pageExitObservable, session).stop;\n        cleanupTasks.push(function () { return stopLogsBatch_1(); });\n    }\n    else {\n        startLogsBridge(lifeCycle);\n    }\n    var internalContext = startInternalContext(session);\n    return {\n        handleLog: handleLog,\n        getInternalContext: internalContext.get,\n        stop: function () {\n            cleanupTasks.forEach(function (task) { return task(); });\n        },\n    };\n}\n","import { ErrorSource, addTelemetryDebug } from '@datadog/browser-core';\nimport { StatusType } from './logger';\nexport function startReportError(lifeCycle) {\n    return function (error) {\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                message: error.message,\n                date: error.startClocks.timeStamp,\n                origin: ErrorSource.AGENT,\n                status: StatusType.error,\n            },\n        });\n        addTelemetryDebug('Error reported to customer', { 'error.message': error.message });\n    };\n}\n","import { startTelemetry, canUseEventBridge, getEventBridge, startBatchWithReplica, createIdentityEncoder, isTelemetryReplicationAllowed, addTelemetryConfiguration, } from '@datadog/browser-core';\nimport { getRUMInternalContext } from './contexts/rumInternalContext';\nimport { serializeLogsConfiguration } from './configuration';\nexport function startLogsTelemetry(initConfiguration, configuration, reportError, pageExitObservable, session) {\n    var telemetry = startTelemetry(\"browser-logs-sdk\" /* TelemetryService.LOGS */, configuration);\n    telemetry.setContextProvider(function () {\n        var _a, _b, _c, _d, _e, _f;\n        return ({\n            application: {\n                id: (_a = getRUMInternalContext()) === null || _a === void 0 ? void 0 : _a.application_id,\n            },\n            session: {\n                id: (_b = session.findTrackedSession()) === null || _b === void 0 ? void 0 : _b.id,\n            },\n            view: {\n                id: (_d = (_c = getRUMInternalContext()) === null || _c === void 0 ? void 0 : _c.view) === null || _d === void 0 ? void 0 : _d.id,\n            },\n            action: {\n                id: (_f = (_e = getRUMInternalContext()) === null || _e === void 0 ? void 0 : _e.user_action) === null || _f === void 0 ? void 0 : _f.id,\n            },\n        });\n    });\n    var cleanupTasks = [];\n    if (canUseEventBridge()) {\n        var bridge_1 = getEventBridge();\n        var telemetrySubscription_1 = telemetry.observable.subscribe(function (event) { return bridge_1.send('internal_telemetry', event); });\n        cleanupTasks.push(function () { return telemetrySubscription_1.unsubscribe(); });\n    }\n    else {\n        var telemetryBatch_1 = startBatchWithReplica(configuration, {\n            endpoint: configuration.rumEndpointBuilder,\n            encoder: createIdentityEncoder(),\n        }, configuration.replica && {\n            endpoint: configuration.replica.rumEndpointBuilder,\n            encoder: createIdentityEncoder(),\n        }, reportError, pageExitObservable, session.expireObservable);\n        cleanupTasks.push(function () { return telemetryBatch_1.stop(); });\n        var telemetrySubscription_2 = telemetry.observable.subscribe(function (event) {\n            return telemetryBatch_1.add(event, isTelemetryReplicationAllowed(configuration));\n        });\n        cleanupTasks.push(function () { return telemetrySubscription_2.unsubscribe(); });\n    }\n    addTelemetryConfiguration(serializeLogsConfiguration(initConfiguration));\n    return {\n        telemetry: telemetry,\n        stop: function () {\n            cleanupTasks.forEach(function (task) { return task(); });\n        },\n    };\n}\n","import { noop, ErrorSource, trackRuntimeError, Observable } from '@datadog/browser-core';\nimport { StatusType } from '../logger';\nexport function startRuntimeErrorCollection(configuration, lifeCycle) {\n    if (!configuration.forwardErrorsToLogs) {\n        return { stop: noop };\n    }\n    var rawErrorObservable = new Observable();\n    var stopRuntimeErrorTracking = trackRuntimeError(rawErrorObservable).stop;\n    var rawErrorSubscription = rawErrorObservable.subscribe(function (rawError) {\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                message: rawError.message,\n                date: rawError.startClocks.timeStamp,\n                error: {\n                    kind: rawError.type,\n                    stack: rawError.stack,\n                    causes: rawError.causes,\n                },\n                origin: ErrorSource.SOURCE,\n                status: StatusType.error,\n            },\n        });\n    });\n    return {\n        stop: function () {\n            stopRuntimeErrorTracking();\n            rawErrorSubscription.unsubscribe();\n        },\n    };\n}\n","export function startInternalContext(sessionManager) {\n    return {\n        get: function (startTime) {\n            var trackedSession = sessionManager.findTrackedSession(startTime);\n            if (trackedSession) {\n                return {\n                    session_id: trackedSession.id,\n                };\n            }\n        },\n    };\n}\n","import { ErrorSource, combine, createEventRateLimiter, getRelativeTime, isEmptyObject } from '@datadog/browser-core';\nimport { STATUSES } from './logger';\nimport { getRUMInternalContext } from './contexts/rumInternalContext';\nexport function startLogsAssembly(sessionManager, configuration, lifeCycle, getCommonContext, reportError) {\n    var statusWithCustom = STATUSES.concat(['custom']);\n    var logRateLimiters = {};\n    statusWithCustom.forEach(function (status) {\n        logRateLimiters[status] = createEventRateLimiter(status, configuration.eventRateLimiterThreshold, reportError);\n    });\n    lifeCycle.subscribe(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, function (_a) {\n        var _b, _c;\n        var rawLogsEvent = _a.rawLogsEvent, _d = _a.messageContext, messageContext = _d === void 0 ? undefined : _d, _e = _a.savedCommonContext, savedCommonContext = _e === void 0 ? undefined : _e, domainContext = _a.domainContext;\n        var startTime = getRelativeTime(rawLogsEvent.date);\n        var session = sessionManager.findTrackedSession(startTime);\n        if (!session) {\n            return;\n        }\n        var commonContext = savedCommonContext || getCommonContext();\n        var log = combine({\n            service: configuration.service,\n            session_id: session.id,\n            // Insert user first to allow overrides from global context\n            usr: !isEmptyObject(commonContext.user) ? commonContext.user : undefined,\n            view: commonContext.view,\n        }, commonContext.context, getRUMInternalContext(startTime), rawLogsEvent, messageContext);\n        if (((_b = configuration.beforeSend) === null || _b === void 0 ? void 0 : _b.call(configuration, log, domainContext)) === false ||\n            (log.origin !== ErrorSource.AGENT &&\n                ((_c = logRateLimiters[log.status]) !== null && _c !== void 0 ? _c : logRateLimiters['custom']).isLimitReached())) {\n            return;\n        }\n        lifeCycle.notify(1 /* LifeCycleEventType.LOG_COLLECTED */, log);\n    });\n}\n","import { getEventBridge } from '@datadog/browser-core';\nexport function startLogsBridge(lifeCycle) {\n    var bridge = getEventBridge();\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, function (serverLogsEvent) {\n        bridge.send('log', serverLogsEvent);\n    });\n}\n","import { createIdentityEncoder, startBatchWithReplica } from '@datadog/browser-core';\nexport function startLogsBatch(configuration, lifeCycle, reportError, pageExitObservable, session) {\n    var batch = startBatchWithReplica(configuration, {\n        endpoint: configuration.logsEndpointBuilder,\n        encoder: createIdentityEncoder(),\n    }, configuration.replica && {\n        endpoint: configuration.replica.logsEndpointBuilder,\n        encoder: createIdentityEncoder(),\n    }, reportError, pageExitObservable, session.expireObservable);\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, function (serverLogsEvent) {\n        batch.add(serverLogsEvent);\n    });\n    return batch;\n}\n","import { get, extend } from 'underscore';\nimport { datadogRum } from '@datadog/browser-rum';\nimport { datadogLogs } from '@datadog/browser-logs';\n\nimport { datadogConfig as config, versions, appConfig } from './config';\n\nlet ddInitialized = false;\n\nfunction getEnv() {\n  return `${ appConfig.env }.${ appConfig.stackId }`;\n}\n\nfunction isPdfPrinter() {\n  const urlPaths = location.pathname.substring(1).split('/');\n  return (urlPaths[0] === 'formapp' && urlPaths[1] === 'pdf');\n}\n\nfunction initLogs({ isForm }) {\n  if (_TEST_) return;\n  datadogLogs.init({\n    env: getEnv(),\n    clientToken: config.clientToken,\n    site: 'datadoghq.com',\n    service: isForm ? 'care-ops-forms' : 'care-ops-frontend',\n    forwardErrorsToLogs: true,\n    version: versions.frontend,\n    useSecureSessionCookie: true,\n    useCrossSiteSessionCookie: true,\n    beforeSend(log) {\n      // Remove uncaught rejected 401 & 500 responses\n      if (String(log.message).includes('Uncaught \"[Response]\"')) return false;\n      // Remove logging of offline fetch errors\n      if (String(log.message).includes('Failed to fetch')) return false;\n      return (get(log, ['http', 'status_code']) !== 0);\n    },\n  });\n}\n\nfunction initRum({ isForm }) {\n  if (isPdfPrinter() || _TEST_) return;\n  datadogRum.init({\n    env: getEnv(),\n    applicationId: config.applicationId,\n    clientToken: config.clientToken,\n    site: 'datadoghq.com',\n    service: isForm ? 'care-ops-forms' : 'care-ops-frontend',\n    version: versions.frontend,\n    useSecureSessionCookie: true,\n    useCrossSiteSessionCookie: true,\n    allowedTracingUrls: [window.origin],\n    trackLongTasks: true,\n    trackResources: true,\n    trackUserInteractions: true,\n    defaultPrivacyLevel: 'allow',\n    enableExperimentalFeatures: ['clickmap'],\n    startSessionReplayRecordingManually: true,\n    sessionReplaySampleRate: 100,\n    beforeSend(event, context) {\n      // Add header/response context to api errors\n      if (event.type === 'resource' && event.resource.type === 'fetch') {\n        if (get(context, 'response.status') >= 400) {\n          extend(event.context, { context });\n        }\n      }\n    },\n  });\n}\n\nfunction setUser(attrs) {\n  if (!ddInitialized) return;\n  datadogRum.setUser(attrs);\n  datadogRum.startSessionReplayRecording();\n}\n\nfunction addError(error) {\n  if (!ddInitialized) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n    return;\n  }\n  datadogRum.addError(error);\n}\n\nasync function logResponse(url, options, response) {\n  if (!ddInitialized) return;\n\n  response = response.clone();\n\n  const contentType = String(response.headers.get('Content-Type'));\n  const responseHeaders = Object.fromEntries(response.headers);\n  const responseBody = contentType.includes('json') ? await response.json() : await response.text();\n\n  datadogLogs.logger.info(`Response status ${ response.status }`, {\n    url,\n    options,\n    status: response.status,\n    responseHeaders,\n    responseBody,\n  });\n}\n\nfunction initDataDog({ isForm }) {\n  // NOTE: Remove when developing and testing Datadog\n  if (_DEVELOP_) return;\n  initLogs({ isForm });\n  initRum({ isForm });\n  ddInitialized = true;\n}\n\nexport {\n  initDataDog,\n  setUser,\n  addError,\n  logResponse,\n};\n","export default function getRootRoute() {\n  return location.pathname.substring(1).split('/').shift();\n}\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw new $TypeError(tryToString(argument) + ' is not a function');\n};\n","'use strict';\nvar isPossiblePrototype = require('../internals/is-possible-prototype');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (isPossiblePrototype(argument)) return argument;\n  throw new $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n","'use strict';\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw new $TypeError('Incorrect invocation');\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw new $TypeError($String(argument) + ' is not an object');\n};\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    if (length === 0) return !IS_INCLUDES && -1;\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el !== el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value !== value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","'use strict';\nvar hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","'use strict';\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  if (DESCRIPTORS) definePropertyModule.f(object, key, createPropertyDescriptor(0, value));\n  else object[key] = value;\n};\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","'use strict';\nvar global = require('../internals/global');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] !== 7;\n});\n","'use strict';\nvar global = require('../internals/global');\nvar tryNodeRequire = require('../internals/try-node-require');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = global.structuredClone;\nvar $ArrayBuffer = global.ArrayBuffer;\nvar $MessageChannel = global.MessageChannel;\nvar detach = false;\nvar WorkerThreads, channel, buffer, $detach;\n\nif (PROPER_STRUCTURED_CLONE_TRANSFER) {\n  detach = function (transferable) {\n    structuredClone(transferable, { transfer: [transferable] });\n  };\n} else if ($ArrayBuffer) try {\n  if (!$MessageChannel) {\n    WorkerThreads = tryNodeRequire('worker_threads');\n    if (WorkerThreads) $MessageChannel = WorkerThreads.MessageChannel;\n  }\n\n  if ($MessageChannel) {\n    channel = new $MessageChannel();\n    buffer = new $ArrayBuffer(2);\n\n    $detach = function (transferable) {\n      channel.port1.postMessage(null, [transferable]);\n    };\n\n    if (buffer.byteLength === 2) {\n      $detach(buffer);\n      if (buffer.byteLength === 0) detach = $detach;\n    }\n  }\n} catch (error) { /* empty */ }\n\nmodule.exports = detach;\n","'use strict';\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","'use strict';\nmodule.exports = {\n  IndexSizeError: { s: 'INDEX_SIZE_ERR', c: 1, m: 1 },\n  DOMStringSizeError: { s: 'DOMSTRING_SIZE_ERR', c: 2, m: 0 },\n  HierarchyRequestError: { s: 'HIERARCHY_REQUEST_ERR', c: 3, m: 1 },\n  WrongDocumentError: { s: 'WRONG_DOCUMENT_ERR', c: 4, m: 1 },\n  InvalidCharacterError: { s: 'INVALID_CHARACTER_ERR', c: 5, m: 1 },\n  NoDataAllowedError: { s: 'NO_DATA_ALLOWED_ERR', c: 6, m: 0 },\n  NoModificationAllowedError: { s: 'NO_MODIFICATION_ALLOWED_ERR', c: 7, m: 1 },\n  NotFoundError: { s: 'NOT_FOUND_ERR', c: 8, m: 1 },\n  NotSupportedError: { s: 'NOT_SUPPORTED_ERR', c: 9, m: 1 },\n  InUseAttributeError: { s: 'INUSE_ATTRIBUTE_ERR', c: 10, m: 1 },\n  InvalidStateError: { s: 'INVALID_STATE_ERR', c: 11, m: 1 },\n  SyntaxError: { s: 'SYNTAX_ERR', c: 12, m: 1 },\n  InvalidModificationError: { s: 'INVALID_MODIFICATION_ERR', c: 13, m: 1 },\n  NamespaceError: { s: 'NAMESPACE_ERR', c: 14, m: 1 },\n  InvalidAccessError: { s: 'INVALID_ACCESS_ERR', c: 15, m: 1 },\n  ValidationError: { s: 'VALIDATION_ERR', c: 16, m: 0 },\n  TypeMismatchError: { s: 'TYPE_MISMATCH_ERR', c: 17, m: 1 },\n  SecurityError: { s: 'SECURITY_ERR', c: 18, m: 1 },\n  NetworkError: { s: 'NETWORK_ERR', c: 19, m: 1 },\n  AbortError: { s: 'ABORT_ERR', c: 20, m: 1 },\n  URLMismatchError: { s: 'URL_MISMATCH_ERR', c: 21, m: 1 },\n  QuotaExceededError: { s: 'QUOTA_EXCEEDED_ERR', c: 22, m: 1 },\n  TimeoutError: { s: 'TIMEOUT_ERR', c: 23, m: 1 },\n  InvalidNodeTypeError: { s: 'INVALID_NODE_TYPE_ERR', c: 24, m: 1 },\n  DataCloneError: { s: 'DATA_CLONE_ERR', c: 25, m: 1 }\n};\n","'use strict';\nvar IS_DENO = require('../internals/engine-is-deno');\nvar IS_NODE = require('../internals/engine-is-node');\n\nmodule.exports = !IS_DENO && !IS_NODE\n  && typeof window == 'object'\n  && typeof document == 'object';\n","'use strict';\n/* global Deno -- Deno case */\nmodule.exports = typeof Deno == 'object' && Deno && typeof Deno.version == 'object';\n","'use strict';\nvar global = require('../internals/global');\nvar classof = require('../internals/classof-raw');\n\nmodule.exports = classof(global.process) === 'process';\n","'use strict';\nmodule.exports = typeof navigator != 'undefined' && String(navigator.userAgent) || '';\n","'use strict';\nvar global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","'use strict';\n// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String(new $Error(arg).stack); })('zxcasd');\n// eslint-disable-next-line redos/no-vulnerable -- safe\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = !fails(function () {\n  var error = new Error('a');\n  if (!('stack' in error)) return true;\n  // eslint-disable-next-line es/no-object-defineproperty -- safe\n  Object.defineProperty(error, 'stack', createPropertyDescriptor(1, 7));\n  return error.stack !== 7;\n});\n","'use strict';\nvar global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = global[TARGET] && global[TARGET].prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","'use strict';\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\n\nmodule.exports = function (object, key, method) {\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));\n  } catch (error) { /* empty */ }\n};\n","'use strict';\nvar classofRaw = require('../internals/classof-raw');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThis(fn);\n};\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call.apply(fn, arguments);\n  };\n};\n","'use strict';\nvar global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","'use strict';\nvar classof = require('../internals/classof');\nvar getMethod = require('../internals/get-method');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (!isNullOrUndefined(it)) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw new $TypeError(tryToString(argument) + ' is not iterable');\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","'use strict';\nvar check = function (it) {\n  return it && it.Math === Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  check(typeof this == 'object' && this) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","'use strict';\nmodule.exports = {};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a !== 7;\n});\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) === 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","'use strict';\nvar NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw new TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","'use strict';\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar documentAll = typeof document == 'object' && document.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nmodule.exports = typeof documentAll == 'undefined' && documentAll !== undefined ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.test(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, [], argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","'use strict';\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value === POLYFILL ? true\n    : value === NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","'use strict';\n// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","'use strict';\nvar isCallable = require('../internals/is-callable');\n\nmodule.exports = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nmodule.exports = function (argument) {\n  return isObject(argument) || argument === null;\n};\n","'use strict';\nmodule.exports = false;\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","'use strict';\nvar call = require('../internals/function-call');\n\nmodule.exports = function (record, fn, ITERATOR_INSTEAD_OF_RECORD) {\n  var iterator = ITERATOR_INSTEAD_OF_RECORD ? record : record.iterator;\n  var next = record.next;\n  var step, result;\n  while (!(step = call(next, iterator)).done) {\n    result = fn(step.value);\n    if (result !== undefined) return result;\n  }\n};\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar $TypeError = TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_RECORD = !!(options && options.IS_RECORD);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal', condition);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_RECORD) {\n    iterator = iterable.iterator;\n  } else if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw new $TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = IS_RECORD ? iterable.next : iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getMethod = require('../internals/get-method');\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n","'use strict';\nmodule.exports = {};\n","'use strict';\nvar toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar $String = String;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\nvar stringSlice = uncurryThis(''.slice);\nvar replace = uncurryThis(''.replace);\nvar join = uncurryThis([].join);\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (stringSlice($String(name), 0, 7) === 'Symbol(') {\n    name = '[' + replace($String(name), /^Symbol\\(([^)]*)\\).*$/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\n// eslint-disable-next-line es/no-map -- safe\nvar MapPrototype = Map.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-map -- safe\n  Map: Map,\n  set: uncurryThis(MapPrototype.set),\n  get: uncurryThis(MapPrototype.get),\n  has: uncurryThis(MapPrototype.has),\n  remove: uncurryThis(MapPrototype['delete']),\n  proto: MapPrototype\n};\n","'use strict';\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","'use strict';\nvar toString = require('../internals/to-string');\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw new $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","'use strict';\nvar internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","'use strict';\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","'use strict';\n/* eslint-disable no-proto -- safe */\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar isObject = require('../internals/is-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    requireObjectCoercible(O);\n    aPossiblePrototype(proto);\n    if (!isObject(O)) return O;\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","'use strict';\nvar call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw new $TypeError(\"Can't convert object to primitive value\");\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.hasIndices) result += 'd';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.unicodeSets) result += 'v';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar hasOwn = require('../internals/has-own-property');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar regExpFlags = require('../internals/regexp-flags');\n\nvar RegExpPrototype = RegExp.prototype;\n\nmodule.exports = function (R) {\n  var flags = R.flags;\n  return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R)\n    ? call(regExpFlags, R) : flags;\n};\n","'use strict';\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw new $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\n// eslint-disable-next-line es/no-set -- safe\nvar SetPrototype = Set.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-set -- safe\n  Set: Set,\n  add: uncurryThis(SetPrototype.add),\n  has: uncurryThis(SetPrototype.has),\n  remove: uncurryThis(SetPrototype['delete']),\n  proto: SetPrototype\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar iterateSimple = require('../internals/iterate-simple');\nvar SetHelpers = require('../internals/set-helpers');\n\nvar Set = SetHelpers.Set;\nvar SetPrototype = SetHelpers.proto;\nvar forEach = uncurryThis(SetPrototype.forEach);\nvar keys = uncurryThis(SetPrototype.keys);\nvar next = keys(new Set()).next;\n\nmodule.exports = function (set, fn, interruptible) {\n  return interruptible ? iterateSimple({ iterator: keys(set), next: next }, fn) : forEach(set, fn);\n};\n","'use strict';\nvar shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar globalThis = require('../internals/global');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = module.exports = globalThis[SHARED] || defineGlobalProperty(SHARED, {});\n\n(store.versions || (store.versions = [])).push({\n  version: '3.37.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2024 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","'use strict';\nvar store = require('../internals/shared-store');\n\nmodule.exports = function (key, value) {\n  return store[key] || (store[key] = value || {});\n};\n","'use strict';\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar V8 = require('../internals/engine-v8-version');\nvar IS_BROWSER = require('../internals/engine-is-browser');\nvar IS_DENO = require('../internals/engine-is-deno');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar structuredClone = global.structuredClone;\n\nmodule.exports = !!structuredClone && !fails(function () {\n  // prevent V8 ArrayBufferDetaching protector cell invalidation and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if ((IS_DENO && V8 > 92) || (IS_NODE && V8 > 94) || (IS_BROWSER && V8 > 97)) return false;\n  var buffer = new ArrayBuffer(8);\n  var clone = structuredClone(buffer, { transfer: [buffer] });\n  return buffer.byteLength !== 0 || clone.byteLength !== 8;\n});\n","'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\nvar global = require('../internals/global');\n\nvar $String = global.String;\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol('symbol detection');\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,\n  // of course, fail.\n  return !$String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","'use strict';\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","'use strict';\nvar trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  var len = toIntegerOrInfinity(argument);\n  return len > 0 ? min(len, 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","'use strict';\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw new $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","'use strict';\nvar classof = require('../internals/classof');\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n","'use strict';\nvar IS_NODE = require('../internals/engine-is-node');\n\nmodule.exports = function (name) {\n  try {\n    // eslint-disable-next-line no-new-func -- safe\n    if (IS_NODE) return Function('return require(\"' + name + '\")')();\n  } catch (error) { /* empty */ }\n};\n","'use strict';\nvar $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype !== 42;\n});\n","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\nvar global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","'use strict';\nvar global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar Symbol = global.Symbol;\nvar WellKnownSymbolsStore = shared('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)\n      ? Symbol[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar defineProperty = require('../internals/object-define-property').f;\nvar hasOwn = require('../internals/has-own-property');\nvar anInstance = require('../internals/an-instance');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar DOMExceptionConstants = require('../internals/dom-exception-constants');\nvar clearErrorStack = require('../internals/error-stack-clear');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nvar DOM_EXCEPTION = 'DOMException';\nvar Error = getBuiltIn('Error');\nvar NativeDOMException = getBuiltIn(DOM_EXCEPTION);\n\nvar $DOMException = function DOMException() {\n  anInstance(this, DOMExceptionPrototype);\n  var argumentsLength = arguments.length;\n  var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);\n  var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');\n  var that = new NativeDOMException(message, name);\n  var error = new Error(message);\n  error.name = DOM_EXCEPTION;\n  defineProperty(that, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));\n  inheritIfRequired(that, this, $DOMException);\n  return that;\n};\n\nvar DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;\n\nvar ERROR_HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);\nvar DOM_EXCEPTION_HAS_STACK = 'stack' in new NativeDOMException(1, 2);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(global, DOM_EXCEPTION);\n\n// Bun ~ 0.1.1 DOMException have incorrect descriptor and we can't redefine it\n// https://github.com/Jarred-Sumner/bun/issues/399\nvar BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);\n\nvar FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;\n\n// `DOMException` constructor patch for `.stack` where it's required\n// https://webidl.spec.whatwg.org/#es-DOMException-specialness\n$({ global: true, constructor: true, forced: IS_PURE || FORCED_CONSTRUCTOR }, { // TODO: fix export logic\n  DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException\n});\n\nvar PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);\nvar PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;\n\nif (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {\n  if (!IS_PURE) {\n    defineProperty(PolyfilledDOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, PolyfilledDOMException));\n  }\n\n  for (var key in DOMExceptionConstants) if (hasOwn(DOMExceptionConstants, key)) {\n    var constant = DOMExceptionConstants[key];\n    var constantName = constant.s;\n    if (!hasOwn(PolyfilledDOMException, constantName)) {\n      defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));\n    }\n  }\n}\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar uid = require('../internals/uid');\nvar isCallable = require('../internals/is-callable');\nvar isConstructor = require('../internals/is-constructor');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar iterate = require('../internals/iterate');\nvar anObject = require('../internals/an-object');\nvar classof = require('../internals/classof');\nvar hasOwn = require('../internals/has-own-property');\nvar createProperty = require('../internals/create-property');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\nvar getRegExpFlags = require('../internals/regexp-get-flags');\nvar MapHelpers = require('../internals/map-helpers');\nvar SetHelpers = require('../internals/set-helpers');\nvar setIterate = require('../internals/set-iterate');\nvar detachTransferable = require('../internals/detach-transferable');\nvar ERROR_STACK_INSTALLABLE = require('../internals/error-stack-installable');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar Object = global.Object;\nvar Array = global.Array;\nvar Date = global.Date;\nvar Error = global.Error;\nvar TypeError = global.TypeError;\nvar PerformanceMark = global.PerformanceMark;\nvar DOMException = getBuiltIn('DOMException');\nvar Map = MapHelpers.Map;\nvar mapHas = MapHelpers.has;\nvar mapGet = MapHelpers.get;\nvar mapSet = MapHelpers.set;\nvar Set = SetHelpers.Set;\nvar setAdd = SetHelpers.add;\nvar setHas = SetHelpers.has;\nvar objectKeys = getBuiltIn('Object', 'keys');\nvar push = uncurryThis([].push);\nvar thisBooleanValue = uncurryThis(true.valueOf);\nvar thisNumberValue = uncurryThis(1.0.valueOf);\nvar thisStringValue = uncurryThis(''.valueOf);\nvar thisTimeValue = uncurryThis(Date.prototype.getTime);\nvar PERFORMANCE_MARK = uid('structuredClone');\nvar DATA_CLONE_ERROR = 'DataCloneError';\nvar TRANSFERRING = 'Transferring';\n\nvar checkBasicSemantic = function (structuredCloneImplementation) {\n  return !fails(function () {\n    var set1 = new global.Set([7]);\n    var set2 = structuredCloneImplementation(set1);\n    var number = structuredCloneImplementation(Object(7));\n    return set2 === set1 || !set2.has(7) || !isObject(number) || +number !== 7;\n  }) && structuredCloneImplementation;\n};\n\nvar checkErrorsCloning = function (structuredCloneImplementation, $Error) {\n  return !fails(function () {\n    var error = new $Error();\n    var test = structuredCloneImplementation({ a: error, b: error });\n    return !(test && test.a === test.b && test.a instanceof $Error && test.a.stack === error.stack);\n  });\n};\n\n// https://github.com/whatwg/html/pull/5749\nvar checkNewErrorsCloningSemantic = function (structuredCloneImplementation) {\n  return !fails(function () {\n    var test = structuredCloneImplementation(new global.AggregateError([1], PERFORMANCE_MARK, { cause: 3 }));\n    return test.name !== 'AggregateError' || test.errors[0] !== 1 || test.message !== PERFORMANCE_MARK || test.cause !== 3;\n  });\n};\n\n// FF94+, Safari 15.4+, Chrome 98+, NodeJS 17.0+, Deno 1.13+\n// FF<103 and Safari implementations can't clone errors\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1556604\n// FF103 can clone errors, but `.stack` of clone is an empty string\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1778762\n// FF104+ fixed it on usual errors, but not on DOMExceptions\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1777321\n// Chrome <102 returns `null` if cloned object contains multiple references to one error\n// https://bugs.chromium.org/p/v8/issues/detail?id=12542\n// NodeJS implementation can't clone DOMExceptions\n// https://github.com/nodejs/node/issues/41038\n// only FF103+ supports new (html/5749) error cloning semantic\nvar nativeStructuredClone = global.structuredClone;\n\nvar FORCED_REPLACEMENT = IS_PURE\n  || !checkErrorsCloning(nativeStructuredClone, Error)\n  || !checkErrorsCloning(nativeStructuredClone, DOMException)\n  || !checkNewErrorsCloningSemantic(nativeStructuredClone);\n\n// Chrome 82+, Safari 14.1+, Deno 1.11+\n// Chrome 78-81 implementation swaps `.name` and `.message` of cloned `DOMException`\n// Chrome returns `null` if cloned object contains multiple references to one error\n// Safari 14.1 implementation doesn't clone some `RegExp` flags, so requires a workaround\n// Safari implementation can't clone errors\n// Deno 1.2-1.10 implementations too naive\n// NodeJS 16.0+ does not have `PerformanceMark` constructor\n// NodeJS <17.2 structured cloning implementation from `performance.mark` is too naive\n// and can't clone, for example, `RegExp` or some boxed primitives\n// https://github.com/nodejs/node/issues/40840\n// no one of those implementations supports new (html/5749) error cloning semantic\nvar structuredCloneFromMark = !nativeStructuredClone && checkBasicSemantic(function (value) {\n  return new PerformanceMark(PERFORMANCE_MARK, { detail: value }).detail;\n});\n\nvar nativeRestrictedStructuredClone = checkBasicSemantic(nativeStructuredClone) || structuredCloneFromMark;\n\nvar throwUncloneable = function (type) {\n  throw new DOMException('Uncloneable type: ' + type, DATA_CLONE_ERROR);\n};\n\nvar throwUnpolyfillable = function (type, action) {\n  throw new DOMException((action || 'Cloning') + ' of ' + type + ' cannot be properly polyfilled in this engine', DATA_CLONE_ERROR);\n};\n\nvar tryNativeRestrictedStructuredClone = function (value, type) {\n  if (!nativeRestrictedStructuredClone) throwUnpolyfillable(type);\n  return nativeRestrictedStructuredClone(value);\n};\n\nvar createDataTransfer = function () {\n  var dataTransfer;\n  try {\n    dataTransfer = new global.DataTransfer();\n  } catch (error) {\n    try {\n      dataTransfer = new global.ClipboardEvent('').clipboardData;\n    } catch (error2) { /* empty */ }\n  }\n  return dataTransfer && dataTransfer.items && dataTransfer.files ? dataTransfer : null;\n};\n\nvar cloneBuffer = function (value, map, $type) {\n  if (mapHas(map, value)) return mapGet(map, value);\n\n  var type = $type || classof(value);\n  var clone, length, options, source, target, i;\n\n  if (type === 'SharedArrayBuffer') {\n    if (nativeRestrictedStructuredClone) clone = nativeRestrictedStructuredClone(value);\n    // SharedArrayBuffer should use shared memory, we can't polyfill it, so return the original\n    else clone = value;\n  } else {\n    var DataView = global.DataView;\n\n    // `ArrayBuffer#slice` is not available in IE10\n    // `ArrayBuffer#slice` and `DataView` are not available in old FF\n    if (!DataView && !isCallable(value.slice)) throwUnpolyfillable('ArrayBuffer');\n    // detached buffers throws in `DataView` and `.slice`\n    try {\n      if (isCallable(value.slice) && !value.resizable) {\n        clone = value.slice(0);\n      } else {\n        length = value.byteLength;\n        options = 'maxByteLength' in value ? { maxByteLength: value.maxByteLength } : undefined;\n        // eslint-disable-next-line es/no-resizable-and-growable-arraybuffers -- safe\n        clone = new ArrayBuffer(length, options);\n        source = new DataView(value);\n        target = new DataView(clone);\n        for (i = 0; i < length; i++) {\n          target.setUint8(i, source.getUint8(i));\n        }\n      }\n    } catch (error) {\n      throw new DOMException('ArrayBuffer is detached', DATA_CLONE_ERROR);\n    }\n  }\n\n  mapSet(map, value, clone);\n\n  return clone;\n};\n\nvar cloneView = function (value, type, offset, length, map) {\n  var C = global[type];\n  // in some old engines like Safari 9, typeof C is 'object'\n  // on Uint8ClampedArray or some other constructors\n  if (!isObject(C)) throwUnpolyfillable(type);\n  return new C(cloneBuffer(value.buffer, map), offset, length);\n};\n\nvar structuredCloneInternal = function (value, map) {\n  if (isSymbol(value)) throwUncloneable('Symbol');\n  if (!isObject(value)) return value;\n  // effectively preserves circular references\n  if (map) {\n    if (mapHas(map, value)) return mapGet(map, value);\n  } else map = new Map();\n\n  var type = classof(value);\n  var C, name, cloned, dataTransfer, i, length, keys, key;\n\n  switch (type) {\n    case 'Array':\n      cloned = Array(lengthOfArrayLike(value));\n      break;\n    case 'Object':\n      cloned = {};\n      break;\n    case 'Map':\n      cloned = new Map();\n      break;\n    case 'Set':\n      cloned = new Set();\n      break;\n    case 'RegExp':\n      // in this block because of a Safari 14.1 bug\n      // old FF does not clone regexes passed to the constructor, so get the source and flags directly\n      cloned = new RegExp(value.source, getRegExpFlags(value));\n      break;\n    case 'Error':\n      name = value.name;\n      switch (name) {\n        case 'AggregateError':\n          cloned = new (getBuiltIn(name))([]);\n          break;\n        case 'EvalError':\n        case 'RangeError':\n        case 'ReferenceError':\n        case 'SuppressedError':\n        case 'SyntaxError':\n        case 'TypeError':\n        case 'URIError':\n          cloned = new (getBuiltIn(name))();\n          break;\n        case 'CompileError':\n        case 'LinkError':\n        case 'RuntimeError':\n          cloned = new (getBuiltIn('WebAssembly', name))();\n          break;\n        default:\n          cloned = new Error();\n      }\n      break;\n    case 'DOMException':\n      cloned = new DOMException(value.message, value.name);\n      break;\n    case 'ArrayBuffer':\n    case 'SharedArrayBuffer':\n      cloned = cloneBuffer(value, map, type);\n      break;\n    case 'DataView':\n    case 'Int8Array':\n    case 'Uint8Array':\n    case 'Uint8ClampedArray':\n    case 'Int16Array':\n    case 'Uint16Array':\n    case 'Int32Array':\n    case 'Uint32Array':\n    case 'Float16Array':\n    case 'Float32Array':\n    case 'Float64Array':\n    case 'BigInt64Array':\n    case 'BigUint64Array':\n      length = type === 'DataView' ? value.byteLength : value.length;\n      cloned = cloneView(value, type, value.byteOffset, length, map);\n      break;\n    case 'DOMQuad':\n      try {\n        cloned = new DOMQuad(\n          structuredCloneInternal(value.p1, map),\n          structuredCloneInternal(value.p2, map),\n          structuredCloneInternal(value.p3, map),\n          structuredCloneInternal(value.p4, map)\n        );\n      } catch (error) {\n        cloned = tryNativeRestrictedStructuredClone(value, type);\n      }\n      break;\n    case 'File':\n      if (nativeRestrictedStructuredClone) try {\n        cloned = nativeRestrictedStructuredClone(value);\n        // NodeJS 20.0.0 bug, https://github.com/nodejs/node/issues/47612\n        if (classof(cloned) !== type) cloned = undefined;\n      } catch (error) { /* empty */ }\n      if (!cloned) try {\n        cloned = new File([value], value.name, value);\n      } catch (error) { /* empty */ }\n      if (!cloned) throwUnpolyfillable(type);\n      break;\n    case 'FileList':\n      dataTransfer = createDataTransfer();\n      if (dataTransfer) {\n        for (i = 0, length = lengthOfArrayLike(value); i < length; i++) {\n          dataTransfer.items.add(structuredCloneInternal(value[i], map));\n        }\n        cloned = dataTransfer.files;\n      } else cloned = tryNativeRestrictedStructuredClone(value, type);\n      break;\n    case 'ImageData':\n      // Safari 9 ImageData is a constructor, but typeof ImageData is 'object'\n      try {\n        cloned = new ImageData(\n          structuredCloneInternal(value.data, map),\n          value.width,\n          value.height,\n          { colorSpace: value.colorSpace }\n        );\n      } catch (error) {\n        cloned = tryNativeRestrictedStructuredClone(value, type);\n      } break;\n    default:\n      if (nativeRestrictedStructuredClone) {\n        cloned = nativeRestrictedStructuredClone(value);\n      } else switch (type) {\n        case 'BigInt':\n          // can be a 3rd party polyfill\n          cloned = Object(value.valueOf());\n          break;\n        case 'Boolean':\n          cloned = Object(thisBooleanValue(value));\n          break;\n        case 'Number':\n          cloned = Object(thisNumberValue(value));\n          break;\n        case 'String':\n          cloned = Object(thisStringValue(value));\n          break;\n        case 'Date':\n          cloned = new Date(thisTimeValue(value));\n          break;\n        case 'Blob':\n          try {\n            cloned = value.slice(0, value.size, value.type);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'DOMPoint':\n        case 'DOMPointReadOnly':\n          C = global[type];\n          try {\n            cloned = C.fromPoint\n              ? C.fromPoint(value)\n              : new C(value.x, value.y, value.z, value.w);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'DOMRect':\n        case 'DOMRectReadOnly':\n          C = global[type];\n          try {\n            cloned = C.fromRect\n              ? C.fromRect(value)\n              : new C(value.x, value.y, value.width, value.height);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'DOMMatrix':\n        case 'DOMMatrixReadOnly':\n          C = global[type];\n          try {\n            cloned = C.fromMatrix\n              ? C.fromMatrix(value)\n              : new C(value);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'AudioData':\n        case 'VideoFrame':\n          if (!isCallable(value.clone)) throwUnpolyfillable(type);\n          try {\n            cloned = value.clone();\n          } catch (error) {\n            throwUncloneable(type);\n          } break;\n        case 'CropTarget':\n        case 'CryptoKey':\n        case 'FileSystemDirectoryHandle':\n        case 'FileSystemFileHandle':\n        case 'FileSystemHandle':\n        case 'GPUCompilationInfo':\n        case 'GPUCompilationMessage':\n        case 'ImageBitmap':\n        case 'RTCCertificate':\n        case 'WebAssembly.Module':\n          throwUnpolyfillable(type);\n          // break omitted\n        default:\n          throwUncloneable(type);\n      }\n  }\n\n  mapSet(map, value, cloned);\n\n  switch (type) {\n    case 'Array':\n    case 'Object':\n      keys = objectKeys(value);\n      for (i = 0, length = lengthOfArrayLike(keys); i < length; i++) {\n        key = keys[i];\n        createProperty(cloned, key, structuredCloneInternal(value[key], map));\n      } break;\n    case 'Map':\n      value.forEach(function (v, k) {\n        mapSet(cloned, structuredCloneInternal(k, map), structuredCloneInternal(v, map));\n      });\n      break;\n    case 'Set':\n      value.forEach(function (v) {\n        setAdd(cloned, structuredCloneInternal(v, map));\n      });\n      break;\n    case 'Error':\n      createNonEnumerableProperty(cloned, 'message', structuredCloneInternal(value.message, map));\n      if (hasOwn(value, 'cause')) {\n        createNonEnumerableProperty(cloned, 'cause', structuredCloneInternal(value.cause, map));\n      }\n      if (name === 'AggregateError') {\n        cloned.errors = structuredCloneInternal(value.errors, map);\n      } else if (name === 'SuppressedError') {\n        cloned.error = structuredCloneInternal(value.error, map);\n        cloned.suppressed = structuredCloneInternal(value.suppressed, map);\n      } // break omitted\n    case 'DOMException':\n      if (ERROR_STACK_INSTALLABLE) {\n        createNonEnumerableProperty(cloned, 'stack', structuredCloneInternal(value.stack, map));\n      }\n  }\n\n  return cloned;\n};\n\nvar tryToTransfer = function (rawTransfer, map) {\n  if (!isObject(rawTransfer)) throw new TypeError('Transfer option cannot be converted to a sequence');\n\n  var transfer = [];\n\n  iterate(rawTransfer, function (value) {\n    push(transfer, anObject(value));\n  });\n\n  var i = 0;\n  var length = lengthOfArrayLike(transfer);\n  var buffers = new Set();\n  var value, type, C, transferred, canvas, context;\n\n  while (i < length) {\n    value = transfer[i++];\n\n    type = classof(value);\n\n    if (type === 'ArrayBuffer' ? setHas(buffers, value) : mapHas(map, value)) {\n      throw new DOMException('Duplicate transferable', DATA_CLONE_ERROR);\n    }\n\n    if (type === 'ArrayBuffer') {\n      setAdd(buffers, value);\n      continue;\n    }\n\n    if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n      transferred = nativeStructuredClone(value, { transfer: [value] });\n    } else switch (type) {\n      case 'ImageBitmap':\n        C = global.OffscreenCanvas;\n        if (!isConstructor(C)) throwUnpolyfillable(type, TRANSFERRING);\n        try {\n          canvas = new C(value.width, value.height);\n          context = canvas.getContext('bitmaprenderer');\n          context.transferFromImageBitmap(value);\n          transferred = canvas.transferToImageBitmap();\n        } catch (error) { /* empty */ }\n        break;\n      case 'AudioData':\n      case 'VideoFrame':\n        if (!isCallable(value.clone) || !isCallable(value.close)) throwUnpolyfillable(type, TRANSFERRING);\n        try {\n          transferred = value.clone();\n          value.close();\n        } catch (error) { /* empty */ }\n        break;\n      case 'MediaSourceHandle':\n      case 'MessagePort':\n      case 'OffscreenCanvas':\n      case 'ReadableStream':\n      case 'TransformStream':\n      case 'WritableStream':\n        throwUnpolyfillable(type, TRANSFERRING);\n    }\n\n    if (transferred === undefined) throw new DOMException('This object cannot be transferred: ' + type, DATA_CLONE_ERROR);\n\n    mapSet(map, value, transferred);\n  }\n\n  return buffers;\n};\n\nvar detachBuffers = function (buffers) {\n  setIterate(buffers, function (buffer) {\n    if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n      nativeRestrictedStructuredClone(buffer, { transfer: [buffer] });\n    } else if (isCallable(buffer.transfer)) {\n      buffer.transfer();\n    } else if (detachTransferable) {\n      detachTransferable(buffer);\n    } else {\n      throwUnpolyfillable('ArrayBuffer', TRANSFERRING);\n    }\n  });\n};\n\n// `structuredClone` method\n// https://html.spec.whatwg.org/multipage/structured-data.html#dom-structuredclone\n$({ global: true, enumerable: true, sham: !PROPER_STRUCTURED_CLONE_TRANSFER, forced: FORCED_REPLACEMENT }, {\n  structuredClone: function structuredClone(value /* , { transfer } */) {\n    var options = validateArgumentsLength(arguments.length, 1) > 1 && !isNullOrUndefined(arguments[1]) ? anObject(arguments[1]) : undefined;\n    var transfer = options ? options.transfer : undefined;\n    var map, buffers;\n\n    if (transfer !== undefined) {\n      map = new Map();\n      buffers = tryToTransfer(transfer, map);\n    }\n\n    var clone = structuredCloneInternal(value, map);\n\n    // since of an issue with cloning views of transferred buffers, we a forced to detach them later\n    // https://github.com/zloirock/core-js/issues/1265\n    if (buffers) detachBuffers(buffers);\n\n    return clone;\n  }\n});\n","// Current version.\nexport var VERSION = '1.13.6';\n\n// Establish the root object, `window` (`self`) in the browser, `global`\n// on the server, or `this` in some virtual machines. We use `self`\n// instead of `window` for `WebWorker` support.\nexport var root = (typeof self == 'object' && self.self === self && self) ||\n          (typeof global == 'object' && global.global === global && global) ||\n          Function('return this')() ||\n          {};\n\n// Save bytes in the minified (but not gzipped) version:\nexport var ArrayProto = Array.prototype, ObjProto = Object.prototype;\nexport var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport var push = ArrayProto.push,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty;\n\n// Modern feature detection.\nexport var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined',\n    supportsDataView = typeof DataView !== 'undefined';\n\n// All **ECMAScript 5+** native function implementations that we hope to use\n// are declared here.\nexport var nativeIsArray = Array.isArray,\n    nativeKeys = Object.keys,\n    nativeCreate = Object.create,\n    nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\n\n// Create references to these builtin functions because we override them.\nexport var _isNaN = isNaN,\n    _isFinite = isFinite;\n\n// Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\nexport var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\nexport var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n  'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n// The largest integer that can be represented exactly.\nexport var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n","// Some functions take a variable number of arguments, or a few expected\n// arguments at the beginning and then a variable number of values to operate\n// on. This helper accumulates all remaining arguments past the function’s\n// argument length (or an explicit `startIndex`), into an array that becomes\n// the last argument. Similar to ES6’s \"rest parameter\".\nexport default function restArguments(func, startIndex) {\n  startIndex = startIndex == null ? func.length - 1 : +startIndex;\n  return function() {\n    var length = Math.max(arguments.length - startIndex, 0),\n        rest = Array(length),\n        index = 0;\n    for (; index < length; index++) {\n      rest[index] = arguments[index + startIndex];\n    }\n    switch (startIndex) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, arguments[0], rest);\n      case 2: return func.call(this, arguments[0], arguments[1], rest);\n    }\n    var args = Array(startIndex + 1);\n    for (index = 0; index < startIndex; index++) {\n      args[index] = arguments[index];\n    }\n    args[startIndex] = rest;\n    return func.apply(this, args);\n  };\n}\n","// Is a given variable an object?\nexport default function isObject(obj) {\n  var type = typeof obj;\n  return type === 'function' || (type === 'object' && !!obj);\n}\n","// Is a given value equal to null?\nexport default function isNull(obj) {\n  return obj === null;\n}\n","// Is a given variable undefined?\nexport default function isUndefined(obj) {\n  return obj === void 0;\n}\n","import { toString } from './_setup.js';\n\n// Is a given value a boolean?\nexport default function isBoolean(obj) {\n  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n}\n","// Is a given value a DOM element?\nexport default function isElement(obj) {\n  return !!(obj && obj.nodeType === 1);\n}\n","import { toString } from './_setup.js';\n\n// Internal function for creating a `toString`-based type tester.\nexport default function tagTester(name) {\n  var tag = '[object ' + name + ']';\n  return function(obj) {\n    return toString.call(obj) === tag;\n  };\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('String');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Number');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Date');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('RegExp');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Error');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Symbol');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('ArrayBuffer');\n","import tagTester from './_tagTester.js';\nimport { root } from './_setup.js';\n\nvar isFunction = tagTester('Function');\n\n// Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\n// v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\nvar nodelist = root.document && root.document.childNodes;\nif (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n  isFunction = function(obj) {\n    return typeof obj == 'function' || false;\n  };\n}\n\nexport default isFunction;\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Object');\n","import { supportsDataView } from './_setup.js';\nimport hasObjectTag from './_hasObjectTag.js';\n\n// In IE 10 - Edge 13, `DataView` has string tag `'[object Object]'`.\n// In IE 11, the most common among them, this problem also applies to\n// `Map`, `WeakMap` and `Set`.\nexport var hasStringTagBug = (\n      supportsDataView && hasObjectTag(new DataView(new ArrayBuffer(8)))\n    ),\n    isIE11 = (typeof Map !== 'undefined' && hasObjectTag(new Map));\n","import tagTester from './_tagTester.js';\nimport isFunction from './isFunction.js';\nimport isArrayBuffer from './isArrayBuffer.js';\nimport { hasStringTagBug } from './_stringTagBug.js';\n\nvar isDataView = tagTester('DataView');\n\n// In IE 10 - Edge 13, we need a different heuristic\n// to determine whether an object is a `DataView`.\nfunction ie10IsDataView(obj) {\n  return obj != null && isFunction(obj.getInt8) && isArrayBuffer(obj.buffer);\n}\n\nexport default (hasStringTagBug ? ie10IsDataView : isDataView);\n","import { nativeIsArray } from './_setup.js';\nimport tagTester from './_tagTester.js';\n\n// Is a given value an array?\n// Delegates to ECMA5's native `Array.isArray`.\nexport default nativeIsArray || tagTester('Array');\n","import { hasOwnProperty } from './_setup.js';\n\n// Internal function to check whether `key` is an own property name of `obj`.\nexport default function has(obj, key) {\n  return obj != null && hasOwnProperty.call(obj, key);\n}\n","import tagTester from './_tagTester.js';\nimport has from './_has.js';\n\nvar isArguments = tagTester('Arguments');\n\n// Define a fallback version of the method in browsers (ahem, IE < 9), where\n// there isn't any inspectable \"Arguments\" type.\n(function() {\n  if (!isArguments(arguments)) {\n    isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n}());\n\nexport default isArguments;\n","import { _isFinite } from './_setup.js';\nimport isSymbol from './isSymbol.js';\n\n// Is a given object a finite number?\nexport default function isFinite(obj) {\n  return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\n}\n","import { _isNaN } from './_setup.js';\nimport isNumber from './isNumber.js';\n\n// Is the given value `NaN`?\nexport default function isNaN(obj) {\n  return isNumber(obj) && _isNaN(obj);\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function constant(value) {\n  return function() {\n    return value;\n  };\n}\n","import { MAX_ARRAY_INDEX } from './_setup.js';\n\n// Common internal logic for `isArrayLike` and `isBufferLike`.\nexport default function createSizePropertyCheck(getSizeProperty) {\n  return function(collection) {\n    var sizeProperty = getSizeProperty(collection);\n    return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\n  }\n}\n","// Internal helper to generate a function to obtain property `key` from `obj`.\nexport default function shallowProperty(key) {\n  return function(obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n}\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `byteLength` property of an object.\nexport default shallowProperty('byteLength');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getByteLength from './_getByteLength.js';\n\n// Internal helper to determine whether we should spend extensive checks against\n// `ArrayBuffer` et al.\nexport default createSizePropertyCheck(getByteLength);\n","import { supportsArrayBuffer, nativeIsView, toString } from './_setup.js';\nimport isDataView from './isDataView.js';\nimport constant from './constant.js';\nimport isBufferLike from './_isBufferLike.js';\n\n// Is a given value a typed array?\nvar typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\nfunction isTypedArray(obj) {\n  // `ArrayBuffer.isView` is the most future-proof, so use it when available.\n  // Otherwise, fall back on the above regular expression.\n  return nativeIsView ? (nativeIsView(obj) && !isDataView(obj)) :\n                isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\n}\n\nexport default supportsArrayBuffer ? isTypedArray : constant(false);\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `length` property of an object.\nexport default shallowProperty('length');\n","import { nonEnumerableProps, ObjProto } from './_setup.js';\nimport isFunction from './isFunction.js';\nimport has from './_has.js';\n\n// Internal helper to create a simple lookup structure.\n// `collectNonEnumProps` used to depend on `_.contains`, but this led to\n// circular imports. `emulatedSet` is a one-off solution that only works for\n// arrays of strings.\nfunction emulatedSet(keys) {\n  var hash = {};\n  for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\n  return {\n    contains: function(key) { return hash[key] === true; },\n    push: function(key) {\n      hash[key] = true;\n      return keys.push(key);\n    }\n  };\n}\n\n// Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\n// be iterated by `for key in ...` and thus missed. Extends `keys` in place if\n// needed.\nexport default function collectNonEnumProps(obj, keys) {\n  keys = emulatedSet(keys);\n  var nonEnumIdx = nonEnumerableProps.length;\n  var constructor = obj.constructor;\n  var proto = (isFunction(constructor) && constructor.prototype) || ObjProto;\n\n  // Constructor is a special case.\n  var prop = 'constructor';\n  if (has(obj, prop) && !keys.contains(prop)) keys.push(prop);\n\n  while (nonEnumIdx--) {\n    prop = nonEnumerableProps[nonEnumIdx];\n    if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\n      keys.push(prop);\n    }\n  }\n}\n","import isObject from './isObject.js';\nimport { nativeKeys, hasEnumBug } from './_setup.js';\nimport has from './_has.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve the names of an object's own properties.\n// Delegates to **ECMAScript 5**'s native `Object.keys`.\nexport default function keys(obj) {\n  if (!isObject(obj)) return [];\n  if (nativeKeys) return nativeKeys(obj);\n  var keys = [];\n  for (var key in obj) if (has(obj, key)) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isArray from './isArray.js';\nimport isString from './isString.js';\nimport isArguments from './isArguments.js';\nimport keys from './keys.js';\n\n// Is a given array, string, or object empty?\n// An \"empty\" object has no enumerable own-properties.\nexport default function isEmpty(obj) {\n  if (obj == null) return true;\n  // Skip the more expensive `toString`-based type checks if `obj` has no\n  // `.length`.\n  var length = getLength(obj);\n  if (typeof length == 'number' && (\n    isArray(obj) || isString(obj) || isArguments(obj)\n  )) return length === 0;\n  return getLength(keys(obj)) === 0;\n}\n","import keys from './keys.js';\n\n// Returns whether an object has a given set of `key:value` pairs.\nexport default function isMatch(object, attrs) {\n  var _keys = keys(attrs), length = _keys.length;\n  if (object == null) return !length;\n  var obj = Object(object);\n  for (var i = 0; i < length; i++) {\n    var key = _keys[i];\n    if (attrs[key] !== obj[key] || !(key in obj)) return false;\n  }\n  return true;\n}\n","import { VERSION } from './_setup.js';\n\n// If Underscore is called as a function, it returns a wrapped object that can\n// be used OO-style. This wrapper holds altered versions of all functions added\n// through `_.mixin`. Wrapped objects may be chained.\nexport default function _(obj) {\n  if (obj instanceof _) return obj;\n  if (!(this instanceof _)) return new _(obj);\n  this._wrapped = obj;\n}\n\n_.VERSION = VERSION;\n\n// Extracts the result from a wrapped and chained object.\n_.prototype.value = function() {\n  return this._wrapped;\n};\n\n// Provide unwrapping proxies for some methods used in engine operations\n// such as arithmetic and JSON stringification.\n_.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n_.prototype.toString = function() {\n  return String(this._wrapped);\n};\n","import getByteLength from './_getByteLength.js';\n\n// Internal function to wrap or shallow-copy an ArrayBuffer,\n// typed array or DataView to a new view, reusing the buffer.\nexport default function toBufferView(bufferSource) {\n  return new Uint8Array(\n    bufferSource.buffer || bufferSource,\n    bufferSource.byteOffset || 0,\n    getByteLength(bufferSource)\n  );\n}\n","import _ from './underscore.js';\nimport { toString, SymbolProto } from './_setup.js';\nimport getByteLength from './_getByteLength.js';\nimport isTypedArray from './isTypedArray.js';\nimport isFunction from './isFunction.js';\nimport { hasStringTagBug }  from './_stringTagBug.js';\nimport isDataView from './isDataView.js';\nimport keys from './keys.js';\nimport has from './_has.js';\nimport toBufferView from './_toBufferView.js';\n\n// We use this string twice, so give it a name for minification.\nvar tagDataView = '[object DataView]';\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction eq(a, b, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) return a !== 0 || 1 / a === 1 / b;\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) return false;\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) return b !== b;\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n  return deepEq(a, b, aStack, bStack);\n}\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction deepEq(a, b, aStack, bStack) {\n  // Unwrap any wrapped objects.\n  if (a instanceof _) a = a._wrapped;\n  if (b instanceof _) b = b._wrapped;\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) return false;\n  // Work around a bug in IE 10 - Edge 13.\n  if (hasStringTagBug && className == '[object Object]' && isDataView(a)) {\n    if (!isDataView(b)) return false;\n    className = tagDataView;\n  }\n  switch (className) {\n    // These types are compared by value.\n    case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case '[object String]':\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return '' + a === '' + b;\n    case '[object Number]':\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) return +b !== +b;\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case '[object Date]':\n    case '[object Boolean]':\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case '[object Symbol]':\n      return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    case '[object ArrayBuffer]':\n    case tagDataView:\n      // Coerce to typed array so we can fall through.\n      return deepEq(toBufferView(a), toBufferView(b), aStack, bStack);\n  }\n\n  var areArrays = className === '[object Array]';\n  if (!areArrays && isTypedArray(a)) {\n      var byteLength = getByteLength(a);\n      if (byteLength !== getByteLength(b)) return false;\n      if (a.buffer === b.buffer && a.byteOffset === b.byteOffset) return true;\n      areArrays = true;\n  }\n  if (!areArrays) {\n    if (typeof a != 'object' || typeof b != 'object') return false;\n\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor &&\n                             isFunction(bCtor) && bCtor instanceof bCtor)\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) return bStack[length] === b;\n  }\n\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) return false;\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], aStack, bStack)) return false;\n    }\n  } else {\n    // Deep compare objects.\n    var _keys = keys(a), key;\n    length = _keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (keys(b).length !== length) return false;\n    while (length--) {\n      // Deep compare each member\n      key = _keys[length];\n      if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\n\n// Perform a deep comparison to check if two objects are equal.\nexport default function isEqual(a, b) {\n  return eq(a, b);\n}\n","import isObject from './isObject.js';\nimport { hasEnumBug } from './_setup.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve all the enumerable property names of an object.\nexport default function allKeys(obj) {\n  if (!isObject(obj)) return [];\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isFunction from './isFunction.js';\nimport allKeys from './allKeys.js';\n\n// Since the regular `Object.prototype.toString` type tests don't work for\n// some types in IE 11, we use a fingerprinting heuristic instead, based\n// on the methods. It's not great, but it's the best we got.\n// The fingerprint method lists are defined below.\nexport function ie11fingerprint(methods) {\n  var length = getLength(methods);\n  return function(obj) {\n    if (obj == null) return false;\n    // `Map`, `WeakMap` and `Set` have no enumerable keys.\n    var keys = allKeys(obj);\n    if (getLength(keys)) return false;\n    for (var i = 0; i < length; i++) {\n      if (!isFunction(obj[methods[i]])) return false;\n    }\n    // If we are testing against `WeakMap`, we need to ensure that\n    // `obj` doesn't have a `forEach` method in order to distinguish\n    // it from a regular `Map`.\n    return methods !== weakMapMethods || !isFunction(obj[forEachName]);\n  };\n}\n\n// In the interest of compact minification, we write\n// each string in the fingerprints only once.\nvar forEachName = 'forEach',\n    hasName = 'has',\n    commonInit = ['clear', 'delete'],\n    mapTail = ['get', hasName, 'set'];\n\n// `Map`, `WeakMap` and `Set` each have slightly different\n// combinations of the above sublists.\nexport var mapMethods = commonInit.concat(forEachName, mapTail),\n    weakMapMethods = commonInit.concat(mapTail),\n    setMethods = ['add'].concat(commonInit, forEachName, hasName);\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, mapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(mapMethods) : tagTester('Map');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, weakMapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(weakMapMethods) : tagTester('WeakMap');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, setMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(setMethods) : tagTester('Set');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakSet');\n","import keys from './keys.js';\n\n// Retrieve the values of an object's properties.\nexport default function values(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var values = Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[_keys[i]];\n  }\n  return values;\n}\n","import keys from './keys.js';\n\n// Convert an object into a list of `[key, value]` pairs.\n// The opposite of `_.object` with one argument.\nexport default function pairs(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var pairs = Array(length);\n  for (var i = 0; i < length; i++) {\n    pairs[i] = [_keys[i], obj[_keys[i]]];\n  }\n  return pairs;\n}\n","import keys from './keys.js';\n\n// Invert the keys and values of an object. The values must be serializable.\nexport default function invert(obj) {\n  var result = {};\n  var _keys = keys(obj);\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    result[obj[_keys[i]]] = _keys[i];\n  }\n  return result;\n}\n","import isFunction from './isFunction.js';\n\n// Return a sorted list of the function names available on the object.\nexport default function functions(obj) {\n  var names = [];\n  for (var key in obj) {\n    if (isFunction(obj[key])) names.push(key);\n  }\n  return names.sort();\n}\n","// An internal function for creating assigner functions.\nexport default function createAssigner(keysFunc, defaults) {\n  return function(obj) {\n    var length = arguments.length;\n    if (defaults) obj = Object(obj);\n    if (length < 2 || obj == null) return obj;\n    for (var index = 1; index < length; index++) {\n      var source = arguments[index],\n          keys = keysFunc(source),\n          l = keys.length;\n      for (var i = 0; i < l; i++) {\n        var key = keys[i];\n        if (!defaults || obj[key] === void 0) obj[key] = source[key];\n      }\n    }\n    return obj;\n  };\n}\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Extend a given object with all the properties in passed-in object(s).\nexport default createAssigner(allKeys);\n","import createAssigner from './_createAssigner.js';\nimport keys from './keys.js';\n\n// Assigns a given object with all the own properties in the passed-in\n// object(s).\n// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\nexport default createAssigner(keys);\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Fill in a given object with default properties.\nexport default createAssigner(allKeys, true);\n","import isObject from './isObject.js';\nimport { nativeCreate } from './_setup.js';\n\n// Create a naked function reference for surrogate-prototype-swapping.\nfunction ctor() {\n  return function(){};\n}\n\n// An internal function for creating a new object that inherits from another.\nexport default function baseCreate(prototype) {\n  if (!isObject(prototype)) return {};\n  if (nativeCreate) return nativeCreate(prototype);\n  var Ctor = ctor();\n  Ctor.prototype = prototype;\n  var result = new Ctor;\n  Ctor.prototype = null;\n  return result;\n}\n","import baseCreate from './_baseCreate.js';\nimport extendOwn from './extendOwn.js';\n\n// Creates an object that inherits from the given prototype object.\n// If additional properties are provided then they will be added to the\n// created object.\nexport default function create(prototype, props) {\n  var result = baseCreate(prototype);\n  if (props) extendOwn(result, props);\n  return result;\n}\n","import isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport extend from './extend.js';\n\n// Create a (shallow-cloned) duplicate of an object.\nexport default function clone(obj) {\n  if (!isObject(obj)) return obj;\n  return isArray(obj) ? obj.slice() : extend({}, obj);\n}\n","// Invokes `interceptor` with the `obj` and then returns `obj`.\n// The primary purpose of this method is to \"tap into\" a method chain, in\n// order to perform operations on intermediate results within the chain.\nexport default function tap(obj, interceptor) {\n  interceptor(obj);\n  return obj;\n}\n","import _ from './underscore.js';\nimport isArray from './isArray.js';\n\n// Normalize a (deep) property `path` to array.\n// Like `_.iteratee`, this function can be customized.\nexport default function toPath(path) {\n  return isArray(path) ? path : [path];\n}\n_.toPath = toPath;\n","import _ from './underscore.js';\nimport './toPath.js';\n\n// Internal wrapper for `_.toPath` to enable minification.\n// Similar to `cb` for `_.iteratee`.\nexport default function toPath(path) {\n  return _.toPath(path);\n}\n","// Internal function to obtain a nested property in `obj` along `path`.\nexport default function deepGet(obj, path) {\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    if (obj == null) return void 0;\n    obj = obj[path[i]];\n  }\n  return length ? obj : void 0;\n}\n","import toPath from './_toPath.js';\nimport deepGet from './_deepGet.js';\nimport isUndefined from './isUndefined.js';\n\n// Get the value of the (deep) property on `path` from `object`.\n// If any property in `path` does not exist or if the value is\n// `undefined`, return `defaultValue` instead.\n// The `path` is normalized through `_.toPath`.\nexport default function get(object, path, defaultValue) {\n  var value = deepGet(object, toPath(path));\n  return isUndefined(value) ? defaultValue : value;\n}\n","import _has from './_has.js';\nimport toPath from './_toPath.js';\n\n// Shortcut function for checking if an object has a given property directly on\n// itself (in other words, not on a prototype). Unlike the internal `has`\n// function, this public version can also traverse nested properties.\nexport default function has(obj, path) {\n  path = toPath(path);\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    var key = path[i];\n    if (!_has(obj, key)) return false;\n    obj = obj[key];\n  }\n  return !!length;\n}\n","// Keep the identity function around for default iteratees.\nexport default function identity(value) {\n  return value;\n}\n","import extendOwn from './extendOwn.js';\nimport isMatch from './isMatch.js';\n\n// Returns a predicate for checking whether an object has a given set of\n// `key:value` pairs.\nexport default function matcher(attrs) {\n  attrs = extendOwn({}, attrs);\n  return function(obj) {\n    return isMatch(obj, attrs);\n  };\n}\n","import deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Creates a function that, when passed an object, will traverse that object’s\n// properties down the given `path`, specified as an array of keys or indices.\nexport default function property(path) {\n  path = toPath(path);\n  return function(obj) {\n    return deepGet(obj, path);\n  };\n}\n","// Internal function that returns an efficient (for current engines) version\n// of the passed-in callback, to be repeatedly applied in other Underscore\n// functions.\nexport default function optimizeCb(func, context, argCount) {\n  if (context === void 0) return func;\n  switch (argCount == null ? 3 : argCount) {\n    case 1: return function(value) {\n      return func.call(context, value);\n    };\n    // The 2-argument case is omitted because we’re not using it.\n    case 3: return function(value, index, collection) {\n      return func.call(context, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(context, accumulator, value, index, collection);\n    };\n  }\n  return function() {\n    return func.apply(context, arguments);\n  };\n}\n","import identity from './identity.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport matcher from './matcher.js';\nimport property from './property.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// An internal function to generate callbacks that can be applied to each\n// element in a collection, returning the desired result — either `_.identity`,\n// an arbitrary callback, a property matcher, or a property accessor.\nexport default function baseIteratee(value, context, argCount) {\n  if (value == null) return identity;\n  if (isFunction(value)) return optimizeCb(value, context, argCount);\n  if (isObject(value) && !isArray(value)) return matcher(value);\n  return property(value);\n}\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\n\n// External wrapper for our callback generator. Users may customize\n// `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n// This abstraction hides the internal-only `argCount` argument.\nexport default function iteratee(value, context) {\n  return baseIteratee(value, context, Infinity);\n}\n_.iteratee = iteratee;\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\nimport iteratee from './iteratee.js';\n\n// The function we call internally to generate a callback. It invokes\n// `_.iteratee` if overridden, otherwise `baseIteratee`.\nexport default function cb(value, context, argCount) {\n  if (_.iteratee !== iteratee) return _.iteratee(value, context);\n  return baseIteratee(value, context, argCount);\n}\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the results of applying the `iteratee` to each element of `obj`.\n// In contrast to `_.map` it returns an object.\nexport default function mapObject(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = keys(obj),\n      length = _keys.length,\n      results = {};\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys[index];\n    results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function noop(){}\n","import noop from './noop.js';\nimport get from './get.js';\n\n// Generates a function for a given object that returns a given property.\nexport default function propertyOf(obj) {\n  if (obj == null) return noop;\n  return function(path) {\n    return get(obj, path);\n  };\n}\n","import optimizeCb from './_optimizeCb.js';\n\n// Run a function **n** times.\nexport default function times(n, iteratee, context) {\n  var accum = Array(Math.max(0, n));\n  iteratee = optimizeCb(iteratee, context, 1);\n  for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n  return accum;\n}\n","// Return a random integer between `min` and `max` (inclusive).\nexport default function random(min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n","// A (possibly faster) way to get the current timestamp as an integer.\nexport default Date.now || function() {\n  return new Date().getTime();\n};\n","import keys from './keys.js';\n\n// Internal helper to generate functions for escaping and unescaping strings\n// to/from HTML interpolation.\nexport default function createEscaper(map) {\n  var escaper = function(match) {\n    return map[match];\n  };\n  // Regexes for identifying a key that needs to be escaped.\n  var source = '(?:' + keys(map).join('|') + ')';\n  var testRegexp = RegExp(source);\n  var replaceRegexp = RegExp(source, 'g');\n  return function(string) {\n    string = string == null ? '' : '' + string;\n    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n  };\n}\n","// Internal list of HTML entities for escaping.\nexport default {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n","import createEscaper from './_createEscaper.js';\nimport escapeMap from './_escapeMap.js';\n\n// Function for escaping strings to HTML interpolation.\nexport default createEscaper(escapeMap);\n","import createEscaper from './_createEscaper.js';\nimport unescapeMap from './_unescapeMap.js';\n\n// Function for unescaping strings from HTML interpolation.\nexport default createEscaper(unescapeMap);\n","import invert from './invert.js';\nimport escapeMap from './_escapeMap.js';\n\n// Internal list of HTML entities for unescaping.\nexport default invert(escapeMap);\n","import _ from './underscore.js';\n\n// By default, Underscore uses ERB-style template delimiters. Change the\n// following template settings to use alternative delimiters.\nexport default _.templateSettings = {\n  evaluate: /<%([\\s\\S]+?)%>/g,\n  interpolate: /<%=([\\s\\S]+?)%>/g,\n  escape: /<%-([\\s\\S]+?)%>/g\n};\n","import defaults from './defaults.js';\nimport _ from './underscore.js';\nimport './templateSettings.js';\n\n// When customizing `_.templateSettings`, if you don't want to define an\n// interpolation, evaluation or escaping regex, we need one that is\n// guaranteed not to match.\nvar noMatch = /(.)^/;\n\n// Certain characters need to be escaped so that they can be put into a\n// string literal.\nvar escapes = {\n  \"'\": \"'\",\n  '\\\\': '\\\\',\n  '\\r': 'r',\n  '\\n': 'n',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\nvar escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\nfunction escapeChar(match) {\n  return '\\\\' + escapes[match];\n}\n\n// In order to prevent third-party code injection through\n// `_.templateSettings.variable`, we test it against the following regular\n// expression. It is intentionally a bit more liberal than just matching valid\n// identifiers, but still prevents possible loopholes through defaults or\n// destructuring assignment.\nvar bareIdentifier = /^\\s*(\\w|\\$)+\\s*$/;\n\n// JavaScript micro-templating, similar to John Resig's implementation.\n// Underscore templating handles arbitrary delimiters, preserves whitespace,\n// and correctly escapes quotes within interpolated code.\n// NB: `oldSettings` only exists for backwards compatibility.\nexport default function template(text, settings, oldSettings) {\n  if (!settings && oldSettings) settings = oldSettings;\n  settings = defaults({}, settings, _.templateSettings);\n\n  // Combine delimiters into one regular expression via alternation.\n  var matcher = RegExp([\n    (settings.escape || noMatch).source,\n    (settings.interpolate || noMatch).source,\n    (settings.evaluate || noMatch).source\n  ].join('|') + '|$', 'g');\n\n  // Compile the template source, escaping string literals appropriately.\n  var index = 0;\n  var source = \"__p+='\";\n  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n    source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n    index = offset + match.length;\n\n    if (escape) {\n      source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n    } else if (interpolate) {\n      source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n    } else if (evaluate) {\n      source += \"';\\n\" + evaluate + \"\\n__p+='\";\n    }\n\n    // Adobe VMs need the match returned to produce the correct offset.\n    return match;\n  });\n  source += \"';\\n\";\n\n  var argument = settings.variable;\n  if (argument) {\n    // Insure against third-party code injection. (CVE-2021-23358)\n    if (!bareIdentifier.test(argument)) throw new Error(\n      'variable is not a bare identifier: ' + argument\n    );\n  } else {\n    // If a variable is not specified, place data values in local scope.\n    source = 'with(obj||{}){\\n' + source + '}\\n';\n    argument = 'obj';\n  }\n\n  source = \"var __t,__p='',__j=Array.prototype.join,\" +\n    \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n    source + 'return __p;\\n';\n\n  var render;\n  try {\n    render = new Function(argument, '_', source);\n  } catch (e) {\n    e.source = source;\n    throw e;\n  }\n\n  var template = function(data) {\n    return render.call(this, data, _);\n  };\n\n  // Provide the compiled source as a convenience for precompilation.\n  template.source = 'function(' + argument + '){\\n' + source + '}';\n\n  return template;\n}\n","import isFunction from './isFunction.js';\nimport toPath from './_toPath.js';\n\n// Traverses the children of `obj` along `path`. If a child is a function, it\n// is invoked with its parent as context. Returns the value of the final\n// child, or `fallback` if any child is undefined.\nexport default function result(obj, path, fallback) {\n  path = toPath(path);\n  var length = path.length;\n  if (!length) {\n    return isFunction(fallback) ? fallback.call(obj) : fallback;\n  }\n  for (var i = 0; i < length; i++) {\n    var prop = obj == null ? void 0 : obj[path[i]];\n    if (prop === void 0) {\n      prop = fallback;\n      i = length; // Ensure we don't continue iterating.\n    }\n    obj = isFunction(prop) ? prop.call(obj) : prop;\n  }\n  return obj;\n}\n","// Generate a unique integer id (unique within the entire client session).\n// Useful for temporary DOM ids.\nvar idCounter = 0;\nexport default function uniqueId(prefix) {\n  var id = ++idCounter + '';\n  return prefix ? prefix + id : id;\n}\n","import _ from './underscore.js';\n\n// Start chaining a wrapped Underscore object.\nexport default function chain(obj) {\n  var instance = _(obj);\n  instance._chain = true;\n  return instance;\n}\n","import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n// Internal function to execute `sourceFunc` bound to `context` with optional\n// `args`. Determines whether to execute a function as a constructor or as a\n// normal function.\nexport default function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\n  if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n  var self = baseCreate(sourceFunc.prototype);\n  var result = sourceFunc.apply(self, args);\n  if (isObject(result)) return result;\n  return self;\n}\n","import restArguments from './restArguments.js';\nimport executeBound from './_executeBound.js';\nimport _ from './underscore.js';\n\n// Partially apply a function by creating a version that has had some of its\n// arguments pre-filled, without changing its dynamic `this` context. `_` acts\n// as a placeholder by default, allowing any combination of arguments to be\n// pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\nvar partial = restArguments(function(func, boundArgs) {\n  var placeholder = partial.placeholder;\n  var bound = function() {\n    var position = 0, length = boundArgs.length;\n    var args = Array(length);\n    for (var i = 0; i < length; i++) {\n      args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n    }\n    while (position < arguments.length) args.push(arguments[position++]);\n    return executeBound(func, bound, this, this, args);\n  };\n  return bound;\n});\n\npartial.placeholder = _;\nexport default partial;\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport executeBound from './_executeBound.js';\n\n// Create a function bound to a given object (assigning `this`, and arguments,\n// optionally).\nexport default restArguments(function(func, context, args) {\n  if (!isFunction(func)) throw new TypeError('Bind must be called on a function');\n  var bound = restArguments(function(callArgs) {\n    return executeBound(func, bound, context, this, args.concat(callArgs));\n  });\n  return bound;\n});\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getLength from './_getLength.js';\n\n// Internal helper for collection methods to determine whether a collection\n// should be iterated as an array or as an object.\n// Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\nexport default createSizePropertyCheck(getLength);\n","import getLength from './_getLength.js';\nimport isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isArguments from './isArguments.js';\n\n// Internal implementation of a recursive `flatten` function.\nexport default function flatten(input, depth, strict, output) {\n  output = output || [];\n  if (!depth && depth !== 0) {\n    depth = Infinity;\n  } else if (depth <= 0) {\n    return output.concat(input);\n  }\n  var idx = output.length;\n  for (var i = 0, length = getLength(input); i < length; i++) {\n    var value = input[i];\n    if (isArrayLike(value) && (isArray(value) || isArguments(value))) {\n      // Flatten current level of array or arguments object.\n      if (depth > 1) {\n        flatten(value, depth - 1, strict, output);\n        idx = output.length;\n      } else {\n        var j = 0, len = value.length;\n        while (j < len) output[idx++] = value[j++];\n      }\n    } else if (!strict) {\n      output[idx++] = value;\n    }\n  }\n  return output;\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport bind from './bind.js';\n\n// Bind a number of an object's methods to that object. Remaining arguments\n// are the method names to be bound. Useful for ensuring that all callbacks\n// defined on an object belong to it.\nexport default restArguments(function(obj, keys) {\n  keys = flatten(keys, false, false);\n  var index = keys.length;\n  if (index < 1) throw new Error('bindAll must be passed function names');\n  while (index--) {\n    var key = keys[index];\n    obj[key] = bind(obj[key], obj);\n  }\n  return obj;\n});\n","import has from './_has.js';\n\n// Memoize an expensive function by storing its results.\nexport default function memoize(func, hasher) {\n  var memoize = function(key) {\n    var cache = memoize.cache;\n    var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n    if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n    return cache[address];\n  };\n  memoize.cache = {};\n  return memoize;\n}\n","import restArguments from './restArguments.js';\n\n// Delays a function for the given number of milliseconds, and then calls\n// it with the arguments supplied.\nexport default restArguments(function(func, wait, args) {\n  return setTimeout(function() {\n    return func.apply(null, args);\n  }, wait);\n});\n","import partial from './partial.js';\nimport delay from './delay.js';\nimport _ from './underscore.js';\n\n// Defers a function, scheduling it to run after the current call stack has\n// cleared.\nexport default partial(delay, _, 1);\n","import now from './now.js';\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nexport default function throttle(func, wait, options) {\n  var timeout, context, args, result;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function() {\n    var _now = now();\n    if (!previous && options.leading === false) previous = _now;\n    var remaining = wait - (_now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = _now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function() {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n","import restArguments from './restArguments.js';\nimport now from './now.js';\n\n// When a sequence of calls of the returned function ends, the argument\n// function is triggered. The end of a sequence is defined by the `wait`\n// parameter. If `immediate` is passed, the argument function will be\n// triggered at the beginning of the sequence instead of at the end.\nexport default function debounce(func, wait, immediate) {\n  var timeout, previous, args, result, context;\n\n  var later = function() {\n    var passed = now() - previous;\n    if (wait > passed) {\n      timeout = setTimeout(later, wait - passed);\n    } else {\n      timeout = null;\n      if (!immediate) result = func.apply(context, args);\n      // This check is needed because `func` can recursively invoke `debounced`.\n      if (!timeout) args = context = null;\n    }\n  };\n\n  var debounced = restArguments(function(_args) {\n    context = this;\n    args = _args;\n    previous = now();\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n      if (immediate) result = func.apply(context, args);\n    }\n    return result;\n  });\n\n  debounced.cancel = function() {\n    clearTimeout(timeout);\n    timeout = args = context = null;\n  };\n\n  return debounced;\n}\n","import partial from './partial.js';\n\n// Returns the first function passed as an argument to the second,\n// allowing you to adjust arguments, run code before and after, and\n// conditionally execute the original function.\nexport default function wrap(func, wrapper) {\n  return partial(wrapper, func);\n}\n","// Returns a negated version of the passed-in predicate.\nexport default function negate(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n","// Returns a function that is the composition of a list of functions, each\n// consuming the return value of the function that follows.\nexport default function compose() {\n  var args = arguments;\n  var start = args.length - 1;\n  return function() {\n    var i = start;\n    var result = args[start].apply(this, arguments);\n    while (i--) result = args[i].call(this, result);\n    return result;\n  };\n}\n","// Returns a function that will only be executed on and after the Nth call.\nexport default function after(times, func) {\n  return function() {\n    if (--times < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n}\n","// Returns a function that will only be executed up to (but not including) the\n// Nth call.\nexport default function before(times, func) {\n  var memo;\n  return function() {\n    if (--times > 0) {\n      memo = func.apply(this, arguments);\n    }\n    if (times <= 1) func = null;\n    return memo;\n  };\n}\n","import partial from './partial.js';\nimport before from './before.js';\n\n// Returns a function that will be executed at most one time, no matter how\n// often you call it. Useful for lazy initialization.\nexport default partial(before, 2);\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the first key on an object that passes a truth test.\nexport default function findKey(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = keys(obj), key;\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    key = _keys[i];\n    if (predicate(obj[key], key, obj)) return key;\n  }\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Internal function to generate `_.findIndex` and `_.findLastIndex`.\nexport default function createPredicateIndexFinder(dir) {\n  return function(array, predicate, context) {\n    predicate = cb(predicate, context);\n    var length = getLength(array);\n    var index = dir > 0 ? 0 : length - 1;\n    for (; index >= 0 && index < length; index += dir) {\n      if (predicate(array[index], index, array)) return index;\n    }\n    return -1;\n  };\n}\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the first index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(1);\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the last index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(-1);\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Use a comparator function to figure out the smallest index at which\n// an object should be inserted so as to maintain order. Uses binary search.\nexport default function sortedIndex(array, obj, iteratee, context) {\n  iteratee = cb(iteratee, context, 1);\n  var value = iteratee(obj);\n  var low = 0, high = getLength(array);\n  while (low < high) {\n    var mid = Math.floor((low + high) / 2);\n    if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n  }\n  return low;\n}\n","import getLength from './_getLength.js';\nimport { slice } from './_setup.js';\nimport isNaN from './isNaN.js';\n\n// Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\nexport default function createIndexFinder(dir, predicateFind, sortedIndex) {\n  return function(array, item, idx) {\n    var i = 0, length = getLength(array);\n    if (typeof idx == 'number') {\n      if (dir > 0) {\n        i = idx >= 0 ? idx : Math.max(idx + length, i);\n      } else {\n        length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n      }\n    } else if (sortedIndex && idx && length) {\n      idx = sortedIndex(array, item);\n      return array[idx] === item ? idx : -1;\n    }\n    if (item !== item) {\n      idx = predicateFind(slice.call(array, i, length), isNaN);\n      return idx >= 0 ? idx + i : -1;\n    }\n    for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n      if (array[idx] === item) return idx;\n    }\n    return -1;\n  };\n}\n","import sortedIndex from './sortedIndex.js';\nimport findIndex from './findIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the first occurrence of an item in an array,\n// or -1 if the item is not included in the array.\n// If the array is large and already in sort order, pass `true`\n// for **isSorted** to use binary search.\nexport default createIndexFinder(1, findIndex, sortedIndex);\n","import findLastIndex from './findLastIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the last occurrence of an item in an array,\n// or -1 if the item is not included in the array.\nexport default createIndexFinder(-1, findLastIndex);\n","import isArrayLike from './_isArrayLike.js';\nimport findIndex from './findIndex.js';\nimport findKey from './findKey.js';\n\n// Return the first value which passes a truth test.\nexport default function find(obj, predicate, context) {\n  var keyFinder = isArrayLike(obj) ? findIndex : findKey;\n  var key = keyFinder(obj, predicate, context);\n  if (key !== void 0 && key !== -1) return obj[key];\n}\n","import find from './find.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.find`: getting the first\n// object containing specific `key:value` pairs.\nexport default function findWhere(obj, attrs) {\n  return find(obj, matcher(attrs));\n}\n","import optimizeCb from './_optimizeCb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// The cornerstone for collection functions, an `each`\n// implementation, aka `forEach`.\n// Handles raw objects in addition to array-likes. Treats all\n// sparse array-likes as if they were dense.\nexport default function each(obj, iteratee, context) {\n  iteratee = optimizeCb(iteratee, context);\n  var i, length;\n  if (isArrayLike(obj)) {\n    for (i = 0, length = obj.length; i < length; i++) {\n      iteratee(obj[i], i, obj);\n    }\n  } else {\n    var _keys = keys(obj);\n    for (i = 0, length = _keys.length; i < length; i++) {\n      iteratee(obj[_keys[i]], _keys[i], obj);\n    }\n  }\n  return obj;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the results of applying the iteratee to each element.\nexport default function map(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length,\n      results = Array(length);\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    results[index] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// Internal helper to create a reducing function, iterating left or right.\nexport default function createReduce(dir) {\n  // Wrap code that reassigns argument variables in a separate function than\n  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n  var reducer = function(obj, iteratee, memo, initial) {\n    var _keys = !isArrayLike(obj) && keys(obj),\n        length = (_keys || obj).length,\n        index = dir > 0 ? 0 : length - 1;\n    if (!initial) {\n      memo = obj[_keys ? _keys[index] : index];\n      index += dir;\n    }\n    for (; index >= 0 && index < length; index += dir) {\n      var currentKey = _keys ? _keys[index] : index;\n      memo = iteratee(memo, obj[currentKey], currentKey, obj);\n    }\n    return memo;\n  };\n\n  return function(obj, iteratee, memo, context) {\n    var initial = arguments.length >= 3;\n    return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n  };\n}\n","import createReduce from './_createReduce.js';\n\n// **Reduce** builds up a single result from a list of values, aka `inject`,\n// or `foldl`.\nexport default createReduce(1);\n","import createReduce from './_createReduce.js';\n\n// The right-associative version of reduce, also known as `foldr`.\nexport default createReduce(-1);\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// Return all the elements that pass a truth test.\nexport default function filter(obj, predicate, context) {\n  var results = [];\n  predicate = cb(predicate, context);\n  each(obj, function(value, index, list) {\n    if (predicate(value, index, list)) results.push(value);\n  });\n  return results;\n}\n","import filter from './filter.js';\nimport negate from './negate.js';\nimport cb from './_cb.js';\n\n// Return all the elements for which a truth test fails.\nexport default function reject(obj, predicate, context) {\n  return filter(obj, negate(cb(predicate)), context);\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine whether all of the elements pass a truth test.\nexport default function every(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (!predicate(obj[currentKey], currentKey, obj)) return false;\n  }\n  return true;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine if at least one element in the object passes a truth test.\nexport default function some(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (predicate(obj[currentKey], currentKey, obj)) return true;\n  }\n  return false;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport indexOf from './indexOf.js';\n\n// Determine if the array or object contains a given item (using `===`).\nexport default function contains(obj, item, fromIndex, guard) {\n  if (!isArrayLike(obj)) obj = values(obj);\n  if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n  return indexOf(obj, item, fromIndex) >= 0;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport map from './map.js';\nimport deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Invoke a method (with arguments) on every item in a collection.\nexport default restArguments(function(obj, path, args) {\n  var contextPath, func;\n  if (isFunction(path)) {\n    func = path;\n  } else {\n    path = toPath(path);\n    contextPath = path.slice(0, -1);\n    path = path[path.length - 1];\n  }\n  return map(obj, function(context) {\n    var method = func;\n    if (!method) {\n      if (contextPath && contextPath.length) {\n        context = deepGet(context, contextPath);\n      }\n      if (context == null) return void 0;\n      method = context[path];\n    }\n    return method == null ? method : method.apply(context, args);\n  });\n});\n","import map from './map.js';\nimport property from './property.js';\n\n// Convenience version of a common use case of `_.map`: fetching a property.\nexport default function pluck(obj, key) {\n  return map(obj, property(key));\n}\n","import filter from './filter.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.filter`: selecting only\n// objects containing specific `key:value` pairs.\nexport default function where(obj, attrs) {\n  return filter(obj, matcher(attrs));\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the maximum element (or element-based computation).\nexport default function max(obj, iteratee, context) {\n  var result = -Infinity, lastComputed = -Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value > result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed > lastComputed || (computed === -Infinity && result === -Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the minimum element (or element-based computation).\nexport default function min(obj, iteratee, context) {\n  var result = Infinity, lastComputed = Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value < result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed < lastComputed || (computed === Infinity && result === Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArray from './isArray.js';\nimport { slice } from './_setup.js';\nimport isString from './isString.js';\nimport isArrayLike from './_isArrayLike.js';\nimport map from './map.js';\nimport identity from './identity.js';\nimport values from './values.js';\n\n// Safely create a real, live array from anything iterable.\nvar reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\nexport default function toArray(obj) {\n  if (!obj) return [];\n  if (isArray(obj)) return slice.call(obj);\n  if (isString(obj)) {\n    // Keep surrogate pair characters together.\n    return obj.match(reStrSymbol);\n  }\n  if (isArrayLike(obj)) return map(obj, identity);\n  return values(obj);\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport getLength from './_getLength.js';\nimport random from './random.js';\nimport toArray from './toArray.js';\n\n// Sample **n** random values from a collection using the modern version of the\n// [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n// If **n** is not specified, returns a single random element.\n// The internal `guard` argument allows it to work with `_.map`.\nexport default function sample(obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = values(obj);\n    return obj[random(obj.length - 1)];\n  }\n  var sample = toArray(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n}\n","import sample from './sample.js';\n\n// Shuffle a collection.\nexport default function shuffle(obj) {\n  return sample(obj, Infinity);\n}\n","import cb from './_cb.js';\nimport pluck from './pluck.js';\nimport map from './map.js';\n\n// Sort the object's values by a criterion produced by an iteratee.\nexport default function sortBy(obj, iteratee, context) {\n  var index = 0;\n  iteratee = cb(iteratee, context);\n  return pluck(map(obj, function(value, key, list) {\n    return {\n      value: value,\n      index: index++,\n      criteria: iteratee(value, key, list)\n    };\n  }).sort(function(left, right) {\n    var a = left.criteria;\n    var b = right.criteria;\n    if (a !== b) {\n      if (a > b || a === void 0) return 1;\n      if (a < b || b === void 0) return -1;\n    }\n    return left.index - right.index;\n  }), 'value');\n}\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// An internal function used for aggregate \"group by\" operations.\nexport default function group(behavior, partition) {\n  return function(obj, iteratee, context) {\n    var result = partition ? [[], []] : {};\n    iteratee = cb(iteratee, context);\n    each(obj, function(value, index) {\n      var key = iteratee(value, index, obj);\n      behavior(result, value, key);\n    });\n    return result;\n  };\n}\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Groups the object's values by a criterion. Pass either a string attribute\n// to group by, or a function that returns the criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key].push(value); else result[key] = [value];\n});\n","import group from './_group.js';\n\n// Indexes the object's values by a criterion, similar to `_.groupBy`, but for\n// when you know that your index values will be unique.\nexport default group(function(result, value, key) {\n  result[key] = value;\n});\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Counts instances of an object that group by a certain criterion. Pass\n// either a string attribute to count by, or a function that returns the\n// criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key]++; else result[key] = 1;\n});\n","import group from './_group.js';\n\n// Split a collection into two arrays: one whose elements all pass the given\n// truth test, and one whose elements all do not pass the truth test.\nexport default group(function(result, value, pass) {\n  result[pass ? 0 : 1].push(value);\n}, true);\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the number of elements in a collection.\nexport default function size(obj) {\n  if (obj == null) return 0;\n  return isArrayLike(obj) ? obj.length : keys(obj).length;\n}\n","// Internal `_.pick` helper function to determine whether `key` is an enumerable\n// property name of `obj`.\nexport default function keyInObj(value, key, obj) {\n  return key in obj;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport optimizeCb from './_optimizeCb.js';\nimport allKeys from './allKeys.js';\nimport keyInObj from './_keyInObj.js';\nimport flatten from './_flatten.js';\n\n// Return a copy of the object only containing the allowed properties.\nexport default restArguments(function(obj, keys) {\n  var result = {}, iteratee = keys[0];\n  if (obj == null) return result;\n  if (isFunction(iteratee)) {\n    if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n    keys = allKeys(obj);\n  } else {\n    iteratee = keyInObj;\n    keys = flatten(keys, false, false);\n    obj = Object(obj);\n  }\n  for (var i = 0, length = keys.length; i < length; i++) {\n    var key = keys[i];\n    var value = obj[key];\n    if (iteratee(value, key, obj)) result[key] = value;\n  }\n  return result;\n});\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport negate from './negate.js';\nimport map from './map.js';\nimport flatten from './_flatten.js';\nimport contains from './contains.js';\nimport pick from './pick.js';\n\n// Return a copy of the object without the disallowed properties.\nexport default restArguments(function(obj, keys) {\n  var iteratee = keys[0], context;\n  if (isFunction(iteratee)) {\n    iteratee = negate(iteratee);\n    if (keys.length > 1) context = keys[1];\n  } else {\n    keys = map(flatten(keys, false, false), String);\n    iteratee = function(value, key) {\n      return !contains(keys, key);\n    };\n  }\n  return pick(obj, iteratee, context);\n});\n","import { slice } from './_setup.js';\n\n// Returns everything but the last entry of the array. Especially useful on\n// the arguments object. Passing **n** will return all the values in\n// the array, excluding the last N.\nexport default function initial(array, n, guard) {\n  return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n}\n","import initial from './initial.js';\n\n// Get the first element of an array. Passing **n** will return the first N\n// values in the array. The **guard** check allows it to work with `_.map`.\nexport default function first(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[0];\n  return initial(array, array.length - n);\n}\n","import { slice } from './_setup.js';\n\n// Returns everything but the first entry of the `array`. Especially useful on\n// the `arguments` object. Passing an **n** will return the rest N values in the\n// `array`.\nexport default function rest(array, n, guard) {\n  return slice.call(array, n == null || guard ? 1 : n);\n}\n","import rest from './rest.js';\n\n// Get the last element of an array. Passing **n** will return the last N\n// values in the array.\nexport default function last(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[array.length - 1];\n  return rest(array, Math.max(0, array.length - n));\n}\n","import filter from './filter.js';\n\n// Trim out all falsy values from an array.\nexport default function compact(array) {\n  return filter(array, Boolean);\n}\n","import _flatten from './_flatten.js';\n\n// Flatten out an array, either recursively (by default), or up to `depth`.\n// Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\nexport default function flatten(array, depth) {\n  return _flatten(array, depth, false);\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport filter from './filter.js';\nimport contains from './contains.js';\n\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\nexport default restArguments(function(array, rest) {\n  rest = flatten(rest, true, true);\n  return filter(array, function(value){\n    return !contains(rest, value);\n  });\n});\n","import restArguments from './restArguments.js';\nimport difference from './difference.js';\n\n// Return a version of the array that does not contain the specified value(s).\nexport default restArguments(function(array, otherArrays) {\n  return difference(array, otherArrays);\n});\n","import isBoolean from './isBoolean.js';\nimport cb from './_cb.js';\nimport getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// The faster algorithm will not work with an iteratee if the iteratee\n// is not a one-to-one function, so providing an iteratee will disable\n// the faster algorithm.\nexport default function uniq(array, isSorted, iteratee, context) {\n  if (!isBoolean(isSorted)) {\n    context = iteratee;\n    iteratee = isSorted;\n    isSorted = false;\n  }\n  if (iteratee != null) iteratee = cb(iteratee, context);\n  var result = [];\n  var seen = [];\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var value = array[i],\n        computed = iteratee ? iteratee(value, i, array) : value;\n    if (isSorted && !iteratee) {\n      if (!i || seen !== computed) result.push(value);\n      seen = computed;\n    } else if (iteratee) {\n      if (!contains(seen, computed)) {\n        seen.push(computed);\n        result.push(value);\n      }\n    } else if (!contains(result, value)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport uniq from './uniq.js';\nimport flatten from './_flatten.js';\n\n// Produce an array that contains the union: each distinct element from all of\n// the passed-in arrays.\nexport default restArguments(function(arrays) {\n  return uniq(flatten(arrays, true, true));\n});\n","import getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce an array that contains every item shared between all the\n// passed-in arrays.\nexport default function intersection(array) {\n  var result = [];\n  var argsLength = arguments.length;\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var item = array[i];\n    if (contains(result, item)) continue;\n    var j;\n    for (j = 1; j < argsLength; j++) {\n      if (!contains(arguments[j], item)) break;\n    }\n    if (j === argsLength) result.push(item);\n  }\n  return result;\n}\n","import max from './max.js';\nimport getLength from './_getLength.js';\nimport pluck from './pluck.js';\n\n// Complement of zip. Unzip accepts an array of arrays and groups\n// each array's elements on shared indices.\nexport default function unzip(array) {\n  var length = (array && max(array, getLength).length) || 0;\n  var result = Array(length);\n\n  for (var index = 0; index < length; index++) {\n    result[index] = pluck(array, index);\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport unzip from './unzip.js';\n\n// Zip together multiple lists into a single array -- elements that share\n// an index go together.\nexport default restArguments(unzip);\n","import getLength  from './_getLength.js';\n\n// Converts lists into objects. Pass either a single array of `[key, value]`\n// pairs, or two parallel arrays of the same length -- one of keys, and one of\n// the corresponding values. Passing by pairs is the reverse of `_.pairs`.\nexport default function object(list, values) {\n  var result = {};\n  for (var i = 0, length = getLength(list); i < length; i++) {\n    if (values) {\n      result[list[i]] = values[i];\n    } else {\n      result[list[i][0]] = list[i][1];\n    }\n  }\n  return result;\n}\n","// Generate an integer Array containing an arithmetic progression. A port of\n// the native Python `range()` function. See\n// [the Python documentation](https://docs.python.org/library/functions.html#range).\nexport default function range(start, stop, step) {\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (!step) {\n    step = stop < start ? -1 : 1;\n  }\n\n  var length = Math.max(Math.ceil((stop - start) / step), 0);\n  var range = Array(length);\n\n  for (var idx = 0; idx < length; idx++, start += step) {\n    range[idx] = start;\n  }\n\n  return range;\n}\n","import { slice } from './_setup.js';\n\n// Chunk a single array into multiple arrays, each containing `count` or fewer\n// items.\nexport default function chunk(array, count) {\n  if (count == null || count < 1) return [];\n  var result = [];\n  var i = 0, length = array.length;\n  while (i < length) {\n    result.push(slice.call(array, i, i += count));\n  }\n  return result;\n}\n","import _ from './underscore.js';\n\n// Helper function to continue chaining intermediate results.\nexport default function chainResult(instance, obj) {\n  return instance._chain ? _(obj).chain() : obj;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport functions from './functions.js';\nimport { push } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add your own custom functions to the Underscore object.\nexport default function mixin(obj) {\n  each(functions(obj), function(name) {\n    var func = _[name] = obj[name];\n    _.prototype[name] = function() {\n      var args = [this._wrapped];\n      push.apply(args, arguments);\n      return chainResult(this, func.apply(_, args));\n    };\n  });\n  return _;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport { ArrayProto } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add all mutator `Array` functions to the wrapper.\neach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) {\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) {\n        delete obj[0];\n      }\n    }\n    return chainResult(this, obj);\n  };\n});\n\n// Add all accessor `Array` functions to the wrapper.\neach(['concat', 'join', 'slice'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) obj = method.apply(obj, arguments);\n    return chainResult(this, obj);\n  };\n});\n\nexport default _;\n","// Default Export\n// ==============\n// In this module, we mix our bundled exports into the `_` object and export\n// the result. This is analogous to setting `module.exports = _` in CommonJS.\n// Hence, this module is also the entry point of our UMD bundle and the package\n// entry point for CommonJS and AMD users. In other words, this is (the source\n// of) the module you are interfacing with when you do any of the following:\n//\n// ```js\n// // CommonJS\n// var _ = require('underscore');\n//\n// // AMD\n// define(['underscore'], function(_) {...});\n//\n// // UMD in the browser\n// // _ is available as a global variable\n// ```\nimport * as allExports from './index.js';\nimport { mixin } from './index.js';\n\n// Add all of the Underscore functions to the wrapper object.\nvar _ = mixin(allExports);\n// Legacy Node.js API.\n_._ = _;\n// Export the Underscore API.\nexport default _;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.F = {};\n__webpack_require__.E = (chunkId) => {\n\tObject.keys(__webpack_require__.F).map((key) => {\n\t\t__webpack_require__.F[key](chunkId);\n\t});\n}","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"20240529-\" + ({\"304\":\"app-frame\",\"502\":\"formapp\",\"524\":\"app\",\"754\":\"outreach\",\"798\":\"formservice\",\"933\":\"auth\"}[chunkId] || chunkId) + \"-\" + {\"39\":\"fab74679071be2be33dd\",\"44\":\"3f085d49d020d2fad678\",\"255\":\"dafb5c34932c0d978a7a\",\"287\":\"c45a8e45c4a59896d96f\",\"304\":\"88b04297cfcdc575c413\",\"491\":\"14a8cb838d97b6f4f512\",\"502\":\"08a273ff17ccf6455586\",\"524\":\"e712e1276b6a8680539c\",\"611\":\"2eed8f0f3185b6773e35\",\"620\":\"9aeac213903179534eb5\",\"710\":\"bc53d008b45f09346db2\",\"737\":\"b10aecf0222c2cdb48c3\",\"754\":\"024b2041902e53ba865f\",\"768\":\"78a1dc859e19aafc518c\",\"798\":\"8c4d33254fac644c602c\",\"871\":\"986ea9db0d6dfa135d41\",\"921\":\"0dde4ca79e1d6db751d9\",\"933\":\"487630a767fb4100431e\",\"949\":\"c438b1e6db2e7fc9bc44\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"20240529-\" + ({\"304\":\"app-frame\",\"502\":\"formapp\",\"524\":\"app\",\"754\":\"outreach\",\"798\":\"formservice\",\"933\":\"auth\"}[chunkId] || chunkId) + \"-\" + {\"304\":\"19b4a97b7bd3758e763b\",\"502\":\"91b7725a3a9c3c5f58b5\",\"524\":\"71f7a17906e59edb687a\",\"611\":\"8ad06a2e932ccfb5e3d2\",\"754\":\"33c0fc11c82241161468\",\"798\":\"95c33975f068655e223f\",\"933\":\"f224e4a35f2630b0a12d\"}[chunkId] + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","if (typeof document === \"undefined\") return;\nvar createStylesheet = (chunkId, fullhref, oldTag, resolve, reject) => {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tif (__webpack_require__.nc) {\n\t\tlinkTag.nonce = __webpack_require__.nc;\n\t}\n\tvar onLinkComplete = (event) => {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && event.type;\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + errorType + \": \" + realHref + \")\");\n\t\t\terr.name = \"ChunkLoadError\";\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tif (linkTag.parentNode) linkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\n\tif (oldTag) {\n\t\toldTag.parentNode.insertBefore(linkTag, oldTag.nextSibling);\n\t} else {\n\t\tdocument.head.appendChild(linkTag);\n\t}\n\treturn linkTag;\n};\nvar findStylesheet = (href, fullhref) => {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = (chunkId) => {\n\treturn new Promise((resolve, reject) => {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, null, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.miniCss = (chunkId, promises) => {\n\tvar cssChunks = {\"304\":1,\"502\":1,\"524\":1,\"611\":1,\"754\":1,\"798\":1,\"933\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(() => {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, (e) => {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr\n\n__webpack_require__.F.miniCss = (chunkId) => {\n\tif((!__webpack_require__.o(installedCssChunks, chunkId) || installedCssChunks[chunkId] === undefined) && /^((30|52|75)4|502|611|798|933)$/.test(chunkId)) {\n\t\tinstalledCssChunks[chunkId] = null;\n\t\tvar link = document.createElement('link');\n\n\t\tif (__webpack_require__.nc) {\n\t\t\tlink.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tlink.rel = \"prefetch\";\n\t\tlink.as = \"style\";\n\t\tlink.href = __webpack_require__.p + __webpack_require__.miniCssF(chunkId);\n\t\tdocument.head.appendChild(link);\n\t}\n};\n\n// no preloaded","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n__webpack_require__.F.j = (chunkId) => {\n\tif((!__webpack_require__.o(installedChunks, chunkId) || installedChunks[chunkId] === undefined) && true) {\n\t\tinstalledChunks[chunkId] = null;\n\t\tvar link = document.createElement('link');\n\n\t\tif (__webpack_require__.nc) {\n\t\t\tlink.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tlink.rel = \"prefetch\";\n\t\tlink.as = \"script\";\n\t\tlink.href = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\tdocument.head.appendChild(link);\n\t}\n};\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkcare_ops_frontend\"] = globalThis[\"webpackChunkcare_ops_frontend\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.O(0, [792], () => {\n\t[768,737,287,933].map(__webpack_require__.E);\n}, 5);","try{self[\"workbox:window:7.0.0\"]&&_()}catch(n){}function n(n,t){return new Promise((function(r){var e=new MessageChannel;e.port1.onmessage=function(n){r(n.data)},n.postMessage(t,[e.port2])}))}function t(n){var t=function(n,t){if(\"object\"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||\"default\");if(\"object\"!=typeof e)return e;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(n)}(n,\"string\");return\"symbol\"==typeof t?t:t+\"\"}function r(n,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(n,t(i.key),i)}}function e(n,t){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},e(n,t)}function i(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function o(n,t){var r=\"undefined\"!=typeof Symbol&&n[Symbol.iterator]||n[\"@@iterator\"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=function(n,t){if(n){if(\"string\"==typeof n)return i(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return\"Object\"===r&&n.constructor&&(r=n.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(n):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(n,t):void 0}}(n))||t&&n&&\"number\"==typeof n.length){r&&(n=r);var e=0;return function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}try{self[\"workbox:core:7.0.0\"]&&_()}catch(n){}var u=function(){var n=this;this.promise=new Promise((function(t,r){n.resolve=t,n.reject=r}))};function a(n,t){var r=location.href;return new URL(n,r).href===new URL(t,r).href}var c=function(n,t){this.type=n,Object.assign(this,t)};function f(n,t,r){return r?t?t(n):n:(n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n)}function s(){}var v={type:\"SKIP_WAITING\"};function h(n,t){if(!t)return n&&n.then?n.then(s):Promise.resolve()}var l=function(t){function i(n,r){var e,i;return void 0===r&&(r={}),(e=t.call(this)||this).nn={},e.tn=0,e.rn=new u,e.en=new u,e.on=new u,e.un=0,e.an=new Set,e.cn=function(){var n=e.fn,t=n.installing;e.tn>0||!a(t.scriptURL,e.sn.toString())||performance.now()>e.un+6e4?(e.vn=t,n.removeEventListener(\"updatefound\",e.cn)):(e.hn=t,e.an.add(t),e.rn.resolve(t)),++e.tn,t.addEventListener(\"statechange\",e.ln)},e.ln=function(n){var t=e.fn,r=n.target,i=r.state,o=r===e.vn,u={sw:r,isExternal:o,originalEvent:n};!o&&e.mn&&(u.isUpdate=!0),e.dispatchEvent(new c(i,u)),\"installed\"===i?e.wn=self.setTimeout((function(){\"installed\"===i&&t.waiting===r&&e.dispatchEvent(new c(\"waiting\",u))}),200):\"activating\"===i&&(clearTimeout(e.wn),o||e.en.resolve(r))},e.yn=function(n){var t=e.hn,r=t!==navigator.serviceWorker.controller;e.dispatchEvent(new c(\"controlling\",{isExternal:r,originalEvent:n,sw:t,isUpdate:e.mn})),r||e.on.resolve(t)},e.gn=(i=function(n){var t=n.data,r=n.ports,i=n.source;return f(e.getSW(),(function(){e.an.has(i)&&e.dispatchEvent(new c(\"message\",{data:t,originalEvent:n,ports:r,sw:i}))}))},function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];try{return Promise.resolve(i.apply(this,n))}catch(n){return Promise.reject(n)}}),e.sn=n,e.nn=r,navigator.serviceWorker.addEventListener(\"message\",e.gn),e}var o,s;s=t,(o=i).prototype=Object.create(s.prototype),o.prototype.constructor=o,e(o,s);var l,m,w,y=i.prototype;return y.register=function(n){var t=(void 0===n?{}:n).immediate,r=void 0!==t&&t;try{var e=this;return f(function(n,t){var r=n();if(r&&r.then)return r.then(t);return t(r)}((function(){if(!r&&\"complete\"!==document.readyState)return h(new Promise((function(n){return window.addEventListener(\"load\",n)})))}),(function(){return e.mn=Boolean(navigator.serviceWorker.controller),e.dn=e.pn(),f(e.bn(),(function(n){e.fn=n,e.dn&&(e.hn=e.dn,e.en.resolve(e.dn),e.on.resolve(e.dn),e.dn.addEventListener(\"statechange\",e.ln,{once:!0}));var t=e.fn.waiting;return t&&a(t.scriptURL,e.sn.toString())&&(e.hn=t,Promise.resolve().then((function(){e.dispatchEvent(new c(\"waiting\",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),e.hn&&(e.rn.resolve(e.hn),e.an.add(e.hn)),e.fn.addEventListener(\"updatefound\",e.cn),navigator.serviceWorker.addEventListener(\"controllerchange\",e.yn),e.fn}))})))}catch(n){return Promise.reject(n)}},y.update=function(){try{return this.fn?f(h(this.fn.update())):f()}catch(n){return Promise.reject(n)}},y.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},y.messageSW=function(t){try{return f(this.getSW(),(function(r){return n(r,t)}))}catch(n){return Promise.reject(n)}},y.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&n(this.fn.waiting,v)},y.pn=function(){var n=navigator.serviceWorker.controller;return n&&a(n.scriptURL,this.sn.toString())?n:void 0},y.bn=function(){try{var n=this;return f(function(n,t){try{var r=n()}catch(n){return t(n)}if(r&&r.then)return r.then(void 0,t);return r}((function(){return f(navigator.serviceWorker.register(n.sn,n.nn),(function(t){return n.un=performance.now(),t}))}),(function(n){throw n})))}catch(n){return Promise.reject(n)}},l=i,(m=[{key:\"active\",get:function(){return this.en.promise}},{key:\"controlling\",get:function(){return this.on.promise}}])&&r(l.prototype,m),w&&r(l,w),Object.defineProperty(l,\"prototype\",{writable:!1}),l}(function(){function n(){this.Pn=new Map}var t=n.prototype;return t.addEventListener=function(n,t){this.jn(n).add(t)},t.removeEventListener=function(n,t){this.jn(n).delete(t)},t.dispatchEvent=function(n){n.target=this;for(var t,r=o(this.jn(n.type));!(t=r()).done;){(0,t.value)(n)}},t.jn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},n}());export{l as Workbox,c as WorkboxEvent,n as messageSW};\n//# sourceMappingURL=workbox-window.prod.es5.mjs.map\n","import 'core-js/modules/web.dom-exception.stack';\nimport 'core-js/modules/web.structured-clone';\nimport { Workbox } from 'workbox-window';\n\nimport { fetchConfig, versions, appConfig } from './config';\nimport { initDataDog } from './datadog';\n\nimport getRootRoute from 'js/utils/root-route';\n\nif ('serviceWorker' in navigator) {\n  const wb = new Workbox('/sw.js');\n\n  wb.register();\n}\n\nfunction startOutreach() {\n  import(/* webpackChunkName: \"outreach\" */'./outreach/index')\n    .then(({ startOutreachApp }) => {\n      startOutreachApp();\n    });\n}\n\nfunction startForm() {\n  import(/* webpackChunkName: \"formapp\" */'./formapp')\n    .then(({ startFormApp }) => {\n      startFormApp();\n    });\n}\n\nfunction start() {\n  import(/* webpackChunkName: \"app\" */'./app')\n    .then(({ startApp }) => {\n      startApp();\n    });\n}\n\nfunction startFormService() {\n  import(/* webpackChunkName: \"formservice\" */'./formservice')\n    .then(({ startFormServiceApp }) => {\n      startFormServiceApp();\n    });\n}\n\nfunction startAuth() {\n  import(/* webpackPrefetch: true, webpackChunkName: \"auth\" */ './auth')\n    .then(({ auth }) => {\n      auth(start);\n    });\n}\n\nfunction startApps({ isForm, isOutreach }) {\n  if (isOutreach) {\n    startOutreach();\n    return;\n  }\n\n  if (isForm) {\n    startForm();\n    return;\n  }\n\n  startAuth();\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const rootRoute = getRootRoute();\n  const isFormService = rootRoute === 'formservice';\n\n  if (isFormService) {\n    startFormService();\n    return;\n  }\n\n  const isForm = rootRoute === 'formapp';\n  const isOutreach = rootRoute === 'outreach';\n\n  if ((_DEVELOP_ || _E2E_) && sessionStorage.getItem('cypress')) {\n    versions.frontend = 'cypress';\n    appConfig.name = 'Cypress Clinic';\n    appConfig.cypress = sessionStorage.getItem('cypress');\n\n    if (location.pathname === '/logout') return;\n\n    startApps({ isForm, isOutreach });\n    return;\n  }\n\n  fetchConfig(() => {\n    initDataDog({ isForm });\n\n    startApps({ isForm, isOutreach });\n  });\n});\n"],"names":["deferred","inProgress","dataWebpackPrefix","auth0Config","kindeConfig","datadogConfig","appConfig","versions","fetchConfig","success","fetch","URLSearchParams","_","_NOW_","then","response","json","config","extend","auth0","kinde","datadog","app","ConsoleApiName","log","debug","info","warn","error","globalConsole","console","originalConsoleMethods","Object","keys","forEach","name","PREFIX","display","bind","catchUserErrors","fn","errorMsg","args","_i","arguments","length","apply","err","onMonitorErrorCollected","__spreadArray","to","from","pack","ar","i","l","Array","prototype","slice","call","concat","debugMode","setDebugMode","newDebugMode","monitored","__","descriptor","originalMethod","value","monitor","this","callMonitored","context","e","displayIfDebugEnabled","includes","candidate","search","indexOf","arrayFrom","arrayLike","array","Set","item","push","find","predicate","objectValues","object","map","key","objectEntries","startsWith","target","toAssign","source","hasOwnProperty","makePublicApi","stub","publicApi","version","onReady","callback","defineProperty","get","enumerable","defineGlobal","global","api","existingGlobalVariable","q","getGlobalObject","globalThis","configurable","globalObject","_dd_temp_","self","window","ONE_KIBI_BYTE","ONE_MEBI_BYTE","HAS_MULTI_BYTES_CHARACTERS","computeBytesCount","test","undefined","TextEncoder","encode","Blob","size","getZoneJsOriginalValue","original","browserWindow","Zone","__symbol__","delay","timeoutId","wait","options","pendingExecutionWithParameters","pendingTimeoutId","needLeadingExecution","leading","needTrailingExecution","trailing","inWaitPeriod","throttled","parameters","cancel","jsonStringify","replacer","space","JSON","stringify","restoreObjectPrototypeToJson","detachToJsonMethod","restoreArrayPrototypeToJson","restoreValuePrototypeToJson","getPrototypeOf","restoreValueToJson","_a","objectToJson","toJSON","shallowClone","objectHasValue","some","isEmptyObject","CUSTOMER_DATA_BYTES_LIMIT","CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT","BYTES_COMPUTATION_THROTTLING_DELAY","createCustomerDataTrackerManager","compressionStatus","customerDataTrackers","Map","alreadyWarned","checkCustomerDataLimit","initialBytesCount","bytesCountLimit","bytesCount","tracker","getBytesCount","displayCustomerDataLimitReachedWarning","createDetachedTracker","createCustomerDataTracker","getOrCreateTracker","type","has","set","setCompressionStatus","newCompressionStatus","getCompressionStatus","stop","clear","bytesCountCache","computeBytesCountThrottled","cancelComputeBytesCount","resetBytesCount","updateCustomerData","resetCustomerData","getType","isArray","mergeInto","destination","circularReferenceChecker","WeakSet","set_1","hasAlreadyBeenSeen","add","createCircularReferenceChecker","Date","getTime","RegExp","flags","ignoreCase","multiline","sticky","unicode","join","merged_1","merged","deepClone","combine","sources","sources_1","SANITIZE_DEFAULT_MAX_CHARACTER_COUNT","JSON_PATH_ROOT_ELEMENT","KEY_DECORATION_LENGTH","sanitize","maxCharacterCount","containerQueue","visitedObjectsWithPath","WeakMap","sanitizedData","sanitizeProcessor","accumulatedCharacterCount","containerToProcess","shift","separatorLength","targetData","path","warnOverCharacterLimit","parentPath","queue","sourceToSanitize","tryToApplyToJSON","toString","description","sanitizedSource","Event","isTrusted","match","sanitizeObjects","sourceAsObject","currentPath","changeType","Observable","onFirstSubscribe","observers","subscribe","f","_this","onLastUnsubscribe","unsubscribe","filter","other","notify","data","observer","mergeObservables","observables","globalObservable","subscriptions","observable","subscription","createContextManager","customerDataTracker","changeObservable","contextManager","getContext","setContext","newContext","clearContext","setContextProperty","property","removeContextProperty","ExperimentalFeature","TrackingConsent","GRANTED","NOT_GRANTED","createTrackingConsentState","currentConsent","tryToInit","trackingConsent","update","isGranted","enabledExperimentalFeatures","isExperimentalFeatureEnabled","featureName","performDraw","threshold","Math","random","round","num","decimals","toFixed","isPercentage","isNumber","navigationStart","DOM_EVENT","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_YEAR","relativeToClocks","relative","timeStamp","relativeTime","correctedOrigin","dateNow","performance","now","getNavigationStart","addDuration","getTimeStamp","timeStampToClocks","getRelativeTime","toServerDuration","duration","relativeNow","clocksNow","clocksOrigin","elapsed","start","end","a","b","timestamp","timing","addEventListener","configuration","eventTarget","eventName","listener","eventNames","_b","once","capture","passive","listenerWithMonitor","event","__ddIsTrusted","allowUntrustedEvents","remove","storageListeners","storeContextManager","productKey","customerDataType","storageKey","buildStorageKey","getFromStorage","rawContext","localStorage","getItem","parse","STORAGE","setItem","createIdentityEncoder","output","outputBytesCount","isAsync","isEmpty","write","additionalEncodedBytesCount","finish","finishSync","result","rawBytesCount","pendingData","estimateEncodedBytesCount","UNKNOWN_FUNCTION","computeStackTrace","ex","stack","stackProperty","tryToGetString","exString","String","split","line","stackFrame","parts","CHROME_LINE_RE","exec","isNative","isEval","submatch","CHROME_EVAL_RE","column","func","url","parseChromeLine","CHROME_ANONYMOUS_FUNCTION_RE","parseChromeAnonymousLine","WINJS_LINE_RE","parseWinLine","GECKO_LINE_RE","GECKO_EVAL_RE","parseGeckoLine","message","fileUrl","filePosition","ERROR_TYPES_RE","createHandlingStack","formattedStack","Error","stackTrace","toStackTraceString","formatErrorMessage","frame","NO_ERROR_STACK_PRESENT_MESSAGE","computeRawError","originalError","handlingStack","startClocks","nonErrorPrefix","handling","isErrorInstance","computeMessage","hasUsableStack","causes","flattenErrorCauses","fingerprint","tryToGetFingerprint","dd_fingerprint","parentSource","currentError","cause","INTAKE_SITE_STAGING","INTAKE_SITE_FED_STAGING","INTAKE_SITE_US1","INTAKE_SITE_EU1","PCI_INTAKE_HOST_US1","sendToExtension","payload","__ddBrowserSdkExtensionCallback","getConnectivity","navigator","status","onLine","interfaces","connection","effective_type","effectiveType","onRawTelemetryEventCollected","TelemetryType","usage","ALLOWED_FRAME_URLS","TELEMETRY_EXCLUDED_SITES","telemetryConfiguration","maxEventsPerPage","sentEventCount","startTelemetry","telemetryService","contextProvider","telemetryEnabled","site","telemetrySampleRate","telemetryEnabledPerType","telemetryConfigurationSampleRate","telemetryUsageSampleRate","runtimeEnvInfo","is_local_file","location","protocol","is_worker","rawEvent","event_1","date","service","_dd","format_version","telemetry","runtime_env","connectivity","experimental_features","toTelemetryEvent","addTelemetryError","maxTelemetryEventsPerPage","setContextProvider","provider","enabled","isTelemetryReplicationAllowed","addTelemetryDebug","addTelemetry","kind","scrubCustomerFrames","formatError","addTelemetryConfiguration","addTelemetryUsage","allowedFrameUrl","sanitizeUser","newUser","user","checkUser","isValid","displayAlreadyInitializedError","sdkName","initConfiguration","silentMultipleInit","removeItem","index","splice","BoundedBuffer","buffer","drain","arg","getEventBridge","eventBridgeGlobal","DatadogEventBridge","getCapabilities","getPrivacyLevel","getAllowedWebViewHosts","send","eventType","viewId","view","id","bridgeSupports","capability","bridge","canUseEventBridge","currentHost","hostname","allowedHost","generateUUID","placeholder","parseInt","replace","initCookieParsed","getCurrentSiteCache","COMMA_SEPARATED_KEY_VALUE","findCommaSeparatedValue","rawString","lastIndex","safeTruncate","suffix","lastChar","charCodeAt","correctedLength","setCookie","expireDelay","setTime","expires","toUTCString","sameSite","crossSite","domain","secure","partitioned","document","cookie","getCookie","getInitCookie","findCommaSeparatedValues","deleteCookie","browserCache","SYNTHETICS_TEST_ID_COOKIE_NAME","SYNTHETICS_RESULT_ID_COOKIE_NAME","SYNTHETICS_INJECTS_RUM_COOKIE_NAME","willSyntheticsInjectRum","Boolean","_DATADOG_SYNTHETICS_INJECTS_RUM","getSyntheticsTestId","_DATADOG_SYNTHETICS_PUBLIC_ID","getSyntheticsResultId","_DATADOG_SYNTHETICS_RESULT_ID","detectBrowserCached","userAgent","chrome","vendor","documentMode","detectBrowser","SESSION_STORE_KEY","SESSION_TIME_OUT_DELAY","SESSION_EXPIRATION_DELAY","SESSION_ENTRY_REGEXP","SESSION_ENTRY_SEPARATOR","EXPIRED","getExpiredSessionState","isExpired","isSessionInNotStartedState","session","isSessionInExpiredState","sessionState","created","Number","expire","expandSessionState","toSessionString","toSessionState","sessionString","isValidSessionString","entry","matches","OLD_SESSION_COOKIE_NAME","OLD_RUM_COOKIE_NAME","OLD_LOGS_COOKIE_NAME","RUM_SESSION_KEY","LOGS_SESSION_KEY","initCookieStrategy","cookieOptions","cookieStore","isLockEnabled","persistSession","retrieveSession","retrieveSessionCookie","expireSession","expireSessionCookie","cookieStoreStrategy","oldSessionId","oldRumType","oldLogsType","isSessionStarted","tryOldCookiesMigration","LOCAL_STORAGE_TEST_KEY","persistInLocalStorage","retrieveSessionFromLocalStorage","expireSessionFromLocalStorage","ongoingOperations","LOCK_RETRY_DELAY","LOCK_MAX_TRIES","bufferedOperations","processSessionStoreOperations","operations","sessionStoreStrategy","numberOfRetries","persistWithLock","lock","currentLock","retrieveStore","next","currentStore","retryLater","processedSession","process","after","sessionStore","currentNumberOfRetries","nextOperations","STORAGE_POLL_DELAY","selectSessionStoreStrategyType","sessionStoreStrategyType","useSecureSessionCookie","usePartitionedCrossSiteSessionCookie","useCrossSiteSessionCookie","trackSessionAcrossSubdomains","testCookieName","domainLevels","candidateDomain","pop","getCurrentSite","buildCookieOptions","testCookieValue","isCookieCorrectlySet","areCookiesAuthorized","selectCookieStrategy","allowFallbackToLocalStorage","testKey","retrievedId","selectLocalStorageStrategy","normalizeUrl","buildUrl","href","base","supportedURL","isURLSupported","originalURL","getSupportedUrl","doc","anchorElement","createElement","baseElement","implementation","createHTMLDocument","head","appendChild","body","URL","createEndpointBuilder","trackType","configurationTags","buildUrlWithParameters","proxy","normalizedProxyUrl_1","encodeURIComponent","host","internalAnalyticsSubdomain","usePciIntake","domainParts","extension","buildEndpointHost","createEndpointUrlWithParametersBuilder","build","clientToken","retry","flushReason","encoding","tags","COLLECT_FLUSH_REASON","count","lastFailureStatus","reverse","buildEndpointParameters","urlPrefix","TAG_SIZE_LIMIT","FORBIDDEN_CHARACTERS","buildTag","rawValue","valueSizeLimit","sanitizedValue","DOC_LINK","DefaultPrivacyLevel","ALLOW","MASK","MASK_USER_INPUT","TraceContextInjection","ALL","SAMPLED","validateAndBuildConfiguration","_c","_d","_e","sessionSampleRate","enableExperimentalFeatures","flag","beforeSend","batchBytesLimit","eventRateLimiterThreshold","flushTimeout","batchMessagesLimit","messageBytesLimit","env","datacenter","buildTags","endpointBuilders","logsEndpointBuilder","rumEndpointBuilder","sessionReplayEndpointBuilder","computeEndpointBuilders","intakeUrlPrefixes","builder","computeIntakeUrlPrefixes","replicaConfiguration","replica","replicaEndpointBuilders","applicationId","computeReplicaConfiguration","isIntakeUrl","intakeEndpoint","computeTransportConfiguration","serializeConfiguration","session_sample_rate","telemetry_sample_rate","telemetry_configuration_sample_rate","telemetry_usage_sample_rate","use_before_send","use_cross_site_session_cookie","use_partitioned_cross_site_session_cookie","use_secure_session_cookie","use_proxy","silent_multiple_init","track_session_across_subdomains","allow_fallback_to_local_storage","store_contexts_across_pages","storeContextsAcrossPages","allow_untrusted_events","tracking_consent","isMatchOption","itemType","matchList","list","useStartsWith","clearTracingIfNeeded","isAborted","traceId","spanId","traceSampled","injectHeadersIfTracingAllowed","sessionManager","inject","getCrypto","findTrackedSession","propagatorTypes","tracingHeaders","tracingOption","allowedTracingUrls","traceSampleRate","traceContextInjection","TraceIdentifier","propagatorType","toDecimalString","traceparent","toPaddedHexadecimalString","b3","crypto","msCrypto","Uint8Array","getRandomValues","radix","high","readInt32","low","str","mod","floor","offset","DEFAULT_PROPAGATOR_TYPES","getSelectedTracingPropagators","usedTracingPropagators","option","createPreStartStrategy","getCommonContext","trackingConsentState","doStartRum","firstStartViewCall","deflateWorker","cachedInitConfiguration","cachedConfiguration","ignoreInitIfSyntheticsWillInjectRum","startDeflateWorker","bufferApiCalls","trackingConsentStateSubscription","tryStartRum","initialViewOptions","trackViewsManually","startRumResult","init","eventBridgeAvailable","defaultPrivacyLevel","overrideInitConfigurationForBridge","sessionReplaySampleRate","excludedActivityUrls","tracingOptions_1","expectedItem","validateAndBuildTracingOptions","baseConfiguration","actionNameAttribute","startSessionReplayRecordingManually","workerUrl","compressIntakeRequests","trackUserInteractions","trackResources","trackLongTasks","subdomain","customerDataTelemetrySampleRate","validateAndBuildRumConfiguration","getInternalContext","stopSession","addTiming","time","startView","addAction","action","commonContext","addError","providedError","addFeatureFlagEvaluation","startDurationVital","vitalStart","stopDurationVital","PageExitReason","HIDDEN","UNLOADING","PAGEHIDE","FROZEN","createPageExitObservable","pagehideEnabled","stopListeners","VISIBILITY_CHANGE","FREEZE","PAGE_HIDE","reason","visibilityState","stopBeforeUnloadListener","BEFORE_UNLOAD","isPageExitReason","getMutationObserverConstructor","constructor","MutationObserver","originalInstance","runOnReadyState","expectedReadyState","readyState","LOAD","DOM_CONTENT_LOADED","FAKE_INITIAL_DOCUMENT","RESOURCE_TYPES","initiatorType","areInOrder","numbers","computePerformanceResourceDetails","validEntry","toValidEntry","startTime","fetchStart","redirectStart","redirectEnd","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","details","download","formatTiming","responseEnd","first_byte","connect","ssl","dns","redirect","TOLERANT_RESOURCE_TIMINGS","areCommonTimingsInOrder","areRedirectionTimingsInOrder","hasRedirection","origin","computeSize","encodedBodySize","decodedBodySize","encoded_body_size","decoded_body_size","transfer_size","transferSize","isAllowedRequestUrl","DATA_URL_REGEX","MAX_ATTRIBUTE_VALUE_CHAR_LENGTH","isLongDataUrl","substring","sanitizeDataUrl","isTextNode","node","nodeType","Node","TEXT_NODE","isElementNode","ELEMENT_NODE","isNodeShadowHost","shadowRoot","isNodeShadowRoot","DOCUMENT_FRAGMENT_NODE","forEachChildNodes","child","firstChild","nextSibling","getParentNode","parentNode","RumPerformanceEntryType","INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD","getDocumentTraceId","traceIdMeta","querySelector","traceTimeMeta","createDocumentTraceData","content","getDocumentTraceDataFromMeta","comment","childNodes","getTraceCommentFromNode","findTraceComment","getDocumentTraceDataFromComment","traceTime","rawTraceTime","COMMENT_NODE","isCommentNode","supportPerformanceObject","supportPerformanceTimingEvent","entryType","PerformanceObserver","supportedEntryTypes","startPerformanceCollection","lifeCycle","cleanupTasks","forcedAttributes","RESOURCE","NAVIGATION","getEntriesByType","navigationEntry","relativePerformanceTiming","computeRelativePerformanceTiming","renderBlockingStatus","retrieveInitialDocumentResourceTiming","handleRumPerformanceEntries","performanceEntries_1","getEntries","handlePerformanceEntryList_1","entries","mainEntries","LONG_TASK","PAINT","experimentalEntries","LARGEST_CONTENTFUL_PAINT","FIRST_INPUT","LAYOUT_SHIFT","EVENT","observe","buffered","durationThreshold","disconnect","mainObserver_1","entryTypes","removePerformanceListener","clearResourceTimings","sendFakeTiming","retrieveNavigationTiming","stopFirstInputTiming","startTimeStamp","timingSent","removeEventListeners","CLICK","MOUSE_DOWN","KEY_DOWN","TOUCH_START","POINTER_DOWN","evt","cancelable","processingStart","processingEnd","POINTER_UP","POINTER_CANCEL","sendTiming","sendTimingIfPointerIsNotCancelled","retrieveFirstInputTiming","task","numberKey","timingElement","rumAllowedPerformanceEntries","loadEventEnd","isIncompleteNavigation","isForbiddenResource","ErrorSource","AGENT","CONSOLE","CUSTOM","LOGGER","NETWORK","SOURCE","REPORT","createEventRateLimiter","limit","onLimitReached","eventCount","allowNextEvent","isLimitReached","current","fields","field","isValidObject","isValidObjectContaining","modifiableFieldPathsByEvent","VIEW_MODIFIABLE_FIELD_PATHS","USER_CUSTOMIZABLE_FIELD_PATHS","startRumAssembly","viewContexts","urlContexts","actionContexts","displayContext","ciVisibilityContext","reportError","WRITABLE_RESOURCE_GRAPHQL","eventRateLimiters","syntheticsContext","testId","resultId","test_id","result_id","injected","getSyntheticsContext","rawRumEvent","domainContext","savedCommonContext","customerContext","viewContext","findView","urlContext","findUrl","actionId","findActionId","serverRumEvent","drift","session_replay_sample_rate","browser_sdk_version","application","referrer","synthetics","ci_test","has_replay","hasReplay","sampled_for_replay","sessionReplayAllowed","usr","modifiableFieldPaths","modifier","clone","fieldPath","fieldType","newValue","newType","limitModification","shouldSend","xhrObservable","AbstractLifeCycle","callbacks","eventCallbacks","LifeCycle","END_OF_TIMES","Infinity","CLEAR_OLD_VALUES_INTERVAL","ValueHistory","maxEntries","clearOldValuesInterval","clearOldValues","endTime","close","unshift","closeActive","latestEntry","findAll","reset","oldTimeThreshold","VIEW_CONTEXT_TIME_OUT_DELAY","instrumentMethod","targetPrototype","method","onPreCall","instrumentation","postCallCallback","onPostCall","createInstrumentedMethod","instrumentationWrapper","instrumentSetter","originalDescriptor","getOwnPropertyDescriptor","stoppedInstrumentation","fetchObservable","xhrContexts","initXhrObservable","stopInstrumentingStart","XMLHttpRequest","openXhr","stopInstrumentingSend","xhr","startContext","state","hasBeenReported","stopInstrumentingOnReadyStateChange","DONE","onEnd","unsubscribeLoadEndListener","completeContext","sendXhr","stopInstrumentingAbort","abortXhr","createXhrObservable","toUpperCase","initFetchObservable","input","methodFromParams","Request","responsePromise","reportFetch","DOMException","code","ABORT_ERR","responseType","afterSend","isServerError","tryToClone","readBytesFromStream","stream","reader","getReader","chunks","readBytesCount","onDone","bytes","limitExceeded","catch","collectStreamBody","completeBuffer_1","offset_1","chunk","bytesLimit","readMore","read","done","nextRequestIndex","getNextRequestIndex","trackEventCounts","isChildEvent","onChange","eventCounts","errorCount","longTaskCount","resourceCount","actionCount","frustrationCount","frustration","discarded","PAGE_ACTIVITY_VALIDATION_DELAY","PAGE_ACTIVITY_END_DELAY","waitPageActivityEnd","domMutationObservable","pageActivityEndCallback","maxDuration","pageActivityObservable","firstRequestIndex","pendingRequestsCount","notifyPageActivity","isExcludedUrl","startEvent","requestIndex","request","stopTrackingWindowOpen","s","isBusy","createPageActivityObservable","pageActivityEndTimeoutId","hasCompleted","validationTimeoutId","complete","hadActivity","maxDurationTimeoutId","pageActivitySubscription","lastChangeTime","doWaitPageActivityEnd","requestUrl","cssEscape","CSS","escape","ch","asCodePoint","getParentElement","parentElement","DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE","getActionNameFromElementProgrammatically","targetElement","programmaticAttribute","elementWithAttribute","supportsElementClosestResult","HTMLElement","closest","element","hasAttribute","truncate","normalizeWhitespace","getAttribute","trim","supportsLabelPropertyResult","priorityStrategies","userProgrammaticAttribute","HTMLInputElement","labels","getTextualContent","label","ownerDocument","querySelectorAll","htmlFor","nodeName","labelledByAttribute","refElement","getElementById","fallbackStrategies","MAX_PARENTS_TO_CONSIDER","getActionNameFromElementForStrategies","strategies","recursionCounter","strategies_1","name_1","strategy","trimmedName","isContentEditable","text_1","innerText","removeTextFromElements","query","element_1","textToReplace","textContent","supportScopeSelectorCache","STABLE_ATTRIBUTES","GLOBALLY_UNIQUE_SELECTOR_GETTERS","getStableAttributeSelector","isGeneratedValue","UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS","tagName","classList","classes","getClassList","className","getSelectorFromElement","targetElementSelector","globallyUniqueSelector","findSelector","isSelectorUniqueGlobally","isSelectorUniqueAmongSiblings","combineSelector","getPositionSelector","selector","getAttributeSelector","STABLE_ATTRIBUTES_1","attributeName","sibling","firstElementChild","elementIndex","nextElementSibling","selectorGetters","childSelector","selectorGetters_1","elementSelector","selectorGetter","fullSelector","supportScopeSelector","parent","MAX_DURATION_BETWEEN_CLICKS","MAX_DISTANCE_BETWEEN_CLICKS","isSelectionEmpty","selection","getSelection","isCollapsed","isValidPointerEvent","Element","isPrimary","MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE","DEAD_CLICK_EXCLUDE_SELECTOR","isDead","click","hasPageActivity","getUserActivity","scroll","msMatchesSelector","CLICK_ACTION_MAX_DURATION","ACTION_CONTEXT_TIME_OUT_DELAY","trackClickActions","currentClickChain","history","stopObservable","stopClickChain","stopActionEventsListener","selectionEmptyAtPointerDown","clickContext","onPointerDown","onPointerUp","userActivity","listeners","SELECTION_CHANGE","SCROLL","localUserActivity_1","INPUT","listenActionEvents","pointerDownEvent","rect","clickActionBase","getBoundingClientRect","width","height","position","x","clientX","left","y","clientY","top","hadActivityOnPointerDown","pageActivityEndEvent","processPointerDown","appendClickToClickChain","newClick","stopWaitPageActivityEnd","discard","viewEndedSubscription","endClocks","stopSubscription","startClickAction","tryAppend","rageClick_1","firstClick","onFinalize","maxDurationBetweenClicksTimeoutId","bufferedClicks","appendClick","tryFinalize","dontAcceptMoreClick","every","isStopped","first","second","sqrt","pow","createClickChain","clicks","rageClick","isRage","addFrustration","hasError","hasSelectionChanged","computeFrustration","validate","finalizeClicks","activityEndTime","historyEntry","eventCountsSubscription","frustrationTypes","newActivityEndTime","frustrationType","domEvents","clickAction","counts","events","processAction","pageStateHistory","autoActionProperties","isAutoAction","loading_time","long_task","resource","in_foreground","wasInPageStateAt","trackRuntimeError","errorObservable","handleRuntimeError","rawError","stopInstrumentingOnError","messageObj","errorObj","tryToParseMessage","computeStackTraceFromOnErrorMessage","stopInstrumentingOnUnhandledRejection","instrumentUnhandledRejection","consoleObservablesByApi","initConsoleObservable","apis","consoleObservables","originalConsoleApi","params","param","formatConsoleParameters","firstErrorParam","buildConsoleLog","createConsoleObservable","RawReportType","intervention","deprecation","cspViolation","initReportObservable","SECURITY_POLICY_VIOLATION","blockedURI","effectiveDirective","subtype","buildStack","originalPolicy","sourceFile","lineNumber","columnNumber","originalReport","buildRawReportFromCspViolation","createCspViolationReportObservable","reportTypes","ReportingObserver","handleReports","reports","report","buildRawReportFromReport","types","createReportObservable","startResourceCollection","matchingTiming","sameNameEntries","getEntriesByName","candidates","matchRequestTiming","shouldIndex","shouldIndexResource","tracingInfo","span_id","trace_id","rule_psr","getRulePsr","computeRequestTracingInfo","correspondingTimingOverrides","computePerformanceEntryMetrics","wasInPageStateDuringPeriod","computeRequestDuration","pageStateInfo","computePageStateInfo","resourceEvent","status_code","performanceEntry","requestInput","requestInit","processRequest","entries_1","processResourceEntry","computeEntryTracingInfo","statusCode","isValidUrl","pathname","getPathName","RESOURCE_TYPES_1","isType","computeResourceKind","entryMetrics","responseStatus","resourceStart","render_blocking_status","RESOURCE_PAGE_STATES","page_states","page_was_discarded","wasDiscarded","previousLcp","FCP_MAXIMUM_DELAY","LCP_MAXIMUM_DELAY","wrongLcpReported","toSerializableLCP","jsonEntry","trackInitialViewMetrics","setLoadEvent","scheduleViewUpdate","initialViewMetrics","stopNavigationTracking","navigationTimings","domComplete","domContentLoaded","domContentLoadedEventEnd","domInteractive","loadEvent","firstByte","trackNavigationTimings","firstHidden","trackFirstHidden","stopFCPTracking","firstContentfulPaint","fcpEntry","trackFirstContentfulPaint","stopLCPTracking","firstInteractionTimestamp","stopEventListener","biggestLcpSize","unsubscribeLifeCycle","lcpEntry","findLast","lcpTargetSelector","ZERO_LCP_TELEMETRY","lcpEntries","wrongLcpDetected","timeOrigin","monitorLcpEntries","targetSelector","trackLargestContentfulPaint","largestContentfulPaint","stopFIDTracking","firstInput","firstInputEntry","firstInputDelay","firstInputTargetSelector","trackFirstInput","viewportObservable","interactionCountEstimate","minKnownInteractionId","maxKnownInteractionId","getInteractionCount","interactionCount","MAX_INTERACTION_ENTRIES","MAX_INP_VALUE","getScrollX","scrollX","visual","visualViewport","pageLeft","offsetLeft","pageXOffset","getScrollY","scrollY","pageTop","offsetTop","pageYOffset","initViewportObservable","updateDimension","getViewportDimension","RESIZE","createViewportObservable","scale","innerWidth","innerHeight","THROTTLE_SCROLL_DURATION","trackCommonViewMetrics","loadingType","viewStart","commonViewMetrics","loadType","isWaitingForLoadEvent","isWaitingForActivityLoadingTime","loadingTimeCandidates","invokeCallbackIfAllCandidatesAreReceived","newLoadingTime","max","loadingTime","trackLoadingTime","stopLoadingTimeTracking","stopScrollMetricsTracking","scrollValues","throttleDuration","ResizeObserver","throttledNotify_1","scrollTop","scrollHeight","scrollingElement","documentElement","scrollDepth","observerTarget_1","resizeObserver_1","eventListener_1","unobserve","createScrollValuesObservable","maxScrollDepth","maxScrollHeight","maxScrollHeightTime","shouldUpdate","maxDepth","min","maxDepthScrollTop","trackScrollMetrics","newScrollMetrics","stopCLSTracking","maxClsValue","largestLayoutShiftTarget","largestLayoutShiftTime","largestLayoutShift","slidingSessionWindow","hadRecentInput","cls","clsTarget","cslTargetSelector","isConnected","trackCumulativeLayoutShift","cumulativeLayoutShift","viewLoadingType","PerformanceEventTiming","getInteractionToNextPaint","setViewEnd","interactionToNextPaintTargetSelector","interactionId","previousInteractionCount","stopped","computeViewInteractionCount","getViewInteractionCount","stopViewInteractionCount","trackViewInteractionCount","viewEnd","longestInteractions","sortAndTrimLongestInteractions","sort","interactionIndex","findIndex","interaction","minLongestInteraction","estimateP98Interaction","trackLongestInteractions","interactionToNextPaint","viewEndTime","newInteraction","trackInteractionToNextPaint","stopINPTracking","getCommonViewMetrics","THROTTLE_VIEW_UPDATE_PERIOD","SESSION_KEEP_ALIVE_INTERVAL","KEEP_TRACKING_AFTER_VIEW_DELAY","getPathFromHash","hash","startViewCollection","locationChangeObservable","featureFlagContexts","recorderApi","_f","_g","_h","_j","_k","_l","_m","_o","_p","replayStats","getReplayStats","featureFlagContext","findFeatureFlagEvaluations","pageStates","viewEvent","document_version","documentVersion","replay_stats","start_session_replay_recording_manually","cumulative_layout_shift","cumulative_layout_shift_target_selector","dom_complete","dom_content_loaded","dom_interactive","first_contentful_paint","first_input_delay","first_input_time","first_input_target_selector","interaction_to_next_paint","interaction_to_next_paint_target_selector","is_active","isActive","largest_contentful_paint","largest_contentful_paint_target_selector","load_event","loading_type","time_spent","feature_flags","max_depth","max_depth_scroll_top","max_scroll_height","max_scroll_height_time","sessionIsActive","privacy","replay_level","customTimings","custom_timings","newObject","mapValues","processViewUpdate","areViewsTrackedAutomatically","locationChangeSubscription","activeViews","currentView","startNewView","viewOptions","newlyCreatedView","initialLocation","viewCreatedEvent","triggerViewUpdate","cancelScheduleViewUpdate","stopCommonViewMetricsTracking","stopInitialViewMetricsTracking","trackViewEventCounts","stopEventCountsTracking","keepAliveIntervalId","currentEnd","looksLikeRelativeTime","sanitized","sanitizeTiming","newView","delete","pageExitEvent","currentLocation","otherLocation","correspondingId","oldLocation","newLocation","renewViewOnLocationChange","trackViews","VISIBILITY_CHECK_DELAY","SESSION_CONTEXT_TIMEOUT_DELAY","stopCallbacks","startSessionManager","computeSessionState","renewObservable","expireObservable","sessionCache","watchSessionTimeoutId","synchronizeSession","startSession","isTracked","synchronizedSession","trackingType","expandOrRenewSessionState","hasSessionInCache","renewSessionInCache","throttledExpandOrRenewSession","cancelExpandOrRenewSession","isSessionInCacheOutdated","expandOrRenewSession","expandSession","getSession","restartSession","startSessionStore","sessionContextHistory","buildSessionContext","trackActivity","expandSessionWhenVisible","visibilityCheckInterval","trackVisibility","cb","RESUME","trackResume","findActiveSession","isTypeTracked","rumSessionType","Batch","encoder","flushController","upsertBuffer","flushSubscription","flushObservable","flush","addOrUpdate","upsert","upsertMessages","isPageExit","sendOnExit","encoderResult","formatPayloadFromEncoder","pendingMessages","serializedMessage","estimatedMessageBytesCount","hasMessageFor","notifyBeforeAddMessage","notifyAfterAddMessage","realMessageBytesCount","removedMessage","messageBytesCount","notifyAfterRemoveMessage","flushEvent","MAX_ONGOING_BYTES_COUNT","MAX_ONGOING_REQUESTS","MAX_QUEUE_BYTES_COUNT","MAX_BACKOFF_TIME","INITIAL_BACKOFF_TIME","sendWithRetryStrategy","sendStrategy","transportStatus","queuedPayloads","bandwidthMonitor","canHandle","onSuccess","retryQueuedPayloads","onFailure","enqueue","scheduleRetry","dequeue","currentBackoffTime","shouldRetryRequest","ongoingRequestCount","isFull","queueFullReported","previousQueue","newPayloadQueue","createHttpRequest","endpointBuilder","retryState","ongoingByteCount","sendStrategyForRetry","onResponse","isKeepAliveSupported","fetchUrl","keepalive","mode","xhrUrl","sendXHR","fetchKeepAliveStrategy","sendBeacon","beaconUrl","hasReportedBeaconError","reportBeaconError","sendBeaconStrategy","open","setRequestHeader","startBatchWithReplica","primary","pageExitObservable","sessionExpireObservable","primaryBatch","createBatch","replicaBatch","endpoint","durationLimitTimeoutId","messagesLimit","durationLimit","pageExitSubscription","sessionExpireSubscription","currentBytesCount","currentMessagesCount","messagesCount","cancelDurationLimitTimeout","messageBytesCountDiff","createFlushController","replicated","transformMessage","URL_CONTEXT_TIME_OUT_DELAY","currentPeriodMeasures","currentBatchMeasures","batchHasRumEvent","FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY","MEASURES_PERIOD_DURATION","sendCurrentPeriodMeasures","batchCount","initCurrentPeriodMeasures","updateMeasure","measure","sum","mergeMeasure","batchBytesCount","batchMessagesCount","globalContextBytes","userContextBytes","featureFlagBytes","initCurrentBatchMeasures","PAGE_STATE_CONTEXT_TIME_OUT_DELAY","getPageState","hasFocus","WATCH_COOKIE_INTERVAL_DELAY","watchCookieFallback","cookieName","previousCookieValue","watchCookieIntervalId","cookieValue","CI_VISIBILITY_TEST_ID_COOKIE_NAME","statsPerView","MAX_STATS_HISTORY","getSegmentsCount","getOrCreateReplayStats","segments_count","records_count","segments_total_raw_size","isFirst_1","_value","deleteOldestStats","NodePrivacyLevel","IGNORE","PRIVACY_ATTR_NAME","PRIVACY_ATTR_VALUE_ALLOW","PRIVACY_ATTR_VALUE_MASK","PRIVACY_ATTR_VALUE_MASK_USER_INPUT","PRIVACY_ATTR_VALUE_HIDDEN","PRIVACY_CLASS_ALLOW","PRIVACY_CLASS_MASK","PRIVACY_CLASS_MASK_USER_INPUT","PRIVACY_CLASS_HIDDEN","CENSORED_STRING_MARK","CENSORED_IMG_MARK","FORM_PRIVATE_TAG_NAMES","OUTPUT","TEXTAREA","SELECT","OPTION","DATALIST","OPTGROUP","getNodePrivacyLevel","cache","parentNodePrivacyLevel","nodePrivacyLevel","reducePrivacyLevel","getNodeSelfPrivacyLevel","childPrivacyLevel","privAttr","inputElement","autocomplete","contains","relAttribute","getLowerCaseAttribute","nameAttribute","propertyAttribute","toLowerCase","shouldIgnoreElement","shouldMaskNode","privacyLevel","isFormElement","censorText","text","getTextContent","textNode","ignoreWhiteSpace","parentTagName","serializedNodeIds","hasSerializedNode","getSerializedNodeId","getElementInputValue","URL_IN_CSS_REF","ABSOLUTE_URL","DATA_URI","TAG_NAME_REGEX","getValidTagName","processedTagName","censoredImageForSize","FullSnapshot","IncrementalSnapshot","Meta","Focus","ViewEnd","VisualViewport","FrustrationRecord","NodeType","Document","DocumentType","Text","CDATA","DocumentFragment","IncrementalSource","Mutation","MouseMove","MouseInteraction","Scroll","ViewportResize","Input","TouchMove","MediaInteraction","StyleSheetRule","MouseInteractionType","MouseUp","MouseDown","Click","ContextMenu","DblClick","Blur","TouchStart","TouchEnd","MediaInteractionType","Play","Pause","serializeStyleSheets","cssStyleSheets","cssStyleSheet","rules","cssRules","cssRule","cssText","disabled","media","serializeAttribute","attributeValue","image","naturalWidth","naturalHeight","getCssRulesString","cssHref","getCssRuleStringForSafari","getCssRuleString","matchingSubstring","singleQuote","urlWrappedInSingleQuotes","doubleQuote","urlWrappedInDoubleQuotes","urlNotWrappedInQuotes","quote","baseUrl","makeUrlAbsolute","rule","isCSSStyleRule","selectorText","isCSSImportRule","styleSheet","serializeNodeWithId","serializedNode","DOCUMENT_NODE","serializeChildNodes","adoptedStyleSheets","serializeDocumentNode","isShadowRoot","serializationContext","shadowRootsController","addShadowRoot","serializeDocumentFragmentNode","DOCUMENT_TYPE_NODE","documentType","publicId","systemId","el","isSVG","SVGElement","attributes","rr_width","rr_height","safeAttrs","formValue","optionElement","selected","stylesheet","styleSheets","DISABLE_REPLAY_INLINE_CSS","_cssText","sheet","scrollLeft","checked","mediaElement","rr_mediaState","paused","elementsScrollPositions","rr_scrollLeft","rr_scrollTop","serializeAttributes","hasChildNodes","serializeElementNode","serializeTextNode","CDATA_SECTION_NODE","serializeNode","_nextId","serializedNodeWithId","serializeNodeId","setSerializedNodeId","childNode","serializedChildNode","serializeDocument","isTouchEvent","changedTouches","getEventTarget","composed","composedPath","convertMouseEventToLayoutCoordinates","normalized","layoutViewportX","layoutViewportY","visualViewportX","visualViewportY","abs","isVisualViewportFactoredIn","assembleIncrementalSnapshot","MOUSE_MOVE_OBSERVER_THRESHOLD","trackMove","moveCb","coordinates","tryToComputeCoordinates","timeOffset","positions","updatePosition","cancelThrottle","removeListener","MOUSE_MOVE","TOUCH_MOVE","isFinite","eventTypeToMouseInteraction","CONTEXT_MENU","DBL_CLICK","FOCUS","BLUR","TOUCH_END","trackMouseInteraction","mouseInteractionCb","recordIds","record","getIdForEvent","SCROLL_OBSERVER_THRESHOLD","trackScroll","scrollCb","scrollPositions","trackViewportResize","viewportResizeCb","viewportResizeSubscription","trackMediaInteraction","mediaInteractionCb","PLAY","PAUSE","trackStyleSheet","styleSheetCb","checkStyleSheetAndCallback","ownerNode","instrumentationStoppers","CSSStyleSheet","adds","removes","instrumentGroupingCSSRuleClass","parentStyleSheet","getPathToNestedCSSRule","CSSGroupingRule","CSSMediaRule","CSSSupportsRule","stopper","currentRule","parentRule","index_1","trackFocus","focusCb","has_focus","trackFrustration","frustrationCb","frustrationSubscription","trackViewEnd","viewEndCb","viewEndSubscription","trackInput","inputCb","stopPropertySetterInstrumentation","lastInputStateMap","stopEventListeners","CHANGE","HTMLTextAreaElement","HTMLSelectElement","onElementChange","instrumentationStoppers_1","inputState","isChecked","cbWithDedup","lastInputState","MUTATION_PROCESS_MAX_DELAY","trackMutation","mutationCallback","mutationBatch","processMutationBatch","cancelScheduledFlush","pendingMutations","addMutations","mutations","opts","requestIdleCallback","cancelIdleCallback","id_1","requestAnimationFrame","cancelAnimationFrame","timeout","createMutationBatch","nodePrivacyLevelCache","mutation","removedNodes","removedNode","traverseRemovedShadowDom","removeShadowRoot","filteredMutations","nodeAndAncestorsHaveSerializedNode","addedAndMovedNodes","_loop_1","addedNodes","mutations_1","sortedAddedAndMovedNodes","compareDocumentPosition","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_PRECEDING","addedNodeMutations","sortedAddedAndMovedNodes_1","hasBeenSerialized","nextId","getNextSibling","parentId","removedNodeMutations","processChildListMutations","texts","textMutations","handledNodes","filteredMutations_1","oldValue","processCharacterDataMutations","attributeMutations","handledElements","handledAttributes","emittedMutations","filteredMutations_2","transformedValue","inputValue","emittedMutation","processAttributesMutations","processMutations","takeRecords","attributeOldValue","characterData","characterDataOldValue","childList","subtree","shadowDomRemovedCallback","emit","scrollPositionsByElement","emitAndComputeStats","controllerByShadowRoot","mutationTracker","inputTracker","scrollTracker","initShadowRootsController","stopFullSnapshots","flushMutations","fullSnapshotCallback","takeFullSnapshot","records","initialOffset","startFullSnapshots","initRecordIds","trackers","viewEndRecord","Segment","creationReason","encodedBytesCount","metadata","creation_reason","has_full_snapshot","index_in_view","addRecord","prefix","additionalBytesCount","SEGMENT_DURATION_LIMIT","SEGMENT_BYTES_LIMIT","startSegmentCollection","httpRequest","getSegmentContext","nextSegmentCreationReason","unsubscribeViewCreated","flushSegment","unsubscribePageExited","segment","rawSegmentBytesCount","formData","FormData","append","metadataAndSegmentSizes","raw_segment_size","compressed_segment_size","byteLength","serializedMetadataAndSegmentSizes","buildReplayPayload","expirationTimeoutId","computeSegmentContext","doStartSegmentCollection","isBrowserSupported","createObjectURL","NodeList","getSessionReplayLink","isRecordingStarted","errorType","getErrorType","sessionId","rumConfiguration","getSiteDefaultSubdomain","getSessionReplayUrl","createDeflateEncoder","worker","streamId","compressedDataTrailer","compressedData","nextWriteActionId","pendingWriteActions","removeMessageListener","workerResponse","trailer","nextPendingAction","writeCallback","finishCallback","consumeResult","buffers","reduce","total","buffers_1","concatBuffers","sendResetIfNeeded","postMessage","pendingWriteAction","INITIALIZATION_TIME_OUT_DELAY","createDeflateWorker","Worker","onInitializationFailure","createDeflateWorkerImpl","removeErrorListener_1","onError","removeMessageListener_1","initializationFailureCallbacks","onTimeout","doStartDeflateWorker","getDeflateWorkerStatus","baseMessage","worker_version","stream_id","startRecordingImpl","onRumStart","isRecording","startStrategy","stopStrategy","getSessionReplayLinkStrategy","cachedDeflateEncoder","deflateEncoder","makeRecorderApi","stopRecording","replayRequest","startRecordBridge","segmentCollection","datadogRum","startRumImpl","customerDataTrackerManager","globalContextManager","userContextManager","buildCommonContext","CUSTOM_VITALS","rumPublicApi","stopClocks","stopTime","createEncoder","bridge_1","startRumTelemetry","currentContext","startFeatureFlagContexts","startRumSessionManagerStub","rawTrackingType","hasValidRumSession","startRumSessionManager","startRumEventBridge","batch_1","telemetryEventObservable","batch","startRumBatch","batchFlushObservable","startCustomerDataTelemetry","stopHistoryTracking","onHistoryChange","stopInstrumentingPushState","stopInstrumentingReplaceState","POP_STATE","trackHistory","onLocationChange","stopHashTracking","onHashChange","HASH_CHANGE","trackHash","createLocationChangeObservable","viewContextHistory","buildViewContext","startViewContexts","previousViewUrl","urlContextHistory","viewUrl","buildUrlContext","changeTime","startUrlContexts","maxPageStateEntriesSelectable","currentPageState","pageStateEntryHistory","addPageState","PAGE_SHOW","persisted","computePageState","nextPageState","eventStartTime","pageStateEntries","pageStateServerEntries","pageState","relativeStartTime","startPageStateHistory","startActionCollection","viewport","viewportDimension","startDisplayContext","cookieObservable","detectCookieChangeStrategy","changeEvent","changed","deleted","listenToCookieStoreChange","createCookieObservable","testExecutionId","Cypress","cookieObservableSubscription","test_execution_id","startCiVisibilityContext","startRumEventCollection","stopRumEventCollection","baseSerializedConfiguration","trace_sample_rate","trace_context_injection","action_name_attribute","use_allowed_tracing_urls","selected_tracing_propagators","default_privacy_level","use_excluded_activity_urls","use_worker_url","compress_intake_requests","track_views_manually","track_user_interactions","track_resources","track_long_task","serializeRumConfiguration","startLongTaskCollection","stopViewCollection","consoleError","trackConsoleError","csp","disposition","trackReportError","handling_stack","source_type","processError","doStartErrorCollection","startErrorCollection","tracer","traceFetch","headers","headers_1","Headers","header","traceXhr","startTracer","trackXhr","clonedResponse","POSITIVE_INFINITY","waitForResponseToComplete","trackFetch","startRequestCollection","stopPerformanceCollection","vitalCollection","vitalStartsByName","vitalStop","vital","buildDurationVital","valueComputedBySdk","custom","computed_value","processVital","startVitalCollection","internalContext","application_id","session_id","user_action","startInternalContext","createPostStartStrategy","sanitizedOptions","setTrackingConsent","feature","setGlobalContextProperty","removeGlobalContextProperty","getGlobalContext","setGlobalContext","clearGlobalContext","getInitConfiguration","setUser","getUser","setUserProperty","sanitizedProperty","removeUserProperty","clearUser","startSessionReplayRecording","stopSessionReplayRecording","makeRumPublicApi","StatusType","HandlerType","STATUSES","Logger","handleLogStrategy","handlerType","level","loggerContext","messageContext","errorContext","sanitizedMessageContext","setHandler","handler","getHandler","setLevel","getLevel","decorators","desc","d","c","r","Reflect","decorate","__decorate","DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT","validateAndBuildForwardOption","allowedValues","removeDuplicates","LOGS_STORAGE_KEY","computeTrackingType","logsSentBeforeRumInjectionTelemetryAdded","getRUMInternalContext","getInternalContextFromRumGlobal","DD_RUM_SYNTHETICS","DD_RUM","rumGlobal","LogStatusForApi","LogStatusForReport","truncateResponseText","responseText","requestErrorResponseLengthLimit","format","STATUS_PRIORITIES","isAuthorized","logger","loggerHandler","sanitizedHandlerType","datadogLogs","startLogsImpl","doStartLogs","tryStartLogs","startLogsResult","forwardConsoleLogs","forwardReports","forwardErrorsToLogs","validateAndBuildLogsConfiguration","handleLog","statusType","rawLogsEvent","startReportError","startLogsSessionManagerStub","rawSessionType","hasValidLoggerSession","startLogsSessionManager","stopLogsTelemetry","telemetrySubscription_1","telemetryBatch_1","telemetrySubscription_2","baseSerializedInitConfiguration","forward_errors_to_logs","forward_console_logs","forward_reports","use_pci_intake","serializeLogsConfiguration","startLogsTelemetry","xhrSubscription","handleResponse","fetchSubscription","onResponseDataAvailable","responseData","http","isRejected","computeXhrResponseData","TextDecoder","decode","truncateResponseStream","computeFetchResponseText","computeFetchErrorText","startNetworkErrorCollection","rawErrorObservable","startRuntimeErrorCollection","startConsoleCollection","getFileFromStackTraceString","startReportCollection","logsMessage","savedDate","displayInConsole","startLoggerCollection","statusWithCustom","logRateLimiters","startLogsAssembly","serverLogsEvent","startLogsBridge","stopLogsBatch_1","startLogsBatch","trackedSession","customLoggers","createLogger","conf","getLogger","makeLogsPublicApi","ddInitialized","getEnv","stackId","attrs","async","logResponse","contentType","responseHeaders","fromEntries","responseBody","initDataDog","isForm","frontend","initLogs","urlPaths","isPdfPrinter","initRum","getRootRoute","isCallable","tryToString","$TypeError","TypeError","module","exports","argument","isPossiblePrototype","$String","isPrototypeOf","it","Prototype","isObject","toIndexedObject","toAbsoluteIndex","lengthOfArrayLike","createMethod","IS_INCLUDES","$this","fromIndex","O","uncurryThis","stringSlice","TO_STRING_TAG_SUPPORT","classofRaw","TO_STRING_TAG","wellKnownSymbol","$Object","CORRECT_ARGUMENTS","tag","tryGet","callee","hasOwn","ownKeys","getOwnPropertyDescriptorModule","definePropertyModule","exceptions","DESCRIPTORS","createPropertyDescriptor","bitmap","writable","makeBuiltIn","defineGlobalProperty","simple","unsafe","nonConfigurable","nonWritable","fails","WorkerThreads","channel","$detach","tryNodeRequire","PROPER_STRUCTURED_CLONE_TRANSFER","structuredClone","$ArrayBuffer","ArrayBuffer","$MessageChannel","MessageChannel","detach","transferable","transfer","port1","EXISTS","IndexSizeError","m","DOMStringSizeError","HierarchyRequestError","WrongDocumentError","InvalidCharacterError","NoDataAllowedError","NoModificationAllowedError","NotFoundError","NotSupportedError","InUseAttributeError","InvalidStateError","SyntaxError","InvalidModificationError","NamespaceError","InvalidAccessError","ValidationError","TypeMismatchError","SecurityError","NetworkError","AbortError","URLMismatchError","QuotaExceededError","TimeoutError","InvalidNodeTypeError","DataCloneError","IS_DENO","IS_NODE","Deno","classof","v8","$Error","TEST","V8_OR_CHAKRA_STACK_ENTRY","IS_V8_OR_CHAKRA_STACK","dropEntries","prepareStackTrace","createNonEnumerableProperty","defineBuiltIn","copyConstructorProperties","isForced","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","dontCallGetSet","forced","sham","aCallable","NATIVE_BIND","that","Function","FunctionPrototype","getDescriptor","PROPER","CONFIGURABLE","uncurryThisWithBind","namespace","getMethod","isNullOrUndefined","Iterators","ITERATOR","anObject","getIteratorMethod","usingIterator","iteratorMethod","V","P","check","g","toObject","propertyIsEnumerable","setPrototypeOf","dummy","Wrapper","NewTarget","NewTargetPrototype","store","functionToString","inspectSource","NATIVE_WEAK_MAP","shared","sharedKey","hiddenKeys","OBJECT_ALREADY_INITIALIZED","facade","STATE","enforce","getterFor","TYPE","ArrayPrototype","documentAll","all","getBuiltIn","noop","construct","constructorRegExp","INCORRECT_TO_STRING","isConstructorModern","isConstructorLegacy","called","replacement","detection","normalize","POLYFILL","NATIVE","string","USE_SYMBOL_AS_UID","$Symbol","ITERATOR_INSTEAD_OF_RECORD","step","iterator","isArrayIteratorMethod","getIterator","iteratorClose","Result","ResultPrototype","iterable","unboundFunction","iterFn","AS_ENTRIES","IS_RECORD","IS_ITERATOR","INTERRUPTED","condition","callFn","innerResult","innerError","toLength","obj","CONFIGURABLE_FUNCTION_NAME","InternalStateModule","enforceInternalState","getInternalState","CONFIGURABLE_LENGTH","TEMPLATE","getter","setter","arity","MapPrototype","proto","ceil","trunc","n","$default","IE8_DOM_DEFINE","V8_PROTOTYPE_DEFINE_BUG","toPropertyKey","$defineProperty","$getOwnPropertyDescriptor","ENUMERABLE","WRITABLE","Attributes","propertyIsEnumerableModule","internalObjectKeys","getOwnPropertyNames","getOwnPropertySymbols","names","$propertyIsEnumerable","NASHORN_BUG","uncurryThisAccessor","requireObjectCoercible","aPossiblePrototype","CORRECT_SETTER","__proto__","pref","val","valueOf","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","hasIndices","dotAll","unicodeSets","regExpFlags","RegExpPrototype","R","SetPrototype","iterateSimple","SetHelpers","interruptible","uid","IS_PURE","SHARED","copyright","license","V8","IS_BROWSER","V8_VERSION","symbol","Symbol","toIntegerOrInfinity","integer","IndexedObject","number","len","isSymbol","ordinaryToPrimitive","TO_PRIMITIVE","exoticToPrim","toPrimitive","postfix","NATIVE_SYMBOL","passed","required","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","$","anInstance","inheritIfRequired","normalizeStringArgument","DOMExceptionConstants","clearErrorStack","DOM_EXCEPTION","NativeDOMException","$DOMException","DOMExceptionPrototype","argumentsLength","ERROR_HAS_STACK","DOM_EXCEPTION_HAS_STACK","BUGGY_DESCRIPTOR","FORCED_CONSTRUCTOR","PolyfilledDOMException","PolyfilledDOMExceptionPrototype","constant","constantName","structuredCloneImplementation","isConstructor","iterate","createProperty","validateArgumentsLength","getRegExpFlags","MapHelpers","setIterate","detachTransferable","ERROR_STACK_INSTALLABLE","PerformanceMark","mapHas","mapGet","mapSet","setAdd","setHas","objectKeys","thisBooleanValue","thisNumberValue","thisStringValue","thisTimeValue","PERFORMANCE_MARK","DATA_CLONE_ERROR","TRANSFERRING","checkBasicSemantic","set1","set2","checkErrorsCloning","nativeStructuredClone","FORCED_REPLACEMENT","AggregateError","errors","structuredCloneFromMark","detail","nativeRestrictedStructuredClone","throwUncloneable","throwUnpolyfillable","tryNativeRestrictedStructuredClone","cloneBuffer","$type","DataView","resizable","maxByteLength","setUint8","getUint8","structuredCloneInternal","C","cloned","dataTransfer","cloneView","byteOffset","DOMQuad","p1","p2","p3","p4","File","DataTransfer","ClipboardEvent","clipboardData","error2","items","files","createDataTransfer","ImageData","colorSpace","fromPoint","z","w","fromRect","fromMatrix","v","k","suppressed","rawTransfer","transferred","canvas","OffscreenCanvas","transferFromImageBitmap","transferToImageBitmap","tryToTransfer","detachBuffers","VERSION","root","ArrayProto","ObjProto","SymbolProto","supportsArrayBuffer","supportsDataView","nativeIsArray","nativeKeys","nativeCreate","create","nativeIsView","isView","_isNaN","isNaN","_isFinite","hasEnumBug","nonEnumerableProps","MAX_ARRAY_INDEX","restArguments","startIndex","rest","isNull","isUndefined","isBoolean","isElement","tagTester","isFunction","nodelist","Int8Array","hasStringTagBug","isIE11","isDataView","getInt8","isArrayBuffer","isArguments","parseFloat","createSizePropertyCheck","getSizeProperty","collection","sizeProperty","shallowProperty","typedArrayPattern","collectNonEnumProps","emulatedSet","nonEnumIdx","prop","isString","isMatch","_keys","_wrapped","toBufferView","bufferSource","tagDataView","eq","aStack","bStack","deepEq","areArrays","aCtor","bCtor","isEqual","allKeys","ie11fingerprint","methods","weakMapMethods","forEachName","commonInit","mapTail","mapMethods","setMethods","values","pairs","invert","functions","createAssigner","keysFunc","defaults","baseCreate","Ctor","props","extendOwn","tap","interceptor","toPath","deepGet","defaultValue","identity","matcher","optimizeCb","argCount","accumulator","baseIteratee","iteratee","mapObject","results","currentKey","propertyOf","times","accum","createEscaper","escaper","testRegexp","replaceRegexp","templateSettings","evaluate","interpolate","noMatch","escapes","escapeRegExp","escapeChar","bareIdentifier","template","settings","oldSettings","render","variable","fallback","idCounter","uniqueId","chain","instance","_chain","executeBound","sourceFunc","boundFunc","callingContext","partial","boundArgs","bound","callArgs","flatten","depth","strict","idx","j","memoize","hasher","address","setTimeout","throttle","previous","later","_now","remaining","clearTimeout","debounce","immediate","debounced","_args","wrap","wrapper","negate","compose","before","memo","findKey","createPredicateIndexFinder","dir","sortedIndex","mid","createIndexFinder","predicateFind","findLastIndex","findWhere","each","createReduce","initial","reducer","reject","guard","contextPath","pluck","where","computed","lastComputed","reStrSymbol","toArray","sample","last","rand","temp","shuffle","sortBy","criteria","right","group","behavior","partition","pass","keyInObj","pick","compact","otherArrays","difference","uniq","isSorted","seen","arrays","intersection","argsLength","unzip","range","chainResult","mixin","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","chunkIds","priority","notFulfilled","fulfilled","F","E","chunkId","__esModule","definition","o","Promise","promises","u","miniCssF","script","needAttach","scripts","getElementsByTagName","charset","nc","setAttribute","src","onScriptComplete","prev","onerror","onload","doneFns","removeChild","toStringTag","p","installedCssChunks","miniCss","resolve","fullhref","existingLinkTags","dataHref","rel","existingStyleTags","findStylesheet","oldTag","linkTag","nonce","realHref","createStylesheet","loadStylesheet","link","as","installedChunks","installedChunkData","promise","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","t","onmessage","port2","assign","h","nn","tn","rn","en","on","un","an","cn","installing","scriptURL","sn","vn","removeEventListener","hn","ln","sw","isExternal","originalEvent","mn","isUpdate","dispatchEvent","wn","waiting","yn","serviceWorker","controller","gn","ports","getSW","register","dn","pn","bn","wasWaitingBeforeRegister","messageSW","messageSkipWaiting","Pn","jn","startApp","Workbox","rootRoute","startFormServiceApp","isOutreach","startOutreachApp","startFormApp","auth","startApps"],"sourceRoot":""}