{"version":3,"file":"20230623-main-9ac0f3071b8a643b2f2e.js","mappings":"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","sources":["webpack://care-ops-frontend/webpack/runtime/chunk loaded","webpack://care-ops-frontend/webpack/runtime/load script","webpack://care-ops-frontend/./src/js/config.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/display.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/catchUserErrors.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/monitor.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/experimentalFeatures.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/polyfills.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/boot/init.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/getGlobalObject.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/byteUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/getZoneJsOriginalValue.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/timer.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/functionUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/typeUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/mergeInto.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/serialisation/jsonStringify.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/serialisation/sanitize.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/serialisation/heavyCustomerDataWarning.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/serialisation/contextManager.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/boundedBuffer.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/numberUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/timeUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/stringUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/browser/cookie.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/synthetics/syntheticsWorkerValues.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/transport/eventBridge.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/tracekit/computeStackTrace.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/error/error.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/user/user.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/objectUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/urlPolyfill.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/configuration/intakeSites.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/configuration/endpointBuilder.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/configuration/tags.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/configuration/configuration.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/configuration/transportConfiguration.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/matchOption.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/tracing/tracer.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/configuration.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/commonContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/sendToExtension.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/observable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/browser/addEventListener.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/browser/pageExitObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/telemetry/rawTelemetryEvent.types.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/telemetry/telemetry.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/browser/domMutationObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/browser/runOnReadyState.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/resource/resourceUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/browser/htmlDomUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/tracing/getDocumentTraceId.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/browser/viewportObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/displayContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/browser/performanceCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/eventRateLimiter/createEventRateLimiter.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/limitModification.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/assembly.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/syntheticsContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/ciTestContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/foregroundContexts.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/lifeCycle.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/browser/xhrObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/sessionConstants.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/valueHistory.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/viewContexts.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/instrumentMethod.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/browser/fetchObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/responseUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/readBytesFromStream.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/requestCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/trackEventCounts.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/waitPageActivityEnd.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/action/clickChain.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/action/getActionNameFromElement.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/browserDetection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/action/getSelectorFromElement.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/action/listenActionEvents.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/action/computeFrustration.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/action/trackClickActions.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/action/actionCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/tracekit/tracekit.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/error/trackRuntimeError.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/console/consoleObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/report/reportObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/view/trackFirstHidden.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/resource/matchRequestTiming.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/resource/resourceCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/view/trackInitialViewTimings.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/view/trackViewMetrics.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/view/trackViewEventCounts.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/view/trackViews.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/view/viewCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/sessionCookieStore.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/oldCookiesMigration.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/sessionManager.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/domain/session/sessionStore.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumSessionManager.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/transport/flushController.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/transport/batch.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/transport/sendWithRetryStrategy.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/transport/httpRequest.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/urlContexts.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/featureFlagContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/startCustomerDataTelemetry.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/pageStateHistory.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/types/sessionReplayConstants.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/assembly.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/constants.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/privacy.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializationUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeStyleSheets.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeAttribute.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeAttributes.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeNode.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeDocument.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/eventsUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/viewports.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/observers/moveObserver.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/observers/scrollObserver.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/observers/mouseInteractionObserver.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/observers/inputObserver.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/observers/styleSheetObserver.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/observers/viewportResizeObserver.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/mutationBatch.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/observers/mutationObserver.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/record.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/elementsScrollPositions.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/shadowRootsController.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/observers/observers.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/observers/mediaInteractionObserver.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/observers/focusObserver.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/observers/recordIds.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/record/observers/frustrationObserver.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/segmentCollection/buildReplayPayload.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/replayStats.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/segmentCollection/segment.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/segmentCollection/deflateWorker.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/segmentCollection/segmentCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/segmentCollection/startDeflateWorker.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/boot/isBrowserSupported.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/domain/getSessionReplayLink.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/getSessionReplayUrl.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/entries/main.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/boot/recorderApi.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum/esm/boot/startRecording.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/boot/rumPublicApi.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/boot/startRum.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/transport/startRumEventBridge.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/transport/startRumBatch.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/browser/locationChangeObservable.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/longTask/longTaskCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/error/errorCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/error/trackConsoleError.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/rumEventsCollection/error/trackReportError.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-rum-core/esm/domain/contexts/internalContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/configuration.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/tools/utils/arrayUtils.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/logger.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-core/esm/transport/startBatchWithReplica.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/logsSessionManager.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/logsCollection/logger/loggerCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/assembly.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/logsCollection/console/consoleCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/logsCollection/report/reportCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/logsCollection/networkError/networkErrorCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/lifeCycle.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/entries/main.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/boot/logsPublicApi.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/boot/startLogs.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/logsCollection/runtimeError/runtimeErrorCollection.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/domain/internalContext.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/transport/startLogsBridge.js","webpack://care-ops-frontend/./node_modules/@datadog/browser-logs/esm/transport/startLogsBatch.js","webpack://care-ops-frontend/./src/js/datadog.js","webpack://care-ops-frontend/./src/js/utils/root-route.js","webpack://care-ops-frontend/./node_modules/core-js/internals/a-callable.js","webpack://care-ops-frontend/./node_modules/core-js/internals/a-possible-prototype.js","webpack://care-ops-frontend/./node_modules/core-js/internals/an-instance.js","webpack://care-ops-frontend/./node_modules/core-js/internals/an-object.js","webpack://care-ops-frontend/./node_modules/core-js/internals/array-includes.js","webpack://care-ops-frontend/./node_modules/core-js/internals/classof-raw.js","webpack://care-ops-frontend/./node_modules/core-js/internals/classof.js","webpack://care-ops-frontend/./node_modules/core-js/internals/copy-constructor-properties.js","webpack://care-ops-frontend/./node_modules/core-js/internals/create-non-enumerable-property.js","webpack://care-ops-frontend/./node_modules/core-js/internals/create-property-descriptor.js","webpack://care-ops-frontend/./node_modules/core-js/internals/create-property.js","webpack://care-ops-frontend/./node_modules/core-js/internals/define-built-in.js","webpack://care-ops-frontend/./node_modules/core-js/internals/define-global-property.js","webpack://care-ops-frontend/./node_modules/core-js/internals/descriptors.js","webpack://care-ops-frontend/./node_modules/core-js/internals/document-all.js","webpack://care-ops-frontend/./node_modules/core-js/internals/document-create-element.js","webpack://care-ops-frontend/./node_modules/core-js/internals/dom-exception-constants.js","webpack://care-ops-frontend/./node_modules/core-js/internals/engine-is-browser.js","webpack://care-ops-frontend/./node_modules/core-js/internals/engine-is-deno.js","webpack://care-ops-frontend/./node_modules/core-js/internals/engine-is-node.js","webpack://care-ops-frontend/./node_modules/core-js/internals/engine-user-agent.js","webpack://care-ops-frontend/./node_modules/core-js/internals/engine-v8-version.js","webpack://care-ops-frontend/./node_modules/core-js/internals/enum-bug-keys.js","webpack://care-ops-frontend/./node_modules/core-js/internals/error-stack-clear.js","webpack://care-ops-frontend/./node_modules/core-js/internals/error-stack-installable.js","webpack://care-ops-frontend/./node_modules/core-js/internals/export.js","webpack://care-ops-frontend/./node_modules/core-js/internals/fails.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-bind-context.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-bind-native.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-call.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-name.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-uncurry-this-accessor.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-uncurry-this-clause.js","webpack://care-ops-frontend/./node_modules/core-js/internals/function-uncurry-this.js","webpack://care-ops-frontend/./node_modules/core-js/internals/get-built-in.js","webpack://care-ops-frontend/./node_modules/core-js/internals/get-iterator-method.js","webpack://care-ops-frontend/./node_modules/core-js/internals/get-iterator.js","webpack://care-ops-frontend/./node_modules/core-js/internals/get-method.js","webpack://care-ops-frontend/./node_modules/core-js/internals/global.js","webpack://care-ops-frontend/./node_modules/core-js/internals/has-own-property.js","webpack://care-ops-frontend/./node_modules/core-js/internals/hidden-keys.js","webpack://care-ops-frontend/./node_modules/core-js/internals/ie8-dom-define.js","webpack://care-ops-frontend/./node_modules/core-js/internals/indexed-object.js","webpack://care-ops-frontend/./node_modules/core-js/internals/inherit-if-required.js","webpack://care-ops-frontend/./node_modules/core-js/internals/inspect-source.js","webpack://care-ops-frontend/./node_modules/core-js/internals/internal-state.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-array-iterator-method.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-callable.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-constructor.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-forced.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-null-or-undefined.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-object.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-pure.js","webpack://care-ops-frontend/./node_modules/core-js/internals/is-symbol.js","webpack://care-ops-frontend/./node_modules/core-js/internals/iterate.js","webpack://care-ops-frontend/./node_modules/core-js/internals/iterator-close.js","webpack://care-ops-frontend/./node_modules/core-js/internals/iterators.js","webpack://care-ops-frontend/./node_modules/core-js/internals/length-of-array-like.js","webpack://care-ops-frontend/./node_modules/core-js/internals/make-built-in.js","webpack://care-ops-frontend/./node_modules/core-js/internals/map-helpers.js","webpack://care-ops-frontend/./node_modules/core-js/internals/math-trunc.js","webpack://care-ops-frontend/./node_modules/core-js/internals/normalize-string-argument.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-define-property.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-get-own-property-names.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-is-prototype-of.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-keys-internal.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-property-is-enumerable.js","webpack://care-ops-frontend/./node_modules/core-js/internals/object-set-prototype-of.js","webpack://care-ops-frontend/./node_modules/core-js/internals/ordinary-to-primitive.js","webpack://care-ops-frontend/./node_modules/core-js/internals/own-keys.js","webpack://care-ops-frontend/./node_modules/core-js/internals/regexp-flags.js","webpack://care-ops-frontend/./node_modules/core-js/internals/regexp-get-flags.js","webpack://care-ops-frontend/./node_modules/core-js/internals/require-object-coercible.js","webpack://care-ops-frontend/./node_modules/core-js/internals/set-helpers.js","webpack://care-ops-frontend/./node_modules/core-js/internals/shared-key.js","webpack://care-ops-frontend/./node_modules/core-js/internals/shared-store.js","webpack://care-ops-frontend/./node_modules/core-js/internals/shared.js","webpack://care-ops-frontend/./node_modules/core-js/internals/structured-clone-proper-transfer.js","webpack://care-ops-frontend/./node_modules/core-js/internals/symbol-constructor-detection.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-absolute-index.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-indexed-object.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-integer-or-infinity.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-length.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-object.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-primitive.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-property-key.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-string-tag-support.js","webpack://care-ops-frontend/./node_modules/core-js/internals/to-string.js","webpack://care-ops-frontend/./node_modules/core-js/internals/try-to-string.js","webpack://care-ops-frontend/./node_modules/core-js/internals/uid.js","webpack://care-ops-frontend/./node_modules/core-js/internals/use-symbol-as-uid.js","webpack://care-ops-frontend/./node_modules/core-js/internals/v8-prototype-define-bug.js","webpack://care-ops-frontend/./node_modules/core-js/internals/validate-arguments-length.js","webpack://care-ops-frontend/./node_modules/core-js/internals/weak-map-basic-detection.js","webpack://care-ops-frontend/./node_modules/core-js/internals/well-known-symbol.js","webpack://care-ops-frontend/./node_modules/core-js/modules/web.dom-exception.stack.js","webpack://care-ops-frontend/./node_modules/core-js/modules/web.structured-clone.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_setup.js","webpack://care-ops-frontend/./node_modules/underscore/modules/restArguments.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isObject.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isNull.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isUndefined.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isBoolean.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isElement.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_tagTester.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isString.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isNumber.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isDate.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isRegExp.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isError.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isSymbol.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isArrayBuffer.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isFunction.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_hasObjectTag.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_stringTagBug.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isDataView.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isArray.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_has.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isArguments.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isFinite.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isNaN.js","webpack://care-ops-frontend/./node_modules/underscore/modules/constant.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_createSizePropertyCheck.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_shallowProperty.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_getByteLength.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_isBufferLike.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isTypedArray.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_getLength.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_collectNonEnumProps.js","webpack://care-ops-frontend/./node_modules/underscore/modules/keys.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isEmpty.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isMatch.js","webpack://care-ops-frontend/./node_modules/underscore/modules/underscore.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_toBufferView.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isEqual.js","webpack://care-ops-frontend/./node_modules/underscore/modules/allKeys.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_methodFingerprint.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isMap.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isWeakMap.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isSet.js","webpack://care-ops-frontend/./node_modules/underscore/modules/isWeakSet.js","webpack://care-ops-frontend/./node_modules/underscore/modules/values.js","webpack://care-ops-frontend/./node_modules/underscore/modules/pairs.js","webpack://care-ops-frontend/./node_modules/underscore/modules/invert.js","webpack://care-ops-frontend/./node_modules/underscore/modules/functions.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_createAssigner.js","webpack://care-ops-frontend/./node_modules/underscore/modules/extend.js","webpack://care-ops-frontend/./node_modules/underscore/modules/extendOwn.js","webpack://care-ops-frontend/./node_modules/underscore/modules/defaults.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_baseCreate.js","webpack://care-ops-frontend/./node_modules/underscore/modules/create.js","webpack://care-ops-frontend/./node_modules/underscore/modules/clone.js","webpack://care-ops-frontend/./node_modules/underscore/modules/tap.js","webpack://care-ops-frontend/./node_modules/underscore/modules/toPath.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_toPath.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_deepGet.js","webpack://care-ops-frontend/./node_modules/underscore/modules/get.js","webpack://care-ops-frontend/./node_modules/underscore/modules/has.js","webpack://care-ops-frontend/./node_modules/underscore/modules/identity.js","webpack://care-ops-frontend/./node_modules/underscore/modules/matcher.js","webpack://care-ops-frontend/./node_modules/underscore/modules/property.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_optimizeCb.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_baseIteratee.js","webpack://care-ops-frontend/./node_modules/underscore/modules/iteratee.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_cb.js","webpack://care-ops-frontend/./node_modules/underscore/modules/mapObject.js","webpack://care-ops-frontend/./node_modules/underscore/modules/noop.js","webpack://care-ops-frontend/./node_modules/underscore/modules/propertyOf.js","webpack://care-ops-frontend/./node_modules/underscore/modules/times.js","webpack://care-ops-frontend/./node_modules/underscore/modules/random.js","webpack://care-ops-frontend/./node_modules/underscore/modules/now.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_createEscaper.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_escapeMap.js","webpack://care-ops-frontend/./node_modules/underscore/modules/escape.js","webpack://care-ops-frontend/./node_modules/underscore/modules/unescape.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_unescapeMap.js","webpack://care-ops-frontend/./node_modules/underscore/modules/templateSettings.js","webpack://care-ops-frontend/./node_modules/underscore/modules/template.js","webpack://care-ops-frontend/./node_modules/underscore/modules/result.js","webpack://care-ops-frontend/./node_modules/underscore/modules/uniqueId.js","webpack://care-ops-frontend/./node_modules/underscore/modules/chain.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_executeBound.js","webpack://care-ops-frontend/./node_modules/underscore/modules/partial.js","webpack://care-ops-frontend/./node_modules/underscore/modules/bind.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_isArrayLike.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_flatten.js","webpack://care-ops-frontend/./node_modules/underscore/modules/bindAll.js","webpack://care-ops-frontend/./node_modules/underscore/modules/memoize.js","webpack://care-ops-frontend/./node_modules/underscore/modules/delay.js","webpack://care-ops-frontend/./node_modules/underscore/modules/defer.js","webpack://care-ops-frontend/./node_modules/underscore/modules/throttle.js","webpack://care-ops-frontend/./node_modules/underscore/modules/debounce.js","webpack://care-ops-frontend/./node_modules/underscore/modules/wrap.js","webpack://care-ops-frontend/./node_modules/underscore/modules/negate.js","webpack://care-ops-frontend/./node_modules/underscore/modules/compose.js","webpack://care-ops-frontend/./node_modules/underscore/modules/after.js","webpack://care-ops-frontend/./node_modules/underscore/modules/before.js","webpack://care-ops-frontend/./node_modules/underscore/modules/once.js","webpack://care-ops-frontend/./node_modules/underscore/modules/findKey.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_createPredicateIndexFinder.js","webpack://care-ops-frontend/./node_modules/underscore/modules/findIndex.js","webpack://care-ops-frontend/./node_modules/underscore/modules/findLastIndex.js","webpack://care-ops-frontend/./node_modules/underscore/modules/sortedIndex.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_createIndexFinder.js","webpack://care-ops-frontend/./node_modules/underscore/modules/indexOf.js","webpack://care-ops-frontend/./node_modules/underscore/modules/lastIndexOf.js","webpack://care-ops-frontend/./node_modules/underscore/modules/find.js","webpack://care-ops-frontend/./node_modules/underscore/modules/findWhere.js","webpack://care-ops-frontend/./node_modules/underscore/modules/each.js","webpack://care-ops-frontend/./node_modules/underscore/modules/map.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_createReduce.js","webpack://care-ops-frontend/./node_modules/underscore/modules/reduce.js","webpack://care-ops-frontend/./node_modules/underscore/modules/reduceRight.js","webpack://care-ops-frontend/./node_modules/underscore/modules/filter.js","webpack://care-ops-frontend/./node_modules/underscore/modules/reject.js","webpack://care-ops-frontend/./node_modules/underscore/modules/every.js","webpack://care-ops-frontend/./node_modules/underscore/modules/some.js","webpack://care-ops-frontend/./node_modules/underscore/modules/contains.js","webpack://care-ops-frontend/./node_modules/underscore/modules/invoke.js","webpack://care-ops-frontend/./node_modules/underscore/modules/pluck.js","webpack://care-ops-frontend/./node_modules/underscore/modules/where.js","webpack://care-ops-frontend/./node_modules/underscore/modules/max.js","webpack://care-ops-frontend/./node_modules/underscore/modules/min.js","webpack://care-ops-frontend/./node_modules/underscore/modules/toArray.js","webpack://care-ops-frontend/./node_modules/underscore/modules/sample.js","webpack://care-ops-frontend/./node_modules/underscore/modules/shuffle.js","webpack://care-ops-frontend/./node_modules/underscore/modules/sortBy.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_group.js","webpack://care-ops-frontend/./node_modules/underscore/modules/groupBy.js","webpack://care-ops-frontend/./node_modules/underscore/modules/indexBy.js","webpack://care-ops-frontend/./node_modules/underscore/modules/countBy.js","webpack://care-ops-frontend/./node_modules/underscore/modules/partition.js","webpack://care-ops-frontend/./node_modules/underscore/modules/size.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_keyInObj.js","webpack://care-ops-frontend/./node_modules/underscore/modules/pick.js","webpack://care-ops-frontend/./node_modules/underscore/modules/omit.js","webpack://care-ops-frontend/./node_modules/underscore/modules/initial.js","webpack://care-ops-frontend/./node_modules/underscore/modules/first.js","webpack://care-ops-frontend/./node_modules/underscore/modules/rest.js","webpack://care-ops-frontend/./node_modules/underscore/modules/last.js","webpack://care-ops-frontend/./node_modules/underscore/modules/compact.js","webpack://care-ops-frontend/./node_modules/underscore/modules/flatten.js","webpack://care-ops-frontend/./node_modules/underscore/modules/difference.js","webpack://care-ops-frontend/./node_modules/underscore/modules/without.js","webpack://care-ops-frontend/./node_modules/underscore/modules/uniq.js","webpack://care-ops-frontend/./node_modules/underscore/modules/union.js","webpack://care-ops-frontend/./node_modules/underscore/modules/intersection.js","webpack://care-ops-frontend/./node_modules/underscore/modules/unzip.js","webpack://care-ops-frontend/./node_modules/underscore/modules/zip.js","webpack://care-ops-frontend/./node_modules/underscore/modules/object.js","webpack://care-ops-frontend/./node_modules/underscore/modules/range.js","webpack://care-ops-frontend/./node_modules/underscore/modules/chunk.js","webpack://care-ops-frontend/./node_modules/underscore/modules/_chainResult.js","webpack://care-ops-frontend/./node_modules/underscore/modules/mixin.js","webpack://care-ops-frontend/./node_modules/underscore/modules/underscore-array-methods.js","webpack://care-ops-frontend/./node_modules/underscore/modules/index-default.js","webpack://care-ops-frontend/webpack/bootstrap","webpack://care-ops-frontend/webpack/runtime/chunk prefetch function","webpack://care-ops-frontend/webpack/runtime/compat get default export","webpack://care-ops-frontend/webpack/runtime/define property getters","webpack://care-ops-frontend/webpack/runtime/ensure chunk","webpack://care-ops-frontend/webpack/runtime/get javascript chunk filename","webpack://care-ops-frontend/webpack/runtime/get mini-css chunk filename","webpack://care-ops-frontend/webpack/runtime/global","webpack://care-ops-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://care-ops-frontend/webpack/runtime/make namespace object","webpack://care-ops-frontend/webpack/runtime/publicPath","webpack://care-ops-frontend/webpack/runtime/css loading","webpack://care-ops-frontend/webpack/runtime/jsonp chunk loading","webpack://care-ops-frontend/webpack/runtime/startup prefetch","webpack://care-ops-frontend/./node_modules/workbox-window/build/workbox-window.prod.es5.mjs","webpack://care-ops-frontend/./src/js/index.js"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"care-ops-frontend:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import { extend } from 'underscore';\n\nconst auth0Config = {};\nconst datadogConfig = {};\nconst appConfig = {};\nconst versions = {};\n\nfunction fetchConfig(success) {\n  fetch(`/appconfig.json?${ new URLSearchParams({ _: _NOW_ }) }`)\n    .then(response => response.json())\n    .then(config => {\n      extend(auth0Config, config.auth0);\n      extend(datadogConfig, config.datadog);\n      extend(appConfig, config.app);\n      extend(versions, config.versions);\n      success();\n    });\n}\n\nexport {\n  fetchConfig,\n  auth0Config,\n  datadogConfig,\n  appConfig,\n  versions,\n};\n","/* eslint-disable no-console, local-rules/disallow-side-effects */\n/**\n * Keep references on console methods to avoid triggering patched behaviors\n *\n * NB: in some setup, console could already be patched by another SDK.\n * In this case, some display messages can be sent by the other SDK\n * but we should be safe from infinite loop nonetheless.\n */\nexport var ConsoleApiName = {\n    log: 'log',\n    debug: 'debug',\n    info: 'info',\n    warn: 'warn',\n    error: 'error',\n};\nexport var display = function (api) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (!Object.prototype.hasOwnProperty.call(ConsoleApiName, api)) {\n        api = ConsoleApiName.log;\n    }\n    display[api].apply(display, args);\n};\ndisplay.debug = console.debug.bind(console);\ndisplay.log = console.log.bind(console);\ndisplay.info = console.info.bind(console);\ndisplay.warn = console.warn.bind(console);\ndisplay.error = console.error.bind(console);\n","import { display } from './display';\nexport function catchUserErrors(fn, errorMsg) {\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        try {\n            return fn.apply(void 0, args);\n        }\n        catch (err) {\n            display.error(errorMsg, err);\n        }\n    };\n}\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { ConsoleApiName, display } from './display';\nvar onMonitorErrorCollected;\nvar debugMode = false;\nexport function startMonitorErrorCollection(newOnMonitorErrorCollected) {\n    onMonitorErrorCollected = newOnMonitorErrorCollected;\n}\nexport function setDebugMode(newDebugMode) {\n    debugMode = newDebugMode;\n}\nexport function resetMonitor() {\n    onMonitorErrorCollected = undefined;\n    debugMode = false;\n}\nexport function monitored(_, __, descriptor) {\n    var originalMethod = descriptor.value;\n    descriptor.value = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var decorated = onMonitorErrorCollected ? monitor(originalMethod) : originalMethod;\n        return decorated.apply(this, args);\n    };\n}\nexport function monitor(fn) {\n    return function () {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return callMonitored(fn, this, arguments);\n    }; // consider output type has input type\n}\nexport function callMonitored(fn, context, args) {\n    try {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return fn.apply(context, args);\n    }\n    catch (e) {\n        displayIfDebugEnabled(ConsoleApiName.error, e);\n        if (onMonitorErrorCollected) {\n            try {\n                onMonitorErrorCollected(e);\n            }\n            catch (e) {\n                displayIfDebugEnabled(ConsoleApiName.error, e);\n            }\n        }\n    }\n}\nexport function displayIfDebugEnabled(api) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (debugMode) {\n        display.apply(void 0, __spreadArray([api, '[MONITOR]'], args, false));\n    }\n}\n","/**\n * LIMITATION:\n * For NPM setup, this feature flag singleton is shared between RUM and Logs product.\n * This means that an experimental flag set on the RUM product will be set on the Logs product.\n * So keep in mind that in certain configurations, your experimental feature flag may affect other products.\n *\n * FORMAT:\n * All feature flags should be snake_cased\n */\n// We want to use a real enum (i.e. not a const enum) here, to be able to check whether an arbitrary\n// string is an expected feature flag\n// eslint-disable-next-line no-restricted-syntax\nexport var ExperimentalFeature;\n(function (ExperimentalFeature) {\n    ExperimentalFeature[\"PAGEHIDE\"] = \"pagehide\";\n    ExperimentalFeature[\"FEATURE_FLAGS\"] = \"feature_flags\";\n    ExperimentalFeature[\"RESOURCE_PAGE_STATES\"] = \"resource_page_states\";\n    ExperimentalFeature[\"CLICKMAP\"] = \"clickmap\";\n    ExperimentalFeature[\"COLLECT_FLUSH_REASON\"] = \"collect_flush_reason\";\n    ExperimentalFeature[\"SANITIZE_INPUTS\"] = \"sanitize_inputs\";\n})(ExperimentalFeature || (ExperimentalFeature = {}));\nvar enabledExperimentalFeatures = new Set();\nexport function addExperimentalFeatures(enabledFeatures) {\n    enabledFeatures.forEach(function (flag) {\n        enabledExperimentalFeatures.add(flag);\n    });\n}\nexport function isExperimentalFeatureEnabled(featureName) {\n    return enabledExperimentalFeatures.has(featureName);\n}\nexport function resetExperimentalFeatures() {\n    enabledExperimentalFeatures.clear();\n}\nexport function getExperimentalFeatures() {\n    return enabledExperimentalFeatures;\n}\n","export function includes(candidate, search) {\n    return candidate.indexOf(search) !== -1;\n}\nexport function arrayFrom(arrayLike) {\n    if (Array.from) {\n        return Array.from(arrayLike);\n    }\n    var array = [];\n    if (arrayLike instanceof Set) {\n        arrayLike.forEach(function (item) { return array.push(item); });\n    }\n    else {\n        for (var i = 0; i < arrayLike.length; i++) {\n            array.push(arrayLike[i]);\n        }\n    }\n    return array;\n}\nexport function find(array, predicate) {\n    for (var i = 0; i < array.length; i += 1) {\n        var item = array[i];\n        if (predicate(item, i)) {\n            return item;\n        }\n    }\n    return undefined;\n}\nexport function findLast(array, predicate) {\n    for (var i = array.length - 1; i >= 0; i -= 1) {\n        var item = array[i];\n        if (predicate(item, i, array)) {\n            return item;\n        }\n    }\n    return undefined;\n}\nexport function forEach(list, callback) {\n    Array.prototype.forEach.call(list, callback);\n}\nexport function objectValues(object) {\n    return Object.keys(object).map(function (key) { return object[key]; });\n}\nexport function objectEntries(object) {\n    return Object.keys(object).map(function (key) { return [key, object[key]]; });\n}\nexport function startsWith(candidate, search) {\n    return candidate.slice(0, search.length) === search;\n}\nexport function endsWith(candidate, search) {\n    return candidate.slice(-search.length) === search;\n}\nexport function elementMatches(element, selector) {\n    if (element.matches) {\n        return element.matches(selector);\n    }\n    // IE11 support\n    if (element.msMatchesSelector) {\n        return element.msMatchesSelector(selector);\n    }\n    return false;\n}\n// https://github.com/jquery/jquery/blob/a684e6ba836f7c553968d7d026ed7941e1a612d8/src/selector/escapeSelector.js\nexport function cssEscape(str) {\n    if (window.CSS && window.CSS.escape) {\n        return window.CSS.escape(str);\n    }\n    // eslint-disable-next-line no-control-regex\n    return str.replace(/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g, function (ch, asCodePoint) {\n        if (asCodePoint) {\n            // U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n            if (ch === '\\0') {\n                return '\\uFFFD';\n            }\n            // Control characters and (dependent upon position) numbers get escaped as code points\n            return \"\".concat(ch.slice(0, -1), \"\\\\\").concat(ch.charCodeAt(ch.length - 1).toString(16), \" \");\n        }\n        // Other potentially-special ASCII characters get backslash-escaped\n        return \"\\\\\".concat(ch);\n    });\n}\nexport function assign(target) {\n    var toAssign = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        toAssign[_i - 1] = arguments[_i];\n    }\n    toAssign.forEach(function (source) {\n        for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n                target[key] = source[key];\n            }\n        }\n    });\n    return target;\n}\n","import { catchUserErrors } from '../tools/catchUserErrors';\nimport { setDebugMode } from '../tools/monitor';\nimport { assign } from '../tools/utils/polyfills';\nexport function makePublicApi(stub) {\n    var publicApi = assign({\n        version: \"4.39.0\",\n        // This API method is intentionally not monitored, since the only thing executed is the\n        // user-provided 'callback'.  All SDK usages executed in the callback should be monitored, and\n        // we don't want to interfere with the user uncaught exceptions.\n        onReady: function (callback) {\n            callback();\n        },\n    }, stub);\n    // Add a \"hidden\" property to set debug mode. We define it that way to hide it\n    // as much as possible but of course it's not a real protection.\n    Object.defineProperty(publicApi, '_setDebug', {\n        get: function () {\n            return setDebugMode;\n        },\n        enumerable: false,\n    });\n    return publicApi;\n}\nexport function defineGlobal(global, name, api) {\n    var existingGlobalVariable = global[name];\n    global[name] = api;\n    if (existingGlobalVariable && existingGlobalVariable.q) {\n        existingGlobalVariable.q.forEach(function (fn) { return catchUserErrors(fn, 'onReady callback threw an error:')(); });\n    }\n}\n","/**\n * inspired by https://mathiasbynens.be/notes/globalthis\n */\nexport function getGlobalObject() {\n    if (typeof globalThis === 'object') {\n        return globalThis;\n    }\n    Object.defineProperty(Object.prototype, '_dd_temp_', {\n        get: function () {\n            return this;\n        },\n        configurable: true,\n    });\n    // @ts-ignore _dd_temp is defined using defineProperty\n    var globalObject = _dd_temp_;\n    // @ts-ignore _dd_temp is defined using defineProperty\n    delete Object.prototype._dd_temp_;\n    if (typeof globalObject !== 'object') {\n        // on safari _dd_temp_ is available on window but not globally\n        // fallback on other browser globals check\n        if (typeof self === 'object') {\n            globalObject = self;\n        }\n        else if (typeof window === 'object') {\n            globalObject = window;\n        }\n        else {\n            globalObject = {};\n        }\n    }\n    return globalObject;\n}\n","export var ONE_KIBI_BYTE = 1024;\nexport var ONE_MEBI_BYTE = 1024 * ONE_KIBI_BYTE;\n// eslint-disable-next-line no-control-regex\nvar HAS_MULTI_BYTES_CHARACTERS = /[^\\u0000-\\u007F]/;\nexport function computeBytesCount(candidate) {\n    // Accurate bytes count computations can degrade performances when there is a lot of events to process\n    if (!HAS_MULTI_BYTES_CHARACTERS.test(candidate)) {\n        return candidate.length;\n    }\n    if (window.TextEncoder !== undefined) {\n        return new TextEncoder().encode(candidate).length;\n    }\n    return new Blob([candidate]).size;\n}\n","import { getGlobalObject } from './getGlobalObject';\n/**\n * Gets the original value for a DOM API that was potentially patched by Zone.js.\n *\n * Zone.js[1] is a library that patches a bunch of JS and DOM APIs. It usually stores the original\n * value of the patched functions/constructors/methods in a hidden property prefixed by\n * __zone_symbol__.\n *\n * In multiple occasions, we observed that Zone.js is the culprit of important issues leading to\n * browser resource exhaustion (memory leak, high CPU usage). This method is used as a workaround to\n * use the original DOM API instead of the one patched by Zone.js.\n *\n * [1]: https://github.com/angular/angular/tree/main/packages/zone.js\n */\nexport function getZoneJsOriginalValue(target, name) {\n    var browserWindow = getGlobalObject();\n    var original;\n    if (browserWindow.Zone && typeof browserWindow.Zone.__symbol__ === 'function') {\n        original = target[browserWindow.Zone.__symbol__(name)];\n    }\n    if (!original) {\n        original = target[name];\n    }\n    return original;\n}\n","import { getZoneJsOriginalValue } from './getZoneJsOriginalValue';\nimport { monitor } from './monitor';\nimport { getGlobalObject } from './getGlobalObject';\nexport function setTimeout(callback, delay) {\n    return getZoneJsOriginalValue(getGlobalObject(), 'setTimeout')(monitor(callback), delay);\n}\nexport function clearTimeout(timeoutId) {\n    getZoneJsOriginalValue(getGlobalObject(), 'clearTimeout')(timeoutId);\n}\nexport function setInterval(callback, delay) {\n    return getZoneJsOriginalValue(window, 'setInterval')(monitor(callback), delay);\n}\nexport function clearInterval(timeoutId) {\n    getZoneJsOriginalValue(window, 'clearInterval')(timeoutId);\n}\n","import { setTimeout, clearTimeout } from '../timer';\n// use lodash API\nexport function throttle(fn, wait, options) {\n    var needLeadingExecution = options && options.leading !== undefined ? options.leading : true;\n    var needTrailingExecution = options && options.trailing !== undefined ? options.trailing : true;\n    var inWaitPeriod = false;\n    var pendingExecutionWithParameters;\n    var pendingTimeoutId;\n    return {\n        throttled: function () {\n            var parameters = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                parameters[_i] = arguments[_i];\n            }\n            if (inWaitPeriod) {\n                pendingExecutionWithParameters = parameters;\n                return;\n            }\n            if (needLeadingExecution) {\n                fn.apply(void 0, parameters);\n            }\n            else {\n                pendingExecutionWithParameters = parameters;\n            }\n            inWaitPeriod = true;\n            pendingTimeoutId = setTimeout(function () {\n                if (needTrailingExecution && pendingExecutionWithParameters) {\n                    fn.apply(void 0, pendingExecutionWithParameters);\n                }\n                inWaitPeriod = false;\n                pendingExecutionWithParameters = undefined;\n            }, wait);\n        },\n        cancel: function () {\n            clearTimeout(pendingTimeoutId);\n            inWaitPeriod = false;\n            pendingExecutionWithParameters = undefined;\n        },\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nexport function noop() { }\n","/**\n * Similar to `typeof`, but distinguish plain objects from `null` and arrays\n */\nexport function getType(value) {\n    if (value === null) {\n        return 'null';\n    }\n    if (Array.isArray(value)) {\n        return 'array';\n    }\n    return typeof value;\n}\n","import { getType } from './utils/typeUtils';\n/**\n * Iterate over source and affect its sub values into destination, recursively.\n * If the source and destination can't be merged, return source.\n */\nexport function mergeInto(destination, source, circularReferenceChecker) {\n    if (circularReferenceChecker === void 0) { circularReferenceChecker = createCircularReferenceChecker(); }\n    // ignore the source if it is undefined\n    if (source === undefined) {\n        return destination;\n    }\n    if (typeof source !== 'object' || source === null) {\n        // primitive values - just return source\n        return source;\n    }\n    else if (source instanceof Date) {\n        return new Date(source.getTime());\n    }\n    else if (source instanceof RegExp) {\n        var flags = source.flags ||\n            // old browsers compatibility\n            [\n                source.global ? 'g' : '',\n                source.ignoreCase ? 'i' : '',\n                source.multiline ? 'm' : '',\n                source.sticky ? 'y' : '',\n                source.unicode ? 'u' : '',\n            ].join('');\n        return new RegExp(source.source, flags);\n    }\n    if (circularReferenceChecker.hasAlreadyBeenSeen(source)) {\n        // remove circular references\n        return undefined;\n    }\n    else if (Array.isArray(source)) {\n        var merged_1 = Array.isArray(destination) ? destination : [];\n        for (var i = 0; i < source.length; ++i) {\n            merged_1[i] = mergeInto(merged_1[i], source[i], circularReferenceChecker);\n        }\n        return merged_1;\n    }\n    var merged = getType(destination) === 'object' ? destination : {};\n    for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n            merged[key] = mergeInto(merged[key], source[key], circularReferenceChecker);\n        }\n    }\n    return merged;\n}\n/**\n * A simplistic implementation of a deep clone algorithm.\n * Caveats:\n * - It doesn't maintain prototype chains - don't use with instances of custom classes.\n * - It doesn't handle Map and Set\n */\nexport function deepClone(value) {\n    return mergeInto(undefined, value);\n}\nexport function combine() {\n    var sources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sources[_i] = arguments[_i];\n    }\n    var destination;\n    for (var _a = 0, sources_1 = sources; _a < sources_1.length; _a++) {\n        var source = sources_1[_a];\n        // Ignore any undefined or null sources.\n        if (source === undefined || source === null) {\n            continue;\n        }\n        destination = mergeInto(destination, source);\n    }\n    return destination;\n}\nfunction createCircularReferenceChecker() {\n    if (typeof WeakSet !== 'undefined') {\n        var set_1 = new WeakSet();\n        return {\n            hasAlreadyBeenSeen: function (value) {\n                var has = set_1.has(value);\n                if (!has) {\n                    set_1.add(value);\n                }\n                return has;\n            },\n        };\n    }\n    var array = [];\n    return {\n        hasAlreadyBeenSeen: function (value) {\n            var has = array.indexOf(value) >= 0;\n            if (!has) {\n                array.push(value);\n            }\n            return has;\n        },\n    };\n}\n","import { noop } from '../utils/functionUtils';\n/**\n * Custom implementation of JSON.stringify that ignores some toJSON methods. We need to do that\n * because some sites badly override toJSON on certain objects. Removing all toJSON methods from\n * nested values would be too costly, so we just detach them from the root value, and native classes\n * used to build JSON values (Array and Object).\n *\n * Note: this still assumes that JSON.stringify is correct.\n */\nexport function jsonStringify(value, replacer, space) {\n    if (typeof value !== 'object' || value === null) {\n        return JSON.stringify(value);\n    }\n    // Note: The order matter here. We need to detach toJSON methods on parent classes before their\n    // subclasses.\n    var restoreObjectPrototypeToJson = detachToJsonMethod(Object.prototype);\n    var restoreArrayPrototypeToJson = detachToJsonMethod(Array.prototype);\n    var restoreValuePrototypeToJson = detachToJsonMethod(Object.getPrototypeOf(value));\n    var restoreValueToJson = detachToJsonMethod(value);\n    try {\n        return JSON.stringify(value, replacer, space);\n    }\n    catch (_a) {\n        return '<error: unable to serialize object>';\n    }\n    finally {\n        restoreObjectPrototypeToJson();\n        restoreArrayPrototypeToJson();\n        restoreValuePrototypeToJson();\n        restoreValueToJson();\n    }\n}\nexport function detachToJsonMethod(value) {\n    var object = value;\n    var objectToJson = object.toJSON;\n    if (objectToJson) {\n        delete object.toJSON;\n        return function () {\n            object.toJSON = objectToJson;\n        };\n    }\n    return noop;\n}\n","import { display } from '../display';\nimport { ONE_KIBI_BYTE } from '../utils/byteUtils';\nimport { detachToJsonMethod } from './jsonStringify';\n// The maximum size of a single event is 256KiB. By default, we ensure that user-provided data\n// going through sanitize fits inside our events, while leaving room for other contexts, metadata, ...\nvar SANITIZE_DEFAULT_MAX_CHARACTER_COUNT = 220 * ONE_KIBI_BYTE;\n// Symbol for the root element of the JSONPath used for visited objects\nvar JSON_PATH_ROOT_ELEMENT = '$';\n// When serializing (using JSON.stringify) a key of an object, { key: 42 } gets wrapped in quotes as \"key\".\n// With the separator (:), we need to add 3 characters to the count.\nvar KEY_DECORATION_LENGTH = 3;\nexport function sanitize(source, maxCharacterCount) {\n    var _a;\n    if (maxCharacterCount === void 0) { maxCharacterCount = SANITIZE_DEFAULT_MAX_CHARACTER_COUNT; }\n    // Unbind any toJSON function we may have on [] or {} prototypes\n    var restoreObjectPrototypeToJson = detachToJsonMethod(Object.prototype);\n    var restoreArrayPrototypeToJson = detachToJsonMethod(Array.prototype);\n    // Initial call to sanitizeProcessor - will populate containerQueue if source is an Array or a plain Object\n    var containerQueue = [];\n    var visitedObjectsWithPath = new WeakMap();\n    var sanitizedData = sanitizeProcessor(source, JSON_PATH_ROOT_ELEMENT, undefined, containerQueue, visitedObjectsWithPath);\n    var accumulatedCharacterCount = ((_a = JSON.stringify(sanitizedData)) === null || _a === void 0 ? void 0 : _a.length) || 0;\n    if (accumulatedCharacterCount > maxCharacterCount) {\n        warnOverCharacterLimit(maxCharacterCount, 'discarded', source);\n        return undefined;\n    }\n    while (containerQueue.length > 0 && accumulatedCharacterCount < maxCharacterCount) {\n        var containerToProcess = containerQueue.shift();\n        var separatorLength = 0; // 0 for the first element, 1 for subsequent elements\n        // Arrays and Objects have to be handled distinctly to ensure\n        // we do not pick up non-numerical properties from Arrays\n        if (Array.isArray(containerToProcess.source)) {\n            for (var key = 0; key < containerToProcess.source.length; key++) {\n                var targetData = sanitizeProcessor(containerToProcess.source[key], containerToProcess.path, key, containerQueue, visitedObjectsWithPath);\n                if (targetData !== undefined) {\n                    accumulatedCharacterCount += JSON.stringify(targetData).length;\n                }\n                else {\n                    // When an element of an Array (targetData) is undefined, it is serialized as null:\n                    // JSON.stringify([undefined]) => '[null]' - This accounts for 4 characters\n                    accumulatedCharacterCount += 4;\n                }\n                accumulatedCharacterCount += separatorLength;\n                separatorLength = 1;\n                if (accumulatedCharacterCount > maxCharacterCount) {\n                    warnOverCharacterLimit(maxCharacterCount, 'truncated', source);\n                    break;\n                }\n                ;\n                containerToProcess.target[key] = targetData;\n            }\n        }\n        else {\n            for (var key in containerToProcess.source) {\n                if (Object.prototype.hasOwnProperty.call(containerToProcess.source, key)) {\n                    var targetData = sanitizeProcessor(containerToProcess.source[key], containerToProcess.path, key, containerQueue, visitedObjectsWithPath);\n                    // When a property of an object has an undefined value, it will be dropped during serialization:\n                    // JSON.stringify({a:undefined}) => '{}'\n                    if (targetData !== undefined) {\n                        accumulatedCharacterCount +=\n                            JSON.stringify(targetData).length + separatorLength + key.length + KEY_DECORATION_LENGTH;\n                        separatorLength = 1;\n                    }\n                    if (accumulatedCharacterCount > maxCharacterCount) {\n                        warnOverCharacterLimit(maxCharacterCount, 'truncated', source);\n                        break;\n                    }\n                    ;\n                    containerToProcess.target[key] = targetData;\n                }\n            }\n        }\n    }\n    // Rebind detached toJSON functions\n    restoreObjectPrototypeToJson();\n    restoreArrayPrototypeToJson();\n    return sanitizedData;\n}\n/**\n * Internal function to factorize the process common to the\n * initial call to sanitize, and iterations for Arrays and Objects\n *\n */\nfunction sanitizeProcessor(source, parentPath, key, queue, visitedObjectsWithPath) {\n    // Start by handling toJSON, as we want to sanitize its output\n    var sourceToSanitize = tryToApplyToJSON(source);\n    if (!sourceToSanitize || typeof sourceToSanitize !== 'object') {\n        return sanitizePrimitivesAndFunctions(sourceToSanitize);\n    }\n    var sanitizedSource = sanitizeObjects(sourceToSanitize);\n    if (sanitizedSource !== '[Object]' && sanitizedSource !== '[Array]') {\n        return sanitizedSource;\n    }\n    // Handle potential cyclic references\n    // We need to use source as sourceToSanitize could be a reference to a new object\n    // At this stage, we know the source is an object type\n    var sourceAsObject = source;\n    if (visitedObjectsWithPath.has(sourceAsObject)) {\n        return \"[Reference seen at \".concat(visitedObjectsWithPath.get(sourceAsObject), \"]\");\n    }\n    // Add processed source to queue\n    var currentPath = key !== undefined ? \"\".concat(parentPath, \".\").concat(key) : parentPath;\n    var target = Array.isArray(sourceToSanitize) ? [] : {};\n    visitedObjectsWithPath.set(sourceAsObject, currentPath);\n    queue.push({ source: sourceToSanitize, target: target, path: currentPath });\n    return target;\n}\n/**\n * Handles sanitization of simple, non-object types\n *\n */\nfunction sanitizePrimitivesAndFunctions(value) {\n    // BigInt cannot be serialized by JSON.stringify(), convert it to a string representation\n    if (typeof value === 'bigint') {\n        return \"[BigInt] \".concat(value.toString());\n    }\n    // Functions cannot be serialized by JSON.stringify(). Moreover, if a faulty toJSON is present, it needs to be converted\n    // so it won't prevent stringify from serializing later\n    if (typeof value === 'function') {\n        return \"[Function] \".concat(value.name || 'unknown');\n    }\n    // JSON.stringify() does not serialize symbols.\n    if (typeof value === 'symbol') {\n        return \"[Symbol] \".concat(value.description || value.toString());\n    }\n    return value;\n}\n/**\n * Handles sanitization of object types\n *\n * LIMITATIONS\n * - If a class defines a toStringTag Symbol, it will fall in the catch-all method and prevent enumeration of properties.\n * To avoid this, a toJSON method can be defined.\n * - IE11 does not return a distinct type for objects such as Map, WeakMap, ... These objects will pass through and their\n * properties enumerated if any.\n *\n */\nfunction sanitizeObjects(value) {\n    try {\n        // Handle events - Keep a simple implementation to avoid breaking changes\n        if (value instanceof Event) {\n            return {\n                isTrusted: value.isTrusted,\n            };\n        }\n        // Handle all remaining object types in a generic way\n        var result = Object.prototype.toString.call(value);\n        var match = result.match(/\\[object (.*)\\]/);\n        if (match && match[1]) {\n            return \"[\".concat(match[1], \"]\");\n        }\n    }\n    catch (_a) {\n        // If the previous serialization attempts failed, and we cannot convert using\n        // Object.prototype.toString, declare the value unserializable\n    }\n    return '[Unserializable]';\n}\n/**\n * Checks if a toJSON function exists and tries to execute it\n *\n */\nfunction tryToApplyToJSON(value) {\n    var object = value;\n    if (object && typeof object.toJSON === 'function') {\n        try {\n            return object.toJSON();\n        }\n        catch (_a) {\n            // If toJSON fails, we continue by trying to serialize the value manually\n        }\n    }\n    return value;\n}\n/**\n * Helper function to display the warning when the accumulated character count is over the limit\n */\nfunction warnOverCharacterLimit(maxCharacterCount, changeType, source) {\n    display.warn(\"The data provided has been \".concat(changeType, \" as it is over the limit of \").concat(maxCharacterCount, \" characters:\"), source);\n}\n","import { ONE_KIBI_BYTE } from '../utils/byteUtils';\nimport { display } from '../display';\n// RUM and logs batch bytes limit is 16KB\n// ensure that we leave room for other event attributes and maintain a decent amount of event per batch\n// (3KB (customer data) + 1KB (other attributes)) * 4 (events per batch) = 16KB\nexport var CUSTOMER_DATA_BYTES_LIMIT = 3 * ONE_KIBI_BYTE;\nexport function warnIfCustomerDataLimitReached(bytesCount, customerDataType) {\n    if (bytesCount > CUSTOMER_DATA_BYTES_LIMIT) {\n        display.warn(\"The \".concat(customerDataType, \" data is over \").concat(CUSTOMER_DATA_BYTES_LIMIT / ONE_KIBI_BYTE, \"KiB. On low connectivity, the SDK has the potential to exhaust the user's upload bandwidth.\"));\n        return true;\n    }\n    return false;\n}\n","import { ExperimentalFeature, isExperimentalFeatureEnabled } from '../experimentalFeatures';\nimport { computeBytesCount } from '../utils/byteUtils';\nimport { throttle } from '../utils/functionUtils';\nimport { deepClone } from '../mergeInto';\nimport { jsonStringify } from './jsonStringify';\nimport { sanitize } from './sanitize';\nimport { warnIfCustomerDataLimitReached } from './heavyCustomerDataWarning';\nexport var BYTES_COMPUTATION_THROTTLING_DELAY = 200;\nexport function createContextManager(customerDataType, computeBytesCountImpl) {\n    if (computeBytesCountImpl === void 0) { computeBytesCountImpl = computeBytesCount; }\n    var context = {};\n    var bytesCountCache;\n    var alreadyWarned = false;\n    // Throttle the bytes computation to minimize the impact on performance.\n    // Especially useful if the user call context APIs synchronously multiple times in a row\n    var computeBytesCountThrottled = throttle(function (context) {\n        bytesCountCache = computeBytesCountImpl(jsonStringify(context));\n        if (!alreadyWarned) {\n            alreadyWarned = warnIfCustomerDataLimitReached(bytesCountCache, customerDataType);\n        }\n    }, BYTES_COMPUTATION_THROTTLING_DELAY).throttled;\n    return {\n        getBytesCount: function () { return bytesCountCache; },\n        /** @deprecated use getContext instead */\n        get: function () { return context; },\n        /** @deprecated use setContextProperty instead */\n        add: function (key, value) {\n            context[key] = value;\n            computeBytesCountThrottled(context);\n        },\n        /** @deprecated renamed to removeContextProperty */\n        remove: function (key) {\n            delete context[key];\n            computeBytesCountThrottled(context);\n        },\n        /** @deprecated use setContext instead */\n        set: function (newContext) {\n            context = newContext;\n            computeBytesCountThrottled(context);\n        },\n        getContext: function () { return deepClone(context); },\n        setContext: function (newContext) {\n            context = isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS)\n                ? sanitize(newContext)\n                : deepClone(newContext);\n            computeBytesCountThrottled(context);\n        },\n        setContextProperty: function (key, property) {\n            context[key] = isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS)\n                ? sanitize(property)\n                : deepClone(property);\n            computeBytesCountThrottled(context);\n        },\n        removeContextProperty: function (key) {\n            delete context[key];\n            computeBytesCountThrottled(context);\n        },\n        clearContext: function () {\n            context = {};\n            bytesCountCache = 0;\n        },\n    };\n}\n","var BUFFER_LIMIT = 500;\nvar BoundedBuffer = /** @class */ (function () {\n    function BoundedBuffer() {\n        this.buffer = [];\n    }\n    BoundedBuffer.prototype.add = function (callback) {\n        var length = this.buffer.push(callback);\n        if (length > BUFFER_LIMIT) {\n            this.buffer.splice(0, 1);\n        }\n    };\n    BoundedBuffer.prototype.drain = function () {\n        this.buffer.forEach(function (callback) { return callback(); });\n        this.buffer.length = 0;\n    };\n    return BoundedBuffer;\n}());\nexport { BoundedBuffer };\n","/**\n * Return true if the draw is successful\n * @param threshold between 0 and 100\n */\nexport function performDraw(threshold) {\n    return threshold !== 0 && Math.random() * 100 <= threshold;\n}\nexport function round(num, decimals) {\n    return +num.toFixed(decimals);\n}\nexport function isPercentage(value) {\n    return isNumber(value) && value >= 0 && value <= 100;\n}\nexport function isNumber(value) {\n    return typeof value === 'number';\n}\n","import { isNumber, round } from './numberUtils';\nexport var ONE_SECOND = 1000;\nexport var ONE_MINUTE = 60 * ONE_SECOND;\nexport var ONE_HOUR = 60 * ONE_MINUTE;\nexport var ONE_DAY = 24 * ONE_HOUR;\nexport var ONE_YEAR = 365 * ONE_DAY;\nexport function relativeToClocks(relative) {\n    return { relative: relative, timeStamp: getCorrectedTimeStamp(relative) };\n}\nfunction getCorrectedTimeStamp(relativeTime) {\n    var correctedOrigin = (dateNow() - performance.now());\n    // apply correction only for positive drift\n    if (correctedOrigin > getNavigationStart()) {\n        return Math.round(addDuration(correctedOrigin, relativeTime));\n    }\n    return getTimeStamp(relativeTime);\n}\nexport function currentDrift() {\n    return Math.round(dateNow() - addDuration(getNavigationStart(), performance.now()));\n}\nexport function toServerDuration(duration) {\n    if (!isNumber(duration)) {\n        return duration;\n    }\n    return round(duration * 1e6, 0);\n}\nexport function dateNow() {\n    // Do not use `Date.now` because sometimes websites are wrongly \"polyfilling\" it. For example, we\n    // had some users using a very old version of `datejs`, which patched `Date.now` to return a Date\n    // instance instead of a timestamp[1]. Those users are unlikely to fix this, so let's handle this\n    // case ourselves.\n    // [1]: https://github.com/datejs/Datejs/blob/97f5c7c58c5bc5accdab8aa7602b6ac56462d778/src/core-debug.js#L14-L16\n    return new Date().getTime();\n}\nexport function timeStampNow() {\n    return dateNow();\n}\nexport function relativeNow() {\n    return performance.now();\n}\nexport function clocksNow() {\n    return { relative: relativeNow(), timeStamp: timeStampNow() };\n}\nexport function clocksOrigin() {\n    return { relative: 0, timeStamp: getNavigationStart() };\n}\nexport function elapsed(start, end) {\n    return (end - start);\n}\nexport function addDuration(a, b) {\n    return a + b;\n}\n/**\n * Get the time since the navigation was started.\n *\n * Note: this does not use `performance.timeOrigin` because it doesn't seem to reflect the actual\n * time on which the navigation has started: it may be much farther in the past, at least in Firefox 71.\n * Related issue in Firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=1429926\n */\nexport function getRelativeTime(timestamp) {\n    return (timestamp - getNavigationStart());\n}\nexport function getTimeStamp(relativeTime) {\n    return Math.round(addDuration(getNavigationStart(), relativeTime));\n}\nexport function looksLikeRelativeTime(time) {\n    return time < ONE_YEAR;\n}\n/**\n * Navigation start slightly change on some rare cases\n */\nvar navigationStart;\nfunction getNavigationStart() {\n    if (navigationStart === undefined) {\n        navigationStart = performance.timing.navigationStart;\n    }\n    return navigationStart;\n}\nexport function resetNavigationStart() {\n    navigationStart = undefined;\n}\n","/**\n * UUID v4\n * from https://gist.github.com/jed/982883\n */\nexport function generateUUID(placeholder) {\n    return placeholder\n        ? // eslint-disable-next-line  no-bitwise\n            (parseInt(placeholder, 10) ^ ((Math.random() * 16) >> (parseInt(placeholder, 10) / 4))).toString(16)\n        : \"\".concat(1e7, \"-\").concat(1e3, \"-\").concat(4e3, \"-\").concat(8e3, \"-\").concat(1e11).replace(/[018]/g, generateUUID);\n}\nexport function findCommaSeparatedValue(rawString, name) {\n    var regex = new RegExp(\"(?:^|;)\\\\s*\".concat(name, \"\\\\s*=\\\\s*([^;]+)\"));\n    var matches = regex.exec(rawString);\n    return matches ? matches[1] : undefined;\n}\nexport function safeTruncate(candidate, length, suffix) {\n    if (suffix === void 0) { suffix = ''; }\n    var lastChar = candidate.charCodeAt(length - 1);\n    var isLastCharSurrogatePair = lastChar >= 0xd800 && lastChar <= 0xdbff;\n    var correctedLength = isLastCharSurrogatePair ? length + 1 : length;\n    if (candidate.length <= correctedLength) {\n        return candidate;\n    }\n    return \"\".concat(candidate.slice(0, correctedLength)).concat(suffix);\n}\n","import { display } from '../tools/display';\nimport { ONE_MINUTE, ONE_SECOND } from '../tools/utils/timeUtils';\nimport { findCommaSeparatedValue, generateUUID } from '../tools/utils/stringUtils';\nexport var COOKIE_ACCESS_DELAY = ONE_SECOND;\nexport function setCookie(name, value, expireDelay, options) {\n    var date = new Date();\n    date.setTime(date.getTime() + expireDelay);\n    var expires = \"expires=\".concat(date.toUTCString());\n    var sameSite = options && options.crossSite ? 'none' : 'strict';\n    var domain = options && options.domain ? \";domain=\".concat(options.domain) : '';\n    var secure = options && options.secure ? ';secure' : '';\n    document.cookie = \"\".concat(name, \"=\").concat(value, \";\").concat(expires, \";path=/;samesite=\").concat(sameSite).concat(domain).concat(secure);\n}\nexport function getCookie(name) {\n    return findCommaSeparatedValue(document.cookie, name);\n}\nexport function deleteCookie(name, options) {\n    setCookie(name, '', 0, options);\n}\nexport function areCookiesAuthorized(options) {\n    if (document.cookie === undefined || document.cookie === null) {\n        return false;\n    }\n    try {\n        // Use a unique cookie name to avoid issues when the SDK is initialized multiple times during\n        // the test cookie lifetime\n        var testCookieName = \"dd_cookie_test_\".concat(generateUUID());\n        var testCookieValue = 'test';\n        setCookie(testCookieName, testCookieValue, ONE_MINUTE, options);\n        var isCookieCorrectlySet = getCookie(testCookieName) === testCookieValue;\n        deleteCookie(testCookieName, options);\n        return isCookieCorrectlySet;\n    }\n    catch (error) {\n        display.error(error);\n        return false;\n    }\n}\n/**\n * No API to retrieve it, number of levels for subdomain and suffix are unknown\n * strategy: find the minimal domain on which cookies are allowed to be set\n * https://web.dev/same-site-same-origin/#site\n */\nvar getCurrentSiteCache;\nexport function getCurrentSite() {\n    if (getCurrentSiteCache === undefined) {\n        // Use a unique cookie name to avoid issues when the SDK is initialized multiple times during\n        // the test cookie lifetime\n        var testCookieName = \"dd_site_test_\".concat(generateUUID());\n        var testCookieValue = 'test';\n        var domainLevels = window.location.hostname.split('.');\n        var candidateDomain = domainLevels.pop();\n        while (domainLevels.length && !getCookie(testCookieName)) {\n            candidateDomain = \"\".concat(domainLevels.pop(), \".\").concat(candidateDomain);\n            setCookie(testCookieName, testCookieValue, ONE_SECOND, { domain: candidateDomain });\n        }\n        deleteCookie(testCookieName, { domain: candidateDomain });\n        getCurrentSiteCache = candidateDomain;\n    }\n    return getCurrentSiteCache;\n}\n","import { getCookie } from '../../browser/cookie';\nexport var SYNTHETICS_TEST_ID_COOKIE_NAME = 'datadog-synthetics-public-id';\nexport var SYNTHETICS_RESULT_ID_COOKIE_NAME = 'datadog-synthetics-result-id';\nexport var SYNTHETICS_INJECTS_RUM_COOKIE_NAME = 'datadog-synthetics-injects-rum';\nexport function willSyntheticsInjectRum() {\n    return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM || getCookie(SYNTHETICS_INJECTS_RUM_COOKIE_NAME));\n}\nexport function getSyntheticsTestId() {\n    var value = window._DATADOG_SYNTHETICS_PUBLIC_ID || getCookie(SYNTHETICS_TEST_ID_COOKIE_NAME);\n    return typeof value === 'string' ? value : undefined;\n}\nexport function getSyntheticsResultId() {\n    var value = window._DATADOG_SYNTHETICS_RESULT_ID || getCookie(SYNTHETICS_RESULT_ID_COOKIE_NAME);\n    return typeof value === 'string' ? value : undefined;\n}\n","import { endsWith } from '../tools/utils/polyfills';\nimport { getGlobalObject } from '../tools/getGlobalObject';\nexport function getEventBridge() {\n    var eventBridgeGlobal = getEventBridgeGlobal();\n    if (!eventBridgeGlobal) {\n        return;\n    }\n    return {\n        getAllowedWebViewHosts: function () {\n            return JSON.parse(eventBridgeGlobal.getAllowedWebViewHosts());\n        },\n        send: function (eventType, event) {\n            eventBridgeGlobal.send(JSON.stringify({ eventType: eventType, event: event }));\n        },\n    };\n}\nexport function canUseEventBridge(currentHost) {\n    var _a;\n    if (currentHost === void 0) { currentHost = (_a = getGlobalObject().location) === null || _a === void 0 ? void 0 : _a.hostname; }\n    var bridge = getEventBridge();\n    return (!!bridge &&\n        bridge\n            .getAllowedWebViewHosts()\n            .some(function (allowedHost) { return currentHost === allowedHost || endsWith(currentHost, \".\".concat(allowedHost)); }));\n}\nfunction getEventBridgeGlobal() {\n    return getGlobalObject().DatadogEventBridge;\n}\n","import { startsWith } from '../../tools/utils/polyfills';\nvar UNKNOWN_FUNCTION = '?';\n/**\n * Computes a stack trace for an exception.\n */\nexport function computeStackTrace(ex) {\n    var stack = [];\n    var stackProperty = tryToGetString(ex, 'stack');\n    var exString = String(ex);\n    if (stackProperty && startsWith(stackProperty, exString)) {\n        stackProperty = stackProperty.slice(exString.length);\n    }\n    if (stackProperty) {\n        stackProperty.split('\\n').forEach(function (line) {\n            var stackFrame = parseChromeLine(line) || parseChromeAnonymousLine(line) || parseWinLine(line) || parseGeckoLine(line);\n            if (stackFrame) {\n                if (!stackFrame.func && stackFrame.line) {\n                    stackFrame.func = UNKNOWN_FUNCTION;\n                }\n                stack.push(stackFrame);\n            }\n        });\n    }\n    return {\n        message: tryToGetString(ex, 'message'),\n        name: tryToGetString(ex, 'name'),\n        stack: stack,\n    };\n}\nvar fileUrl = '((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\\\w+\\\\.|\\\\/).*?)';\nvar filePosition = '(?::(\\\\d+))';\nvar CHROME_LINE_RE = new RegExp(\"^\\\\s*at (.*?) ?\\\\(\".concat(fileUrl).concat(filePosition, \"?\").concat(filePosition, \"?\\\\)?\\\\s*$\"), 'i');\nvar CHROME_EVAL_RE = new RegExp(\"\\\\((\\\\S*)\".concat(filePosition).concat(filePosition, \"\\\\)\"));\nfunction parseChromeLine(line) {\n    var parts = CHROME_LINE_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    var isNative = parts[2] && parts[2].indexOf('native') === 0; // start of line\n    var isEval = parts[2] && parts[2].indexOf('eval') === 0; // start of line\n    var submatch = CHROME_EVAL_RE.exec(parts[2]);\n    if (isEval && submatch) {\n        // throw out eval line/column and use top-most line/column number\n        parts[2] = submatch[1]; // url\n        parts[3] = submatch[2]; // line\n        parts[4] = submatch[3]; // column\n    }\n    return {\n        args: isNative ? [parts[2]] : [],\n        column: parts[4] ? +parts[4] : undefined,\n        func: parts[1] || UNKNOWN_FUNCTION,\n        line: parts[3] ? +parts[3] : undefined,\n        url: !isNative ? parts[2] : undefined,\n    };\n}\nvar CHROME_ANONYMOUS_FUNCTION_RE = new RegExp(\"^\\\\s*at ?\".concat(fileUrl).concat(filePosition, \"?\").concat(filePosition, \"??\\\\s*$\"), 'i');\nfunction parseChromeAnonymousLine(line) {\n    var parts = CHROME_ANONYMOUS_FUNCTION_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    return {\n        args: [],\n        column: parts[3] ? +parts[3] : undefined,\n        func: UNKNOWN_FUNCTION,\n        line: parts[2] ? +parts[2] : undefined,\n        url: parts[1],\n    };\n}\nvar WINJS_LINE_RE = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\nfunction parseWinLine(line) {\n    var parts = WINJS_LINE_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    return {\n        args: [],\n        column: parts[4] ? +parts[4] : undefined,\n        func: parts[1] || UNKNOWN_FUNCTION,\n        line: +parts[3],\n        url: parts[2],\n    };\n}\nvar GECKO_LINE_RE = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\\[native).*?|[^@]*bundle)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nvar GECKO_EVAL_RE = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\nfunction parseGeckoLine(line) {\n    var parts = GECKO_LINE_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    var isEval = parts[3] && parts[3].indexOf(' > eval') > -1;\n    var submatch = GECKO_EVAL_RE.exec(parts[3]);\n    if (isEval && submatch) {\n        // throw out eval line/column and use top-most line number\n        parts[3] = submatch[1];\n        parts[4] = submatch[2];\n        parts[5] = undefined; // no column when eval\n    }\n    return {\n        args: parts[2] ? parts[2].split(',') : [],\n        column: parts[5] ? +parts[5] : undefined,\n        func: parts[1] || UNKNOWN_FUNCTION,\n        line: parts[4] ? +parts[4] : undefined,\n        url: parts[3],\n    };\n}\nfunction tryToGetString(candidate, property) {\n    if (typeof candidate !== 'object' || !candidate || !(property in candidate)) {\n        return undefined;\n    }\n    var value = candidate[property];\n    return typeof value === 'string' ? value : undefined;\n}\n","import { computeStackTrace } from '../tracekit';\nimport { ExperimentalFeature, isExperimentalFeatureEnabled } from '../../tools/experimentalFeatures';\nimport { callMonitored } from '../../tools/monitor';\nimport { sanitize } from '../../tools/serialisation/sanitize';\nimport { noop } from '../../tools/utils/functionUtils';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nexport var NO_ERROR_STACK_PRESENT_MESSAGE = 'No stack, consider using an instance of Error';\nexport var PROVIDED_ERROR_MESSAGE_PREFIX = 'Provided';\nexport var ErrorSource = {\n    AGENT: 'agent',\n    CONSOLE: 'console',\n    CUSTOM: 'custom',\n    LOGGER: 'logger',\n    NETWORK: 'network',\n    SOURCE: 'source',\n    REPORT: 'report',\n};\nexport function computeRawError(_a) {\n    var stackTrace = _a.stackTrace, originalError = _a.originalError, handlingStack = _a.handlingStack, startClocks = _a.startClocks, nonErrorPrefix = _a.nonErrorPrefix, source = _a.source, handling = _a.handling;\n    if (!stackTrace || (stackTrace.message === undefined && !(originalError instanceof Error))) {\n        var sanitizedError = isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS)\n            ? sanitize(originalError)\n            : originalError;\n        return {\n            startClocks: startClocks,\n            source: source,\n            handling: handling,\n            originalError: sanitizedError,\n            message: \"\".concat(nonErrorPrefix, \" \").concat(jsonStringify(sanitizedError)),\n            stack: 'No stack, consider using an instance of Error',\n            handlingStack: handlingStack,\n            type: stackTrace && stackTrace.name,\n        };\n    }\n    return {\n        startClocks: startClocks,\n        source: source,\n        handling: handling,\n        originalError: originalError,\n        message: stackTrace.message || 'Empty message',\n        stack: toStackTraceString(stackTrace),\n        handlingStack: handlingStack,\n        type: stackTrace.name,\n        causes: flattenErrorCauses(originalError, source),\n    };\n}\nexport function toStackTraceString(stack) {\n    var result = formatErrorMessage(stack);\n    stack.stack.forEach(function (frame) {\n        var func = frame.func === '?' ? '<anonymous>' : frame.func;\n        var args = frame.args && frame.args.length > 0 ? \"(\".concat(frame.args.join(', '), \")\") : '';\n        var line = frame.line ? \":\".concat(frame.line) : '';\n        var column = frame.line && frame.column ? \":\".concat(frame.column) : '';\n        result += \"\\n  at \".concat(func).concat(args, \" @ \").concat(frame.url).concat(line).concat(column);\n    });\n    return result;\n}\nexport function getFileFromStackTraceString(stack) {\n    var _a;\n    return (_a = /@ (.+)/.exec(stack)) === null || _a === void 0 ? void 0 : _a[1];\n}\nexport function formatErrorMessage(stack) {\n    return \"\".concat(stack.name || 'Error', \": \").concat(stack.message);\n}\n/**\n Creates a stacktrace without SDK internal frames.\n \n Constraints:\n - Has to be called at the utmost position of the call stack.\n - No monitored function should encapsulate it, that is why we need to use callMonitored inside it.\n */\nexport function createHandlingStack() {\n    /**\n     * Skip the two internal frames:\n     * - SDK API (console.error, ...)\n     * - this function\n     * in order to keep only the user calls\n     */\n    var internalFramesToSkip = 2;\n    var error = new Error();\n    var formattedStack;\n    // IE needs to throw the error to fill in the stack trace\n    if (!error.stack) {\n        try {\n            throw error;\n        }\n        catch (e) {\n            noop();\n        }\n    }\n    callMonitored(function () {\n        var stackTrace = computeStackTrace(error);\n        stackTrace.stack = stackTrace.stack.slice(internalFramesToSkip);\n        formattedStack = toStackTraceString(stackTrace);\n    });\n    return formattedStack;\n}\nexport function flattenErrorCauses(error, parentSource) {\n    var currentError = error;\n    var causes = [];\n    while ((currentError === null || currentError === void 0 ? void 0 : currentError.cause) instanceof Error && causes.length < 10) {\n        var stackTrace = computeStackTrace(currentError.cause);\n        causes.push({\n            message: currentError.cause.message,\n            source: parentSource,\n            type: stackTrace === null || stackTrace === void 0 ? void 0 : stackTrace.name,\n            stack: stackTrace && toStackTraceString(stackTrace),\n        });\n        currentError = currentError.cause;\n    }\n    return causes.length ? causes : undefined;\n}\n","import { display } from '../../tools/display';\nimport { getType } from '../../tools/utils/typeUtils';\nimport { assign } from '../../tools/utils/polyfills';\n/**\n * Clone input data and ensure known user properties (id, name, email)\n * are strings, as defined here:\n * https://docs.datadoghq.com/logs/log_configuration/attributes_naming_convention/#user-related-attributes\n */\nexport function sanitizeUser(newUser) {\n    // We shallow clone only to prevent mutation of user data.\n    var user = assign({}, newUser);\n    var keys = ['id', 'name', 'email'];\n    keys.forEach(function (key) {\n        if (key in user) {\n            user[key] = String(user[key]);\n        }\n    });\n    return user;\n}\n/**\n * Simple check to ensure user is valid\n */\nexport function checkUser(newUser) {\n    var isValid = getType(newUser) === 'object';\n    if (!isValid) {\n        display.error('Unsupported user:', newUser);\n    }\n    return isValid;\n}\n","import { assign } from './polyfills';\nexport function shallowClone(object) {\n    return assign({}, object);\n}\nexport function objectHasValue(object, value) {\n    return Object.keys(object).some(function (key) { return object[key] === value; });\n}\nexport function isEmptyObject(object) {\n    return Object.keys(object).length === 0;\n}\nexport function mapValues(object, fn) {\n    var newObject = {};\n    for (var _i = 0, _a = Object.keys(object); _i < _a.length; _i++) {\n        var key = _a[_i];\n        newObject[key] = fn(object[key]);\n    }\n    return newObject;\n}\n","import { jsonStringify } from '../serialisation/jsonStringify';\nexport function normalizeUrl(url) {\n    return buildUrl(url, getLocationOrigin()).href;\n}\nexport function isValidUrl(url) {\n    try {\n        return !!buildUrl(url);\n    }\n    catch (_a) {\n        return false;\n    }\n}\nexport function haveSameOrigin(url1, url2) {\n    return getOrigin(url1) === getOrigin(url2);\n}\nexport function getOrigin(url) {\n    return getLinkElementOrigin(buildUrl(url));\n}\nexport function getPathName(url) {\n    var pathname = buildUrl(url).pathname;\n    return pathname[0] === '/' ? pathname : \"/\".concat(pathname);\n}\nexport function getSearch(url) {\n    return buildUrl(url).search;\n}\nexport function getHash(url) {\n    return buildUrl(url).hash;\n}\nexport function buildUrl(url, base) {\n    var supportedURL = getSupportedUrl();\n    if (supportedURL) {\n        try {\n            return base !== undefined ? new supportedURL(url, base) : new supportedURL(url);\n        }\n        catch (error) {\n            throw new Error(\"Failed to construct URL: \".concat(String(error), \" \").concat(jsonStringify({ url: url, base: base })));\n        }\n    }\n    if (base === undefined && !/:/.test(url)) {\n        throw new Error(\"Invalid URL: '\".concat(url, \"'\"));\n    }\n    var doc = document;\n    var anchorElement = doc.createElement('a');\n    if (base !== undefined) {\n        doc = document.implementation.createHTMLDocument('');\n        var baseElement = doc.createElement('base');\n        baseElement.href = base;\n        doc.head.appendChild(baseElement);\n        doc.body.appendChild(anchorElement);\n    }\n    anchorElement.href = url;\n    return anchorElement;\n}\nvar originalURL = URL;\nvar isURLSupported;\nfunction getSupportedUrl() {\n    if (isURLSupported === undefined) {\n        try {\n            var url = new originalURL('http://test/path');\n            isURLSupported = url.href === 'http://test/path';\n        }\n        catch (_a) {\n            isURLSupported = false;\n        }\n    }\n    return isURLSupported ? originalURL : undefined;\n}\nexport function getLocationOrigin() {\n    return getLinkElementOrigin(window.location);\n}\n/**\n * IE fallback\n * https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/origin\n */\nexport function getLinkElementOrigin(element) {\n    if (element.origin) {\n        return element.origin;\n    }\n    var sanitizedHost = element.host.replace(/(:80|:443)$/, '');\n    return \"\".concat(element.protocol, \"//\").concat(sanitizedHost);\n}\n","export var INTAKE_SITE_STAGING = 'datad0g.com';\nexport var INTAKE_SITE_US1 = 'datadoghq.com';\nexport var INTAKE_SITE_EU1 = 'datadoghq.eu';\nexport var INTAKE_SITE_AP1 = 'ap1.datadoghq.com';\nexport var INTAKE_SITE_US1_FED = 'ddog-gov.com';\n","import { timeStampNow } from '../../tools/utils/timeUtils';\nimport { normalizeUrl } from '../../tools/utils/urlPolyfill';\nimport { ExperimentalFeature, isExperimentalFeatureEnabled } from '../../tools/experimentalFeatures';\nimport { generateUUID } from '../../tools/utils/stringUtils';\nimport { INTAKE_SITE_AP1, INTAKE_SITE_US1 } from './intakeSites';\nexport var ENDPOINTS = {\n    logs: 'logs',\n    rum: 'rum',\n    sessionReplay: 'session-replay',\n};\nvar INTAKE_TRACKS = {\n    logs: 'logs',\n    rum: 'rum',\n    sessionReplay: 'replay',\n};\nexport function createEndpointBuilder(initConfiguration, endpointType, configurationTags) {\n    var buildUrlWithParameters = createEndpointUrlWithParametersBuilder(initConfiguration, endpointType);\n    return {\n        build: function (api, flushReason, retry) {\n            var parameters = buildEndpointParameters(initConfiguration, endpointType, configurationTags, api, flushReason, retry);\n            return buildUrlWithParameters(parameters);\n        },\n        urlPrefix: buildUrlWithParameters(''),\n        endpointType: endpointType,\n    };\n}\n/**\n * Create a function used to build a full endpoint url from provided parameters. The goal of this\n * function is to pre-compute some parts of the URL to avoid re-computing everything on every\n * request, as only parameters are changing.\n */\nfunction createEndpointUrlWithParametersBuilder(initConfiguration, endpointType) {\n    var path = \"/api/v2/\".concat(INTAKE_TRACKS[endpointType]);\n    var proxy = initConfiguration.proxy, proxyUrl = initConfiguration.proxyUrl;\n    if (proxy) {\n        var normalizedProxyUrl_1 = normalizeUrl(proxy);\n        return function (parameters) { return \"\".concat(normalizedProxyUrl_1, \"?ddforward=\").concat(encodeURIComponent(\"\".concat(path, \"?\").concat(parameters))); };\n    }\n    var host = buildEndpointHost(initConfiguration, endpointType);\n    if (proxy === undefined && proxyUrl) {\n        // TODO: remove this in a future major.\n        var normalizedProxyUrl_2 = normalizeUrl(proxyUrl);\n        return function (parameters) {\n            return \"\".concat(normalizedProxyUrl_2, \"?ddforward=\").concat(encodeURIComponent(\"https://\".concat(host).concat(path, \"?\").concat(parameters)));\n        };\n    }\n    return function (parameters) { return \"https://\".concat(host).concat(path, \"?\").concat(parameters); };\n}\nfunction buildEndpointHost(initConfiguration, endpointType) {\n    var _a = initConfiguration.site, site = _a === void 0 ? INTAKE_SITE_US1 : _a, internalAnalyticsSubdomain = initConfiguration.internalAnalyticsSubdomain;\n    if (internalAnalyticsSubdomain && site === INTAKE_SITE_US1) {\n        return \"\".concat(internalAnalyticsSubdomain, \".\").concat(INTAKE_SITE_US1);\n    }\n    var domainParts = site.split('.');\n    var extension = domainParts.pop();\n    var subdomain = site !== INTAKE_SITE_AP1 ? \"\".concat(ENDPOINTS[endpointType], \".\") : '';\n    return \"\".concat(subdomain, \"browser-intake-\").concat(domainParts.join('-'), \".\").concat(extension);\n}\n/**\n * Build parameters to be used for an intake request. Parameters should be re-built for each\n * request, as they change randomly.\n */\nfunction buildEndpointParameters(_a, endpointType, configurationTags, api, flushReason, retry) {\n    var clientToken = _a.clientToken, internalAnalyticsSubdomain = _a.internalAnalyticsSubdomain;\n    var tags = [\"sdk_version:\".concat(\"4.39.0\"), \"api:\".concat(api)].concat(configurationTags);\n    if (flushReason && isExperimentalFeatureEnabled(ExperimentalFeature.COLLECT_FLUSH_REASON)) {\n        tags.push(\"flush_reason:\".concat(flushReason));\n    }\n    if (retry) {\n        tags.push(\"retry_count:\".concat(retry.count), \"retry_after:\".concat(retry.lastFailureStatus));\n    }\n    var parameters = [\n        'ddsource=browser',\n        \"ddtags=\".concat(encodeURIComponent(tags.join(','))),\n        \"dd-api-key=\".concat(clientToken),\n        \"dd-evp-origin-version=\".concat(encodeURIComponent(\"4.39.0\")),\n        'dd-evp-origin=browser',\n        \"dd-request-id=\".concat(generateUUID()),\n    ];\n    if (endpointType === 'rum') {\n        parameters.push(\"batch_time=\".concat(timeStampNow()));\n    }\n    if (internalAnalyticsSubdomain) {\n        parameters.reverse();\n    }\n    return parameters.join('&');\n}\n","import { display } from '../../tools/display';\nexport var TAG_SIZE_LIMIT = 200;\nexport function buildTags(configuration) {\n    var env = configuration.env, service = configuration.service, version = configuration.version, datacenter = configuration.datacenter;\n    var tags = [];\n    if (env) {\n        tags.push(buildTag('env', env));\n    }\n    if (service) {\n        tags.push(buildTag('service', service));\n    }\n    if (version) {\n        tags.push(buildTag('version', version));\n    }\n    if (datacenter) {\n        tags.push(buildTag('datacenter', datacenter));\n    }\n    return tags;\n}\nvar FORBIDDEN_CHARACTERS = /[^a-z0-9_:./-]/;\nexport function buildTag(key, rawValue) {\n    // See https://docs.datadoghq.com/getting_started/tagging/#defining-tags for tags syntax. Note\n    // that the backend may not follow the exact same rules, so we only want to display an informal\n    // warning.\n    var valueSizeLimit = TAG_SIZE_LIMIT - key.length - 1;\n    if (rawValue.length > valueSizeLimit || FORBIDDEN_CHARACTERS.test(rawValue)) {\n        display.warn(\"\".concat(key, \" value doesn't meet tag requirements and will be sanitized\"));\n    }\n    // Let the backend do most of the sanitization, but still make sure multiple tags can't be crafted\n    // by forging a value containing commas.\n    var sanitizedValue = rawValue.replace(/,/g, '_');\n    return \"\".concat(key, \":\").concat(sanitizedValue);\n}\n","import { getCurrentSite } from '../../browser/cookie';\nimport { catchUserErrors } from '../../tools/catchUserErrors';\nimport { display } from '../../tools/display';\nimport { ExperimentalFeature, addExperimentalFeatures } from '../../tools/experimentalFeatures';\nimport { ONE_SECOND } from '../../tools/utils/timeUtils';\nimport { isPercentage } from '../../tools/utils/numberUtils';\nimport { ONE_KIBI_BYTE } from '../../tools/utils/byteUtils';\nimport { objectHasValue } from '../../tools/utils/objectUtils';\nimport { assign } from '../../tools/utils/polyfills';\nimport { computeTransportConfiguration } from './transportConfiguration';\nexport var DefaultPrivacyLevel = {\n    ALLOW: 'allow',\n    MASK: 'mask',\n    MASK_USER_INPUT: 'mask-user-input',\n};\nexport function validateAndBuildConfiguration(initConfiguration) {\n    var _a, _b, _c;\n    if (!initConfiguration || !initConfiguration.clientToken) {\n        display.error('Client Token is not configured, we will not send any data.');\n        return;\n    }\n    var sessionSampleRate = (_a = initConfiguration.sessionSampleRate) !== null && _a !== void 0 ? _a : initConfiguration.sampleRate;\n    if (sessionSampleRate !== undefined && !isPercentage(sessionSampleRate)) {\n        display.error('Session Sample Rate should be a number between 0 and 100');\n        return;\n    }\n    if (initConfiguration.telemetrySampleRate !== undefined && !isPercentage(initConfiguration.telemetrySampleRate)) {\n        display.error('Telemetry Sample Rate should be a number between 0 and 100');\n        return;\n    }\n    if (initConfiguration.telemetryConfigurationSampleRate !== undefined &&\n        !isPercentage(initConfiguration.telemetryConfigurationSampleRate)) {\n        display.error('Telemetry Configuration Sample Rate should be a number between 0 and 100');\n        return;\n    }\n    // Set the experimental feature flags as early as possible, so we can use them in most places\n    if (Array.isArray(initConfiguration.enableExperimentalFeatures)) {\n        addExperimentalFeatures(initConfiguration.enableExperimentalFeatures.filter(function (flag) {\n            return objectHasValue(ExperimentalFeature, flag);\n        }));\n    }\n    return assign({\n        beforeSend: initConfiguration.beforeSend && catchUserErrors(initConfiguration.beforeSend, 'beforeSend threw an error:'),\n        cookieOptions: buildCookieOptions(initConfiguration),\n        sessionSampleRate: sessionSampleRate !== null && sessionSampleRate !== void 0 ? sessionSampleRate : 100,\n        telemetrySampleRate: (_b = initConfiguration.telemetrySampleRate) !== null && _b !== void 0 ? _b : 20,\n        telemetryConfigurationSampleRate: (_c = initConfiguration.telemetryConfigurationSampleRate) !== null && _c !== void 0 ? _c : 5,\n        service: initConfiguration.service,\n        silentMultipleInit: !!initConfiguration.silentMultipleInit,\n        /**\n         * beacon payload max queue size implementation is 64kb\n         * ensure that we leave room for logs, rum and potential other users\n         */\n        batchBytesLimit: 16 * ONE_KIBI_BYTE,\n        eventRateLimiterThreshold: 3000,\n        maxTelemetryEventsPerPage: 15,\n        /**\n         * flush automatically, aim to be lower than ALB connection timeout\n         * to maximize connection reuse.\n         */\n        flushTimeout: (30 * ONE_SECOND),\n        /**\n         * Logs intake limit\n         */\n        batchMessagesLimit: 50,\n        messageBytesLimit: 256 * ONE_KIBI_BYTE,\n    }, computeTransportConfiguration(initConfiguration));\n}\nexport function buildCookieOptions(initConfiguration) {\n    var cookieOptions = {};\n    cookieOptions.secure = mustUseSecureCookie(initConfiguration);\n    cookieOptions.crossSite = !!initConfiguration.useCrossSiteSessionCookie;\n    if (initConfiguration.trackSessionAcrossSubdomains) {\n        cookieOptions.domain = getCurrentSite();\n    }\n    return cookieOptions;\n}\nfunction mustUseSecureCookie(initConfiguration) {\n    return !!initConfiguration.useSecureSessionCookie || !!initConfiguration.useCrossSiteSessionCookie;\n}\nexport function serializeConfiguration(configuration) {\n    var _a, _b;\n    var proxy = (_a = configuration.proxy) !== null && _a !== void 0 ? _a : configuration.proxyUrl;\n    return {\n        session_sample_rate: (_b = configuration.sessionSampleRate) !== null && _b !== void 0 ? _b : configuration.sampleRate,\n        telemetry_sample_rate: configuration.telemetrySampleRate,\n        telemetry_configuration_sample_rate: configuration.telemetryConfigurationSampleRate,\n        use_before_send: !!configuration.beforeSend,\n        use_cross_site_session_cookie: configuration.useCrossSiteSessionCookie,\n        use_secure_session_cookie: configuration.useSecureSessionCookie,\n        use_proxy: proxy !== undefined ? !!proxy : undefined,\n        silent_multiple_init: configuration.silentMultipleInit,\n        track_session_across_subdomains: configuration.trackSessionAcrossSubdomains,\n        track_resources: configuration.trackResources,\n        track_long_task: configuration.trackLongTasks,\n    };\n}\n","import { objectValues, assign } from '../../tools/utils/polyfills';\nimport { createEndpointBuilder } from './endpointBuilder';\nimport { buildTags } from './tags';\nimport { INTAKE_SITE_US1 } from './intakeSites';\nexport function computeTransportConfiguration(initConfiguration) {\n    var tags = buildTags(initConfiguration);\n    var endpointBuilders = computeEndpointBuilders(initConfiguration, tags);\n    var intakeUrlPrefixes = objectValues(endpointBuilders).map(function (builder) { return builder.urlPrefix; });\n    var replicaConfiguration = computeReplicaConfiguration(initConfiguration, intakeUrlPrefixes, tags);\n    return assign({\n        isIntakeUrl: function (url) { return intakeUrlPrefixes.some(function (intakeEndpoint) { return url.indexOf(intakeEndpoint) === 0; }); },\n        replica: replicaConfiguration,\n        site: initConfiguration.site || INTAKE_SITE_US1,\n    }, endpointBuilders);\n}\nfunction computeEndpointBuilders(initConfiguration, tags) {\n    return {\n        logsEndpointBuilder: createEndpointBuilder(initConfiguration, 'logs', tags),\n        rumEndpointBuilder: createEndpointBuilder(initConfiguration, 'rum', tags),\n        sessionReplayEndpointBuilder: createEndpointBuilder(initConfiguration, 'sessionReplay', tags),\n    };\n}\nfunction computeReplicaConfiguration(initConfiguration, intakeUrlPrefixes, tags) {\n    if (!initConfiguration.replica) {\n        return;\n    }\n    var replicaConfiguration = assign({}, initConfiguration, {\n        site: INTAKE_SITE_US1,\n        clientToken: initConfiguration.replica.clientToken,\n    });\n    var replicaEndpointBuilders = {\n        logsEndpointBuilder: createEndpointBuilder(replicaConfiguration, 'logs', tags),\n        rumEndpointBuilder: createEndpointBuilder(replicaConfiguration, 'rum', tags),\n    };\n    intakeUrlPrefixes.push.apply(intakeUrlPrefixes, objectValues(replicaEndpointBuilders).map(function (builder) { return builder.urlPrefix; }));\n    return assign({ applicationId: initConfiguration.replica.applicationId }, replicaEndpointBuilders);\n}\n","import { startsWith } from './utils/polyfills';\nimport { display } from './display';\nimport { getType } from './utils/typeUtils';\nexport function isMatchOption(item) {\n    var itemType = getType(item);\n    return itemType === 'string' || itemType === 'function' || item instanceof RegExp;\n}\n/**\n * Returns true if value can be matched by at least one of the provided MatchOptions.\n * When comparing strings, setting useStartsWith to true will compare the value with the start of\n * the option, instead of requiring an exact match.\n */\nexport function matchList(list, value, useStartsWith) {\n    if (useStartsWith === void 0) { useStartsWith = false; }\n    return list.some(function (item) {\n        try {\n            if (typeof item === 'function') {\n                return item(value);\n            }\n            else if (item instanceof RegExp) {\n                return item.test(value);\n            }\n            else if (typeof item === 'string') {\n                return useStartsWith ? startsWith(value, item) : item === value;\n            }\n        }\n        catch (e) {\n            display.error(e);\n        }\n        return false;\n    });\n}\n","import { objectEntries, shallowClone, performDraw, isNumber, assign, find, getType, isMatchOption, matchList, } from '@datadog/browser-core';\nexport function isTracingOption(item) {\n    var expectedItem = item;\n    return (getType(expectedItem) === 'object' &&\n        isMatchOption(expectedItem.match) &&\n        Array.isArray(expectedItem.propagatorTypes));\n}\n/**\n * Clear tracing information to avoid incomplete traces. Ideally, we should do it when the\n * request did not reach the server, but the browser does not expose this. So, we clear tracing\n * information if the request ended with status 0 without being aborted by the application.\n *\n * Reasoning:\n *\n * * Applications are usually aborting requests after a bit of time, for example when the user is\n * typing (autocompletion) or navigating away (in a SPA). With a performant device and good\n * network conditions, the request is likely to reach the server before being canceled.\n *\n * * Requests aborted otherwise (ex: lack of internet, CORS issue, blocked by a privacy extension)\n * are likely to finish quickly and without reaching the server.\n *\n * Of course, it might not be the case every time, but it should limit having incomplete traces a\n * bit.\n * */\nexport function clearTracingIfNeeded(context) {\n    if (context.status === 0 && !context.isAborted) {\n        context.traceId = undefined;\n        context.spanId = undefined;\n        context.traceSampled = undefined;\n    }\n}\nexport function startTracer(configuration, sessionManager) {\n    return {\n        clearTracingIfNeeded: clearTracingIfNeeded,\n        traceFetch: function (context) {\n            return injectHeadersIfTracingAllowed(configuration, context, sessionManager, function (tracingHeaders) {\n                var _a;\n                if (context.input instanceof Request && !((_a = context.init) === null || _a === void 0 ? void 0 : _a.headers)) {\n                    context.input = new Request(context.input);\n                    Object.keys(tracingHeaders).forEach(function (key) {\n                        ;\n                        context.input.headers.append(key, tracingHeaders[key]);\n                    });\n                }\n                else {\n                    context.init = shallowClone(context.init);\n                    var headers_1 = [];\n                    if (context.init.headers instanceof Headers) {\n                        context.init.headers.forEach(function (value, key) {\n                            headers_1.push([key, value]);\n                        });\n                    }\n                    else if (Array.isArray(context.init.headers)) {\n                        context.init.headers.forEach(function (header) {\n                            headers_1.push(header);\n                        });\n                    }\n                    else if (context.init.headers) {\n                        Object.keys(context.init.headers).forEach(function (key) {\n                            headers_1.push([key, context.init.headers[key]]);\n                        });\n                    }\n                    context.init.headers = headers_1.concat(objectEntries(tracingHeaders));\n                }\n            });\n        },\n        traceXhr: function (context, xhr) {\n            return injectHeadersIfTracingAllowed(configuration, context, sessionManager, function (tracingHeaders) {\n                Object.keys(tracingHeaders).forEach(function (name) {\n                    xhr.setRequestHeader(name, tracingHeaders[name]);\n                });\n            });\n        },\n    };\n}\nfunction injectHeadersIfTracingAllowed(configuration, context, sessionManager, inject) {\n    if (!isTracingSupported() || !sessionManager.findTrackedSession()) {\n        return;\n    }\n    var tracingOption = find(configuration.allowedTracingUrls, function (tracingOption) {\n        return matchList([tracingOption.match], context.url, true);\n    });\n    if (!tracingOption) {\n        return;\n    }\n    context.traceId = new TraceIdentifier();\n    context.spanId = new TraceIdentifier();\n    context.traceSampled = !isNumber(configuration.traceSampleRate) || performDraw(configuration.traceSampleRate);\n    inject(makeTracingHeaders(context.traceId, context.spanId, context.traceSampled, tracingOption.propagatorTypes));\n}\nexport function isTracingSupported() {\n    return getCrypto() !== undefined;\n}\nfunction getCrypto() {\n    return window.crypto || window.msCrypto;\n}\n/**\n * When trace is not sampled, set priority to '0' instead of not adding the tracing headers\n * to prepare the implementation for sampling delegation.\n */\nfunction makeTracingHeaders(traceId, spanId, traceSampled, propagatorTypes) {\n    var tracingHeaders = {};\n    propagatorTypes.forEach(function (propagatorType) {\n        switch (propagatorType) {\n            case 'datadog': {\n                assign(tracingHeaders, {\n                    'x-datadog-origin': 'rum',\n                    'x-datadog-parent-id': spanId.toDecimalString(),\n                    'x-datadog-sampling-priority': traceSampled ? '1' : '0',\n                    'x-datadog-trace-id': traceId.toDecimalString(),\n                });\n                break;\n            }\n            // https://www.w3.org/TR/trace-context/\n            case 'tracecontext': {\n                assign(tracingHeaders, {\n                    traceparent: \"00-0000000000000000\".concat(traceId.toPaddedHexadecimalString(), \"-\").concat(spanId.toPaddedHexadecimalString(), \"-0\").concat(traceSampled ? '1' : '0'),\n                });\n                break;\n            }\n            // https://github.com/openzipkin/b3-propagation\n            case 'b3': {\n                assign(tracingHeaders, {\n                    b3: \"\".concat(traceId.toPaddedHexadecimalString(), \"-\").concat(spanId.toPaddedHexadecimalString(), \"-\").concat(traceSampled ? '1' : '0'),\n                });\n                break;\n            }\n            case 'b3multi': {\n                assign(tracingHeaders, {\n                    'X-B3-TraceId': traceId.toPaddedHexadecimalString(),\n                    'X-B3-SpanId': spanId.toPaddedHexadecimalString(),\n                    'X-B3-Sampled': traceSampled ? '1' : '0',\n                });\n                break;\n            }\n        }\n    });\n    return tracingHeaders;\n}\n/* eslint-disable no-bitwise */\nvar TraceIdentifier = /** @class */ (function () {\n    function TraceIdentifier() {\n        this.buffer = new Uint8Array(8);\n        getCrypto().getRandomValues(this.buffer);\n        this.buffer[0] = this.buffer[0] & 0x7f; // force 63-bit\n    }\n    TraceIdentifier.prototype.toString = function (radix) {\n        var high = this.readInt32(0);\n        var low = this.readInt32(4);\n        var str = '';\n        do {\n            var mod = (high % radix) * 4294967296 + low;\n            high = Math.floor(high / radix);\n            low = Math.floor(mod / radix);\n            str = (mod % radix).toString(radix) + str;\n        } while (high || low);\n        return str;\n    };\n    /**\n     * Format used everywhere except the trace intake\n     */\n    TraceIdentifier.prototype.toDecimalString = function () {\n        return this.toString(10);\n    };\n    /**\n     * Format used by OTel headers\n     */\n    TraceIdentifier.prototype.toPaddedHexadecimalString = function () {\n        var traceId = this.toString(16);\n        return Array(17 - traceId.length).join('0') + traceId;\n    };\n    TraceIdentifier.prototype.readInt32 = function (offset) {\n        return (this.buffer[offset] * 16777216 +\n            (this.buffer[offset + 1] << 16) +\n            (this.buffer[offset + 2] << 8) +\n            this.buffer[offset + 3]);\n    };\n    return TraceIdentifier;\n}());\nexport { TraceIdentifier };\n/* eslint-enable no-bitwise */\n","import { arrayFrom, getOrigin, isMatchOption, serializeConfiguration, assign, DefaultPrivacyLevel, display, isPercentage, objectHasValue, validateAndBuildConfiguration, } from '@datadog/browser-core';\nimport { isTracingOption } from './tracing/tracer';\nexport function validateAndBuildRumConfiguration(initConfiguration) {\n    var _a, _b, _c, _d, _e, _f;\n    if (!initConfiguration.applicationId) {\n        display.error('Application ID is not configured, no RUM data will be collected.');\n        return;\n    }\n    if (initConfiguration.sessionReplaySampleRate !== undefined &&\n        !isPercentage(initConfiguration.sessionReplaySampleRate)) {\n        display.error('Session Replay Sample Rate should be a number between 0 and 100');\n        return;\n    }\n    // TODO remove fallback in next major\n    var premiumSampleRate = (_a = initConfiguration.premiumSampleRate) !== null && _a !== void 0 ? _a : initConfiguration.replaySampleRate;\n    if (premiumSampleRate !== undefined && initConfiguration.sessionReplaySampleRate !== undefined) {\n        display.warn('Ignoring Premium Sample Rate because Session Replay Sample Rate is set');\n        premiumSampleRate = undefined;\n    }\n    if (premiumSampleRate !== undefined && !isPercentage(premiumSampleRate)) {\n        display.error('Premium Sample Rate should be a number between 0 and 100');\n        return;\n    }\n    var traceSampleRate = (_b = initConfiguration.traceSampleRate) !== null && _b !== void 0 ? _b : initConfiguration.tracingSampleRate;\n    if (traceSampleRate !== undefined && !isPercentage(traceSampleRate)) {\n        display.error('Trace Sample Rate should be a number between 0 and 100');\n        return;\n    }\n    if (initConfiguration.excludedActivityUrls !== undefined && !Array.isArray(initConfiguration.excludedActivityUrls)) {\n        display.error('Excluded Activity Urls should be an array');\n        return;\n    }\n    var allowedTracingUrls = validateAndBuildTracingOptions(initConfiguration);\n    if (!allowedTracingUrls) {\n        return;\n    }\n    var baseConfiguration = validateAndBuildConfiguration(initConfiguration);\n    if (!baseConfiguration) {\n        return;\n    }\n    var trackUserInteractions = !!((_c = initConfiguration.trackUserInteractions) !== null && _c !== void 0 ? _c : initConfiguration.trackInteractions);\n    var trackFrustrations = !!initConfiguration.trackFrustrations;\n    return assign({\n        applicationId: initConfiguration.applicationId,\n        version: initConfiguration.version,\n        actionNameAttribute: initConfiguration.actionNameAttribute,\n        sessionReplaySampleRate: (_e = (_d = initConfiguration.sessionReplaySampleRate) !== null && _d !== void 0 ? _d : premiumSampleRate) !== null && _e !== void 0 ? _e : 100,\n        oldPlansBehavior: initConfiguration.sessionReplaySampleRate === undefined,\n        traceSampleRate: traceSampleRate,\n        allowedTracingUrls: allowedTracingUrls,\n        excludedActivityUrls: (_f = initConfiguration.excludedActivityUrls) !== null && _f !== void 0 ? _f : [],\n        trackUserInteractions: trackUserInteractions || trackFrustrations,\n        trackFrustrations: trackFrustrations,\n        trackViewsManually: !!initConfiguration.trackViewsManually,\n        trackResources: initConfiguration.trackResources,\n        trackLongTasks: initConfiguration.trackLongTasks,\n        subdomain: initConfiguration.subdomain,\n        defaultPrivacyLevel: objectHasValue(DefaultPrivacyLevel, initConfiguration.defaultPrivacyLevel)\n            ? initConfiguration.defaultPrivacyLevel\n            : DefaultPrivacyLevel.MASK_USER_INPUT,\n        customerDataTelemetrySampleRate: 1,\n    }, baseConfiguration);\n}\n/**\n * Handles allowedTracingUrls and processes legacy allowedTracingOrigins\n */\nfunction validateAndBuildTracingOptions(initConfiguration) {\n    // Advise about parameters precedence.\n    if (initConfiguration.allowedTracingUrls !== undefined && initConfiguration.allowedTracingOrigins !== undefined) {\n        display.warn('Both allowedTracingUrls and allowedTracingOrigins (deprecated) have been defined. The parameter allowedTracingUrls will override allowedTracingOrigins.');\n    }\n    // Handle allowedTracingUrls first\n    if (initConfiguration.allowedTracingUrls !== undefined) {\n        if (!Array.isArray(initConfiguration.allowedTracingUrls)) {\n            display.error('Allowed Tracing URLs should be an array');\n            return;\n        }\n        if (initConfiguration.allowedTracingUrls.length !== 0 && initConfiguration.service === undefined) {\n            display.error('Service needs to be configured when tracing is enabled');\n            return;\n        }\n        // Convert from (MatchOption | TracingOption) to TracingOption, remove unknown properties\n        var tracingOptions_1 = [];\n        initConfiguration.allowedTracingUrls.forEach(function (option) {\n            if (isMatchOption(option)) {\n                tracingOptions_1.push({ match: option, propagatorTypes: ['datadog'] });\n            }\n            else if (isTracingOption(option)) {\n                tracingOptions_1.push(option);\n            }\n            else {\n                display.warn('Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter', option);\n            }\n        });\n        return tracingOptions_1;\n    }\n    // Handle conversion of allowedTracingOrigins to allowedTracingUrls\n    if (initConfiguration.allowedTracingOrigins !== undefined) {\n        if (!Array.isArray(initConfiguration.allowedTracingOrigins)) {\n            display.error('Allowed Tracing Origins should be an array');\n            return;\n        }\n        if (initConfiguration.allowedTracingOrigins.length !== 0 && initConfiguration.service === undefined) {\n            display.error('Service needs to be configured when tracing is enabled');\n            return;\n        }\n        var tracingOptions_2 = [];\n        initConfiguration.allowedTracingOrigins.forEach(function (legacyMatchOption) {\n            var tracingOption = convertLegacyMatchOptionToTracingOption(legacyMatchOption);\n            if (tracingOption) {\n                tracingOptions_2.push(tracingOption);\n            }\n        });\n        return tracingOptions_2;\n    }\n    return [];\n}\n/**\n * Converts parameters from the deprecated allowedTracingOrigins\n * to allowedTracingUrls. Handles the change from origin to full URLs.\n */\nfunction convertLegacyMatchOptionToTracingOption(item) {\n    var match;\n    if (typeof item === 'string') {\n        match = item;\n    }\n    else if (item instanceof RegExp) {\n        match = function (url) { return item.test(getOrigin(url)); };\n    }\n    else if (typeof item === 'function') {\n        match = function (url) { return item(getOrigin(url)); };\n    }\n    if (match === undefined) {\n        display.warn('Allowed Tracing Origins parameters should be a string, RegExp or function. Ignoring parameter', item);\n        return undefined;\n    }\n    return { match: match, propagatorTypes: ['datadog'] };\n}\n/**\n * Combines the selected tracing propagators from the different options in allowedTracingUrls,\n * and assumes 'datadog' has been selected when using allowedTracingOrigins\n */\nfunction getSelectedTracingPropagators(configuration) {\n    var usedTracingPropagators = new Set();\n    if (Array.isArray(configuration.allowedTracingUrls) && configuration.allowedTracingUrls.length > 0) {\n        configuration.allowedTracingUrls.forEach(function (option) {\n            if (isMatchOption(option)) {\n                usedTracingPropagators.add('datadog');\n            }\n            else {\n                option.propagatorTypes.forEach(function (propagatorType) { return usedTracingPropagators.add(propagatorType); });\n            }\n        });\n    }\n    if (Array.isArray(configuration.allowedTracingOrigins) && configuration.allowedTracingOrigins.length > 0) {\n        usedTracingPropagators.add('datadog');\n    }\n    return arrayFrom(usedTracingPropagators);\n}\nexport function serializeRumConfiguration(configuration) {\n    var _a, _b;\n    var baseSerializedConfiguration = serializeConfiguration(configuration);\n    return assign({\n        premium_sample_rate: configuration.premiumSampleRate,\n        replay_sample_rate: configuration.replaySampleRate,\n        session_replay_sample_rate: configuration.sessionReplaySampleRate,\n        trace_sample_rate: (_a = configuration.traceSampleRate) !== null && _a !== void 0 ? _a : configuration.tracingSampleRate,\n        action_name_attribute: configuration.actionNameAttribute,\n        use_allowed_tracing_origins: Array.isArray(configuration.allowedTracingOrigins) && configuration.allowedTracingOrigins.length > 0,\n        use_allowed_tracing_urls: Array.isArray(configuration.allowedTracingUrls) && configuration.allowedTracingUrls.length > 0,\n        selected_tracing_propagators: getSelectedTracingPropagators(configuration),\n        default_privacy_level: configuration.defaultPrivacyLevel,\n        use_excluded_activity_urls: Array.isArray(configuration.allowedTracingOrigins) && configuration.allowedTracingOrigins.length > 0,\n        track_frustrations: configuration.trackFrustrations,\n        track_views_manually: configuration.trackViewsManually,\n        track_user_interactions: (_b = configuration.trackUserInteractions) !== null && _b !== void 0 ? _b : configuration.trackInteractions,\n    }, baseSerializedConfiguration);\n}\n","export function buildCommonContext(globalContextManager, userContextManager, recorderApi) {\n    return {\n        context: globalContextManager.getContext(),\n        user: userContextManager.getContext(),\n        hasReplay: recorderApi.isRecording() ? true : undefined,\n    };\n}\n","export function sendToExtension(type, payload) {\n    var callback = window.__ddBrowserSdkExtensionCallback;\n    if (callback) {\n        callback({ type: type, payload: payload });\n    }\n}\n","var Observable = /** @class */ (function () {\n    function Observable(onFirstSubscribe) {\n        this.onFirstSubscribe = onFirstSubscribe;\n        this.observers = [];\n    }\n    Observable.prototype.subscribe = function (f) {\n        var _this = this;\n        if (!this.observers.length && this.onFirstSubscribe) {\n            this.onLastUnsubscribe = this.onFirstSubscribe() || undefined;\n        }\n        this.observers.push(f);\n        return {\n            unsubscribe: function () {\n                _this.observers = _this.observers.filter(function (other) { return f !== other; });\n                if (!_this.observers.length && _this.onLastUnsubscribe) {\n                    _this.onLastUnsubscribe();\n                }\n            },\n        };\n    };\n    Observable.prototype.notify = function (data) {\n        this.observers.forEach(function (observer) { return observer(data); });\n    };\n    return Observable;\n}());\nexport { Observable };\nexport function mergeObservables() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var globalObservable = new Observable(function () {\n        var subscriptions = observables.map(function (observable) {\n            return observable.subscribe(function (data) { return globalObservable.notify(data); });\n        });\n        return function () { return subscriptions.forEach(function (subscription) { return subscription.unsubscribe(); }); };\n    });\n    return globalObservable;\n}\n","import { monitor } from '../tools/monitor';\nimport { getZoneJsOriginalValue } from '../tools/getZoneJsOriginalValue';\n/**\n * Add an event listener to an event target object (Window, Element, mock object...).  This provides\n * a few conveniences compared to using `element.addEventListener` directly:\n *\n * * supports IE11 by: using an option object only if needed and emulating the `once` option\n *\n * * wraps the listener with a `monitor` function\n *\n * * returns a `stop` function to remove the listener\n */\nexport function addEventListener(eventTarget, eventName, listener, options) {\n    return addEventListeners(eventTarget, [eventName], listener, options);\n}\n/**\n * Add event listeners to an event target object (Window, Element, mock object...).  This provides\n * a few conveniences compared to using `element.addEventListener` directly:\n *\n * * supports IE11 by: using an option object only if needed and emulating the `once` option\n *\n * * wraps the listener with a `monitor` function\n *\n * * returns a `stop` function to remove the listener\n *\n * * with `once: true`, the listener will be called at most once, even if different events are listened\n */\nexport function addEventListeners(eventTarget, eventNames, listener, _a) {\n    var _b = _a === void 0 ? {} : _a, once = _b.once, capture = _b.capture, passive = _b.passive;\n    var wrappedListener = monitor(once\n        ? function (event) {\n            stop();\n            listener(event);\n        }\n        : listener);\n    var options = passive ? { capture: capture, passive: passive } : capture;\n    var add = getZoneJsOriginalValue(eventTarget, 'addEventListener');\n    eventNames.forEach(function (eventName) { return add.call(eventTarget, eventName, wrappedListener, options); });\n    function stop() {\n        var remove = getZoneJsOriginalValue(eventTarget, 'removeEventListener');\n        eventNames.forEach(function (eventName) { return remove.call(eventTarget, eventName, wrappedListener, options); });\n    }\n    return {\n        stop: stop,\n    };\n}\n","import { isExperimentalFeatureEnabled, ExperimentalFeature } from '../tools/experimentalFeatures';\nimport { Observable } from '../tools/observable';\nimport { objectValues, includes } from '../tools/utils/polyfills';\nimport { noop } from '../tools/utils/functionUtils';\nimport { addEventListeners, addEventListener } from './addEventListener';\nexport var PageExitReason = {\n    HIDDEN: 'visibility_hidden',\n    UNLOADING: 'before_unload',\n    PAGEHIDE: 'page_hide',\n    FROZEN: 'page_frozen',\n};\nexport function createPageExitObservable() {\n    var observable = new Observable(function () {\n        var pagehideEnabled = isExperimentalFeatureEnabled(ExperimentalFeature.PAGEHIDE);\n        var stopListeners = addEventListeners(window, [\"visibilitychange\" /* DOM_EVENT.VISIBILITY_CHANGE */, \"freeze\" /* DOM_EVENT.FREEZE */, \"pagehide\" /* DOM_EVENT.PAGE_HIDE */], function (event) {\n            if (event.type === \"pagehide\" /* DOM_EVENT.PAGE_HIDE */ && pagehideEnabled) {\n                /**\n                 * Only event that detect page unload events while being compatible with the back/forward cache (bfcache)\n                 */\n                observable.notify({ reason: PageExitReason.PAGEHIDE });\n            }\n            else if (event.type === \"visibilitychange\" /* DOM_EVENT.VISIBILITY_CHANGE */ && document.visibilityState === 'hidden') {\n                /**\n                 * Only event that guarantee to fire on mobile devices when the page transitions to background state\n                 * (e.g. when user switches to a different application, goes to homescreen, etc), or is being unloaded.\n                 */\n                observable.notify({ reason: PageExitReason.HIDDEN });\n            }\n            else if (event.type === \"freeze\" /* DOM_EVENT.FREEZE */) {\n                /**\n                 * After transitioning in background a tab can be freezed to preserve resources. (cf: https://developer.chrome.com/blog/page-lifecycle-api)\n                 * Allow to collect events happening between hidden and frozen state.\n                 */\n                observable.notify({ reason: PageExitReason.FROZEN });\n            }\n        }, { capture: true }).stop;\n        var stopBeforeUnloadListener = noop;\n        if (!pagehideEnabled) {\n            stopBeforeUnloadListener = addEventListener(window, \"beforeunload\" /* DOM_EVENT.BEFORE_UNLOAD */, function () {\n                observable.notify({ reason: PageExitReason.UNLOADING });\n            }).stop;\n        }\n        return function () {\n            stopListeners();\n            stopBeforeUnloadListener();\n        };\n    });\n    return observable;\n}\nexport function isPageExitReason(reason) {\n    return includes(objectValues(PageExitReason), reason);\n}\n","export var TelemetryType = {\n    log: 'log',\n    configuration: 'configuration',\n};\n","import { ConsoleApiName } from '../../tools/display';\nimport { toStackTraceString } from '../error/error';\nimport { getExperimentalFeatures } from '../../tools/experimentalFeatures';\nimport { INTAKE_SITE_STAGING, INTAKE_SITE_US1_FED } from '../configuration';\nimport { computeStackTrace } from '../tracekit';\nimport { Observable } from '../../tools/observable';\nimport { timeStampNow } from '../../tools/utils/timeUtils';\nimport { displayIfDebugEnabled, startMonitorErrorCollection } from '../../tools/monitor';\nimport { sendToExtension } from '../../tools/sendToExtension';\nimport { startsWith, arrayFrom, includes, assign } from '../../tools/utils/polyfills';\nimport { performDraw } from '../../tools/utils/numberUtils';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nimport { combine } from '../../tools/mergeInto';\nimport { TelemetryType } from './rawTelemetryEvent.types';\nvar ALLOWED_FRAME_URLS = [\n    'https://www.datadoghq-browser-agent.com',\n    'https://www.datad0g-browser-agent.com',\n    'http://localhost',\n    '<anonymous>',\n];\nvar TELEMETRY_EXCLUDED_SITES = [INTAKE_SITE_US1_FED];\nvar telemetryConfiguration = { maxEventsPerPage: 0, sentEventCount: 0, telemetryEnabled: false, telemetryConfigurationEnabled: false };\nvar onRawTelemetryEventCollected;\nexport function startTelemetry(telemetryService, configuration) {\n    var contextProvider;\n    var observable = new Observable();\n    telemetryConfiguration.telemetryEnabled =\n        !includes(TELEMETRY_EXCLUDED_SITES, configuration.site) && performDraw(configuration.telemetrySampleRate);\n    telemetryConfiguration.telemetryConfigurationEnabled =\n        telemetryConfiguration.telemetryEnabled && performDraw(configuration.telemetryConfigurationSampleRate);\n    onRawTelemetryEventCollected = function (rawEvent) {\n        if (telemetryConfiguration.telemetryEnabled) {\n            var event_1 = toTelemetryEvent(telemetryService, rawEvent);\n            observable.notify(event_1);\n            sendToExtension('telemetry', event_1);\n        }\n    };\n    startMonitorErrorCollection(addTelemetryError);\n    assign(telemetryConfiguration, {\n        maxEventsPerPage: configuration.maxTelemetryEventsPerPage,\n        sentEventCount: 0,\n    });\n    function toTelemetryEvent(telemetryService, event) {\n        return combine({\n            type: 'telemetry',\n            date: timeStampNow(),\n            service: telemetryService,\n            version: \"4.39.0\",\n            source: 'browser',\n            _dd: {\n                format_version: 2,\n            },\n            telemetry: event,\n            experimental_features: arrayFrom(getExperimentalFeatures()),\n        }, contextProvider !== undefined ? contextProvider() : {});\n    }\n    return {\n        setContextProvider: function (provider) {\n            contextProvider = provider;\n        },\n        observable: observable,\n        enabled: telemetryConfiguration.telemetryEnabled,\n    };\n}\nexport function startFakeTelemetry() {\n    var events = [];\n    assign(telemetryConfiguration, {\n        maxEventsPerPage: Infinity,\n        sentEventCount: 0,\n    });\n    onRawTelemetryEventCollected = function (event) {\n        events.push(event);\n    };\n    return events;\n}\nexport function resetTelemetry() {\n    onRawTelemetryEventCollected = undefined;\n}\n/**\n * Avoid mixing telemetry events from different data centers\n * but keep replicating staging events for reliability\n */\nexport function isTelemetryReplicationAllowed(configuration) {\n    return configuration.site === INTAKE_SITE_STAGING;\n}\nexport function addTelemetryDebug(message, context) {\n    displayIfDebugEnabled(ConsoleApiName.debug, message, context);\n    addTelemetry(assign({\n        type: TelemetryType.log,\n        message: message,\n        status: \"debug\" /* StatusType.debug */,\n    }, context));\n}\nexport function addTelemetryError(e) {\n    addTelemetry(assign({\n        type: TelemetryType.log,\n        status: \"error\" /* StatusType.error */,\n    }, formatError(e)));\n}\nexport function addTelemetryConfiguration(configuration) {\n    if (telemetryConfiguration.telemetryConfigurationEnabled) {\n        addTelemetry({\n            type: TelemetryType.configuration,\n            configuration: configuration,\n        });\n    }\n}\nfunction addTelemetry(event) {\n    if (onRawTelemetryEventCollected && telemetryConfiguration.sentEventCount < telemetryConfiguration.maxEventsPerPage) {\n        telemetryConfiguration.sentEventCount += 1;\n        onRawTelemetryEventCollected(event);\n    }\n}\nexport function formatError(e) {\n    if (e instanceof Error) {\n        var stackTrace = computeStackTrace(e);\n        return {\n            error: {\n                kind: stackTrace.name,\n                stack: toStackTraceString(scrubCustomerFrames(stackTrace)),\n            },\n            message: stackTrace.message,\n        };\n    }\n    return {\n        error: {\n            stack: 'Not an instance of error',\n        },\n        message: \"Uncaught \".concat(jsonStringify(e)),\n    };\n}\nexport function scrubCustomerFrames(stackTrace) {\n    stackTrace.stack = stackTrace.stack.filter(function (frame) { return !frame.url || ALLOWED_FRAME_URLS.some(function (allowedFrameUrl) { return startsWith(frame.url, allowedFrameUrl); }); });\n    return stackTrace;\n}\n","import { monitor, noop, Observable, getZoneJsOriginalValue } from '@datadog/browser-core';\nexport function createDOMMutationObservable() {\n    var MutationObserver = getMutationObserverConstructor();\n    var observable = new Observable(function () {\n        if (!MutationObserver) {\n            return;\n        }\n        var observer = new MutationObserver(monitor(function () { return observable.notify(); }));\n        observer.observe(document, {\n            attributes: true,\n            characterData: true,\n            childList: true,\n            subtree: true,\n        });\n        return function () { return observer.disconnect(); };\n    });\n    return observable;\n}\nexport function getMutationObserverConstructor() {\n    var constructor;\n    var browserWindow = window;\n    // Angular uses Zone.js to provide a context persisting across async tasks.  Zone.js replaces the\n    // global MutationObserver constructor with a patched version to support the context propagation.\n    // There is an ongoing issue[1][2] with this setup when using a MutationObserver within a Angular\n    // component: on some occasions, the callback is being called in an infinite loop, causing the\n    // page to freeze (even if the callback is completely empty).\n    //\n    // To work around this issue, we try to get the original MutationObserver constructor stored by\n    // Zone.js.\n    //\n    // [1] https://github.com/angular/angular/issues/26948\n    // [2] https://github.com/angular/angular/issues/31712\n    if (browserWindow.Zone) {\n        // Zone.js 0.8.6+ is storing original class constructors into the browser 'window' object[3].\n        //\n        // [3] https://github.com/angular/angular/blob/6375fa79875c0fe7b815efc45940a6e6f5c9c9eb/packages/zone.js/lib/common/utils.ts#L288\n        constructor = getZoneJsOriginalValue(browserWindow, 'MutationObserver');\n        if (browserWindow.MutationObserver && constructor === browserWindow.MutationObserver) {\n            // Anterior Zone.js versions (used in Angular 2) does not expose the original MutationObserver\n            // in the 'window' object. Luckily, the patched MutationObserver class is storing an original\n            // instance in its properties[4]. Let's get the original MutationObserver constructor from\n            // there.\n            //\n            // [4] https://github.com/angular/zone.js/blob/v0.8.5/lib/common/utils.ts#L412\n            var patchedInstance = new browserWindow.MutationObserver(noop);\n            var originalInstance = getZoneJsOriginalValue(patchedInstance, 'originalInstance');\n            constructor = originalInstance && originalInstance.constructor;\n        }\n    }\n    if (!constructor) {\n        constructor = browserWindow.MutationObserver;\n    }\n    return constructor;\n}\n","import { addEventListener } from './addEventListener';\nexport function runOnReadyState(expectedReadyState, callback) {\n    if (document.readyState === expectedReadyState || document.readyState === 'complete') {\n        callback();\n    }\n    else {\n        var eventName = expectedReadyState === 'complete' ? \"load\" /* DOM_EVENT.LOAD */ : \"DOMContentLoaded\" /* DOM_EVENT.DOM_CONTENT_LOADED */;\n        addEventListener(window, eventName, callback, { once: true });\n    }\n}\n","import { assign, addTelemetryDebug, elapsed, getPathName, includes, isValidUrl, toServerDuration, } from '@datadog/browser-core';\nexport var FAKE_INITIAL_DOCUMENT = 'initial_document';\nvar RESOURCE_TYPES = [\n    [\"document\" /* ResourceType.DOCUMENT */, function (initiatorType) { return FAKE_INITIAL_DOCUMENT === initiatorType; }],\n    [\"xhr\" /* ResourceType.XHR */, function (initiatorType) { return 'xmlhttprequest' === initiatorType; }],\n    [\"fetch\" /* ResourceType.FETCH */, function (initiatorType) { return 'fetch' === initiatorType; }],\n    [\"beacon\" /* ResourceType.BEACON */, function (initiatorType) { return 'beacon' === initiatorType; }],\n    [\"css\" /* ResourceType.CSS */, function (_, path) { return /\\.css$/i.test(path); }],\n    [\"js\" /* ResourceType.JS */, function (_, path) { return /\\.js$/i.test(path); }],\n    [\n        \"image\" /* ResourceType.IMAGE */,\n        function (initiatorType, path) {\n            return includes(['image', 'img', 'icon'], initiatorType) || /\\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(path) !== null;\n        },\n    ],\n    [\"font\" /* ResourceType.FONT */, function (_, path) { return /\\.(woff|eot|woff2|ttf)$/i.exec(path) !== null; }],\n    [\n        \"media\" /* ResourceType.MEDIA */,\n        function (initiatorType, path) {\n            return includes(['audio', 'video'], initiatorType) || /\\.(mp3|mp4)$/i.exec(path) !== null;\n        },\n    ],\n];\nexport function computeResourceKind(timing) {\n    var url = timing.name;\n    if (!isValidUrl(url)) {\n        addTelemetryDebug(\"Failed to construct URL for \\\"\".concat(timing.name, \"\\\"\"));\n        return \"other\" /* ResourceType.OTHER */;\n    }\n    var path = getPathName(url);\n    for (var _i = 0, RESOURCE_TYPES_1 = RESOURCE_TYPES; _i < RESOURCE_TYPES_1.length; _i++) {\n        var _a = RESOURCE_TYPES_1[_i], type = _a[0], isType = _a[1];\n        if (isType(timing.initiatorType, path)) {\n            return type;\n        }\n    }\n    return \"other\" /* ResourceType.OTHER */;\n}\nfunction areInOrder() {\n    var numbers = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        numbers[_i] = arguments[_i];\n    }\n    for (var i = 1; i < numbers.length; i += 1) {\n        if (numbers[i - 1] > numbers[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function isRequestKind(timing) {\n    return timing.initiatorType === 'xmlhttprequest' || timing.initiatorType === 'fetch';\n}\nexport function computePerformanceResourceDuration(entry) {\n    var duration = entry.duration, startTime = entry.startTime, responseEnd = entry.responseEnd;\n    // Safari duration is always 0 on timings blocked by cross origin policies.\n    if (duration === 0 && startTime < responseEnd) {\n        return toServerDuration(elapsed(startTime, responseEnd));\n    }\n    return toServerDuration(duration);\n}\nexport function computePerformanceResourceDetails(entry) {\n    var validEntry = toValidEntry(entry);\n    if (!validEntry) {\n        return undefined;\n    }\n    var startTime = validEntry.startTime, fetchStart = validEntry.fetchStart, redirectStart = validEntry.redirectStart, redirectEnd = validEntry.redirectEnd, domainLookupStart = validEntry.domainLookupStart, domainLookupEnd = validEntry.domainLookupEnd, connectStart = validEntry.connectStart, secureConnectionStart = validEntry.secureConnectionStart, connectEnd = validEntry.connectEnd, requestStart = validEntry.requestStart, responseStart = validEntry.responseStart, responseEnd = validEntry.responseEnd;\n    var details = {\n        download: formatTiming(startTime, responseStart, responseEnd),\n        first_byte: formatTiming(startTime, requestStart, responseStart),\n    };\n    // Make sure a connection occurred\n    if (connectEnd !== fetchStart) {\n        details.connect = formatTiming(startTime, connectStart, connectEnd);\n        // Make sure a secure connection occurred\n        if (areInOrder(connectStart, secureConnectionStart, connectEnd)) {\n            details.ssl = formatTiming(startTime, secureConnectionStart, connectEnd);\n        }\n    }\n    // Make sure a domain lookup occurred\n    if (domainLookupEnd !== fetchStart) {\n        details.dns = formatTiming(startTime, domainLookupStart, domainLookupEnd);\n    }\n    if (hasRedirection(entry)) {\n        details.redirect = formatTiming(startTime, redirectStart, redirectEnd);\n    }\n    return details;\n}\nexport function toValidEntry(entry) {\n    // Ensure timings are in the right order. On top of filtering out potential invalid\n    // RumPerformanceResourceTiming, it will ignore entries from requests where timings cannot be\n    // collected, for example cross origin requests without a \"Timing-Allow-Origin\" header allowing\n    // it.\n    if (!areInOrder(entry.startTime, entry.fetchStart, entry.domainLookupStart, entry.domainLookupEnd, entry.connectStart, entry.connectEnd, entry.requestStart, entry.responseStart, entry.responseEnd)) {\n        return undefined;\n    }\n    if (!hasRedirection(entry)) {\n        return entry;\n    }\n    var redirectStart = entry.redirectStart, redirectEnd = entry.redirectEnd;\n    // Firefox doesn't provide redirect timings on cross origin requests.\n    // Provide a default for those.\n    if (redirectStart < entry.startTime) {\n        redirectStart = entry.startTime;\n    }\n    if (redirectEnd < entry.startTime) {\n        redirectEnd = entry.fetchStart;\n    }\n    // Make sure redirect timings are in order\n    if (!areInOrder(entry.startTime, redirectStart, redirectEnd, entry.fetchStart)) {\n        return undefined;\n    }\n    return assign({}, entry, {\n        redirectEnd: redirectEnd,\n        redirectStart: redirectStart,\n    });\n}\nfunction hasRedirection(entry) {\n    // The only time fetchStart is different than startTime is if a redirection occurred.\n    return entry.fetchStart !== entry.startTime;\n}\nfunction formatTiming(origin, start, end) {\n    return {\n        duration: toServerDuration(elapsed(start, end)),\n        start: toServerDuration(elapsed(origin, start)),\n    };\n}\nexport function computeSize(entry) {\n    // Make sure a request actually occurred\n    if (entry.startTime < entry.responseStart) {\n        return entry.decodedBodySize;\n    }\n    return undefined;\n}\nexport function isAllowedRequestUrl(configuration, url) {\n    return url && !configuration.isIntakeUrl(url);\n}\n","export function isTextNode(node) {\n    return node.nodeType === Node.TEXT_NODE;\n}\nexport function isCommentNode(node) {\n    return node.nodeType === Node.COMMENT_NODE;\n}\nexport function isElementNode(node) {\n    return node.nodeType === Node.ELEMENT_NODE;\n}\nexport function isNodeShadowHost(node) {\n    return isElementNode(node) && Boolean(node.shadowRoot);\n}\nexport function isNodeShadowRoot(node) {\n    var shadowRoot = node;\n    return !!shadowRoot.host && shadowRoot.nodeType === Node.DOCUMENT_FRAGMENT_NODE && isElementNode(shadowRoot.host);\n}\nexport function getChildNodes(node) {\n    return isNodeShadowHost(node) ? node.shadowRoot.childNodes : node.childNodes;\n}\n/**\n * Return `host` in case if the current node is a shadow root otherwise will return the `parentNode`\n */\nexport function getParentNode(node) {\n    return isNodeShadowRoot(node) ? node.host : node.parentNode;\n}\n","import { dateNow, findCommaSeparatedValue, ONE_MINUTE } from '@datadog/browser-core';\nimport { isCommentNode, isTextNode } from '../../browser/htmlDomUtils';\nexport var INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD = 2 * ONE_MINUTE;\nexport function getDocumentTraceId(document) {\n    var data = getDocumentTraceDataFromMeta(document) || getDocumentTraceDataFromComment(document);\n    if (!data || data.traceTime <= dateNow() - INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD) {\n        return undefined;\n    }\n    return data.traceId;\n}\nexport function getDocumentTraceDataFromMeta(document) {\n    var traceIdMeta = document.querySelector('meta[name=dd-trace-id]');\n    var traceTimeMeta = document.querySelector('meta[name=dd-trace-time]');\n    return createDocumentTraceData(traceIdMeta && traceIdMeta.content, traceTimeMeta && traceTimeMeta.content);\n}\nexport function getDocumentTraceDataFromComment(document) {\n    var comment = findTraceComment(document);\n    if (!comment) {\n        return undefined;\n    }\n    return createDocumentTraceData(findCommaSeparatedValue(comment, 'trace-id'), findCommaSeparatedValue(comment, 'trace-time'));\n}\nexport function createDocumentTraceData(traceId, rawTraceTime) {\n    var traceTime = rawTraceTime && Number(rawTraceTime);\n    if (!traceId || !traceTime) {\n        return undefined;\n    }\n    return {\n        traceId: traceId,\n        traceTime: traceTime,\n    };\n}\nexport function findTraceComment(document) {\n    // 1. Try to find the comment as a direct child of the document\n    // Note: TSLint advises to use a 'for of', but TS doesn't allow to use 'for of' if the iterated\n    // value is not an array or string (here, a NodeList).\n    for (var i = 0; i < document.childNodes.length; i += 1) {\n        var comment = getTraceCommentFromNode(document.childNodes[i]);\n        if (comment) {\n            return comment;\n        }\n    }\n    // 2. If the comment is placed after the </html> tag, but have some space or new lines before or\n    // after, the DOM parser will lift it (and the surrounding text) at the end of the <body> tag.\n    // Try to look for the comment at the end of the <body> by by iterating over its child nodes in\n    // reverse order, stopping if we come across a non-text node.\n    if (document.body) {\n        for (var i = document.body.childNodes.length - 1; i >= 0; i -= 1) {\n            var node = document.body.childNodes[i];\n            var comment = getTraceCommentFromNode(node);\n            if (comment) {\n                return comment;\n            }\n            if (!isTextNode(node)) {\n                break;\n            }\n        }\n    }\n}\nfunction getTraceCommentFromNode(node) {\n    if (node && isCommentNode(node)) {\n        var match = /^\\s*DATADOG;(.*?)\\s*$/.exec(node.data);\n        if (match) {\n            return match[1];\n        }\n    }\n}\n","import { Observable, throttle, addEventListener } from '@datadog/browser-core';\nvar viewportObservable;\nexport function initViewportObservable() {\n    if (!viewportObservable) {\n        viewportObservable = createViewportObservable();\n    }\n    return viewportObservable;\n}\nexport function createViewportObservable() {\n    var observable = new Observable(function () {\n        var updateDimension = throttle(function () {\n            observable.notify(getViewportDimension());\n        }, 200).throttled;\n        return addEventListener(window, \"resize\" /* DOM_EVENT.RESIZE */, updateDimension, { capture: true, passive: true }).stop;\n    });\n    return observable;\n}\n// excludes the width and height of any rendered classic scrollbar that is fixed to the visual viewport\nexport function getViewportDimension() {\n    var visual = window.visualViewport;\n    if (visual) {\n        return {\n            width: Number(visual.width * visual.scale),\n            height: Number(visual.height * visual.scale),\n        };\n    }\n    return {\n        width: Number(window.innerWidth || 0),\n        height: Number(window.innerHeight || 0),\n    };\n}\n","import { ExperimentalFeature, isExperimentalFeatureEnabled } from '@datadog/browser-core';\nimport { getViewportDimension, initViewportObservable } from '../../browser/viewportObservable';\nvar viewport;\nvar stopListeners;\nexport function getDisplayContext() {\n    if (!isExperimentalFeatureEnabled(ExperimentalFeature.CLICKMAP)) {\n        return;\n    }\n    if (!viewport) {\n        viewport = getViewportDimension();\n        stopListeners = initViewportObservable().subscribe(function (viewportDimension) {\n            viewport = viewportDimension;\n        }).unsubscribe;\n    }\n    return {\n        viewport: viewport,\n    };\n}\nexport function resetDisplayContext() {\n    if (stopListeners) {\n        stopListeners();\n    }\n    viewport = undefined;\n}\n","import { dateNow, assign, addEventListeners, getRelativeTime, isNumber, monitor, setTimeout, relativeNow, runOnReadyState, addEventListener, } from '@datadog/browser-core';\nimport { FAKE_INITIAL_DOCUMENT, isAllowedRequestUrl } from '../domain/rumEventsCollection/resource/resourceUtils';\nimport { getDocumentTraceId } from '../domain/tracing/getDocumentTraceId';\nfunction supportPerformanceObject() {\n    return window.performance !== undefined && 'getEntries' in performance;\n}\nexport function supportPerformanceTimingEvent(entryType) {\n    return (window.PerformanceObserver &&\n        PerformanceObserver.supportedEntryTypes !== undefined &&\n        PerformanceObserver.supportedEntryTypes.includes(entryType));\n}\nexport function startPerformanceCollection(lifeCycle, configuration) {\n    retrieveInitialDocumentResourceTiming(function (timing) {\n        handleRumPerformanceEntries(lifeCycle, configuration, [timing]);\n    });\n    if (supportPerformanceObject()) {\n        var performanceEntries_1 = performance.getEntries();\n        // Because the performance entry list can be quite large\n        // delay the computation to prevent the SDK from blocking the main thread on init\n        setTimeout(function () { return handleRumPerformanceEntries(lifeCycle, configuration, performanceEntries_1); });\n    }\n    if (window.PerformanceObserver) {\n        var handlePerformanceEntryList_1 = monitor(function (entries) {\n            return handleRumPerformanceEntries(lifeCycle, configuration, entries.getEntries());\n        });\n        var mainEntries = ['resource', 'navigation', 'longtask', 'paint'];\n        var experimentalEntries = ['largest-contentful-paint', 'first-input', 'layout-shift'];\n        try {\n            // Experimental entries are not retrieved by performance.getEntries()\n            // use a single PerformanceObserver with buffered flag by type\n            // to get values that could happen before SDK init\n            experimentalEntries.forEach(function (type) {\n                var observer = new PerformanceObserver(handlePerformanceEntryList_1);\n                observer.observe({ type: type, buffered: true });\n            });\n        }\n        catch (e) {\n            // Some old browser versions (ex: chrome 67) don't support the PerformanceObserver type and buffered options\n            // In these cases, fallback to PerformanceObserver with entryTypes\n            mainEntries.push.apply(mainEntries, experimentalEntries);\n        }\n        var mainObserver = new PerformanceObserver(handlePerformanceEntryList_1);\n        mainObserver.observe({ entryTypes: mainEntries });\n        if (supportPerformanceObject() && 'addEventListener' in performance) {\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1559377\n            addEventListener(performance, 'resourcetimingbufferfull', function () {\n                performance.clearResourceTimings();\n            });\n        }\n    }\n    if (!supportPerformanceTimingEvent('navigation')) {\n        retrieveNavigationTiming(function (timing) {\n            handleRumPerformanceEntries(lifeCycle, configuration, [timing]);\n        });\n    }\n    if (!supportPerformanceTimingEvent('first-input')) {\n        retrieveFirstInputTiming(function (timing) {\n            handleRumPerformanceEntries(lifeCycle, configuration, [timing]);\n        });\n    }\n}\nexport function retrieveInitialDocumentResourceTiming(callback) {\n    runOnReadyState('interactive', function () {\n        var timing;\n        var forcedAttributes = {\n            entryType: 'resource',\n            initiatorType: FAKE_INITIAL_DOCUMENT,\n            traceId: getDocumentTraceId(document),\n        };\n        if (supportPerformanceTimingEvent('navigation') && performance.getEntriesByType('navigation').length > 0) {\n            var navigationEntry = performance.getEntriesByType('navigation')[0];\n            timing = assign(navigationEntry.toJSON(), forcedAttributes);\n        }\n        else {\n            var relativePerformanceTiming = computeRelativePerformanceTiming();\n            timing = assign(relativePerformanceTiming, {\n                decodedBodySize: 0,\n                duration: relativePerformanceTiming.responseEnd,\n                name: window.location.href,\n                startTime: 0,\n            }, forcedAttributes);\n        }\n        callback(timing);\n    });\n}\nfunction retrieveNavigationTiming(callback) {\n    function sendFakeTiming() {\n        callback(assign(computeRelativePerformanceTiming(), {\n            entryType: 'navigation',\n        }));\n    }\n    runOnReadyState('complete', function () {\n        // Send it a bit after the actual load event, so the \"loadEventEnd\" timing is accurate\n        setTimeout(sendFakeTiming);\n    });\n}\n/**\n * first-input timing entry polyfill based on\n * https://github.com/GoogleChrome/web-vitals/blob/master/src/lib/polyfills/firstInputPolyfill.ts\n */\nfunction retrieveFirstInputTiming(callback) {\n    var startTimeStamp = dateNow();\n    var timingSent = false;\n    var removeEventListeners = addEventListeners(window, [\"click\" /* DOM_EVENT.CLICK */, \"mousedown\" /* DOM_EVENT.MOUSE_DOWN */, \"keydown\" /* DOM_EVENT.KEY_DOWN */, \"touchstart\" /* DOM_EVENT.TOUCH_START */, \"pointerdown\" /* DOM_EVENT.POINTER_DOWN */], function (evt) {\n        // Only count cancelable events, which should trigger behavior important to the user.\n        if (!evt.cancelable) {\n            return;\n        }\n        // This timing will be used to compute the \"first Input delay\", which is the delta between\n        // when the system received the event (e.g. evt.timeStamp) and when it could run the callback\n        // (e.g. performance.now()).\n        var timing = {\n            entryType: 'first-input',\n            processingStart: relativeNow(),\n            startTime: evt.timeStamp,\n        };\n        if (evt.type === \"pointerdown\" /* DOM_EVENT.POINTER_DOWN */) {\n            sendTimingIfPointerIsNotCancelled(timing);\n        }\n        else {\n            sendTiming(timing);\n        }\n    }, { passive: true, capture: true }).stop;\n    /**\n     * Pointer events are a special case, because they can trigger main or compositor thread behavior.\n     * We differentiate these cases based on whether or not we see a pointercancel event, which are\n     * fired when we scroll. If we're scrolling we don't need to report input delay since FID excludes\n     * scrolling and pinch/zooming.\n     */\n    function sendTimingIfPointerIsNotCancelled(timing) {\n        addEventListeners(window, [\"pointerup\" /* DOM_EVENT.POINTER_UP */, \"pointercancel\" /* DOM_EVENT.POINTER_CANCEL */], function (event) {\n            if (event.type === \"pointerup\" /* DOM_EVENT.POINTER_UP */) {\n                sendTiming(timing);\n            }\n        }, { once: true });\n    }\n    function sendTiming(timing) {\n        if (!timingSent) {\n            timingSent = true;\n            removeEventListeners();\n            // In some cases the recorded delay is clearly wrong, e.g. it's negative or it's larger than\n            // the time between now and when the page was loaded.\n            // - https://github.com/GoogleChromeLabs/first-input-delay/issues/4\n            // - https://github.com/GoogleChromeLabs/first-input-delay/issues/6\n            // - https://github.com/GoogleChromeLabs/first-input-delay/issues/7\n            var delay = timing.processingStart - timing.startTime;\n            if (delay >= 0 && delay < dateNow() - startTimeStamp) {\n                callback(timing);\n            }\n        }\n    }\n}\nfunction computeRelativePerformanceTiming() {\n    var result = {};\n    var timing = performance.timing;\n    for (var key in timing) {\n        if (isNumber(timing[key])) {\n            var numberKey = key;\n            var timingElement = timing[numberKey];\n            result[numberKey] = timingElement === 0 ? 0 : getRelativeTime(timingElement);\n        }\n    }\n    return result;\n}\nfunction handleRumPerformanceEntries(lifeCycle, configuration, entries) {\n    var rumPerformanceEntries = entries.filter(function (entry) {\n        return entry.entryType === 'resource' ||\n            entry.entryType === 'navigation' ||\n            entry.entryType === 'paint' ||\n            entry.entryType === 'longtask' ||\n            entry.entryType === 'largest-contentful-paint' ||\n            entry.entryType === 'first-input' ||\n            entry.entryType === 'layout-shift';\n    });\n    var rumAllowedPerformanceEntries = rumPerformanceEntries.filter(function (entry) { return !isIncompleteNavigation(entry) && !isForbiddenResource(configuration, entry); });\n    if (rumAllowedPerformanceEntries.length) {\n        lifeCycle.notify(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, rumAllowedPerformanceEntries);\n    }\n}\nfunction isIncompleteNavigation(entry) {\n    return entry.entryType === 'navigation' && entry.loadEventEnd <= 0;\n}\nfunction isForbiddenResource(configuration, entry) {\n    return entry.entryType === 'resource' && !isAllowedRequestUrl(configuration, entry.name);\n}\n","import { setTimeout } from '../../tools/timer';\nimport { ErrorSource } from '../error/error';\nimport { clocksNow, ONE_MINUTE } from '../../tools/utils/timeUtils';\nexport function createEventRateLimiter(eventType, limit, onLimitReached) {\n    var eventCount = 0;\n    var allowNextEvent = false;\n    return {\n        isLimitReached: function () {\n            if (eventCount === 0) {\n                setTimeout(function () {\n                    eventCount = 0;\n                }, ONE_MINUTE);\n            }\n            eventCount += 1;\n            if (eventCount <= limit || allowNextEvent) {\n                allowNextEvent = false;\n                return false;\n            }\n            if (eventCount === limit + 1) {\n                allowNextEvent = true;\n                try {\n                    onLimitReached({\n                        message: \"Reached max number of \".concat(eventType, \"s by minute: \").concat(limit),\n                        source: ErrorSource.AGENT,\n                        startClocks: clocksNow(),\n                    });\n                }\n                finally {\n                    allowNextEvent = false;\n                }\n            }\n            return true;\n        },\n    };\n}\n","import { ExperimentalFeature, isExperimentalFeatureEnabled, sanitize, deepClone, getType } from '@datadog/browser-core';\n/**\n * Current limitation:\n * - field path do not support array, 'a.b.c' only\n */\nexport function limitModification(object, modifiableFieldPaths, modifier) {\n    var clone = deepClone(object);\n    var result = modifier(clone);\n    modifiableFieldPaths.forEach(function (path) {\n        var originalValue = get(object, path);\n        var newValue = get(clone, path);\n        var originalType = getType(originalValue);\n        var newType = getType(newValue);\n        if (newType === originalType) {\n            set(object, path, isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS) ? sanitize(newValue) : newValue);\n        }\n        else if (originalType === 'object' && (newType === 'undefined' || newType === 'null')) {\n            set(object, path, {});\n        }\n    });\n    return result;\n}\nfunction get(object, path) {\n    var current = object;\n    for (var _i = 0, _a = path.split('.'); _i < _a.length; _i++) {\n        var field = _a[_i];\n        if (!isValidObjectContaining(current, field)) {\n            return;\n        }\n        current = current[field];\n    }\n    return current;\n}\nfunction set(object, path, value) {\n    var current = object;\n    var fields = path.split('.');\n    for (var i = 0; i < fields.length; i += 1) {\n        var field = fields[i];\n        if (!isValidObjectContaining(current, field)) {\n            return;\n        }\n        if (i !== fields.length - 1) {\n            current = current[field];\n        }\n        else {\n            current[field] = value;\n        }\n    }\n}\nfunction isValidObjectContaining(object, field) {\n    return typeof object === 'object' && object !== null && Object.prototype.hasOwnProperty.call(object, field);\n}\n","import { combine, isEmptyObject, timeStampNow, currentDrift, display, createEventRateLimiter, canUseEventBridge, } from '@datadog/browser-core';\nimport { getSyntheticsContext } from './contexts/syntheticsContext';\nimport { getCiTestContext } from './contexts/ciTestContext';\nimport { getDisplayContext } from './contexts/displayContext';\nimport { limitModification } from './limitModification';\nvar VIEW_EVENTS_MODIFIABLE_FIELD_PATHS = [\n    // Fields with sensitive data\n    'view.url',\n    'view.referrer',\n    'action.target.name',\n    'error.message',\n    'error.stack',\n    'error.resource.url',\n    'resource.url',\n];\nvar OTHER_EVENTS_MODIFIABLE_FIELD_PATHS = VIEW_EVENTS_MODIFIABLE_FIELD_PATHS.concat([\n    // User-customizable field\n    'context',\n]);\nexport function startRumAssembly(configuration, lifeCycle, sessionManager, viewContexts, urlContexts, actionContexts, buildCommonContext, reportError) {\n    var _a;\n    var eventRateLimiters = (_a = {},\n        _a[\"error\" /* RumEventType.ERROR */] = createEventRateLimiter(\"error\" /* RumEventType.ERROR */, configuration.eventRateLimiterThreshold, reportError),\n        _a[\"action\" /* RumEventType.ACTION */] = createEventRateLimiter(\"action\" /* RumEventType.ACTION */, configuration.eventRateLimiterThreshold, reportError),\n        _a);\n    var syntheticsContext = getSyntheticsContext();\n    var ciTestContext = getCiTestContext();\n    lifeCycle.subscribe(10 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, function (_a) {\n        var startTime = _a.startTime, rawRumEvent = _a.rawRumEvent, domainContext = _a.domainContext, savedCommonContext = _a.savedCommonContext, customerContext = _a.customerContext;\n        var viewContext = viewContexts.findView(startTime);\n        var urlContext = urlContexts.findUrl(startTime);\n        // allow to send events if the session was tracked when they start\n        // except for views which are continuously updated\n        // TODO: stop sending view updates when session is expired\n        var session = sessionManager.findTrackedSession(rawRumEvent.type !== \"view\" /* RumEventType.VIEW */ ? startTime : undefined);\n        if (session && viewContext && urlContext) {\n            var commonContext = savedCommonContext || buildCommonContext();\n            var actionId = actionContexts.findActionId(startTime);\n            var rumContext = {\n                _dd: {\n                    format_version: 2,\n                    drift: currentDrift(),\n                    session: {\n                        plan: session.plan,\n                    },\n                    browser_sdk_version: canUseEventBridge() ? \"4.39.0\" : undefined,\n                },\n                application: {\n                    id: configuration.applicationId,\n                },\n                date: timeStampNow(),\n                service: viewContext.service || configuration.service,\n                version: viewContext.version || configuration.version,\n                source: 'browser',\n                session: {\n                    id: session.id,\n                    type: syntheticsContext ? \"synthetics\" /* SessionType.SYNTHETICS */ : ciTestContext ? \"ci_test\" /* SessionType.CI_TEST */ : \"user\" /* SessionType.USER */,\n                },\n                view: {\n                    id: viewContext.id,\n                    name: viewContext.name,\n                    url: urlContext.url,\n                    referrer: urlContext.referrer,\n                },\n                action: needToAssembleWithAction(rawRumEvent) && actionId ? { id: actionId } : undefined,\n                synthetics: syntheticsContext,\n                ci_test: ciTestContext,\n                display: getDisplayContext(),\n            };\n            var serverRumEvent = combine(rumContext, rawRumEvent);\n            serverRumEvent.context = combine(commonContext.context, customerContext);\n            if (!('has_replay' in serverRumEvent.session)) {\n                ;\n                serverRumEvent.session.has_replay = commonContext.hasReplay;\n            }\n            if (!isEmptyObject(commonContext.user)) {\n                ;\n                serverRumEvent.usr = commonContext.user;\n            }\n            if (shouldSend(serverRumEvent, configuration.beforeSend, domainContext, eventRateLimiters)) {\n                if (isEmptyObject(serverRumEvent.context)) {\n                    delete serverRumEvent.context;\n                }\n                lifeCycle.notify(11 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, serverRumEvent);\n            }\n        }\n    });\n}\nfunction shouldSend(event, beforeSend, domainContext, eventRateLimiters) {\n    var _a;\n    if (beforeSend) {\n        var result = limitModification(event, event.type === \"view\" /* RumEventType.VIEW */ ? VIEW_EVENTS_MODIFIABLE_FIELD_PATHS : OTHER_EVENTS_MODIFIABLE_FIELD_PATHS, function (event) { return beforeSend(event, domainContext); });\n        if (result === false && event.type !== \"view\" /* RumEventType.VIEW */) {\n            return false;\n        }\n        if (result === false) {\n            display.warn(\"Can't dismiss view events using beforeSend!\");\n        }\n    }\n    var rateLimitReached = (_a = eventRateLimiters[event.type]) === null || _a === void 0 ? void 0 : _a.isLimitReached();\n    return !rateLimitReached;\n}\nfunction needToAssembleWithAction(event) {\n    return [\"error\" /* RumEventType.ERROR */, \"resource\" /* RumEventType.RESOURCE */, \"long_task\" /* RumEventType.LONG_TASK */].indexOf(event.type) !== -1;\n}\n","import { getSyntheticsResultId, getSyntheticsTestId, willSyntheticsInjectRum } from '@datadog/browser-core';\nexport function getSyntheticsContext() {\n    var testId = getSyntheticsTestId();\n    var resultId = getSyntheticsResultId();\n    if (testId && resultId) {\n        return {\n            test_id: testId,\n            result_id: resultId,\n            injected: willSyntheticsInjectRum(),\n        };\n    }\n}\n","export function getCiTestContext() {\n    var _a;\n    var testExecutionId = (_a = window.Cypress) === null || _a === void 0 ? void 0 : _a.env('traceId');\n    if (typeof testExecutionId === 'string') {\n        return {\n            test_execution_id: testExecutionId,\n        };\n    }\n}\n","import { addDuration, addEventListener, elapsed, relativeNow, toServerDuration } from '@datadog/browser-core';\n// Arbitrary value to cap number of element mostly for backend & to save bandwidth\nexport var MAX_NUMBER_OF_SELECTABLE_FOREGROUND_PERIODS = 500;\n// Arbitrary value to cap number of element mostly for memory consumption in the browser\nexport var MAX_NUMBER_OF_STORED_FOREGROUND_PERIODS = 2500;\nvar foregroundPeriods = [];\nexport function startForegroundContexts() {\n    if (document.hasFocus()) {\n        addNewForegroundPeriod();\n    }\n    var stopForegroundTracking = trackFocus(addNewForegroundPeriod).stop;\n    var stopBlurTracking = trackBlur(closeForegroundPeriod).stop;\n    return {\n        isInForegroundAt: isInForegroundAt,\n        selectInForegroundPeriodsFor: selectInForegroundPeriodsFor,\n        stop: function () {\n            foregroundPeriods = [];\n            stopForegroundTracking();\n            stopBlurTracking();\n        },\n    };\n}\nexport function addNewForegroundPeriod() {\n    if (foregroundPeriods.length > MAX_NUMBER_OF_STORED_FOREGROUND_PERIODS) {\n        return;\n    }\n    var currentForegroundPeriod = foregroundPeriods[foregroundPeriods.length - 1];\n    var now = relativeNow();\n    if (currentForegroundPeriod !== undefined && currentForegroundPeriod.end === undefined) {\n        return;\n    }\n    foregroundPeriods.push({\n        start: now,\n    });\n}\nexport function closeForegroundPeriod() {\n    if (foregroundPeriods.length === 0) {\n        return;\n    }\n    var currentForegroundPeriod = foregroundPeriods[foregroundPeriods.length - 1];\n    var now = relativeNow();\n    if (currentForegroundPeriod.end !== undefined) {\n        return;\n    }\n    currentForegroundPeriod.end = now;\n}\nfunction trackFocus(onFocusChange) {\n    return addEventListener(window, \"focus\" /* DOM_EVENT.FOCUS */, function (event) {\n        if (!event.isTrusted) {\n            return;\n        }\n        onFocusChange();\n    });\n}\nfunction trackBlur(onBlurChange) {\n    return addEventListener(window, \"blur\" /* DOM_EVENT.BLUR */, function (event) {\n        if (!event.isTrusted) {\n            return;\n        }\n        onBlurChange();\n    });\n}\nfunction isInForegroundAt(startTime) {\n    for (var i = foregroundPeriods.length - 1; i >= 0; i--) {\n        var foregroundPeriod = foregroundPeriods[i];\n        if (foregroundPeriod.end !== undefined && startTime > foregroundPeriod.end) {\n            break;\n        }\n        if (startTime > foregroundPeriod.start &&\n            (foregroundPeriod.end === undefined || startTime < foregroundPeriod.end)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction selectInForegroundPeriodsFor(eventStartTime, duration) {\n    var eventEndTime = addDuration(eventStartTime, duration);\n    var filteredForegroundPeriods = [];\n    var earliestIndex = Math.max(0, foregroundPeriods.length - MAX_NUMBER_OF_SELECTABLE_FOREGROUND_PERIODS);\n    for (var i = foregroundPeriods.length - 1; i >= earliestIndex; i--) {\n        var foregroundPeriod = foregroundPeriods[i];\n        if (foregroundPeriod.end !== undefined && eventStartTime > foregroundPeriod.end) {\n            // event starts after the end of the current focus period\n            // since the array is sorted, we can stop looking for foreground periods\n            break;\n        }\n        if (eventEndTime < foregroundPeriod.start) {\n            // event ends before the start of the current focus period\n            // continue to previous one\n            continue;\n        }\n        var startTime = eventStartTime > foregroundPeriod.start ? eventStartTime : foregroundPeriod.start;\n        var startDuration = elapsed(eventStartTime, startTime);\n        var endTime = foregroundPeriod.end === undefined || eventEndTime < foregroundPeriod.end ? eventEndTime : foregroundPeriod.end;\n        var endDuration = elapsed(startTime, endTime);\n        filteredForegroundPeriods.unshift({\n            start: toServerDuration(startDuration),\n            duration: toServerDuration(endDuration),\n        });\n    }\n    return filteredForegroundPeriods;\n}\n","var LifeCycle = /** @class */ (function () {\n    function LifeCycle() {\n        this.callbacks = {};\n    }\n    LifeCycle.prototype.notify = function (eventType, data) {\n        var eventCallbacks = this.callbacks[eventType];\n        if (eventCallbacks) {\n            eventCallbacks.forEach(function (callback) { return callback(data); });\n        }\n    };\n    LifeCycle.prototype.subscribe = function (eventType, callback) {\n        var _this = this;\n        if (!this.callbacks[eventType]) {\n            this.callbacks[eventType] = [];\n        }\n        this.callbacks[eventType].push(callback);\n        return {\n            unsubscribe: function () {\n                _this.callbacks[eventType] = _this.callbacks[eventType].filter(function (other) { return callback !== other; });\n            },\n        };\n    };\n    return LifeCycle;\n}());\nexport { LifeCycle };\n","import { instrumentMethodAndCallOriginal } from '../tools/instrumentMethod';\nimport { Observable } from '../tools/observable';\nimport { elapsed, relativeNow, clocksNow, timeStampNow } from '../tools/utils/timeUtils';\nimport { normalizeUrl } from '../tools/utils/urlPolyfill';\nimport { shallowClone } from '../tools/utils/objectUtils';\nimport { addEventListener } from './addEventListener';\nvar xhrObservable;\nvar xhrContexts = new WeakMap();\nexport function initXhrObservable() {\n    if (!xhrObservable) {\n        xhrObservable = createXhrObservable();\n    }\n    return xhrObservable;\n}\nfunction createXhrObservable() {\n    var observable = new Observable(function () {\n        var stopInstrumentingStart = instrumentMethodAndCallOriginal(XMLHttpRequest.prototype, 'open', {\n            before: openXhr,\n        }).stop;\n        var stopInstrumentingSend = instrumentMethodAndCallOriginal(XMLHttpRequest.prototype, 'send', {\n            before: function () {\n                sendXhr.call(this, observable);\n            },\n        }).stop;\n        var stopInstrumentingAbort = instrumentMethodAndCallOriginal(XMLHttpRequest.prototype, 'abort', {\n            before: abortXhr,\n        }).stop;\n        return function () {\n            stopInstrumentingStart();\n            stopInstrumentingSend();\n            stopInstrumentingAbort();\n        };\n    });\n    return observable;\n}\nfunction openXhr(method, url) {\n    xhrContexts.set(this, {\n        state: 'open',\n        method: method,\n        url: normalizeUrl(String(url)),\n    });\n}\nfunction sendXhr(observable) {\n    var _this = this;\n    var context = xhrContexts.get(this);\n    if (!context) {\n        return;\n    }\n    var startContext = context;\n    startContext.state = 'start';\n    startContext.startTime = relativeNow();\n    startContext.startClocks = clocksNow();\n    startContext.isAborted = false;\n    startContext.xhr = this;\n    var hasBeenReported = false;\n    var stopInstrumentingOnReadyStateChange = instrumentMethodAndCallOriginal(this, 'onreadystatechange', {\n        before: function () {\n            if (this.readyState === XMLHttpRequest.DONE) {\n                // Try to report the XHR as soon as possible, because the XHR may be mutated by the\n                // application during a future event. For example, Angular is calling .abort() on\n                // completed requests during a onreadystatechange event, so the status becomes '0'\n                // before the request is collected.\n                onEnd();\n            }\n        },\n    }).stop;\n    var onEnd = function () {\n        unsubscribeLoadEndListener();\n        stopInstrumentingOnReadyStateChange();\n        if (hasBeenReported) {\n            return;\n        }\n        hasBeenReported = true;\n        var completeContext = context;\n        completeContext.state = 'complete';\n        completeContext.duration = elapsed(startContext.startClocks.timeStamp, timeStampNow());\n        completeContext.status = _this.status;\n        observable.notify(shallowClone(completeContext));\n    };\n    var unsubscribeLoadEndListener = addEventListener(this, 'loadend', onEnd).stop;\n    observable.notify(startContext);\n}\nfunction abortXhr() {\n    var context = xhrContexts.get(this);\n    if (context) {\n        context.isAborted = true;\n    }\n}\n","import { ONE_HOUR, ONE_MINUTE } from '../../tools/utils/timeUtils';\nexport var SESSION_TIME_OUT_DELAY = 4 * ONE_HOUR;\nexport var SESSION_EXPIRATION_DELAY = 15 * ONE_MINUTE;\n","import { setInterval, clearInterval } from './timer';\nimport { relativeNow, ONE_MINUTE } from './utils/timeUtils';\nvar END_OF_TIMES = Infinity;\nexport var CLEAR_OLD_VALUES_INTERVAL = ONE_MINUTE;\n/**\n * Store and keep track of values spans. This whole class assumes that values are added in\n * chronological order (i.e. all entries have an increasing start time).\n */\nvar ValueHistory = /** @class */ (function () {\n    function ValueHistory(expireDelay) {\n        var _this = this;\n        this.expireDelay = expireDelay;\n        this.entries = [];\n        this.clearOldValuesInterval = setInterval(function () { return _this.clearOldValues(); }, CLEAR_OLD_VALUES_INTERVAL);\n    }\n    /**\n     * Add a value to the history associated with a start time. Returns a reference to this newly\n     * added entry that can be removed or closed.\n     */\n    ValueHistory.prototype.add = function (value, startTime) {\n        var _this = this;\n        var entry = {\n            value: value,\n            startTime: startTime,\n            endTime: END_OF_TIMES,\n            remove: function () {\n                var index = _this.entries.indexOf(entry);\n                if (index >= 0) {\n                    _this.entries.splice(index, 1);\n                }\n            },\n            close: function (endTime) {\n                entry.endTime = endTime;\n            },\n        };\n        this.entries.unshift(entry);\n        return entry;\n    };\n    /**\n     * Return the latest value that was active during `startTime`, or the currently active value\n     * if no `startTime` is provided. This method assumes that entries are not overlapping.\n     */\n    ValueHistory.prototype.find = function (startTime) {\n        if (startTime === void 0) { startTime = END_OF_TIMES; }\n        for (var _i = 0, _a = this.entries; _i < _a.length; _i++) {\n            var entry = _a[_i];\n            if (entry.startTime <= startTime) {\n                if (startTime <= entry.endTime) {\n                    return entry.value;\n                }\n                break;\n            }\n        }\n    };\n    /**\n     * Helper function to close the currently active value, if any. This method assumes that entries\n     * are not overlapping.\n     */\n    ValueHistory.prototype.closeActive = function (endTime) {\n        var latestEntry = this.entries[0];\n        if (latestEntry && latestEntry.endTime === END_OF_TIMES) {\n            latestEntry.close(endTime);\n        }\n    };\n    /**\n     * Return all values that were active during `startTime`, or all currently active values if no\n     * `startTime` is provided.\n     */\n    ValueHistory.prototype.findAll = function (startTime) {\n        if (startTime === void 0) { startTime = END_OF_TIMES; }\n        return this.entries\n            .filter(function (entry) { return entry.startTime <= startTime && startTime <= entry.endTime; })\n            .map(function (entry) { return entry.value; });\n    };\n    /**\n     * Remove all entries from this collection.\n     */\n    ValueHistory.prototype.reset = function () {\n        this.entries = [];\n    };\n    /**\n     * Stop internal garbage collection of past entries.\n     */\n    ValueHistory.prototype.stop = function () {\n        clearInterval(this.clearOldValuesInterval);\n    };\n    ValueHistory.prototype.clearOldValues = function () {\n        var oldTimeThreshold = relativeNow() - this.expireDelay;\n        while (this.entries.length > 0 && this.entries[this.entries.length - 1].endTime < oldTimeThreshold) {\n            this.entries.pop();\n        }\n    };\n    return ValueHistory;\n}());\nexport { ValueHistory };\n","import { SESSION_TIME_OUT_DELAY, ValueHistory } from '@datadog/browser-core';\nexport var VIEW_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY;\nexport function startViewContexts(lifeCycle) {\n    var viewContextHistory = new ValueHistory(VIEW_CONTEXT_TIME_OUT_DELAY);\n    lifeCycle.subscribe(2 /* LifeCycleEventType.VIEW_CREATED */, function (view) {\n        viewContextHistory.add(buildViewContext(view), view.startClocks.relative);\n    });\n    lifeCycle.subscribe(4 /* LifeCycleEventType.VIEW_ENDED */, function (_a) {\n        var endClocks = _a.endClocks;\n        viewContextHistory.closeActive(endClocks.relative);\n    });\n    lifeCycle.subscribe(8 /* LifeCycleEventType.SESSION_RENEWED */, function () {\n        viewContextHistory.reset();\n    });\n    function buildViewContext(view) {\n        return {\n            service: view.service,\n            version: view.version,\n            id: view.id,\n            name: view.name,\n            startClocks: view.startClocks,\n        };\n    }\n    return {\n        findView: function (startTime) { return viewContextHistory.find(startTime); },\n        stop: function () {\n            viewContextHistory.stop();\n        },\n    };\n}\n","import { setTimeout } from './timer';\nimport { callMonitored } from './monitor';\nimport { noop } from './utils/functionUtils';\nexport function instrumentMethod(object, method, instrumentationFactory) {\n    var original = object[method];\n    var instrumentation = instrumentationFactory(original);\n    var instrumentationWrapper = function () {\n        if (typeof instrumentation !== 'function') {\n            return undefined;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return instrumentation.apply(this, arguments);\n    };\n    object[method] = instrumentationWrapper;\n    return {\n        stop: function () {\n            if (object[method] === instrumentationWrapper) {\n                object[method] = original;\n            }\n            else {\n                instrumentation = original;\n            }\n        },\n    };\n}\nexport function instrumentMethodAndCallOriginal(object, method, _a) {\n    var before = _a.before, after = _a.after;\n    return instrumentMethod(object, method, function (original) {\n        return function () {\n            var args = arguments;\n            var result;\n            if (before) {\n                callMonitored(before, this, args);\n            }\n            if (typeof original === 'function') {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n                result = original.apply(this, args);\n            }\n            if (after) {\n                callMonitored(after, this, args);\n            }\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n            return result;\n        };\n    });\n}\nexport function instrumentSetter(object, property, after) {\n    var originalDescriptor = Object.getOwnPropertyDescriptor(object, property);\n    if (!originalDescriptor || !originalDescriptor.set || !originalDescriptor.configurable) {\n        return { stop: noop };\n    }\n    var instrumentation = function (thisObject, value) {\n        // put hooked setter into event loop to avoid of set latency\n        setTimeout(function () {\n            after(thisObject, value);\n        }, 0);\n    };\n    var instrumentationWrapper = function (value) {\n        originalDescriptor.set.call(this, value);\n        instrumentation(this, value);\n    };\n    Object.defineProperty(object, property, {\n        set: instrumentationWrapper,\n    });\n    return {\n        stop: function () {\n            var _a;\n            if (((_a = Object.getOwnPropertyDescriptor(object, property)) === null || _a === void 0 ? void 0 : _a.set) === instrumentationWrapper) {\n                Object.defineProperty(object, property, originalDescriptor);\n            }\n            else {\n                instrumentation = noop;\n            }\n        },\n    };\n}\n","import { instrumentMethod } from '../tools/instrumentMethod';\nimport { callMonitored, monitor } from '../tools/monitor';\nimport { Observable } from '../tools/observable';\nimport { clocksNow } from '../tools/utils/timeUtils';\nimport { normalizeUrl } from '../tools/utils/urlPolyfill';\nvar fetchObservable;\nexport function initFetchObservable() {\n    if (!fetchObservable) {\n        fetchObservable = createFetchObservable();\n    }\n    return fetchObservable;\n}\nfunction createFetchObservable() {\n    var observable = new Observable(function () {\n        if (!window.fetch) {\n            return;\n        }\n        var stop = instrumentMethod(window, 'fetch', function (originalFetch) {\n            return function (input, init) {\n                var responsePromise;\n                var context = callMonitored(beforeSend, null, [observable, input, init]);\n                if (context) {\n                    responsePromise = originalFetch.call(this, context.input, context.init);\n                    callMonitored(afterSend, null, [observable, responsePromise, context]);\n                }\n                else {\n                    responsePromise = originalFetch.call(this, input, init);\n                }\n                return responsePromise;\n            };\n        }).stop;\n        return stop;\n    });\n    return observable;\n}\nfunction beforeSend(observable, input, init) {\n    var method = (init && init.method) || (input instanceof Request && input.method) || 'GET';\n    var url = input instanceof Request ? input.url : normalizeUrl(String(input));\n    var startClocks = clocksNow();\n    var context = {\n        state: 'start',\n        init: init,\n        input: input,\n        method: method,\n        startClocks: startClocks,\n        url: url,\n    };\n    observable.notify(context);\n    return context;\n}\nfunction afterSend(observable, responsePromise, startContext) {\n    var reportFetch = function (response) {\n        var context = startContext;\n        context.state = 'resolve';\n        if ('stack' in response || response instanceof Error) {\n            context.status = 0;\n            context.isAborted = response instanceof DOMException && response.code === DOMException.ABORT_ERR;\n            context.error = response;\n        }\n        else if ('status' in response) {\n            context.response = response;\n            context.responseType = response.type;\n            context.status = response.status;\n            context.isAborted = false;\n        }\n        observable.notify(context);\n    };\n    responsePromise.then(monitor(reportFetch), monitor(reportFetch));\n}\n","export function isServerError(status) {\n    return status >= 500;\n}\nexport function tryToClone(response) {\n    try {\n        return response.clone();\n    }\n    catch (e) {\n        // clone can throw if the response has already been used by another instrumentation or is disturbed\n        return;\n    }\n}\n","import { monitor } from './monitor';\nimport { noop } from './utils/functionUtils';\n/**\n * Read bytes from a ReadableStream until at least `limit` bytes have been read (or until the end of\n * the stream). The callback is invoked with the at most `limit` bytes, and indicates that the limit\n * has been exceeded if more bytes were available.\n */\nexport function readBytesFromStream(stream, callback, options) {\n    var reader = stream.getReader();\n    var chunks = [];\n    var readBytesCount = 0;\n    readMore();\n    function readMore() {\n        reader.read().then(monitor(function (result) {\n            if (result.done) {\n                onDone();\n                return;\n            }\n            if (options.collectStreamBody) {\n                chunks.push(result.value);\n            }\n            readBytesCount += result.value.length;\n            if (readBytesCount > options.bytesLimit) {\n                onDone();\n            }\n            else {\n                readMore();\n            }\n        }), monitor(function (error) { return callback(error); }));\n    }\n    function onDone() {\n        reader.cancel().catch(\n        // we don't care if cancel fails, but we still need to catch the error to avoid reporting it\n        // as an unhandled rejection\n        noop);\n        var bytes;\n        var limitExceeded;\n        if (options.collectStreamBody) {\n            var completeBuffer_1;\n            if (chunks.length === 1) {\n                // optimization: if the response is small enough to fit in a single buffer (provided by the browser), just\n                // use it directly.\n                completeBuffer_1 = chunks[0];\n            }\n            else {\n                // else, we need to copy buffers into a larger buffer to concatenate them.\n                completeBuffer_1 = new Uint8Array(readBytesCount);\n                var offset_1 = 0;\n                chunks.forEach(function (chunk) {\n                    completeBuffer_1.set(chunk, offset_1);\n                    offset_1 += chunk.length;\n                });\n            }\n            bytes = completeBuffer_1.slice(0, options.bytesLimit);\n            limitExceeded = completeBuffer_1.length > options.bytesLimit;\n        }\n        callback(undefined, bytes, limitExceeded);\n    }\n}\n","import { initFetchObservable, initXhrObservable, readBytesFromStream, elapsed, timeStampNow, tryToClone, } from '@datadog/browser-core';\nimport { isAllowedRequestUrl } from './rumEventsCollection/resource/resourceUtils';\nimport { startTracer } from './tracing/tracer';\nvar nextRequestIndex = 1;\nexport function startRequestCollection(lifeCycle, configuration, sessionManager) {\n    var tracer = startTracer(configuration, sessionManager);\n    trackXhr(lifeCycle, configuration, tracer);\n    trackFetch(lifeCycle, configuration, tracer);\n}\nexport function trackXhr(lifeCycle, configuration, tracer) {\n    var subscription = initXhrObservable().subscribe(function (rawContext) {\n        var context = rawContext;\n        if (!isAllowedRequestUrl(configuration, context.url)) {\n            return;\n        }\n        switch (context.state) {\n            case 'start':\n                tracer.traceXhr(context, context.xhr);\n                context.requestIndex = getNextRequestIndex();\n                lifeCycle.notify(5 /* LifeCycleEventType.REQUEST_STARTED */, {\n                    requestIndex: context.requestIndex,\n                    url: context.url,\n                });\n                break;\n            case 'complete':\n                tracer.clearTracingIfNeeded(context);\n                lifeCycle.notify(6 /* LifeCycleEventType.REQUEST_COMPLETED */, {\n                    duration: context.duration,\n                    method: context.method,\n                    requestIndex: context.requestIndex,\n                    spanId: context.spanId,\n                    startClocks: context.startClocks,\n                    status: context.status,\n                    traceId: context.traceId,\n                    traceSampled: context.traceSampled,\n                    type: \"xhr\" /* RequestType.XHR */,\n                    url: context.url,\n                    xhr: context.xhr,\n                });\n                break;\n        }\n    });\n    return { stop: function () { return subscription.unsubscribe(); } };\n}\nexport function trackFetch(lifeCycle, configuration, tracer) {\n    var subscription = initFetchObservable().subscribe(function (rawContext) {\n        var context = rawContext;\n        if (!isAllowedRequestUrl(configuration, context.url)) {\n            return;\n        }\n        switch (context.state) {\n            case 'start':\n                tracer.traceFetch(context);\n                context.requestIndex = getNextRequestIndex();\n                lifeCycle.notify(5 /* LifeCycleEventType.REQUEST_STARTED */, {\n                    requestIndex: context.requestIndex,\n                    url: context.url,\n                });\n                break;\n            case 'resolve':\n                waitForResponseToComplete(context, function (duration) {\n                    tracer.clearTracingIfNeeded(context);\n                    lifeCycle.notify(6 /* LifeCycleEventType.REQUEST_COMPLETED */, {\n                        duration: duration,\n                        method: context.method,\n                        requestIndex: context.requestIndex,\n                        responseType: context.responseType,\n                        spanId: context.spanId,\n                        startClocks: context.startClocks,\n                        status: context.status,\n                        traceId: context.traceId,\n                        traceSampled: context.traceSampled,\n                        type: \"fetch\" /* RequestType.FETCH */,\n                        url: context.url,\n                        response: context.response,\n                        init: context.init,\n                        input: context.input,\n                    });\n                });\n                break;\n        }\n    });\n    return { stop: function () { return subscription.unsubscribe(); } };\n}\nfunction getNextRequestIndex() {\n    var result = nextRequestIndex;\n    nextRequestIndex += 1;\n    return result;\n}\nfunction waitForResponseToComplete(context, callback) {\n    var clonedResponse = context.response && tryToClone(context.response);\n    if (!clonedResponse || !clonedResponse.body) {\n        // do not try to wait for the response if the clone failed, fetch error or null body\n        callback(elapsed(context.startClocks.timeStamp, timeStampNow()));\n    }\n    else {\n        readBytesFromStream(clonedResponse.body, function () {\n            callback(elapsed(context.startClocks.timeStamp, timeStampNow()));\n        }, {\n            bytesLimit: Number.POSITIVE_INFINITY,\n            collectStreamBody: false,\n        });\n    }\n}\n","import { noop } from '@datadog/browser-core';\nexport function trackEventCounts(_a) {\n    var lifeCycle = _a.lifeCycle, isChildEvent = _a.isChildEvent, _b = _a.onChange, callback = _b === void 0 ? noop : _b;\n    var eventCounts = {\n        errorCount: 0,\n        longTaskCount: 0,\n        resourceCount: 0,\n        actionCount: 0,\n        frustrationCount: 0,\n    };\n    var subscription = lifeCycle.subscribe(11 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (event) {\n        if (event.type === 'view' || !isChildEvent(event)) {\n            return;\n        }\n        switch (event.type) {\n            case \"error\" /* RumEventType.ERROR */:\n                eventCounts.errorCount += 1;\n                callback();\n                break;\n            case \"action\" /* RumEventType.ACTION */:\n                eventCounts.actionCount += 1;\n                if (event.action.frustration) {\n                    eventCounts.frustrationCount += event.action.frustration.type.length;\n                }\n                callback();\n                break;\n            case \"long_task\" /* RumEventType.LONG_TASK */:\n                eventCounts.longTaskCount += 1;\n                callback();\n                break;\n            case \"resource\" /* RumEventType.RESOURCE */:\n                eventCounts.resourceCount += 1;\n                callback();\n                break;\n        }\n    });\n    return {\n        stop: function () {\n            subscription.unsubscribe();\n        },\n        eventCounts: eventCounts,\n    };\n}\n","import { instrumentMethodAndCallOriginal, matchList, monitor, Observable, timeStampNow, setTimeout, clearTimeout, } from '@datadog/browser-core';\n// Delay to wait for a page activity to validate the tracking process\nexport var PAGE_ACTIVITY_VALIDATION_DELAY = 100;\n// Delay to wait after a page activity to end the tracking process\nexport var PAGE_ACTIVITY_END_DELAY = 100;\n/**\n * Wait for the page activity end\n *\n * Detection lifecycle:\n * ```\n *                        Wait page activity end\n *              .-------------------'--------------------.\n *              v                                        v\n *     [Wait for a page activity ]          [Wait for a maximum duration]\n *     [timeout: VALIDATION_DELAY]          [  timeout: maxDuration     ]\n *          /                  \\                           |\n *         v                    v                          |\n *  [No page activity]   [Page activity]                   |\n *         |                   |,----------------------.   |\n *         v                   v                       |   |\n *     (Discard)     [Wait for a page activity]        |   |\n *                   [   timeout: END_DELAY   ]        |   |\n *                       /                \\            |   |\n *                      v                  v           |   |\n *             [No page activity]    [Page activity]   |   |\n *                      |                 |            |   |\n *                      |                 '------------'   |\n *                      '-----------. ,--------------------'\n *                                   v\n *                                 (End)\n * ```\n *\n * Note: by assuming that maxDuration is greater than VALIDATION_DELAY, we are sure that if the\n * process is still alive after maxDuration, it has been validated.\n */\nexport function waitPageActivityEnd(lifeCycle, domMutationObservable, configuration, pageActivityEndCallback, maxDuration) {\n    var pageActivityObservable = createPageActivityObservable(lifeCycle, domMutationObservable, configuration);\n    return doWaitPageActivityEnd(pageActivityObservable, pageActivityEndCallback, maxDuration);\n}\nexport function doWaitPageActivityEnd(pageActivityObservable, pageActivityEndCallback, maxDuration) {\n    var pageActivityEndTimeoutId;\n    var hasCompleted = false;\n    var validationTimeoutId = setTimeout(monitor(function () { return complete({ hadActivity: false }); }), PAGE_ACTIVITY_VALIDATION_DELAY);\n    var maxDurationTimeoutId = maxDuration &&\n        setTimeout(monitor(function () { return complete({ hadActivity: true, end: timeStampNow() }); }), maxDuration);\n    var pageActivitySubscription = pageActivityObservable.subscribe(function (_a) {\n        var isBusy = _a.isBusy;\n        clearTimeout(validationTimeoutId);\n        clearTimeout(pageActivityEndTimeoutId);\n        var lastChangeTime = timeStampNow();\n        if (!isBusy) {\n            pageActivityEndTimeoutId = setTimeout(monitor(function () { return complete({ hadActivity: true, end: lastChangeTime }); }), PAGE_ACTIVITY_END_DELAY);\n        }\n    });\n    var stop = function () {\n        hasCompleted = true;\n        clearTimeout(validationTimeoutId);\n        clearTimeout(pageActivityEndTimeoutId);\n        clearTimeout(maxDurationTimeoutId);\n        pageActivitySubscription.unsubscribe();\n    };\n    function complete(event) {\n        if (hasCompleted) {\n            return;\n        }\n        stop();\n        pageActivityEndCallback(event);\n    }\n    return { stop: stop };\n}\nexport function createPageActivityObservable(lifeCycle, domMutationObservable, configuration) {\n    var observable = new Observable(function () {\n        var subscriptions = [];\n        var firstRequestIndex;\n        var pendingRequestsCount = 0;\n        subscriptions.push(domMutationObservable.subscribe(notifyPageActivity), lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n            if (entries.some(function (entry) { return entry.entryType === 'resource' && !isExcludedUrl(configuration, entry.name); })) {\n                notifyPageActivity();\n            }\n        }), lifeCycle.subscribe(5 /* LifeCycleEventType.REQUEST_STARTED */, function (startEvent) {\n            if (isExcludedUrl(configuration, startEvent.url)) {\n                return;\n            }\n            if (firstRequestIndex === undefined) {\n                firstRequestIndex = startEvent.requestIndex;\n            }\n            pendingRequestsCount += 1;\n            notifyPageActivity();\n        }), lifeCycle.subscribe(6 /* LifeCycleEventType.REQUEST_COMPLETED */, function (request) {\n            if (isExcludedUrl(configuration, request.url) ||\n                firstRequestIndex === undefined ||\n                // If the request started before the tracking start, ignore it\n                request.requestIndex < firstRequestIndex) {\n                return;\n            }\n            pendingRequestsCount -= 1;\n            notifyPageActivity();\n        }));\n        var stopTrackingWindowOpen = trackWindowOpen(notifyPageActivity).stop;\n        return function () {\n            stopTrackingWindowOpen();\n            subscriptions.forEach(function (s) { return s.unsubscribe(); });\n        };\n        function notifyPageActivity() {\n            observable.notify({ isBusy: pendingRequestsCount > 0 });\n        }\n    });\n    return observable;\n}\nfunction isExcludedUrl(configuration, requestUrl) {\n    return matchList(configuration.excludedActivityUrls, requestUrl);\n}\nfunction trackWindowOpen(callback) {\n    return instrumentMethodAndCallOriginal(window, 'open', { before: callback });\n}\n","import { ONE_SECOND, clearTimeout, setTimeout } from '@datadog/browser-core';\nexport var MAX_DURATION_BETWEEN_CLICKS = ONE_SECOND;\nexport var MAX_DISTANCE_BETWEEN_CLICKS = 100;\nexport function createClickChain(firstClick, onFinalize) {\n    var bufferedClicks = [];\n    var status = 0 /* ClickChainStatus.WaitingForMoreClicks */;\n    var maxDurationBetweenClicksTimeout;\n    appendClick(firstClick);\n    function appendClick(click) {\n        click.stopObservable.subscribe(tryFinalize);\n        bufferedClicks.push(click);\n        clearTimeout(maxDurationBetweenClicksTimeout);\n        maxDurationBetweenClicksTimeout = setTimeout(dontAcceptMoreClick, MAX_DURATION_BETWEEN_CLICKS);\n    }\n    function tryFinalize() {\n        if (status === 1 /* ClickChainStatus.WaitingForClicksToStop */ && bufferedClicks.every(function (click) { return click.isStopped(); })) {\n            status = 2 /* ClickChainStatus.Finalized */;\n            onFinalize(bufferedClicks);\n        }\n    }\n    function dontAcceptMoreClick() {\n        clearTimeout(maxDurationBetweenClicksTimeout);\n        if (status === 0 /* ClickChainStatus.WaitingForMoreClicks */) {\n            status = 1 /* ClickChainStatus.WaitingForClicksToStop */;\n            tryFinalize();\n        }\n    }\n    return {\n        tryAppend: function (click) {\n            if (status !== 0 /* ClickChainStatus.WaitingForMoreClicks */) {\n                return false;\n            }\n            if (bufferedClicks.length > 0 &&\n                !areEventsSimilar(bufferedClicks[bufferedClicks.length - 1].event, click.event)) {\n                dontAcceptMoreClick();\n                return false;\n            }\n            appendClick(click);\n            return true;\n        },\n        stop: function () {\n            dontAcceptMoreClick();\n        },\n    };\n}\n/**\n * Checks whether two events are similar by comparing their target, position and timestamp\n */\nfunction areEventsSimilar(first, second) {\n    return (first.target === second.target &&\n        mouseEventDistance(first, second) <= MAX_DISTANCE_BETWEEN_CLICKS &&\n        first.timeStamp - second.timeStamp <= MAX_DURATION_BETWEEN_CLICKS);\n}\nfunction mouseEventDistance(origin, other) {\n    return Math.sqrt(Math.pow(origin.clientX - other.clientX, 2) + Math.pow(origin.clientY - other.clientY, 2));\n}\n","import { safeTruncate, isIE, find } from '@datadog/browser-core';\n/**\n * Get the action name from the attribute 'data-dd-action-name' on the element or any of its parent.\n * It can also be retrieved from a user defined attribute.\n */\nexport var DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE = 'data-dd-action-name';\nexport function getActionNameFromElement(element, userProgrammaticAttribute) {\n    // Proceed to get the action name in two steps:\n    // * first, get the name programmatically, explicitly defined by the user.\n    // * then, use strategies that are known to return good results. Those strategies will be used on\n    //   the element and a few parents, but it's likely that they won't succeed at all.\n    // * if no name is found this way, use strategies returning less accurate names as a fallback.\n    //   Those are much likely to succeed.\n    return (getActionNameFromElementProgrammatically(element, DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE) ||\n        (userProgrammaticAttribute && getActionNameFromElementProgrammatically(element, userProgrammaticAttribute)) ||\n        getActionNameFromElementForStrategies(element, userProgrammaticAttribute, priorityStrategies) ||\n        getActionNameFromElementForStrategies(element, userProgrammaticAttribute, fallbackStrategies) ||\n        '');\n}\nfunction getActionNameFromElementProgrammatically(targetElement, programmaticAttribute) {\n    var elementWithAttribute;\n    // We don't use getActionNameFromElementForStrategies here, because we want to consider all parents,\n    // without limit. It is up to the user to declare a relevant naming strategy.\n    // If available, use element.closest() to match get the attribute from the element or any of its\n    // parent.  Else fallback to a more traditional implementation.\n    if (supportsElementClosest()) {\n        elementWithAttribute = targetElement.closest(\"[\".concat(programmaticAttribute, \"]\"));\n    }\n    else {\n        var element = targetElement;\n        while (element) {\n            if (element.hasAttribute(programmaticAttribute)) {\n                elementWithAttribute = element;\n                break;\n            }\n            element = element.parentElement;\n        }\n    }\n    if (!elementWithAttribute) {\n        return;\n    }\n    var name = elementWithAttribute.getAttribute(programmaticAttribute);\n    return truncate(normalizeWhitespace(name.trim()));\n}\nvar priorityStrategies = [\n    // associated LABEL text\n    function (element, userProgrammaticAttribute) {\n        // IE does not support element.labels, so we fallback to a CSS selector based on the element id\n        // instead\n        if (supportsLabelProperty()) {\n            if ('labels' in element && element.labels && element.labels.length > 0) {\n                return getTextualContent(element.labels[0], userProgrammaticAttribute);\n            }\n        }\n        else if (element.id) {\n            var label = element.ownerDocument &&\n                find(element.ownerDocument.querySelectorAll('label'), function (label) { return label.htmlFor === element.id; });\n            return label && getTextualContent(label, userProgrammaticAttribute);\n        }\n    },\n    // INPUT button (and associated) value\n    function (element) {\n        if (element.nodeName === 'INPUT') {\n            var input = element;\n            var type = input.getAttribute('type');\n            if (type === 'button' || type === 'submit' || type === 'reset') {\n                return input.value;\n            }\n        }\n    },\n    // BUTTON, LABEL or button-like element text\n    function (element, userProgrammaticAttribute) {\n        if (element.nodeName === 'BUTTON' || element.nodeName === 'LABEL' || element.getAttribute('role') === 'button') {\n            return getTextualContent(element, userProgrammaticAttribute);\n        }\n    },\n    function (element) { return element.getAttribute('aria-label'); },\n    // associated element text designated by the aria-labelledby attribute\n    function (element, userProgrammaticAttribute) {\n        var labelledByAttribute = element.getAttribute('aria-labelledby');\n        if (labelledByAttribute) {\n            return labelledByAttribute\n                .split(/\\s+/)\n                .map(function (id) { return getElementById(element, id); })\n                .filter(function (label) { return Boolean(label); })\n                .map(function (element) { return getTextualContent(element, userProgrammaticAttribute); })\n                .join(' ');\n        }\n    },\n    function (element) { return element.getAttribute('alt'); },\n    function (element) { return element.getAttribute('name'); },\n    function (element) { return element.getAttribute('title'); },\n    function (element) { return element.getAttribute('placeholder'); },\n    // SELECT first OPTION text\n    function (element, userProgrammaticAttribute) {\n        if ('options' in element && element.options.length > 0) {\n            return getTextualContent(element.options[0], userProgrammaticAttribute);\n        }\n    },\n];\nvar fallbackStrategies = [\n    function (element, userProgrammaticAttribute) { return getTextualContent(element, userProgrammaticAttribute); },\n];\n/**\n * Iterates over the target element and its parent, using the strategies list to get an action name.\n * Each strategies are applied on each element, stopping as soon as a non-empty value is returned.\n */\nvar MAX_PARENTS_TO_CONSIDER = 10;\nfunction getActionNameFromElementForStrategies(targetElement, userProgrammaticAttribute, strategies) {\n    var element = targetElement;\n    var recursionCounter = 0;\n    while (recursionCounter <= MAX_PARENTS_TO_CONSIDER &&\n        element &&\n        element.nodeName !== 'BODY' &&\n        element.nodeName !== 'HTML' &&\n        element.nodeName !== 'HEAD') {\n        for (var _i = 0, strategies_1 = strategies; _i < strategies_1.length; _i++) {\n            var strategy = strategies_1[_i];\n            var name_1 = strategy(element, userProgrammaticAttribute);\n            if (typeof name_1 === 'string') {\n                var trimmedName = name_1.trim();\n                if (trimmedName) {\n                    return truncate(normalizeWhitespace(trimmedName));\n                }\n            }\n        }\n        // Consider a FORM as a contextual limit to get the action name.  This is experimental and may\n        // be reconsidered in the future.\n        if (element.nodeName === 'FORM') {\n            break;\n        }\n        element = element.parentElement;\n        recursionCounter += 1;\n    }\n}\nfunction normalizeWhitespace(s) {\n    return s.replace(/\\s+/g, ' ');\n}\nfunction truncate(s) {\n    return s.length > 100 ? \"\".concat(safeTruncate(s, 100), \" [...]\") : s;\n}\nfunction getElementById(refElement, id) {\n    // Use the element ownerDocument here, because tests are executed in an iframe, so\n    // document.getElementById won't work.\n    return refElement.ownerDocument ? refElement.ownerDocument.getElementById(id) : null;\n}\nfunction getTextualContent(element, userProgrammaticAttribute) {\n    if (element.isContentEditable) {\n        return;\n    }\n    if ('innerText' in element) {\n        var text_1 = element.innerText;\n        var removeTextFromElements = function (query) {\n            var list = element.querySelectorAll(query);\n            for (var index = 0; index < list.length; index += 1) {\n                var element_1 = list[index];\n                if ('innerText' in element_1) {\n                    var textToReplace = element_1.innerText;\n                    if (textToReplace && textToReplace.trim().length > 0) {\n                        text_1 = text_1.replace(textToReplace, '');\n                    }\n                }\n            }\n        };\n        if (!supportsInnerTextScriptAndStyleRemoval()) {\n            // remove the inner text of SCRIPT and STYLES from the result. This is a bit dirty, but should\n            // be relatively fast and work in most cases.\n            removeTextFromElements('script, style');\n        }\n        // remove the text of elements with programmatic attribute value\n        removeTextFromElements(\"[\".concat(DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE, \"]\"));\n        if (userProgrammaticAttribute) {\n            removeTextFromElements(\"[\".concat(userProgrammaticAttribute, \"]\"));\n        }\n        return text_1;\n    }\n    return element.textContent;\n}\n/**\n * Returns true if element.innerText excludes the text from inline SCRIPT and STYLE element. This\n * should be the case everywhere except on Internet Explorer 10 and 11 (see [1])\n *\n * The innerText property relies on what is actually rendered to compute its output, so to check if\n * it actually excludes SCRIPT and STYLE content, a solution would be to create a style element, set\n * its content to '*', inject it in the document body, and check if the style element innerText\n * property returns '*'. Using a new `document` instance won't work as it is not rendered.\n *\n * This solution requires specific CSP rules (see [2]) to be set by the customer. We want to avoid\n * this, so instead we rely on browser detection. In case of false negative, the impact should be\n * low, since we rely on this result to remove the SCRIPT and STYLE innerText (which will be empty)\n * from a parent element innerText.\n *\n * [1]: https://web.archive.org/web/20210602165716/http://perfectionkills.com/the-poor-misunderstood-innerText/#diff-with-textContent\n * [2]: https://github.com/DataDog/browser-sdk/issues/1084\n */\nfunction supportsInnerTextScriptAndStyleRemoval() {\n    return !isIE();\n}\n/**\n * Returns true if the browser supports the element.labels property.  This should be the case\n * everywhere except on Internet Explorer.\n * Note: The result is computed lazily, because we don't want any DOM access when the SDK is\n * evaluated.\n */\nvar supportsLabelPropertyResult;\nfunction supportsLabelProperty() {\n    if (supportsLabelPropertyResult === undefined) {\n        supportsLabelPropertyResult = 'labels' in HTMLInputElement.prototype;\n    }\n    return supportsLabelPropertyResult;\n}\n/**\n * Returns true if the browser supports the element.closest method.  This should be the case\n * everywhere except on Internet Explorer.\n * Note: The result is computed lazily, because we don't want any DOM access when the SDK is\n * evaluated.\n */\nvar supportsElementClosestResult;\nfunction supportsElementClosest() {\n    if (supportsElementClosestResult === undefined) {\n        supportsElementClosestResult = 'closest' in HTMLElement.prototype;\n    }\n    return supportsElementClosestResult;\n}\n","export function isIE() {\n    return Boolean(document.documentMode);\n}\nexport function isChromium() {\n    return !!window.chrome || /HeadlessChrome/.test(window.navigator.userAgent);\n}\n","import { cssEscape } from '@datadog/browser-core';\nimport { DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE } from './getActionNameFromElement';\n/**\n * Stable attributes are attributes that are commonly used to identify parts of a UI (ex:\n * component). Those attribute values should not be generated randomly (hardcoded most of the time)\n * and stay the same across deploys. They are not necessarily unique across the document.\n */\nexport var STABLE_ATTRIBUTES = [\n    DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE,\n    // Common test attributes (list provided by google recorder)\n    'data-testid',\n    'data-test',\n    'data-qa',\n    'data-cy',\n    'data-test-id',\n    'data-qa-id',\n    'data-testing',\n    // FullStory decorator attributes:\n    'data-component',\n    'data-element',\n    'data-source-file',\n];\n// Selectors to use if they target a single element on the whole document. Those selectors are\n// considered as \"stable\" and uniquely identify an element regardless of the page state. If we find\n// one, we should consider the selector \"complete\" and stop iterating over ancestors.\nvar GLOBALLY_UNIQUE_SELECTOR_GETTERS = [getStableAttributeSelector, getIDSelector];\n// Selectors to use if they target a single element among an element descendants. Those selectors\n// are more brittle than \"globally unique\" selectors and should be combined with ancestor selectors\n// to improve specificity.\nvar UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS = [\n    getStableAttributeSelector,\n    getClassSelector,\n    getTagNameSelector,\n];\nexport function getSelectorFromElement(targetElement, actionNameAttribute) {\n    var targetElementSelector = '';\n    var element = targetElement;\n    while (element && element.nodeName !== 'HTML') {\n        var globallyUniqueSelector = findSelector(element, GLOBALLY_UNIQUE_SELECTOR_GETTERS, isSelectorUniqueGlobally, actionNameAttribute, targetElementSelector);\n        if (globallyUniqueSelector) {\n            return globallyUniqueSelector;\n        }\n        var uniqueSelectorAmongChildren = findSelector(element, UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS, isSelectorUniqueAmongSiblings, actionNameAttribute, targetElementSelector);\n        targetElementSelector =\n            uniqueSelectorAmongChildren || combineSelector(getPositionSelector(element), targetElementSelector);\n        element = element.parentElement;\n    }\n    return targetElementSelector;\n}\nfunction isGeneratedValue(value) {\n    // To compute the \"URL path group\", the backend replaces every URL path parts as a question mark\n    // if it thinks the part is an identifier. The condition it uses is to checks whether a digit is\n    // present.\n    //\n    // Here, we use the same strategy: if a the value contains a digit, we consider it generated. This\n    // strategy might be a bit naive and fail in some cases, but there are many fallbacks to generate\n    // CSS selectors so it should be fine most of the time. We might want to allow customers to\n    // provide their own `isGeneratedValue` at some point.\n    return /[0-9]/.test(value);\n}\nfunction getIDSelector(element) {\n    if (element.id && !isGeneratedValue(element.id)) {\n        return \"#\".concat(cssEscape(element.id));\n    }\n}\nfunction getClassSelector(element) {\n    if (element.tagName === 'BODY') {\n        return;\n    }\n    if (element.classList.length > 0) {\n        for (var i = 0; i < element.classList.length; i += 1) {\n            var className = element.classList[i];\n            if (isGeneratedValue(className)) {\n                continue;\n            }\n            return \"\".concat(element.tagName, \".\").concat(cssEscape(className));\n        }\n    }\n}\nfunction getTagNameSelector(element) {\n    return element.tagName;\n}\nfunction getStableAttributeSelector(element, actionNameAttribute) {\n    if (actionNameAttribute) {\n        var selector = getAttributeSelector(actionNameAttribute);\n        if (selector) {\n            return selector;\n        }\n    }\n    for (var _i = 0, STABLE_ATTRIBUTES_1 = STABLE_ATTRIBUTES; _i < STABLE_ATTRIBUTES_1.length; _i++) {\n        var attributeName = STABLE_ATTRIBUTES_1[_i];\n        var selector = getAttributeSelector(attributeName);\n        if (selector) {\n            return selector;\n        }\n    }\n    function getAttributeSelector(attributeName) {\n        if (element.hasAttribute(attributeName)) {\n            return \"\".concat(element.tagName, \"[\").concat(attributeName, \"=\\\"\").concat(cssEscape(element.getAttribute(attributeName)), \"\\\"]\");\n        }\n    }\n}\nfunction getPositionSelector(element) {\n    var sibling = element.parentElement.firstElementChild;\n    var elementIndex = 1;\n    while (sibling && sibling !== element) {\n        if (sibling.tagName === element.tagName) {\n            elementIndex += 1;\n        }\n        sibling = sibling.nextElementSibling;\n    }\n    return \"\".concat(element.tagName, \":nth-of-type(\").concat(elementIndex, \")\");\n}\nfunction findSelector(element, selectorGetters, predicate, actionNameAttribute, childSelector) {\n    for (var _i = 0, selectorGetters_1 = selectorGetters; _i < selectorGetters_1.length; _i++) {\n        var selectorGetter = selectorGetters_1[_i];\n        var elementSelector = selectorGetter(element, actionNameAttribute);\n        if (!elementSelector) {\n            continue;\n        }\n        var fullSelector = combineSelector(elementSelector, childSelector);\n        if (predicate(element, fullSelector)) {\n            return fullSelector;\n        }\n    }\n}\n/**\n * Check whether the selector is unique among the whole document.\n */\nfunction isSelectorUniqueGlobally(element, selector) {\n    return element.ownerDocument.querySelectorAll(selector).length === 1;\n}\n/**\n * Check whether the selector is unique among the element siblings. In other words, it returns true\n * if \"ELEMENT_PARENT > SELECTOR\" returns a single element.\n *\n * The result will be less accurate on browsers that don't support :scope (i. e. IE): it will check\n * for any element matching the selector contained in the parent (in other words,\n * \"ELEMENT_PARENT SELECTOR\" returns a single element), regardless of whether the selector is a\n * direct descendent of the element parent. This should not impact results too much: if it\n * inaccurately returns false, we'll just fall back to another strategy.\n */\nfunction isSelectorUniqueAmongSiblings(element, selector) {\n    return (element.parentElement.querySelectorAll(supportScopeSelector() ? combineSelector(':scope', selector) : selector)\n        .length === 1);\n}\nfunction combineSelector(parent, child) {\n    return child ? \"\".concat(parent, \">\").concat(child) : parent;\n}\nvar supportScopeSelectorCache;\nexport function supportScopeSelector() {\n    if (supportScopeSelectorCache === undefined) {\n        try {\n            document.querySelector(':scope');\n            supportScopeSelectorCache = true;\n        }\n        catch (_a) {\n            supportScopeSelectorCache = false;\n        }\n    }\n    return supportScopeSelectorCache;\n}\n","import { addEventListener } from '@datadog/browser-core';\nexport function listenActionEvents(_a) {\n    var onPointerDown = _a.onPointerDown, onPointerUp = _a.onPointerUp;\n    var selectionEmptyAtPointerDown;\n    var userActivity = {\n        selection: false,\n        input: false,\n    };\n    var clickContext;\n    var listeners = [\n        addEventListener(window, \"pointerdown\" /* DOM_EVENT.POINTER_DOWN */, function (event) {\n            if (isValidPointerEvent(event)) {\n                selectionEmptyAtPointerDown = isSelectionEmpty();\n                userActivity = {\n                    selection: false,\n                    input: false,\n                };\n                clickContext = onPointerDown(event);\n            }\n        }, { capture: true }),\n        addEventListener(window, \"selectionchange\" /* DOM_EVENT.SELECTION_CHANGE */, function () {\n            if (!selectionEmptyAtPointerDown || !isSelectionEmpty()) {\n                userActivity.selection = true;\n            }\n        }, { capture: true }),\n        addEventListener(window, \"pointerup\" /* DOM_EVENT.POINTER_UP */, function (event) {\n            if (isValidPointerEvent(event) && clickContext) {\n                // Use a scoped variable to make sure the value is not changed by other clicks\n                var localUserActivity_1 = userActivity;\n                onPointerUp(clickContext, event, function () { return localUserActivity_1; });\n                clickContext = undefined;\n            }\n        }, { capture: true }),\n        addEventListener(window, \"input\" /* DOM_EVENT.INPUT */, function () {\n            userActivity.input = true;\n        }, { capture: true }),\n    ];\n    return {\n        stop: function () {\n            listeners.forEach(function (listener) { return listener.stop(); });\n        },\n    };\n}\nfunction isSelectionEmpty() {\n    var selection = window.getSelection();\n    return !selection || selection.isCollapsed;\n}\nfunction isValidPointerEvent(event) {\n    return (event.target instanceof Element &&\n        // Only consider 'primary' pointer events for now. Multi-touch support could be implemented in\n        // the future.\n        event.isPrimary !== false);\n}\n","import { elementMatches, ONE_SECOND } from '@datadog/browser-core';\nvar MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE = 3;\nexport function computeFrustration(clicks, rageClick) {\n    if (isRage(clicks)) {\n        rageClick.addFrustration(\"rage_click\" /* FrustrationType.RAGE_CLICK */);\n        if (clicks.some(isDead)) {\n            rageClick.addFrustration(\"dead_click\" /* FrustrationType.DEAD_CLICK */);\n        }\n        if (rageClick.hasError) {\n            rageClick.addFrustration(\"error_click\" /* FrustrationType.ERROR_CLICK */);\n        }\n        return { isRage: true };\n    }\n    var hasSelectionChanged = clicks.some(function (click) { return click.getUserActivity().selection; });\n    clicks.forEach(function (click) {\n        if (click.hasError) {\n            click.addFrustration(\"error_click\" /* FrustrationType.ERROR_CLICK */);\n        }\n        if (isDead(click) &&\n            // Avoid considering clicks part of a double-click or triple-click selections as dead clicks\n            !hasSelectionChanged) {\n            click.addFrustration(\"dead_click\" /* FrustrationType.DEAD_CLICK */);\n        }\n    });\n    return { isRage: false };\n}\nexport function isRage(clicks) {\n    if (clicks.some(function (click) { return click.getUserActivity().selection; })) {\n        return false;\n    }\n    for (var i = 0; i < clicks.length - (MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE - 1); i += 1) {\n        if (clicks[i + MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE - 1].event.timeStamp - clicks[i].event.timeStamp <=\n            ONE_SECOND) {\n            return true;\n        }\n    }\n    return false;\n}\nvar DEAD_CLICK_EXCLUDE_SELECTOR = \n// inputs that don't trigger a meaningful event like \"input\" when clicked, including textual\n// inputs (using a negative selector is shorter here)\n'input:not([type=\"checkbox\"]):not([type=\"radio\"]):not([type=\"button\"]):not([type=\"submit\"]):not([type=\"reset\"]):not([type=\"range\"]),' +\n    'textarea,' +\n    'select,' +\n    // contenteditable and their descendants don't always trigger meaningful changes when manipulated\n    '[contenteditable],' +\n    '[contenteditable] *,' +\n    // canvas, as there is no good way to detect activity occurring on them\n    'canvas,' +\n    // links that are interactive (have an href attribute) or any of their descendants, as they can\n    // open a new tab or navigate to a hash without triggering a meaningful event\n    'a[href],' +\n    'a[href] *';\nexport function isDead(click) {\n    if (click.hasPageActivity || click.getUserActivity().input) {\n        return false;\n    }\n    return !elementMatches(click.event.target, DEAD_CLICK_EXCLUDE_SELECTOR);\n}\n","import { includes, timeStampNow, isExperimentalFeatureEnabled, Observable, assign, getRelativeTime, ONE_MINUTE, ValueHistory, generateUUID, clocksNow, ONE_SECOND, elapsed, ExperimentalFeature, } from '@datadog/browser-core';\nimport { trackEventCounts } from '../../trackEventCounts';\nimport { PAGE_ACTIVITY_VALIDATION_DELAY, waitPageActivityEnd } from '../../waitPageActivityEnd';\nimport { createClickChain } from './clickChain';\nimport { getActionNameFromElement } from './getActionNameFromElement';\nimport { getSelectorFromElement } from './getSelectorFromElement';\nimport { listenActionEvents } from './listenActionEvents';\nimport { computeFrustration } from './computeFrustration';\n// Maximum duration for click actions\nexport var CLICK_ACTION_MAX_DURATION = 10 * ONE_SECOND;\nexport var ACTION_CONTEXT_TIME_OUT_DELAY = 5 * ONE_MINUTE; // arbitrary\nexport function trackClickActions(lifeCycle, domMutationObservable, configuration) {\n    var history = new ValueHistory(ACTION_CONTEXT_TIME_OUT_DELAY);\n    var stopObservable = new Observable();\n    var currentClickChain;\n    lifeCycle.subscribe(8 /* LifeCycleEventType.SESSION_RENEWED */, function () {\n        history.reset();\n    });\n    lifeCycle.subscribe(4 /* LifeCycleEventType.VIEW_ENDED */, stopClickChain);\n    var stopActionEventsListener = listenActionEvents({\n        onPointerDown: function (pointerDownEvent) {\n            return processPointerDown(configuration, lifeCycle, domMutationObservable, history, pointerDownEvent);\n        },\n        onPointerUp: function (_a, startEvent, getUserActivity) {\n            var clickActionBase = _a.clickActionBase, hadActivityOnPointerDown = _a.hadActivityOnPointerDown;\n            return startClickAction(configuration, lifeCycle, domMutationObservable, history, stopObservable, appendClickToClickChain, clickActionBase, startEvent, getUserActivity, hadActivityOnPointerDown);\n        },\n    }).stop;\n    var actionContexts = {\n        findActionId: function (startTime) {\n            return configuration.trackFrustrations ? history.findAll(startTime) : history.find(startTime);\n        },\n    };\n    return {\n        stop: function () {\n            stopClickChain();\n            stopObservable.notify();\n            stopActionEventsListener();\n        },\n        actionContexts: actionContexts,\n    };\n    function appendClickToClickChain(click) {\n        if (!currentClickChain || !currentClickChain.tryAppend(click)) {\n            var rageClick_1 = click.clone();\n            currentClickChain = createClickChain(click, function (clicks) {\n                finalizeClicks(clicks, rageClick_1);\n            });\n        }\n    }\n    function stopClickChain() {\n        if (currentClickChain) {\n            currentClickChain.stop();\n        }\n    }\n}\nfunction processPointerDown(configuration, lifeCycle, domMutationObservable, history, pointerDownEvent) {\n    if (!configuration.trackFrustrations && history.find()) {\n        // TODO: remove this in a future major version. To keep retrocompatibility, ignore any new\n        // action if another one is already occurring.\n        return;\n    }\n    var clickActionBase = computeClickActionBase(pointerDownEvent, configuration.actionNameAttribute);\n    if (!configuration.trackFrustrations && !clickActionBase.name) {\n        // TODO: remove this in a future major version. To keep retrocompatibility, ignore any action\n        // with a blank name\n        return;\n    }\n    var hadActivityOnPointerDown = false;\n    waitPageActivityEnd(lifeCycle, domMutationObservable, configuration, function (pageActivityEndEvent) {\n        hadActivityOnPointerDown = pageActivityEndEvent.hadActivity;\n    }, \n    // We don't care about the activity duration, we just want to know whether an activity did happen\n    // within the \"validation delay\" or not. Limit the duration so the callback is called sooner.\n    PAGE_ACTIVITY_VALIDATION_DELAY);\n    return { clickActionBase: clickActionBase, hadActivityOnPointerDown: function () { return hadActivityOnPointerDown; } };\n}\nfunction startClickAction(configuration, lifeCycle, domMutationObservable, history, stopObservable, appendClickToClickChain, clickActionBase, startEvent, getUserActivity, hadActivityOnPointerDown) {\n    var click = newClick(lifeCycle, history, getUserActivity, clickActionBase, startEvent);\n    if (configuration.trackFrustrations) {\n        appendClickToClickChain(click);\n    }\n    var stopWaitPageActivityEnd = waitPageActivityEnd(lifeCycle, domMutationObservable, configuration, function (pageActivityEndEvent) {\n        if (pageActivityEndEvent.hadActivity && pageActivityEndEvent.end < click.startClocks.timeStamp) {\n            // If the clock is looking weird, just discard the click\n            click.discard();\n        }\n        else {\n            if (pageActivityEndEvent.hadActivity) {\n                click.stop(pageActivityEndEvent.end);\n            }\n            else if (hadActivityOnPointerDown()) {\n                click.stop(\n                // using the click start as activity end, so the click will have some activity but its\n                // duration will be 0 (as the activity started before the click start)\n                click.startClocks.timeStamp);\n            }\n            else {\n                click.stop();\n            }\n            // Validate or discard the click only if we don't track frustrations. It'll be done when\n            // the click chain is finalized.\n            if (!configuration.trackFrustrations) {\n                if (!pageActivityEndEvent.hadActivity) {\n                    // If we are not tracking frustrations, we should discard the click to keep backward\n                    // compatibility.\n                    click.discard();\n                }\n                else {\n                    click.validate();\n                }\n            }\n        }\n    }, CLICK_ACTION_MAX_DURATION).stop;\n    var viewEndedSubscription = lifeCycle.subscribe(4 /* LifeCycleEventType.VIEW_ENDED */, function (_a) {\n        var endClocks = _a.endClocks;\n        click.stop(endClocks.timeStamp);\n    });\n    var stopSubscription = stopObservable.subscribe(function () {\n        click.stop();\n    });\n    click.stopObservable.subscribe(function () {\n        viewEndedSubscription.unsubscribe();\n        stopWaitPageActivityEnd();\n        stopSubscription.unsubscribe();\n    });\n}\nfunction computeClickActionBase(event, actionNameAttribute) {\n    var target;\n    var position;\n    if (isExperimentalFeatureEnabled(ExperimentalFeature.CLICKMAP)) {\n        var rect = event.target.getBoundingClientRect();\n        target = {\n            width: Math.round(rect.width),\n            height: Math.round(rect.height),\n            selector: getSelectorFromElement(event.target, actionNameAttribute),\n        };\n        position = {\n            // Use clientX and Y because for SVG element offsetX and Y are relatives to the <svg> element\n            x: Math.round(event.clientX - rect.left),\n            y: Math.round(event.clientY - rect.top),\n        };\n    }\n    return {\n        type: \"click\" /* ActionType.CLICK */,\n        target: target,\n        position: position,\n        name: getActionNameFromElement(event.target, actionNameAttribute),\n    };\n}\nfunction newClick(lifeCycle, history, getUserActivity, clickActionBase, startEvent) {\n    var id = generateUUID();\n    var startClocks = clocksNow();\n    var historyEntry = history.add(id, startClocks.relative);\n    var eventCountsSubscription = trackEventCounts({\n        lifeCycle: lifeCycle,\n        isChildEvent: function (event) {\n            return event.action !== undefined &&\n                (Array.isArray(event.action.id) ? includes(event.action.id, id) : event.action.id === id);\n        },\n    });\n    var status = 0 /* ClickStatus.ONGOING */;\n    var activityEndTime;\n    var frustrationTypes = [];\n    var stopObservable = new Observable();\n    function stop(newActivityEndTime) {\n        if (status !== 0 /* ClickStatus.ONGOING */) {\n            return;\n        }\n        activityEndTime = newActivityEndTime;\n        status = 1 /* ClickStatus.STOPPED */;\n        if (activityEndTime) {\n            historyEntry.close(getRelativeTime(activityEndTime));\n        }\n        else {\n            historyEntry.remove();\n        }\n        eventCountsSubscription.stop();\n        stopObservable.notify();\n    }\n    return {\n        event: startEvent,\n        stop: stop,\n        stopObservable: stopObservable,\n        get hasError() {\n            return eventCountsSubscription.eventCounts.errorCount > 0;\n        },\n        get hasPageActivity() {\n            return activityEndTime !== undefined;\n        },\n        getUserActivity: getUserActivity,\n        addFrustration: function (frustrationType) {\n            frustrationTypes.push(frustrationType);\n        },\n        startClocks: startClocks,\n        isStopped: function () { return status === 1 /* ClickStatus.STOPPED */ || status === 2 /* ClickStatus.FINALIZED */; },\n        clone: function () { return newClick(lifeCycle, history, getUserActivity, clickActionBase, startEvent); },\n        validate: function (domEvents) {\n            stop();\n            if (status !== 1 /* ClickStatus.STOPPED */) {\n                return;\n            }\n            var _a = eventCountsSubscription.eventCounts, resourceCount = _a.resourceCount, errorCount = _a.errorCount, longTaskCount = _a.longTaskCount;\n            var clickAction = assign({\n                type: \"click\" /* ActionType.CLICK */,\n                duration: activityEndTime && elapsed(startClocks.timeStamp, activityEndTime),\n                startClocks: startClocks,\n                id: id,\n                frustrationTypes: frustrationTypes,\n                counts: {\n                    resourceCount: resourceCount,\n                    errorCount: errorCount,\n                    longTaskCount: longTaskCount,\n                },\n                events: domEvents !== null && domEvents !== void 0 ? domEvents : [startEvent],\n                event: startEvent,\n            }, clickActionBase);\n            lifeCycle.notify(1 /* LifeCycleEventType.AUTO_ACTION_COMPLETED */, clickAction);\n            status = 2 /* ClickStatus.FINALIZED */;\n        },\n        discard: function () {\n            stop();\n            status = 2 /* ClickStatus.FINALIZED */;\n        },\n    };\n}\nexport function finalizeClicks(clicks, rageClick) {\n    var isRage = computeFrustration(clicks, rageClick).isRage;\n    if (isRage) {\n        clicks.forEach(function (click) { return click.discard(); });\n        rageClick.stop(timeStampNow());\n        rageClick.validate(clicks.map(function (click) { return click.event; }));\n    }\n    else {\n        rageClick.discard();\n        clicks.forEach(function (click) { return click.validate(); });\n    }\n}\n","import { noop, assign, combine, toServerDuration, generateUUID } from '@datadog/browser-core';\nimport { trackClickActions } from './trackClickActions';\nexport function startActionCollection(lifeCycle, domMutationObservable, configuration, foregroundContexts) {\n    lifeCycle.subscribe(1 /* LifeCycleEventType.AUTO_ACTION_COMPLETED */, function (action) {\n        return lifeCycle.notify(10 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, processAction(action, foregroundContexts));\n    });\n    var actionContexts = { findActionId: noop };\n    if (configuration.trackUserInteractions) {\n        actionContexts = trackClickActions(lifeCycle, domMutationObservable, configuration).actionContexts;\n    }\n    return {\n        addAction: function (action, savedCommonContext) {\n            lifeCycle.notify(10 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, assign({\n                savedCommonContext: savedCommonContext,\n            }, processAction(action, foregroundContexts)));\n        },\n        actionContexts: actionContexts,\n    };\n}\nfunction processAction(action, foregroundContexts) {\n    var autoActionProperties = isAutoAction(action)\n        ? {\n            action: {\n                id: action.id,\n                loading_time: toServerDuration(action.duration),\n                frustration: {\n                    type: action.frustrationTypes,\n                },\n                error: {\n                    count: action.counts.errorCount,\n                },\n                long_task: {\n                    count: action.counts.longTaskCount,\n                },\n                resource: {\n                    count: action.counts.resourceCount,\n                },\n            },\n            _dd: {\n                action: {\n                    target: action.target,\n                    position: action.position,\n                },\n            },\n        }\n        : undefined;\n    var customerContext = !isAutoAction(action) ? action.context : undefined;\n    var actionEvent = combine({\n        action: {\n            id: generateUUID(),\n            target: {\n                name: action.name,\n            },\n            type: action.type,\n        },\n        date: action.startClocks.timeStamp,\n        type: \"action\" /* RumEventType.ACTION */,\n    }, autoActionProperties);\n    var inForeground = foregroundContexts.isInForegroundAt(action.startClocks.relative);\n    if (inForeground !== undefined) {\n        actionEvent.view = { in_foreground: inForeground };\n    }\n    return {\n        customerContext: customerContext,\n        rawRumEvent: actionEvent,\n        startTime: action.startClocks.relative,\n        domainContext: isAutoAction(action) ? { event: action.event, events: action.events } : {},\n    };\n}\nfunction isAutoAction(action) {\n    return action.type !== \"custom\" /* ActionType.CUSTOM */;\n}\n","import { instrumentMethodAndCallOriginal } from '../../tools/instrumentMethod';\nimport { computeStackTrace } from './computeStackTrace';\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Error_types\nvar ERROR_TYPES_RE = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;\n/**\n * Cross-browser collection of unhandled errors\n *\n * Supports:\n * - Firefox: full stack trace with line numbers, plus column number\n * on top frame; column number is not guaranteed\n * - Opera: full stack trace with line and column numbers\n * - Chrome: full stack trace with line and column numbers\n * - Safari: line and column number for the top frame only; some frames\n * may be missing, and column number is not guaranteed\n * - IE: line and column number for the top frame only; some frames\n * may be missing, and column number is not guaranteed\n *\n * In theory, TraceKit should work on all of the following versions:\n * - IE5.5+ (only 8.0 tested)\n * - Firefox 0.9+ (only 3.5+ tested)\n * - Opera 7+ (only 10.50 tested; versions 9 and earlier may require\n * Exceptions Have Stacktrace to be enabled in opera:config)\n * - Safari 3+ (only 4+ tested)\n * - Chrome 1+ (only 5+ tested)\n * - Konqueror 3.5+ (untested)\n *\n * Tries to catch all unhandled errors and report them to the\n * callback.\n *\n * Callbacks receive a StackTrace object as described in the\n * computeStackTrace docs.\n *\n * @memberof TraceKit\n * @namespace\n */\nexport function startUnhandledErrorCollection(callback) {\n    var stopInstrumentingOnError = instrumentOnError(callback).stop;\n    var stopInstrumentingOnUnhandledRejection = instrumentUnhandledRejection(callback).stop;\n    return {\n        stop: function () {\n            stopInstrumentingOnError();\n            stopInstrumentingOnUnhandledRejection();\n        },\n    };\n}\n/**\n * Install a global onerror handler\n */\nfunction instrumentOnError(callback) {\n    return instrumentMethodAndCallOriginal(window, 'onerror', {\n        before: function (message, url, lineNo, columnNo, errorObj) {\n            var stack;\n            if (errorObj) {\n                stack = computeStackTrace(errorObj);\n                callback(stack, errorObj);\n            }\n            else {\n                var location_1 = {\n                    url: url,\n                    column: columnNo,\n                    line: lineNo,\n                };\n                var name_1;\n                var msg = message;\n                if ({}.toString.call(message) === '[object String]') {\n                    var groups = ERROR_TYPES_RE.exec(msg);\n                    if (groups) {\n                        name_1 = groups[1];\n                        msg = groups[2];\n                    }\n                }\n                stack = {\n                    name: name_1,\n                    message: typeof msg === 'string' ? msg : undefined,\n                    stack: [location_1],\n                };\n                callback(stack, message);\n            }\n        },\n    });\n}\n/**\n * Install a global onunhandledrejection handler\n */\nfunction instrumentUnhandledRejection(callback) {\n    return instrumentMethodAndCallOriginal(window, 'onunhandledrejection', {\n        before: function (e) {\n            var reason = e.reason || 'Empty reason';\n            var stack = computeStackTrace(reason);\n            callback(stack, reason);\n        },\n    });\n}\n","import { clocksNow } from '../../tools/utils/timeUtils';\nimport { startUnhandledErrorCollection } from '../tracekit';\nimport { ErrorSource, computeRawError } from './error';\nexport function trackRuntimeError(errorObservable) {\n    return startUnhandledErrorCollection(function (stackTrace, originalError) {\n        errorObservable.notify(computeRawError({\n            stackTrace: stackTrace,\n            originalError: originalError,\n            startClocks: clocksNow(),\n            nonErrorPrefix: 'Uncaught',\n            source: ErrorSource.SOURCE,\n            handling: \"unhandled\" /* ErrorHandling.UNHANDLED */,\n        }));\n    });\n}\n","import { computeStackTrace } from '../tracekit';\nimport { createHandlingStack, formatErrorMessage, toStackTraceString } from '../error/error';\nimport { mergeObservables, Observable } from '../../tools/observable';\nimport { ConsoleApiName } from '../../tools/display';\nimport { callMonitored } from '../../tools/monitor';\nimport { sanitize } from '../../tools/serialisation/sanitize';\nimport { ExperimentalFeature, isExperimentalFeatureEnabled } from '../../tools/experimentalFeatures';\nimport { find } from '../../tools/utils/polyfills';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nvar consoleObservablesByApi = {};\nexport function initConsoleObservable(apis) {\n    var consoleObservables = apis.map(function (api) {\n        if (!consoleObservablesByApi[api]) {\n            consoleObservablesByApi[api] = createConsoleObservable(api);\n        }\n        return consoleObservablesByApi[api];\n    });\n    return mergeObservables.apply(void 0, consoleObservables);\n}\n/* eslint-disable no-console */\nfunction createConsoleObservable(api) {\n    var observable = new Observable(function () {\n        var originalConsoleApi = console[api];\n        console[api] = function () {\n            var params = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                params[_i] = arguments[_i];\n            }\n            originalConsoleApi.apply(console, params);\n            var handlingStack = createHandlingStack();\n            callMonitored(function () {\n                observable.notify(buildConsoleLog(params, api, handlingStack));\n            });\n        };\n        return function () {\n            console[api] = originalConsoleApi;\n        };\n    });\n    return observable;\n}\nfunction buildConsoleLog(params, api, handlingStack) {\n    // Todo: remove console error prefix in the next major version\n    var message = params.map(function (param) { return formatConsoleParameters(param); }).join(' ');\n    var stack;\n    if (api === ConsoleApiName.error) {\n        var firstErrorParam = find(params, function (param) { return param instanceof Error; });\n        stack = firstErrorParam ? toStackTraceString(computeStackTrace(firstErrorParam)) : undefined;\n        message = \"console error: \".concat(message);\n    }\n    return {\n        api: api,\n        message: message,\n        stack: stack,\n        handlingStack: handlingStack,\n    };\n}\nfunction formatConsoleParameters(param) {\n    if (typeof param === 'string') {\n        return isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS) ? sanitize(param) : param;\n    }\n    if (param instanceof Error) {\n        return formatErrorMessage(computeStackTrace(param));\n    }\n    return jsonStringify(isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS) ? sanitize(param) : param, undefined, 2);\n}\n","import { toStackTraceString } from '../error/error';\nimport { monitor } from '../../tools/monitor';\nimport { mergeObservables, Observable } from '../../tools/observable';\nimport { addEventListener } from '../../browser/addEventListener';\nimport { includes } from '../../tools/utils/polyfills';\nimport { safeTruncate } from '../../tools/utils/stringUtils';\nexport var RawReportType = {\n    intervention: 'intervention',\n    deprecation: 'deprecation',\n    cspViolation: 'csp_violation',\n};\nexport function initReportObservable(apis) {\n    var observables = [];\n    if (includes(apis, RawReportType.cspViolation)) {\n        observables.push(createCspViolationReportObservable());\n    }\n    var reportTypes = apis.filter(function (api) { return api !== RawReportType.cspViolation; });\n    if (reportTypes.length) {\n        observables.push(createReportObservable(reportTypes));\n    }\n    return mergeObservables.apply(void 0, observables);\n}\nfunction createReportObservable(reportTypes) {\n    var observable = new Observable(function () {\n        if (!window.ReportingObserver) {\n            return;\n        }\n        var handleReports = monitor(function (reports) {\n            return reports.forEach(function (report) {\n                observable.notify(buildRawReportFromReport(report));\n            });\n        });\n        var observer = new window.ReportingObserver(handleReports, {\n            types: reportTypes,\n            buffered: true,\n        });\n        observer.observe();\n        return function () {\n            observer.disconnect();\n        };\n    });\n    return observable;\n}\nfunction createCspViolationReportObservable() {\n    var observable = new Observable(function () {\n        var stop = addEventListener(document, \"securitypolicyviolation\" /* DOM_EVENT.SECURITY_POLICY_VIOLATION */, function (event) {\n            observable.notify(buildRawReportFromCspViolation(event));\n        }).stop;\n        return stop;\n    });\n    return observable;\n}\nfunction buildRawReportFromReport(_a) {\n    var type = _a.type, body = _a.body;\n    return {\n        type: type,\n        subtype: body.id,\n        message: \"\".concat(type, \": \").concat(body.message),\n        stack: buildStack(body.id, body.message, body.sourceFile, body.lineNumber, body.columnNumber),\n    };\n}\nfunction buildRawReportFromCspViolation(event) {\n    var type = RawReportType.cspViolation;\n    var message = \"'\".concat(event.blockedURI, \"' blocked by '\").concat(event.effectiveDirective, \"' directive\");\n    return {\n        type: RawReportType.cspViolation,\n        subtype: event.effectiveDirective,\n        message: \"\".concat(type, \": \").concat(message),\n        stack: buildStack(event.effectiveDirective, event.originalPolicy\n            ? \"\".concat(message, \" of the policy \\\"\").concat(safeTruncate(event.originalPolicy, 100, '...'), \"\\\"\")\n            : 'no policy', event.sourceFile, event.lineNumber, event.columnNumber),\n    };\n}\nfunction buildStack(name, message, sourceFile, lineNumber, columnNumber) {\n    return (sourceFile &&\n        toStackTraceString({\n            name: name,\n            message: message,\n            stack: [\n                {\n                    func: '?',\n                    url: sourceFile,\n                    line: lineNumber,\n                    column: columnNumber,\n                },\n            ],\n        }));\n}\n","import { addEventListeners } from '@datadog/browser-core';\nvar trackFirstHiddenSingleton;\nvar stopListeners;\nexport function trackFirstHidden(eventTarget) {\n    if (eventTarget === void 0) { eventTarget = window; }\n    if (!trackFirstHiddenSingleton) {\n        if (document.visibilityState === 'hidden') {\n            trackFirstHiddenSingleton = {\n                timeStamp: 0,\n            };\n        }\n        else {\n            trackFirstHiddenSingleton = {\n                timeStamp: Infinity,\n            };\n            (stopListeners = addEventListeners(eventTarget, [\"pagehide\" /* DOM_EVENT.PAGE_HIDE */, \"visibilitychange\" /* DOM_EVENT.VISIBILITY_CHANGE */], function (event) {\n                if (event.type === 'pagehide' || document.visibilityState === 'hidden') {\n                    trackFirstHiddenSingleton.timeStamp = event.timeStamp;\n                    stopListeners();\n                }\n            }, { capture: true }).stop);\n        }\n    }\n    return trackFirstHiddenSingleton;\n}\nexport function resetFirstHidden() {\n    if (stopListeners) {\n        stopListeners();\n    }\n    trackFirstHiddenSingleton = undefined;\n}\n","import { addDuration } from '@datadog/browser-core';\nimport { toValidEntry } from './resourceUtils';\n/**\n * Look for corresponding timing in resource timing buffer\n *\n * Observations:\n * - Timing (start, end) are nested inside the request (start, end)\n * - Some timing can be not exactly nested, being off by < 1 ms\n *\n * Strategy:\n * - from valid nested entries (with 1 ms error margin)\n * - if a single timing match, return the timing\n * - otherwise we can't decide, return undefined\n */\nexport function matchRequestTiming(request) {\n    if (!performance || !('getEntriesByName' in performance)) {\n        return;\n    }\n    var sameNameEntries = performance.getEntriesByName(request.url, 'resource');\n    if (!sameNameEntries.length || !('toJSON' in sameNameEntries[0])) {\n        return;\n    }\n    var candidates = sameNameEntries\n        .map(function (entry) { return entry.toJSON(); })\n        .filter(toValidEntry)\n        .filter(function (entry) {\n        return isBetween(entry, request.startClocks.relative, endTime({ startTime: request.startClocks.relative, duration: request.duration }));\n    });\n    if (candidates.length === 1) {\n        return candidates[0];\n    }\n    return;\n}\nfunction endTime(timing) {\n    return addDuration(timing.startTime, timing.duration);\n}\nfunction isBetween(timing, start, end) {\n    var errorMargin = 1;\n    return timing.startTime >= start - errorMargin && endTime(timing) <= addDuration(end, errorMargin);\n}\n","import { combine, generateUUID, toServerDuration, relativeToClocks, assign, isNumber, isExperimentalFeatureEnabled, ExperimentalFeature, } from '@datadog/browser-core';\nimport { matchRequestTiming } from './matchRequestTiming';\nimport { computePerformanceResourceDetails, computePerformanceResourceDuration, computeResourceKind, computeSize, isRequestKind, } from './resourceUtils';\nexport function startResourceCollection(lifeCycle, configuration, sessionManager, pageStateHistory) {\n    lifeCycle.subscribe(6 /* LifeCycleEventType.REQUEST_COMPLETED */, function (request) {\n        lifeCycle.notify(10 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, processRequest(request, configuration, sessionManager, pageStateHistory));\n    });\n    lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if (entry.entryType === 'resource' && !isRequestKind(entry)) {\n                lifeCycle.notify(10 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, processResourceEntry(entry, configuration, sessionManager, pageStateHistory));\n            }\n        }\n    });\n}\nfunction processRequest(request, configuration, sessionManager, pageStateHistory) {\n    var _a;\n    var type = request.type === \"xhr\" /* RequestType.XHR */ ? \"xhr\" /* ResourceType.XHR */ : \"fetch\" /* ResourceType.FETCH */;\n    var matchingTiming = matchRequestTiming(request);\n    var startClocks = matchingTiming ? relativeToClocks(matchingTiming.startTime) : request.startClocks;\n    var correspondingTimingOverrides = matchingTiming ? computePerformanceEntryMetrics(matchingTiming) : undefined;\n    var tracingInfo = computeRequestTracingInfo(request, configuration);\n    var indexingInfo = computeIndexingInfo(sessionManager, startClocks);\n    var duration = toServerDuration(request.duration);\n    var pageStateInfo = computePageStateInfo(pageStateHistory, startClocks, (_a = matchingTiming === null || matchingTiming === void 0 ? void 0 : matchingTiming.duration) !== null && _a !== void 0 ? _a : request.duration);\n    var resourceEvent = combine({\n        date: startClocks.timeStamp,\n        resource: {\n            id: generateUUID(),\n            type: type,\n            duration: duration,\n            method: request.method,\n            status_code: request.status,\n            url: request.url,\n        },\n        type: \"resource\" /* RumEventType.RESOURCE */,\n    }, tracingInfo, correspondingTimingOverrides, indexingInfo, pageStateInfo);\n    return {\n        startTime: startClocks.relative,\n        rawRumEvent: resourceEvent,\n        domainContext: {\n            performanceEntry: matchingTiming && toPerformanceEntryRepresentation(matchingTiming),\n            xhr: request.xhr,\n            response: request.response,\n            requestInput: request.input,\n            requestInit: request.init,\n            error: request.error,\n        },\n    };\n}\nfunction processResourceEntry(entry, configuration, sessionManager, pageStateHistory) {\n    var type = computeResourceKind(entry);\n    var entryMetrics = computePerformanceEntryMetrics(entry);\n    var startClocks = relativeToClocks(entry.startTime);\n    var tracingInfo = computeEntryTracingInfo(entry, configuration);\n    var indexingInfo = computeIndexingInfo(sessionManager, startClocks);\n    var pageStateInfo = computePageStateInfo(pageStateHistory, startClocks, entry.duration);\n    var resourceEvent = combine({\n        date: startClocks.timeStamp,\n        resource: {\n            id: generateUUID(),\n            type: type,\n            url: entry.name,\n        },\n        type: \"resource\" /* RumEventType.RESOURCE */,\n    }, tracingInfo, entryMetrics, indexingInfo, pageStateInfo);\n    return {\n        startTime: startClocks.relative,\n        rawRumEvent: resourceEvent,\n        domainContext: {\n            performanceEntry: toPerformanceEntryRepresentation(entry),\n        },\n    };\n}\nfunction computePerformanceEntryMetrics(timing) {\n    return {\n        resource: assign({\n            duration: computePerformanceResourceDuration(timing),\n            size: computeSize(timing),\n        }, computePerformanceResourceDetails(timing)),\n    };\n}\nfunction computeRequestTracingInfo(request, configuration) {\n    var hasBeenTraced = request.traceSampled && request.traceId && request.spanId;\n    if (!hasBeenTraced) {\n        return undefined;\n    }\n    return {\n        _dd: {\n            span_id: request.spanId.toDecimalString(),\n            trace_id: request.traceId.toDecimalString(),\n            rule_psr: getRulePsr(configuration),\n        },\n    };\n}\nfunction computeEntryTracingInfo(entry, configuration) {\n    var hasBeenTraced = entry.traceId;\n    if (!hasBeenTraced) {\n        return undefined;\n    }\n    return {\n        _dd: {\n            trace_id: entry.traceId,\n            rule_psr: getRulePsr(configuration),\n        },\n    };\n}\n// TODO next major: use directly PerformanceEntry type in domain context\nfunction toPerformanceEntryRepresentation(entry) {\n    return entry;\n}\n/**\n * @returns number between 0 and 1 which represents trace sample rate\n */\nfunction getRulePsr(configuration) {\n    return isNumber(configuration.traceSampleRate) ? configuration.traceSampleRate / 100 : undefined;\n}\nfunction computeIndexingInfo(sessionManager, resourceStart) {\n    var session = sessionManager.findTrackedSession(resourceStart.relative);\n    return {\n        _dd: {\n            discarded: !session || !session.resourceAllowed,\n        },\n    };\n}\nfunction computePageStateInfo(pageStateHistory, startClocks, duration) {\n    if (!isExperimentalFeatureEnabled(ExperimentalFeature.RESOURCE_PAGE_STATES)) {\n        return;\n    }\n    return {\n        _dd: {\n            page_states: pageStateHistory.findAll(startClocks.relative, duration),\n            page_was_discarded: String(document.wasDiscarded),\n        },\n    };\n}\n","import { assign, addEventListeners, elapsed, ONE_MINUTE, find, findLast, relativeNow, } from '@datadog/browser-core';\nimport { trackFirstHidden } from './trackFirstHidden';\n// Discard LCP and FCP timings above a certain delay to avoid incorrect data\n// It happens in some cases like sleep mode or some browser implementations\nexport var TIMING_MAXIMUM_DELAY = 10 * ONE_MINUTE;\nexport function trackInitialViewTimings(lifeCycle, callback) {\n    var timings = {};\n    function setTimings(newTimings) {\n        assign(timings, newTimings);\n        callback(timings);\n    }\n    var stopNavigationTracking = trackNavigationTimings(lifeCycle, setTimings).stop;\n    var stopFCPTracking = trackFirstContentfulPaintTiming(lifeCycle, function (firstContentfulPaint) {\n        return setTimings({ firstContentfulPaint: firstContentfulPaint });\n    }).stop;\n    var stopLCPTracking = trackLargestContentfulPaintTiming(lifeCycle, window, function (largestContentfulPaint) {\n        setTimings({\n            largestContentfulPaint: largestContentfulPaint,\n        });\n    }).stop;\n    var stopFIDTracking = trackFirstInputTimings(lifeCycle, function (_a) {\n        var firstInputDelay = _a.firstInputDelay, firstInputTime = _a.firstInputTime;\n        setTimings({\n            firstInputDelay: firstInputDelay,\n            firstInputTime: firstInputTime,\n        });\n    }).stop;\n    return {\n        stop: function () {\n            stopNavigationTracking();\n            stopFCPTracking();\n            stopLCPTracking();\n            stopFIDTracking();\n        },\n    };\n}\nexport function trackNavigationTimings(lifeCycle, callback) {\n    var stop = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if (entry.entryType === 'navigation') {\n                callback({\n                    domComplete: entry.domComplete,\n                    domContentLoaded: entry.domContentLoadedEventEnd,\n                    domInteractive: entry.domInteractive,\n                    loadEvent: entry.loadEventEnd,\n                    // In some cases the value reported is negative or is larger\n                    // than the current page time. Ignore these cases:\n                    // https://github.com/GoogleChrome/web-vitals/issues/137\n                    // https://github.com/GoogleChrome/web-vitals/issues/162\n                    firstByte: entry.responseStart >= 0 && entry.responseStart <= relativeNow() ? entry.responseStart : undefined,\n                });\n            }\n        }\n    }).unsubscribe;\n    return { stop: stop };\n}\nexport function trackFirstContentfulPaintTiming(lifeCycle, callback) {\n    var firstHidden = trackFirstHidden();\n    var stop = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        var fcpEntry = find(entries, function (entry) {\n            return entry.entryType === 'paint' &&\n                entry.name === 'first-contentful-paint' &&\n                entry.startTime < firstHidden.timeStamp &&\n                entry.startTime < TIMING_MAXIMUM_DELAY;\n        });\n        if (fcpEntry) {\n            callback(fcpEntry.startTime);\n        }\n    }).unsubscribe;\n    return { stop: stop };\n}\n/**\n * Track the largest contentful paint (LCP) occurring during the initial View.  This can yield\n * multiple values, only the most recent one should be used.\n * Documentation: https://web.dev/lcp/\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/master/src/getLCP.ts\n */\nexport function trackLargestContentfulPaintTiming(lifeCycle, eventTarget, callback) {\n    var firstHidden = trackFirstHidden();\n    // Ignore entries that come after the first user interaction.  According to the documentation, the\n    // browser should not send largest-contentful-paint entries after a user interact with the page,\n    // but the web-vitals reference implementation uses this as a safeguard.\n    var firstInteractionTimestamp = Infinity;\n    var stopEventListener = addEventListeners(eventTarget, [\"pointerdown\" /* DOM_EVENT.POINTER_DOWN */, \"keydown\" /* DOM_EVENT.KEY_DOWN */], function (event) {\n        firstInteractionTimestamp = event.timeStamp;\n    }, { capture: true, once: true }).stop;\n    var unsubscribeLifeCycle = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        var lcpEntry = findLast(entries, function (entry) {\n            return entry.entryType === 'largest-contentful-paint' &&\n                entry.startTime < firstInteractionTimestamp &&\n                entry.startTime < firstHidden.timeStamp &&\n                entry.startTime < TIMING_MAXIMUM_DELAY;\n        });\n        if (lcpEntry) {\n            callback(lcpEntry.startTime);\n        }\n    }).unsubscribe;\n    return {\n        stop: function () {\n            stopEventListener();\n            unsubscribeLifeCycle();\n        },\n    };\n}\n/**\n * Track the first input occurring during the initial View to return:\n * - First Input Delay\n * - First Input Time\n * Callback is called at most one time.\n * Documentation: https://web.dev/fid/\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/master/src/getFID.ts\n */\nexport function trackFirstInputTimings(lifeCycle, callback) {\n    var firstHidden = trackFirstHidden();\n    var stop = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        var firstInputEntry = find(entries, function (entry) {\n            return entry.entryType === 'first-input' && entry.startTime < firstHidden.timeStamp;\n        });\n        if (firstInputEntry) {\n            var firstInputDelay = elapsed(firstInputEntry.startTime, firstInputEntry.processingStart);\n            callback({\n                // Ensure firstInputDelay to be positive, see\n                // https://bugs.chromium.org/p/chromium/issues/detail?id=1185815\n                firstInputDelay: firstInputDelay >= 0 ? firstInputDelay : 0,\n                firstInputTime: firstInputEntry.startTime,\n            });\n        }\n    }).unsubscribe;\n    return {\n        stop: stop,\n    };\n}\n","import { noop, round, ONE_SECOND, elapsed } from '@datadog/browser-core';\nimport { supportPerformanceTimingEvent } from '../../../browser/performanceCollection';\nimport { waitPageActivityEnd } from '../../waitPageActivityEnd';\nexport function trackViewMetrics(lifeCycle, domMutationObservable, configuration, scheduleViewUpdate, loadingType, viewStart) {\n    var viewMetrics = {};\n    var _a = trackLoadingTime(lifeCycle, domMutationObservable, configuration, loadingType, viewStart, function (newLoadingTime) {\n        viewMetrics.loadingTime = newLoadingTime;\n        scheduleViewUpdate();\n    }), stopLoadingTimeTracking = _a.stop, setLoadEvent = _a.setLoadEvent;\n    var stopCLSTracking;\n    if (isLayoutShiftSupported()) {\n        viewMetrics.cumulativeLayoutShift = 0;\n        (stopCLSTracking = trackCumulativeLayoutShift(lifeCycle, function (cumulativeLayoutShift) {\n            viewMetrics.cumulativeLayoutShift = cumulativeLayoutShift;\n            scheduleViewUpdate();\n        }).stop);\n    }\n    else {\n        stopCLSTracking = noop;\n    }\n    return {\n        stop: function () {\n            stopLoadingTimeTracking();\n            stopCLSTracking();\n        },\n        setLoadEvent: setLoadEvent,\n        viewMetrics: viewMetrics,\n    };\n}\nfunction trackLoadingTime(lifeCycle, domMutationObservable, configuration, loadType, viewStart, callback) {\n    var isWaitingForLoadEvent = loadType === \"initial_load\" /* ViewLoadingType.INITIAL_LOAD */;\n    var isWaitingForActivityLoadingTime = true;\n    var loadingTimeCandidates = [];\n    function invokeCallbackIfAllCandidatesAreReceived() {\n        if (!isWaitingForActivityLoadingTime && !isWaitingForLoadEvent && loadingTimeCandidates.length > 0) {\n            callback(Math.max.apply(Math, loadingTimeCandidates));\n        }\n    }\n    var stop = waitPageActivityEnd(lifeCycle, domMutationObservable, configuration, function (event) {\n        if (isWaitingForActivityLoadingTime) {\n            isWaitingForActivityLoadingTime = false;\n            if (event.hadActivity) {\n                loadingTimeCandidates.push(elapsed(viewStart.timeStamp, event.end));\n            }\n            invokeCallbackIfAllCandidatesAreReceived();\n        }\n    }).stop;\n    return {\n        stop: stop,\n        setLoadEvent: function (loadEvent) {\n            if (isWaitingForLoadEvent) {\n                isWaitingForLoadEvent = false;\n                loadingTimeCandidates.push(loadEvent);\n                invokeCallbackIfAllCandidatesAreReceived();\n            }\n        },\n    };\n}\n/**\n * Track the cumulative layout shifts (CLS).\n * Layout shifts are grouped into session windows.\n * The minimum gap between session windows is 1 second.\n * The maximum duration of a session window is 5 second.\n * The session window layout shift value is the sum of layout shifts inside it.\n * The CLS value is the max of session windows values.\n *\n * This yields a new value whenever the CLS value is updated (a higher session window value is computed).\n *\n * See isLayoutShiftSupported to check for browser support.\n *\n * Documentation:\n * https://web.dev/cls/\n * https://web.dev/evolving-cls/\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/master/src/getCLS.ts\n */\nfunction trackCumulativeLayoutShift(lifeCycle, callback) {\n    var maxClsValue = 0;\n    var window = slidingSessionWindow();\n    var stop = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if (entry.entryType === 'layout-shift' && !entry.hadRecentInput) {\n                window.update(entry);\n                if (window.value() > maxClsValue) {\n                    maxClsValue = window.value();\n                    callback(round(maxClsValue, 4));\n                }\n            }\n        }\n    }).unsubscribe;\n    return {\n        stop: stop,\n    };\n}\nfunction slidingSessionWindow() {\n    var value = 0;\n    var startTime;\n    var endTime;\n    return {\n        update: function (entry) {\n            var shouldCreateNewWindow = startTime === undefined ||\n                entry.startTime - endTime >= ONE_SECOND ||\n                entry.startTime - startTime >= 5 * ONE_SECOND;\n            if (shouldCreateNewWindow) {\n                startTime = endTime = entry.startTime;\n                value = entry.value;\n            }\n            else {\n                value += entry.value;\n                endTime = entry.startTime;\n            }\n        },\n        value: function () { return value; },\n    };\n}\n/**\n * Check whether `layout-shift` is supported by the browser.\n */\nfunction isLayoutShiftSupported() {\n    return supportPerformanceTimingEvent('layout-shift');\n}\n","import { ONE_MINUTE, setTimeout } from '@datadog/browser-core';\nimport { trackEventCounts } from '../../trackEventCounts';\n// Some events are not being counted as they transcend views. To reduce the occurrence;\n// an arbitrary delay is added for stopping event counting after the view ends.\n//\n// Ideally, we would not stop and keep counting events until the end of the session.\n// But this might have a small performance impact if there are many many views:\n// we would need to go through each event to see if the related view matches.\n// So let's have a fairly short delay to avoid impacting performances too much.\n//\n// In the future, we could have views stored in a data structure similar to ContextHistory. Whenever\n// a child event is collected, we could look into this history to find the matching view and\n// increase the associated and increase its counter. Having a centralized data structure for it\n// would allow us to look for views more efficiently.\n//\n// For now, having a small cleanup delay will already improve the situation in most cases.\nexport var KEEP_TRACKING_EVENT_COUNTS_AFTER_VIEW_DELAY = 5 * ONE_MINUTE;\nexport function trackViewEventCounts(lifeCycle, viewId, onChange) {\n    var _a = trackEventCounts({\n        lifeCycle: lifeCycle,\n        isChildEvent: function (event) { return event.view.id === viewId; },\n        onChange: onChange,\n    }), stop = _a.stop, eventCounts = _a.eventCounts;\n    return {\n        scheduleStop: function () {\n            setTimeout(stop, KEEP_TRACKING_EVENT_COUNTS_AFTER_VIEW_DELAY);\n        },\n        eventCounts: eventCounts,\n    };\n}\n","import { PageExitReason, shallowClone, assign, elapsed, generateUUID, ONE_MINUTE, throttle, clocksNow, clocksOrigin, timeStampNow, display, looksLikeRelativeTime, setInterval, clearInterval, } from '@datadog/browser-core';\nimport { trackInitialViewTimings } from './trackInitialViewTimings';\nimport { trackViewMetrics } from './trackViewMetrics';\nimport { trackViewEventCounts } from './trackViewEventCounts';\nexport var THROTTLE_VIEW_UPDATE_PERIOD = 3000;\nexport var SESSION_KEEP_ALIVE_INTERVAL = 5 * ONE_MINUTE;\nexport function trackViews(location, lifeCycle, domMutationObservable, configuration, locationChangeObservable, areViewsTrackedAutomatically, initialViewOptions) {\n    var _a = trackInitialView(initialViewOptions), stopInitialViewTracking = _a.stop, initialView = _a.initialView;\n    var currentView = initialView;\n    var stopViewLifeCycle = startViewLifeCycle().stop;\n    var locationChangeSubscription;\n    if (areViewsTrackedAutomatically) {\n        locationChangeSubscription = renewViewOnLocationChange(locationChangeObservable);\n    }\n    function trackInitialView(options) {\n        var initialView = newView(lifeCycle, domMutationObservable, configuration, location, \"initial_load\" /* ViewLoadingType.INITIAL_LOAD */, clocksOrigin(), options);\n        var stop = trackInitialViewTimings(lifeCycle, function (timings) {\n            initialView.updateTimings(timings);\n            initialView.scheduleUpdate();\n        }).stop;\n        return { initialView: initialView, stop: stop };\n    }\n    function trackViewChange(startClocks, viewOptions) {\n        return newView(lifeCycle, domMutationObservable, configuration, location, \"route_change\" /* ViewLoadingType.ROUTE_CHANGE */, startClocks, viewOptions);\n    }\n    function startViewLifeCycle() {\n        lifeCycle.subscribe(8 /* LifeCycleEventType.SESSION_RENEWED */, function () {\n            // do not trigger view update to avoid wrong data\n            currentView.end();\n            // Renew view on session renewal\n            currentView = trackViewChange(undefined, {\n                name: currentView.name,\n                service: currentView.service,\n                version: currentView.version,\n            });\n        });\n        // End the current view on page unload\n        lifeCycle.subscribe(9 /* LifeCycleEventType.PAGE_EXITED */, function (pageExitEvent) {\n            if (pageExitEvent.reason === PageExitReason.UNLOADING || pageExitEvent.reason === PageExitReason.PAGEHIDE) {\n                currentView.end();\n                currentView.triggerUpdate();\n            }\n        });\n        // Session keep alive\n        var keepAliveInterval = setInterval(function () {\n            currentView.triggerUpdate();\n        }, SESSION_KEEP_ALIVE_INTERVAL);\n        return {\n            stop: function () {\n                clearInterval(keepAliveInterval);\n            },\n        };\n    }\n    function renewViewOnLocationChange(locationChangeObservable) {\n        return locationChangeObservable.subscribe(function (_a) {\n            var oldLocation = _a.oldLocation, newLocation = _a.newLocation;\n            if (areDifferentLocation(oldLocation, newLocation)) {\n                currentView.end();\n                currentView.triggerUpdate();\n                currentView = trackViewChange();\n                return;\n            }\n        });\n    }\n    return {\n        addTiming: function (name, time) {\n            if (time === void 0) { time = timeStampNow(); }\n            currentView.addTiming(name, time);\n            currentView.scheduleUpdate();\n        },\n        startView: function (options, startClocks) {\n            currentView.end(startClocks);\n            currentView.triggerUpdate();\n            currentView = trackViewChange(startClocks, options);\n        },\n        stop: function () {\n            locationChangeSubscription === null || locationChangeSubscription === void 0 ? void 0 : locationChangeSubscription.unsubscribe();\n            stopInitialViewTracking();\n            stopViewLifeCycle();\n            currentView.end();\n        },\n    };\n}\nfunction newView(lifeCycle, domMutationObservable, configuration, initialLocation, loadingType, startClocks, viewOptions) {\n    if (startClocks === void 0) { startClocks = clocksNow(); }\n    // Setup initial values\n    var id = generateUUID();\n    var timings = {};\n    var customTimings = {};\n    var documentVersion = 0;\n    var endClocks;\n    var location = shallowClone(initialLocation);\n    var name;\n    var service;\n    var version;\n    if (viewOptions) {\n        name = viewOptions.name;\n        service = viewOptions.service;\n        version = viewOptions.version;\n    }\n    lifeCycle.notify(2 /* LifeCycleEventType.VIEW_CREATED */, {\n        id: id,\n        name: name,\n        startClocks: startClocks,\n        service: service,\n        version: version,\n    });\n    // Update the view every time the measures are changing\n    var _a = throttle(triggerViewUpdate, THROTTLE_VIEW_UPDATE_PERIOD, {\n        leading: false,\n    }), scheduleViewUpdate = _a.throttled, cancelScheduleViewUpdate = _a.cancel;\n    var _b = trackViewMetrics(lifeCycle, domMutationObservable, configuration, scheduleViewUpdate, loadingType, startClocks), setLoadEvent = _b.setLoadEvent, stopViewMetricsTracking = _b.stop, viewMetrics = _b.viewMetrics;\n    var _c = trackViewEventCounts(lifeCycle, id, scheduleViewUpdate), scheduleStopEventCountsTracking = _c.scheduleStop, eventCounts = _c.eventCounts;\n    // Initial view update\n    triggerViewUpdate();\n    function triggerViewUpdate() {\n        documentVersion += 1;\n        var currentEnd = endClocks === undefined ? timeStampNow() : endClocks.timeStamp;\n        lifeCycle.notify(3 /* LifeCycleEventType.VIEW_UPDATED */, assign({\n            customTimings: customTimings,\n            documentVersion: documentVersion,\n            id: id,\n            name: name,\n            service: service,\n            version: version,\n            loadingType: loadingType,\n            location: location,\n            startClocks: startClocks,\n            timings: timings,\n            duration: elapsed(startClocks.timeStamp, currentEnd),\n            isActive: endClocks === undefined,\n            eventCounts: eventCounts,\n        }, viewMetrics));\n    }\n    return {\n        name: name,\n        service: service,\n        version: version,\n        scheduleUpdate: scheduleViewUpdate,\n        end: function (clocks) {\n            if (clocks === void 0) { clocks = clocksNow(); }\n            endClocks = clocks;\n            lifeCycle.notify(4 /* LifeCycleEventType.VIEW_ENDED */, { endClocks: endClocks });\n            stopViewMetricsTracking();\n            scheduleStopEventCountsTracking();\n        },\n        triggerUpdate: function () {\n            // cancel any pending view updates execution\n            cancelScheduleViewUpdate();\n            triggerViewUpdate();\n        },\n        updateTimings: function (newTimings) {\n            timings = newTimings;\n            if (newTimings.loadEvent !== undefined) {\n                setLoadEvent(newTimings.loadEvent);\n            }\n        },\n        addTiming: function (name, time) {\n            var relativeTime = looksLikeRelativeTime(time) ? time : elapsed(startClocks.timeStamp, time);\n            customTimings[sanitizeTiming(name)] = relativeTime;\n        },\n    };\n}\n/**\n * Timing name is used as facet path that must contain only letters, digits, or the characters - _ . @ $\n */\nfunction sanitizeTiming(name) {\n    var sanitized = name.replace(/[^a-zA-Z0-9-_.@$]/g, '_');\n    if (sanitized !== name) {\n        display.warn(\"Invalid timing name: \".concat(name, \", sanitized to: \").concat(sanitized));\n    }\n    return sanitized;\n}\nfunction areDifferentLocation(currentLocation, otherLocation) {\n    return (currentLocation.pathname !== otherLocation.pathname ||\n        (!isHashAnAnchor(otherLocation.hash) &&\n            getPathFromHash(otherLocation.hash) !== getPathFromHash(currentLocation.hash)));\n}\nfunction isHashAnAnchor(hash) {\n    var correspondingId = hash.substr(1);\n    return !!document.getElementById(correspondingId);\n}\nfunction getPathFromHash(hash) {\n    var index = hash.indexOf('?');\n    return index < 0 ? hash : hash.slice(0, index);\n}\n","import { isEmptyObject, mapValues, toServerDuration, isNumber } from '@datadog/browser-core';\nimport { trackViews } from './trackViews';\nexport function startViewCollection(lifeCycle, configuration, location, domMutationObservable, locationChangeObservable, foregroundContexts, featureFlagContexts, recorderApi, initialViewOptions) {\n    lifeCycle.subscribe(3 /* LifeCycleEventType.VIEW_UPDATED */, function (view) {\n        return lifeCycle.notify(10 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, processViewUpdate(view, foregroundContexts, featureFlagContexts, recorderApi));\n    });\n    return trackViews(location, lifeCycle, domMutationObservable, configuration, locationChangeObservable, !configuration.trackViewsManually, initialViewOptions);\n}\nfunction processViewUpdate(view, foregroundContexts, featureFlagContexts, recorderApi) {\n    var replayStats = recorderApi.getReplayStats(view.id);\n    var featureFlagContext = featureFlagContexts.findFeatureFlagEvaluations(view.startClocks.relative);\n    var viewEvent = {\n        _dd: {\n            document_version: view.documentVersion,\n            replay_stats: replayStats,\n        },\n        date: view.startClocks.timeStamp,\n        type: \"view\" /* RumEventType.VIEW */,\n        view: {\n            action: {\n                count: view.eventCounts.actionCount,\n            },\n            frustration: {\n                count: view.eventCounts.frustrationCount,\n            },\n            cumulative_layout_shift: view.cumulativeLayoutShift,\n            first_byte: toServerDuration(view.timings.firstByte),\n            dom_complete: toServerDuration(view.timings.domComplete),\n            dom_content_loaded: toServerDuration(view.timings.domContentLoaded),\n            dom_interactive: toServerDuration(view.timings.domInteractive),\n            error: {\n                count: view.eventCounts.errorCount,\n            },\n            first_contentful_paint: toServerDuration(view.timings.firstContentfulPaint),\n            first_input_delay: toServerDuration(view.timings.firstInputDelay),\n            first_input_time: toServerDuration(view.timings.firstInputTime),\n            is_active: view.isActive,\n            name: view.name,\n            largest_contentful_paint: toServerDuration(view.timings.largestContentfulPaint),\n            load_event: toServerDuration(view.timings.loadEvent),\n            loading_time: discardNegativeDuration(toServerDuration(view.loadingTime)),\n            loading_type: view.loadingType,\n            long_task: {\n                count: view.eventCounts.longTaskCount,\n            },\n            resource: {\n                count: view.eventCounts.resourceCount,\n            },\n            time_spent: toServerDuration(view.duration),\n            in_foreground_periods: foregroundContexts.selectInForegroundPeriodsFor(view.startClocks.relative, view.duration),\n        },\n        feature_flags: featureFlagContext && !isEmptyObject(featureFlagContext) ? featureFlagContext : undefined,\n        session: {\n            has_replay: replayStats ? true : undefined,\n        },\n    };\n    if (!isEmptyObject(view.customTimings)) {\n        viewEvent.view.custom_timings = mapValues(view.customTimings, toServerDuration);\n    }\n    return {\n        rawRumEvent: viewEvent,\n        startTime: view.startClocks.relative,\n        domainContext: {\n            location: view.location,\n        },\n    };\n}\nfunction discardNegativeDuration(duration) {\n    return isNumber(duration) && duration < 0 ? undefined : duration;\n}\n","import { deleteCookie, getCookie, setCookie } from '../../browser/cookie';\nimport { setTimeout } from '../../tools/timer';\nimport { isChromium } from '../../tools/utils/browserDetection';\nimport { dateNow } from '../../tools/utils/timeUtils';\nimport { objectEntries } from '../../tools/utils/polyfills';\nimport { isEmptyObject } from '../../tools/utils/objectUtils';\nimport { generateUUID } from '../../tools/utils/stringUtils';\nimport { SESSION_EXPIRATION_DELAY } from './sessionConstants';\nvar SESSION_ENTRY_REGEXP = /^([a-z]+)=([a-z0-9-]+)$/;\nvar SESSION_ENTRY_SEPARATOR = '&';\nexport var SESSION_COOKIE_NAME = '_dd_s';\n// arbitrary values\nexport var LOCK_RETRY_DELAY = 10;\nexport var MAX_NUMBER_OF_LOCK_RETRIES = 100;\nvar bufferedOperations = [];\nvar ongoingOperations;\nexport function withCookieLockAccess(operations, numberOfRetries) {\n    var _a;\n    if (numberOfRetries === void 0) { numberOfRetries = 0; }\n    if (!ongoingOperations) {\n        ongoingOperations = operations;\n    }\n    if (operations !== ongoingOperations) {\n        bufferedOperations.push(operations);\n        return;\n    }\n    if (numberOfRetries >= MAX_NUMBER_OF_LOCK_RETRIES) {\n        next();\n        return;\n    }\n    var currentLock;\n    var currentSession = retrieveSessionCookie();\n    if (isCookieLockEnabled()) {\n        // if someone has lock, retry later\n        if (currentSession.lock) {\n            retryLater(operations, numberOfRetries);\n            return;\n        }\n        // acquire lock\n        currentLock = generateUUID();\n        currentSession.lock = currentLock;\n        setSessionCookie(currentSession, operations.options);\n        // if lock is not acquired, retry later\n        currentSession = retrieveSessionCookie();\n        if (currentSession.lock !== currentLock) {\n            retryLater(operations, numberOfRetries);\n            return;\n        }\n    }\n    var processedSession = operations.process(currentSession);\n    if (isCookieLockEnabled()) {\n        // if lock corrupted after process, retry later\n        currentSession = retrieveSessionCookie();\n        if (currentSession.lock !== currentLock) {\n            retryLater(operations, numberOfRetries);\n            return;\n        }\n    }\n    if (processedSession) {\n        persistSessionCookie(processedSession, operations.options);\n    }\n    if (isCookieLockEnabled()) {\n        // correctly handle lock around expiration would require to handle this case properly at several levels\n        // since we don't have evidence of lock issues around expiration, let's just not do the corruption check for it\n        if (!(processedSession && isExpiredState(processedSession))) {\n            // if lock corrupted after persist, retry later\n            currentSession = retrieveSessionCookie();\n            if (currentSession.lock !== currentLock) {\n                retryLater(operations, numberOfRetries);\n                return;\n            }\n            delete currentSession.lock;\n            setSessionCookie(currentSession, operations.options);\n            processedSession = currentSession;\n        }\n    }\n    // call after even if session is not persisted in order to perform operations on\n    // up-to-date cookie value, the value could have been modified by another tab\n    (_a = operations.after) === null || _a === void 0 ? void 0 : _a.call(operations, processedSession || currentSession);\n    next();\n}\n/**\n * Cookie lock strategy allows mitigating issues due to concurrent access to cookie.\n * This issue concerns only chromium browsers and enabling this on firefox increase cookie write failures.\n */\nfunction isCookieLockEnabled() {\n    return isChromium();\n}\nfunction retryLater(operations, currentNumberOfRetries) {\n    setTimeout(function () {\n        withCookieLockAccess(operations, currentNumberOfRetries + 1);\n    }, LOCK_RETRY_DELAY);\n}\nfunction next() {\n    ongoingOperations = undefined;\n    var nextOperations = bufferedOperations.shift();\n    if (nextOperations) {\n        withCookieLockAccess(nextOperations);\n    }\n}\nexport function persistSessionCookie(session, options) {\n    if (isExpiredState(session)) {\n        deleteSessionCookie(options);\n        return;\n    }\n    session.expire = String(dateNow() + SESSION_EXPIRATION_DELAY);\n    setSessionCookie(session, options);\n}\nfunction setSessionCookie(session, options) {\n    setCookie(SESSION_COOKIE_NAME, toSessionString(session), SESSION_EXPIRATION_DELAY, options);\n}\nexport function toSessionString(session) {\n    return objectEntries(session)\n        .map(function (_a) {\n        var key = _a[0], value = _a[1];\n        return \"\".concat(key, \"=\").concat(value);\n    })\n        .join(SESSION_ENTRY_SEPARATOR);\n}\nexport function retrieveSessionCookie() {\n    var sessionString = getCookie(SESSION_COOKIE_NAME);\n    var session = {};\n    if (isValidSessionString(sessionString)) {\n        sessionString.split(SESSION_ENTRY_SEPARATOR).forEach(function (entry) {\n            var matches = SESSION_ENTRY_REGEXP.exec(entry);\n            if (matches !== null) {\n                var key = matches[1], value = matches[2];\n                session[key] = value;\n            }\n        });\n    }\n    return session;\n}\nexport function deleteSessionCookie(options) {\n    deleteCookie(SESSION_COOKIE_NAME, options);\n}\nfunction isValidSessionString(sessionString) {\n    return (sessionString !== undefined &&\n        (sessionString.indexOf(SESSION_ENTRY_SEPARATOR) !== -1 || SESSION_ENTRY_REGEXP.test(sessionString)));\n}\nfunction isExpiredState(session) {\n    return isEmptyObject(session);\n}\n","import { getCookie } from '../../browser/cookie';\nimport { SESSION_COOKIE_NAME, persistSessionCookie } from './sessionCookieStore';\nexport var OLD_SESSION_COOKIE_NAME = '_dd';\nexport var OLD_RUM_COOKIE_NAME = '_dd_r';\nexport var OLD_LOGS_COOKIE_NAME = '_dd_l';\n// duplicate values to avoid dependency issues\nexport var RUM_SESSION_KEY = 'rum';\nexport var LOGS_SESSION_KEY = 'logs';\n/**\n * This migration should remain in the codebase as long as older versions are available/live\n * to allow older sdk versions to be upgraded to newer versions without compatibility issues.\n */\nexport function tryOldCookiesMigration(options) {\n    var sessionString = getCookie(SESSION_COOKIE_NAME);\n    var oldSessionId = getCookie(OLD_SESSION_COOKIE_NAME);\n    var oldRumType = getCookie(OLD_RUM_COOKIE_NAME);\n    var oldLogsType = getCookie(OLD_LOGS_COOKIE_NAME);\n    if (!sessionString) {\n        var session = {};\n        if (oldSessionId) {\n            session.id = oldSessionId;\n        }\n        if (oldLogsType && /^[01]$/.test(oldLogsType)) {\n            session[LOGS_SESSION_KEY] = oldLogsType;\n        }\n        if (oldRumType && /^[012]$/.test(oldRumType)) {\n            session[RUM_SESSION_KEY] = oldRumType;\n        }\n        persistSessionCookie(session, options);\n    }\n}\n","import { ValueHistory } from '../../tools/valueHistory';\nimport { relativeNow, clocksOrigin, ONE_MINUTE } from '../../tools/utils/timeUtils';\nimport { addEventListener, addEventListeners } from '../../browser/addEventListener';\nimport { clearInterval, setInterval } from '../../tools/timer';\nimport { tryOldCookiesMigration } from './oldCookiesMigration';\nimport { startSessionStore } from './sessionStore';\nimport { SESSION_TIME_OUT_DELAY } from './sessionConstants';\nexport var VISIBILITY_CHECK_DELAY = ONE_MINUTE;\nvar SESSION_CONTEXT_TIMEOUT_DELAY = SESSION_TIME_OUT_DELAY;\nvar stopCallbacks = [];\nexport function startSessionManager(options, productKey, computeSessionState) {\n    tryOldCookiesMigration(options);\n    var sessionStore = startSessionStore(options, productKey, computeSessionState);\n    stopCallbacks.push(function () { return sessionStore.stop(); });\n    var sessionContextHistory = new ValueHistory(SESSION_CONTEXT_TIMEOUT_DELAY);\n    stopCallbacks.push(function () { return sessionContextHistory.stop(); });\n    sessionStore.renewObservable.subscribe(function () {\n        sessionContextHistory.add(buildSessionContext(), relativeNow());\n    });\n    sessionStore.expireObservable.subscribe(function () {\n        sessionContextHistory.closeActive(relativeNow());\n    });\n    sessionStore.expandOrRenewSession();\n    sessionContextHistory.add(buildSessionContext(), clocksOrigin().relative);\n    trackActivity(function () { return sessionStore.expandOrRenewSession(); });\n    trackVisibility(function () { return sessionStore.expandSession(); });\n    function buildSessionContext() {\n        return {\n            id: sessionStore.getSession().id,\n            trackingType: sessionStore.getSession()[productKey],\n        };\n    }\n    return {\n        findActiveSession: function (startTime) { return sessionContextHistory.find(startTime); },\n        renewObservable: sessionStore.renewObservable,\n        expireObservable: sessionStore.expireObservable,\n        expire: sessionStore.expire,\n    };\n}\nexport function stopSessionManager() {\n    stopCallbacks.forEach(function (e) { return e(); });\n    stopCallbacks = [];\n}\nfunction trackActivity(expandOrRenewSession) {\n    var stop = addEventListeners(window, [\"click\" /* DOM_EVENT.CLICK */, \"touchstart\" /* DOM_EVENT.TOUCH_START */, \"keydown\" /* DOM_EVENT.KEY_DOWN */, \"scroll\" /* DOM_EVENT.SCROLL */], expandOrRenewSession, { capture: true, passive: true }).stop;\n    stopCallbacks.push(stop);\n}\nfunction trackVisibility(expandSession) {\n    var expandSessionWhenVisible = function () {\n        if (document.visibilityState === 'visible') {\n            expandSession();\n        }\n    };\n    var stop = addEventListener(document, \"visibilitychange\" /* DOM_EVENT.VISIBILITY_CHANGE */, expandSessionWhenVisible).stop;\n    stopCallbacks.push(stop);\n    var visibilityCheckInterval = setInterval(expandSessionWhenVisible, VISIBILITY_CHECK_DELAY);\n    stopCallbacks.push(function () {\n        clearInterval(visibilityCheckInterval);\n    });\n}\n","import { COOKIE_ACCESS_DELAY } from '../../browser/cookie';\nimport { clearInterval, setInterval } from '../../tools/timer';\nimport { Observable } from '../../tools/observable';\nimport { dateNow } from '../../tools/utils/timeUtils';\nimport { throttle } from '../../tools/utils/functionUtils';\nimport { generateUUID } from '../../tools/utils/stringUtils';\nimport { SESSION_TIME_OUT_DELAY } from './sessionConstants';\nimport { deleteSessionCookie, retrieveSessionCookie, withCookieLockAccess } from './sessionCookieStore';\n/**\n * Different session concepts:\n * - tracked, the session has an id and is updated along the user navigation\n * - not tracked, the session does not have an id but it is updated along the user navigation\n * - inactive, no session in store or session expired, waiting for a renew session\n */\nexport function startSessionStore(options, productKey, computeSessionState) {\n    var renewObservable = new Observable();\n    var expireObservable = new Observable();\n    var watchSessionTimeoutId = setInterval(watchSession, COOKIE_ACCESS_DELAY);\n    var sessionCache = retrieveActiveSession();\n    function expandOrRenewSession() {\n        var isTracked;\n        withCookieLockAccess({\n            options: options,\n            process: function (cookieSession) {\n                var synchronizedSession = synchronizeSession(cookieSession);\n                isTracked = expandOrRenewCookie(synchronizedSession);\n                return synchronizedSession;\n            },\n            after: function (cookieSession) {\n                if (isTracked && !hasSessionInCache()) {\n                    renewSessionInCache(cookieSession);\n                }\n                sessionCache = cookieSession;\n            },\n        });\n    }\n    function expandSession() {\n        withCookieLockAccess({\n            options: options,\n            process: function (cookieSession) { return (hasSessionInCache() ? synchronizeSession(cookieSession) : undefined); },\n        });\n    }\n    /**\n     * allows two behaviors:\n     * - if the session is active, synchronize the session cache without updating the session cookie\n     * - if the session is not active, clear the session cookie and expire the session cache\n     */\n    function watchSession() {\n        withCookieLockAccess({\n            options: options,\n            process: function (cookieSession) { return (!isActiveSession(cookieSession) ? {} : undefined); },\n            after: synchronizeSession,\n        });\n    }\n    function synchronizeSession(cookieSession) {\n        if (!isActiveSession(cookieSession)) {\n            cookieSession = {};\n        }\n        if (hasSessionInCache()) {\n            if (isSessionInCacheOutdated(cookieSession)) {\n                expireSessionInCache();\n            }\n            else {\n                sessionCache = cookieSession;\n            }\n        }\n        return cookieSession;\n    }\n    function expandOrRenewCookie(cookieSession) {\n        var _a = computeSessionState(cookieSession[productKey]), trackingType = _a.trackingType, isTracked = _a.isTracked;\n        cookieSession[productKey] = trackingType;\n        if (isTracked && !cookieSession.id) {\n            cookieSession.id = generateUUID();\n            cookieSession.created = String(dateNow());\n        }\n        return isTracked;\n    }\n    function hasSessionInCache() {\n        return sessionCache[productKey] !== undefined;\n    }\n    function isSessionInCacheOutdated(cookieSession) {\n        return sessionCache.id !== cookieSession.id || sessionCache[productKey] !== cookieSession[productKey];\n    }\n    function expireSessionInCache() {\n        sessionCache = {};\n        expireObservable.notify();\n    }\n    function renewSessionInCache(cookieSession) {\n        sessionCache = cookieSession;\n        renewObservable.notify();\n    }\n    function retrieveActiveSession() {\n        var session = retrieveSessionCookie();\n        if (isActiveSession(session)) {\n            return session;\n        }\n        return {};\n    }\n    function isActiveSession(session) {\n        // created and expire can be undefined for versions which was not storing them\n        // these checks could be removed when older versions will not be available/live anymore\n        return ((session.created === undefined || dateNow() - Number(session.created) < SESSION_TIME_OUT_DELAY) &&\n            (session.expire === undefined || dateNow() < Number(session.expire)));\n    }\n    return {\n        expandOrRenewSession: throttle(expandOrRenewSession, COOKIE_ACCESS_DELAY).throttled,\n        expandSession: expandSession,\n        getSession: function () { return sessionCache; },\n        renewObservable: renewObservable,\n        expireObservable: expireObservable,\n        expire: function () {\n            deleteSessionCookie(options);\n            synchronizeSession({});\n        },\n        stop: function () {\n            clearInterval(watchSessionTimeoutId);\n        },\n    };\n}\n","import { noop, performDraw, startSessionManager } from '@datadog/browser-core';\nexport var RUM_SESSION_KEY = 'rum';\nexport function startRumSessionManager(configuration, lifeCycle) {\n    var sessionManager = startSessionManager(configuration.cookieOptions, RUM_SESSION_KEY, function (rawTrackingType) {\n        return computeSessionState(configuration, rawTrackingType);\n    });\n    sessionManager.expireObservable.subscribe(function () {\n        lifeCycle.notify(7 /* LifeCycleEventType.SESSION_EXPIRED */);\n    });\n    sessionManager.renewObservable.subscribe(function () {\n        lifeCycle.notify(8 /* LifeCycleEventType.SESSION_RENEWED */);\n    });\n    return {\n        findTrackedSession: function (startTime) {\n            var session = sessionManager.findActiveSession(startTime);\n            if (!session || !isTypeTracked(session.trackingType)) {\n                return;\n            }\n            var plan = session.trackingType === \"1\" /* RumTrackingType.TRACKED_WITH_SESSION_REPLAY */\n                ? 2 /* RumSessionPlan.WITH_SESSION_REPLAY */\n                : 1 /* RumSessionPlan.WITHOUT_SESSION_REPLAY */;\n            return {\n                id: session.id,\n                plan: plan,\n                sessionReplayAllowed: plan === 2 /* RumSessionPlan.WITH_SESSION_REPLAY */,\n                longTaskAllowed: configuration.trackLongTasks !== undefined\n                    ? configuration.trackLongTasks\n                    : configuration.oldPlansBehavior && plan === 2 /* RumSessionPlan.WITH_SESSION_REPLAY */,\n                resourceAllowed: configuration.trackResources !== undefined\n                    ? configuration.trackResources\n                    : configuration.oldPlansBehavior && plan === 2 /* RumSessionPlan.WITH_SESSION_REPLAY */,\n            };\n        },\n        expire: sessionManager.expire,\n    };\n}\n/**\n * Start a tracked replay session stub\n */\nexport function startRumSessionManagerStub() {\n    var session = {\n        id: '00000000-aaaa-0000-aaaa-000000000000',\n        plan: 1 /* RumSessionPlan.WITHOUT_SESSION_REPLAY */,\n        sessionReplayAllowed: false,\n        longTaskAllowed: true,\n        resourceAllowed: true,\n    };\n    return {\n        findTrackedSession: function () { return session; },\n        expire: noop,\n    };\n}\nfunction computeSessionState(configuration, rawTrackingType) {\n    var trackingType;\n    if (hasValidRumSession(rawTrackingType)) {\n        trackingType = rawTrackingType;\n    }\n    else if (!performDraw(configuration.sessionSampleRate)) {\n        trackingType = \"0\" /* RumTrackingType.NOT_TRACKED */;\n    }\n    else if (!performDraw(configuration.sessionReplaySampleRate)) {\n        trackingType = \"2\" /* RumTrackingType.TRACKED_WITHOUT_SESSION_REPLAY */;\n    }\n    else {\n        trackingType = \"1\" /* RumTrackingType.TRACKED_WITH_SESSION_REPLAY */;\n    }\n    return {\n        trackingType: trackingType,\n        isTracked: isTypeTracked(trackingType),\n    };\n}\nfunction hasValidRumSession(trackingType) {\n    return (trackingType === \"0\" /* RumTrackingType.NOT_TRACKED */ ||\n        trackingType === \"1\" /* RumTrackingType.TRACKED_WITH_SESSION_REPLAY */ ||\n        trackingType === \"2\" /* RumTrackingType.TRACKED_WITHOUT_SESSION_REPLAY */);\n}\nfunction isTypeTracked(rumSessionType) {\n    return (rumSessionType === \"2\" /* RumTrackingType.TRACKED_WITHOUT_SESSION_REPLAY */ ||\n        rumSessionType === \"1\" /* RumTrackingType.TRACKED_WITH_SESSION_REPLAY */);\n}\n","import { Observable } from '../tools/observable';\nimport { clearTimeout, setTimeout } from '../tools/timer';\nexport function createFlushController(_a) {\n    var messagesLimit = _a.messagesLimit, bytesLimit = _a.bytesLimit, durationLimit = _a.durationLimit, pageExitObservable = _a.pageExitObservable;\n    var flushObservable = new Observable();\n    pageExitObservable.subscribe(function (event) { return flush(event.reason); });\n    var currentBytesCount = 0;\n    var currentMessagesCount = 0;\n    function flush(flushReason) {\n        if (currentMessagesCount === 0) {\n            return;\n        }\n        var messagesCount = currentMessagesCount;\n        var bytesCount = currentBytesCount;\n        currentMessagesCount = 0;\n        currentBytesCount = 0;\n        cancelDurationLimitTimeout();\n        flushObservable.notify({\n            reason: flushReason,\n            messagesCount: messagesCount,\n            bytesCount: bytesCount,\n        });\n    }\n    var durationLimitTimeoutId;\n    function scheduleDurationLimitTimeout() {\n        if (durationLimitTimeoutId === undefined) {\n            durationLimitTimeoutId = setTimeout(function () {\n                flush('duration_limit');\n            }, durationLimit);\n        }\n    }\n    function cancelDurationLimitTimeout() {\n        clearTimeout(durationLimitTimeoutId);\n        durationLimitTimeoutId = undefined;\n    }\n    return {\n        flushObservable: flushObservable,\n        get messagesCount() {\n            return currentMessagesCount;\n        },\n        notifyBeforeAddMessage: function (messageBytesCount) {\n            if (currentBytesCount + messageBytesCount >= bytesLimit) {\n                flush('bytes_limit');\n            }\n            // Consider the message to be added now rather than in `notifyAfterAddMessage`, because if no message\n            // was added yet and `notifyAfterAddMessage` is called asynchronously, we still want to notify when a\n            // flush is needed (for example on page exit).\n            currentMessagesCount += 1;\n            currentBytesCount += messageBytesCount;\n            scheduleDurationLimitTimeout();\n        },\n        notifyAfterAddMessage: function () {\n            if (currentMessagesCount >= messagesLimit) {\n                flush('messages_limit');\n            }\n            else if (currentBytesCount >= bytesLimit) {\n                flush('bytes_limit');\n            }\n        },\n        notifyAfterRemoveMessage: function (messageBytesCount) {\n            currentBytesCount -= messageBytesCount;\n            currentMessagesCount -= 1;\n            if (currentMessagesCount === 0) {\n                cancelDurationLimitTimeout();\n            }\n        },\n    };\n}\n","import { display } from '../tools/display';\nimport { objectValues } from '../tools/utils/polyfills';\nimport { isPageExitReason } from '../browser/pageExitObservable';\nimport { computeBytesCount } from '../tools/utils/byteUtils';\nimport { jsonStringify } from '../tools/serialisation/jsonStringify';\nvar Batch = /** @class */ (function () {\n    function Batch(request, flushController, messageBytesLimit) {\n        var _this = this;\n        this.request = request;\n        this.flushController = flushController;\n        this.messageBytesLimit = messageBytesLimit;\n        this.pushOnlyBuffer = [];\n        this.upsertBuffer = {};\n        this.flushController.flushObservable.subscribe(function (event) { return _this.flush(event); });\n    }\n    Batch.prototype.add = function (message) {\n        this.addOrUpdate(message);\n    };\n    Batch.prototype.upsert = function (message, key) {\n        this.addOrUpdate(message, key);\n    };\n    Batch.prototype.flush = function (event) {\n        var messages = this.pushOnlyBuffer.concat(objectValues(this.upsertBuffer));\n        this.pushOnlyBuffer = [];\n        this.upsertBuffer = {};\n        var payload = { data: messages.join('\\n'), bytesCount: event.bytesCount, flushReason: event.reason };\n        if (isPageExitReason(event.reason)) {\n            this.request.sendOnExit(payload);\n        }\n        else {\n            this.request.send(payload);\n        }\n    };\n    Batch.prototype.addOrUpdate = function (message, key) {\n        var _a = this.process(message), processedMessage = _a.processedMessage, messageBytesCount = _a.messageBytesCount;\n        if (messageBytesCount >= this.messageBytesLimit) {\n            display.warn(\"Discarded a message whose size was bigger than the maximum allowed size \".concat(this.messageBytesLimit, \"KB.\"));\n            return;\n        }\n        if (this.hasMessageFor(key)) {\n            this.remove(key);\n        }\n        this.push(processedMessage, messageBytesCount, key);\n    };\n    Batch.prototype.process = function (message) {\n        var processedMessage = jsonStringify(message);\n        var messageBytesCount = computeBytesCount(processedMessage);\n        return { processedMessage: processedMessage, messageBytesCount: messageBytesCount };\n    };\n    Batch.prototype.push = function (processedMessage, messageBytesCount, key) {\n        // If there are other messages, a '\\n' will be added at serialization\n        var separatorBytesCount = this.flushController.messagesCount > 0 ? 1 : 0;\n        this.flushController.notifyBeforeAddMessage(messageBytesCount + separatorBytesCount);\n        if (key !== undefined) {\n            this.upsertBuffer[key] = processedMessage;\n        }\n        else {\n            this.pushOnlyBuffer.push(processedMessage);\n        }\n        this.flushController.notifyAfterAddMessage();\n    };\n    Batch.prototype.remove = function (key) {\n        var removedMessage = this.upsertBuffer[key];\n        delete this.upsertBuffer[key];\n        var messageBytesCount = computeBytesCount(removedMessage);\n        // If there are other messages, a '\\n' will be added at serialization\n        var separatorBytesCount = this.flushController.messagesCount > 1 ? 1 : 0;\n        this.flushController.notifyAfterRemoveMessage(messageBytesCount + separatorBytesCount);\n    };\n    Batch.prototype.hasMessageFor = function (key) {\n        return key !== undefined && this.upsertBuffer[key] !== undefined;\n    };\n    return Batch;\n}());\nexport { Batch };\n","import { setTimeout } from '../tools/timer';\nimport { clocksNow, ONE_MINUTE, ONE_SECOND } from '../tools/utils/timeUtils';\nimport { ErrorSource } from '../domain/error/error';\nimport { ONE_MEBI_BYTE, ONE_KIBI_BYTE } from '../tools/utils/byteUtils';\nimport { isServerError } from '../tools/utils/responseUtils';\nexport var MAX_ONGOING_BYTES_COUNT = 80 * ONE_KIBI_BYTE;\nexport var MAX_ONGOING_REQUESTS = 32;\nexport var MAX_QUEUE_BYTES_COUNT = 3 * ONE_MEBI_BYTE;\nexport var MAX_BACKOFF_TIME = ONE_MINUTE;\nexport var INITIAL_BACKOFF_TIME = ONE_SECOND;\nexport function sendWithRetryStrategy(payload, state, sendStrategy, endpointType, reportError) {\n    if (state.transportStatus === 0 /* TransportStatus.UP */ &&\n        state.queuedPayloads.size() === 0 &&\n        state.bandwidthMonitor.canHandle(payload)) {\n        send(payload, state, sendStrategy, {\n            onSuccess: function () { return retryQueuedPayloads(0 /* RetryReason.AFTER_SUCCESS */, state, sendStrategy, endpointType, reportError); },\n            onFailure: function () {\n                state.queuedPayloads.enqueue(payload);\n                scheduleRetry(state, sendStrategy, endpointType, reportError);\n            },\n        });\n    }\n    else {\n        state.queuedPayloads.enqueue(payload);\n    }\n}\nfunction scheduleRetry(state, sendStrategy, endpointType, reportError) {\n    if (state.transportStatus !== 2 /* TransportStatus.DOWN */) {\n        return;\n    }\n    setTimeout(function () {\n        var payload = state.queuedPayloads.first();\n        send(payload, state, sendStrategy, {\n            onSuccess: function () {\n                state.queuedPayloads.dequeue();\n                state.currentBackoffTime = INITIAL_BACKOFF_TIME;\n                retryQueuedPayloads(1 /* RetryReason.AFTER_RESUME */, state, sendStrategy, endpointType, reportError);\n            },\n            onFailure: function () {\n                state.currentBackoffTime = Math.min(MAX_BACKOFF_TIME, state.currentBackoffTime * 2);\n                scheduleRetry(state, sendStrategy, endpointType, reportError);\n            },\n        });\n    }, state.currentBackoffTime);\n}\nfunction send(payload, state, sendStrategy, _a) {\n    var onSuccess = _a.onSuccess, onFailure = _a.onFailure;\n    state.bandwidthMonitor.add(payload);\n    sendStrategy(payload, function (response) {\n        state.bandwidthMonitor.remove(payload);\n        if (!shouldRetryRequest(response)) {\n            state.transportStatus = 0 /* TransportStatus.UP */;\n            onSuccess();\n        }\n        else {\n            // do not consider transport down if another ongoing request could succeed\n            state.transportStatus =\n                state.bandwidthMonitor.ongoingRequestCount > 0 ? 1 /* TransportStatus.FAILURE_DETECTED */ : 2 /* TransportStatus.DOWN */;\n            payload.retry = {\n                count: payload.retry ? payload.retry.count + 1 : 1,\n                lastFailureStatus: response.status,\n            };\n            onFailure();\n        }\n    });\n}\nfunction retryQueuedPayloads(reason, state, sendStrategy, endpointType, reportError) {\n    if (reason === 0 /* RetryReason.AFTER_SUCCESS */ && state.queuedPayloads.isFull() && !state.queueFullReported) {\n        reportError({\n            message: \"Reached max \".concat(endpointType, \" events size queued for upload: \").concat(MAX_QUEUE_BYTES_COUNT / ONE_MEBI_BYTE, \"MiB\"),\n            source: ErrorSource.AGENT,\n            startClocks: clocksNow(),\n        });\n        state.queueFullReported = true;\n    }\n    var previousQueue = state.queuedPayloads;\n    state.queuedPayloads = newPayloadQueue();\n    while (previousQueue.size() > 0) {\n        sendWithRetryStrategy(previousQueue.dequeue(), state, sendStrategy, endpointType, reportError);\n    }\n}\nfunction shouldRetryRequest(response) {\n    return (response.type !== 'opaque' &&\n        ((response.status === 0 && !navigator.onLine) ||\n            response.status === 408 ||\n            response.status === 429 ||\n            isServerError(response.status)));\n}\nexport function newRetryState() {\n    return {\n        transportStatus: 0 /* TransportStatus.UP */,\n        currentBackoffTime: INITIAL_BACKOFF_TIME,\n        bandwidthMonitor: newBandwidthMonitor(),\n        queuedPayloads: newPayloadQueue(),\n        queueFullReported: false,\n    };\n}\nfunction newPayloadQueue() {\n    var queue = [];\n    return {\n        bytesCount: 0,\n        enqueue: function (payload) {\n            if (this.isFull()) {\n                return;\n            }\n            queue.push(payload);\n            this.bytesCount += payload.bytesCount;\n        },\n        first: function () {\n            return queue[0];\n        },\n        dequeue: function () {\n            var payload = queue.shift();\n            if (payload) {\n                this.bytesCount -= payload.bytesCount;\n            }\n            return payload;\n        },\n        size: function () {\n            return queue.length;\n        },\n        isFull: function () {\n            return this.bytesCount >= MAX_QUEUE_BYTES_COUNT;\n        },\n    };\n}\nfunction newBandwidthMonitor() {\n    return {\n        ongoingRequestCount: 0,\n        ongoingByteCount: 0,\n        canHandle: function (payload) {\n            return (this.ongoingRequestCount === 0 ||\n                (this.ongoingByteCount + payload.bytesCount <= MAX_ONGOING_BYTES_COUNT &&\n                    this.ongoingRequestCount < MAX_ONGOING_REQUESTS));\n        },\n        add: function (payload) {\n            this.ongoingRequestCount += 1;\n            this.ongoingByteCount += payload.bytesCount;\n        },\n        remove: function (payload) {\n            this.ongoingRequestCount -= 1;\n            this.ongoingByteCount -= payload.bytesCount;\n        },\n    };\n}\n","import { addTelemetryError } from '../domain/telemetry';\nimport { monitor } from '../tools/monitor';\nimport { addEventListener } from '../browser/addEventListener';\nimport { newRetryState, sendWithRetryStrategy } from './sendWithRetryStrategy';\nexport function createHttpRequest(endpointBuilder, bytesLimit, reportError) {\n    var retryState = newRetryState();\n    var sendStrategyForRetry = function (payload, onResponse) {\n        return fetchKeepAliveStrategy(endpointBuilder, bytesLimit, payload, onResponse);\n    };\n    return {\n        send: function (payload) {\n            sendWithRetryStrategy(payload, retryState, sendStrategyForRetry, endpointBuilder.endpointType, reportError);\n        },\n        /**\n         * Since fetch keepalive behaves like regular fetch on Firefox,\n         * keep using sendBeaconStrategy on exit\n         */\n        sendOnExit: function (payload) {\n            sendBeaconStrategy(endpointBuilder, bytesLimit, payload);\n        },\n    };\n}\nfunction sendBeaconStrategy(endpointBuilder, bytesLimit, _a) {\n    var data = _a.data, bytesCount = _a.bytesCount, flushReason = _a.flushReason;\n    var canUseBeacon = !!navigator.sendBeacon && bytesCount < bytesLimit;\n    if (canUseBeacon) {\n        try {\n            var beaconUrl = endpointBuilder.build('beacon', flushReason);\n            var isQueued = navigator.sendBeacon(beaconUrl, data);\n            if (isQueued) {\n                return;\n            }\n        }\n        catch (e) {\n            reportBeaconError(e);\n        }\n    }\n    var xhrUrl = endpointBuilder.build('xhr', flushReason);\n    sendXHR(xhrUrl, data);\n}\nvar hasReportedBeaconError = false;\nfunction reportBeaconError(e) {\n    if (!hasReportedBeaconError) {\n        hasReportedBeaconError = true;\n        addTelemetryError(e);\n    }\n}\nexport function fetchKeepAliveStrategy(endpointBuilder, bytesLimit, _a, onResponse) {\n    var data = _a.data, bytesCount = _a.bytesCount, flushReason = _a.flushReason, retry = _a.retry;\n    var canUseKeepAlive = isKeepAliveSupported() && bytesCount < bytesLimit;\n    if (canUseKeepAlive) {\n        var fetchUrl = endpointBuilder.build('fetch', flushReason, retry);\n        fetch(fetchUrl, { method: 'POST', body: data, keepalive: true, mode: 'cors' }).then(monitor(function (response) { return onResponse === null || onResponse === void 0 ? void 0 : onResponse({ status: response.status, type: response.type }); }), monitor(function () {\n            var xhrUrl = endpointBuilder.build('xhr', flushReason, retry);\n            // failed to queue the request\n            sendXHR(xhrUrl, data, onResponse);\n        }));\n    }\n    else {\n        var xhrUrl = endpointBuilder.build('xhr', flushReason, retry);\n        sendXHR(xhrUrl, data, onResponse);\n    }\n}\nfunction isKeepAliveSupported() {\n    // Request can throw, cf https://developer.mozilla.org/en-US/docs/Web/API/Request/Request#errors\n    try {\n        return window.Request && 'keepalive' in new Request('http://a');\n    }\n    catch (_a) {\n        return false;\n    }\n}\nexport function sendXHR(url, data, onResponse) {\n    var request = new XMLHttpRequest();\n    request.open('POST', url, true);\n    addEventListener(request, 'loadend', function () {\n        onResponse === null || onResponse === void 0 ? void 0 : onResponse({ status: request.status });\n    }, {\n        // prevent multiple onResponse callbacks\n        // if the xhr instance is reused by a third party\n        once: true,\n    });\n    request.send(data);\n}\n","import { SESSION_TIME_OUT_DELAY, relativeNow, ValueHistory } from '@datadog/browser-core';\n/**\n * We want to attach to an event:\n * - the url corresponding to its start\n * - the referrer corresponding to the previous view url (or document referrer for initial view)\n */\nexport var URL_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY;\nexport function startUrlContexts(lifeCycle, locationChangeObservable, location) {\n    var urlContextHistory = new ValueHistory(URL_CONTEXT_TIME_OUT_DELAY);\n    var previousViewUrl;\n    lifeCycle.subscribe(4 /* LifeCycleEventType.VIEW_ENDED */, function (_a) {\n        var endClocks = _a.endClocks;\n        urlContextHistory.closeActive(endClocks.relative);\n    });\n    lifeCycle.subscribe(2 /* LifeCycleEventType.VIEW_CREATED */, function (_a) {\n        var startClocks = _a.startClocks;\n        var viewUrl = location.href;\n        urlContextHistory.add(buildUrlContext({\n            url: viewUrl,\n            referrer: !previousViewUrl ? document.referrer : previousViewUrl,\n        }), startClocks.relative);\n        previousViewUrl = viewUrl;\n    });\n    var locationChangeSubscription = locationChangeObservable.subscribe(function (_a) {\n        var newLocation = _a.newLocation;\n        var current = urlContextHistory.find();\n        if (current) {\n            var changeTime = relativeNow();\n            urlContextHistory.closeActive(changeTime);\n            urlContextHistory.add(buildUrlContext({\n                url: newLocation.href,\n                referrer: current.referrer,\n            }), changeTime);\n        }\n    });\n    function buildUrlContext(_a) {\n        var url = _a.url, referrer = _a.referrer;\n        return {\n            url: url,\n            referrer: referrer,\n        };\n    }\n    return {\n        findUrl: function (startTime) { return urlContextHistory.find(startTime); },\n        stop: function () {\n            locationChangeSubscription.unsubscribe();\n            urlContextHistory.stop();\n        },\n    };\n}\n","import { warnIfCustomerDataLimitReached, throttle, jsonStringify, computeBytesCount, noop, isExperimentalFeatureEnabled, SESSION_TIME_OUT_DELAY, ValueHistory, ExperimentalFeature, } from '@datadog/browser-core';\nexport var FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY;\nexport var BYTES_COMPUTATION_THROTTLING_DELAY = 200;\n/**\n * Start feature flag contexts\n *\n * Feature flag contexts follow the life of views.\n * A new context is added when a view is created and ended when the view is ended\n *\n * Note: we choose not to add a new context at each evaluation to save memory\n */\nexport function startFeatureFlagContexts(lifeCycle, computeBytesCountImpl) {\n    if (computeBytesCountImpl === void 0) { computeBytesCountImpl = computeBytesCount; }\n    if (!isExperimentalFeatureEnabled(ExperimentalFeature.FEATURE_FLAGS)) {\n        return {\n            findFeatureFlagEvaluations: function () { return undefined; },\n            getFeatureFlagBytesCount: function () { return 0; },\n            addFeatureFlagEvaluation: noop,\n        };\n    }\n    var featureFlagContexts = new ValueHistory(FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY);\n    var bytesCountCache = 0;\n    var alreadyWarned = false;\n    lifeCycle.subscribe(4 /* LifeCycleEventType.VIEW_ENDED */, function (_a) {\n        var endClocks = _a.endClocks;\n        featureFlagContexts.closeActive(endClocks.relative);\n    });\n    lifeCycle.subscribe(2 /* LifeCycleEventType.VIEW_CREATED */, function (_a) {\n        var startClocks = _a.startClocks;\n        featureFlagContexts.add({}, startClocks.relative);\n        bytesCountCache = 0;\n    });\n    // Throttle the bytes computation to minimize the impact on performance.\n    // Especially useful if the user call addFeatureFlagEvaluation API synchronously multiple times in a row\n    var computeBytesCountThrottled = throttle(function (context) {\n        bytesCountCache = computeBytesCountImpl(jsonStringify(context));\n        if (!alreadyWarned) {\n            alreadyWarned = warnIfCustomerDataLimitReached(bytesCountCache, \"feature flag evaluation\" /* CustomerDataType.FeatureFlag */);\n        }\n    }, BYTES_COMPUTATION_THROTTLING_DELAY).throttled;\n    return {\n        findFeatureFlagEvaluations: function (startTime) { return featureFlagContexts.find(startTime); },\n        getFeatureFlagBytesCount: function () {\n            var currentContext = featureFlagContexts.find();\n            if (!currentContext) {\n                return 0;\n            }\n            return bytesCountCache;\n        },\n        addFeatureFlagEvaluation: function (key, value) {\n            var currentContext = featureFlagContexts.find();\n            if (currentContext) {\n                currentContext[key] = value;\n                computeBytesCountThrottled(currentContext);\n            }\n        },\n    };\n}\n","import { isEmptyObject, includes, performDraw, ONE_SECOND, addTelemetryDebug, setInterval } from '@datadog/browser-core';\nexport var MEASURES_PERIOD_DURATION = 10 * ONE_SECOND;\nvar currentPeriodMeasures;\nvar currentBatchMeasures;\nvar batchHasRumEvent;\nexport function startCustomerDataTelemetry(configuration, telemetry, lifeCycle, globalContextManager, userContextManager, featureFlagContexts, batchFlushObservable) {\n    var customerDataTelemetryEnabled = telemetry.enabled && performDraw(configuration.customerDataTelemetrySampleRate);\n    if (!customerDataTelemetryEnabled) {\n        return;\n    }\n    initCurrentPeriodMeasures();\n    initCurrentBatchMeasures();\n    // We measure the data of every view updates even if there could only be one per batch due to the upsert\n    // It means that contexts bytes count sums can be higher than it really is\n    lifeCycle.subscribe(11 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (event) {\n        batchHasRumEvent = true;\n        updateMeasure(currentBatchMeasures.globalContextBytes, !isEmptyObject(globalContextManager.get()) ? globalContextManager.getBytesCount() : 0);\n        updateMeasure(currentBatchMeasures.userContextBytes, !isEmptyObject(userContextManager.get()) ? userContextManager.getBytesCount() : 0);\n        var featureFlagContext = featureFlagContexts.findFeatureFlagEvaluations();\n        var hasFeatureFlagContext = includes([\"view\" /* RumEventType.VIEW */, \"error\" /* RumEventType.ERROR */], event.type) &&\n            featureFlagContext &&\n            !isEmptyObject(featureFlagContext);\n        updateMeasure(currentBatchMeasures.featureFlagBytes, hasFeatureFlagContext ? featureFlagContexts.getFeatureFlagBytesCount() : 0);\n    });\n    batchFlushObservable.subscribe(function (_a) {\n        var bytesCount = _a.bytesCount, messagesCount = _a.messagesCount;\n        // Don't measure batch that only contains telemetry events to avoid batch sending loop\n        // It could happen because after each batch we are adding a customer data measures telemetry event to the next one\n        if (!batchHasRumEvent) {\n            return;\n        }\n        currentPeriodMeasures.batchCount += 1;\n        updateMeasure(currentPeriodMeasures.batchBytesCount, bytesCount);\n        updateMeasure(currentPeriodMeasures.batchMessagesCount, messagesCount);\n        mergeMeasure(currentPeriodMeasures.globalContextBytes, currentBatchMeasures.globalContextBytes);\n        mergeMeasure(currentPeriodMeasures.userContextBytes, currentBatchMeasures.userContextBytes);\n        mergeMeasure(currentPeriodMeasures.featureFlagBytes, currentBatchMeasures.featureFlagBytes);\n        initCurrentBatchMeasures();\n    });\n    setInterval(sendCurrentPeriodMeasures, MEASURES_PERIOD_DURATION);\n}\nfunction sendCurrentPeriodMeasures() {\n    if (currentPeriodMeasures.batchCount === 0) {\n        return;\n    }\n    addTelemetryDebug('Customer data measures', currentPeriodMeasures);\n    initCurrentPeriodMeasures();\n}\nfunction createMeasure() {\n    return { min: Infinity, max: 0, sum: 0 };\n}\nfunction updateMeasure(measure, value) {\n    measure.sum += value;\n    measure.min = Math.min(measure.min, value);\n    measure.max = Math.max(measure.max, value);\n}\nfunction mergeMeasure(target, source) {\n    target.sum += source.sum;\n    target.min = Math.min(target.min, source.min);\n    target.max = Math.max(target.max, source.max);\n}\nfunction initCurrentPeriodMeasures() {\n    currentPeriodMeasures = {\n        batchCount: 0,\n        batchBytesCount: createMeasure(),\n        batchMessagesCount: createMeasure(),\n        globalContextBytes: createMeasure(),\n        userContextBytes: createMeasure(),\n        featureFlagBytes: createMeasure(),\n    };\n}\nfunction initCurrentBatchMeasures() {\n    batchHasRumEvent = false;\n    currentBatchMeasures = {\n        globalContextBytes: createMeasure(),\n        userContextBytes: createMeasure(),\n        featureFlagBytes: createMeasure(),\n    };\n}\n","import { addDuration, addEventListeners, relativeNow } from '@datadog/browser-core';\nexport var MAX_PAGE_STATE_ENTRIES = 500;\nvar pageStateEntries = [];\nvar currentPageState;\nexport function startPageStateHistory() {\n    addPageState(getPageState());\n    var stop = addEventListeners(window, [\n        \"pageshow\" /* DOM_EVENT.PAGE_SHOW */,\n        \"focus\" /* DOM_EVENT.FOCUS */,\n        \"blur\" /* DOM_EVENT.BLUR */,\n        \"visibilitychange\" /* DOM_EVENT.VISIBILITY_CHANGE */,\n        \"resume\" /* DOM_EVENT.RESUME */,\n        \"freeze\" /* DOM_EVENT.FREEZE */,\n        \"pagehide\" /* DOM_EVENT.PAGE_HIDE */,\n    ], function (event) {\n        // Only get events fired by the browser to avoid false currentPageState changes done with custom events\n        // cf: developer extension auto flush: https://github.com/DataDog/browser-sdk/blob/2f72bf05a672794c9e33965351964382a94c72ba/developer-extension/src/panel/flushEvents.ts#L11-L12\n        if (!event.isTrusted) {\n            return;\n        }\n        if (event.type === \"freeze\" /* DOM_EVENT.FREEZE */) {\n            addPageState(\"frozen\" /* PageState.FROZEN */);\n        }\n        else if (event.type === \"pagehide\" /* DOM_EVENT.PAGE_HIDE */) {\n            addPageState(event.persisted ? \"frozen\" /* PageState.FROZEN */ : \"terminated\" /* PageState.TERMINATED */);\n        }\n        else {\n            addPageState(getPageState());\n        }\n    }, { capture: true }).stop;\n    return {\n        findAll: function (startTime, duration) {\n            var entries = [];\n            var endTime = addDuration(startTime, duration);\n            for (var i = pageStateEntries.length - 1; i >= 0; i--) {\n                var stateStartTime = pageStateEntries[i].startTime;\n                if (stateStartTime >= endTime) {\n                    continue;\n                }\n                entries.unshift(pageStateEntries[i]);\n                if (stateStartTime < startTime) {\n                    break;\n                }\n            }\n            return entries.length ? entries : undefined;\n        },\n        stop: stop,\n    };\n}\nfunction getPageState() {\n    if (document.visibilityState === 'hidden') {\n        return \"hidden\" /* PageState.HIDDEN */;\n    }\n    if (document.hasFocus()) {\n        return \"active\" /* PageState.ACTIVE */;\n    }\n    return \"passive\" /* PageState.PASSIVE */;\n}\nexport function addPageState(nextPageState, maxPageStateEntries) {\n    if (maxPageStateEntries === void 0) { maxPageStateEntries = MAX_PAGE_STATE_ENTRIES; }\n    if (nextPageState === currentPageState) {\n        return;\n    }\n    currentPageState = nextPageState;\n    if (pageStateEntries.length === maxPageStateEntries) {\n        pageStateEntries.shift();\n    }\n    pageStateEntries.push({ state: currentPageState, startTime: relativeNow() });\n}\nexport function resetPageStates() {\n    pageStateEntries = [];\n    currentPageState = undefined;\n}\n","export var RecordType = {\n    FullSnapshot: 2,\n    IncrementalSnapshot: 3,\n    Meta: 4,\n    Focus: 6,\n    ViewEnd: 7,\n    VisualViewport: 8,\n    FrustrationRecord: 9,\n};\nexport var NodeType = {\n    Document: 0,\n    DocumentType: 1,\n    Element: 2,\n    Text: 3,\n    CDATA: 4,\n    DocumentFragment: 11,\n};\nexport var IncrementalSource = {\n    Mutation: 0,\n    MouseMove: 1,\n    MouseInteraction: 2,\n    Scroll: 3,\n    ViewportResize: 4,\n    Input: 5,\n    TouchMove: 6,\n    MediaInteraction: 7,\n    StyleSheetRule: 8,\n    // CanvasMutation : 9,\n    // Font : 10,\n};\nexport var MouseInteractionType = {\n    MouseUp: 0,\n    MouseDown: 1,\n    Click: 2,\n    ContextMenu: 3,\n    DblClick: 4,\n    Focus: 5,\n    Blur: 6,\n    TouchStart: 7,\n    TouchEnd: 9,\n};\nexport var MediaInteractionType = {\n    Play: 0,\n    Pause: 1,\n};\n","import { assign, timeStampNow } from '@datadog/browser-core';\nimport { RecordType } from '../../types';\nexport function assembleIncrementalSnapshot(source, data) {\n    return {\n        data: assign({\n            source: source,\n        }, data),\n        type: RecordType.IncrementalSnapshot,\n        timestamp: timeStampNow(),\n    };\n}\n","import { DefaultPrivacyLevel } from '@datadog/browser-core';\nexport var NodePrivacyLevel = {\n    IGNORE: 'ignore',\n    HIDDEN: 'hidden',\n    ALLOW: DefaultPrivacyLevel.ALLOW,\n    MASK: DefaultPrivacyLevel.MASK,\n    MASK_USER_INPUT: DefaultPrivacyLevel.MASK_USER_INPUT,\n};\nexport var PRIVACY_ATTR_NAME = 'data-dd-privacy';\n// Privacy Attrs\nexport var PRIVACY_ATTR_VALUE_ALLOW = 'allow';\nexport var PRIVACY_ATTR_VALUE_MASK = 'mask';\nexport var PRIVACY_ATTR_VALUE_MASK_USER_INPUT = 'mask-user-input';\nexport var PRIVACY_ATTR_VALUE_HIDDEN = 'hidden';\n// Privacy Classes - not all customers can set plain HTML attributes, so support classes too\nexport var PRIVACY_CLASS_ALLOW = 'dd-privacy-allow';\nexport var PRIVACY_CLASS_MASK = 'dd-privacy-mask';\nexport var PRIVACY_CLASS_MASK_USER_INPUT = 'dd-privacy-mask-user-input';\nexport var PRIVACY_CLASS_HIDDEN = 'dd-privacy-hidden';\n// Private Replacement Templates\nexport var CENSORED_STRING_MARK = '***';\nexport var CENSORED_IMG_MARK = 'data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==';\nexport var FORM_PRIVATE_TAG_NAMES = {\n    INPUT: true,\n    OUTPUT: true,\n    TEXTAREA: true,\n    SELECT: true,\n    OPTION: true,\n    DATALIST: true,\n    OPTGROUP: true,\n};\n","import { isElementNode, getParentNode, isTextNode } from '@datadog/browser-rum-core';\nimport { NodePrivacyLevel, PRIVACY_ATTR_NAME, PRIVACY_ATTR_VALUE_ALLOW, PRIVACY_ATTR_VALUE_MASK, PRIVACY_ATTR_VALUE_MASK_USER_INPUT, PRIVACY_ATTR_VALUE_HIDDEN, PRIVACY_CLASS_ALLOW, PRIVACY_CLASS_MASK, PRIVACY_CLASS_MASK_USER_INPUT, PRIVACY_CLASS_HIDDEN, FORM_PRIVATE_TAG_NAMES, CENSORED_STRING_MARK, } from '../../constants';\nexport var MAX_ATTRIBUTE_VALUE_CHAR_LENGTH = 100000;\nvar TEXT_MASKING_CHAR = 'x';\n/**\n * Get node privacy level by iterating over its ancestors. When the direct parent privacy level is\n * know, it is best to use something like:\n *\n * derivePrivacyLevelGivenParent(getNodeSelfPrivacyLevel(node), parentNodePrivacyLevel)\n */\nexport function getNodePrivacyLevel(node, defaultPrivacyLevel) {\n    var parentNode = getParentNode(node);\n    var parentNodePrivacyLevel = parentNode ? getNodePrivacyLevel(parentNode, defaultPrivacyLevel) : defaultPrivacyLevel;\n    var selfNodePrivacyLevel = getNodeSelfPrivacyLevel(node);\n    return reducePrivacyLevel(selfNodePrivacyLevel, parentNodePrivacyLevel);\n}\n/**\n * Reduces the next privacy level based on self + parent privacy levels\n */\nexport function reducePrivacyLevel(childPrivacyLevel, parentNodePrivacyLevel) {\n    switch (parentNodePrivacyLevel) {\n        // These values cannot be overridden\n        case NodePrivacyLevel.HIDDEN:\n        case NodePrivacyLevel.IGNORE:\n            return parentNodePrivacyLevel;\n    }\n    switch (childPrivacyLevel) {\n        case NodePrivacyLevel.ALLOW:\n        case NodePrivacyLevel.MASK:\n        case NodePrivacyLevel.MASK_USER_INPUT:\n        case NodePrivacyLevel.HIDDEN:\n        case NodePrivacyLevel.IGNORE:\n            return childPrivacyLevel;\n        default:\n            return parentNodePrivacyLevel;\n    }\n}\n/**\n * Determines the node's own privacy level without checking for ancestors.\n */\nexport function getNodeSelfPrivacyLevel(node) {\n    // Only Element types can have a privacy level set\n    if (!isElementNode(node)) {\n        return;\n    }\n    var privAttr = node.getAttribute(PRIVACY_ATTR_NAME);\n    // Overrules for replay purpose\n    if (node.tagName === 'BASE') {\n        return NodePrivacyLevel.ALLOW;\n    }\n    // Overrules to enforce end-user protection\n    if (node.tagName === 'INPUT') {\n        var inputElement = node;\n        if (inputElement.type === 'password' || inputElement.type === 'email' || inputElement.type === 'tel') {\n            return NodePrivacyLevel.MASK;\n        }\n        if (inputElement.type === 'hidden') {\n            return NodePrivacyLevel.MASK;\n        }\n        var autocomplete = inputElement.getAttribute('autocomplete');\n        // Handle input[autocomplete=cc-number/cc-csc/cc-exp/cc-exp-month/cc-exp-year]\n        if (autocomplete && autocomplete.indexOf('cc-') === 0) {\n            return NodePrivacyLevel.MASK;\n        }\n    }\n    // Check HTML privacy attributes and classes\n    if (privAttr === PRIVACY_ATTR_VALUE_HIDDEN || node.classList.contains(PRIVACY_CLASS_HIDDEN)) {\n        return NodePrivacyLevel.HIDDEN;\n    }\n    if (privAttr === PRIVACY_ATTR_VALUE_MASK || node.classList.contains(PRIVACY_CLASS_MASK)) {\n        return NodePrivacyLevel.MASK;\n    }\n    if (privAttr === PRIVACY_ATTR_VALUE_MASK_USER_INPUT || node.classList.contains(PRIVACY_CLASS_MASK_USER_INPUT)) {\n        return NodePrivacyLevel.MASK_USER_INPUT;\n    }\n    if (privAttr === PRIVACY_ATTR_VALUE_ALLOW || node.classList.contains(PRIVACY_CLASS_ALLOW)) {\n        return NodePrivacyLevel.ALLOW;\n    }\n    if (shouldIgnoreElement(node)) {\n        return NodePrivacyLevel.IGNORE;\n    }\n}\n/**\n * Helper aiming to unify `mask` and `mask-user-input` privacy levels:\n *\n * In the `mask` case, it is trivial: we should mask the element.\n *\n * In the `mask-user-input` case, we should mask the element only if it is a \"form\" element or the\n * direct parent is a form element for text nodes).\n *\n * Other `shouldMaskNode` cases are edge cases that should not matter too much (ex: should we mask a\n * node if it is ignored or hidden? it doesn't matter since it won't be serialized).\n */\nexport function shouldMaskNode(node, privacyLevel) {\n    switch (privacyLevel) {\n        case NodePrivacyLevel.MASK:\n        case NodePrivacyLevel.HIDDEN:\n        case NodePrivacyLevel.IGNORE:\n            return true;\n        case NodePrivacyLevel.MASK_USER_INPUT:\n            return isTextNode(node) ? isFormElement(node.parentNode) : isFormElement(node);\n        default:\n            return false;\n    }\n}\nfunction isFormElement(node) {\n    if (!node || node.nodeType !== node.ELEMENT_NODE) {\n        return false;\n    }\n    var element = node;\n    if (element.tagName === 'INPUT') {\n        switch (element.type) {\n            case 'button':\n            case 'color':\n            case 'reset':\n            case 'submit':\n                return false;\n        }\n    }\n    return !!FORM_PRIVATE_TAG_NAMES[element.tagName];\n}\n/**\n * Text censoring non-destructively maintains whitespace characters in order to preserve text shape\n * during replay.\n */\nexport var censorText = function (text) { return text.replace(/\\S/g, TEXT_MASKING_CHAR); };\nexport function getTextContent(textNode, ignoreWhiteSpace, parentNodePrivacyLevel) {\n    var _a;\n    // The parent node may not be a html element which has a tagName attribute.\n    // So just let it be undefined which is ok in this use case.\n    var parentTagName = (_a = textNode.parentElement) === null || _a === void 0 ? void 0 : _a.tagName;\n    var textContent = textNode.textContent || '';\n    if (ignoreWhiteSpace && !textContent.trim()) {\n        return;\n    }\n    var nodePrivacyLevel = parentNodePrivacyLevel;\n    var isStyle = parentTagName === 'STYLE' ? true : undefined;\n    var isScript = parentTagName === 'SCRIPT';\n    if (isScript) {\n        // For perf reasons, we don't record script (heuristic)\n        textContent = CENSORED_STRING_MARK;\n    }\n    else if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n        // Should never occur, but just in case, we set to CENSORED_MARK.\n        textContent = CENSORED_STRING_MARK;\n    }\n    else if (shouldMaskNode(textNode, nodePrivacyLevel) &&\n        // Style tags are `overruled` (Use `hide` to enforce privacy)\n        !isStyle) {\n        if (\n        // Scrambling the child list breaks text nodes for DATALIST/SELECT/OPTGROUP\n        parentTagName === 'DATALIST' ||\n            parentTagName === 'SELECT' ||\n            parentTagName === 'OPTGROUP') {\n            if (!textContent.trim()) {\n                return;\n            }\n        }\n        else if (parentTagName === 'OPTION') {\n            // <Option> has low entropy in charset + text length, so use `CENSORED_STRING_MARK` when masked\n            textContent = CENSORED_STRING_MARK;\n        }\n        else {\n            textContent = censorText(textContent);\n        }\n    }\n    return textContent;\n}\n/**\n * TODO: Preserve CSS element order, and record the presence of the tag, just don't render\n * We don't need this logic on the recorder side.\n * For security related meta's, customer can mask themmanually given they\n * are easy to identify in the HEAD tag.\n */\nexport function shouldIgnoreElement(element) {\n    if (element.nodeName === 'SCRIPT') {\n        return true;\n    }\n    if (element.nodeName === 'LINK') {\n        var relAttribute = getLowerCaseAttribute('rel');\n        return (\n        // Link as script - Ignore only when rel=preload, modulepreload or prefetch\n        (/preload|prefetch/i.test(relAttribute) && getLowerCaseAttribute('as') === 'script') ||\n            // Favicons\n            relAttribute === 'shortcut icon' ||\n            relAttribute === 'icon');\n    }\n    if (element.nodeName === 'META') {\n        var nameAttribute = getLowerCaseAttribute('name');\n        var relAttribute = getLowerCaseAttribute('rel');\n        var propertyAttribute = getLowerCaseAttribute('property');\n        return (\n        // Favicons\n        /^msapplication-tile(image|color)$/.test(nameAttribute) ||\n            nameAttribute === 'application-name' ||\n            relAttribute === 'icon' ||\n            relAttribute === 'apple-touch-icon' ||\n            relAttribute === 'shortcut icon' ||\n            // Description\n            nameAttribute === 'keywords' ||\n            nameAttribute === 'description' ||\n            // Social\n            /^(og|twitter|fb):/.test(propertyAttribute) ||\n            /^(og|twitter):/.test(nameAttribute) ||\n            nameAttribute === 'pinterest' ||\n            // Robots\n            nameAttribute === 'robots' ||\n            nameAttribute === 'googlebot' ||\n            nameAttribute === 'bingbot' ||\n            // Http headers. Ex: X-UA-Compatible, Content-Type, Content-Language, cache-control,\n            // X-Translated-By\n            element.hasAttribute('http-equiv') ||\n            // Authorship\n            nameAttribute === 'author' ||\n            nameAttribute === 'generator' ||\n            nameAttribute === 'framework' ||\n            nameAttribute === 'publisher' ||\n            nameAttribute === 'progid' ||\n            /^article:/.test(propertyAttribute) ||\n            /^product:/.test(propertyAttribute) ||\n            // Verification\n            nameAttribute === 'google-site-verification' ||\n            nameAttribute === 'yandex-verification' ||\n            nameAttribute === 'csrf-token' ||\n            nameAttribute === 'p:domain_verify' ||\n            nameAttribute === 'verify-v1' ||\n            nameAttribute === 'verification' ||\n            nameAttribute === 'shopify-checkout-api-token');\n    }\n    function getLowerCaseAttribute(name) {\n        return (element.getAttribute(name) || '').toLowerCase();\n    }\n    return false;\n}\n","import { buildUrl } from '@datadog/browser-core';\nimport { getParentNode, isNodeShadowRoot } from '@datadog/browser-rum-core';\nimport { CENSORED_STRING_MARK } from '../../../constants';\nimport { shouldMaskNode } from '../privacy';\nvar serializedNodeIds = new WeakMap();\nexport function hasSerializedNode(node) {\n    return serializedNodeIds.has(node);\n}\nexport function nodeAndAncestorsHaveSerializedNode(node) {\n    var current = node;\n    while (current) {\n        if (!hasSerializedNode(current) && !isNodeShadowRoot(current)) {\n            return false;\n        }\n        current = getParentNode(current);\n    }\n    return true;\n}\nexport function getSerializedNodeId(node) {\n    return serializedNodeIds.get(node);\n}\nexport function setSerializedNodeId(node, serializeNodeId) {\n    serializedNodeIds.set(node, serializeNodeId);\n}\n/**\n * Get the element \"value\" to be serialized as an attribute or an input update record. It respects\n * the input privacy mode of the element.\n * PERFROMANCE OPTIMIZATION: Assumes that privacy level `HIDDEN` is never encountered because of earlier checks.\n */\nexport function getElementInputValue(element, nodePrivacyLevel) {\n    /*\n     BROWSER SPEC NOTE: <input>, <select>\n     For some <input> elements, the `value` is an exceptional property/attribute that has the\n     value synced between el.value and el.getAttribute()\n     input[type=button,checkbox,hidden,image,radio,reset,submit]\n     */\n    var tagName = element.tagName;\n    var value = element.value;\n    if (shouldMaskNode(element, nodePrivacyLevel)) {\n        var type = element.type;\n        if (tagName === 'INPUT' && (type === 'button' || type === 'submit' || type === 'reset')) {\n            // Overrule `MASK` privacy level for button-like element values, as they are used during replay\n            // to display their label. They can still be hidden via the \"hidden\" privacy attribute or class name.\n            return value;\n        }\n        else if (!value || tagName === 'OPTION') {\n            // <Option> value provides no benefit\n            return;\n        }\n        return CENSORED_STRING_MARK;\n    }\n    if (tagName === 'OPTION' || tagName === 'SELECT') {\n        return element.value;\n    }\n    if (tagName !== 'INPUT' && tagName !== 'TEXTAREA') {\n        return;\n    }\n    return value;\n}\nexport var URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")([^\"]*)\"|([^)]*))\\)/gm;\nexport var ABSOLUTE_URL = /^[A-Za-z]+:|^\\/\\//;\nexport var DATA_URI = /^data:.*,/i;\nexport function switchToAbsoluteUrl(cssText, cssHref) {\n    return cssText.replace(URL_IN_CSS_REF, function (matchingSubstring, singleQuote, urlWrappedInSingleQuotes, doubleQuote, urlWrappedInDoubleQuotes, urlNotWrappedInQuotes) {\n        var url = urlWrappedInSingleQuotes || urlWrappedInDoubleQuotes || urlNotWrappedInQuotes;\n        if (!cssHref || !url || ABSOLUTE_URL.test(url) || DATA_URI.test(url)) {\n            return matchingSubstring;\n        }\n        var quote = singleQuote || doubleQuote || '';\n        return \"url(\".concat(quote).concat(makeUrlAbsolute(url, cssHref)).concat(quote, \")\");\n    });\n}\nexport function makeUrlAbsolute(url, baseUrl) {\n    try {\n        return buildUrl(url, baseUrl).href;\n    }\n    catch (_) {\n        return url;\n    }\n}\nvar TAG_NAME_REGEX = /[^a-z1-6-_]/;\nexport function getValidTagName(tagName) {\n    var processedTagName = tagName.toLowerCase().trim();\n    if (TAG_NAME_REGEX.test(processedTagName)) {\n        // if the tag name is odd and we cannot extract\n        // anything from the string, then we return a\n        // generic div\n        return 'div';\n    }\n    return processedTagName;\n}\n","export function serializeStyleSheets(cssStyleSheets) {\n    if (cssStyleSheets === undefined || cssStyleSheets.length === 0) {\n        return undefined;\n    }\n    return cssStyleSheets.map(function (cssStyleSheet) {\n        var rules = cssStyleSheet.cssRules || cssStyleSheet.rules;\n        var cssRules = Array.from(rules, function (cssRule) { return cssRule.cssText; });\n        var styleSheet = {\n            cssRules: cssRules,\n            disabled: cssStyleSheet.disabled || undefined,\n            media: cssStyleSheet.media.length > 0 ? Array.from(cssStyleSheet.media) : undefined,\n        };\n        return styleSheet;\n    });\n}\n","import { startsWith } from '@datadog/browser-core';\nimport { STABLE_ATTRIBUTES } from '@datadog/browser-rum-core';\nimport { NodePrivacyLevel, PRIVACY_ATTR_NAME, CENSORED_STRING_MARK, CENSORED_IMG_MARK } from '../../../constants';\nimport { MAX_ATTRIBUTE_VALUE_CHAR_LENGTH } from '../privacy';\nexport function serializeAttribute(element, nodePrivacyLevel, attributeName, configuration) {\n    if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n        // dup condition for direct access case\n        return null;\n    }\n    var attributeValue = element.getAttribute(attributeName);\n    if (nodePrivacyLevel === NodePrivacyLevel.MASK &&\n        attributeName !== PRIVACY_ATTR_NAME &&\n        !STABLE_ATTRIBUTES.includes(attributeName) &&\n        attributeName !== configuration.actionNameAttribute) {\n        var tagName = element.tagName;\n        switch (attributeName) {\n            // Mask Attribute text content\n            case 'title':\n            case 'alt':\n            case 'placeholder':\n                return CENSORED_STRING_MARK;\n        }\n        // mask image URLs\n        if (tagName === 'IMG' || tagName === 'SOURCE') {\n            if (attributeName === 'src' || attributeName === 'srcset') {\n                return CENSORED_IMG_MARK;\n            }\n        }\n        // mask <a> URLs\n        if (tagName === 'A' && attributeName === 'href') {\n            return CENSORED_STRING_MARK;\n        }\n        // mask data-* attributes\n        if (attributeValue && startsWith(attributeName, 'data-')) {\n            // Exception: it's safe to reveal the `${PRIVACY_ATTR_NAME}` attr\n            return CENSORED_STRING_MARK;\n        }\n    }\n    if (!attributeValue || typeof attributeValue !== 'string') {\n        return attributeValue;\n    }\n    // Minimum Fix for customer.\n    if (attributeValue.length > MAX_ATTRIBUTE_VALUE_CHAR_LENGTH && attributeValue.slice(0, 5) === 'data:') {\n        return 'data:truncated';\n    }\n    return attributeValue;\n}\n","import { NodePrivacyLevel } from '../../../constants';\nimport { shouldMaskNode } from '../privacy';\nimport { getElementInputValue, switchToAbsoluteUrl, getValidTagName } from './serializationUtils';\nimport { serializeAttribute } from './serializeAttribute';\nexport function serializeAttributes(element, nodePrivacyLevel, options) {\n    var _a;\n    if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n        return {};\n    }\n    var safeAttrs = {};\n    var tagName = getValidTagName(element.tagName);\n    var doc = element.ownerDocument;\n    for (var i = 0; i < element.attributes.length; i += 1) {\n        var attribute = element.attributes.item(i);\n        var attributeName = attribute.name;\n        var attributeValue = serializeAttribute(element, nodePrivacyLevel, attributeName, options.configuration);\n        if (attributeValue !== null) {\n            safeAttrs[attributeName] = attributeValue;\n        }\n    }\n    if (element.value &&\n        (tagName === 'textarea' || tagName === 'select' || tagName === 'option' || tagName === 'input')) {\n        var formValue = getElementInputValue(element, nodePrivacyLevel);\n        if (formValue !== undefined) {\n            safeAttrs.value = formValue;\n        }\n    }\n    /**\n     * <Option> can be selected, which occurs if its `value` matches ancestor `<Select>.value`\n     */\n    if (tagName === 'option' && nodePrivacyLevel === NodePrivacyLevel.ALLOW) {\n        // For privacy=`MASK`, all the values would be the same, so skip.\n        var optionElement = element;\n        if (optionElement.selected) {\n            safeAttrs.selected = optionElement.selected;\n        }\n    }\n    // remote css\n    if (tagName === 'link') {\n        var stylesheet = Array.from(doc.styleSheets).find(function (s) { return s.href === element.href; });\n        var cssText = getCssRulesString(stylesheet);\n        if (cssText && stylesheet) {\n            safeAttrs._cssText = cssText;\n        }\n    }\n    // dynamic stylesheet\n    if (tagName === 'style' &&\n        element.sheet &&\n        // TODO: Currently we only try to get dynamic stylesheet when it is an empty style element\n        !(element.innerText || element.textContent || '').trim().length) {\n        var cssText = getCssRulesString(element.sheet);\n        if (cssText) {\n            safeAttrs._cssText = cssText;\n        }\n    }\n    /**\n     * Forms: input[type=checkbox,radio]\n     * The `checked` property for <input> is a little bit special:\n     * 1. el.checked is a setter that returns if truthy.\n     * 2. getAttribute returns the string value\n     * getAttribute('checked') does not sync with `Element.checked`, so use JS property\n     * NOTE: `checked` property exists on `HTMLInputElement`. For serializer assumptions, we check for type=radio|check.\n     */\n    var inputElement = element;\n    if (tagName === 'input' && (inputElement.type === 'radio' || inputElement.type === 'checkbox')) {\n        if (nodePrivacyLevel === NodePrivacyLevel.ALLOW) {\n            safeAttrs.checked = !!inputElement.checked;\n        }\n        else if (shouldMaskNode(inputElement, nodePrivacyLevel)) {\n            delete safeAttrs.checked;\n        }\n    }\n    /**\n     * Serialize the media playback state\n     */\n    if (tagName === 'audio' || tagName === 'video') {\n        var mediaElement = element;\n        safeAttrs.rr_mediaState = mediaElement.paused ? 'paused' : 'played';\n    }\n    /**\n     * Serialize the scroll state for each element only for full snapshot\n     */\n    var scrollTop;\n    var scrollLeft;\n    var serializationContext = options.serializationContext;\n    switch (serializationContext.status) {\n        case 0 /* SerializationContextStatus.INITIAL_FULL_SNAPSHOT */:\n            scrollTop = Math.round(element.scrollTop);\n            scrollLeft = Math.round(element.scrollLeft);\n            if (scrollTop || scrollLeft) {\n                serializationContext.elementsScrollPositions.set(element, { scrollTop: scrollTop, scrollLeft: scrollLeft });\n            }\n            break;\n        case 1 /* SerializationContextStatus.SUBSEQUENT_FULL_SNAPSHOT */:\n            if (serializationContext.elementsScrollPositions.has(element)) {\n                ;\n                (_a = serializationContext.elementsScrollPositions.get(element), scrollTop = _a.scrollTop, scrollLeft = _a.scrollLeft);\n            }\n            break;\n    }\n    if (scrollLeft) {\n        safeAttrs.rr_scrollLeft = scrollLeft;\n    }\n    if (scrollTop) {\n        safeAttrs.rr_scrollTop = scrollTop;\n    }\n    return safeAttrs;\n}\nfunction getCssRulesString(cssStyleSheet) {\n    if (!cssStyleSheet) {\n        return null;\n    }\n    var rules;\n    try {\n        rules = cssStyleSheet.rules || cssStyleSheet.cssRules;\n    }\n    catch (_a) {\n        // if css is protected by CORS we cannot access cssRules see: https://www.w3.org/TR/cssom-1/#the-cssstylesheet-interface\n    }\n    if (!rules) {\n        return null;\n    }\n    var styleSheetCssText = Array.from(rules, getCssRuleString).join('');\n    return switchToAbsoluteUrl(styleSheetCssText, cssStyleSheet.href);\n}\nfunction getCssRuleString(rule) {\n    return isCSSImportRule(rule) ? getCssRulesString(rule.styleSheet) || '' : rule.cssText;\n}\nfunction isCSSImportRule(rule) {\n    return 'styleSheet' in rule;\n}\n","import { isNodeShadowRoot, isNodeShadowHost } from '@datadog/browser-rum-core';\nimport { assign } from '@datadog/browser-core';\nimport { NodeType } from '../../../types';\nimport { NodePrivacyLevel, PRIVACY_ATTR_NAME, PRIVACY_ATTR_VALUE_HIDDEN } from '../../../constants';\nimport { reducePrivacyLevel, getNodeSelfPrivacyLevel, getTextContent } from '../privacy';\nimport { getSerializedNodeId, getValidTagName, setSerializedNodeId } from './serializationUtils';\nimport { serializeStyleSheets } from './serializeStyleSheets';\nimport { serializeAttributes } from './serializeAttributes';\nexport function serializeNodeWithId(node, options) {\n    var serializedNode = serializeNode(node, options);\n    if (!serializedNode) {\n        return null;\n    }\n    // Try to reuse the previous id\n    var id = getSerializedNodeId(node) || generateNextId();\n    var serializedNodeWithId = serializedNode;\n    serializedNodeWithId.id = id;\n    setSerializedNodeId(node, id);\n    if (options.serializedNodeIds) {\n        options.serializedNodeIds.add(id);\n    }\n    return serializedNodeWithId;\n}\nvar _nextId = 1;\nexport function generateNextId() {\n    return _nextId++;\n}\nexport function serializeChildNodes(node, options) {\n    var result = [];\n    node.childNodes.forEach(function (childNode) {\n        var serializedChildNode = serializeNodeWithId(childNode, options);\n        if (serializedChildNode) {\n            result.push(serializedChildNode);\n        }\n    });\n    return result;\n}\nfunction serializeNode(node, options) {\n    switch (node.nodeType) {\n        case node.DOCUMENT_NODE:\n            return serializeDocumentNode(node, options);\n        case node.DOCUMENT_FRAGMENT_NODE:\n            return serializeDocumentFragmentNode(node, options);\n        case node.DOCUMENT_TYPE_NODE:\n            return serializeDocumentTypeNode(node);\n        case node.ELEMENT_NODE:\n            return serializeElementNode(node, options);\n        case node.TEXT_NODE:\n            return serializeTextNode(node, options);\n        case node.CDATA_SECTION_NODE:\n            return serializeCDataNode();\n    }\n}\nexport function serializeDocumentNode(document, options) {\n    return {\n        type: NodeType.Document,\n        childNodes: serializeChildNodes(document, options),\n        adoptedStyleSheets: serializeStyleSheets(document.adoptedStyleSheets),\n    };\n}\nfunction serializeDocumentFragmentNode(element, options) {\n    var childNodes = [];\n    if (element.childNodes.length) {\n        childNodes = serializeChildNodes(element, options);\n    }\n    var isShadowRoot = isNodeShadowRoot(element);\n    if (isShadowRoot) {\n        options.serializationContext.shadowRootsController.addShadowRoot(element);\n    }\n    return {\n        type: NodeType.DocumentFragment,\n        childNodes: childNodes,\n        isShadowRoot: isShadowRoot,\n        adoptedStyleSheets: isShadowRoot ? serializeStyleSheets(element.adoptedStyleSheets) : undefined,\n    };\n}\nfunction serializeDocumentTypeNode(documentType) {\n    return {\n        type: NodeType.DocumentType,\n        name: documentType.name,\n        publicId: documentType.publicId,\n        systemId: documentType.systemId,\n    };\n}\n/**\n * Serializing Element nodes involves capturing:\n * 1. HTML ATTRIBUTES:\n * 2. JS STATE:\n * - scroll offsets\n * - Form fields (input value, checkbox checked, option selection, range)\n * - Canvas state,\n * - Media (video/audio) play mode + currentTime\n * - iframe contents\n * - webcomponents\n * 3. CUSTOM PROPERTIES:\n * - height+width for when `hidden` to cover the element\n * 4. EXCLUDED INTERACTION STATE:\n * - focus (possible, but not worth perf impact)\n * - hover (tracked only via mouse activity)\n * - fullscreen mode\n */\nfunction serializeElementNode(element, options) {\n    var _a;\n    var tagName = getValidTagName(element.tagName);\n    var isSVG = isSVGElement(element) || undefined;\n    // For performance reason, we don't use getNodePrivacyLevel directly: we leverage the\n    // parentNodePrivacyLevel option to avoid iterating over all parents\n    var nodePrivacyLevel = reducePrivacyLevel(getNodeSelfPrivacyLevel(element), options.parentNodePrivacyLevel);\n    if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n        var _b = element.getBoundingClientRect(), width = _b.width, height = _b.height;\n        return {\n            type: NodeType.Element,\n            tagName: tagName,\n            attributes: (_a = {\n                    rr_width: \"\".concat(width, \"px\"),\n                    rr_height: \"\".concat(height, \"px\")\n                },\n                _a[PRIVACY_ATTR_NAME] = PRIVACY_ATTR_VALUE_HIDDEN,\n                _a),\n            childNodes: [],\n            isSVG: isSVG,\n        };\n    }\n    // Ignore Elements like Script and some Link, Metas\n    if (nodePrivacyLevel === NodePrivacyLevel.IGNORE) {\n        return;\n    }\n    var attributes = serializeAttributes(element, nodePrivacyLevel, options);\n    var childNodes = [];\n    if (element.childNodes.length) {\n        // OBJECT POOLING OPTIMIZATION:\n        // We should not create a new object systematically as it could impact performances. Try to reuse\n        // the same object as much as possible, and clone it only if we need to.\n        var childNodesSerializationOptions = void 0;\n        if (options.parentNodePrivacyLevel === nodePrivacyLevel && options.ignoreWhiteSpace === (tagName === 'head')) {\n            childNodesSerializationOptions = options;\n        }\n        else {\n            childNodesSerializationOptions = assign({}, options, {\n                parentNodePrivacyLevel: nodePrivacyLevel,\n                ignoreWhiteSpace: tagName === 'head',\n            });\n        }\n        childNodes = serializeChildNodes(element, childNodesSerializationOptions);\n    }\n    if (isNodeShadowHost(element)) {\n        var shadowRoot = serializeNodeWithId(element.shadowRoot, options);\n        if (shadowRoot !== null) {\n            childNodes.push(shadowRoot);\n        }\n    }\n    return {\n        type: NodeType.Element,\n        tagName: tagName,\n        attributes: attributes,\n        childNodes: childNodes,\n        isSVG: isSVG,\n    };\n}\nfunction isSVGElement(el) {\n    return el.tagName === 'svg' || el instanceof SVGElement;\n}\n/**\n * Text Nodes are dependant on Element nodes\n * Privacy levels are set on elements so we check the parentElement of a text node\n * for privacy level.\n */\nfunction serializeTextNode(textNode, options) {\n    var _a;\n    // The parent node may not be a html element which has a tagName attribute.\n    // So just let it be undefined which is ok in this use case.\n    var parentTagName = (_a = textNode.parentElement) === null || _a === void 0 ? void 0 : _a.tagName;\n    var textContent = getTextContent(textNode, options.ignoreWhiteSpace || false, options.parentNodePrivacyLevel);\n    if (!textContent) {\n        return;\n    }\n    return {\n        type: NodeType.Text,\n        textContent: textContent,\n        isStyle: parentTagName === 'STYLE' ? true : undefined,\n    };\n}\nfunction serializeCDataNode() {\n    return {\n        type: NodeType.CDATA,\n        textContent: '',\n    };\n}\n","import { serializeNodeWithId } from './serializeNode';\nexport function serializeDocument(document, configuration, serializationContext) {\n    // We are sure that Documents are never ignored, so this function never returns null\n    return serializeNodeWithId(document, {\n        serializationContext: serializationContext,\n        parentNodePrivacyLevel: configuration.defaultPrivacyLevel,\n        configuration: configuration,\n    });\n}\n","import { isNodeShadowHost } from '@datadog/browser-rum-core';\nexport function isTouchEvent(event) {\n    return Boolean(event.changedTouches);\n}\nexport function getEventTarget(event) {\n    if (event.composed === true && isNodeShadowHost(event.target)) {\n        return event.composedPath()[0];\n    }\n    return event.target;\n}\n","/**\n * Browsers have not standardized various dimension properties. Mobile devices typically report\n * dimensions in reference to the visual viewport, while desktop uses the layout viewport. For example,\n * Mobile Chrome will change innerWidth when a pinch zoom takes place, while Chrome Desktop (mac) will not.\n *\n * With the new Viewport API, we now calculate and normalize dimension properties to the layout viewport.\n * If the VisualViewport API is not supported by a browser, it isn't reasonably possible to detect or normalize\n * which viewport is being measured. Therefore these exported functions will fallback to assuming that the layout\n * viewport is being measured by the browser\n */\n// Scrollbar widths vary across properties on different devices and browsers\nvar TOLERANCE = 25;\n/**\n * Use the Visual Viewport API's properties to measure scrollX/Y in reference to the layout viewport\n * in order to determine if window.scrollX/Y is measuring the layout or visual viewport.\n * This finding corresponds to which viewport mouseEvent.clientX/Y and window.innerWidth/Height measures.\n */\nfunction isVisualViewportFactoredIn(visualViewport) {\n    return (Math.abs(visualViewport.pageTop - visualViewport.offsetTop - window.scrollY) > TOLERANCE ||\n        Math.abs(visualViewport.pageLeft - visualViewport.offsetLeft - window.scrollX) > TOLERANCE);\n}\nexport var convertMouseEventToLayoutCoordinates = function (clientX, clientY) {\n    var visualViewport = window.visualViewport;\n    var normalized = {\n        layoutViewportX: clientX,\n        layoutViewportY: clientY,\n        visualViewportX: clientX,\n        visualViewportY: clientY,\n    };\n    if (!visualViewport) {\n        // On old browsers, we cannot normalize, so fallback to clientX/Y\n        return normalized;\n    }\n    else if (isVisualViewportFactoredIn(visualViewport)) {\n        // Typically Mobile Devices\n        normalized.layoutViewportX = Math.round(clientX + visualViewport.offsetLeft);\n        normalized.layoutViewportY = Math.round(clientY + visualViewport.offsetTop);\n    }\n    else {\n        // Typically Desktop Devices\n        normalized.visualViewportX = Math.round(clientX - visualViewport.offsetLeft);\n        normalized.visualViewportY = Math.round(clientY - visualViewport.offsetTop);\n    }\n    return normalized;\n};\nexport var getVisualViewport = function (visualViewport) { return ({\n    scale: visualViewport.scale,\n    offsetLeft: visualViewport.offsetLeft,\n    offsetTop: visualViewport.offsetTop,\n    pageLeft: visualViewport.pageLeft,\n    pageTop: visualViewport.pageTop,\n    height: visualViewport.height,\n    width: visualViewport.width,\n}); };\nexport function getScrollX() {\n    var scrollX;\n    var visual = window.visualViewport;\n    if (visual) {\n        scrollX = visual.pageLeft - visual.offsetLeft;\n    }\n    else if (window.scrollX !== undefined) {\n        scrollX = window.scrollX;\n    }\n    else {\n        scrollX = window.pageXOffset || 0;\n    }\n    return Math.round(scrollX);\n}\nexport function getScrollY() {\n    var scrollY;\n    var visual = window.visualViewport;\n    if (visual) {\n        scrollY = visual.pageTop - visual.offsetTop;\n    }\n    else if (window.scrollY !== undefined) {\n        scrollY = window.scrollY;\n    }\n    else {\n        scrollY = window.pageYOffset || 0;\n    }\n    return Math.round(scrollY);\n}\n","import { addEventListeners, addTelemetryDebug, throttle } from '@datadog/browser-core';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { IncrementalSource } from '../../../types';\nimport { getEventTarget, isTouchEvent } from '../eventsUtils';\nimport { convertMouseEventToLayoutCoordinates } from '../viewports';\nvar MOUSE_MOVE_OBSERVER_THRESHOLD = 50;\nexport function initMoveObserver(cb) {\n    var updatePosition = throttle(function (event) {\n        var target = getEventTarget(event);\n        if (hasSerializedNode(target)) {\n            var coordinates = tryToComputeCoordinates(event);\n            if (!coordinates) {\n                return;\n            }\n            var position = {\n                id: getSerializedNodeId(target),\n                timeOffset: 0,\n                x: coordinates.x,\n                y: coordinates.y,\n            };\n            cb([position], isTouchEvent(event) ? IncrementalSource.TouchMove : IncrementalSource.MouseMove);\n        }\n    }, MOUSE_MOVE_OBSERVER_THRESHOLD, {\n        trailing: false,\n    }).throttled;\n    return addEventListeners(document, [\"mousemove\" /* DOM_EVENT.MOUSE_MOVE */, \"touchmove\" /* DOM_EVENT.TOUCH_MOVE */], updatePosition, {\n        capture: true,\n        passive: true,\n    }).stop;\n}\nexport function tryToComputeCoordinates(event) {\n    var _a = isTouchEvent(event) ? event.changedTouches[0] : event, x = _a.clientX, y = _a.clientY;\n    if (window.visualViewport) {\n        var _b = convertMouseEventToLayoutCoordinates(x, y), visualViewportX = _b.visualViewportX, visualViewportY = _b.visualViewportY;\n        x = visualViewportX;\n        y = visualViewportY;\n    }\n    if (!Number.isFinite(x) || !Number.isFinite(y)) {\n        if (event.isTrusted) {\n            addTelemetryDebug('mouse/touch event without x/y');\n        }\n        return undefined;\n    }\n    return { x: x, y: y };\n}\n","import { throttle, addEventListener } from '@datadog/browser-core';\nimport { getEventTarget } from '../eventsUtils';\nimport { getNodePrivacyLevel } from '../privacy';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { getScrollX, getScrollY } from '../viewports';\nimport { NodePrivacyLevel } from '../../../constants';\nvar SCROLL_OBSERVER_THRESHOLD = 100;\nexport function initScrollObserver(cb, defaultPrivacyLevel, elementsScrollPositions) {\n    var updatePosition = throttle(function (event) {\n        var target = getEventTarget(event);\n        if (!target ||\n            getNodePrivacyLevel(target, defaultPrivacyLevel) === NodePrivacyLevel.HIDDEN ||\n            !hasSerializedNode(target)) {\n            return;\n        }\n        var id = getSerializedNodeId(target);\n        var scrollPositions = target === document\n            ? {\n                scrollTop: getScrollY(),\n                scrollLeft: getScrollX(),\n            }\n            : {\n                scrollTop: Math.round(target.scrollTop),\n                scrollLeft: Math.round(target.scrollLeft),\n            };\n        elementsScrollPositions.set(target, scrollPositions);\n        cb({\n            id: id,\n            x: scrollPositions.scrollLeft,\n            y: scrollPositions.scrollTop,\n        });\n    }, SCROLL_OBSERVER_THRESHOLD).throttled;\n    return addEventListener(document, \"scroll\" /* DOM_EVENT.SCROLL */, updatePosition, { capture: true, passive: true }).stop;\n}\n","var _a;\nimport { assign, addEventListeners } from '@datadog/browser-core';\nimport { NodePrivacyLevel } from '../../../constants';\nimport { IncrementalSource, MouseInteractionType } from '../../../types';\nimport { assembleIncrementalSnapshot } from '../assembly';\nimport { getEventTarget } from '../eventsUtils';\nimport { getNodePrivacyLevel } from '../privacy';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { tryToComputeCoordinates } from './moveObserver';\nvar eventTypeToMouseInteraction = (_a = {},\n    // Listen for pointerup DOM events instead of mouseup for MouseInteraction/MouseUp records. This\n    // allows to reference such records from Frustration records.\n    //\n    // In the context of supporting Mobile Session Replay, we introduced `PointerInteraction` records\n    // used by the Mobile SDKs in place of `MouseInteraction`. In the future, we should replace\n    // `MouseInteraction` by `PointerInteraction` in the Browser SDK so we have an uniform way to\n    // convey such interaction. This would cleanly solve the issue since we would have\n    // `PointerInteraction/Up` records that we could reference from `Frustration` records.\n    _a[\"pointerup\" /* DOM_EVENT.POINTER_UP */] = MouseInteractionType.MouseUp,\n    _a[\"mousedown\" /* DOM_EVENT.MOUSE_DOWN */] = MouseInteractionType.MouseDown,\n    _a[\"click\" /* DOM_EVENT.CLICK */] = MouseInteractionType.Click,\n    _a[\"contextmenu\" /* DOM_EVENT.CONTEXT_MENU */] = MouseInteractionType.ContextMenu,\n    _a[\"dblclick\" /* DOM_EVENT.DBL_CLICK */] = MouseInteractionType.DblClick,\n    _a[\"focus\" /* DOM_EVENT.FOCUS */] = MouseInteractionType.Focus,\n    _a[\"blur\" /* DOM_EVENT.BLUR */] = MouseInteractionType.Blur,\n    _a[\"touchstart\" /* DOM_EVENT.TOUCH_START */] = MouseInteractionType.TouchStart,\n    _a[\"touchend\" /* DOM_EVENT.TOUCH_END */] = MouseInteractionType.TouchEnd,\n    _a);\nexport function initMouseInteractionObserver(cb, defaultPrivacyLevel, recordIds) {\n    var handler = function (event) {\n        var target = getEventTarget(event);\n        if (getNodePrivacyLevel(target, defaultPrivacyLevel) === NodePrivacyLevel.HIDDEN || !hasSerializedNode(target)) {\n            return;\n        }\n        var id = getSerializedNodeId(target);\n        var type = eventTypeToMouseInteraction[event.type];\n        var interaction;\n        if (type !== MouseInteractionType.Blur && type !== MouseInteractionType.Focus) {\n            var coordinates = tryToComputeCoordinates(event);\n            if (!coordinates) {\n                return;\n            }\n            interaction = { id: id, type: type, x: coordinates.x, y: coordinates.y };\n        }\n        else {\n            interaction = { id: id, type: type };\n        }\n        var record = assign({ id: recordIds.getIdForEvent(event) }, assembleIncrementalSnapshot(IncrementalSource.MouseInteraction, interaction));\n        cb(record);\n    };\n    return addEventListeners(document, Object.keys(eventTypeToMouseInteraction), handler, {\n        capture: true,\n        passive: true,\n    }).stop;\n}\n","import { instrumentSetter, assign, addEventListeners, forEach } from '@datadog/browser-core';\nimport { NodePrivacyLevel } from '../../../constants';\nimport { getEventTarget } from '../eventsUtils';\nimport { getNodePrivacyLevel, shouldMaskNode } from '../privacy';\nimport { getElementInputValue, getSerializedNodeId, hasSerializedNode } from '../serialization';\nexport function initInputObserver(cb, defaultPrivacyLevel, _a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.domEvents, domEvents = _c === void 0 ? [\"input\" /* DOM_EVENT.INPUT */, \"change\" /* DOM_EVENT.CHANGE */] : _c, _d = _b.target, target = _d === void 0 ? document : _d;\n    var lastInputStateMap = new WeakMap();\n    function onElementChange(target) {\n        var nodePrivacyLevel = getNodePrivacyLevel(target, defaultPrivacyLevel);\n        if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n            return;\n        }\n        var type = target.type;\n        var inputState;\n        if (type === 'radio' || type === 'checkbox') {\n            if (shouldMaskNode(target, nodePrivacyLevel)) {\n                return;\n            }\n            inputState = { isChecked: target.checked };\n        }\n        else {\n            var value = getElementInputValue(target, nodePrivacyLevel);\n            if (value === undefined) {\n                return;\n            }\n            inputState = { text: value };\n        }\n        // Can be multiple changes on the same node within the same batched mutation observation.\n        cbWithDedup(target, inputState);\n        // If a radio was checked, other radios with the same name attribute will be unchecked.\n        var name = target.name;\n        if (type === 'radio' && name && target.checked) {\n            forEach(document.querySelectorAll(\"input[type=\\\"radio\\\"][name=\\\"\".concat(name, \"\\\"]\")), function (el) {\n                if (el !== target) {\n                    // TODO: Consider the privacy implications for various differing input privacy levels\n                    cbWithDedup(el, { isChecked: false });\n                }\n            });\n        }\n    }\n    /**\n     * There can be multiple changes on the same node within the same batched mutation observation.\n     */\n    function cbWithDedup(target, inputState) {\n        if (!hasSerializedNode(target)) {\n            return;\n        }\n        var lastInputState = lastInputStateMap.get(target);\n        if (!lastInputState ||\n            lastInputState.text !== inputState.text ||\n            lastInputState.isChecked !== inputState.isChecked) {\n            lastInputStateMap.set(target, inputState);\n            cb(assign({\n                id: getSerializedNodeId(target),\n            }, inputState));\n        }\n    }\n    var stopEventListeners = addEventListeners(target, domEvents, function (event) {\n        var target = getEventTarget(event);\n        if (target instanceof HTMLInputElement ||\n            target instanceof HTMLTextAreaElement ||\n            target instanceof HTMLSelectElement) {\n            onElementChange(target);\n        }\n    }, {\n        capture: true,\n        passive: true,\n    }).stop;\n    var instrumentationStoppers = [\n        instrumentSetter(HTMLInputElement.prototype, 'value', onElementChange),\n        instrumentSetter(HTMLInputElement.prototype, 'checked', onElementChange),\n        instrumentSetter(HTMLSelectElement.prototype, 'value', onElementChange),\n        instrumentSetter(HTMLTextAreaElement.prototype, 'value', onElementChange),\n        instrumentSetter(HTMLSelectElement.prototype, 'selectedIndex', onElementChange),\n    ];\n    return function () {\n        instrumentationStoppers.forEach(function (stopper) { return stopper.stop(); });\n        stopEventListeners();\n    };\n}\n","import { instrumentMethodAndCallOriginal } from '@datadog/browser-core';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nexport function initStyleSheetObserver(cb) {\n    function checkStyleSheetAndCallback(styleSheet, callback) {\n        if (styleSheet && hasSerializedNode(styleSheet.ownerNode)) {\n            callback(getSerializedNodeId(styleSheet.ownerNode));\n        }\n    }\n    var instrumentationStoppers = [\n        instrumentMethodAndCallOriginal(CSSStyleSheet.prototype, 'insertRule', {\n            before: function (rule, index) {\n                checkStyleSheetAndCallback(this, function (id) { return cb({ id: id, adds: [{ rule: rule, index: index }] }); });\n            },\n        }),\n        instrumentMethodAndCallOriginal(CSSStyleSheet.prototype, 'deleteRule', {\n            before: function (index) {\n                checkStyleSheetAndCallback(this, function (id) { return cb({ id: id, removes: [{ index: index }] }); });\n            },\n        }),\n    ];\n    if (typeof CSSGroupingRule !== 'undefined') {\n        instrumentGroupingCSSRuleClass(CSSGroupingRule);\n    }\n    else {\n        instrumentGroupingCSSRuleClass(CSSMediaRule);\n        instrumentGroupingCSSRuleClass(CSSSupportsRule);\n    }\n    function instrumentGroupingCSSRuleClass(cls) {\n        instrumentationStoppers.push(instrumentMethodAndCallOriginal(cls.prototype, 'insertRule', {\n            before: function (rule, index) {\n                var _this = this;\n                checkStyleSheetAndCallback(this.parentStyleSheet, function (id) {\n                    var path = getPathToNestedCSSRule(_this);\n                    if (path) {\n                        path.push(index || 0);\n                        cb({ id: id, adds: [{ rule: rule, index: path }] });\n                    }\n                });\n            },\n        }), instrumentMethodAndCallOriginal(cls.prototype, 'deleteRule', {\n            before: function (index) {\n                var _this = this;\n                checkStyleSheetAndCallback(this.parentStyleSheet, function (id) {\n                    var path = getPathToNestedCSSRule(_this);\n                    if (path) {\n                        path.push(index);\n                        cb({ id: id, removes: [{ index: path }] });\n                    }\n                });\n            },\n        }));\n    }\n    return function () { return instrumentationStoppers.forEach(function (stopper) { return stopper.stop(); }); };\n}\nexport function getPathToNestedCSSRule(rule) {\n    var path = [];\n    var currentRule = rule;\n    while (currentRule.parentRule) {\n        var rules_1 = Array.from(currentRule.parentRule.cssRules);\n        var index_1 = rules_1.indexOf(currentRule);\n        path.unshift(index_1);\n        currentRule = currentRule.parentRule;\n    }\n    // A rule may not be attached to a stylesheet\n    if (!currentRule.parentStyleSheet) {\n        return;\n    }\n    var rules = Array.from(currentRule.parentStyleSheet.cssRules);\n    var index = rules.indexOf(currentRule);\n    path.unshift(index);\n    return path;\n}\n","import { throttle, addEventListeners, noop } from '@datadog/browser-core';\nimport { initViewportObservable } from '@datadog/browser-rum-core';\nimport { getVisualViewport } from '../viewports';\nvar VISUAL_VIEWPORT_OBSERVER_THRESHOLD = 200;\nexport function initViewportResizeObserver(cb) {\n    return initViewportObservable().subscribe(cb).unsubscribe;\n}\nexport function initVisualViewportResizeObserver(cb) {\n    var visualViewport = window.visualViewport;\n    if (!visualViewport) {\n        return noop;\n    }\n    var _a = throttle(function () {\n        cb(getVisualViewport(visualViewport));\n    }, VISUAL_VIEWPORT_OBSERVER_THRESHOLD, {\n        trailing: false,\n    }), updateDimension = _a.throttled, cancelThrottle = _a.cancel;\n    var removeListener = addEventListeners(visualViewport, [\"resize\" /* DOM_EVENT.RESIZE */, \"scroll\" /* DOM_EVENT.SCROLL */], updateDimension, {\n        capture: true,\n        passive: true,\n    }).stop;\n    return function stop() {\n        removeListener();\n        cancelThrottle();\n    };\n}\n","import { noop, monitor } from '@datadog/browser-core';\n/**\n * Maximum duration to wait before processing mutations. If the browser is idle, mutations will be\n * processed more quickly. If the browser is busy executing small tasks (ex: rendering frames), the\n * mutations will wait MUTATION_PROCESS_MAX_DELAY milliseconds before being processed. If the\n * browser is busy executing a longer task, mutations will be processed after this task.\n */\nvar MUTATION_PROCESS_MAX_DELAY = 100;\nexport function createMutationBatch(processMutationBatch) {\n    var cancelScheduledFlush = noop;\n    var pendingMutations = [];\n    function flush() {\n        cancelScheduledFlush();\n        processMutationBatch(pendingMutations);\n        pendingMutations = [];\n    }\n    return {\n        addMutations: function (mutations) {\n            if (pendingMutations.length === 0) {\n                cancelScheduledFlush = requestIdleCallback(flush, { timeout: MUTATION_PROCESS_MAX_DELAY });\n            }\n            pendingMutations.push.apply(pendingMutations, mutations);\n        },\n        flush: flush,\n        stop: function () {\n            cancelScheduledFlush();\n        },\n    };\n}\n/**\n * Use 'requestIdleCallback' when available: it will throttle the mutation processing if the\n * browser is busy rendering frames (ex: when frames are below 60fps). When not available, the\n * fallback on 'requestAnimationFrame' will still ensure the mutations are processed after any\n * browser rendering process (Layout, Recalculate Style, etc.), so we can serialize DOM nodes efficiently.\n *\n * Note: check both 'requestIdleCallback' and 'cancelIdleCallback' existence because some polyfills only implement 'requestIdleCallback'.\n */\nfunction requestIdleCallback(callback, opts) {\n    if (window.requestIdleCallback && window.cancelIdleCallback) {\n        var id_1 = window.requestIdleCallback(monitor(callback), opts);\n        return function () { return window.cancelIdleCallback(id_1); };\n    }\n    var id = window.requestAnimationFrame(monitor(callback));\n    return function () { return window.cancelAnimationFrame(id); };\n}\n","import { monitor, noop } from '@datadog/browser-core';\nimport { getChildNodes, isNodeShadowHost, getMutationObserverConstructor, getParentNode, } from '@datadog/browser-rum-core';\nimport { NodePrivacyLevel } from '../../../constants';\nimport { getNodePrivacyLevel, getTextContent } from '../privacy';\nimport { getElementInputValue, getSerializedNodeId, hasSerializedNode, nodeAndAncestorsHaveSerializedNode, serializeNodeWithId, serializeAttribute, } from '../serialization';\nimport { createMutationBatch } from '../mutationBatch';\n/**\n * Buffers and aggregate mutations generated by a MutationObserver into MutationPayload\n */\nexport function initMutationObserver(mutationCallback, configuration, shadowRootsController, target) {\n    var MutationObserver = getMutationObserverConstructor();\n    if (!MutationObserver) {\n        return { stop: noop, flush: noop };\n    }\n    var mutationBatch = createMutationBatch(function (mutations) {\n        processMutations(mutations.concat(observer.takeRecords()), mutationCallback, configuration, shadowRootsController, target);\n    });\n    var observer = new MutationObserver(monitor(mutationBatch.addMutations));\n    observer.observe(target, {\n        attributeOldValue: true,\n        attributes: true,\n        characterData: true,\n        characterDataOldValue: true,\n        childList: true,\n        subtree: true,\n    });\n    return {\n        stop: function () {\n            observer.disconnect();\n            mutationBatch.stop();\n        },\n        flush: function () {\n            mutationBatch.flush();\n        },\n    };\n}\nfunction processMutations(mutations, mutationCallback, configuration, shadowRootsController, target) {\n    mutations\n        .filter(function (mutation) { return mutation.type === 'childList'; })\n        .forEach(function (mutation) {\n        mutation.removedNodes.forEach(function (removedNode) {\n            traverseRemovedShadowDom(removedNode, shadowRootsController.removeShadowRoot);\n        });\n    });\n    // Discard any mutation with a 'target' node that:\n    // * isn't injected in the current document or isn't known/serialized yet: those nodes are likely\n    // part of a mutation occurring in a parent Node\n    // * should be hidden or ignored\n    var filteredMutations = mutations.filter(function (mutation) {\n        return target.contains(mutation.target) &&\n            nodeAndAncestorsHaveSerializedNode(mutation.target) &&\n            getNodePrivacyLevel(mutation.target, configuration.defaultPrivacyLevel) !== NodePrivacyLevel.HIDDEN;\n    });\n    var _a = processChildListMutations(filteredMutations.filter(function (mutation) { return mutation.type === 'childList'; }), configuration, shadowRootsController), adds = _a.adds, removes = _a.removes, hasBeenSerialized = _a.hasBeenSerialized;\n    var texts = processCharacterDataMutations(filteredMutations.filter(function (mutation) {\n        return mutation.type === 'characterData' && !hasBeenSerialized(mutation.target);\n    }), configuration);\n    var attributes = processAttributesMutations(filteredMutations.filter(function (mutation) {\n        return mutation.type === 'attributes' && !hasBeenSerialized(mutation.target);\n    }), configuration);\n    if (!texts.length && !attributes.length && !removes.length && !adds.length) {\n        return;\n    }\n    mutationCallback({\n        adds: adds,\n        removes: removes,\n        texts: texts,\n        attributes: attributes,\n    });\n}\nfunction processChildListMutations(mutations, configuration, shadowRootsController) {\n    // First, we iterate over mutations to collect:\n    //\n    // * nodes that have been added in the document and not removed by a subsequent mutation\n    // * nodes that have been removed from the document but were not added in a previous mutation\n    //\n    // For this second category, we also collect their previous parent (mutation.target) because we'll\n    // need it to emit a 'remove' mutation.\n    //\n    // Those two categories may overlap: if a node moved from a position to another, it is reported as\n    // two mutation records, one with a \"removedNodes\" and the other with \"addedNodes\". In this case,\n    // the node will be in both sets.\n    var addedAndMovedNodes = new Set();\n    var removedNodes = new Map();\n    var _loop_1 = function (mutation) {\n        mutation.addedNodes.forEach(function (node) {\n            addedAndMovedNodes.add(node);\n        });\n        mutation.removedNodes.forEach(function (node) {\n            if (!addedAndMovedNodes.has(node)) {\n                removedNodes.set(node, mutation.target);\n            }\n            addedAndMovedNodes.delete(node);\n        });\n    };\n    for (var _i = 0, mutations_1 = mutations; _i < mutations_1.length; _i++) {\n        var mutation = mutations_1[_i];\n        _loop_1(mutation);\n    }\n    // Then, we sort nodes that are still in the document by topological order, for two reasons:\n    //\n    // * We will serialize each added nodes with their descendants. We don't want to serialize a node\n    // twice, so we need to iterate over the parent nodes first and skip any node that is contained in\n    // a precedent node.\n    //\n    // * To emit \"add\" mutations, we need references to the parent and potential next sibling of each\n    // added node. So we need to iterate over the parent nodes first, and when multiple nodes are\n    // siblings, we want to iterate from last to first. This will ensure that any \"next\" node is\n    // already serialized and have an id.\n    var sortedAddedAndMovedNodes = Array.from(addedAndMovedNodes);\n    sortAddedAndMovedNodes(sortedAddedAndMovedNodes);\n    // Then, we iterate over our sorted node sets to emit mutations. We collect the newly serialized\n    // node ids in a set to be able to skip subsequent related mutations.\n    var serializedNodeIds = new Set();\n    var addedNodeMutations = [];\n    for (var _a = 0, sortedAddedAndMovedNodes_1 = sortedAddedAndMovedNodes; _a < sortedAddedAndMovedNodes_1.length; _a++) {\n        var node = sortedAddedAndMovedNodes_1[_a];\n        if (hasBeenSerialized(node)) {\n            continue;\n        }\n        var parentNodePrivacyLevel = getNodePrivacyLevel(node.parentNode, configuration.defaultPrivacyLevel);\n        if (parentNodePrivacyLevel === NodePrivacyLevel.HIDDEN || parentNodePrivacyLevel === NodePrivacyLevel.IGNORE) {\n            continue;\n        }\n        var serializedNode = serializeNodeWithId(node, {\n            serializedNodeIds: serializedNodeIds,\n            parentNodePrivacyLevel: parentNodePrivacyLevel,\n            serializationContext: { status: 2 /* SerializationContextStatus.MUTATION */, shadowRootsController: shadowRootsController },\n            configuration: configuration,\n        });\n        if (!serializedNode) {\n            continue;\n        }\n        var parentNode = getParentNode(node);\n        addedNodeMutations.push({\n            nextId: getNextSibling(node),\n            parentId: getSerializedNodeId(parentNode),\n            node: serializedNode,\n        });\n    }\n    // Finally, we emit remove mutations.\n    var removedNodeMutations = [];\n    removedNodes.forEach(function (parent, node) {\n        if (hasSerializedNode(node)) {\n            removedNodeMutations.push({\n                parentId: getSerializedNodeId(parent),\n                id: getSerializedNodeId(node),\n            });\n        }\n    });\n    return { adds: addedNodeMutations, removes: removedNodeMutations, hasBeenSerialized: hasBeenSerialized };\n    function hasBeenSerialized(node) {\n        return hasSerializedNode(node) && serializedNodeIds.has(getSerializedNodeId(node));\n    }\n    function getNextSibling(node) {\n        var nextSibling = node.nextSibling;\n        while (nextSibling) {\n            if (hasSerializedNode(nextSibling)) {\n                return getSerializedNodeId(nextSibling);\n            }\n            nextSibling = nextSibling.nextSibling;\n        }\n        return null;\n    }\n}\nfunction processCharacterDataMutations(mutations, configuration) {\n    var _a;\n    var textMutations = [];\n    // Deduplicate mutations based on their target node\n    var handledNodes = new Set();\n    var filteredMutations = mutations.filter(function (mutation) {\n        if (handledNodes.has(mutation.target)) {\n            return false;\n        }\n        handledNodes.add(mutation.target);\n        return true;\n    });\n    // Emit mutations\n    for (var _i = 0, filteredMutations_1 = filteredMutations; _i < filteredMutations_1.length; _i++) {\n        var mutation = filteredMutations_1[_i];\n        var value = mutation.target.textContent;\n        if (value === mutation.oldValue) {\n            continue;\n        }\n        var parentNodePrivacyLevel = getNodePrivacyLevel(getParentNode(mutation.target), configuration.defaultPrivacyLevel);\n        if (parentNodePrivacyLevel === NodePrivacyLevel.HIDDEN || parentNodePrivacyLevel === NodePrivacyLevel.IGNORE) {\n            continue;\n        }\n        textMutations.push({\n            id: getSerializedNodeId(mutation.target),\n            // TODO: pass a valid \"ignoreWhiteSpace\" argument\n            value: (_a = getTextContent(mutation.target, false, parentNodePrivacyLevel)) !== null && _a !== void 0 ? _a : null,\n        });\n    }\n    return textMutations;\n}\nfunction processAttributesMutations(mutations, configuration) {\n    var attributeMutations = [];\n    // Deduplicate mutations based on their target node and changed attribute\n    var handledElements = new Map();\n    var filteredMutations = mutations.filter(function (mutation) {\n        var handledAttributes = handledElements.get(mutation.target);\n        if (handledAttributes === null || handledAttributes === void 0 ? void 0 : handledAttributes.has(mutation.attributeName)) {\n            return false;\n        }\n        if (!handledAttributes) {\n            handledElements.set(mutation.target, new Set([mutation.attributeName]));\n        }\n        else {\n            handledAttributes.add(mutation.attributeName);\n        }\n        return true;\n    });\n    // Emit mutations\n    var emittedMutations = new Map();\n    for (var _i = 0, filteredMutations_2 = filteredMutations; _i < filteredMutations_2.length; _i++) {\n        var mutation = filteredMutations_2[_i];\n        var uncensoredValue = mutation.target.getAttribute(mutation.attributeName);\n        if (uncensoredValue === mutation.oldValue) {\n            continue;\n        }\n        var privacyLevel = getNodePrivacyLevel(mutation.target, configuration.defaultPrivacyLevel);\n        var attributeValue = serializeAttribute(mutation.target, privacyLevel, mutation.attributeName, configuration);\n        var transformedValue = void 0;\n        if (mutation.attributeName === 'value') {\n            var inputValue = getElementInputValue(mutation.target, privacyLevel);\n            if (inputValue === undefined) {\n                continue;\n            }\n            transformedValue = inputValue;\n        }\n        else if (typeof attributeValue === 'string') {\n            transformedValue = attributeValue;\n        }\n        else {\n            transformedValue = null;\n        }\n        var emittedMutation = emittedMutations.get(mutation.target);\n        if (!emittedMutation) {\n            emittedMutation = {\n                id: getSerializedNodeId(mutation.target),\n                attributes: {},\n            };\n            attributeMutations.push(emittedMutation);\n            emittedMutations.set(mutation.target, emittedMutation);\n        }\n        emittedMutation.attributes[mutation.attributeName] = transformedValue;\n    }\n    return attributeMutations;\n}\nexport function sortAddedAndMovedNodes(nodes) {\n    nodes.sort(function (a, b) {\n        var position = a.compareDocumentPosition(b);\n        /* eslint-disable no-bitwise */\n        if (position & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n            return -1;\n        }\n        else if (position & Node.DOCUMENT_POSITION_CONTAINS) {\n            return 1;\n        }\n        else if (position & Node.DOCUMENT_POSITION_FOLLOWING) {\n            return 1;\n        }\n        else if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n            return -1;\n        }\n        /* eslint-enable no-bitwise */\n        return 0;\n    });\n}\nfunction traverseRemovedShadowDom(removedNode, shadowDomRemovedCallback) {\n    if (isNodeShadowHost(removedNode)) {\n        shadowDomRemovedCallback(removedNode.shadowRoot);\n    }\n    getChildNodes(removedNode).forEach(function (child) { return traverseRemovedShadowDom(child, shadowDomRemovedCallback); });\n}\n","import { timeStampNow } from '@datadog/browser-core';\nimport { getViewportDimension } from '@datadog/browser-rum-core';\nimport { RecordType, IncrementalSource } from '../../types';\nimport { assembleIncrementalSnapshot } from './assembly';\nimport { serializeDocument } from './serialization';\nimport { initObservers } from './observers';\nimport { getVisualViewport, getScrollX, getScrollY } from './viewports';\nimport { createElementsScrollPositions } from './elementsScrollPositions';\nimport { initShadowRootsController } from './shadowRootsController';\nexport function record(options) {\n    var emit = options.emit;\n    // runtime checks for user options\n    if (!emit) {\n        throw new Error('emit function is required');\n    }\n    var elementsScrollPositions = createElementsScrollPositions();\n    var mutationCb = function (mutation) {\n        emit(assembleIncrementalSnapshot(IncrementalSource.Mutation, mutation));\n    };\n    var inputCb = function (s) { return emit(assembleIncrementalSnapshot(IncrementalSource.Input, s)); };\n    var shadowRootsController = initShadowRootsController(options.configuration, { mutationCb: mutationCb, inputCb: inputCb });\n    var takeFullSnapshot = function (timestamp, serializationContext) {\n        if (timestamp === void 0) { timestamp = timeStampNow(); }\n        if (serializationContext === void 0) { serializationContext = {\n            status: 0 /* SerializationContextStatus.INITIAL_FULL_SNAPSHOT */,\n            elementsScrollPositions: elementsScrollPositions,\n            shadowRootsController: shadowRootsController,\n        }; }\n        var _a = getViewportDimension(), width = _a.width, height = _a.height;\n        emit({\n            data: {\n                height: height,\n                href: window.location.href,\n                width: width,\n            },\n            type: RecordType.Meta,\n            timestamp: timestamp,\n        });\n        emit({\n            data: {\n                has_focus: document.hasFocus(),\n            },\n            type: RecordType.Focus,\n            timestamp: timestamp,\n        });\n        emit({\n            data: {\n                node: serializeDocument(document, options.configuration, serializationContext),\n                initialOffset: {\n                    left: getScrollX(),\n                    top: getScrollY(),\n                },\n            },\n            type: RecordType.FullSnapshot,\n            timestamp: timestamp,\n        });\n        if (window.visualViewport) {\n            emit({\n                data: getVisualViewport(window.visualViewport),\n                type: RecordType.VisualViewport,\n                timestamp: timestamp,\n            });\n        }\n    };\n    takeFullSnapshot();\n    var _a = initObservers({\n        lifeCycle: options.lifeCycle,\n        configuration: options.configuration,\n        elementsScrollPositions: elementsScrollPositions,\n        inputCb: inputCb,\n        mediaInteractionCb: function (p) {\n            return emit(assembleIncrementalSnapshot(IncrementalSource.MediaInteraction, p));\n        },\n        mouseInteractionCb: function (mouseInteractionRecord) { return emit(mouseInteractionRecord); },\n        mousemoveCb: function (positions, source) { return emit(assembleIncrementalSnapshot(source, { positions: positions })); },\n        mutationCb: mutationCb,\n        scrollCb: function (p) { return emit(assembleIncrementalSnapshot(IncrementalSource.Scroll, p)); },\n        styleSheetCb: function (r) { return emit(assembleIncrementalSnapshot(IncrementalSource.StyleSheetRule, r)); },\n        viewportResizeCb: function (d) { return emit(assembleIncrementalSnapshot(IncrementalSource.ViewportResize, d)); },\n        frustrationCb: function (frustrationRecord) { return emit(frustrationRecord); },\n        focusCb: function (data) {\n            return emit({\n                data: data,\n                type: RecordType.Focus,\n                timestamp: timeStampNow(),\n            });\n        },\n        visualViewportResizeCb: function (data) {\n            emit({\n                data: data,\n                type: RecordType.VisualViewport,\n                timestamp: timeStampNow(),\n            });\n        },\n        shadowRootsController: shadowRootsController,\n    }), stopObservers = _a.stop, flushMutationsFromObservers = _a.flush;\n    function flushMutations() {\n        shadowRootsController.flush();\n        flushMutationsFromObservers();\n    }\n    return {\n        stop: function () {\n            shadowRootsController.stop();\n            stopObservers();\n        },\n        takeSubsequentFullSnapshot: function (timestamp) {\n            flushMutations();\n            takeFullSnapshot(timestamp, {\n                shadowRootsController: shadowRootsController,\n                status: 1 /* SerializationContextStatus.SUBSEQUENT_FULL_SNAPSHOT */,\n                elementsScrollPositions: elementsScrollPositions,\n            });\n        },\n        flushMutations: flushMutations,\n        shadowRootsController: shadowRootsController,\n    };\n}\n","export function createElementsScrollPositions() {\n    var scrollPositionsByElement = new WeakMap();\n    return {\n        set: function (element, scrollPositions) {\n            if (element === document && !document.scrollingElement) {\n                // cf https://drafts.csswg.org/cssom-view/#dom-document-scrollingelement,\n                // in some cases scrolling elements can not be defined, we don't support those for now\n                return;\n            }\n            scrollPositionsByElement.set(element === document ? document.scrollingElement : element, scrollPositions);\n        },\n        get: function (element) {\n            return scrollPositionsByElement.get(element);\n        },\n        has: function (element) {\n            return scrollPositionsByElement.has(element);\n        },\n    };\n}\n","import { initInputObserver, initMutationObserver } from './observers';\nexport var initShadowRootsController = function (configuration, _a) {\n    var mutationCb = _a.mutationCb, inputCb = _a.inputCb;\n    var controllerByShadowRoot = new Map();\n    var shadowRootsController = {\n        addShadowRoot: function (shadowRoot) {\n            var _a = initMutationObserver(mutationCb, configuration, shadowRootsController, shadowRoot), stopMutationObserver = _a.stop, flush = _a.flush;\n            // the change event no do bubble up across the shadow root, we have to listen on the shadow root\n            var stopInputObserver = initInputObserver(inputCb, configuration.defaultPrivacyLevel, {\n                target: shadowRoot,\n                domEvents: [\"change\" /* DOM_EVENT.CHANGE */],\n            });\n            controllerByShadowRoot.set(shadowRoot, {\n                flush: flush,\n                stop: function () {\n                    stopMutationObserver();\n                    stopInputObserver();\n                },\n            });\n        },\n        removeShadowRoot: function (shadowRoot) {\n            var entry = controllerByShadowRoot.get(shadowRoot);\n            if (!entry) {\n                // unidentified root cause: observed in some cases with shadow DOM added by browser extensions\n                return;\n            }\n            entry.stop();\n            controllerByShadowRoot.delete(shadowRoot);\n        },\n        stop: function () {\n            controllerByShadowRoot.forEach(function (_a) {\n                var stop = _a.stop;\n                return stop();\n            });\n        },\n        flush: function () {\n            controllerByShadowRoot.forEach(function (_a) {\n                var flush = _a.flush;\n                return flush();\n            });\n        },\n    };\n    return shadowRootsController;\n};\n","import { initMoveObserver } from './moveObserver';\nimport { initScrollObserver } from './scrollObserver';\nimport { initMouseInteractionObserver } from './mouseInteractionObserver';\nimport { initInputObserver } from './inputObserver';\nimport { initStyleSheetObserver } from './styleSheetObserver';\nimport { initMediaInteractionObserver } from './mediaInteractionObserver';\nimport { initFrustrationObserver } from './frustrationObserver';\nimport { initViewportResizeObserver, initVisualViewportResizeObserver } from './viewportResizeObserver';\nimport { initMutationObserver } from './mutationObserver';\nimport { initFocusObserver } from './focusObserver';\nimport { initRecordIds } from './recordIds';\nexport function initObservers(o) {\n    var recordIds = initRecordIds();\n    var mutationHandler = initMutationObserver(o.mutationCb, o.configuration, o.shadowRootsController, document);\n    var mousemoveHandler = initMoveObserver(o.mousemoveCb);\n    var mouseInteractionHandler = initMouseInteractionObserver(o.mouseInteractionCb, o.configuration.defaultPrivacyLevel, recordIds);\n    var scrollHandler = initScrollObserver(o.scrollCb, o.configuration.defaultPrivacyLevel, o.elementsScrollPositions);\n    var viewportResizeHandler = initViewportResizeObserver(o.viewportResizeCb);\n    var inputHandler = initInputObserver(o.inputCb, o.configuration.defaultPrivacyLevel);\n    var mediaInteractionHandler = initMediaInteractionObserver(o.mediaInteractionCb, o.configuration.defaultPrivacyLevel);\n    var styleSheetObserver = initStyleSheetObserver(o.styleSheetCb);\n    var focusHandler = initFocusObserver(o.focusCb);\n    var visualViewportResizeHandler = initVisualViewportResizeObserver(o.visualViewportResizeCb);\n    var frustrationHandler = initFrustrationObserver(o.lifeCycle, o.frustrationCb, recordIds);\n    return {\n        flush: function () {\n            mutationHandler.flush();\n        },\n        stop: function () {\n            mutationHandler.stop();\n            mousemoveHandler();\n            mouseInteractionHandler();\n            scrollHandler();\n            viewportResizeHandler();\n            inputHandler();\n            mediaInteractionHandler();\n            styleSheetObserver();\n            focusHandler();\n            visualViewportResizeHandler();\n            frustrationHandler();\n        },\n    };\n}\n","import { addEventListeners } from '@datadog/browser-core';\nimport { NodePrivacyLevel } from '../../../constants';\nimport { MediaInteractionType } from '../../../types';\nimport { getEventTarget } from '../eventsUtils';\nimport { getNodePrivacyLevel } from '../privacy';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nexport function initMediaInteractionObserver(mediaInteractionCb, defaultPrivacyLevel) {\n    var handler = function (event) {\n        var target = getEventTarget(event);\n        if (!target ||\n            getNodePrivacyLevel(target, defaultPrivacyLevel) === NodePrivacyLevel.HIDDEN ||\n            !hasSerializedNode(target)) {\n            return;\n        }\n        mediaInteractionCb({\n            id: getSerializedNodeId(target),\n            type: event.type === \"play\" /* DOM_EVENT.PLAY */ ? MediaInteractionType.Play : MediaInteractionType.Pause,\n        });\n    };\n    return addEventListeners(document, [\"play\" /* DOM_EVENT.PLAY */, \"pause\" /* DOM_EVENT.PAUSE */], handler, { capture: true, passive: true }).stop;\n}\n","import { addEventListeners } from '@datadog/browser-core';\nexport function initFocusObserver(focusCb) {\n    return addEventListeners(window, [\"focus\" /* DOM_EVENT.FOCUS */, \"blur\" /* DOM_EVENT.BLUR */], function () {\n        focusCb({ has_focus: document.hasFocus() });\n    }).stop;\n}\n","export function initRecordIds() {\n    var recordIds = new WeakMap();\n    var nextId = 1;\n    return {\n        getIdForEvent: function (event) {\n            if (!recordIds.has(event)) {\n                recordIds.set(event, nextId++);\n            }\n            return recordIds.get(event);\n        },\n    };\n}\n","import { RecordType } from '../../../types';\nexport function initFrustrationObserver(lifeCycle, frustrationCb, recordIds) {\n    return lifeCycle.subscribe(10 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, function (data) {\n        var _a, _b, _c;\n        if (data.rawRumEvent.type === \"action\" /* RumEventType.ACTION */ &&\n            data.rawRumEvent.action.type === \"click\" /* ActionType.CLICK */ &&\n            ((_b = (_a = data.rawRumEvent.action.frustration) === null || _a === void 0 ? void 0 : _a.type) === null || _b === void 0 ? void 0 : _b.length) &&\n            'events' in data.domainContext &&\n            ((_c = data.domainContext.events) === null || _c === void 0 ? void 0 : _c.length)) {\n            frustrationCb({\n                timestamp: data.rawRumEvent.date,\n                type: RecordType.FrustrationRecord,\n                data: {\n                    frustrationTypes: data.rawRumEvent.action.frustration.type,\n                    recordIds: data.domainContext.events.map(function (e) { return recordIds.getIdForEvent(e); }),\n                },\n            });\n        }\n    }).unsubscribe;\n}\n","import { objectEntries } from '@datadog/browser-core';\nexport function buildReplayPayload(data, metadata, rawSegmentBytesCount) {\n    var formData = new FormData();\n    formData.append('segment', new Blob([data], {\n        type: 'application/octet-stream',\n    }), \"\".concat(metadata.session.id, \"-\").concat(metadata.start));\n    toFormEntries(metadata, function (key, value) { return formData.append(key, value); });\n    formData.append('raw_segment_size', rawSegmentBytesCount.toString());\n    return { data: formData, bytesCount: data.byteLength };\n}\nexport function toFormEntries(input, onEntry, prefix) {\n    if (prefix === void 0) { prefix = ''; }\n    objectEntries(input).forEach(function (_a) {\n        var key = _a[0], value = _a[1];\n        if (typeof value === 'object' && value !== null) {\n            toFormEntries(value, onEntry, \"\".concat(prefix).concat(key, \".\"));\n        }\n        else {\n            onEntry(\"\".concat(prefix).concat(key), String(value));\n        }\n    });\n}\n","export var MAX_STATS_HISTORY = 10;\nvar statsPerView;\nexport function getSegmentsCount(viewId) {\n    return getOrCreateReplayStats(viewId).segments_count;\n}\nexport function addSegment(viewId) {\n    getOrCreateReplayStats(viewId).segments_count += 1;\n}\nexport function addRecord(viewId) {\n    getOrCreateReplayStats(viewId).records_count += 1;\n}\nexport function addWroteData(viewId, additionalBytesCount) {\n    getOrCreateReplayStats(viewId).segments_total_raw_size += additionalBytesCount;\n}\nexport function getReplayStats(viewId) {\n    return statsPerView === null || statsPerView === void 0 ? void 0 : statsPerView.get(viewId);\n}\nexport function resetReplayStats() {\n    statsPerView = undefined;\n}\nfunction getOrCreateReplayStats(viewId) {\n    if (!statsPerView) {\n        statsPerView = new Map();\n    }\n    var replayStats;\n    if (statsPerView.has(viewId)) {\n        replayStats = statsPerView.get(viewId);\n    }\n    else {\n        replayStats = {\n            records_count: 0,\n            segments_count: 0,\n            segments_total_raw_size: 0,\n        };\n        statsPerView.set(viewId, replayStats);\n        if (statsPerView.size > MAX_STATS_HISTORY) {\n            deleteOldestStats();\n        }\n    }\n    return replayStats;\n}\nfunction deleteOldestStats() {\n    if (!statsPerView) {\n        return;\n    }\n    if (statsPerView.keys) {\n        statsPerView.delete(statsPerView.keys().next().value);\n    }\n    else {\n        // IE11 doesn't support map.keys\n        var isFirst_1 = true;\n        statsPerView.forEach(function (_value, key) {\n            if (isFirst_1) {\n                statsPerView.delete(key);\n                isFirst_1 = false;\n            }\n        });\n    }\n}\n","import { addTelemetryDebug, assign, sendToExtension, addEventListener } from '@datadog/browser-core';\nimport { RecordType } from '../../types';\nimport * as replayStats from '../replayStats';\nvar nextId = 0;\nvar Segment = /** @class */ (function () {\n    function Segment(worker, context, creationReason, initialRecord, onWrote, onFlushed) {\n        var _this = this;\n        this.worker = worker;\n        this.id = nextId++;\n        var viewId = context.view.id;\n        this.metadata = assign({\n            start: initialRecord.timestamp,\n            end: initialRecord.timestamp,\n            creation_reason: creationReason,\n            records_count: 1,\n            has_full_snapshot: initialRecord.type === RecordType.FullSnapshot,\n            index_in_view: replayStats.getSegmentsCount(viewId),\n            source: 'browser',\n        }, context);\n        replayStats.addSegment(viewId);\n        replayStats.addRecord(viewId);\n        var removeMessageListener = addEventListener(worker, 'message', function (_a) {\n            var data = _a.data;\n            if (data.type === 'errored' || data.type === 'initialized') {\n                return;\n            }\n            if (data.id === _this.id) {\n                replayStats.addWroteData(viewId, data.additionalBytesCount);\n                if (data.type === 'flushed') {\n                    onFlushed(data.result, data.rawBytesCount);\n                    removeMessageListener();\n                }\n                else {\n                    onWrote(data.compressedBytesCount);\n                }\n            }\n            else if (data.id > _this.id) {\n                // Messages should be received in the same order as they are sent, so if we receive a\n                // message with an id superior to this Segment instance id, we know that another, more\n                // recent Segment instance is being used.\n                //\n                // In theory, a \"flush\" response should have been received at this point, so the listener\n                // should already have been removed. But if something goes wrong and we didn't receive a\n                // \"flush\" response, remove the listener to avoid any leak, and send a monitor message to\n                // help investigate the issue.\n                removeMessageListener();\n                addTelemetryDebug(\"Segment did not receive a 'flush' response before being replaced.\");\n            }\n        }).stop;\n        sendToExtension('record', { record: initialRecord, segment: this.metadata });\n        this.worker.postMessage({ data: \"{\\\"records\\\":[\".concat(JSON.stringify(initialRecord)), id: this.id, action: 'write' });\n    }\n    Segment.prototype.addRecord = function (record) {\n        var _a;\n        this.metadata.start = Math.min(this.metadata.start, record.timestamp);\n        this.metadata.end = Math.max(this.metadata.end, record.timestamp);\n        this.metadata.records_count += 1;\n        replayStats.addRecord(this.metadata.view.id);\n        (_a = this.metadata).has_full_snapshot || (_a.has_full_snapshot = record.type === RecordType.FullSnapshot);\n        sendToExtension('record', { record: record, segment: this.metadata });\n        this.worker.postMessage({ data: \",\".concat(JSON.stringify(record)), id: this.id, action: 'write' });\n    };\n    Segment.prototype.flush = function (reason) {\n        this.worker.postMessage({\n            data: \"],\".concat(JSON.stringify(this.metadata).slice(1), \"\\n\"),\n            id: this.id,\n            action: 'flush',\n        });\n        this.flushReason = reason;\n    };\n    return Segment;\n}());\nexport { Segment };\n","var workerURL;\nexport function createDeflateWorker() {\n    // Lazily compute the worker URL to allow importing the SDK in NodeJS\n    if (!workerURL) {\n        workerURL = URL.createObjectURL(new Blob([\"(\".concat(workerCodeFn, \")(self)\")]));\n    }\n    return new Worker(workerURL);\n}\nfunction workerCodeFn() {\n    monitor(function () {\n        var _a = makePakoDeflate(), Deflate = _a.Deflate, constants = _a.constants, string2buf = _a.string2buf;\n        var deflate = new Deflate();\n        var rawBytesCount = 0;\n        self.addEventListener('message', monitor(function (event) {\n            var data = event.data;\n            switch (data.action) {\n                case 'init':\n                    self.postMessage({\n                        type: 'initialized',\n                    });\n                    break;\n                case 'write': {\n                    var additionalBytesCount = pushData(data.data);\n                    self.postMessage({\n                        type: 'wrote',\n                        id: data.id,\n                        compressedBytesCount: deflate.chunks.reduce(function (total, chunk) { return total + chunk.length; }, 0),\n                        additionalBytesCount: additionalBytesCount,\n                    });\n                    break;\n                }\n                case 'flush': {\n                    var additionalBytesCount = data.data ? pushData(data.data) : 0;\n                    deflate.push('', constants.Z_FINISH);\n                    self.postMessage({\n                        type: 'flushed',\n                        id: data.id,\n                        result: deflate.result,\n                        additionalBytesCount: additionalBytesCount,\n                        rawBytesCount: rawBytesCount,\n                    });\n                    deflate = new Deflate();\n                    rawBytesCount = 0;\n                    break;\n                }\n            }\n        }));\n        function pushData(data) {\n            // TextEncoder is not supported on old browser version like Edge 18, therefore we use string2buf\n            var binaryData = string2buf(data);\n            deflate.push(binaryData, constants.Z_SYNC_FLUSH);\n            rawBytesCount += binaryData.length;\n            return binaryData.length;\n        }\n    })();\n    function monitor(fn) {\n        return function () {\n            try {\n                return fn.apply(this, arguments);\n            }\n            catch (e) {\n                try {\n                    self.postMessage({\n                        type: 'errored',\n                        error: e,\n                    });\n                }\n                catch (_) {\n                    // DATA_CLONE_ERR, cf https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm\n                    self.postMessage({\n                        type: 'errored',\n                        error: \"\".concat(e),\n                    });\n                }\n            }\n        };\n    }\n    // https://github.com/nodeca/pako/blob/034669ba0f1a4c0590e45f7c2820128200f972b3/dist/pako_deflate.es5.js\n    function makePakoDeflate() {\n        /* eslint-disable camelcase, no-bitwise */\n        // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n        //\n        // This software is provided 'as-is', without any express or implied\n        // warranty. In no event will the authors be held liable for any damages\n        // arising from the use of this software.\n        //\n        // Permission is granted to anyone to use this software for any purpose,\n        // including commercial applications, and to alter it and redistribute it\n        // freely, subject to the following restrictions:\n        //\n        // 1. The origin of this software must not be misrepresented; you must not\n        //   claim that you wrote the original software. If you use this software\n        //   in a product, an acknowledgment in the product documentation would be\n        //   appreciated but is not required.\n        // 2. Altered source versions must be plainly marked as such, and must not be\n        //   misrepresented as being the original software.\n        // 3. This notice may not be removed or altered from any source distribution.\n        /* Public constants ========================================================== */\n        /* =========================================================================== */\n        // const Z_FILTERED          = 1;\n        // const Z_HUFFMAN_ONLY      = 2;\n        // const Z_RLE               = 3;\n        var Z_FIXED = 4; // const Z_DEFAULT_STRATEGY  = 0;\n        /* Possible values of the data_type field (though see inflate()) */\n        var Z_BINARY = 0;\n        var Z_TEXT = 1; // const Z_ASCII             = 1; // = Z_TEXT\n        var Z_UNKNOWN = 2;\n        /* ============================================================================ */\n        function zero(buf) {\n            var len = buf.length;\n            while (--len >= 0) {\n                buf[len] = 0;\n            }\n        } // From zutil.h\n        var STORED_BLOCK = 0;\n        var STATIC_TREES = 1;\n        var DYN_TREES = 2;\n        /* The three kinds of block type */\n        var MIN_MATCH = 3;\n        var MAX_MATCH = 258;\n        /* The minimum and maximum match lengths */\n        // From deflate.h\n        /* ===========================================================================\n         * Internal compression state.\n         */\n        var LENGTH_CODES = 29;\n        /* number of length codes, not counting the special END_BLOCK code */\n        var LITERALS = 256;\n        /* number of literal bytes 0..255 */\n        var L_CODES = LITERALS + 1 + LENGTH_CODES;\n        /* number of Literal or Length codes, including the END_BLOCK code */\n        var D_CODES = 30;\n        /* number of distance codes */\n        var BL_CODES = 19;\n        /* number of codes used to transfer the bit lengths */\n        var HEAP_SIZE = 2 * L_CODES + 1;\n        /* maximum heap size */\n        var MAX_BITS = 15;\n        /* All codes must not exceed MAX_BITS bits */\n        var Buf_size = 16;\n        /* size of bit buffer in bi_buf */\n        /* ===========================================================================\n         * Constants\n         */\n        var MAX_BL_BITS = 7;\n        /* Bit length codes must not exceed MAX_BL_BITS bits */\n        var END_BLOCK = 256;\n        /* end of block literal code */\n        var REP_3_6 = 16;\n        /* repeat previous bit length 3-6 times (2 bits of repeat count) */\n        var REPZ_3_10 = 17;\n        /* repeat a zero length 3-10 times  (3 bits of repeat count) */\n        var REPZ_11_138 = 18;\n        /* repeat a zero length 11-138 times  (7 bits of repeat count) */\n        var extra_lbits = \n        /* extra bits for each length code */\n        new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]);\n        var extra_dbits = \n        /* extra bits for each distance code */\n        new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]);\n        var extra_blbits = \n        /* extra bits for each bit length code */\n        new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]);\n        var bl_order = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n        /* eslint-enable comma-spacing,array-bracket-spacing */\n        /* The lengths of the bit length codes are sent in order of decreasing\n         * probability, to avoid transmitting the lengths for unused bit length codes.\n         */\n        /* ===========================================================================\n         * Local data. These are initialized only once.\n         */\n        // We pre-fill arrays with 0 to avoid uninitialized gaps\n        var DIST_CODE_LEN = 512;\n        /* see definition of array dist_code below */\n        // !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\n        var static_ltree = new Array((L_CODES + 2) * 2);\n        zero(static_ltree);\n        /* The static literal tree. Since the bit lengths are imposed, there is no\n         * need for the L_CODES extra codes used during heap construction. However\n         * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n         * below).\n         */\n        var static_dtree = new Array(D_CODES * 2);\n        zero(static_dtree);\n        /* The static distance tree. (Actually a trivial tree since all codes use\n         * 5 bits.)\n         */\n        var _dist_code = new Array(DIST_CODE_LEN);\n        zero(_dist_code);\n        /* Distance codes. The first 256 values correspond to the distances\n         * 3 .. 258, the last 256 values correspond to the top 8 bits of\n         * the 15 bit distances.\n         */\n        var _length_code = new Array(MAX_MATCH - MIN_MATCH + 1);\n        zero(_length_code);\n        /* length code for each normalized match length (0 == MIN_MATCH) */\n        var base_length = new Array(LENGTH_CODES);\n        zero(base_length);\n        /* First normalized length for each code (0 = MIN_MATCH) */\n        var base_dist = new Array(D_CODES);\n        zero(base_dist);\n        /* First normalized distance for each code (0 = distance of 1) */\n        function StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n            this.static_tree = static_tree;\n            /* static tree or NULL */\n            this.extra_bits = extra_bits;\n            /* extra bits for each code or NULL */\n            this.extra_base = extra_base;\n            /* base index for extra_bits */\n            this.elems = elems;\n            /* max number of elements in the tree */\n            this.max_length = max_length;\n            /* max bit length for the codes */\n            // show if `static_tree` has data or dummy - needed for monomorphic objects\n            this.has_stree = static_tree && static_tree.length;\n        }\n        var static_l_desc;\n        var static_d_desc;\n        var static_bl_desc;\n        function TreeDesc(dyn_tree, stat_desc) {\n            this.dyn_tree = dyn_tree;\n            /* the dynamic tree */\n            this.max_code = 0;\n            /* largest code with non zero frequency */\n            this.stat_desc = stat_desc;\n            /* the corresponding static tree */\n        }\n        var d_code = function d_code(dist) {\n            return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n        };\n        /* ===========================================================================\n         * Output a short LSB first on the stream.\n         * IN assertion: there is enough room in pendingBuf.\n         */\n        var put_short = function put_short(s, w) {\n            //    put_byte(s, (uch)((w) & 0xff));\n            //    put_byte(s, (uch)((ush)(w) >> 8));\n            s.pending_buf[s.pending++] = w & 0xff;\n            s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n        };\n        /* ===========================================================================\n         * Send a value on a given number of bits.\n         * IN assertion: length <= 16 and value fits in length bits.\n         */\n        var send_bits = function send_bits(s, value, length) {\n            if (s.bi_valid > Buf_size - length) {\n                s.bi_buf |= (value << s.bi_valid) & 0xffff;\n                put_short(s, s.bi_buf);\n                s.bi_buf = value >> (Buf_size - s.bi_valid);\n                s.bi_valid += length - Buf_size;\n            }\n            else {\n                s.bi_buf |= (value << s.bi_valid) & 0xffff;\n                s.bi_valid += length;\n            }\n        };\n        var send_code = function send_code(s, c, tree) {\n            send_bits(s, tree[c * 2], \n            /* .Code */\n            tree[c * 2 + 1]\n            /* .Len */\n            );\n        };\n        /* ===========================================================================\n         * Reverse the first len bits of a code, using straightforward code (a faster\n         * method would use a table)\n         * IN assertion: 1 <= len <= 15\n         */\n        var bi_reverse = function bi_reverse(code, len) {\n            var res = 0;\n            do {\n                res |= code & 1;\n                code >>>= 1;\n                res <<= 1;\n            } while (--len > 0);\n            return res >>> 1;\n        };\n        /* ===========================================================================\n         * Flush the bit buffer, keeping at most 7 bits in it.\n         */\n        var bi_flush = function bi_flush(s) {\n            if (s.bi_valid === 16) {\n                put_short(s, s.bi_buf);\n                s.bi_buf = 0;\n                s.bi_valid = 0;\n            }\n            else if (s.bi_valid >= 8) {\n                s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n                s.bi_buf >>= 8;\n                s.bi_valid -= 8;\n            }\n        };\n        /* ===========================================================================\n         * Compute the optimal bit lengths for a tree and update the total bit length\n         * for the current block.\n         * IN assertion: the fields freq and dad are set, heap[heap_max] and\n         *    above are the tree nodes sorted by increasing frequency.\n         * OUT assertions: the field len is set to the optimal bit length, the\n         *     array bl_count contains the frequencies for each bit length.\n         *     The length opt_len is updated; static_len is also updated if stree is\n         *     not null.\n         */\n        var gen_bitlen = function gen_bitlen(s, desc //    deflate_state *s; //    tree_desc *desc;    /* the tree descriptor */\n        ) {\n            var tree = desc.dyn_tree;\n            var max_code = desc.max_code;\n            var stree = desc.stat_desc.static_tree;\n            var has_stree = desc.stat_desc.has_stree;\n            var extra = desc.stat_desc.extra_bits;\n            var base = desc.stat_desc.extra_base;\n            var max_length = desc.stat_desc.max_length;\n            var h;\n            /* heap index */\n            var n;\n            var m;\n            /* iterate over the tree elements */\n            var bits;\n            /* bit length */\n            var xbits;\n            /* extra bits */\n            var f;\n            /* frequency */\n            var overflow = 0;\n            /* number of elements with bit length too large */\n            for (bits = 0; bits <= MAX_BITS; bits++) {\n                s.bl_count[bits] = 0;\n            }\n            /* In a first pass, compute the optimal bit lengths (which may\n             * overflow in the case of the bit length tree).\n             */\n            tree[s.heap[s.heap_max] * 2 + 1] =\n                /* .Len */\n                0;\n            /* root of the heap */\n            for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\n                n = s.heap[h];\n                bits =\n                    tree[tree[n * 2 + 1] *\n                        /* .Dad */\n                        2 +\n                        1] +\n                        /* .Len */\n                        1;\n                if (bits > max_length) {\n                    bits = max_length;\n                    overflow++;\n                }\n                tree[n * 2 + 1] =\n                    /* .Len */\n                    bits;\n                /* We overwrite tree[n].Dad which is no longer needed */\n                if (n > max_code) {\n                    continue;\n                }\n                /* not a leaf node */\n                s.bl_count[bits]++;\n                xbits = 0;\n                if (n >= base) {\n                    xbits = extra[n - base];\n                }\n                f = tree[n * 2];\n                /* .Freq */\n                s.opt_len += f * (bits + xbits);\n                if (has_stree) {\n                    s.static_len +=\n                        f *\n                            (stree[n * 2 + 1] +\n                                /* .Len */\n                                xbits);\n                }\n            }\n            if (overflow === 0) {\n                return;\n            } // Trace((stderr,\"\\nbit length overflow\\n\"));\n            /* This happens for example on obj2 and pic of the Calgary corpus */\n            /* Find the first bit length which could increase: */\n            do {\n                bits = max_length - 1;\n                while (s.bl_count[bits] === 0) {\n                    bits--;\n                }\n                s.bl_count[bits]--;\n                /* move one leaf down the tree */\n                s.bl_count[bits + 1] += 2;\n                /* move one overflow item as its brother */\n                s.bl_count[max_length]--;\n                /* The brother of the overflow item also moves one step up,\n                 * but this does not affect bl_count[max_length]\n                 */\n                overflow -= 2;\n            } while (overflow > 0);\n            /* Now recompute all bit lengths, scanning in increasing frequency.\n             * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n             * lengths instead of fixing only the wrong ones. This idea is taken\n             * from 'ar' written by Haruhiko Okumura.)\n             */\n            for (bits = max_length; bits !== 0; bits--) {\n                n = s.bl_count[bits];\n                while (n !== 0) {\n                    m = s.heap[--h];\n                    if (m > max_code) {\n                        continue;\n                    }\n                    if (tree[m * 2 + 1] !==\n                        /* .Len */\n                        bits) {\n                        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n                        s.opt_len +=\n                            (bits - tree[m * 2 + 1]) *\n                                /* .Len */\n                                tree[m * 2];\n                        /* .Freq */\n                        tree[m * 2 + 1] =\n                            /* .Len */\n                            bits;\n                    }\n                    n--;\n                }\n            }\n        };\n        /* ===========================================================================\n         * Generate the codes for a given tree and bit counts (which need not be\n         * optimal).\n         * IN assertion: the array bl_count contains the bit length statistics for\n         * the given tree and the field len is set for all tree elements.\n         * OUT assertion: the field code is set for all tree elements of non\n         *     zero code length.\n         */\n        var gen_codes = function gen_codes(tree, max_code, bl_count\n        //    ct_data *tree;             /* the tree to decorate */\n        //    int max_code;              /* largest code with non zero frequency */\n        //    ushf *bl_count;            /* number of codes at each bit length */\n        ) {\n            var next_code = new Array(MAX_BITS + 1);\n            /* next code value for each bit length */\n            var code = 0;\n            /* running code value */\n            var bits;\n            /* bit index */\n            var n;\n            /* code index */\n            /* The distribution counts are first used to generate the code values\n             * without bit reversal.\n             */\n            for (bits = 1; bits <= MAX_BITS; bits++) {\n                next_code[bits] = code = (code + bl_count[bits - 1]) << 1;\n            }\n            /* Check that the bit counts in bl_count are consistent. The last code\n             * must be all ones.\n             */\n            // Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n            //        \"inconsistent bit counts\");\n            // Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n            for (n = 0; n <= max_code; n++) {\n                var len = tree[n * 2 + 1];\n                /* .Len */\n                if (len === 0) {\n                    continue;\n                }\n                /* Now reverse the bits */\n                tree[n * 2] =\n                    /* .Code */\n                    bi_reverse(next_code[len]++, len); // Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n                //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n            }\n        };\n        /* ===========================================================================\n         * Initialize the various 'constant' tables.\n         */\n        var tr_static_init = function tr_static_init() {\n            var n;\n            /* iterates over tree elements */\n            var bits;\n            /* bit counter */\n            var length;\n            /* length value */\n            var code;\n            /* code value */\n            var dist;\n            /* distance index */\n            var bl_count = new Array(MAX_BITS + 1);\n            /* number of codes at each bit length for an optimal tree */\n            // do check in _tr_init()\n            // if (static_init_done) return;\n            /* For some embedded targets, global variables are not initialized: */\n            /* #ifdef NO_INIT_GLOBAL_POINTERS\n            static_l_desc.static_tree = static_ltree;\n            static_l_desc.extra_bits = extra_lbits;\n            static_d_desc.static_tree = static_dtree;\n            static_d_desc.extra_bits = extra_dbits;\n            static_bl_desc.extra_bits = extra_blbits;\n          #endif */\n            /* Initialize the mapping length (0..255) -> length code (0..28) */\n            length = 0;\n            for (code = 0; code < LENGTH_CODES - 1; code++) {\n                base_length[code] = length;\n                for (n = 0; n < 1 << extra_lbits[code]; n++) {\n                    _length_code[length++] = code;\n                }\n            } // Assert (length == 256, \"tr_static_init: length != 256\");\n            /* Note that the length 255 (match length 258) can be represented\n             * in two different ways: code 284 + 5 bits or code 285, so we\n             * overwrite length_code[255] to use the best encoding:\n             */\n            _length_code[length - 1] = code;\n            /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n            dist = 0;\n            for (code = 0; code < 16; code++) {\n                base_dist[code] = dist;\n                for (n = 0; n < 1 << extra_dbits[code]; n++) {\n                    _dist_code[dist++] = code;\n                }\n            } // Assert (dist == 256, \"tr_static_init: dist != 256\");\n            dist >>= 7;\n            /* from now on, all distances are divided by 128 */\n            for (; code < D_CODES; code++) {\n                base_dist[code] = dist << 7;\n                for (n = 0; n < 1 << (extra_dbits[code] - 7); n++) {\n                    _dist_code[256 + dist++] = code;\n                }\n            } // Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n            /* Construct the codes of the static literal tree */\n            for (bits = 0; bits <= MAX_BITS; bits++) {\n                bl_count[bits] = 0;\n            }\n            n = 0;\n            while (n <= 143) {\n                static_ltree[n * 2 + 1] =\n                    /* .Len */\n                    8;\n                n++;\n                bl_count[8]++;\n            }\n            while (n <= 255) {\n                static_ltree[n * 2 + 1] =\n                    /* .Len */\n                    9;\n                n++;\n                bl_count[9]++;\n            }\n            while (n <= 279) {\n                static_ltree[n * 2 + 1] =\n                    /* .Len */\n                    7;\n                n++;\n                bl_count[7]++;\n            }\n            while (n <= 287) {\n                static_ltree[n * 2 + 1] =\n                    /* .Len */\n                    8;\n                n++;\n                bl_count[8]++;\n            }\n            /* Codes 286 and 287 do not exist, but we must include them in the\n             * tree construction to get a canonical Huffman tree (longest code\n             * all ones)\n             */\n            gen_codes(static_ltree, L_CODES + 1, bl_count);\n            /* The static distance tree is trivial: */\n            for (n = 0; n < D_CODES; n++) {\n                static_dtree[n * 2 + 1] =\n                    /* .Len */\n                    5;\n                static_dtree[n * 2] =\n                    /* .Code */\n                    bi_reverse(n, 5);\n            } // Now data ready and we can init static trees\n            static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\n            static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0, D_CODES, MAX_BITS);\n            static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0, BL_CODES, MAX_BL_BITS);\n            // static_init_done = true;\n        };\n        /* ===========================================================================\n         * Initialize a new block.\n         */\n        var init_block = function init_block(s) {\n            var n;\n            /* iterates over tree elements */\n            /* Initialize the trees. */\n            for (n = 0; n < L_CODES; n++) {\n                s.dyn_ltree[n * 2] =\n                    /* .Freq */\n                    0;\n            }\n            for (n = 0; n < D_CODES; n++) {\n                s.dyn_dtree[n * 2] =\n                    /* .Freq */\n                    0;\n            }\n            for (n = 0; n < BL_CODES; n++) {\n                s.bl_tree[n * 2] =\n                    /* .Freq */\n                    0;\n            }\n            s.dyn_ltree[END_BLOCK * 2] =\n                /* .Freq */\n                1;\n            s.opt_len = s.static_len = 0;\n            s.last_lit = s.matches = 0;\n        };\n        /* ===========================================================================\n         * Flush the bit buffer and align the output on a byte boundary\n         */\n        var bi_windup = function bi_windup(s) {\n            if (s.bi_valid > 8) {\n                put_short(s, s.bi_buf);\n            }\n            else if (s.bi_valid > 0) {\n                // put_byte(s, (Byte)s->bi_buf);\n                s.pending_buf[s.pending++] = s.bi_buf;\n            }\n            s.bi_buf = 0;\n            s.bi_valid = 0;\n        };\n        /* ===========================================================================\n         * Copy a stored block, storing first the length and its\n         * one's complement if requested.\n         */\n        var copy_block = function copy_block(s, buf, len, header\n        // DeflateState *s;\n        // charf    *buf;    /* the input data */\n        // unsigned len;     /* its length */\n        // int      header;  /* true if block header must be written */\n        ) {\n            bi_windup(s);\n            /* align on byte boundary */\n            if (header) {\n                put_short(s, len);\n                put_short(s, ~len);\n            }\n            //  while (len--) {\n            //    put_byte(s, *buf++);\n            //  }\n            s.pending_buf.set(s.window.subarray(buf, buf + len), s.pending);\n            s.pending += len;\n        };\n        /* ===========================================================================\n         * Compares to subtrees, using the tree depth as tie breaker when\n         * the subtrees have equal frequency. This minimizes the worst case length.\n         */\n        var smaller = function smaller(tree, n, m, depth) {\n            var _n2 = n * 2;\n            var _m2 = m * 2;\n            return (tree[_n2] <\n                /* .Freq */\n                tree[_m2] ||\n                /* .Freq */\n                (tree[_n2] ===\n                    /* .Freq */\n                    tree[_m2] &&\n                    /* .Freq */\n                    depth[n] <= depth[m]));\n        };\n        /* ===========================================================================\n         * Restore the heap property by moving down the tree starting at node k,\n         * exchanging a node with the smallest of its two sons if necessary, stopping\n         * when the heap property is re-established (each father smaller than its\n         * two sons).\n         */\n        var pqdownheap = function pqdownheap(s, tree, k\n        //    deflate_state *s;\n        //    ct_data *tree;  /* the tree to restore */\n        //    int k;               /* node to move down */\n        ) {\n            var v = s.heap[k];\n            var j = k << 1;\n            /* left son of k */\n            while (j <= s.heap_len) {\n                /* Set j to the smallest of the two sons: */\n                if (j < s.heap_len && smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n                    j++;\n                }\n                /* Exit if v is smaller than both sons */\n                if (smaller(tree, v, s.heap[j], s.depth)) {\n                    break;\n                }\n                /* Exchange v with the smallest son */\n                s.heap[k] = s.heap[j];\n                k = j;\n                /* And continue down the tree, setting j to the left son of k */\n                j <<= 1;\n            }\n            s.heap[k] = v;\n        }; // inlined manually\n        // const SMALLEST = 1;\n        /* ===========================================================================\n         * Send the block data compressed using the given Huffman trees\n         */\n        var compress_block = function compress_block(s, ltree, dtree\n        //    deflate_state *s;\n        //    const ct_data *ltree; /* literal tree */\n        //    const ct_data *dtree; /* distance tree */\n        ) {\n            var dist;\n            /* distance of matched string */\n            var lc;\n            /* match length or unmatched char (if dist == 0) */\n            var lx = 0;\n            /* running index in l_buf */\n            var code;\n            /* the code to send */\n            var extra;\n            /* number of extra bits to send */\n            if (s.last_lit !== 0) {\n                do {\n                    dist = (s.pending_buf[s.d_buf + lx * 2] << 8) | s.pending_buf[s.d_buf + lx * 2 + 1];\n                    lc = s.pending_buf[s.l_buf + lx];\n                    lx++;\n                    if (dist === 0) {\n                        send_code(s, lc, ltree);\n                        /* send a literal byte */\n                        // Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n                    }\n                    else {\n                        /* Here, lc is the match length - MIN_MATCH */\n                        code = _length_code[lc];\n                        send_code(s, code + LITERALS + 1, ltree);\n                        /* send the length code */\n                        extra = extra_lbits[code];\n                        if (extra !== 0) {\n                            lc -= base_length[code];\n                            send_bits(s, lc, extra);\n                            /* send the extra length bits */\n                        }\n                        dist--;\n                        /* dist is now the match distance - 1 */\n                        code = d_code(dist); // Assert (code < D_CODES, \"bad d_code\");\n                        send_code(s, code, dtree);\n                        /* send the distance code */\n                        extra = extra_dbits[code];\n                        if (extra !== 0) {\n                            dist -= base_dist[code];\n                            send_bits(s, dist, extra);\n                            /* send the extra distance bits */\n                        }\n                    }\n                    /* literal or match pair ? */\n                    /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n                    // Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n                    //       \"pendingBuf overflow\");\n                } while (lx < s.last_lit);\n            }\n            send_code(s, END_BLOCK, ltree);\n        };\n        /* ===========================================================================\n         * Construct one Huffman tree and assigns the code bit strings and lengths.\n         * Update the total bit length for the current block.\n         * IN assertion: the field freq is set for all tree elements.\n         * OUT assertions: the fields len and code are set to the optimal bit length\n         *     and corresponding code. The length opt_len is updated; static_len is\n         *     also updated if stree is not null. The field max_code is set.\n         */\n        var build_tree = function build_tree(s, desc //    deflate_state *s; //    tree_desc *desc; /* the tree descriptor */\n        ) {\n            var tree = desc.dyn_tree;\n            var stree = desc.stat_desc.static_tree;\n            var has_stree = desc.stat_desc.has_stree;\n            var elems = desc.stat_desc.elems;\n            var n;\n            var m;\n            /* iterate over heap elements */\n            var max_code = -1;\n            /* largest code with non zero frequency */\n            var node;\n            /* new node being created */\n            /* Construct the initial heap, with least frequent element in\n             * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n             * heap[0] is not used.\n             */\n            s.heap_len = 0;\n            s.heap_max = HEAP_SIZE;\n            for (n = 0; n < elems; n++) {\n                if (tree[n * 2] !==\n                    /* .Freq */\n                    0) {\n                    s.heap[++s.heap_len] = max_code = n;\n                    s.depth[n] = 0;\n                }\n                else {\n                    tree[n * 2 + 1] =\n                        /* .Len */\n                        0;\n                }\n            }\n            /* The pkzip format requires that at least one distance code exists,\n             * and that at least one bit should be sent even if there is only one\n             * possible code. So to avoid special checks later on we force at least\n             * two codes of non zero frequency.\n             */\n            while (s.heap_len < 2) {\n                node = s.heap[++s.heap_len] = max_code < 2 ? ++max_code : 0;\n                tree[node * 2] =\n                    /* .Freq */\n                    1;\n                s.depth[node] = 0;\n                s.opt_len--;\n                if (has_stree) {\n                    s.static_len -= stree[node * 2 + 1];\n                    /* .Len */\n                }\n                /* node is 0 or 1 so it does not have extra bits */\n            }\n            desc.max_code = max_code;\n            /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n             * establish sub-heaps of increasing lengths:\n             */\n            for (n = s.heap_len >> 1; \n            /* int /2 */\n            n >= 1; n--) {\n                pqdownheap(s, tree, n);\n            }\n            /* Construct the Huffman tree by repeatedly combining the least two\n             * frequent nodes.\n             */\n            node = elems;\n            /* next internal node of the tree */\n            do {\n                // pqremove(s, tree, n);  /* n = node of least frequency */\n                /** * pqremove ** */\n                n = s.heap[1];\n                /* SMALLEST */\n                s.heap[1] = s.heap[s.heap_len--];\n                /* SMALLEST */\n                pqdownheap(s, tree, 1\n                /* SMALLEST */\n                );\n                /***/\n                m = s.heap[1];\n                /* SMALLEST */\n                /* m = node of next least frequency */\n                s.heap[--s.heap_max] = n;\n                /* keep the nodes sorted by frequency */\n                s.heap[--s.heap_max] = m;\n                /* Create a new node father of n and m */\n                tree[node * 2] =\n                    /* .Freq */\n                    tree[n * 2] +\n                        /* .Freq */\n                        tree[m * 2];\n                /* .Freq */\n                s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n                tree[n * 2 + 1] =\n                    /* .Dad */\n                    tree[m * 2 + 1] =\n                        /* .Dad */\n                        node;\n                /* and insert the new node in the heap */\n                s.heap[1] = node++;\n                /* SMALLEST */\n                pqdownheap(s, tree, 1\n                /* SMALLEST */\n                );\n            } while (s.heap_len >= 2);\n            s.heap[--s.heap_max] = s.heap[1];\n            /* SMALLEST */\n            /* At this point, the fields freq and dad are set. We can now\n             * generate the bit lengths.\n             */\n            gen_bitlen(s, desc);\n            /* The field len is now set, we can generate the bit codes */\n            gen_codes(tree, max_code, s.bl_count);\n        };\n        /* ===========================================================================\n         * Scan a literal or distance tree to determine the frequencies of the codes\n         * in the bit length tree.\n         */\n        var scan_tree = function scan_tree(s, tree, max_code\n        //    deflate_state *s;\n        //    ct_data *tree;   /* the tree to be scanned */\n        //    int max_code;    /* and its largest code of non zero frequency */\n        ) {\n            var n;\n            /* iterates over all tree elements */\n            var prevlen = -1;\n            /* last emitted length */\n            var curlen;\n            /* length of current code */\n            var nextlen = tree[0 * 2 + 1];\n            /* .Len */\n            /* length of next code */\n            var count = 0;\n            /* repeat count of the current code */\n            var max_count = 7;\n            /* max repeat count */\n            var min_count = 4;\n            /* min repeat count */\n            if (nextlen === 0) {\n                max_count = 138;\n                min_count = 3;\n            }\n            tree[(max_code + 1) * 2 + 1] =\n                /* .Len */\n                0xffff;\n            /* guard */\n            for (n = 0; n <= max_code; n++) {\n                curlen = nextlen;\n                nextlen = tree[(n + 1) * 2 + 1];\n                /* .Len */\n                if (++count < max_count && curlen === nextlen) {\n                    continue;\n                }\n                else if (count < min_count) {\n                    s.bl_tree[curlen * 2] +=\n                        /* .Freq */\n                        count;\n                }\n                else if (curlen !== 0) {\n                    if (curlen !== prevlen) {\n                        s.bl_tree[curlen * 2] /* .Freq */++;\n                    }\n                    s.bl_tree[REP_3_6 * 2] /* .Freq */++;\n                }\n                else if (count <= 10) {\n                    s.bl_tree[REPZ_3_10 * 2] /* .Freq */++;\n                }\n                else {\n                    s.bl_tree[REPZ_11_138 * 2] /* .Freq */++;\n                }\n                count = 0;\n                prevlen = curlen;\n                if (nextlen === 0) {\n                    max_count = 138;\n                    min_count = 3;\n                }\n                else if (curlen === nextlen) {\n                    max_count = 6;\n                    min_count = 3;\n                }\n                else {\n                    max_count = 7;\n                    min_count = 4;\n                }\n            }\n        };\n        /* ===========================================================================\n         * Send a literal or distance tree in compressed form, using the codes in\n         * bl_tree.\n         */\n        var send_tree = function send_tree(s, tree, max_code\n        //    deflate_state *s;\n        //    ct_data *tree; /* the tree to be scanned */\n        //    int max_code;       /* and its largest code of non zero frequency */\n        ) {\n            var n;\n            /* iterates over all tree elements */\n            var prevlen = -1;\n            /* last emitted length */\n            var curlen;\n            /* length of current code */\n            var nextlen = tree[0 * 2 + 1];\n            /* .Len */\n            /* length of next code */\n            var count = 0;\n            /* repeat count of the current code */\n            var max_count = 7;\n            /* max repeat count */\n            var min_count = 4;\n            /* min repeat count */\n            /* tree[max_code+1].Len = -1; */\n            /* guard already set */\n            if (nextlen === 0) {\n                max_count = 138;\n                min_count = 3;\n            }\n            for (n = 0; n <= max_code; n++) {\n                curlen = nextlen;\n                nextlen = tree[(n + 1) * 2 + 1];\n                /* .Len */\n                if (++count < max_count && curlen === nextlen) {\n                    continue;\n                }\n                else if (count < min_count) {\n                    do {\n                        send_code(s, curlen, s.bl_tree);\n                    } while (--count !== 0);\n                }\n                else if (curlen !== 0) {\n                    if (curlen !== prevlen) {\n                        send_code(s, curlen, s.bl_tree);\n                        count--;\n                    } // Assert(count >= 3 && count <= 6, \" 3_6?\");\n                    send_code(s, REP_3_6, s.bl_tree);\n                    send_bits(s, count - 3, 2);\n                }\n                else if (count <= 10) {\n                    send_code(s, REPZ_3_10, s.bl_tree);\n                    send_bits(s, count - 3, 3);\n                }\n                else {\n                    send_code(s, REPZ_11_138, s.bl_tree);\n                    send_bits(s, count - 11, 7);\n                }\n                count = 0;\n                prevlen = curlen;\n                if (nextlen === 0) {\n                    max_count = 138;\n                    min_count = 3;\n                }\n                else if (curlen === nextlen) {\n                    max_count = 6;\n                    min_count = 3;\n                }\n                else {\n                    max_count = 7;\n                    min_count = 4;\n                }\n            }\n        };\n        /* ===========================================================================\n         * Construct the Huffman tree for the bit lengths and return the index in\n         * bl_order of the last bit length code to send.\n         */\n        var build_bl_tree = function build_bl_tree(s) {\n            var max_blindex;\n            /* index of last bit length code of non zero freq */\n            /* Determine the bit length frequencies for literal and distance trees */\n            scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n            scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n            /* Build the bit length tree: */\n            build_tree(s, s.bl_desc);\n            /* opt_len now includes the length of the tree representations, except\n             * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n             */\n            /* Determine the number of bit length codes to send. The pkzip format\n             * requires that at least 4 bit length codes be sent. (appnote.txt says\n             * 3 but the actual value used is 4.)\n             */\n            for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\n                if (s.bl_tree[bl_order[max_blindex] * 2 + 1] !==\n                    /* .Len */\n                    0) {\n                    break;\n                }\n            }\n            /* Update opt_len to include the bit length tree and counts */\n            s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4; // Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n            //        s->opt_len, s->static_len));\n            return max_blindex;\n        };\n        /* ===========================================================================\n         * Send the header for a block using dynamic Huffman trees: the counts, the\n         * lengths of the bit length codes, the literal tree and the distance tree.\n         * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n         */\n        var send_all_trees = function send_all_trees(s, lcodes, dcodes, blcodes //    deflate_state *s; //    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n        ) {\n            var rank;\n            /* index in bl_order */\n            // Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n            // Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n            //        \"too many codes\");\n            // Tracev((stderr, \"\\nbl counts: \"));\n            send_bits(s, lcodes - 257, 5);\n            /* not +255 as stated in appnote.txt */\n            send_bits(s, dcodes - 1, 5);\n            send_bits(s, blcodes - 4, 4);\n            /* not -3 as stated in appnote.txt */\n            for (rank = 0; rank < blcodes; rank++) {\n                // Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n                send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1], \n                /* .Len */\n                3);\n            } // Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n            send_tree(s, s.dyn_ltree, lcodes - 1);\n            /* literal tree */\n            // Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n            send_tree(s, s.dyn_dtree, dcodes - 1);\n            /* distance tree */\n            // Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n        };\n        /* ===========================================================================\n         * Check if the data type is TEXT or BINARY, using the following algorithm:\n         * - TEXT if the two conditions below are satisfied:\n         *    a) There are no non-portable control characters belonging to the\n         *       \"black list\" (0..6, 14..25, 28..31).\n         *    b) There is at least one printable character belonging to the\n         *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n         * - BINARY otherwise.\n         * - The following partially-portable control characters form a\n         *   \"gray list\" that is ignored in this detection algorithm:\n         *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n         * IN assertion: the fields Freq of dyn_ltree are set.\n         */\n        var detect_data_type = function detect_data_type(s) {\n            /* black_mask is the bit mask of black-listed bytes\n             * set bits 0..6, 14..25, and 28..31\n             * 0xf3ffc07f = binary 11110011111111111100000001111111\n             */\n            var black_mask = 0xf3ffc07f;\n            var n;\n            /* Check for non-textual (\"black-listed\") bytes. */\n            for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n                if (black_mask & 1 &&\n                    s.dyn_ltree[n * 2] !==\n                        /* .Freq */\n                        0) {\n                    return Z_BINARY;\n                }\n            }\n            /* Check for textual (\"white-listed\") bytes. */\n            if (s.dyn_ltree[9 * 2] !==\n                /* .Freq */\n                0 ||\n                s.dyn_ltree[10 * 2] !==\n                    /* .Freq */\n                    0 ||\n                s.dyn_ltree[13 * 2] !==\n                    /* .Freq */\n                    0) {\n                return Z_TEXT;\n            }\n            for (n = 32; n < LITERALS; n++) {\n                if (s.dyn_ltree[n * 2] !==\n                    /* .Freq */\n                    0) {\n                    return Z_TEXT;\n                }\n            }\n            /* There are no \"black-listed\" or \"white-listed\" bytes:\n             * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n             */\n            return Z_BINARY;\n        };\n        var static_init_done = false;\n        /* ===========================================================================\n         * Initialize the tree data structures for a new zlib stream.\n         */\n        var _tr_init = function _tr_init(s) {\n            if (!static_init_done) {\n                tr_static_init();\n                static_init_done = true;\n            }\n            s.l_desc = new TreeDesc(s.dyn_ltree, static_l_desc);\n            s.d_desc = new TreeDesc(s.dyn_dtree, static_d_desc);\n            s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n            s.bi_buf = 0;\n            s.bi_valid = 0;\n            /* Initialize the first block of the first file: */\n            init_block(s);\n        };\n        /* ===========================================================================\n         * Send a stored block\n         */\n        var _tr_stored_block = function _tr_stored_block(s, buf, stored_len, last\n        // DeflateState *s;\n        // charf *buf;       /* input block */\n        // ulg stored_len;   /* length of input block */\n        // int last;         /* one if this is the last block for a file */\n        ) {\n            send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);\n            /* send block type */\n            copy_block(s, buf, stored_len, true);\n            /* with header */\n        };\n        /* ===========================================================================\n         * Send one empty static block to give enough lookahead for inflate.\n         * This takes 10 bits, of which 7 may remain in the bit buffer.\n         */\n        var _tr_align = function _tr_align(s) {\n            send_bits(s, STATIC_TREES << 1, 3);\n            send_code(s, END_BLOCK, static_ltree);\n            bi_flush(s);\n        };\n        /* ===========================================================================\n         * Determine the best encoding for the current block: dynamic trees, static\n         * trees or store, and output the encoded block to the zip file.\n         */\n        var _tr_flush_block = function _tr_flush_block(s, buf, stored_len, last\n        // DeflateState *s;\n        // charf *buf;       /* input block, or NULL if too old */\n        // ulg stored_len;   /* length of input block */\n        // int last;         /* one if this is the last block for a file */\n        ) {\n            var opt_lenb;\n            var static_lenb;\n            /* opt_len and static_len in bytes */\n            var max_blindex = 0;\n            /* index of last bit length code of non zero freq */\n            /* Build the Huffman trees unless a stored block is forced */\n            if (s.level > 0) {\n                /* Check if the file is binary or text */\n                if (s.strm.data_type === Z_UNKNOWN) {\n                    s.strm.data_type = detect_data_type(s);\n                }\n                /* Construct the literal and distance trees */\n                build_tree(s, s.l_desc); // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n                //        s->static_len));\n                build_tree(s, s.d_desc); // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n                //        s->static_len));\n                /* At this point, opt_len and static_len are the total bit lengths of\n                 * the compressed block data, excluding the tree representations.\n                 */\n                /* Build the bit length tree for the above two trees, and get the index\n                 * in bl_order of the last bit length code to send.\n                 */\n                max_blindex = build_bl_tree(s);\n                /* Determine the best encoding. Compute the block lengths in bytes. */\n                opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n                static_lenb = (s.static_len + 3 + 7) >>> 3; // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n                //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n                //        s->last_lit));\n                if (static_lenb <= opt_lenb) {\n                    opt_lenb = static_lenb;\n                }\n            }\n            else {\n                // Assert(buf != (char*)0, \"lost buf\");\n                opt_lenb = static_lenb = stored_len + 5;\n                /* force a stored block */\n            }\n            if (stored_len + 4 <= opt_lenb && buf !== -1) {\n                /* 4: two words for the lengths */\n                /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n                 * Otherwise we can't have processed more than WSIZE input bytes since\n                 * the last block flush, because compression would have been\n                 * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n                 * transform a block into a stored block.\n                 */\n                _tr_stored_block(s, buf, stored_len, last);\n            }\n            else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {\n                send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n                compress_block(s, static_ltree, static_dtree);\n            }\n            else {\n                send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n                send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n                compress_block(s, s.dyn_ltree, s.dyn_dtree);\n            } // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n            /* The above check is made mod 2^32, for files larger than 512 MB\n             * and uLong implemented on 32 bits.\n             */\n            init_block(s);\n            if (last) {\n                bi_windup(s);\n            } // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n            //       s->compressed_len-7*last));\n        };\n        /* ===========================================================================\n         * Save the match info and tally the frequency counts. Return true if\n         * the current block must be flushed.\n         */\n        var _tr_tally = function _tr_tally(s, dist, lc\n        //    deflate_state *s;\n        //    unsigned dist;  /* distance of matched string */\n        //    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n        ) {\n            // let out_length, in_length, dcode;\n            s.pending_buf[s.d_buf + s.last_lit * 2] = (dist >>> 8) & 0xff;\n            s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n            s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n            s.last_lit++;\n            if (dist === 0) {\n                /* lc is the unmatched char */\n                s.dyn_ltree[lc * 2] /* .Freq */++;\n            }\n            else {\n                s.matches++;\n                /* Here, lc is the match length - MIN_MATCH */\n                dist--;\n                /* dist = match distance - 1 */\n                // Assert((ush)dist < (ush)MAX_DIST(s) &&\n                //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n                //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n                s.dyn_ltree[(_length_code[lc] + LITERALS + 1) * 2] /* .Freq */++;\n                s.dyn_dtree[d_code(dist) * 2] /* .Freq */++;\n            } // (!) This block is disabled in zlib defaults,\n            // don't enable it for binary compatibility\n            // #ifdef TRUNCATE_BLOCK\n            //  /* Try to guess if it is profitable to stop the current block here */\n            //  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n            //    /* Compute an upper bound for the compressed length */\n            //    out_length = s.last_lit*8;\n            //    in_length = s.strstart - s.block_start;\n            //\n            //    for (dcode = 0; dcode < D_CODES; dcode++) {\n            //      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n            //    }\n            //    out_length >>>= 3;\n            //    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n            //    //       s->last_lit, in_length, out_length,\n            //    //       100L - out_length*100L/in_length));\n            //    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n            //      return true;\n            //    }\n            //  }\n            // #endif\n            return s.last_lit === s.lit_bufsize - 1;\n            /* We avoid equality with lit_bufsize because of wraparound at 64K\n             * on 16 bit machines and because stored blocks are restricted to\n             * 64K-1 bytes.\n             */\n        };\n        var _tr_init_1 = _tr_init;\n        var _tr_stored_block_1 = _tr_stored_block;\n        var _tr_flush_block_1 = _tr_flush_block;\n        var _tr_tally_1 = _tr_tally;\n        var _tr_align_1 = _tr_align;\n        var trees = {\n            _tr_init: _tr_init_1,\n            _tr_stored_block: _tr_stored_block_1,\n            _tr_flush_block: _tr_flush_block_1,\n            _tr_tally: _tr_tally_1,\n            _tr_align: _tr_align_1,\n        };\n        // It isn't worth it to make additional optimizations as in original.\n        // Small size is preferable.\n        // (C) 1995-2013 Jean-loup Gailly and Mark Adler\n        // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n        //\n        // This software is provided 'as-is', without any express or implied\n        // warranty. In no event will the authors be held liable for any damages\n        // arising from the use of this software.\n        //\n        // Permission is granted to anyone to use this software for any purpose,\n        // including commercial applications, and to alter it and redistribute it\n        // freely, subject to the following restrictions:\n        //\n        // 1. The origin of this software must not be misrepresented; you must not\n        //   claim that you wrote the original software. If you use this software\n        //   in a product, an acknowledgment in the product documentation would be\n        //   appreciated but is not required.\n        // 2. Altered source versions must be plainly marked as such, and must not be\n        //   misrepresented as being the original software.\n        // 3. This notice may not be removed or altered from any source distribution.\n        var adler32 = function adler32(adler, buf, len, pos) {\n            var s1 = (adler & 0xffff) | 0;\n            var s2 = ((adler >>> 16) & 0xffff) | 0;\n            var n = 0;\n            while (len !== 0) {\n                // Set limit ~ twice less than 5552, to keep\n                // s2 in 31-bits, because we force signed ints.\n                // in other case %= will fail.\n                n = len > 2000 ? 2000 : len;\n                len -= n;\n                do {\n                    s1 = (s1 + buf[pos++]) | 0;\n                    s2 = (s2 + s1) | 0;\n                } while (--n);\n                s1 %= 65521;\n                s2 %= 65521;\n            }\n            return s1 | (s2 << 16) | 0;\n        };\n        var adler32_1 = adler32;\n        // So write code to minimize size - no pregenerated tables\n        // and array tools dependencies.\n        // (C) 1995-2013 Jean-loup Gailly and Mark Adler\n        // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n        //\n        // This software is provided 'as-is', without any express or implied\n        // warranty. In no event will the authors be held liable for any damages\n        // arising from the use of this software.\n        //\n        // Permission is granted to anyone to use this software for any purpose,\n        // including commercial applications, and to alter it and redistribute it\n        // freely, subject to the following restrictions:\n        //\n        // 1. The origin of this software must not be misrepresented; you must not\n        //   claim that you wrote the original software. If you use this software\n        //   in a product, an acknowledgment in the product documentation would be\n        //   appreciated but is not required.\n        // 2. Altered source versions must be plainly marked as such, and must not be\n        //   misrepresented as being the original software.\n        // 3. This notice may not be removed or altered from any source distribution.\n        // Use ordinary array, since untyped makes no boost here\n        var makeTable = function makeTable() {\n            var c;\n            var table = [];\n            for (var n = 0; n < 256; n++) {\n                c = n;\n                for (var k = 0; k < 8; k++) {\n                    c = c & 1 ? 0xedb88320 ^ (c >>> 1) : c >>> 1;\n                }\n                table[n] = c;\n            }\n            return table;\n        }; // Create table on load. Just 255 signed longs. Not a problem.\n        var crcTable = new Uint32Array(makeTable());\n        var crc32 = function crc32(crc, buf, len, pos) {\n            var t = crcTable;\n            var end = pos + len;\n            crc ^= -1;\n            for (var i = pos; i < end; i++) {\n                crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xff];\n            }\n            return crc ^ -1; // >>> 0;\n        };\n        var crc32_1 = crc32;\n        // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n        //\n        // This software is provided 'as-is', without any express or implied\n        // warranty. In no event will the authors be held liable for any damages\n        // arising from the use of this software.\n        //\n        // Permission is granted to anyone to use this software for any purpose,\n        // including commercial applications, and to alter it and redistribute it\n        // freely, subject to the following restrictions:\n        //\n        // 1. The origin of this software must not be misrepresented; you must not\n        //   claim that you wrote the original software. If you use this software\n        //   in a product, an acknowledgment in the product documentation would be\n        //   appreciated but is not required.\n        // 2. Altered source versions must be plainly marked as such, and must not be\n        //   misrepresented as being the original software.\n        // 3. This notice may not be removed or altered from any source distribution.\n        var messages = {\n            2: 'need dictionary',\n            /* Z_NEED_DICT       2  */\n            1: 'stream end',\n            /* Z_STREAM_END      1  */\n            0: '',\n            /* Z_OK              0  */\n            '-1': 'file error',\n            /* Z_ERRNO         (-1) */\n            '-2': 'stream error',\n            /* Z_STREAM_ERROR  (-2) */\n            '-3': 'data error',\n            /* Z_DATA_ERROR    (-3) */\n            '-4': 'insufficient memory',\n            /* Z_MEM_ERROR     (-4) */\n            '-5': 'buffer error',\n            /* Z_BUF_ERROR     (-5) */\n            '-6': 'incompatible version',\n            /* Z_VERSION_ERROR (-6) */\n        };\n        // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n        //\n        // This software is provided 'as-is', without any express or implied\n        // warranty. In no event will the authors be held liable for any damages\n        // arising from the use of this software.\n        //\n        // Permission is granted to anyone to use this software for any purpose,\n        // including commercial applications, and to alter it and redistribute it\n        // freely, subject to the following restrictions:\n        //\n        // 1. The origin of this software must not be misrepresented; you must not\n        //   claim that you wrote the original software. If you use this software\n        //   in a product, an acknowledgment in the product documentation would be\n        //   appreciated but is not required.\n        // 2. Altered source versions must be plainly marked as such, and must not be\n        //   misrepresented as being the original software.\n        // 3. This notice may not be removed or altered from any source distribution.\n        var constants = {\n            /* Allowed flush values; see deflate() and inflate() below for details */\n            Z_NO_FLUSH: 0,\n            Z_PARTIAL_FLUSH: 1,\n            Z_SYNC_FLUSH: 2,\n            Z_FULL_FLUSH: 3,\n            Z_FINISH: 4,\n            Z_BLOCK: 5,\n            Z_TREES: 6,\n            /* Return codes for the compression/decompression functions. Negative values\n             * are errors, positive values are used for special but normal events.\n             */\n            Z_OK: 0,\n            Z_STREAM_END: 1,\n            Z_NEED_DICT: 2,\n            Z_ERRNO: -1,\n            Z_STREAM_ERROR: -2,\n            Z_DATA_ERROR: -3,\n            Z_MEM_ERROR: -4,\n            Z_BUF_ERROR: -5,\n            // Z_VERSION_ERROR: -6,\n            /* compression levels */\n            Z_NO_COMPRESSION: 0,\n            Z_BEST_SPEED: 1,\n            Z_BEST_COMPRESSION: 9,\n            Z_DEFAULT_COMPRESSION: -1,\n            Z_FILTERED: 1,\n            Z_HUFFMAN_ONLY: 2,\n            Z_RLE: 3,\n            Z_FIXED: 4,\n            Z_DEFAULT_STRATEGY: 0,\n            /* Possible values of the data_type field (though see inflate()) */\n            Z_BINARY: 0,\n            Z_TEXT: 1,\n            // Z_ASCII:                1, // = Z_TEXT (deprecated)\n            Z_UNKNOWN: 2,\n            /* The deflate compression method */\n            Z_DEFLATED: 8, // Z_NULL:                 null // Use -1 or null inline, depending on var type\n        };\n        // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n        //\n        // This software is provided 'as-is', without any express or implied\n        // warranty. In no event will the authors be held liable for any damages\n        // arising from the use of this software.\n        //\n        // Permission is granted to anyone to use this software for any purpose,\n        // including commercial applications, and to alter it and redistribute it\n        // freely, subject to the following restrictions:\n        //\n        // 1. The origin of this software must not be misrepresented; you must not\n        //   claim that you wrote the original software. If you use this software\n        //   in a product, an acknowledgment in the product documentation would be\n        //   appreciated but is not required.\n        // 2. Altered source versions must be plainly marked as such, and must not be\n        //   misrepresented as being the original software.\n        // 3. This notice may not be removed or altered from any source distribution.\n        var _tr_init$1 = trees._tr_init;\n        var _tr_stored_block$1 = trees._tr_stored_block;\n        var _tr_flush_block$1 = trees._tr_flush_block;\n        var _tr_tally$1 = trees._tr_tally;\n        var _tr_align$1 = trees._tr_align;\n        /* Public constants ========================================================== */\n        /* =========================================================================== */\n        var Z_NO_FLUSH = constants.Z_NO_FLUSH;\n        var Z_PARTIAL_FLUSH = constants.Z_PARTIAL_FLUSH;\n        var Z_FULL_FLUSH = constants.Z_FULL_FLUSH;\n        var Z_FINISH = constants.Z_FINISH;\n        var Z_BLOCK = constants.Z_BLOCK;\n        var Z_OK = constants.Z_OK;\n        var Z_STREAM_END = constants.Z_STREAM_END;\n        var Z_STREAM_ERROR = constants.Z_STREAM_ERROR;\n        var Z_DATA_ERROR = constants.Z_DATA_ERROR;\n        var Z_BUF_ERROR = constants.Z_BUF_ERROR;\n        var Z_DEFAULT_COMPRESSION = constants.Z_DEFAULT_COMPRESSION;\n        var Z_FILTERED = constants.Z_FILTERED;\n        var Z_HUFFMAN_ONLY = constants.Z_HUFFMAN_ONLY;\n        var Z_RLE = constants.Z_RLE;\n        var Z_FIXED$1 = constants.Z_FIXED;\n        var Z_DEFAULT_STRATEGY = constants.Z_DEFAULT_STRATEGY;\n        var Z_UNKNOWN$1 = constants.Z_UNKNOWN;\n        var Z_DEFLATED = constants.Z_DEFLATED;\n        /* ============================================================================ */\n        var MAX_MEM_LEVEL = 9;\n        /* Maximum value for memLevel in deflateInit2 */\n        var MAX_WBITS = 15;\n        /* 32K LZ77 window */\n        var DEF_MEM_LEVEL = 8;\n        var LENGTH_CODES$1 = 29;\n        /* number of length codes, not counting the special END_BLOCK code */\n        var LITERALS$1 = 256;\n        /* number of literal bytes 0..255 */\n        var L_CODES$1 = LITERALS$1 + 1 + LENGTH_CODES$1;\n        /* number of Literal or Length codes, including the END_BLOCK code */\n        var D_CODES$1 = 30;\n        /* number of distance codes */\n        var BL_CODES$1 = 19;\n        /* number of codes used to transfer the bit lengths */\n        var HEAP_SIZE$1 = 2 * L_CODES$1 + 1;\n        /* maximum heap size */\n        var MAX_BITS$1 = 15;\n        /* All codes must not exceed MAX_BITS bits */\n        var MIN_MATCH$1 = 3;\n        var MAX_MATCH$1 = 258;\n        var MIN_LOOKAHEAD = MAX_MATCH$1 + MIN_MATCH$1 + 1;\n        var PRESET_DICT = 0x20;\n        var INIT_STATE = 42;\n        var EXTRA_STATE = 69;\n        var NAME_STATE = 73;\n        var COMMENT_STATE = 91;\n        var HCRC_STATE = 103;\n        var BUSY_STATE = 113;\n        var FINISH_STATE = 666;\n        var BS_NEED_MORE = 1;\n        /* block not completed, need more input or more output */\n        var BS_BLOCK_DONE = 2;\n        /* block flush performed */\n        var BS_FINISH_STARTED = 3;\n        /* finish started, need only more output at next deflate */\n        var BS_FINISH_DONE = 4;\n        /* finish done, accept no more input or output */\n        var OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n        var err = function err(strm, errorCode) {\n            strm.msg = messages[errorCode];\n            return errorCode;\n        };\n        var rank = function rank(f) {\n            return (f << 1) - (f > 4 ? 9 : 0);\n        };\n        var zero$1 = function zero(buf) {\n            var len = buf.length;\n            while (--len >= 0) {\n                buf[len] = 0;\n            }\n        };\n        var HASH_ZLIB = function HASH_ZLIB(s, prev, data) {\n            return ((prev << s.hash_shift) ^ data) & s.hash_mask;\n        }; // This hash causes less collisions, https://github.com/nodeca/pako/issues/135\n        // But breaks binary compatibility\n        // let HASH_FAST = (s, prev, data) => ((prev << 8) + (prev >> 8) + (data << 4)) & s.hash_mask;\n        var HASH = HASH_ZLIB;\n        /* =========================================================================\n         * Flush as much pending output as possible. All deflate() output goes\n         * through this function so some applications may wish to modify it\n         * to avoid allocating a large strm->output buffer and copying into it.\n         * (See also read_buf()).\n         */\n        var flush_pending = function flush_pending(strm) {\n            var s = strm.state; // _tr_flush_bits(s);\n            var len = s.pending;\n            if (len > strm.avail_out) {\n                len = strm.avail_out;\n            }\n            if (len === 0) {\n                return;\n            }\n            strm.output.set(s.pending_buf.subarray(s.pending_out, s.pending_out + len), strm.next_out);\n            strm.next_out += len;\n            s.pending_out += len;\n            strm.total_out += len;\n            strm.avail_out -= len;\n            s.pending -= len;\n            if (s.pending === 0) {\n                s.pending_out = 0;\n            }\n        };\n        var flush_block_only = function flush_block_only(s, last) {\n            _tr_flush_block$1(s, s.block_start >= 0 ? s.block_start : -1, s.strstart - s.block_start, last);\n            s.block_start = s.strstart;\n            flush_pending(s.strm);\n        };\n        var put_byte = function put_byte(s, b) {\n            s.pending_buf[s.pending++] = b;\n        };\n        /* =========================================================================\n         * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n         * IN assertion: the stream state is correct and there is enough room in\n         * pending_buf.\n         */\n        var putShortMSB = function putShortMSB(s, b) {\n            //  put_byte(s, (Byte)(b >> 8));\n            //  put_byte(s, (Byte)(b & 0xff));\n            s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n            s.pending_buf[s.pending++] = b & 0xff;\n        };\n        /* ===========================================================================\n         * Read a new buffer from the current input stream, update the adler32\n         * and total number of bytes read.  All deflate() input goes through\n         * this function so some applications may wish to modify it to avoid\n         * allocating a large strm->input buffer and copying from it.\n         * (See also flush_pending()).\n         */\n        var read_buf = function read_buf(strm, buf, start, size) {\n            var len = strm.avail_in;\n            if (len > size) {\n                len = size;\n            }\n            if (len === 0) {\n                return 0;\n            }\n            strm.avail_in -= len; // zmemcpy(buf, strm->next_in, len);\n            buf.set(strm.input.subarray(strm.next_in, strm.next_in + len), start);\n            if (strm.state.wrap === 1) {\n                strm.adler = adler32_1(strm.adler, buf, len, start);\n            }\n            else if (strm.state.wrap === 2) {\n                strm.adler = crc32_1(strm.adler, buf, len, start);\n            }\n            strm.next_in += len;\n            strm.total_in += len;\n            return len;\n        };\n        /* ===========================================================================\n         * Set match_start to the longest match starting at the given string and\n         * return its length. Matches shorter or equal to prev_length are discarded,\n         * in which case the result is equal to prev_length and match_start is\n         * garbage.\n         * IN assertions: cur_match is the head of the hash chain for the current\n         *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n         * OUT assertion: the match length is not greater than s->lookahead.\n         */\n        var longest_match = function longest_match(s, cur_match) {\n            var chain_length = s.max_chain_length;\n            /* max hash chain length */\n            var scan = s.strstart;\n            /* current string */\n            var match;\n            /* matched string */\n            var len;\n            /* length of current match */\n            var best_len = s.prev_length;\n            /* best match length so far */\n            var nice_match = s.nice_match;\n            /* stop if match long enough */\n            var limit = s.strstart > s.w_size - MIN_LOOKAHEAD ? s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0;\n            /* NIL */\n            var _win = s.window; // shortcut\n            var wmask = s.w_mask;\n            var prev = s.prev;\n            /* Stop when cur_match becomes <= limit. To simplify the code,\n             * we prevent matches with the string of window index 0.\n             */\n            var strend = s.strstart + MAX_MATCH$1;\n            var scan_end1 = _win[scan + best_len - 1];\n            var scan_end = _win[scan + best_len];\n            /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n             * It is easy to get rid of this optimization if necessary.\n             */\n            // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n            /* Do not waste too much time if we already have a good match: */\n            if (s.prev_length >= s.good_match) {\n                chain_length >>= 2;\n            }\n            /* Do not look for matches beyond the end of the input. This is necessary\n             * to make deflate deterministic.\n             */\n            if (nice_match > s.lookahead) {\n                nice_match = s.lookahead;\n            } // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n            do {\n                // Assert(cur_match < s->strstart, \"no future\");\n                match = cur_match;\n                /* Skip to next match if the match length cannot increase\n                 * or if the match length is less than 2.  Note that the checks below\n                 * for insufficient lookahead only occur occasionally for performance\n                 * reasons.  Therefore uninitialized memory will be accessed, and\n                 * conditional jumps will be made that depend on those values.\n                 * However the length of the match is limited to the lookahead, so\n                 * the output of deflate is not affected by the uninitialized values.\n                 */\n                if (_win[match + best_len] !== scan_end ||\n                    _win[match + best_len - 1] !== scan_end1 ||\n                    _win[match] !== _win[scan] ||\n                    _win[++match] !== _win[scan + 1]) {\n                    continue;\n                }\n                /* The check at best_len-1 can be removed because it will be made\n                 * again later. (This heuristic is not always a win.)\n                 * It is not necessary to compare scan[2] and match[2] since they\n                 * are always equal when the other bytes match, given that\n                 * the hash keys are equal and that HASH_BITS >= 8.\n                 */\n                scan += 2;\n                match++; // Assert(*scan == *match, \"match[2]?\");\n                /* We check for insufficient lookahead only every 8th comparison;\n                 * the 256th check will be made at strstart+258.\n                 */\n                do {\n                    /* jshint noempty:false */\n                } while (_win[++scan] === _win[++match] &&\n                    _win[++scan] === _win[++match] &&\n                    _win[++scan] === _win[++match] &&\n                    _win[++scan] === _win[++match] &&\n                    _win[++scan] === _win[++match] &&\n                    _win[++scan] === _win[++match] &&\n                    _win[++scan] === _win[++match] &&\n                    _win[++scan] === _win[++match] &&\n                    scan < strend); // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n                len = MAX_MATCH$1 - (strend - scan);\n                scan = strend - MAX_MATCH$1;\n                if (len > best_len) {\n                    s.match_start = cur_match;\n                    best_len = len;\n                    if (len >= nice_match) {\n                        break;\n                    }\n                    scan_end1 = _win[scan + best_len - 1];\n                    scan_end = _win[scan + best_len];\n                }\n            } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n            if (best_len <= s.lookahead) {\n                return best_len;\n            }\n            return s.lookahead;\n        };\n        /* ===========================================================================\n         * Fill the window when the lookahead becomes insufficient.\n         * Updates strstart and lookahead.\n         *\n         * IN assertion: lookahead < MIN_LOOKAHEAD\n         * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n         *    At least one byte has been read, or avail_in == 0; reads are\n         *    performed for at least two bytes (required for the zip translate_eol\n         *    option -- not supported here).\n         */\n        var fill_window = function fill_window(s) {\n            var _w_size = s.w_size;\n            var p;\n            var n;\n            var m;\n            var more;\n            var str; // Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n            do {\n                more = s.window_size - s.lookahead - s.strstart; // JS ints have 32 bit, block below not needed\n                /* Deal with !@#$% 64K limit: */\n                // if (sizeof(int) <= 2) {\n                //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n                //        more = wsize;\n                //\n                //  } else if (more == (unsigned)(-1)) {\n                //        /* Very unlikely, but possible on 16 bit machine if\n                //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n                //         */\n                //        more--;\n                //    }\n                // }\n                /* If the window is almost full and there is insufficient lookahead,\n                 * move the upper half to the lower one to make room in the upper half.\n                 */\n                if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n                    s.window.set(s.window.subarray(_w_size, _w_size + _w_size), 0);\n                    s.match_start -= _w_size;\n                    s.strstart -= _w_size;\n                    /* we now have strstart >= MAX_DIST */\n                    s.block_start -= _w_size;\n                    /* Slide the hash table (could be avoided with 32 bit values\n                   at the expense of memory usage). We slide even when level == 0\n                   to keep the hash table consistent if we switch back to level > 0\n                   later. (Using level 0 permanently is not an optimal usage of\n                   zlib, so we don't care about this pathological case.)\n                   */\n                    n = s.hash_size;\n                    p = n;\n                    do {\n                        m = s.head[--p];\n                        s.head[p] = m >= _w_size ? m - _w_size : 0;\n                    } while (--n);\n                    n = _w_size;\n                    p = n;\n                    do {\n                        m = s.prev[--p];\n                        s.prev[p] = m >= _w_size ? m - _w_size : 0;\n                        /* If n is not on any hash chain, prev[n] is garbage but\n                         * its value will never be used.\n                         */\n                    } while (--n);\n                    more += _w_size;\n                }\n                if (s.strm.avail_in === 0) {\n                    break;\n                }\n                /* If there was no sliding:\n                 *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n                 *    more == window_size - lookahead - strstart\n                 * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n                 * => more >= window_size - 2*WSIZE + 2\n                 * In the BIG_MEM or MMAP case (not yet supported),\n                 *   window_size == input_size + MIN_LOOKAHEAD  &&\n                 *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n                 * Otherwise, window_size == 2*WSIZE so more >= 2.\n                 * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n                 */\n                // Assert(more >= 2, \"more < 2\");\n                n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n                s.lookahead += n;\n                /* Initialize the hash value now that we have some input: */\n                if (s.lookahead + s.insert >= MIN_MATCH$1) {\n                    str = s.strstart - s.insert;\n                    s.ins_h = s.window[str];\n                    /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n                    s.ins_h = HASH(s, s.ins_h, s.window[str + 1]); // #if MIN_MATCH != 3\n                    //        Call update_hash() MIN_MATCH-3 more times\n                    // #endif\n                    while (s.insert) {\n                        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n                        s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH$1 - 1]);\n                        s.prev[str & s.w_mask] = s.head[s.ins_h];\n                        s.head[s.ins_h] = str;\n                        str++;\n                        s.insert--;\n                        if (s.lookahead + s.insert < MIN_MATCH$1) {\n                            break;\n                        }\n                    }\n                }\n                /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n                 * but this is not important since only literal bytes will be emitted.\n                 */\n            } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n            /* If the WIN_INIT bytes after the end of the current data have never been\n             * written, then zero those bytes in order to avoid memory check reports of\n             * the use of uninitialized (or uninitialised as Julian writes) bytes by\n             * the longest match routines.  Update the high water mark for the next\n             * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n             * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n             */\n            //  if (s.high_water < s.window_size) {\n            //    const curr = s.strstart + s.lookahead;\n            //    let init = 0;\n            //\n            //    if (s.high_water < curr) {\n            //      /* Previous high water mark below current data -- zero WIN_INIT\n            //       * bytes or up to end of window, whichever is less.\n            //       */\n            //      init = s.window_size - curr;\n            //      if (init > WIN_INIT)\n            //        init = WIN_INIT;\n            //      zmemzero(s->window + curr, (unsigned)init);\n            //      s->high_water = curr + init;\n            //    }\n            //    else if (s->high_water < (ulg)curr + WIN_INIT) {\n            //      /* High water mark at or above current data, but below current data\n            //       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n            //       * to end of window, whichever is less.\n            //       */\n            //      init = (ulg)curr + WIN_INIT - s->high_water;\n            //      if (init > s->window_size - s->high_water)\n            //        init = s->window_size - s->high_water;\n            //      zmemzero(s->window + s->high_water, (unsigned)init);\n            //      s->high_water += init;\n            //    }\n            //  }\n            //\n            //  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n            //    \"not enough room for search\");\n        };\n        /* ===========================================================================\n         * Copy without compression as much as possible from the input stream, return\n         * the current block state.\n         * This function does not insert new strings in the dictionary since\n         * uncompressible data is probably not useful. This function is used\n         * only for the level=0 compression option.\n         * NOTE: this function should be optimized to avoid extra copying from\n         * window to pending_buf.\n         */\n        var deflate_stored = function deflate_stored(s, flush) {\n            /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n             * to pending_buf_size, and each stored block has a 5 byte header:\n             */\n            var max_block_size = 0xffff;\n            if (max_block_size > s.pending_buf_size - 5) {\n                max_block_size = s.pending_buf_size - 5;\n            }\n            /* Copy as much as possible from input to output: */\n            for (;;) {\n                /* Fill the window as much as possible: */\n                if (s.lookahead <= 1) {\n                    // Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n                    //  s->block_start >= (long)s->w_size, \"slide too late\");\n                    //      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n                    //        s.block_start >= s.w_size)) {\n                    //        throw  new Error(\"slide too late\");\n                    //      }\n                    fill_window(s);\n                    if (s.lookahead === 0 && flush === Z_NO_FLUSH) {\n                        return BS_NEED_MORE;\n                    }\n                    if (s.lookahead === 0) {\n                        break;\n                    }\n                    /* flush the current block */\n                } // Assert(s->block_start >= 0L, \"block gone\");\n                //    if (s.block_start < 0) throw new Error(\"block gone\");\n                s.strstart += s.lookahead;\n                s.lookahead = 0;\n                /* Emit a stored block if pending_buf will be full: */\n                var max_start = s.block_start + max_block_size;\n                if (s.strstart === 0 || s.strstart >= max_start) {\n                    /* strstart == 0 is possible when wraparound on 16-bit machine */\n                    s.lookahead = s.strstart - max_start;\n                    s.strstart = max_start;\n                    /** * FLUSH_BLOCK(s, 0); ** */\n                    flush_block_only(s, false);\n                    if (s.strm.avail_out === 0) {\n                        return BS_NEED_MORE;\n                    }\n                    /***/\n                }\n                /* Flush if we may have to slide, otherwise block_start may become\n                 * negative and the data will be gone:\n                 */\n                if (s.strstart - s.block_start >= s.w_size - MIN_LOOKAHEAD) {\n                    /** * FLUSH_BLOCK(s, 0); ** */\n                    flush_block_only(s, false);\n                    if (s.strm.avail_out === 0) {\n                        return BS_NEED_MORE;\n                    }\n                    /***/\n                }\n            }\n            s.insert = 0;\n            if (flush === Z_FINISH) {\n                /** * FLUSH_BLOCK(s, 1); ** */\n                flush_block_only(s, true);\n                if (s.strm.avail_out === 0) {\n                    return BS_FINISH_STARTED;\n                }\n                /***/\n                return BS_FINISH_DONE;\n            }\n            if (s.strstart > s.block_start) {\n                /** * FLUSH_BLOCK(s, 0); ** */\n                flush_block_only(s, false);\n                if (s.strm.avail_out === 0) {\n                    return BS_NEED_MORE;\n                }\n                /***/\n            }\n            return BS_NEED_MORE;\n        };\n        /* ===========================================================================\n         * Compress as much as possible from the input stream, return the current\n         * block state.\n         * This function does not perform lazy evaluation of matches and inserts\n         * new strings in the dictionary only for unmatched strings or for short\n         * matches. It is used only for the fast compression options.\n         */\n        var deflate_fast = function deflate_fast(s, flush) {\n            var hash_head;\n            /* head of the hash chain */\n            var bflush;\n            /* set if current block must be flushed */\n            for (;;) {\n                /* Make sure that we always have enough lookahead, except\n                 * at the end of the input file. We need MAX_MATCH bytes\n                 * for the next match, plus MIN_MATCH bytes to insert the\n                 * string following the next match.\n                 */\n                if (s.lookahead < MIN_LOOKAHEAD) {\n                    fill_window(s);\n                    if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n                        return BS_NEED_MORE;\n                    }\n                    if (s.lookahead === 0) {\n                        break;\n                        /* flush the current block */\n                    }\n                }\n                /* Insert the string window[strstart .. strstart+2] in the\n                 * dictionary, and set hash_head to the head of the hash chain:\n                 */\n                hash_head = 0;\n                /* NIL */\n                if (s.lookahead >= MIN_MATCH$1) {\n                    /** * INSERT_STRING(s, s.strstart, hash_head); ** */\n                    s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH$1 - 1]);\n                    hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n                    s.head[s.ins_h] = s.strstart;\n                    /***/\n                }\n                /* Find the longest match, discarding those <= prev_length.\n                 * At this point we have always match_length < MIN_MATCH\n                 */\n                if (hash_head !== 0 &&\n                    /* NIL */\n                    s.strstart - hash_head <= s.w_size - MIN_LOOKAHEAD) {\n                    /* To simplify the code, we prevent matches with the string\n                     * of window index 0 (in particular we have to avoid a match\n                     * of the string with itself at the start of the input file).\n                     */\n                    s.match_length = longest_match(s, hash_head);\n                    /* longest_match() sets match_start */\n                }\n                if (s.match_length >= MIN_MATCH$1) {\n                    // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n                    /** * _tr_tally_dist(s, s.strstart - s.match_start,\n                                 s.match_length - MIN_MATCH, bflush); ** */\n                    bflush = _tr_tally$1(s, s.strstart - s.match_start, s.match_length - MIN_MATCH$1);\n                    s.lookahead -= s.match_length;\n                    /* Insert new strings in the hash table only if the match length\n                     * is not too large. This saves time but degrades compression.\n                     */\n                    if (s.match_length <= s.max_lazy_match &&\n                        /* max_insert_length */\n                        s.lookahead >= MIN_MATCH$1) {\n                        s.match_length--;\n                        /* string at strstart already in table */\n                        do {\n                            s.strstart++;\n                            /** * INSERT_STRING(s, s.strstart, hash_head); ** */\n                            s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH$1 - 1]);\n                            hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n                            s.head[s.ins_h] = s.strstart;\n                            /***/\n                            /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n                             * always MIN_MATCH bytes ahead.\n                             */\n                        } while (--s.match_length !== 0);\n                        s.strstart++;\n                    }\n                    else {\n                        s.strstart += s.match_length;\n                        s.match_length = 0;\n                        s.ins_h = s.window[s.strstart];\n                        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n                        s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + 1]); // #if MIN_MATCH != 3\n                        //                Call UPDATE_HASH() MIN_MATCH-3 more times\n                        // #endif\n                        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n                         * matter since it will be recomputed at next deflate call.\n                         */\n                    }\n                }\n                else {\n                    /* No match, output a literal byte */\n                    // Tracevv((stderr,\"%c\", s.window[s.strstart]));\n                    /** * _tr_tally_lit(s, s.window[s.strstart], bflush); ** */\n                    bflush = _tr_tally$1(s, 0, s.window[s.strstart]);\n                    s.lookahead--;\n                    s.strstart++;\n                }\n                if (bflush) {\n                    /** * FLUSH_BLOCK(s, 0); ** */\n                    flush_block_only(s, false);\n                    if (s.strm.avail_out === 0) {\n                        return BS_NEED_MORE;\n                    }\n                    /***/\n                }\n            }\n            s.insert = s.strstart < MIN_MATCH$1 - 1 ? s.strstart : MIN_MATCH$1 - 1;\n            if (flush === Z_FINISH) {\n                /** * FLUSH_BLOCK(s, 1); ** */\n                flush_block_only(s, true);\n                if (s.strm.avail_out === 0) {\n                    return BS_FINISH_STARTED;\n                }\n                /***/\n                return BS_FINISH_DONE;\n            }\n            if (s.last_lit) {\n                /** * FLUSH_BLOCK(s, 0); ** */\n                flush_block_only(s, false);\n                if (s.strm.avail_out === 0) {\n                    return BS_NEED_MORE;\n                }\n                /***/\n            }\n            return BS_BLOCK_DONE;\n        };\n        /* ===========================================================================\n         * Same as above, but achieves better compression. We use a lazy\n         * evaluation for matches: a match is finally adopted only if there is\n         * no better match at the next window position.\n         */\n        var deflate_slow = function deflate_slow(s, flush) {\n            var hash_head;\n            /* head of hash chain */\n            var bflush;\n            /* set if current block must be flushed */\n            var max_insert;\n            /* Process the input block. */\n            for (;;) {\n                /* Make sure that we always have enough lookahead, except\n                 * at the end of the input file. We need MAX_MATCH bytes\n                 * for the next match, plus MIN_MATCH bytes to insert the\n                 * string following the next match.\n                 */\n                if (s.lookahead < MIN_LOOKAHEAD) {\n                    fill_window(s);\n                    if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n                        return BS_NEED_MORE;\n                    }\n                    if (s.lookahead === 0) {\n                        break;\n                    }\n                    /* flush the current block */\n                }\n                /* Insert the string window[strstart .. strstart+2] in the\n                 * dictionary, and set hash_head to the head of the hash chain:\n                 */\n                hash_head = 0;\n                /* NIL */\n                if (s.lookahead >= MIN_MATCH$1) {\n                    /** * INSERT_STRING(s, s.strstart, hash_head); ** */\n                    s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH$1 - 1]);\n                    hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n                    s.head[s.ins_h] = s.strstart;\n                    /***/\n                }\n                /* Find the longest match, discarding those <= prev_length.\n                 */\n                s.prev_length = s.match_length;\n                s.prev_match = s.match_start;\n                s.match_length = MIN_MATCH$1 - 1;\n                if (hash_head !== 0 &&\n                    /* NIL */\n                    s.prev_length < s.max_lazy_match &&\n                    s.strstart - hash_head <= s.w_size - MIN_LOOKAHEAD\n                /* MAX_DIST(s) */\n                ) {\n                    /* To simplify the code, we prevent matches with the string\n                     * of window index 0 (in particular we have to avoid a match\n                     * of the string with itself at the start of the input file).\n                     */\n                    s.match_length = longest_match(s, hash_head);\n                    /* longest_match() sets match_start */\n                    if (s.match_length <= 5 &&\n                        (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH$1 && s.strstart - s.match_start > 4096))\n                    /* TOO_FAR */\n                    ) {\n                        /* If prev_match is also MIN_MATCH, match_start is garbage\n                         * but we will ignore the current match anyway.\n                         */\n                        s.match_length = MIN_MATCH$1 - 1;\n                    }\n                }\n                /* If there was a match at the previous step and the current\n                 * match is not better, output the previous match:\n                 */\n                if (s.prev_length >= MIN_MATCH$1 && s.match_length <= s.prev_length) {\n                    max_insert = s.strstart + s.lookahead - MIN_MATCH$1;\n                    /* Do not insert strings in hash table beyond this. */\n                    // check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n                    /** *_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                                 s.prev_length - MIN_MATCH, bflush);** */\n                    bflush = _tr_tally$1(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH$1);\n                    /* Insert in hash table all strings up to the end of the match.\n                     * strstart-1 and strstart are already inserted. If there is not\n                     * enough lookahead, the last two strings are not inserted in\n                     * the hash table.\n                     */\n                    s.lookahead -= s.prev_length - 1;\n                    s.prev_length -= 2;\n                    do {\n                        if (++s.strstart <= max_insert) {\n                            /** * INSERT_STRING(s, s.strstart, hash_head); ** */\n                            s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH$1 - 1]);\n                            hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n                            s.head[s.ins_h] = s.strstart;\n                            /***/\n                        }\n                    } while (--s.prev_length !== 0);\n                    s.match_available = 0;\n                    s.match_length = MIN_MATCH$1 - 1;\n                    s.strstart++;\n                    if (bflush) {\n                        /** * FLUSH_BLOCK(s, 0); ** */\n                        flush_block_only(s, false);\n                        if (s.strm.avail_out === 0) {\n                            return BS_NEED_MORE;\n                        }\n                        /***/\n                    }\n                }\n                else if (s.match_available) {\n                    /* If there was no match at the previous position, output a\n                     * single literal. If there was a match but the current match\n                     * is longer, truncate the previous match to a single literal.\n                     */\n                    // Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n                    /** * _tr_tally_lit(s, s.window[s.strstart-1], bflush); ** */\n                    bflush = _tr_tally$1(s, 0, s.window[s.strstart - 1]);\n                    if (bflush) {\n                        /** * FLUSH_BLOCK_ONLY(s, 0) ** */\n                        flush_block_only(s, false);\n                        /***/\n                    }\n                    s.strstart++;\n                    s.lookahead--;\n                    if (s.strm.avail_out === 0) {\n                        return BS_NEED_MORE;\n                    }\n                }\n                else {\n                    /* There is no previous match to compare with, wait for\n                     * the next step to decide.\n                     */\n                    s.match_available = 1;\n                    s.strstart++;\n                    s.lookahead--;\n                }\n            } // Assert (flush != Z_NO_FLUSH, \"no flush?\");\n            if (s.match_available) {\n                // Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n                /** * _tr_tally_lit(s, s.window[s.strstart-1], bflush); ** */\n                bflush = _tr_tally$1(s, 0, s.window[s.strstart - 1]);\n                s.match_available = 0;\n            }\n            s.insert = s.strstart < MIN_MATCH$1 - 1 ? s.strstart : MIN_MATCH$1 - 1;\n            if (flush === Z_FINISH) {\n                /** * FLUSH_BLOCK(s, 1); ** */\n                flush_block_only(s, true);\n                if (s.strm.avail_out === 0) {\n                    return BS_FINISH_STARTED;\n                }\n                /***/\n                return BS_FINISH_DONE;\n            }\n            if (s.last_lit) {\n                /** * FLUSH_BLOCK(s, 0); ** */\n                flush_block_only(s, false);\n                if (s.strm.avail_out === 0) {\n                    return BS_NEED_MORE;\n                }\n                /***/\n            }\n            return BS_BLOCK_DONE;\n        };\n        /* ===========================================================================\n         * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n         * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n         * deflate switches away from Z_RLE.)\n         */\n        var deflate_rle = function deflate_rle(s, flush) {\n            var bflush;\n            /* set if current block must be flushed */\n            var prev;\n            /* byte at distance one to match */\n            var scan;\n            var strend;\n            /* scan goes up to strend for length of run */\n            var _win = s.window;\n            for (;;) {\n                /* Make sure that we always have enough lookahead, except\n                 * at the end of the input file. We need MAX_MATCH bytes\n                 * for the longest run, plus one for the unrolled loop.\n                 */\n                if (s.lookahead <= MAX_MATCH$1) {\n                    fill_window(s);\n                    if (s.lookahead <= MAX_MATCH$1 && flush === Z_NO_FLUSH) {\n                        return BS_NEED_MORE;\n                    }\n                    if (s.lookahead === 0) {\n                        break;\n                    }\n                    /* flush the current block */\n                }\n                /* See how many times the previous byte repeats */\n                s.match_length = 0;\n                if (s.lookahead >= MIN_MATCH$1 && s.strstart > 0) {\n                    scan = s.strstart - 1;\n                    prev = _win[scan];\n                    if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n                        strend = s.strstart + MAX_MATCH$1;\n                        do {\n                            /* jshint noempty:false */\n                        } while (prev === _win[++scan] &&\n                            prev === _win[++scan] &&\n                            prev === _win[++scan] &&\n                            prev === _win[++scan] &&\n                            prev === _win[++scan] &&\n                            prev === _win[++scan] &&\n                            prev === _win[++scan] &&\n                            prev === _win[++scan] &&\n                            scan < strend);\n                        s.match_length = MAX_MATCH$1 - (strend - scan);\n                        if (s.match_length > s.lookahead) {\n                            s.match_length = s.lookahead;\n                        }\n                    } // Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n                }\n                /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n                if (s.match_length >= MIN_MATCH$1) {\n                    // check_match(s, s.strstart, s.strstart - 1, s.match_length);\n                    /** * _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ** */\n                    bflush = _tr_tally$1(s, 1, s.match_length - MIN_MATCH$1);\n                    s.lookahead -= s.match_length;\n                    s.strstart += s.match_length;\n                    s.match_length = 0;\n                }\n                else {\n                    /* No match, output a literal byte */\n                    // Tracevv((stderr,\"%c\", s->window[s->strstart]));\n                    /** * _tr_tally_lit(s, s.window[s.strstart], bflush); ** */\n                    bflush = _tr_tally$1(s, 0, s.window[s.strstart]);\n                    s.lookahead--;\n                    s.strstart++;\n                }\n                if (bflush) {\n                    /** * FLUSH_BLOCK(s, 0); ** */\n                    flush_block_only(s, false);\n                    if (s.strm.avail_out === 0) {\n                        return BS_NEED_MORE;\n                    }\n                    /***/\n                }\n            }\n            s.insert = 0;\n            if (flush === Z_FINISH) {\n                /** * FLUSH_BLOCK(s, 1); ** */\n                flush_block_only(s, true);\n                if (s.strm.avail_out === 0) {\n                    return BS_FINISH_STARTED;\n                }\n                /***/\n                return BS_FINISH_DONE;\n            }\n            if (s.last_lit) {\n                /** * FLUSH_BLOCK(s, 0); ** */\n                flush_block_only(s, false);\n                if (s.strm.avail_out === 0) {\n                    return BS_NEED_MORE;\n                }\n                /***/\n            }\n            return BS_BLOCK_DONE;\n        };\n        /* ===========================================================================\n         * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n         * (It will be regenerated if this run of deflate switches away from Huffman.)\n         */\n        var deflate_huff = function deflate_huff(s, flush) {\n            var bflush;\n            /* set if current block must be flushed */\n            for (;;) {\n                /* Make sure that we have a literal to write. */\n                if (s.lookahead === 0) {\n                    fill_window(s);\n                    if (s.lookahead === 0) {\n                        if (flush === Z_NO_FLUSH) {\n                            return BS_NEED_MORE;\n                        }\n                        break;\n                        /* flush the current block */\n                    }\n                }\n                /* Output a literal byte */\n                s.match_length = 0; // Tracevv((stderr,\"%c\", s->window[s->strstart]));\n                /** * _tr_tally_lit(s, s.window[s.strstart], bflush); ** */\n                bflush = _tr_tally$1(s, 0, s.window[s.strstart]);\n                s.lookahead--;\n                s.strstart++;\n                if (bflush) {\n                    /** * FLUSH_BLOCK(s, 0); ** */\n                    flush_block_only(s, false);\n                    if (s.strm.avail_out === 0) {\n                        return BS_NEED_MORE;\n                    }\n                    /***/\n                }\n            }\n            s.insert = 0;\n            if (flush === Z_FINISH) {\n                /** * FLUSH_BLOCK(s, 1); ** */\n                flush_block_only(s, true);\n                if (s.strm.avail_out === 0) {\n                    return BS_FINISH_STARTED;\n                }\n                /***/\n                return BS_FINISH_DONE;\n            }\n            if (s.last_lit) {\n                /** * FLUSH_BLOCK(s, 0); ** */\n                flush_block_only(s, false);\n                if (s.strm.avail_out === 0) {\n                    return BS_NEED_MORE;\n                }\n                /***/\n            }\n            return BS_BLOCK_DONE;\n        };\n        /* Values for max_lazy_match, good_match and max_chain_length, depending on\n         * the desired pack level (0..9). The values given below have been tuned to\n         * exclude worst case performance for pathological files. Better values may be\n         * found for specific files.\n         */\n        function Config(good_length, max_lazy, nice_length, max_chain, func) {\n            this.good_length = good_length;\n            this.max_lazy = max_lazy;\n            this.nice_length = nice_length;\n            this.max_chain = max_chain;\n            this.func = func;\n        }\n        var configuration_table = [\n            /*      good lazy nice chain */\n            new Config(0, 0, 0, 0, deflate_stored),\n            /* 0 store only */\n            new Config(4, 4, 8, 4, deflate_fast),\n            /* 1 max speed, no lazy matches */\n            new Config(4, 5, 16, 8, deflate_fast),\n            /* 2 */\n            new Config(4, 6, 32, 32, deflate_fast),\n            /* 3 */\n            new Config(4, 4, 16, 16, deflate_slow),\n            /* 4 lazy matches */\n            new Config(8, 16, 32, 32, deflate_slow),\n            /* 5 */\n            new Config(8, 16, 128, 128, deflate_slow),\n            /* 6 */\n            new Config(8, 32, 128, 256, deflate_slow),\n            /* 7 */\n            new Config(32, 128, 258, 1024, deflate_slow),\n            /* 8 */\n            new Config(32, 258, 258, 4096, deflate_slow),\n            /* 9 max compression */\n        ];\n        /* ===========================================================================\n         * Initialize the \"longest match\" routines for a new zlib stream\n         */\n        var lm_init = function lm_init(s) {\n            s.window_size = 2 * s.w_size;\n            /** * CLEAR_HASH(s); ** */\n            zero$1(s.head); // Fill with NIL (= 0);\n            /* Set the default configuration parameters:\n             */\n            s.max_lazy_match = configuration_table[s.level].max_lazy;\n            s.good_match = configuration_table[s.level].good_length;\n            s.nice_match = configuration_table[s.level].nice_length;\n            s.max_chain_length = configuration_table[s.level].max_chain;\n            s.strstart = 0;\n            s.block_start = 0;\n            s.lookahead = 0;\n            s.insert = 0;\n            s.match_length = s.prev_length = MIN_MATCH$1 - 1;\n            s.match_available = 0;\n            s.ins_h = 0;\n        };\n        function DeflateState() {\n            this.strm = null;\n            /* pointer back to this zlib stream */\n            this.status = 0;\n            /* as the name implies */\n            this.pending_buf = null;\n            /* output still pending */\n            this.pending_buf_size = 0;\n            /* size of pending_buf */\n            this.pending_out = 0;\n            /* next pending byte to output to the stream */\n            this.pending = 0;\n            /* nb of bytes in the pending buffer */\n            this.wrap = 0;\n            /* bit 0 true for zlib, bit 1 true for gzip */\n            this.gzhead = null;\n            /* gzip header information to write */\n            this.gzindex = 0;\n            /* where in extra, name, or comment */\n            this.method = Z_DEFLATED;\n            /* can only be DEFLATED */\n            this.last_flush = -1;\n            /* value of flush param for previous deflate call */\n            this.w_size = 0;\n            /* LZ77 window size (32K by default) */\n            this.w_bits = 0;\n            /* log2(w_size)  (8..16) */\n            this.w_mask = 0;\n            /* w_size - 1 */\n            this.window = null;\n            /* Sliding window. Input bytes are read into the second half of the window,\n             * and move to the first half later to keep a dictionary of at least wSize\n             * bytes. With this organization, matches are limited to a distance of\n             * wSize-MAX_MATCH bytes, but this ensures that IO is always\n             * performed with a length multiple of the block size.\n             */\n            this.window_size = 0;\n            /* Actual size of window: 2*wSize, except when the user input buffer\n             * is directly used as sliding window.\n             */\n            this.prev = null;\n            /* Link to older string with same hash index. To limit the size of this\n             * array to 64K, this link is maintained only for the last 32K strings.\n             * An index in this array is thus a window index modulo 32K.\n             */\n            this.head = null;\n            /* Heads of the hash chains or NIL. */\n            this.ins_h = 0;\n            /* hash index of string to be inserted */\n            this.hash_size = 0;\n            /* number of elements in hash table */\n            this.hash_bits = 0;\n            /* log2(hash_size) */\n            this.hash_mask = 0;\n            /* hash_size-1 */\n            this.hash_shift = 0;\n            /* Number of bits by which ins_h must be shifted at each input\n             * step. It must be such that after MIN_MATCH steps, the oldest\n             * byte no longer takes part in the hash key, that is:\n             *   hash_shift * MIN_MATCH >= hash_bits\n             */\n            this.block_start = 0;\n            /* Window position at the beginning of the current output block. Gets\n             * negative when the window is moved backwards.\n             */\n            this.match_length = 0;\n            /* length of best match */\n            this.prev_match = 0;\n            /* previous match */\n            this.match_available = 0;\n            /* set if previous match exists */\n            this.strstart = 0;\n            /* start of string to insert */\n            this.match_start = 0;\n            /* start of matching string */\n            this.lookahead = 0;\n            /* number of valid bytes ahead in window */\n            this.prev_length = 0;\n            /* Length of the best match at previous step. Matches not greater than this\n             * are discarded. This is used in the lazy match evaluation.\n             */\n            this.max_chain_length = 0;\n            /* To speed up deflation, hash chains are never searched beyond this\n             * length.  A higher limit improves compression ratio but degrades the\n             * speed.\n             */\n            this.max_lazy_match = 0;\n            /* Attempt to find a better match only when the current match is strictly\n             * smaller than this value. This mechanism is used only for compression\n             * levels >= 4.\n             */\n            // That's alias to max_lazy_match, don't use directly\n            // this.max_insert_length = 0;\n            /* Insert new strings in the hash table only if the match length is not\n             * greater than this length. This saves time but degrades compression.\n             * max_insert_length is used only for compression levels <= 3.\n             */\n            this.level = 0;\n            /* compression level (1..9) */\n            this.strategy = 0;\n            /* favor or force Huffman coding */\n            this.good_match = 0;\n            /* Use a faster search when the previous match is longer than this */\n            this.nice_match = 0;\n            /* Stop searching when current match exceeds this */\n            /* used by trees.c: */\n            /* Didn't use ct_data typedef below to suppress compiler warning */\n            // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n            // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n            // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n            // Use flat array of DOUBLE size, with interleaved fata,\n            // because JS does not support effective\n            this.dyn_ltree = new Uint16Array(HEAP_SIZE$1 * 2);\n            this.dyn_dtree = new Uint16Array((2 * D_CODES$1 + 1) * 2);\n            this.bl_tree = new Uint16Array((2 * BL_CODES$1 + 1) * 2);\n            zero$1(this.dyn_ltree);\n            zero$1(this.dyn_dtree);\n            zero$1(this.bl_tree);\n            this.l_desc = null;\n            /* desc. for literal tree */\n            this.d_desc = null;\n            /* desc. for distance tree */\n            this.bl_desc = null;\n            /* desc. for bit length tree */\n            // ush bl_count[MAX_BITS+1];\n            this.bl_count = new Uint16Array(MAX_BITS$1 + 1);\n            /* number of codes at each bit length for an optimal tree */\n            // int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n            this.heap = new Uint16Array(2 * L_CODES$1 + 1);\n            /* heap used to build the Huffman trees */\n            zero$1(this.heap);\n            this.heap_len = 0;\n            /* number of elements in the heap */\n            this.heap_max = 0;\n            /* element of largest frequency */\n            /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n             * The same heap array is used to build all trees.\n             */\n            this.depth = new Uint16Array(2 * L_CODES$1 + 1); // uch depth[2*L_CODES+1];\n            zero$1(this.depth);\n            /* Depth of each subtree used as tie breaker for trees of equal frequency\n             */\n            this.l_buf = 0;\n            /* buffer index for literals or lengths */\n            this.lit_bufsize = 0;\n            /* Size of match buffer for literals/lengths.  There are 4 reasons for\n             * limiting lit_bufsize to 64K:\n             *   - frequencies can be kept in 16 bit counters\n             *   - if compression is not successful for the first block, all input\n             *     data is still in the window so we can still emit a stored block even\n             *     when input comes from standard input.  (This can also be done for\n             *     all blocks if lit_bufsize is not greater than 32K.)\n             *   - if compression is not successful for a file smaller than 64K, we can\n             *     even emit a stored file instead of a stored block (saving 5 bytes).\n             *     This is applicable only for zip (not gzip or zlib).\n             *   - creating new Huffman trees less frequently may not provide fast\n             *     adaptation to changes in the input data statistics. (Take for\n             *     example a binary file with poorly compressible code followed by\n             *     a highly compressible string table.) Smaller buffer sizes give\n             *     fast adaptation but have of course the overhead of transmitting\n             *     trees more frequently.\n             *   - I can't count above 4\n             */\n            this.last_lit = 0;\n            /* running index in l_buf */\n            this.d_buf = 0;\n            /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n             * the same number of elements. To use different lengths, an extra flag\n             * array would be necessary.\n             */\n            this.opt_len = 0;\n            /* bit length of current block with optimal trees */\n            this.static_len = 0;\n            /* bit length of current block with static trees */\n            this.matches = 0;\n            /* number of string matches in current block */\n            this.insert = 0;\n            /* bytes at end of window left to insert */\n            this.bi_buf = 0;\n            /* Output buffer. bits are inserted starting at the bottom (least\n             * significant bits).\n             */\n            this.bi_valid = 0;\n            /* Number of valid bits in bi_buf.  All bits above the last valid bit\n             * are always zero.\n             */\n            // Used for window memory init. We safely ignore it for JS. That makes\n            // sense only for pointers and memory check tools.\n            // this.high_water = 0;\n            /* High water mark offset in window for initialized bytes -- bytes above\n             * this are set to zero in order to avoid memory check warnings when\n             * longest match routines access bytes past the input.  This is then\n             * updated to the new high water mark.\n             */\n        }\n        var deflateResetKeep = function deflateResetKeep(strm) {\n            if (!strm || !strm.state) {\n                return err(strm, Z_STREAM_ERROR);\n            }\n            strm.total_in = strm.total_out = 0;\n            strm.data_type = Z_UNKNOWN$1;\n            var s = strm.state;\n            s.pending = 0;\n            s.pending_out = 0;\n            if (s.wrap < 0) {\n                s.wrap = -s.wrap;\n                /* was made negative by deflate(..., Z_FINISH); */\n            }\n            s.status = s.wrap ? INIT_STATE : BUSY_STATE;\n            strm.adler =\n                s.wrap === 2\n                    ? 0 // crc32(0, Z_NULL, 0)\n                    : 1; // adler32(0, Z_NULL, 0)\n            s.last_flush = Z_NO_FLUSH;\n            _tr_init$1(s);\n            return Z_OK;\n        };\n        var deflateReset = function deflateReset(strm) {\n            var ret = deflateResetKeep(strm);\n            if (ret === Z_OK) {\n                lm_init(strm.state);\n            }\n            return ret;\n        };\n        var deflateSetHeader = function deflateSetHeader(strm, head) {\n            if (!strm || !strm.state) {\n                return Z_STREAM_ERROR;\n            }\n            if (strm.state.wrap !== 2) {\n                return Z_STREAM_ERROR;\n            }\n            strm.state.gzhead = head;\n            return Z_OK;\n        };\n        var deflateInit2 = function deflateInit2(strm, level, method, windowBits, memLevel, strategy) {\n            if (!strm) {\n                // === Z_NULL\n                return Z_STREAM_ERROR;\n            }\n            var wrap = 1;\n            if (level === Z_DEFAULT_COMPRESSION) {\n                level = 6;\n            }\n            if (windowBits < 0) {\n                /* suppress zlib wrapper */\n                wrap = 0;\n                windowBits = -windowBits;\n            }\n            else if (windowBits > 15) {\n                wrap = 2;\n                /* write gzip wrapper instead */\n                windowBits -= 16;\n            }\n            if (memLevel < 1 ||\n                memLevel > MAX_MEM_LEVEL ||\n                method !== Z_DEFLATED ||\n                windowBits < 8 ||\n                windowBits > 15 ||\n                level < 0 ||\n                level > 9 ||\n                strategy < 0 ||\n                strategy > Z_FIXED$1) {\n                return err(strm, Z_STREAM_ERROR);\n            }\n            if (windowBits === 8) {\n                windowBits = 9;\n            }\n            /* until 256-byte window bug fixed */\n            var s = new DeflateState();\n            strm.state = s;\n            s.strm = strm;\n            s.wrap = wrap;\n            s.gzhead = null;\n            s.w_bits = windowBits;\n            s.w_size = 1 << s.w_bits;\n            s.w_mask = s.w_size - 1;\n            s.hash_bits = memLevel + 7;\n            s.hash_size = 1 << s.hash_bits;\n            s.hash_mask = s.hash_size - 1;\n            s.hash_shift = ~~((s.hash_bits + MIN_MATCH$1 - 1) / MIN_MATCH$1);\n            s.window = new Uint8Array(s.w_size * 2);\n            s.head = new Uint16Array(s.hash_size);\n            s.prev = new Uint16Array(s.w_size); // Don't need mem init magic for JS.\n            // s.high_water = 0;  /* nothing written to s->window yet */\n            s.lit_bufsize = 1 << (memLevel + 6);\n            /* 16K elements by default */\n            s.pending_buf_size = s.lit_bufsize * 4;\n            // overlay = (ushf *) ZALLOC(strm, s->lit_bufsize, sizeof(ush)+2);\n            // s->pending_buf = (uchf *) overlay;\n            // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n            s.pending_buf = new Uint8Array(s.pending_buf_size);\n            // s->d_buf = overlay + s->lit_bufsize/sizeof(ush);\n            s.d_buf = 1 * s.lit_bufsize; // s->l_buf = s->pending_buf + (1+sizeof(ush))*s->lit_bufsize;\n            s.l_buf = (1 + 2) * s.lit_bufsize;\n            s.level = level;\n            s.strategy = strategy;\n            s.method = method;\n            return deflateReset(strm);\n        };\n        var deflateInit = function deflateInit(strm, level) {\n            return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);\n        };\n        var deflate = function deflate(strm, flush) {\n            var beg;\n            var val; // for gzip header write only\n            if (!strm || !strm.state || flush > Z_BLOCK || flush < 0) {\n                return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;\n            }\n            var s = strm.state;\n            if (!strm.output || (!strm.input && strm.avail_in !== 0) || (s.status === FINISH_STATE && flush !== Z_FINISH)) {\n                return err(strm, strm.avail_out === 0 ? Z_BUF_ERROR : Z_STREAM_ERROR);\n            }\n            s.strm = strm;\n            /* just in case */\n            var old_flush = s.last_flush;\n            s.last_flush = flush;\n            /* Write the header */\n            if (s.status === INIT_STATE) {\n                if (s.wrap === 2) {\n                    // GZIP header\n                    strm.adler = 0; // crc32(0L, Z_NULL, 0);\n                    put_byte(s, 31);\n                    put_byte(s, 139);\n                    put_byte(s, 8);\n                    if (!s.gzhead) {\n                        // s->gzhead == Z_NULL\n                        put_byte(s, 0);\n                        put_byte(s, 0);\n                        put_byte(s, 0);\n                        put_byte(s, 0);\n                        put_byte(s, 0);\n                        put_byte(s, s.level === 9 ? 2 : s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ? 4 : 0);\n                        put_byte(s, OS_CODE);\n                        s.status = BUSY_STATE;\n                    }\n                    else {\n                        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                            (s.gzhead.hcrc ? 2 : 0) +\n                            (!s.gzhead.extra ? 0 : 4) +\n                            (!s.gzhead.name ? 0 : 8) +\n                            (!s.gzhead.comment ? 0 : 16));\n                        put_byte(s, s.gzhead.time & 0xff);\n                        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n                        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n                        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n                        put_byte(s, s.level === 9 ? 2 : s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ? 4 : 0);\n                        put_byte(s, s.gzhead.os & 0xff);\n                        if (s.gzhead.extra && s.gzhead.extra.length) {\n                            put_byte(s, s.gzhead.extra.length & 0xff);\n                            put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n                        }\n                        if (s.gzhead.hcrc) {\n                            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending, 0);\n                        }\n                        s.gzindex = 0;\n                        s.status = EXTRA_STATE;\n                    }\n                } // DEFLATE header\n                else {\n                    var header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;\n                    var level_flags = -1;\n                    if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n                        level_flags = 0;\n                    }\n                    else if (s.level < 6) {\n                        level_flags = 1;\n                    }\n                    else if (s.level === 6) {\n                        level_flags = 2;\n                    }\n                    else {\n                        level_flags = 3;\n                    }\n                    header |= level_flags << 6;\n                    if (s.strstart !== 0) {\n                        header |= PRESET_DICT;\n                    }\n                    header += 31 - (header % 31);\n                    s.status = BUSY_STATE;\n                    putShortMSB(s, header);\n                    /* Save the adler32 of the preset dictionary: */\n                    if (s.strstart !== 0) {\n                        putShortMSB(s, strm.adler >>> 16);\n                        putShortMSB(s, strm.adler & 0xffff);\n                    }\n                    strm.adler = 1; // adler32(0L, Z_NULL, 0);\n                }\n            } // #ifdef GZIP\n            if (s.status === EXTRA_STATE) {\n                if (s.gzhead.extra\n                /* != Z_NULL */\n                ) {\n                    beg = s.pending;\n                    /* start of bytes to update crc */\n                    while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n                        if (s.pending === s.pending_buf_size) {\n                            if (s.gzhead.hcrc && s.pending > beg) {\n                                strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n                            }\n                            flush_pending(strm);\n                            beg = s.pending;\n                            if (s.pending === s.pending_buf_size) {\n                                break;\n                            }\n                        }\n                        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n                        s.gzindex++;\n                    }\n                    if (s.gzhead.hcrc && s.pending > beg) {\n                        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n                    }\n                    if (s.gzindex === s.gzhead.extra.length) {\n                        s.gzindex = 0;\n                        s.status = NAME_STATE;\n                    }\n                }\n                else {\n                    s.status = NAME_STATE;\n                }\n            }\n            if (s.status === NAME_STATE) {\n                if (s.gzhead.name\n                /* != Z_NULL */\n                ) {\n                    beg = s.pending;\n                    /* start of bytes to update crc */\n                    // int val;\n                    do {\n                        if (s.pending === s.pending_buf_size) {\n                            if (s.gzhead.hcrc && s.pending > beg) {\n                                strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n                            }\n                            flush_pending(strm);\n                            beg = s.pending;\n                            if (s.pending === s.pending_buf_size) {\n                                val = 1;\n                                break;\n                            }\n                        } // JS specific: little magic to add zero terminator to end of string\n                        if (s.gzindex < s.gzhead.name.length) {\n                            val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n                        }\n                        else {\n                            val = 0;\n                        }\n                        put_byte(s, val);\n                    } while (val !== 0);\n                    if (s.gzhead.hcrc && s.pending > beg) {\n                        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n                    }\n                    if (val === 0) {\n                        s.gzindex = 0;\n                        s.status = COMMENT_STATE;\n                    }\n                }\n                else {\n                    s.status = COMMENT_STATE;\n                }\n            }\n            if (s.status === COMMENT_STATE) {\n                if (s.gzhead.comment\n                /* != Z_NULL */\n                ) {\n                    beg = s.pending;\n                    /* start of bytes to update crc */\n                    // int val;\n                    do {\n                        if (s.pending === s.pending_buf_size) {\n                            if (s.gzhead.hcrc && s.pending > beg) {\n                                strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n                            }\n                            flush_pending(strm);\n                            beg = s.pending;\n                            if (s.pending === s.pending_buf_size) {\n                                val = 1;\n                                break;\n                            }\n                        } // JS specific: little magic to add zero terminator to end of string\n                        if (s.gzindex < s.gzhead.comment.length) {\n                            val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n                        }\n                        else {\n                            val = 0;\n                        }\n                        put_byte(s, val);\n                    } while (val !== 0);\n                    if (s.gzhead.hcrc && s.pending > beg) {\n                        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n                    }\n                    if (val === 0) {\n                        s.status = HCRC_STATE;\n                    }\n                }\n                else {\n                    s.status = HCRC_STATE;\n                }\n            }\n            if (s.status === HCRC_STATE) {\n                if (s.gzhead.hcrc) {\n                    if (s.pending + 2 > s.pending_buf_size) {\n                        flush_pending(strm);\n                    }\n                    if (s.pending + 2 <= s.pending_buf_size) {\n                        put_byte(s, strm.adler & 0xff);\n                        put_byte(s, (strm.adler >> 8) & 0xff);\n                        strm.adler = 0; // crc32(0L, Z_NULL, 0);\n                        s.status = BUSY_STATE;\n                    }\n                }\n                else {\n                    s.status = BUSY_STATE;\n                }\n            } // #endif\n            /* Flush as much pending output as possible */\n            if (s.pending !== 0) {\n                flush_pending(strm);\n                if (strm.avail_out === 0) {\n                    /* Since avail_out is 0, deflate will be called again with\n                     * more output space, but possibly with both pending and\n                     * avail_in equal to zero. There won't be anything to do,\n                     * but this is not an error situation so make sure we\n                     * return OK instead of BUF_ERROR at next call of deflate:\n                     */\n                    s.last_flush = -1;\n                    return Z_OK;\n                }\n                /* Make sure there is something to do and avoid duplicate consecutive\n                 * flushes. For repeated and useless calls with Z_FINISH, we keep\n                 * returning Z_STREAM_END instead of Z_BUF_ERROR.\n                 */\n            }\n            else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) && flush !== Z_FINISH) {\n                return err(strm, Z_BUF_ERROR);\n            }\n            /* User must not provide more input after the first FINISH: */\n            if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n                return err(strm, Z_BUF_ERROR);\n            }\n            /* Start a new block or continue the current one.\n             */\n            if (strm.avail_in !== 0 || s.lookahead !== 0 || (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {\n                var bstate = s.strategy === Z_HUFFMAN_ONLY\n                    ? deflate_huff(s, flush)\n                    : s.strategy === Z_RLE\n                        ? deflate_rle(s, flush)\n                        : configuration_table[s.level].func(s, flush);\n                if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n                    s.status = FINISH_STATE;\n                }\n                if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n                    if (strm.avail_out === 0) {\n                        s.last_flush = -1;\n                        /* avoid BUF_ERROR next call, see above */\n                    }\n                    return Z_OK;\n                    /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n                     * of deflate should use the same flush parameter to make sure\n                     * that the flush is complete. So we don't have to output an\n                     * empty block here, this will be done at next call. This also\n                     * ensures that for a very small output buffer, we emit at most\n                     * one empty block.\n                     */\n                }\n                if (bstate === BS_BLOCK_DONE) {\n                    if (flush === Z_PARTIAL_FLUSH) {\n                        _tr_align$1(s);\n                    }\n                    else if (flush !== Z_BLOCK) {\n                        /* FULL_FLUSH or SYNC_FLUSH */\n                        _tr_stored_block$1(s, 0, 0, false);\n                        /* For a full flush, this empty block will be recognized\n                         * as a special marker by inflate_sync().\n                         */\n                        if (flush === Z_FULL_FLUSH) {\n                            /** * CLEAR_HASH(s); ** */\n                            /* forget history */\n                            zero$1(s.head); // Fill with NIL (= 0);\n                            if (s.lookahead === 0) {\n                                s.strstart = 0;\n                                s.block_start = 0;\n                                s.insert = 0;\n                            }\n                        }\n                    }\n                    flush_pending(strm);\n                    if (strm.avail_out === 0) {\n                        s.last_flush = -1;\n                        /* avoid BUF_ERROR at next call, see above */\n                        return Z_OK;\n                    }\n                }\n            } // Assert(strm->avail_out > 0, \"bug2\");\n            // if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n            if (flush !== Z_FINISH) {\n                return Z_OK;\n            }\n            if (s.wrap <= 0) {\n                return Z_STREAM_END;\n            }\n            /* Write the trailer */\n            if (s.wrap === 2) {\n                put_byte(s, strm.adler & 0xff);\n                put_byte(s, (strm.adler >> 8) & 0xff);\n                put_byte(s, (strm.adler >> 16) & 0xff);\n                put_byte(s, (strm.adler >> 24) & 0xff);\n                put_byte(s, strm.total_in & 0xff);\n                put_byte(s, (strm.total_in >> 8) & 0xff);\n                put_byte(s, (strm.total_in >> 16) & 0xff);\n                put_byte(s, (strm.total_in >> 24) & 0xff);\n            }\n            else {\n                putShortMSB(s, strm.adler >>> 16);\n                putShortMSB(s, strm.adler & 0xffff);\n            }\n            flush_pending(strm);\n            /* If avail_out is zero, the application will call deflate again\n             * to flush the rest.\n             */\n            if (s.wrap > 0) {\n                s.wrap = -s.wrap;\n            }\n            /* write the trailer only once! */\n            return s.pending !== 0 ? Z_OK : Z_STREAM_END;\n        };\n        var deflateEnd = function deflateEnd(strm) {\n            if (!strm ||\n                /* == Z_NULL */\n                !strm.state\n            /* == Z_NULL */\n            ) {\n                return Z_STREAM_ERROR;\n            }\n            var status = strm.state.status;\n            if (status !== INIT_STATE &&\n                status !== EXTRA_STATE &&\n                status !== NAME_STATE &&\n                status !== COMMENT_STATE &&\n                status !== HCRC_STATE &&\n                status !== BUSY_STATE &&\n                status !== FINISH_STATE) {\n                return err(strm, Z_STREAM_ERROR);\n            }\n            strm.state = null;\n            return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;\n        };\n        /* =========================================================================\n         * Initializes the compression dictionary from the given byte\n         * sequence without producing any compressed output.\n         */\n        var deflateSetDictionary = function deflateSetDictionary(strm, dictionary) {\n            var dictLength = dictionary.length;\n            if (!strm ||\n                /* == Z_NULL */\n                !strm.state\n            /* == Z_NULL */\n            ) {\n                return Z_STREAM_ERROR;\n            }\n            var s = strm.state;\n            var wrap = s.wrap;\n            if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n                return Z_STREAM_ERROR;\n            }\n            /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n            if (wrap === 1) {\n                /* adler32(strm->adler, dictionary, dictLength); */\n                strm.adler = adler32_1(strm.adler, dictionary, dictLength, 0);\n            }\n            s.wrap = 0;\n            /* avoid computing Adler-32 in read_buf */\n            /* if dictionary would fill window, just replace the history */\n            if (dictLength >= s.w_size) {\n                if (wrap === 0) {\n                    /* already empty otherwise */\n                    /** * CLEAR_HASH(s); ** */\n                    zero$1(s.head); // Fill with NIL (= 0);\n                    s.strstart = 0;\n                    s.block_start = 0;\n                    s.insert = 0;\n                }\n                /* use the tail */\n                // dictionary = dictionary.slice(dictLength - s.w_size);\n                var tmpDict = new Uint8Array(s.w_size);\n                tmpDict.set(dictionary.subarray(dictLength - s.w_size, dictLength), 0);\n                dictionary = tmpDict;\n                dictLength = s.w_size;\n            }\n            /* insert dictionary into window and hash */\n            var avail = strm.avail_in;\n            var next = strm.next_in;\n            var input = strm.input;\n            strm.avail_in = dictLength;\n            strm.next_in = 0;\n            strm.input = dictionary;\n            fill_window(s);\n            while (s.lookahead >= MIN_MATCH$1) {\n                var str = s.strstart;\n                var n = s.lookahead - (MIN_MATCH$1 - 1);\n                do {\n                    /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n                    s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH$1 - 1]);\n                    s.prev[str & s.w_mask] = s.head[s.ins_h];\n                    s.head[s.ins_h] = str;\n                    str++;\n                } while (--n);\n                s.strstart = str;\n                s.lookahead = MIN_MATCH$1 - 1;\n                fill_window(s);\n            }\n            s.strstart += s.lookahead;\n            s.block_start = s.strstart;\n            s.insert = s.lookahead;\n            s.lookahead = 0;\n            s.match_length = s.prev_length = MIN_MATCH$1 - 1;\n            s.match_available = 0;\n            strm.next_in = next;\n            strm.input = input;\n            strm.avail_in = avail;\n            s.wrap = wrap;\n            return Z_OK;\n        };\n        var deflateInit_1 = deflateInit;\n        var deflateInit2_1 = deflateInit2;\n        var deflateReset_1 = deflateReset;\n        var deflateResetKeep_1 = deflateResetKeep;\n        var deflateSetHeader_1 = deflateSetHeader;\n        var deflate_2 = deflate;\n        var deflateEnd_1 = deflateEnd;\n        var deflateSetDictionary_1 = deflateSetDictionary;\n        var deflateInfo = 'pako deflate (from Nodeca project)';\n        /* Not implemented\n      module.exports.deflateBound = deflateBound;\n      module.exports.deflateCopy = deflateCopy;\n      module.exports.deflateParams = deflateParams;\n      module.exports.deflatePending = deflatePending;\n      module.exports.deflatePrime = deflatePrime;\n      module.exports.deflateTune = deflateTune;\n      */\n        var deflate_1 = {\n            deflateInit: deflateInit_1,\n            deflateInit2: deflateInit2_1,\n            deflateReset: deflateReset_1,\n            deflateResetKeep: deflateResetKeep_1,\n            deflateSetHeader: deflateSetHeader_1,\n            deflate: deflate_2,\n            deflateEnd: deflateEnd_1,\n            deflateSetDictionary: deflateSetDictionary_1,\n            deflateInfo: deflateInfo,\n        };\n        // Join array of chunks to single array.\n        function flattenChunks(chunks) {\n            // calculate data length\n            var len = 0;\n            for (var i = 0, l = chunks.length; i < l; i++) {\n                len += chunks[i].length;\n            } // join chunks\n            var result = new Uint8Array(len);\n            for (var _i = 0, pos = 0, _l = chunks.length; _i < _l; _i++) {\n                var chunk = chunks[_i];\n                result.set(chunk, pos);\n                pos += chunk.length;\n            }\n            return result;\n        }\n        // String encode/decode helpers\n        //\n        // - apply(Array) can fail on Android 2.2\n        // - apply(Uint8Array) can fail on iOS 5.1 Safari\n        //\n        // Table with utf8 lengths (calculated by first byte of sequence)\n        // Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n        // because max possible codepoint is 0x10ffff\n        var _utf8len = new Uint8Array(256);\n        for (var q = 0; q < 256; q++) {\n            _utf8len[q] = q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1;\n        }\n        _utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n        // convert string to array (typed, when possible)\n        // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n        //\n        // This software is provided 'as-is', without any express or implied\n        // warranty. In no event will the authors be held liable for any damages\n        // arising from the use of this software.\n        //\n        // Permission is granted to anyone to use this software for any purpose,\n        // including commercial applications, and to alter it and redistribute it\n        // freely, subject to the following restrictions:\n        //\n        // 1. The origin of this software must not be misrepresented; you must not\n        //   claim that you wrote the original software. If you use this software\n        //   in a product, an acknowledgment in the product documentation would be\n        //   appreciated but is not required.\n        // 2. Altered source versions must be plainly marked as such, and must not be\n        //   misrepresented as being the original software.\n        // 3. This notice may not be removed or altered from any source distribution.\n        function ZStream() {\n            /* next input byte */\n            this.input = null; // JS specific, because we have no pointers\n            this.next_in = 0;\n            /* number of bytes available at input */\n            this.avail_in = 0;\n            /* total number of input bytes read so far */\n            this.total_in = 0;\n            /* next output byte should be put there */\n            this.output = null; // JS specific, because we have no pointers\n            this.next_out = 0;\n            /* remaining free space at output */\n            this.avail_out = 0;\n            /* total number of bytes output so far */\n            this.total_out = 0;\n            /* last error message, NULL if no error */\n            this.msg = '';\n            /* Z_NULL */\n            /* not visible by applications */\n            this.state = null;\n            /* best guess about the data type: binary or text */\n            this.data_type = 2;\n            /* Z_UNKNOWN */\n            /* adler32 value of the uncompressed data */\n            this.adler = 0;\n        }\n        var zstream = ZStream;\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        var toString = Object.prototype.toString;\n        /* Public constants ========================================================== */\n        /* =========================================================================== */\n        var Z_NO_FLUSH$1 = constants.Z_NO_FLUSH;\n        var Z_SYNC_FLUSH = constants.Z_SYNC_FLUSH;\n        var Z_FULL_FLUSH$1 = constants.Z_FULL_FLUSH;\n        var Z_FINISH$1 = constants.Z_FINISH;\n        var Z_OK$1 = constants.Z_OK;\n        var Z_STREAM_END$1 = constants.Z_STREAM_END;\n        var Z_DEFAULT_COMPRESSION$1 = constants.Z_DEFAULT_COMPRESSION;\n        var Z_DEFAULT_STRATEGY$1 = constants.Z_DEFAULT_STRATEGY;\n        var Z_DEFLATED$1 = constants.Z_DEFLATED;\n        /* =========================================================================== */\n        /**\n         * class Deflate\n         *\n         * Generic JS-style wrapper for zlib calls. If you don't need\n         * streaming behaviour - use more simple functions: [[deflate]],\n         * [[deflateRaw]] and [[gzip]].\n         * */\n        /* internal\n         * Deflate.chunks -> Array\n         *\n         * Chunks of output data, if [[Deflate#onData]] not overridden.\n         * */\n        /**\n         * Deflate.result -> Uint8Array\n         *\n         * Compressed result, generated by default [[Deflate#onData]]\n         * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n         * (call [[Deflate#push]] with `Z_FINISH` / `true` param).\n         * */\n        /**\n         * Deflate.err -> Number\n         *\n         * Error code after deflate finished. 0 (Z_OK) on success.\n         * You will not need it in real life, because deflate errors\n         * are possible only on wrong options or bad `onData` / `onEnd`\n         * custom handlers.\n         * */\n        /**\n         * Deflate.msg -> String\n         *\n         * Error message, if [[Deflate.err]] != 0\n         * */\n        /**\n         * new Deflate(options)\n         * - options (Object): zlib deflate options.\n         *\n         * Creates new deflator instance with specified params. Throws exception\n         * on bad params. Supported options:\n         *\n         * - `level`\n         * - `windowBits`\n         * - `memLevel`\n         * - `strategy`\n         * - `dictionary`\n         *\n         * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n         * for more information on these.\n         *\n         * Additional options, for internal needs:\n         *\n         * * `chunkSize` - size of generated data chunks (16K by default)\n         * * `raw` (Boolean) - do raw deflate\n         * * `gzip` (Boolean) - create gzip wrapper\n         * * `header` (Object) - custom header for gzip\n         * ** `text` (Boolean) - true if compressed data believed to be text\n         * ** `time` (Number) - modification time, unix timestamp\n         * ** `os` (Number) - operation system code\n         * ** `extra` (Array) - array of bytes with extra data (max 65536)\n         * ** `name` (String) - file name (binary string)\n         * ** `comment` (String) - comment (binary string)\n         * ** `hcrc` (Boolean) - true if header crc should be added\n         *\n         * ##### Example:\n         *\n         * ```javascript\n         * const pako = require('pako')\n         *   , chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n         *   , chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n         *\n         * const deflate = new pako.Deflate({ level: 3});\n         *\n         * deflate.push(chunk1, false);\n         * deflate.push(chunk2, true);  // true -> last chunk\n         *\n         * if (deflate.err) { throw new Error(deflate.err); }\n         *\n         * console.log(deflate.result);\n         * ```\n         * */\n        function Deflate() {\n            this.options = {\n                level: Z_DEFAULT_COMPRESSION$1,\n                method: Z_DEFLATED$1,\n                chunkSize: 16384,\n                windowBits: 15,\n                memLevel: 8,\n                strategy: Z_DEFAULT_STRATEGY$1,\n            };\n            var opt = this.options;\n            if (opt.raw && opt.windowBits > 0) {\n                opt.windowBits = -opt.windowBits;\n            }\n            else if (opt.gzip && opt.windowBits > 0 && opt.windowBits < 16) {\n                opt.windowBits += 16;\n            }\n            this.err = 0; // error code, if happens (0 = Z_OK)\n            this.msg = ''; // error message\n            this.ended = false; // used to avoid multiple onEnd() calls\n            this.chunks = []; // chunks of compressed data\n            this.strm = new zstream();\n            this.strm.avail_out = 0;\n            var status = deflate_1.deflateInit2(this.strm, opt.level, opt.method, opt.windowBits, opt.memLevel, opt.strategy);\n            if (status !== Z_OK$1) {\n                throw new Error(messages[status]);\n            }\n            if (opt.header) {\n                deflate_1.deflateSetHeader(this.strm, opt.header);\n            }\n            if (opt.dictionary) {\n                var dict; // Convert data if needed\n                if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n                    dict = new Uint8Array(opt.dictionary);\n                }\n                else {\n                    dict = opt.dictionary;\n                }\n                status = deflate_1.deflateSetDictionary(this.strm, dict);\n                if (status !== Z_OK$1) {\n                    throw new Error(messages[status]);\n                }\n                this._dict_set = true;\n            }\n        }\n        /**\n         * Deflate#push(data[, flush_mode]) -> Boolean\n         * - data (Uint8Array|ArrayBuffer|String): input data. Strings will be\n         * converted to utf8 byte sequence.\n         * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n         * See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n         *\n         * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n         * new compressed chunks. Returns `true` on success. The last data block must\n         * have `flush_mode` Z_FINISH (or `true`). That will flush internal pending\n         * buffers and call [[Deflate#onEnd]].\n         *\n         * On fail call [[Deflate#onEnd]] with error code and return false.\n         *\n         * ##### Example\n         *\n         * ```javascript\n         * push(chunk, false); // push one of data chunks\n         * ...\n         * push(chunk, true);  // push last chunk\n         * ```\n         * */\n        Deflate.prototype.push = function (data, flush_mode) {\n            var strm = this.strm;\n            var chunkSize = this.options.chunkSize;\n            var status;\n            var _flush_mode;\n            if (this.ended) {\n                return false;\n            }\n            if (flush_mode === ~~flush_mode) {\n                _flush_mode = flush_mode;\n            }\n            else {\n                _flush_mode = flush_mode === true ? Z_FINISH$1 : Z_NO_FLUSH$1;\n            } // Convert data if needed\n            if (toString.call(data) === '[object ArrayBuffer]') {\n                strm.input = new Uint8Array(data);\n            }\n            else {\n                strm.input = data;\n            }\n            strm.next_in = 0;\n            strm.avail_in = strm.input.length;\n            for (;;) {\n                if (strm.avail_out === 0) {\n                    strm.output = new Uint8Array(chunkSize);\n                    strm.next_out = 0;\n                    strm.avail_out = chunkSize;\n                } // Make sure avail_out > 6 to avoid repeating markers\n                if ((_flush_mode === Z_SYNC_FLUSH || _flush_mode === Z_FULL_FLUSH$1) && strm.avail_out <= 6) {\n                    this.onData(strm.output.subarray(0, strm.next_out));\n                    strm.avail_out = 0;\n                    continue;\n                }\n                status = deflate_1.deflate(strm, _flush_mode); // Ended => flush and finish\n                if (status === Z_STREAM_END$1) {\n                    if (strm.next_out > 0) {\n                        this.onData(strm.output.subarray(0, strm.next_out));\n                    }\n                    status = deflate_1.deflateEnd(this.strm);\n                    this.onEnd(status);\n                    this.ended = true;\n                    return status === Z_OK$1;\n                } // Flush if out buffer full\n                if (strm.avail_out === 0) {\n                    this.onData(strm.output);\n                    continue;\n                } // Flush if requested and has data\n                if (_flush_mode > 0 && strm.next_out > 0) {\n                    this.onData(strm.output.subarray(0, strm.next_out));\n                    strm.avail_out = 0;\n                    continue;\n                }\n                if (strm.avail_in === 0) {\n                    break;\n                }\n            }\n            return true;\n        };\n        /**\n         * Deflate#onData(chunk) -> Void\n         * - chunk (Uint8Array): output data.\n         *\n         * By default, stores data blocks in `chunks[]` property and glue\n         * those in `onEnd`. Override this handler, if you need another behaviour.\n         * */\n        Deflate.prototype.onData = function (chunk) {\n            this.chunks.push(chunk);\n        };\n        /**\n         * Deflate#onEnd(status) -> Void\n         * - status (Number): deflate status. 0 (Z_OK) on success,\n         * other if not.\n         *\n         * Called once after you tell deflate that the input stream is\n         * complete (Z_FINISH). By default - join collected chunks,\n         * free memory and fill `results` / `err` properties.\n         * */\n        Deflate.prototype.onEnd = function (status) {\n            // On success - join\n            if (status === Z_OK$1) {\n                this.result = flattenChunks(this.chunks);\n            }\n            this.chunks = [];\n            this.err = status;\n            this.msg = this.strm.msg;\n        };\n        // https://github.com/nodeca/pako/blob/26dff4fb3472c5532b3bd8856421146d35ab7592/lib/utils/strings.js#L26\n        function string2buf(str) {\n            if (typeof TextEncoder === 'function' && TextEncoder.prototype.encode) {\n                return new TextEncoder().encode(str);\n            }\n            var buf;\n            var c;\n            var c2;\n            var m_pos;\n            var i;\n            var str_len = str.length;\n            var buf_len = 0;\n            // count binary size\n            for (m_pos = 0; m_pos < str_len; m_pos++) {\n                c = str.charCodeAt(m_pos);\n                if ((c & 0xfc00) === 0xd800 && m_pos + 1 < str_len) {\n                    c2 = str.charCodeAt(m_pos + 1);\n                    if ((c2 & 0xfc00) === 0xdc00) {\n                        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n                        m_pos++;\n                    }\n                }\n                buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n            }\n            // allocate buffer\n            buf = new Uint8Array(buf_len);\n            // convert\n            for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n                c = str.charCodeAt(m_pos);\n                if ((c & 0xfc00) === 0xd800 && m_pos + 1 < str_len) {\n                    c2 = str.charCodeAt(m_pos + 1);\n                    if ((c2 & 0xfc00) === 0xdc00) {\n                        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n                        m_pos++;\n                    }\n                }\n                if (c < 0x80) {\n                    /* one byte */\n                    buf[i++] = c;\n                }\n                else if (c < 0x800) {\n                    /* two bytes */\n                    buf[i++] = 0xc0 | (c >>> 6);\n                    buf[i++] = 0x80 | (c & 0x3f);\n                }\n                else if (c < 0x10000) {\n                    /* three bytes */\n                    buf[i++] = 0xe0 | (c >>> 12);\n                    buf[i++] = 0x80 | ((c >>> 6) & 0x3f);\n                    buf[i++] = 0x80 | (c & 0x3f);\n                }\n                else {\n                    /* four bytes */\n                    buf[i++] = 0xf0 | (c >>> 18);\n                    buf[i++] = 0x80 | ((c >>> 12) & 0x3f);\n                    buf[i++] = 0x80 | ((c >>> 6) & 0x3f);\n                    buf[i++] = 0x80 | (c & 0x3f);\n                }\n            }\n            return buf;\n        }\n        return { Deflate: Deflate, constants: constants, string2buf: string2buf };\n    }\n}\n","import { isPageExitReason, ONE_SECOND, clearTimeout, setTimeout } from '@datadog/browser-core';\nimport { buildReplayPayload } from './buildReplayPayload';\nimport { Segment } from './segment';\nexport var SEGMENT_DURATION_LIMIT = 30 * ONE_SECOND;\n/**\n * beacon payload max queue size implementation is 64kb\n * ensure that we leave room for logs, rum and potential other users\n */\nexport var SEGMENT_BYTES_LIMIT = 60000;\n// Segments are the main data structure for session replays. They contain context information used\n// for indexing or UI needs, and a list of records (RRWeb 'events', renamed to avoid confusing\n// namings). They are stored without any processing from the intake, and fetched one after the\n// other while a session is being replayed. Their encoding (deflate) are carefully crafted to allow\n// concatenating multiple segments together. Segments have a size overhead (metadata), so our goal is to\n// build segments containing as many records as possible while complying with the various flush\n// strategies to guarantee a good replay quality.\n//\n// When the recording starts, a segment is initially created.  The segment is flushed (finalized and\n// sent) based on various events (non-exhaustive list):\n//\n// * the page visibility change or becomes to unload\n// * the segment duration reaches a limit\n// * the encoded segment bytes count reaches a limit\n// * ...\n//\n// A segment cannot be created without its context.  If the RUM session ends and no session id is\n// available when creating a new segment, records will be ignored, until the session is renewed and\n// a new session id is available.\n//\n// Empty segments (segments with no record) aren't useful and should be ignored.\n//\n// To help investigate session replays issues, each segment is created with a \"creation reason\",\n// indicating why the session has been created.\nexport function startSegmentCollection(lifeCycle, applicationId, sessionManager, viewContexts, httpRequest, worker) {\n    return doStartSegmentCollection(lifeCycle, function () { return computeSegmentContext(applicationId, sessionManager, viewContexts); }, httpRequest, worker);\n}\nexport function doStartSegmentCollection(lifeCycle, getSegmentContext, httpRequest, worker) {\n    var state = {\n        status: 0 /* SegmentCollectionStatus.WaitingForInitialRecord */,\n        nextSegmentCreationReason: 'init',\n    };\n    var unsubscribeViewCreated = lifeCycle.subscribe(2 /* LifeCycleEventType.VIEW_CREATED */, function () {\n        flushSegment('view_change');\n    }).unsubscribe;\n    var unsubscribePageExited = lifeCycle.subscribe(9 /* LifeCycleEventType.PAGE_EXITED */, function (pageExitEvent) {\n        flushSegment(pageExitEvent.reason);\n    }).unsubscribe;\n    function flushSegment(flushReason) {\n        if (state.status === 1 /* SegmentCollectionStatus.SegmentPending */) {\n            state.segment.flush(flushReason);\n            clearTimeout(state.expirationTimeoutId);\n        }\n        if (flushReason !== 'stop') {\n            state = {\n                status: 0 /* SegmentCollectionStatus.WaitingForInitialRecord */,\n                nextSegmentCreationReason: flushReason,\n            };\n        }\n        else {\n            state = {\n                status: 2 /* SegmentCollectionStatus.Stopped */,\n            };\n        }\n    }\n    function createNewSegment(creationReason, initialRecord) {\n        var context = getSegmentContext();\n        if (!context) {\n            return;\n        }\n        var segment = new Segment(worker, context, creationReason, initialRecord, function (compressedSegmentBytesCount) {\n            if (!segment.flushReason && compressedSegmentBytesCount > SEGMENT_BYTES_LIMIT) {\n                flushSegment('segment_bytes_limit');\n            }\n        }, function (data, rawSegmentBytesCount) {\n            var payload = buildReplayPayload(data, segment.metadata, rawSegmentBytesCount);\n            if (isPageExitReason(segment.flushReason)) {\n                httpRequest.sendOnExit(payload);\n            }\n            else {\n                httpRequest.send(payload);\n            }\n        });\n        state = {\n            status: 1 /* SegmentCollectionStatus.SegmentPending */,\n            segment: segment,\n            expirationTimeoutId: setTimeout(function () {\n                flushSegment('segment_duration_limit');\n            }, SEGMENT_DURATION_LIMIT),\n        };\n    }\n    return {\n        addRecord: function (record) {\n            switch (state.status) {\n                case 0 /* SegmentCollectionStatus.WaitingForInitialRecord */:\n                    createNewSegment(state.nextSegmentCreationReason, record);\n                    break;\n                case 1 /* SegmentCollectionStatus.SegmentPending */:\n                    state.segment.addRecord(record);\n                    break;\n            }\n        },\n        stop: function () {\n            flushSegment('stop');\n            unsubscribeViewCreated();\n            unsubscribePageExited();\n        },\n    };\n}\nexport function computeSegmentContext(applicationId, sessionManager, viewContexts) {\n    var session = sessionManager.findTrackedSession();\n    var viewContext = viewContexts.findView();\n    if (!session || !viewContext) {\n        return undefined;\n    }\n    return {\n        application: {\n            id: applicationId,\n        },\n        session: {\n            id: session.id,\n        },\n        view: {\n            id: viewContext.id,\n        },\n    };\n}\nexport function setSegmentBytesLimit(newSegmentBytesLimit) {\n    if (newSegmentBytesLimit === void 0) { newSegmentBytesLimit = 60000; }\n    SEGMENT_BYTES_LIMIT = newSegmentBytesLimit;\n}\n","import { addTelemetryError, display, includes, addEventListener } from '@datadog/browser-core';\nimport { createDeflateWorker } from './deflateWorker';\nvar state = { status: 0 /* DeflateWorkerStatus.Nil */ };\nexport function startDeflateWorker(callback, createDeflateWorkerImpl) {\n    if (createDeflateWorkerImpl === void 0) { createDeflateWorkerImpl = createDeflateWorker; }\n    switch (state.status) {\n        case 0 /* DeflateWorkerStatus.Nil */:\n            state = { status: 1 /* DeflateWorkerStatus.Loading */, callbacks: [callback] };\n            doStartDeflateWorker(createDeflateWorkerImpl);\n            break;\n        case 1 /* DeflateWorkerStatus.Loading */:\n            state.callbacks.push(callback);\n            break;\n        case 2 /* DeflateWorkerStatus.Error */:\n            callback();\n            break;\n        case 3 /* DeflateWorkerStatus.Initialized */:\n            callback(state.worker);\n            break;\n    }\n}\nexport function resetDeflateWorkerState() {\n    state = { status: 0 /* DeflateWorkerStatus.Nil */ };\n}\n/**\n * Starts the deflate worker and handle messages and errors\n *\n * The spec allow browsers to handle worker errors differently:\n * - Chromium throws an exception\n * - Firefox fires an error event\n *\n * more details: https://bugzilla.mozilla.org/show_bug.cgi?id=1736865#c2\n */\nexport function doStartDeflateWorker(createDeflateWorkerImpl) {\n    if (createDeflateWorkerImpl === void 0) { createDeflateWorkerImpl = createDeflateWorker; }\n    try {\n        var worker_1 = createDeflateWorkerImpl();\n        addEventListener(worker_1, 'error', onError);\n        addEventListener(worker_1, 'message', function (_a) {\n            var data = _a.data;\n            if (data.type === 'errored') {\n                onError(data.error);\n            }\n            else if (data.type === 'initialized') {\n                onInitialized(worker_1);\n            }\n        });\n        worker_1.postMessage({ action: 'init' });\n        return worker_1;\n    }\n    catch (error) {\n        onError(error);\n    }\n}\nfunction onInitialized(worker) {\n    if (state.status === 1 /* DeflateWorkerStatus.Loading */) {\n        state.callbacks.forEach(function (callback) { return callback(worker); });\n        state = { status: 3 /* DeflateWorkerStatus.Initialized */, worker: worker };\n    }\n}\nfunction onError(error) {\n    if (state.status === 1 /* DeflateWorkerStatus.Loading */) {\n        display.error('Session Replay recording failed to start: an error occurred while creating the Worker:', error);\n        if (error instanceof Event || (error instanceof Error && isMessageCspRelated(error.message))) {\n            display.error('Please make sure CSP is correctly configured ' +\n                'https://docs.datadoghq.com/real_user_monitoring/faq/content_security_policy');\n        }\n        else {\n            addTelemetryError(error);\n        }\n        state.callbacks.forEach(function (callback) { return callback(); });\n        state = { status: 2 /* DeflateWorkerStatus.Error */ };\n    }\n    else {\n        addTelemetryError(error);\n    }\n}\nfunction isMessageCspRelated(message) {\n    return (includes(message, 'Content Security Policy') ||\n        // Related to `require-trusted-types-for` CSP: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/require-trusted-types-for\n        includes(message, \"requires 'TrustedScriptURL'\"));\n}\n","/**\n * Test for Browser features used while recording\n */\nexport function isBrowserSupported() {\n    return (\n    // Array.from is a bit less supported by browsers than CSSSupportsRule, but has higher chances\n    // to be polyfilled. Test for both to be more confident. We could add more things if we find out\n    // this test is not sufficient.\n    typeof Array.from === 'function' &&\n        typeof CSSSupportsRule === 'function' &&\n        typeof URL.createObjectURL === 'function' &&\n        'forEach' in NodeList.prototype);\n}\n","import { getSessionReplayUrl } from '@datadog/browser-rum-core';\nimport { isBrowserSupported } from '../boot/isBrowserSupported';\nexport function getSessionReplayLink(configuration, sessionManager, viewContexts, isRecordingStarted) {\n    var session = sessionManager.findTrackedSession();\n    var errorType = getErrorType(session, isRecordingStarted);\n    var viewContext = viewContexts.findView();\n    return getSessionReplayUrl(configuration, {\n        viewContext: viewContext,\n        errorType: errorType,\n        session: session,\n    });\n}\nfunction getErrorType(session, isRecordingStarted) {\n    if (!isBrowserSupported()) {\n        return 'browser-not-supported';\n    }\n    if (!session) {\n        // possibilities:\n        // - rum sampled out\n        // - session expired (edge case)\n        return 'rum-not-tracked';\n    }\n    if (!session.sessionReplayAllowed) {\n        // possibilities\n        // - replay sampled out\n        return 'incorrect-session-plan';\n    }\n    if (!isRecordingStarted) {\n        return 'replay-not-started';\n    }\n}\n","import { INTAKE_SITE_STAGING, INTAKE_SITE_US1, INTAKE_SITE_EU1 } from '@datadog/browser-core';\nexport function getSessionReplayUrl(configuration, _a) {\n    var session = _a.session, viewContext = _a.viewContext, errorType = _a.errorType;\n    var sessionId = session ? session.id : 'no-session-id';\n    var parameters = [];\n    if (errorType !== undefined) {\n        parameters.push(\"error-type=\".concat(errorType));\n    }\n    if (viewContext) {\n        parameters.push(\"seed=\".concat(viewContext.id));\n        parameters.push(\"from=\".concat(viewContext.startClocks.timeStamp));\n    }\n    var origin = getDatadogSiteUrl(configuration);\n    var path = \"/rum/replay/sessions/\".concat(sessionId);\n    return \"\".concat(origin).concat(path, \"?\").concat(parameters.join('&'));\n}\nexport function getDatadogSiteUrl(rumConfiguration) {\n    var site = rumConfiguration.site;\n    var subdomain = rumConfiguration.subdomain || getSiteDefaultSubdomain(rumConfiguration);\n    return \"https://\".concat(subdomain ? \"\".concat(subdomain, \".\") : '').concat(site);\n}\nfunction getSiteDefaultSubdomain(configuration) {\n    switch (configuration.site) {\n        case INTAKE_SITE_US1:\n        case INTAKE_SITE_EU1:\n            return 'app';\n        case INTAKE_SITE_STAGING:\n            return 'dd';\n        default:\n            return undefined;\n    }\n}\n","// Keep the following in sync with packages/rum-slim/src/entries/main.ts\nimport { defineGlobal, getGlobalObject } from '@datadog/browser-core';\nimport { makeRumPublicApi, startRum } from '@datadog/browser-rum-core';\nimport { startRecording } from '../boot/startRecording';\nimport { makeRecorderApi } from '../boot/recorderApi';\nexport { DefaultPrivacyLevel } from '@datadog/browser-core';\nvar recorderApi = makeRecorderApi(startRecording);\nexport var datadogRum = makeRumPublicApi(startRum, recorderApi);\ndefineGlobal(getGlobalObject(), 'DD_RUM', datadogRum);\n","import { canUseEventBridge, noop, runOnReadyState } from '@datadog/browser-core';\nimport { getReplayStats } from '../domain/replayStats';\nimport { getSessionReplayLink } from '../domain/getSessionReplayLink';\nimport { startDeflateWorker } from '../domain/segmentCollection';\nimport { isBrowserSupported } from './isBrowserSupported';\nexport function makeRecorderApi(startRecordingImpl, startDeflateWorkerImpl) {\n    if (startDeflateWorkerImpl === void 0) { startDeflateWorkerImpl = startDeflateWorker; }\n    if (canUseEventBridge() || !isBrowserSupported()) {\n        return {\n            start: noop,\n            stop: noop,\n            getReplayStats: function () { return undefined; },\n            onRumStart: noop,\n            isRecording: function () { return false; },\n            getSessionReplayLink: function () { return undefined; },\n        };\n    }\n    var state = {\n        status: 0 /* RecorderStatus.Stopped */,\n    };\n    var startStrategy = function () {\n        state = { status: 1 /* RecorderStatus.IntentToStart */ };\n    };\n    var stopStrategy = function () {\n        state = { status: 0 /* RecorderStatus.Stopped */ };\n    };\n    return {\n        start: function () { return startStrategy(); },\n        stop: function () { return stopStrategy(); },\n        getReplayStats: getReplayStats,\n        getSessionReplayLink: function (configuration, sessionManager, viewContexts) {\n            return getSessionReplayLink(configuration, sessionManager, viewContexts, state.status !== 0 /* RecorderStatus.Stopped */);\n        },\n        onRumStart: function (lifeCycle, configuration, sessionManager, viewContexts) {\n            lifeCycle.subscribe(7 /* LifeCycleEventType.SESSION_EXPIRED */, function () {\n                if (state.status === 2 /* RecorderStatus.Starting */ || state.status === 3 /* RecorderStatus.Started */) {\n                    stopStrategy();\n                    state = { status: 1 /* RecorderStatus.IntentToStart */ };\n                }\n            });\n            lifeCycle.subscribe(8 /* LifeCycleEventType.SESSION_RENEWED */, function () {\n                if (state.status === 1 /* RecorderStatus.IntentToStart */) {\n                    startStrategy();\n                }\n            });\n            startStrategy = function () {\n                var session = sessionManager.findTrackedSession();\n                if (!session || !session.sessionReplayAllowed) {\n                    state = { status: 1 /* RecorderStatus.IntentToStart */ };\n                    return;\n                }\n                if (state.status === 2 /* RecorderStatus.Starting */ || state.status === 3 /* RecorderStatus.Started */) {\n                    return;\n                }\n                state = { status: 2 /* RecorderStatus.Starting */ };\n                runOnReadyState('interactive', function () {\n                    if (state.status !== 2 /* RecorderStatus.Starting */) {\n                        return;\n                    }\n                    startDeflateWorkerImpl(function (worker) {\n                        if (state.status !== 2 /* RecorderStatus.Starting */) {\n                            return;\n                        }\n                        if (!worker) {\n                            state = {\n                                status: 0 /* RecorderStatus.Stopped */,\n                            };\n                            return;\n                        }\n                        var stopRecording = startRecordingImpl(lifeCycle, configuration, sessionManager, viewContexts, worker).stop;\n                        state = {\n                            status: 3 /* RecorderStatus.Started */,\n                            stopRecording: stopRecording,\n                        };\n                    });\n                });\n            };\n            stopStrategy = function () {\n                if (state.status === 0 /* RecorderStatus.Stopped */) {\n                    return;\n                }\n                if (state.status === 3 /* RecorderStatus.Started */) {\n                    state.stopRecording();\n                }\n                state = {\n                    status: 0 /* RecorderStatus.Stopped */,\n                };\n            };\n            if (state.status === 1 /* RecorderStatus.IntentToStart */) {\n                startStrategy();\n            }\n        },\n        isRecording: function () { return state.status === 3 /* RecorderStatus.Started */; },\n    };\n}\n","import { timeStampNow, createHttpRequest } from '@datadog/browser-core';\nimport { record } from '../domain/record';\nimport { startSegmentCollection, SEGMENT_BYTES_LIMIT } from '../domain/segmentCollection';\nimport { RecordType } from '../types';\nexport function startRecording(lifeCycle, configuration, sessionManager, viewContexts, worker, httpRequest) {\n    var reportError = function (error) {\n        lifeCycle.notify(12 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, { error: error });\n    };\n    var replayRequest = httpRequest || createHttpRequest(configuration.sessionReplayEndpointBuilder, SEGMENT_BYTES_LIMIT, reportError);\n    var _a = startSegmentCollection(lifeCycle, configuration.applicationId, sessionManager, viewContexts, replayRequest, worker), addRecord = _a.addRecord, stopSegmentCollection = _a.stop;\n    var _b = record({\n        emit: addRecord,\n        configuration: configuration,\n        lifeCycle: lifeCycle,\n    }), stopRecording = _b.stop, takeSubsequentFullSnapshot = _b.takeSubsequentFullSnapshot, flushMutations = _b.flushMutations;\n    var unsubscribeViewEnded = lifeCycle.subscribe(4 /* LifeCycleEventType.VIEW_ENDED */, function () {\n        flushMutations();\n        addRecord({\n            timestamp: timeStampNow(),\n            type: RecordType.ViewEnd,\n        });\n    }).unsubscribe;\n    var unsubscribeViewCreated = lifeCycle.subscribe(2 /* LifeCycleEventType.VIEW_CREATED */, function (view) {\n        takeSubsequentFullSnapshot(view.startClocks.timeStamp);\n    }).unsubscribe;\n    return {\n        stop: function () {\n            unsubscribeViewEnded();\n            unsubscribeViewCreated();\n            stopRecording();\n            stopSegmentCollection();\n        },\n    };\n}\n","import { ExperimentalFeature, noop, isExperimentalFeatureEnabled, willSyntheticsInjectRum, assign, BoundedBuffer, buildCookieOptions, createContextManager, deepClone, makePublicApi, monitor, clocksNow, timeStampNow, display, callMonitored, createHandlingStack, canUseEventBridge, areCookiesAuthorized, checkUser, sanitizeUser, sanitize, } from '@datadog/browser-core';\nimport { validateAndBuildRumConfiguration } from '../domain/configuration';\nimport { buildCommonContext } from '../domain/contexts/commonContext';\nexport function makeRumPublicApi(startRumImpl, recorderApi, _a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.ignoreInitIfSyntheticsWillInjectRum, ignoreInitIfSyntheticsWillInjectRum = _c === void 0 ? true : _c;\n    var isAlreadyInitialized = false;\n    var globalContextManager = createContextManager(\"global context\" /* CustomerDataType.GlobalContext */);\n    var userContextManager = createContextManager(\"user\" /* CustomerDataType.User */);\n    var getInternalContextStrategy = function () { return undefined; };\n    var getInitConfigurationStrategy = function () { return undefined; };\n    var stopSessionStrategy = noop;\n    var getSessionReplayLinkStrategy = function () { return undefined; };\n    var bufferApiCalls = new BoundedBuffer();\n    var addTimingStrategy = function (name, time) {\n        if (time === void 0) { time = timeStampNow(); }\n        bufferApiCalls.add(function () { return addTimingStrategy(name, time); });\n    };\n    var startViewStrategy = function (options, startClocks) {\n        if (startClocks === void 0) { startClocks = clocksNow(); }\n        bufferApiCalls.add(function () { return startViewStrategy(options, startClocks); });\n    };\n    var addActionStrategy = function (action, commonContext) {\n        if (commonContext === void 0) { commonContext = buildCommonContext(globalContextManager, userContextManager, recorderApi); }\n        bufferApiCalls.add(function () { return addActionStrategy(action, commonContext); });\n    };\n    var addErrorStrategy = function (providedError, commonContext) {\n        if (commonContext === void 0) { commonContext = buildCommonContext(globalContextManager, userContextManager, recorderApi); }\n        bufferApiCalls.add(function () { return addErrorStrategy(providedError, commonContext); });\n    };\n    var addFeatureFlagEvaluationStrategy = function (key, value) {\n        bufferApiCalls.add(function () { return addFeatureFlagEvaluationStrategy(key, value); });\n    };\n    function initRum(initConfiguration) {\n        // This function should be available, regardless of initialization success.\n        getInitConfigurationStrategy = function () { return deepClone(initConfiguration); };\n        // If we are in a Synthetics test configured to automatically inject a RUM instance, we want to\n        // completely discard the customer application RUM instance by ignoring their init() call.  But,\n        // we should not ignore the init() call from the Synthetics-injected RUM instance, so the\n        // internal `ignoreInitIfSyntheticsWillInjectRum` option is here to bypass this condition.\n        if (ignoreInitIfSyntheticsWillInjectRum && willSyntheticsInjectRum()) {\n            return;\n        }\n        if (canUseEventBridge()) {\n            initConfiguration = overrideInitConfigurationForBridge(initConfiguration);\n        }\n        else if (!canHandleSession(initConfiguration)) {\n            return;\n        }\n        if (!canInitRum(initConfiguration)) {\n            return;\n        }\n        var configuration = validateAndBuildRumConfiguration(initConfiguration);\n        if (!configuration) {\n            return;\n        }\n        if (!configuration.trackViewsManually) {\n            doStartRum(initConfiguration, configuration);\n        }\n        else {\n            // drain beforeInitCalls by buffering them until we start RUM\n            // if we get a startView, drain re-buffered calls before continuing to drain beforeInitCalls\n            // in order to ensure that calls are processed in order\n            var beforeInitCalls = bufferApiCalls;\n            bufferApiCalls = new BoundedBuffer();\n            startViewStrategy = function (options) {\n                doStartRum(initConfiguration, configuration, options);\n            };\n            beforeInitCalls.drain();\n        }\n        isAlreadyInitialized = true;\n    }\n    function doStartRum(initConfiguration, configuration, initialViewOptions) {\n        var startRumResults = startRumImpl(initConfiguration, configuration, recorderApi, globalContextManager, userContextManager, initialViewOptions);\n        getSessionReplayLinkStrategy = function () {\n            return recorderApi.getSessionReplayLink(configuration, startRumResults.session, startRumResults.viewContexts);\n        };\n        (startViewStrategy = startRumResults.startView, addActionStrategy = startRumResults.addAction, addErrorStrategy = startRumResults.addError, addTimingStrategy = startRumResults.addTiming, addFeatureFlagEvaluationStrategy = startRumResults.addFeatureFlagEvaluation, getInternalContextStrategy = startRumResults.getInternalContext, stopSessionStrategy = startRumResults.stopSession);\n        bufferApiCalls.drain();\n        recorderApi.onRumStart(startRumResults.lifeCycle, configuration, startRumResults.session, startRumResults.viewContexts);\n    }\n    var startView = monitor(function (options) {\n        var sanitizedOptions = typeof options === 'object' ? options : { name: options };\n        startViewStrategy(sanitizedOptions);\n    });\n    var rumPublicApi = makePublicApi({\n        init: monitor(initRum),\n        /** @deprecated: use setGlobalContextProperty instead */\n        addRumGlobalContext: monitor(globalContextManager.add),\n        setGlobalContextProperty: monitor(globalContextManager.setContextProperty),\n        /** @deprecated: use removeGlobalContextProperty instead */\n        removeRumGlobalContext: monitor(globalContextManager.remove),\n        removeGlobalContextProperty: monitor(globalContextManager.removeContextProperty),\n        /** @deprecated: use getGlobalContext instead */\n        getRumGlobalContext: monitor(globalContextManager.get),\n        getGlobalContext: monitor(globalContextManager.getContext),\n        /** @deprecated: use setGlobalContext instead */\n        setRumGlobalContext: monitor(globalContextManager.set),\n        setGlobalContext: monitor(globalContextManager.setContext),\n        clearGlobalContext: monitor(globalContextManager.clearContext),\n        getInternalContext: monitor(function (startTime) { return getInternalContextStrategy(startTime); }),\n        getInitConfiguration: monitor(function () { return getInitConfigurationStrategy(); }),\n        addAction: monitor(function (name, context) {\n            addActionStrategy({\n                name: isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS) ? sanitize(name) : name,\n                context: (isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS)\n                    ? sanitize(context)\n                    : deepClone(context)),\n                startClocks: clocksNow(),\n                type: \"custom\" /* ActionType.CUSTOM */,\n            });\n        }),\n        addError: function (error, context) {\n            var handlingStack = createHandlingStack();\n            callMonitored(function () {\n                addErrorStrategy({\n                    error: error,\n                    handlingStack: handlingStack,\n                    context: (isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS)\n                        ? sanitize(context)\n                        : deepClone(context)),\n                    startClocks: clocksNow(),\n                });\n            });\n        },\n        addTiming: monitor(function (name, time) {\n            addTimingStrategy(isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS) ? sanitize(name) : name, time);\n        }),\n        setUser: monitor(function (newUser) {\n            if (checkUser(newUser)) {\n                userContextManager.setContext(sanitizeUser(newUser));\n            }\n        }),\n        getUser: monitor(userContextManager.getContext),\n        setUserProperty: monitor(function (key, property) {\n            var _a;\n            var sanitizedProperty = sanitizeUser((_a = {}, _a[key] = property, _a))[key];\n            userContextManager.setContextProperty(key, sanitizedProperty);\n        }),\n        removeUserProperty: monitor(userContextManager.removeContextProperty),\n        /** @deprecated: renamed to clearUser */\n        removeUser: monitor(userContextManager.clearContext),\n        clearUser: monitor(userContextManager.clearContext),\n        startView: startView,\n        stopSession: monitor(function () {\n            stopSessionStrategy();\n        }),\n        startSessionReplayRecording: monitor(recorderApi.start),\n        stopSessionReplayRecording: monitor(recorderApi.stop),\n        /**\n         * This feature is currently in beta. For more information see the full [feature flag tracking guide](https://docs.datadoghq.com/real_user_monitoring/feature_flag_tracking/).\n         */\n        addFeatureFlagEvaluation: monitor(function (key, value) {\n            addFeatureFlagEvaluationStrategy(isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS) ? sanitize(key) : key, isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS) ? sanitize(value) : value);\n        }),\n        getSessionReplayLink: monitor(function () { return getSessionReplayLinkStrategy(); }),\n    });\n    return rumPublicApi;\n    function canHandleSession(initConfiguration) {\n        if (!areCookiesAuthorized(buildCookieOptions(initConfiguration))) {\n            display.warn('Cookies are not authorized, we will not send any data.');\n            return false;\n        }\n        if (isLocalFile()) {\n            display.error('Execution is not allowed in the current context.');\n            return false;\n        }\n        return true;\n    }\n    function canInitRum(initConfiguration) {\n        if (isAlreadyInitialized) {\n            if (!initConfiguration.silentMultipleInit) {\n                display.error('DD_RUM is already initialized.');\n            }\n            return false;\n        }\n        return true;\n    }\n    function overrideInitConfigurationForBridge(initConfiguration) {\n        return assign({}, initConfiguration, {\n            applicationId: '00000000-aaaa-0000-aaaa-000000000000',\n            clientToken: 'empty',\n            sessionSampleRate: 100,\n        });\n    }\n    function isLocalFile() {\n        return window.location.protocol === 'file:';\n    }\n}\n","import { sendToExtension, createPageExitObservable, addTelemetryConfiguration, startTelemetry, canUseEventBridge, getEventBridge, } from '@datadog/browser-core';\nimport { createDOMMutationObservable } from '../browser/domMutationObservable';\nimport { startPerformanceCollection } from '../browser/performanceCollection';\nimport { startRumAssembly } from '../domain/assembly';\nimport { startForegroundContexts } from '../domain/contexts/foregroundContexts';\nimport { startInternalContext } from '../domain/contexts/internalContext';\nimport { LifeCycle } from '../domain/lifeCycle';\nimport { startViewContexts } from '../domain/contexts/viewContexts';\nimport { startRequestCollection } from '../domain/requestCollection';\nimport { startActionCollection } from '../domain/rumEventsCollection/action/actionCollection';\nimport { startErrorCollection } from '../domain/rumEventsCollection/error/errorCollection';\nimport { startLongTaskCollection } from '../domain/rumEventsCollection/longTask/longTaskCollection';\nimport { startResourceCollection } from '../domain/rumEventsCollection/resource/resourceCollection';\nimport { startViewCollection } from '../domain/rumEventsCollection/view/viewCollection';\nimport { startRumSessionManager, startRumSessionManagerStub } from '../domain/rumSessionManager';\nimport { startRumBatch } from '../transport/startRumBatch';\nimport { startRumEventBridge } from '../transport/startRumEventBridge';\nimport { startUrlContexts } from '../domain/contexts/urlContexts';\nimport { createLocationChangeObservable } from '../browser/locationChangeObservable';\nimport { serializeRumConfiguration } from '../domain/configuration';\nimport { startFeatureFlagContexts } from '../domain/contexts/featureFlagContext';\nimport { startCustomerDataTelemetry } from '../domain/startCustomerDataTelemetry';\nimport { startPageStateHistory } from '../domain/contexts/pageStateHistory';\nimport { buildCommonContext } from '../domain/contexts/commonContext';\nexport function startRum(initConfiguration, configuration, recorderApi, globalContextManager, userContextManager, initialViewOptions) {\n    var lifeCycle = new LifeCycle();\n    lifeCycle.subscribe(11 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (event) { return sendToExtension('rum', event); });\n    var telemetry = startRumTelemetry(configuration);\n    telemetry.setContextProvider(function () {\n        var _a, _b;\n        return ({\n            application: {\n                id: configuration.applicationId,\n            },\n            session: {\n                id: (_a = session.findTrackedSession()) === null || _a === void 0 ? void 0 : _a.id,\n            },\n            view: {\n                id: (_b = viewContexts.findView()) === null || _b === void 0 ? void 0 : _b.id,\n            },\n            action: {\n                id: actionContexts.findActionId(),\n            },\n        });\n    });\n    var reportError = function (error) {\n        lifeCycle.notify(12 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, { error: error });\n    };\n    var featureFlagContexts = startFeatureFlagContexts(lifeCycle);\n    if (!canUseEventBridge()) {\n        var pageExitObservable = createPageExitObservable();\n        pageExitObservable.subscribe(function (event) {\n            lifeCycle.notify(9 /* LifeCycleEventType.PAGE_EXITED */, event);\n        });\n        var batch = startRumBatch(configuration, lifeCycle, telemetry.observable, reportError, pageExitObservable);\n        startCustomerDataTelemetry(configuration, telemetry, lifeCycle, globalContextManager, userContextManager, featureFlagContexts, batch.flushObservable);\n    }\n    else {\n        startRumEventBridge(lifeCycle);\n    }\n    var session = !canUseEventBridge() ? startRumSessionManager(configuration, lifeCycle) : startRumSessionManagerStub();\n    var domMutationObservable = createDOMMutationObservable();\n    var locationChangeObservable = createLocationChangeObservable(location);\n    var _a = startRumEventCollection(lifeCycle, configuration, location, session, locationChangeObservable, domMutationObservable, function () { return buildCommonContext(globalContextManager, userContextManager, recorderApi); }, reportError), viewContexts = _a.viewContexts, foregroundContexts = _a.foregroundContexts, urlContexts = _a.urlContexts, actionContexts = _a.actionContexts, addAction = _a.addAction;\n    addTelemetryConfiguration(serializeRumConfiguration(initConfiguration));\n    startLongTaskCollection(lifeCycle, session);\n    var pageStateHistory = startPageStateHistory();\n    startResourceCollection(lifeCycle, configuration, session, pageStateHistory);\n    var _b = startViewCollection(lifeCycle, configuration, location, domMutationObservable, locationChangeObservable, foregroundContexts, featureFlagContexts, recorderApi, initialViewOptions), addTiming = _b.addTiming, startView = _b.startView;\n    var addError = startErrorCollection(lifeCycle, foregroundContexts, featureFlagContexts).addError;\n    startRequestCollection(lifeCycle, configuration, session);\n    startPerformanceCollection(lifeCycle, configuration);\n    var internalContext = startInternalContext(configuration.applicationId, session, viewContexts, actionContexts, urlContexts);\n    return {\n        addAction: addAction,\n        addError: addError,\n        addTiming: addTiming,\n        addFeatureFlagEvaluation: featureFlagContexts.addFeatureFlagEvaluation,\n        startView: startView,\n        lifeCycle: lifeCycle,\n        viewContexts: viewContexts,\n        session: session,\n        stopSession: function () { return session.expire(); },\n        getInternalContext: internalContext.get,\n    };\n}\nfunction startRumTelemetry(configuration) {\n    var telemetry = startTelemetry(\"browser-rum-sdk\" /* TelemetryService.RUM */, configuration);\n    if (canUseEventBridge()) {\n        var bridge_1 = getEventBridge();\n        telemetry.observable.subscribe(function (event) { return bridge_1.send('internal_telemetry', event); });\n    }\n    return telemetry;\n}\nexport function startRumEventCollection(lifeCycle, configuration, location, sessionManager, locationChangeObservable, domMutationObservable, buildCommonContext, reportError) {\n    var viewContexts = startViewContexts(lifeCycle);\n    var urlContexts = startUrlContexts(lifeCycle, locationChangeObservable, location);\n    var foregroundContexts = startForegroundContexts();\n    var _a = startActionCollection(lifeCycle, domMutationObservable, configuration, foregroundContexts), addAction = _a.addAction, actionContexts = _a.actionContexts;\n    startRumAssembly(configuration, lifeCycle, sessionManager, viewContexts, urlContexts, actionContexts, buildCommonContext, reportError);\n    return {\n        viewContexts: viewContexts,\n        foregroundContexts: foregroundContexts,\n        urlContexts: urlContexts,\n        addAction: addAction,\n        actionContexts: actionContexts,\n        stop: function () {\n            viewContexts.stop();\n            foregroundContexts.stop();\n        },\n    };\n}\n","import { getEventBridge } from '@datadog/browser-core';\nexport function startRumEventBridge(lifeCycle) {\n    var bridge = getEventBridge();\n    lifeCycle.subscribe(11 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (serverRumEvent) {\n        bridge.send('rum', serverRumEvent);\n    });\n}\n","import { createFlushController, Batch, combine, createHttpRequest, isTelemetryReplicationAllowed, } from '@datadog/browser-core';\nexport function startRumBatch(configuration, lifeCycle, telemetryEventObservable, reportError, pageExitObservable) {\n    var batch = makeRumBatch(configuration, reportError, pageExitObservable);\n    lifeCycle.subscribe(11 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (serverRumEvent) {\n        if (serverRumEvent.type === \"view\" /* RumEventType.VIEW */) {\n            batch.upsert(serverRumEvent, serverRumEvent.view.id);\n        }\n        else {\n            batch.add(serverRumEvent);\n        }\n    });\n    telemetryEventObservable.subscribe(function (event) { return batch.add(event, isTelemetryReplicationAllowed(configuration)); });\n    return batch;\n}\nfunction makeRumBatch(configuration, reportError, pageExitObservable) {\n    var _a = createRumBatch(configuration.rumEndpointBuilder), primaryBatch = _a.batch, primaryFlushController = _a.flushController;\n    var replicaBatch;\n    var replica = configuration.replica;\n    if (replica !== undefined) {\n        replicaBatch = createRumBatch(replica.rumEndpointBuilder).batch;\n    }\n    function createRumBatch(endpointBuilder) {\n        var flushController = createFlushController({\n            messagesLimit: configuration.batchMessagesLimit,\n            bytesLimit: configuration.batchBytesLimit,\n            durationLimit: configuration.flushTimeout,\n            pageExitObservable: pageExitObservable,\n        });\n        var batch = new Batch(createHttpRequest(endpointBuilder, configuration.batchBytesLimit, reportError), flushController, configuration.messageBytesLimit);\n        return {\n            batch: batch,\n            flushController: flushController,\n        };\n    }\n    function withReplicaApplicationId(message) {\n        return combine(message, { application: { id: replica.applicationId } });\n    }\n    return {\n        flushObservable: primaryFlushController.flushObservable,\n        add: function (message, replicated) {\n            if (replicated === void 0) { replicated = true; }\n            primaryBatch.add(message);\n            if (replicaBatch && replicated) {\n                replicaBatch.add(withReplicaApplicationId(message));\n            }\n        },\n        upsert: function (message, key) {\n            primaryBatch.upsert(message, key);\n            if (replicaBatch) {\n                replicaBatch.upsert(withReplicaApplicationId(message), key);\n            }\n        },\n    };\n}\n","import { addEventListener, instrumentMethodAndCallOriginal, Observable, shallowClone, } from '@datadog/browser-core';\nexport function createLocationChangeObservable(location) {\n    var currentLocation = shallowClone(location);\n    var observable = new Observable(function () {\n        var stopHistoryTracking = trackHistory(onLocationChange).stop;\n        var stopHashTracking = trackHash(onLocationChange).stop;\n        return function () {\n            stopHistoryTracking();\n            stopHashTracking();\n        };\n    });\n    function onLocationChange() {\n        if (currentLocation.href === location.href) {\n            return;\n        }\n        var newLocation = shallowClone(location);\n        observable.notify({\n            newLocation: newLocation,\n            oldLocation: currentLocation,\n        });\n        currentLocation = newLocation;\n    }\n    return observable;\n}\nfunction trackHistory(onHistoryChange) {\n    var stopInstrumentingPushState = instrumentMethodAndCallOriginal(history, 'pushState', {\n        after: onHistoryChange,\n    }).stop;\n    var stopInstrumentingReplaceState = instrumentMethodAndCallOriginal(history, 'replaceState', {\n        after: onHistoryChange,\n    }).stop;\n    var removeListener = addEventListener(window, \"popstate\" /* DOM_EVENT.POP_STATE */, onHistoryChange).stop;\n    return {\n        stop: function () {\n            stopInstrumentingPushState();\n            stopInstrumentingReplaceState();\n            removeListener();\n        },\n    };\n}\nfunction trackHash(onHashChange) {\n    return addEventListener(window, \"hashchange\" /* DOM_EVENT.HASH_CHANGE */, onHashChange);\n}\n","import { toServerDuration, relativeToClocks, generateUUID } from '@datadog/browser-core';\nexport function startLongTaskCollection(lifeCycle, sessionManager) {\n    lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if (entry.entryType !== 'longtask') {\n                break;\n            }\n            var session = sessionManager.findTrackedSession(entry.startTime);\n            if (!session || !session.longTaskAllowed) {\n                break;\n            }\n            var startClocks = relativeToClocks(entry.startTime);\n            var rawRumEvent = {\n                date: startClocks.timeStamp,\n                long_task: {\n                    id: generateUUID(),\n                    duration: toServerDuration(entry.duration),\n                },\n                type: \"long_task\" /* RumEventType.LONG_TASK */,\n                _dd: {\n                    discarded: false,\n                },\n            };\n            lifeCycle.notify(10 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, {\n                rawRumEvent: rawRumEvent,\n                startTime: startClocks.relative,\n                domainContext: { performanceEntry: entry.toJSON() },\n            });\n        }\n    });\n}\n","import { PROVIDED_ERROR_MESSAGE_PREFIX, isEmptyObject, assign, ErrorSource, generateUUID, computeRawError, computeStackTrace, Observable, trackRuntimeError, } from '@datadog/browser-core';\nimport { trackConsoleError } from './trackConsoleError';\nimport { trackReportError } from './trackReportError';\nexport function startErrorCollection(lifeCycle, foregroundContexts, featureFlagContexts) {\n    var errorObservable = new Observable();\n    trackConsoleError(errorObservable);\n    trackRuntimeError(errorObservable);\n    trackReportError(errorObservable);\n    errorObservable.subscribe(function (error) { return lifeCycle.notify(12 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, { error: error }); });\n    return doStartErrorCollection(lifeCycle, foregroundContexts, featureFlagContexts);\n}\nexport function doStartErrorCollection(lifeCycle, foregroundContexts, featureFlagContexts) {\n    lifeCycle.subscribe(12 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, function (_a) {\n        var error = _a.error, customerContext = _a.customerContext, savedCommonContext = _a.savedCommonContext;\n        lifeCycle.notify(10 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, assign({\n            customerContext: customerContext,\n            savedCommonContext: savedCommonContext,\n        }, processError(error, foregroundContexts, featureFlagContexts)));\n    });\n    return {\n        addError: function (_a, savedCommonContext) {\n            var error = _a.error, handlingStack = _a.handlingStack, startClocks = _a.startClocks, customerContext = _a.context;\n            var stackTrace = error instanceof Error ? computeStackTrace(error) : undefined;\n            var rawError = computeRawError({\n                stackTrace: stackTrace,\n                originalError: error,\n                handlingStack: handlingStack,\n                startClocks: startClocks,\n                nonErrorPrefix: PROVIDED_ERROR_MESSAGE_PREFIX,\n                source: ErrorSource.CUSTOM,\n                handling: \"handled\" /* ErrorHandling.HANDLED */,\n            });\n            lifeCycle.notify(12 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, {\n                customerContext: customerContext,\n                savedCommonContext: savedCommonContext,\n                error: rawError,\n            });\n        },\n    };\n}\nfunction processError(error, foregroundContexts, featureFlagContexts) {\n    var rawRumEvent = {\n        date: error.startClocks.timeStamp,\n        error: {\n            id: generateUUID(),\n            message: error.message,\n            source: error.source,\n            stack: error.stack,\n            handling_stack: error.handlingStack,\n            type: error.type,\n            handling: error.handling,\n            causes: error.causes,\n            source_type: 'browser',\n        },\n        type: \"error\" /* RumEventType.ERROR */,\n    };\n    var inForeground = foregroundContexts.isInForegroundAt(error.startClocks.relative);\n    if (inForeground) {\n        rawRumEvent.view = { in_foreground: inForeground };\n    }\n    var featureFlagContext = featureFlagContexts.findFeatureFlagEvaluations(error.startClocks.relative);\n    if (featureFlagContext && !isEmptyObject(featureFlagContext)) {\n        rawRumEvent.feature_flags = featureFlagContext;\n    }\n    return {\n        rawRumEvent: rawRumEvent,\n        startTime: error.startClocks.relative,\n        domainContext: {\n            error: error.originalError,\n        },\n    };\n}\n","import { clocksNow, initConsoleObservable, ErrorSource, ConsoleApiName } from '@datadog/browser-core';\nexport function trackConsoleError(errorObservable) {\n    var subscription = initConsoleObservable([ConsoleApiName.error]).subscribe(function (consoleError) {\n        return errorObservable.notify({\n            startClocks: clocksNow(),\n            message: consoleError.message,\n            stack: consoleError.stack,\n            source: ErrorSource.CONSOLE,\n            handling: \"handled\" /* ErrorHandling.HANDLED */,\n            handlingStack: consoleError.handlingStack,\n        });\n    });\n    return {\n        stop: function () {\n            subscription.unsubscribe();\n        },\n    };\n}\n","import { clocksNow, ErrorSource, initReportObservable, RawReportType } from '@datadog/browser-core';\nexport function trackReportError(errorObservable) {\n    var subscription = initReportObservable([RawReportType.cspViolation, RawReportType.intervention]).subscribe(function (reportError) {\n        return errorObservable.notify({\n            startClocks: clocksNow(),\n            message: reportError.message,\n            stack: reportError.stack,\n            type: reportError.subtype,\n            source: ErrorSource.REPORT,\n            handling: \"unhandled\" /* ErrorHandling.UNHANDLED */,\n        });\n    });\n    return {\n        stop: function () {\n            subscription.unsubscribe();\n        },\n    };\n}\n","/**\n * Internal context keep returning v1 format\n * to not break compatibility with logs data format\n */\nexport function startInternalContext(applicationId, sessionManager, viewContexts, actionContexts, urlContexts) {\n    return {\n        get: function (startTime) {\n            var viewContext = viewContexts.findView(startTime);\n            var urlContext = urlContexts.findUrl(startTime);\n            var session = sessionManager.findTrackedSession(startTime);\n            if (session && viewContext && urlContext) {\n                var actionId = actionContexts.findActionId(startTime);\n                return {\n                    application_id: applicationId,\n                    session_id: session.id,\n                    user_action: actionId ? { id: actionId } : undefined,\n                    view: { id: viewContext.id, name: viewContext.name, referrer: urlContext.referrer, url: urlContext.url },\n                };\n            }\n        },\n    };\n}\n","import { serializeConfiguration, assign, ONE_KIBI_BYTE, validateAndBuildConfiguration, display, removeDuplicates, ConsoleApiName, RawReportType, includes, objectValues, } from '@datadog/browser-core';\n/**\n * arbitrary value, byte precision not needed\n */\nexport var DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT = 32 * ONE_KIBI_BYTE;\nexport function validateAndBuildLogsConfiguration(initConfiguration) {\n    var baseConfiguration = validateAndBuildConfiguration(initConfiguration);\n    var forwardConsoleLogs = validateAndBuildForwardOption(initConfiguration.forwardConsoleLogs, objectValues(ConsoleApiName), 'Forward Console Logs');\n    var forwardReports = validateAndBuildForwardOption(initConfiguration.forwardReports, objectValues(RawReportType), 'Forward Reports');\n    if (!baseConfiguration || !forwardConsoleLogs || !forwardReports) {\n        return;\n    }\n    if (initConfiguration.forwardErrorsToLogs && !includes(forwardConsoleLogs, ConsoleApiName.error)) {\n        forwardConsoleLogs.push(ConsoleApiName.error);\n    }\n    return assign({\n        forwardErrorsToLogs: initConfiguration.forwardErrorsToLogs !== false,\n        forwardConsoleLogs: forwardConsoleLogs,\n        forwardReports: forwardReports,\n        requestErrorResponseLengthLimit: DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT,\n    }, baseConfiguration);\n}\nexport function validateAndBuildForwardOption(option, allowedValues, label) {\n    if (option === undefined) {\n        return [];\n    }\n    if (!(option === 'all' || (Array.isArray(option) && option.every(function (api) { return includes(allowedValues, api); })))) {\n        display.error(\"\".concat(label, \" should be \\\"all\\\" or an array with allowed values \\\"\").concat(allowedValues.join('\", \"'), \"\\\"\"));\n        return;\n    }\n    return option === 'all' ? allowedValues : removeDuplicates(option);\n}\nexport function serializeLogsConfiguration(configuration) {\n    var baseSerializedInitConfiguration = serializeConfiguration(configuration);\n    return assign({\n        forward_errors_to_logs: configuration.forwardErrorsToLogs,\n        forward_console_logs: configuration.forwardConsoleLogs,\n        forward_reports: configuration.forwardReports,\n    }, baseSerializedInitConfiguration);\n}\n","import { arrayFrom } from './polyfills';\nexport function removeDuplicates(array) {\n    var set = new Set();\n    array.forEach(function (item) { return set.add(item); });\n    return arrayFrom(set);\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ExperimentalFeature, isExperimentalFeatureEnabled, clocksNow, computeRawError, PROVIDED_ERROR_MESSAGE_PREFIX, computeStackTrace, deepClone, assign, combine, createContextManager, ErrorSource, monitored, sanitize, } from '@datadog/browser-core';\nexport var StatusType = {\n    debug: 'debug',\n    error: 'error',\n    info: 'info',\n    warn: 'warn',\n};\nexport var HandlerType = {\n    console: 'console',\n    http: 'http',\n    silent: 'silent',\n};\nexport var STATUSES = Object.keys(StatusType);\nvar Logger = /** @class */ (function () {\n    function Logger(handleLogStrategy, name, handlerType, level, loggerContext) {\n        if (handlerType === void 0) { handlerType = HandlerType.http; }\n        if (level === void 0) { level = StatusType.debug; }\n        if (loggerContext === void 0) { loggerContext = {}; }\n        this.handleLogStrategy = handleLogStrategy;\n        this.handlerType = handlerType;\n        this.level = level;\n        this.contextManager = createContextManager(\"logger context\" /* CustomerDataType.LoggerContext */);\n        this.contextManager.set(assign({}, loggerContext, name ? { logger: { name: name } } : undefined));\n    }\n    Logger.prototype.log = function (message, messageContext, status, error) {\n        if (status === void 0) { status = StatusType.info; }\n        var errorContext;\n        if (status === StatusType.error) {\n            // Always add origin if status is error (backward compatibility - Remove in next major)\n            errorContext = { origin: ErrorSource.LOGGER };\n        }\n        if (error !== undefined && error !== null) {\n            var stackTrace = error instanceof Error ? computeStackTrace(error) : undefined;\n            var rawError = computeRawError({\n                stackTrace: stackTrace,\n                originalError: error,\n                nonErrorPrefix: PROVIDED_ERROR_MESSAGE_PREFIX,\n                source: ErrorSource.LOGGER,\n                handling: \"handled\" /* ErrorHandling.HANDLED */,\n                startClocks: clocksNow(),\n            });\n            errorContext = {\n                origin: ErrorSource.LOGGER,\n                stack: rawError.stack,\n                kind: rawError.type,\n                message: rawError.message,\n            };\n        }\n        var sanitizedMessageContext = (isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS)\n            ? sanitize(messageContext)\n            : deepClone(messageContext));\n        var context = errorContext\n            ? combine({ error: errorContext }, sanitizedMessageContext)\n            : sanitizedMessageContext;\n        this.handleLogStrategy({\n            message: isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS) ? sanitize(message) : message,\n            context: context,\n            status: status,\n        }, this);\n    };\n    Logger.prototype.debug = function (message, messageContext, error) {\n        this.log(message, messageContext, StatusType.debug, error);\n    };\n    Logger.prototype.info = function (message, messageContext, error) {\n        this.log(message, messageContext, StatusType.info, error);\n    };\n    Logger.prototype.warn = function (message, messageContext, error) {\n        this.log(message, messageContext, StatusType.warn, error);\n    };\n    Logger.prototype.error = function (message, messageContext, error) {\n        this.log(message, messageContext, StatusType.error, error);\n    };\n    Logger.prototype.setContext = function (context) {\n        this.contextManager.set(context);\n    };\n    Logger.prototype.getContext = function () {\n        return this.contextManager.get();\n    };\n    Logger.prototype.addContext = function (key, value) {\n        this.contextManager.add(key, value);\n    };\n    Logger.prototype.removeContext = function (key) {\n        this.contextManager.remove(key);\n    };\n    Logger.prototype.setHandler = function (handler) {\n        this.handlerType = handler;\n    };\n    Logger.prototype.getHandler = function () {\n        return this.handlerType;\n    };\n    Logger.prototype.setLevel = function (level) {\n        this.level = level;\n    };\n    Logger.prototype.getLevel = function () {\n        return this.level;\n    };\n    __decorate([\n        monitored\n    ], Logger.prototype, \"log\", null);\n    return Logger;\n}());\nexport { Logger };\n","import { Batch } from './batch';\nimport { createHttpRequest } from './httpRequest';\nimport { createFlushController } from './flushController';\nexport function startBatchWithReplica(configuration, endpoint, reportError, pageExitObservable, replicaEndpoint) {\n    var primaryBatch = createBatch(endpoint);\n    var replicaBatch;\n    if (replicaEndpoint) {\n        replicaBatch = createBatch(replicaEndpoint);\n    }\n    function createBatch(endpointBuilder) {\n        return new Batch(createHttpRequest(endpointBuilder, configuration.batchBytesLimit, reportError), createFlushController({\n            messagesLimit: configuration.batchMessagesLimit,\n            bytesLimit: configuration.batchBytesLimit,\n            durationLimit: configuration.flushTimeout,\n            pageExitObservable: pageExitObservable,\n        }), configuration.messageBytesLimit);\n    }\n    return {\n        add: function (message, replicated) {\n            if (replicated === void 0) { replicated = true; }\n            primaryBatch.add(message);\n            if (replicaBatch && replicated) {\n                replicaBatch.add(message);\n            }\n        },\n    };\n}\n","import { performDraw, startSessionManager } from '@datadog/browser-core';\nexport var LOGS_SESSION_KEY = 'logs';\nexport function startLogsSessionManager(configuration) {\n    var sessionManager = startSessionManager(configuration.cookieOptions, LOGS_SESSION_KEY, function (rawTrackingType) {\n        return computeSessionState(configuration, rawTrackingType);\n    });\n    return {\n        findTrackedSession: function (startTime) {\n            var session = sessionManager.findActiveSession(startTime);\n            return session && session.trackingType === \"1\" /* LoggerTrackingType.TRACKED */\n                ? {\n                    id: session.id,\n                }\n                : undefined;\n        },\n    };\n}\nexport function startLogsSessionManagerStub(configuration) {\n    var isTracked = computeTrackingType(configuration) === \"1\" /* LoggerTrackingType.TRACKED */;\n    var session = isTracked ? {} : undefined;\n    return {\n        findTrackedSession: function () { return session; },\n    };\n}\nfunction computeTrackingType(configuration) {\n    if (!performDraw(configuration.sessionSampleRate)) {\n        return \"0\" /* LoggerTrackingType.NOT_TRACKED */;\n    }\n    return \"1\" /* LoggerTrackingType.TRACKED */;\n}\nfunction computeSessionState(configuration, rawSessionType) {\n    var trackingType = hasValidLoggerSession(rawSessionType) ? rawSessionType : computeTrackingType(configuration);\n    return {\n        trackingType: trackingType,\n        isTracked: trackingType === \"1\" /* LoggerTrackingType.TRACKED */,\n    };\n}\nfunction hasValidLoggerSession(trackingType) {\n    return trackingType === \"0\" /* LoggerTrackingType.NOT_TRACKED */ || trackingType === \"1\" /* LoggerTrackingType.TRACKED */;\n}\n","var _a;\nimport { includes, display, combine, ErrorSource, timeStampNow } from '@datadog/browser-core';\nimport { StatusType, HandlerType } from '../../logger';\nexport var STATUS_PRIORITIES = (_a = {},\n    _a[StatusType.debug] = 0,\n    _a[StatusType.info] = 1,\n    _a[StatusType.warn] = 2,\n    _a[StatusType.error] = 3,\n    _a);\nexport function startLoggerCollection(lifeCycle) {\n    function handleLog(logsMessage, logger, savedCommonContext, savedDate) {\n        var messageContext = logsMessage.context;\n        if (isAuthorized(logsMessage.status, HandlerType.console, logger)) {\n            display(logsMessage.status, logsMessage.message, combine(logger.getContext(), messageContext));\n        }\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                date: savedDate || timeStampNow(),\n                message: logsMessage.message,\n                status: logsMessage.status,\n                origin: ErrorSource.LOGGER,\n            },\n            messageContext: messageContext,\n            savedCommonContext: savedCommonContext,\n            logger: logger,\n        });\n    }\n    return {\n        handleLog: handleLog,\n    };\n}\nexport function isAuthorized(status, handlerType, logger) {\n    var loggerHandler = logger.getHandler();\n    var sanitizedHandlerType = Array.isArray(loggerHandler) ? loggerHandler : [loggerHandler];\n    return (STATUS_PRIORITIES[status] >= STATUS_PRIORITIES[logger.getLevel()] && includes(sanitizedHandlerType, handlerType));\n}\n","import { getSyntheticsResultId, getSyntheticsTestId, addTelemetryDebug, willSyntheticsInjectRum, ErrorSource, combine, createEventRateLimiter, getRelativeTime, isEmptyObject, } from '@datadog/browser-core';\nimport { STATUSES, HandlerType } from './logger';\nimport { isAuthorized } from './logsCollection/logger/loggerCollection';\nexport function startLogsAssembly(sessionManager, configuration, lifeCycle, buildCommonContext, mainLogger, // Todo: [RUMF-1230] Remove this parameter in the next major release\nreportError) {\n    var statusWithCustom = STATUSES.concat(['custom']);\n    var logRateLimiters = {};\n    statusWithCustom.forEach(function (status) {\n        logRateLimiters[status] = createEventRateLimiter(status, configuration.eventRateLimiterThreshold, reportError);\n    });\n    lifeCycle.subscribe(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, function (_a) {\n        var _b, _c, _d;\n        var rawLogsEvent = _a.rawLogsEvent, _e = _a.messageContext, messageContext = _e === void 0 ? undefined : _e, _f = _a.savedCommonContext, savedCommonContext = _f === void 0 ? undefined : _f, _g = _a.logger, logger = _g === void 0 ? mainLogger : _g;\n        var startTime = getRelativeTime(rawLogsEvent.date);\n        var session = sessionManager.findTrackedSession(startTime);\n        if (!session) {\n            return;\n        }\n        var commonContext = savedCommonContext || buildCommonContext();\n        var log = combine({\n            service: configuration.service,\n            session_id: session.id,\n            // Insert user first to allow overrides from global context\n            usr: !isEmptyObject(commonContext.user) ? commonContext.user : undefined,\n            view: commonContext.view,\n        }, commonContext.context, getRUMInternalContext(startTime), rawLogsEvent, logger.getContext(), messageContext);\n        if (\n        // Todo: [RUMF-1230] Move this check to the logger collection in the next major release\n        !isAuthorized(rawLogsEvent.status, HandlerType.http, logger) ||\n            ((_b = configuration.beforeSend) === null || _b === void 0 ? void 0 : _b.call(configuration, log)) === false ||\n            (((_c = log.error) === null || _c === void 0 ? void 0 : _c.origin) !== ErrorSource.AGENT &&\n                ((_d = logRateLimiters[log.status]) !== null && _d !== void 0 ? _d : logRateLimiters['custom']).isLimitReached())) {\n            return;\n        }\n        lifeCycle.notify(1 /* LifeCycleEventType.LOG_COLLECTED */, log);\n    });\n}\nvar logsSentBeforeRumInjectionTelemetryAdded = false;\nexport function getRUMInternalContext(startTime) {\n    var browserWindow = window;\n    if (willSyntheticsInjectRum()) {\n        var context = getInternalContextFromRumGlobal(browserWindow.DD_RUM_SYNTHETICS);\n        if (!context && !logsSentBeforeRumInjectionTelemetryAdded) {\n            logsSentBeforeRumInjectionTelemetryAdded = true;\n            addTelemetryDebug('Logs sent before RUM is injected by the synthetics worker', {\n                testId: getSyntheticsTestId(),\n                resultId: getSyntheticsResultId(),\n            });\n        }\n        return context;\n    }\n    return getInternalContextFromRumGlobal(browserWindow.DD_RUM);\n    function getInternalContextFromRumGlobal(rumGlobal) {\n        if (rumGlobal && rumGlobal.getInternalContext) {\n            return rumGlobal.getInternalContext(startTime);\n        }\n    }\n}\nexport function resetRUMInternalContext() {\n    logsSentBeforeRumInjectionTelemetryAdded = false;\n}\n","var _a;\nimport { timeStampNow, ConsoleApiName, ErrorSource, initConsoleObservable } from '@datadog/browser-core';\nimport { StatusType } from '../../logger';\nvar LogStatusForApi = (_a = {},\n    _a[ConsoleApiName.log] = StatusType.info,\n    _a[ConsoleApiName.debug] = StatusType.debug,\n    _a[ConsoleApiName.info] = StatusType.info,\n    _a[ConsoleApiName.warn] = StatusType.warn,\n    _a[ConsoleApiName.error] = StatusType.error,\n    _a);\nexport function startConsoleCollection(configuration, lifeCycle) {\n    var consoleSubscription = initConsoleObservable(configuration.forwardConsoleLogs).subscribe(function (log) {\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                date: timeStampNow(),\n                message: log.message,\n                origin: ErrorSource.CONSOLE,\n                error: log.api === ConsoleApiName.error\n                    ? {\n                        origin: ErrorSource.CONSOLE,\n                        stack: log.stack,\n                    }\n                    : undefined,\n                status: LogStatusForApi[log.api],\n            },\n        });\n    });\n    return {\n        stop: function () {\n            consoleSubscription.unsubscribe();\n        },\n    };\n}\n","var _a;\nimport { timeStampNow, ErrorSource, RawReportType, getFileFromStackTraceString, initReportObservable, } from '@datadog/browser-core';\nimport { StatusType } from '../../logger';\nvar LogStatusForReport = (_a = {},\n    _a[RawReportType.cspViolation] = StatusType.error,\n    _a[RawReportType.intervention] = StatusType.error,\n    _a[RawReportType.deprecation] = StatusType.warn,\n    _a);\nexport function startReportCollection(configuration, lifeCycle) {\n    var reportSubscription = initReportObservable(configuration.forwardReports).subscribe(function (report) {\n        var message = report.message;\n        var status = LogStatusForReport[report.type];\n        var error;\n        if (status === StatusType.error) {\n            error = {\n                kind: report.subtype,\n                origin: ErrorSource.REPORT,\n                stack: report.stack,\n            };\n        }\n        else if (report.stack) {\n            message += \" Found in \".concat(getFileFromStackTraceString(report.stack));\n        }\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                date: timeStampNow(),\n                message: message,\n                origin: ErrorSource.REPORT,\n                error: error,\n                status: status,\n            },\n        });\n    });\n    return {\n        stop: function () {\n            reportSubscription.unsubscribe();\n        },\n    };\n}\n","import { ErrorSource, initXhrObservable, initFetchObservable, computeStackTrace, toStackTraceString, monitor, noop, readBytesFromStream, tryToClone, isServerError, } from '@datadog/browser-core';\nimport { StatusType } from '../../logger';\nexport function startNetworkErrorCollection(configuration, lifeCycle) {\n    if (!configuration.forwardErrorsToLogs) {\n        return { stop: noop };\n    }\n    var xhrSubscription = initXhrObservable().subscribe(function (context) {\n        if (context.state === 'complete') {\n            handleResponse(\"xhr\" /* RequestType.XHR */, context);\n        }\n    });\n    var fetchSubscription = initFetchObservable().subscribe(function (context) {\n        if (context.state === 'resolve') {\n            handleResponse(\"fetch\" /* RequestType.FETCH */, context);\n        }\n    });\n    function handleResponse(type, request) {\n        if (!configuration.isIntakeUrl(request.url) && (isRejected(request) || isServerError(request.status))) {\n            if ('xhr' in request) {\n                computeXhrResponseData(request.xhr, configuration, onResponseDataAvailable);\n            }\n            else if (request.response) {\n                computeFetchResponseText(request.response, configuration, onResponseDataAvailable);\n            }\n            else if (request.error) {\n                computeFetchErrorText(request.error, configuration, onResponseDataAvailable);\n            }\n        }\n        function onResponseDataAvailable(responseData) {\n            lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n                rawLogsEvent: {\n                    message: \"\".concat(format(type), \" error \").concat(request.method, \" \").concat(request.url),\n                    date: request.startClocks.timeStamp,\n                    error: {\n                        origin: ErrorSource.NETWORK,\n                        stack: responseData || 'Failed to load',\n                    },\n                    http: {\n                        method: request.method,\n                        status_code: request.status,\n                        url: request.url,\n                    },\n                    status: StatusType.error,\n                    origin: ErrorSource.NETWORK,\n                },\n            });\n        }\n    }\n    return {\n        stop: function () {\n            xhrSubscription.unsubscribe();\n            fetchSubscription.unsubscribe();\n        },\n    };\n}\n// TODO: ideally, computeXhrResponseData should always call the callback with a string instead of\n// `unknown`. But to keep backward compatibility, in the case of XHR with a `responseType` different\n// than \"text\", the response data should be whatever `xhr.response` is. This is a bit confusing as\n// Logs event 'stack' is expected to be a string. This should be changed in a future major version\n// as it could be a breaking change.\nexport function computeXhrResponseData(xhr, configuration, callback) {\n    if (typeof xhr.response === 'string') {\n        callback(truncateResponseText(xhr.response, configuration));\n    }\n    else {\n        callback(xhr.response);\n    }\n}\nexport function computeFetchErrorText(error, configuration, callback) {\n    callback(truncateResponseText(toStackTraceString(computeStackTrace(error)), configuration));\n}\nexport function computeFetchResponseText(response, configuration, callback) {\n    var clonedResponse = tryToClone(response);\n    if (!clonedResponse || !clonedResponse.body) {\n        // if the clone failed or if the body is null, let's not try to read it.\n        callback();\n    }\n    else if (!window.TextDecoder) {\n        // If the browser doesn't support TextDecoder, let's read the whole response then truncate it.\n        //\n        // This should only be the case on early versions of Edge (before they migrated to Chromium).\n        // Even if it could be possible to implement a workaround for the missing TextDecoder API (using\n        // a Blob and FileReader), we found another issue preventing us from reading only the first\n        // bytes from the response: contrary to other browsers, when reading from the cloned response,\n        // if the original response gets canceled, the cloned response is also canceled and we can't\n        // know about it.  In the following illustration, the promise returned by `reader.read()` may\n        // never be fulfilled:\n        //\n        // fetch('/').then((response) => {\n        //   const reader = response.clone().body.getReader()\n        //   readMore()\n        //   function readMore() {\n        //     reader.read().then(\n        //       (result) => {\n        //         if (result.done) {\n        //           console.log('done')\n        //         } else {\n        //           readMore()\n        //         }\n        //       },\n        //       () => console.log('error')\n        //     )\n        //   }\n        //   response.body.getReader().cancel()\n        // })\n        clonedResponse.text().then(monitor(function (text) { return callback(truncateResponseText(text, configuration)); }), monitor(function (error) { return callback(\"Unable to retrieve response: \".concat(error)); }));\n    }\n    else {\n        truncateResponseStream(clonedResponse.body, configuration.requestErrorResponseLengthLimit, function (error, responseText) {\n            if (error) {\n                callback(\"Unable to retrieve response: \".concat(error));\n            }\n            else {\n                callback(responseText);\n            }\n        });\n    }\n}\nfunction isRejected(request) {\n    return request.status === 0 && request.responseType !== 'opaque';\n}\nfunction truncateResponseText(responseText, configuration) {\n    if (responseText.length > configuration.requestErrorResponseLengthLimit) {\n        return \"\".concat(responseText.substring(0, configuration.requestErrorResponseLengthLimit), \"...\");\n    }\n    return responseText;\n}\nfunction format(type) {\n    if (\"xhr\" /* RequestType.XHR */ === type) {\n        return 'XHR';\n    }\n    return 'Fetch';\n}\nfunction truncateResponseStream(stream, bytesLimit, callback) {\n    readBytesFromStream(stream, function (error, bytes, limitExceeded) {\n        if (error) {\n            callback(error);\n        }\n        else {\n            var responseText = new TextDecoder().decode(bytes);\n            if (limitExceeded) {\n                responseText += '...';\n            }\n            callback(undefined, responseText);\n        }\n    }, {\n        bytesLimit: bytesLimit,\n        collectStreamBody: true,\n    });\n}\n","var LifeCycle = /** @class */ (function () {\n    function LifeCycle() {\n        this.callbacks = {};\n    }\n    LifeCycle.prototype.notify = function (eventType, data) {\n        var eventCallbacks = this.callbacks[eventType];\n        if (eventCallbacks) {\n            eventCallbacks.forEach(function (callback) { return callback(data); });\n        }\n    };\n    LifeCycle.prototype.subscribe = function (eventType, callback) {\n        var _this = this;\n        if (!this.callbacks[eventType]) {\n            this.callbacks[eventType] = [];\n        }\n        this.callbacks[eventType].push(callback);\n        return {\n            unsubscribe: function () {\n                _this.callbacks[eventType] = _this.callbacks[eventType].filter(function (other) { return callback !== other; });\n            },\n        };\n    };\n    return LifeCycle;\n}());\nexport { LifeCycle };\n","import { defineGlobal, getGlobalObject } from '@datadog/browser-core';\nimport { makeLogsPublicApi } from '../boot/logsPublicApi';\nimport { startLogs } from '../boot/startLogs';\nexport { Logger, StatusType, HandlerType } from '../domain/logger';\nexport var datadogLogs = makeLogsPublicApi(startLogs);\ndefineGlobal(getGlobalObject(), 'DD_LOGS', datadogLogs);\n","import { ExperimentalFeature, isExperimentalFeatureEnabled, assign, BoundedBuffer, createContextManager, makePublicApi, monitor, display, deepClone, canUseEventBridge, timeStampNow, checkUser, sanitizeUser, sanitize, } from '@datadog/browser-core';\nimport { validateAndBuildLogsConfiguration } from '../domain/configuration';\nimport { Logger } from '../domain/logger';\nexport function makeLogsPublicApi(startLogsImpl) {\n    var isAlreadyInitialized = false;\n    var globalContextManager = createContextManager(\"global context\" /* CustomerDataType.GlobalContext */);\n    var userContextManager = createContextManager(\"user\" /* CustomerDataType.User */);\n    var customLoggers = {};\n    var getInternalContextStrategy = function () { return undefined; };\n    var beforeInitLoggerLog = new BoundedBuffer();\n    var handleLogStrategy = function (logsMessage, logger, savedCommonContext, date) {\n        if (savedCommonContext === void 0) { savedCommonContext = deepClone(buildCommonContext()); }\n        if (date === void 0) { date = timeStampNow(); }\n        beforeInitLoggerLog.add(function () { return handleLogStrategy(logsMessage, logger, savedCommonContext, date); });\n    };\n    var getInitConfigurationStrategy = function () { return undefined; };\n    var mainLogger = new Logger(function () {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        return handleLogStrategy.apply(void 0, params);\n    });\n    function buildCommonContext() {\n        return {\n            view: {\n                referrer: document.referrer,\n                url: window.location.href,\n            },\n            context: globalContextManager.getContext(),\n            user: userContextManager.getContext(),\n        };\n    }\n    return makePublicApi({\n        logger: mainLogger,\n        init: monitor(function (initConfiguration) {\n            var _a;\n            // This function should be available, regardless of initialization success.\n            getInitConfigurationStrategy = function () { return deepClone(initConfiguration); };\n            if (canUseEventBridge()) {\n                initConfiguration = overrideInitConfigurationForBridge(initConfiguration);\n            }\n            if (!canInitLogs(initConfiguration)) {\n                return;\n            }\n            var configuration = validateAndBuildLogsConfiguration(initConfiguration);\n            if (!configuration) {\n                return;\n            }\n            ;\n            (_a = startLogsImpl(initConfiguration, configuration, buildCommonContext, mainLogger), handleLogStrategy = _a.handleLog, getInternalContextStrategy = _a.getInternalContext);\n            beforeInitLoggerLog.drain();\n            isAlreadyInitialized = true;\n        }),\n        /** @deprecated: use getGlobalContext instead */\n        getLoggerGlobalContext: monitor(globalContextManager.get),\n        getGlobalContext: monitor(globalContextManager.getContext),\n        /** @deprecated: use setGlobalContext instead */\n        setLoggerGlobalContext: monitor(globalContextManager.set),\n        setGlobalContext: monitor(globalContextManager.setContext),\n        /** @deprecated: use setGlobalContextProperty instead */\n        addLoggerGlobalContext: monitor(globalContextManager.add),\n        setGlobalContextProperty: monitor(globalContextManager.setContextProperty),\n        /** @deprecated: use removeGlobalContextProperty instead */\n        removeLoggerGlobalContext: monitor(globalContextManager.remove),\n        removeGlobalContextProperty: monitor(globalContextManager.removeContextProperty),\n        clearGlobalContext: monitor(globalContextManager.clearContext),\n        createLogger: monitor(function (name, conf) {\n            if (conf === void 0) { conf = {}; }\n            customLoggers[name] = new Logger(function () {\n                var params = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    params[_i] = arguments[_i];\n                }\n                return handleLogStrategy.apply(void 0, params);\n            }, isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS) ? sanitize(name) : name, conf.handler, conf.level, isExperimentalFeatureEnabled(ExperimentalFeature.SANITIZE_INPUTS)\n                ? sanitize(conf.context)\n                : conf.context);\n            return customLoggers[name];\n        }),\n        getLogger: monitor(function (name) { return customLoggers[name]; }),\n        getInitConfiguration: monitor(function () { return getInitConfigurationStrategy(); }),\n        getInternalContext: monitor(function (startTime) { return getInternalContextStrategy(startTime); }),\n        setUser: monitor(function (newUser) {\n            if (checkUser(newUser)) {\n                userContextManager.setContext(sanitizeUser(newUser));\n            }\n        }),\n        getUser: monitor(userContextManager.getContext),\n        setUserProperty: monitor(function (key, property) {\n            var _a;\n            var sanitizedProperty = sanitizeUser((_a = {}, _a[key] = property, _a))[key];\n            userContextManager.setContextProperty(key, sanitizedProperty);\n        }),\n        removeUserProperty: monitor(userContextManager.removeContextProperty),\n        clearUser: monitor(userContextManager.clearContext),\n    });\n    function overrideInitConfigurationForBridge(initConfiguration) {\n        return assign({}, initConfiguration, { clientToken: 'empty' });\n    }\n    function canInitLogs(initConfiguration) {\n        if (isAlreadyInitialized) {\n            if (!initConfiguration.silentMultipleInit) {\n                display.error('DD_LOGS is already initialized.');\n            }\n            return false;\n        }\n        return true;\n    }\n}\n","import { sendToExtension, createPageExitObservable, willSyntheticsInjectRum, areCookiesAuthorized, canUseEventBridge, getEventBridge, startTelemetry, startBatchWithReplica, isTelemetryReplicationAllowed, ErrorSource, addTelemetryConfiguration, } from '@datadog/browser-core';\nimport { startLogsSessionManager, startLogsSessionManagerStub } from '../domain/logsSessionManager';\nimport { serializeLogsConfiguration } from '../domain/configuration';\nimport { startLogsAssembly, getRUMInternalContext } from '../domain/assembly';\nimport { startConsoleCollection } from '../domain/logsCollection/console/consoleCollection';\nimport { startReportCollection } from '../domain/logsCollection/report/reportCollection';\nimport { startNetworkErrorCollection } from '../domain/logsCollection/networkError/networkErrorCollection';\nimport { startRuntimeErrorCollection } from '../domain/logsCollection/runtimeError/runtimeErrorCollection';\nimport { LifeCycle } from '../domain/lifeCycle';\nimport { startLoggerCollection } from '../domain/logsCollection/logger/loggerCollection';\nimport { startLogsBatch } from '../transport/startLogsBatch';\nimport { startLogsBridge } from '../transport/startLogsBridge';\nimport { StatusType } from '../domain/logger';\nimport { startInternalContext } from '../domain/internalContext';\nexport function startLogs(initConfiguration, configuration, buildCommonContext, mainLogger) {\n    var lifeCycle = new LifeCycle();\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, function (log) { return sendToExtension('logs', log); });\n    var reportError = function (error) {\n        return lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                message: error.message,\n                date: error.startClocks.timeStamp,\n                error: {\n                    origin: ErrorSource.AGENT, // Todo: Remove in the next major release\n                },\n                origin: ErrorSource.AGENT,\n                status: StatusType.error,\n            },\n        });\n    };\n    var pageExitObservable = createPageExitObservable();\n    var telemetry = startLogsTelemetry(configuration, reportError, pageExitObservable);\n    telemetry.setContextProvider(function () {\n        var _a, _b, _c, _d, _e, _f;\n        return ({\n            application: {\n                id: (_a = getRUMInternalContext()) === null || _a === void 0 ? void 0 : _a.application_id,\n            },\n            session: {\n                id: (_b = session.findTrackedSession()) === null || _b === void 0 ? void 0 : _b.id,\n            },\n            view: {\n                id: (_d = (_c = getRUMInternalContext()) === null || _c === void 0 ? void 0 : _c.view) === null || _d === void 0 ? void 0 : _d.id,\n            },\n            action: {\n                id: (_f = (_e = getRUMInternalContext()) === null || _e === void 0 ? void 0 : _e.user_action) === null || _f === void 0 ? void 0 : _f.id,\n            },\n        });\n    });\n    startNetworkErrorCollection(configuration, lifeCycle);\n    startRuntimeErrorCollection(configuration, lifeCycle);\n    startConsoleCollection(configuration, lifeCycle);\n    startReportCollection(configuration, lifeCycle);\n    var handleLog = startLoggerCollection(lifeCycle).handleLog;\n    var session = areCookiesAuthorized(configuration.cookieOptions) && !canUseEventBridge() && !willSyntheticsInjectRum()\n        ? startLogsSessionManager(configuration)\n        : startLogsSessionManagerStub(configuration);\n    startLogsAssembly(session, configuration, lifeCycle, buildCommonContext, mainLogger, reportError);\n    if (!canUseEventBridge()) {\n        startLogsBatch(configuration, lifeCycle, reportError, pageExitObservable);\n    }\n    else {\n        startLogsBridge(lifeCycle);\n    }\n    addTelemetryConfiguration(serializeLogsConfiguration(initConfiguration));\n    var internalContext = startInternalContext(session);\n    return {\n        handleLog: handleLog,\n        getInternalContext: internalContext.get,\n    };\n}\nfunction startLogsTelemetry(configuration, reportError, pageExitObservable) {\n    var _a;\n    var telemetry = startTelemetry(\"browser-logs-sdk\" /* TelemetryService.LOGS */, configuration);\n    if (canUseEventBridge()) {\n        var bridge_1 = getEventBridge();\n        telemetry.observable.subscribe(function (event) { return bridge_1.send('internal_telemetry', event); });\n    }\n    else {\n        var telemetryBatch_1 = startBatchWithReplica(configuration, configuration.rumEndpointBuilder, reportError, pageExitObservable, (_a = configuration.replica) === null || _a === void 0 ? void 0 : _a.rumEndpointBuilder);\n        telemetry.observable.subscribe(function (event) { return telemetryBatch_1.add(event, isTelemetryReplicationAllowed(configuration)); });\n    }\n    return telemetry;\n}\n","import { noop, ErrorSource, trackRuntimeError, Observable } from '@datadog/browser-core';\nimport { StatusType } from '../../logger';\nexport function startRuntimeErrorCollection(configuration, lifeCycle) {\n    if (!configuration.forwardErrorsToLogs) {\n        return { stop: noop };\n    }\n    var rawErrorObservable = new Observable();\n    var stopRuntimeErrorTracking = trackRuntimeError(rawErrorObservable).stop;\n    var rawErrorSubscription = rawErrorObservable.subscribe(function (rawError) {\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                message: rawError.message,\n                date: rawError.startClocks.timeStamp,\n                error: {\n                    kind: rawError.type,\n                    origin: ErrorSource.SOURCE,\n                    stack: rawError.stack,\n                },\n                origin: ErrorSource.SOURCE,\n                status: StatusType.error,\n            },\n        });\n    });\n    return {\n        stop: function () {\n            stopRuntimeErrorTracking();\n            rawErrorSubscription.unsubscribe();\n        },\n    };\n}\n","export function startInternalContext(sessionManager) {\n    return {\n        get: function (startTime) {\n            var trackedSession = sessionManager.findTrackedSession(startTime);\n            if (trackedSession) {\n                return {\n                    session_id: trackedSession.id,\n                };\n            }\n        },\n    };\n}\n","import { getEventBridge } from '@datadog/browser-core';\nexport function startLogsBridge(lifeCycle) {\n    var bridge = getEventBridge();\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, function (serverLogsEvent) {\n        bridge.send('log', serverLogsEvent);\n    });\n}\n","import { startBatchWithReplica } from '@datadog/browser-core';\nexport function startLogsBatch(configuration, lifeCycle, reportError, pageExitObservable) {\n    var _a;\n    var batch = startBatchWithReplica(configuration, configuration.logsEndpointBuilder, reportError, pageExitObservable, (_a = configuration.replica) === null || _a === void 0 ? void 0 : _a.logsEndpointBuilder);\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, function (serverLogsEvent) {\n        batch.add(serverLogsEvent);\n    });\n}\n","import { get, extend } from 'underscore';\nimport { datadogRum } from '@datadog/browser-rum';\nimport { datadogLogs } from '@datadog/browser-logs';\n\nimport { datadogConfig as config, versions, appConfig } from './config';\n\nlet ddInitialized = false;\n\nfunction getEnv() {\n  return `${ appConfig.env }.${ appConfig.stackId }`;\n}\n\nfunction isPdfPrinter() {\n  const urlPaths = location.pathname.substring(1).split('/');\n  return (urlPaths[0] === 'formapp' && urlPaths[1] === 'pdf');\n}\n\nfunction initLogs({ isForm }) {\n  datadogLogs.init({\n    env: getEnv(),\n    clientToken: config.clientToken,\n    site: 'datadoghq.com',\n    service: isForm ? 'care-ops-forms' : 'care-ops-frontend',\n    forwardErrorsToLogs: true,\n    version: versions.frontend,\n    useSecureSessionCookie: true,\n    useCrossSiteSessionCookie: true,\n    beforeSend(log) {\n      // Remove logging of offline fetch errors\n      if (String(log.message).includes('Failed to fetch')) return false;\n      return (get(log, ['http', 'status_code']) !== 0);\n    },\n  });\n}\n\nfunction initRum({ isForm }) {\n  if (isPdfPrinter()) return;\n  datadogRum.init({\n    env: getEnv(),\n    applicationId: config.applicationId,\n    clientToken: config.clientToken,\n    site: 'datadoghq.com',\n    service: isForm ? 'care-ops-forms' : 'care-ops-frontend',\n    version: versions.frontend,\n    useSecureSessionCookie: true,\n    useCrossSiteSessionCookie: true,\n    allowedTracingOrigins: [window.origin],\n    trackLongTasks: true,\n    trackFrustrations: true,\n    trackUserInteractions: true,\n    defaultPrivacyLevel: 'allow',\n    enableExperimentalFeatures: ['clickmap'],\n    beforeSend(event, context) {\n      // Add header/response context to api errors\n      if (event.type === 'resource' && event.resource.type === 'fetch') {\n        if (context.response.status && context.response.status >= 400) {\n          extend(event.context, { context });\n        }\n      }\n    },\n  });\n}\n\nfunction setUser(attrs) {\n  if (!ddInitialized) return;\n  datadogRum.setUser(attrs);\n  datadogRum.startSessionReplayRecording();\n}\n\nfunction addError(error) {\n  if (!ddInitialized) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n    return;\n  }\n  datadogRum.addError(error);\n}\n\nasync function logResponse(url, options, response) {\n  if (!ddInitialized) return;\n\n  const contentType = String(response.headers.get('Content-Type'));\n  const responseHeaders = Object.fromEntries(response.headers);\n  const responseBody = contentType.includes('json') ? await response.json() : await response.text();\n\n  datadogLogs.logger.info(`Response status ${ response.status }`, {\n    url,\n    options,\n    status: response.status,\n    responseHeaders,\n    responseBody,\n  });\n}\n\nfunction initDataDog({ isForm }) {\n  // NOTE: Remove when developing and testing Datadog\n  if (_DEVELOP_) return;\n  initLogs({ isForm });\n  initRum({ isForm });\n  ddInitialized = true;\n}\n\nexport {\n  initDataDog,\n  setUser,\n  addError,\n  logResponse,\n};\n","export default function getRootRoute() {\n  return location.pathname.substring(1).split('/').shift();\n}\n","var isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw $TypeError(tryToString(argument) + ' is not a function');\n};\n","var isCallable = require('../internals/is-callable');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (typeof argument == 'object' || isCallable(argument)) return argument;\n  throw $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n","var isPrototypeOf = require('../internals/object-is-prototype-of');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw $TypeError('Incorrect invocation');\n};\n","var isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw $TypeError($String(argument) + ' is not an object');\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","'use strict';\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","var isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","var global = require('../internals/global');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var documentAll = typeof document == 'object' && document.all;\n\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nvar IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;\n\nmodule.exports = {\n  all: documentAll,\n  IS_HTMLDDA: IS_HTMLDDA\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","module.exports = {\n  IndexSizeError: { s: 'INDEX_SIZE_ERR', c: 1, m: 1 },\n  DOMStringSizeError: { s: 'DOMSTRING_SIZE_ERR', c: 2, m: 0 },\n  HierarchyRequestError: { s: 'HIERARCHY_REQUEST_ERR', c: 3, m: 1 },\n  WrongDocumentError: { s: 'WRONG_DOCUMENT_ERR', c: 4, m: 1 },\n  InvalidCharacterError: { s: 'INVALID_CHARACTER_ERR', c: 5, m: 1 },\n  NoDataAllowedError: { s: 'NO_DATA_ALLOWED_ERR', c: 6, m: 0 },\n  NoModificationAllowedError: { s: 'NO_MODIFICATION_ALLOWED_ERR', c: 7, m: 1 },\n  NotFoundError: { s: 'NOT_FOUND_ERR', c: 8, m: 1 },\n  NotSupportedError: { s: 'NOT_SUPPORTED_ERR', c: 9, m: 1 },\n  InUseAttributeError: { s: 'INUSE_ATTRIBUTE_ERR', c: 10, m: 1 },\n  InvalidStateError: { s: 'INVALID_STATE_ERR', c: 11, m: 1 },\n  SyntaxError: { s: 'SYNTAX_ERR', c: 12, m: 1 },\n  InvalidModificationError: { s: 'INVALID_MODIFICATION_ERR', c: 13, m: 1 },\n  NamespaceError: { s: 'NAMESPACE_ERR', c: 14, m: 1 },\n  InvalidAccessError: { s: 'INVALID_ACCESS_ERR', c: 15, m: 1 },\n  ValidationError: { s: 'VALIDATION_ERR', c: 16, m: 0 },\n  TypeMismatchError: { s: 'TYPE_MISMATCH_ERR', c: 17, m: 1 },\n  SecurityError: { s: 'SECURITY_ERR', c: 18, m: 1 },\n  NetworkError: { s: 'NETWORK_ERR', c: 19, m: 1 },\n  AbortError: { s: 'ABORT_ERR', c: 20, m: 1 },\n  URLMismatchError: { s: 'URL_MISMATCH_ERR', c: 21, m: 1 },\n  QuotaExceededError: { s: 'QUOTA_EXCEEDED_ERR', c: 22, m: 1 },\n  TimeoutError: { s: 'TIMEOUT_ERR', c: 23, m: 1 },\n  InvalidNodeTypeError: { s: 'INVALID_NODE_TYPE_ERR', c: 24, m: 1 },\n  DataCloneError: { s: 'DATA_CLONE_ERR', c: 25, m: 1 }\n};\n","var IS_DENO = require('../internals/engine-is-deno');\nvar IS_NODE = require('../internals/engine-is-node');\n\nmodule.exports = !IS_DENO && !IS_NODE\n  && typeof window == 'object'\n  && typeof document == 'object';\n","/* global Deno -- Deno case */\nmodule.exports = typeof Deno == 'object' && Deno && typeof Deno.version == 'object';\n","var classof = require('../internals/classof-raw');\n\nmodule.exports = typeof process != 'undefined' && classof(process) == 'process';\n","module.exports = typeof navigator != 'undefined' && String(navigator.userAgent) || '';\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String($Error(arg).stack); })('zxcasd');\n// eslint-disable-next-line redos/no-vulnerable -- safe\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n","var fails = require('../internals/fails');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = !fails(function () {\n  var error = Error('a');\n  if (!('stack' in error)) return true;\n  // eslint-disable-next-line es/no-object-defineproperty -- safe\n  Object.defineProperty(error, 'stack', createPropertyDescriptor(1, 7));\n  return error.stack !== 7;\n});\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var uncurryThis = require('../internals/function-uncurry-this-clause');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\n\nmodule.exports = function (object, key, method) {\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));\n  } catch (error) { /* empty */ }\n};\n","var classofRaw = require('../internals/classof-raw');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThis(fn);\n};\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call.apply(fn, arguments);\n  };\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","var classof = require('../internals/classof');\nvar getMethod = require('../internals/get-method');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (!isNullOrUndefined(it)) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n","var call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw $TypeError(tryToString(argument) + ' is not iterable');\n};\n","var aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","module.exports = {};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","var isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","var $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = $documentAll.IS_HTMLDDA ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar empty = [];\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.exec(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, empty, argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","var isCallable = require('../internals/is-callable');\nvar $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\nmodule.exports = $documentAll.IS_HTMLDDA ? function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;\n} : function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","module.exports = false;\n","var getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","var bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar $TypeError = TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_RECORD = !!(options && options.IS_RECORD);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal', condition);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_RECORD) {\n    iterator = iterable.iterator;\n  } else if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw $TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = IS_RECORD ? iterable.next : iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n","var call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getMethod = require('../internals/get-method');\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n","module.exports = {};\n","var toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar $String = String;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\nvar stringSlice = uncurryThis(''.slice);\nvar replace = uncurryThis(''.replace);\nvar join = uncurryThis([].join);\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (stringSlice($String(name), 0, 7) === 'Symbol(') {\n    name = '[' + replace($String(name), /^Symbol\\(([^)]*)\\)/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","var uncurryThis = require('../internals/function-uncurry-this');\n\n// eslint-disable-next-line es/no-map -- safe\nvar MapPrototype = Map.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-map -- safe\n  Map: Map,\n  set: uncurryThis(MapPrototype.set),\n  get: uncurryThis(MapPrototype.get),\n  has: uncurryThis(MapPrototype.has),\n  remove: uncurryThis(MapPrototype['delete']),\n  proto: MapPrototype\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","var toString = require('../internals/to-string');\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","/* eslint-disable no-proto -- safe */\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw $TypeError(\"Can't convert object to primitive value\");\n};\n","var getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.hasIndices) result += 'd';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.unicodeSets) result += 'v';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","var call = require('../internals/function-call');\nvar hasOwn = require('../internals/has-own-property');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar regExpFlags = require('../internals/regexp-flags');\n\nvar RegExpPrototype = RegExp.prototype;\n\nmodule.exports = function (R) {\n  var flags = R.flags;\n  return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R)\n    ? call(regExpFlags, R) : flags;\n};\n","var isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\n// eslint-disable-next-line es/no-set -- safe\nvar SetPrototype = Set.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-set -- safe\n  Set: Set,\n  add: uncurryThis(SetPrototype.add),\n  has: uncurryThis(SetPrototype.has),\n  remove: uncurryThis(SetPrototype['delete']),\n  proto: SetPrototype,\n  $has: SetPrototype.has,\n  $keys: SetPrototype.keys\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","var global = require('../internals/global');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || defineGlobalProperty(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.29.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2023 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","var global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar V8 = require('../internals/engine-v8-version');\nvar IS_BROWSER = require('../internals/engine-is-browser');\nvar IS_DENO = require('../internals/engine-is-deno');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar structuredClone = global.structuredClone;\n\nmodule.exports = !!structuredClone && !fails(function () {\n  // prevent V8 ArrayBufferDetaching protector cell invalidation and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if ((IS_DENO && V8 > 92) || (IS_NODE && V8 > 94) || (IS_BROWSER && V8 > 97)) return false;\n  var buffer = new ArrayBuffer(8);\n  var clone = structuredClone(buffer, { transfer: [buffer] });\n  return buffer.byteLength != 0 || clone.byteLength != 8;\n});\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","var call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var classof = require('../internals/classof');\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n","var $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n","var $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw $TypeError('Not enough arguments');\n  return passed;\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar Symbol = global.Symbol;\nvar WellKnownSymbolsStore = shared('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)\n      ? Symbol[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar defineProperty = require('../internals/object-define-property').f;\nvar hasOwn = require('../internals/has-own-property');\nvar anInstance = require('../internals/an-instance');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar DOMExceptionConstants = require('../internals/dom-exception-constants');\nvar clearErrorStack = require('../internals/error-stack-clear');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nvar DOM_EXCEPTION = 'DOMException';\nvar Error = getBuiltIn('Error');\nvar NativeDOMException = getBuiltIn(DOM_EXCEPTION);\n\nvar $DOMException = function DOMException() {\n  anInstance(this, DOMExceptionPrototype);\n  var argumentsLength = arguments.length;\n  var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);\n  var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');\n  var that = new NativeDOMException(message, name);\n  var error = Error(message);\n  error.name = DOM_EXCEPTION;\n  defineProperty(that, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));\n  inheritIfRequired(that, this, $DOMException);\n  return that;\n};\n\nvar DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;\n\nvar ERROR_HAS_STACK = 'stack' in Error(DOM_EXCEPTION);\nvar DOM_EXCEPTION_HAS_STACK = 'stack' in new NativeDOMException(1, 2);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(global, DOM_EXCEPTION);\n\n// Bun ~ 0.1.1 DOMException have incorrect descriptor and we can't redefine it\n// https://github.com/Jarred-Sumner/bun/issues/399\nvar BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);\n\nvar FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;\n\n// `DOMException` constructor patch for `.stack` where it's required\n// https://webidl.spec.whatwg.org/#es-DOMException-specialness\n$({ global: true, constructor: true, forced: IS_PURE || FORCED_CONSTRUCTOR }, { // TODO: fix export logic\n  DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException\n});\n\nvar PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);\nvar PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;\n\nif (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {\n  if (!IS_PURE) {\n    defineProperty(PolyfilledDOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, PolyfilledDOMException));\n  }\n\n  for (var key in DOMExceptionConstants) if (hasOwn(DOMExceptionConstants, key)) {\n    var constant = DOMExceptionConstants[key];\n    var constantName = constant.s;\n    if (!hasOwn(PolyfilledDOMException, constantName)) {\n      defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));\n    }\n  }\n}\n","var IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltin = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar uid = require('../internals/uid');\nvar isCallable = require('../internals/is-callable');\nvar isConstructor = require('../internals/is-constructor');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar iterate = require('../internals/iterate');\nvar anObject = require('../internals/an-object');\nvar classof = require('../internals/classof');\nvar hasOwn = require('../internals/has-own-property');\nvar createProperty = require('../internals/create-property');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\nvar getRegExpFlags = require('../internals/regexp-get-flags');\nvar MapHelpers = require('../internals/map-helpers');\nvar SetHelpers = require('../internals/set-helpers');\nvar ERROR_STACK_INSTALLABLE = require('../internals/error-stack-installable');\nvar PROPER_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar Object = global.Object;\nvar Array = global.Array;\nvar Date = global.Date;\nvar Error = global.Error;\nvar EvalError = global.EvalError;\nvar RangeError = global.RangeError;\nvar ReferenceError = global.ReferenceError;\nvar SyntaxError = global.SyntaxError;\nvar TypeError = global.TypeError;\nvar URIError = global.URIError;\nvar PerformanceMark = global.PerformanceMark;\nvar WebAssembly = global.WebAssembly;\nvar CompileError = WebAssembly && WebAssembly.CompileError || Error;\nvar LinkError = WebAssembly && WebAssembly.LinkError || Error;\nvar RuntimeError = WebAssembly && WebAssembly.RuntimeError || Error;\nvar DOMException = getBuiltin('DOMException');\nvar Map = MapHelpers.Map;\nvar mapHas = MapHelpers.has;\nvar mapGet = MapHelpers.get;\nvar mapSet = MapHelpers.set;\nvar Set = SetHelpers.Set;\nvar setAdd = SetHelpers.add;\nvar objectKeys = getBuiltin('Object', 'keys');\nvar push = uncurryThis([].push);\nvar thisBooleanValue = uncurryThis(true.valueOf);\nvar thisNumberValue = uncurryThis(1.0.valueOf);\nvar thisStringValue = uncurryThis(''.valueOf);\nvar thisTimeValue = uncurryThis(Date.prototype.getTime);\nvar PERFORMANCE_MARK = uid('structuredClone');\nvar DATA_CLONE_ERROR = 'DataCloneError';\nvar TRANSFERRING = 'Transferring';\n\nvar checkBasicSemantic = function (structuredCloneImplementation) {\n  return !fails(function () {\n    var set1 = new global.Set([7]);\n    var set2 = structuredCloneImplementation(set1);\n    var number = structuredCloneImplementation(Object(7));\n    return set2 == set1 || !set2.has(7) || typeof number != 'object' || number != 7;\n  }) && structuredCloneImplementation;\n};\n\nvar checkErrorsCloning = function (structuredCloneImplementation, $Error) {\n  return !fails(function () {\n    var error = new $Error();\n    var test = structuredCloneImplementation({ a: error, b: error });\n    return !(test && test.a === test.b && test.a instanceof $Error && test.a.stack === error.stack);\n  });\n};\n\n// https://github.com/whatwg/html/pull/5749\nvar checkNewErrorsCloningSemantic = function (structuredCloneImplementation) {\n  return !fails(function () {\n    var test = structuredCloneImplementation(new global.AggregateError([1], PERFORMANCE_MARK, { cause: 3 }));\n    return test.name != 'AggregateError' || test.errors[0] != 1 || test.message != PERFORMANCE_MARK || test.cause != 3;\n  });\n};\n\n// FF94+, Safari 15.4+, Chrome 98+, NodeJS 17.0+, Deno 1.13+\n// FF<103 and Safari implementations can't clone errors\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1556604\n// FF103 can clone errors, but `.stack` of clone is an empty string\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1778762\n// FF104+ fixed it on usual errors, but not on DOMExceptions\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1777321\n// Chrome <102 returns `null` if cloned object contains multiple references to one error\n// https://bugs.chromium.org/p/v8/issues/detail?id=12542\n// NodeJS implementation can't clone DOMExceptions\n// https://github.com/nodejs/node/issues/41038\n// only FF103+ supports new (html/5749) error cloning semantic\nvar nativeStructuredClone = global.structuredClone;\n\nvar FORCED_REPLACEMENT = IS_PURE\n  || !checkErrorsCloning(nativeStructuredClone, Error)\n  || !checkErrorsCloning(nativeStructuredClone, DOMException)\n  || !checkNewErrorsCloningSemantic(nativeStructuredClone);\n\n// Chrome 82+, Safari 14.1+, Deno 1.11+\n// Chrome 78-81 implementation swaps `.name` and `.message` of cloned `DOMException`\n// Chrome returns `null` if cloned object contains multiple references to one error\n// Safari 14.1 implementation doesn't clone some `RegExp` flags, so requires a workaround\n// Safari implementation can't clone errors\n// Deno 1.2-1.10 implementations too naive\n// NodeJS 16.0+ does not have `PerformanceMark` constructor\n// NodeJS <17.2 structured cloning implementation from `performance.mark` is too naive\n// and can't clone, for example, `RegExp` or some boxed primitives\n// https://github.com/nodejs/node/issues/40840\n// no one of those implementations supports new (html/5749) error cloning semantic\nvar structuredCloneFromMark = !nativeStructuredClone && checkBasicSemantic(function (value) {\n  return new PerformanceMark(PERFORMANCE_MARK, { detail: value }).detail;\n});\n\nvar nativeRestrictedStructuredClone = checkBasicSemantic(nativeStructuredClone) || structuredCloneFromMark;\n\nvar throwUncloneable = function (type) {\n  throw new DOMException('Uncloneable type: ' + type, DATA_CLONE_ERROR);\n};\n\nvar throwUnpolyfillable = function (type, action) {\n  throw new DOMException((action || 'Cloning') + ' of ' + type + ' cannot be properly polyfilled in this engine', DATA_CLONE_ERROR);\n};\n\nvar createDataTransfer = function () {\n  var dataTransfer;\n  try {\n    dataTransfer = new global.DataTransfer();\n  } catch (error) {\n    try {\n      dataTransfer = new global.ClipboardEvent('').clipboardData;\n    } catch (error2) { /* empty */ }\n  }\n  return dataTransfer && dataTransfer.items && dataTransfer.files ? dataTransfer : null;\n};\n\nvar structuredCloneInternal = function (value, map) {\n  if (isSymbol(value)) throwUncloneable('Symbol');\n  if (!isObject(value)) return value;\n  // effectively preserves circular references\n  if (map) {\n    if (mapHas(map, value)) return mapGet(map, value);\n  } else map = new Map();\n\n  var type = classof(value);\n  var deep = false;\n  var C, name, cloned, dataTransfer, i, length, keys, key, source, target, options;\n\n  switch (type) {\n    case 'Array':\n      cloned = Array(lengthOfArrayLike(value));\n      deep = true;\n      break;\n    case 'Object':\n      cloned = {};\n      deep = true;\n      break;\n    case 'Map':\n      cloned = new Map();\n      deep = true;\n      break;\n    case 'Set':\n      cloned = new Set();\n      deep = true;\n      break;\n    case 'RegExp':\n      // in this block because of a Safari 14.1 bug\n      // old FF does not clone regexes passed to the constructor, so get the source and flags directly\n      cloned = new RegExp(value.source, getRegExpFlags(value));\n      break;\n    case 'Error':\n      name = value.name;\n      switch (name) {\n        case 'AggregateError':\n          cloned = getBuiltin('AggregateError')([]);\n          break;\n        case 'EvalError':\n          cloned = EvalError();\n          break;\n        case 'RangeError':\n          cloned = RangeError();\n          break;\n        case 'ReferenceError':\n          cloned = ReferenceError();\n          break;\n        case 'SyntaxError':\n          cloned = SyntaxError();\n          break;\n        case 'TypeError':\n          cloned = TypeError();\n          break;\n        case 'URIError':\n          cloned = URIError();\n          break;\n        case 'CompileError':\n          cloned = CompileError();\n          break;\n        case 'LinkError':\n          cloned = LinkError();\n          break;\n        case 'RuntimeError':\n          cloned = RuntimeError();\n          break;\n        default:\n          cloned = Error();\n      }\n      deep = true;\n      break;\n    case 'DOMException':\n      cloned = new DOMException(value.message, value.name);\n      deep = true;\n      break;\n    case 'DataView':\n    case 'Int8Array':\n    case 'Uint8Array':\n    case 'Uint8ClampedArray':\n    case 'Int16Array':\n    case 'Uint16Array':\n    case 'Int32Array':\n    case 'Uint32Array':\n    case 'Float32Array':\n    case 'Float64Array':\n    case 'BigInt64Array':\n    case 'BigUint64Array':\n      C = global[type];\n      // in some old engines like Safari 9, typeof C is 'object'\n      // on Uint8ClampedArray or some other constructors\n      if (!isObject(C)) throwUnpolyfillable(type);\n      cloned = new C(\n        // this is safe, since arraybuffer cannot have circular references\n        structuredCloneInternal(value.buffer, map),\n        value.byteOffset,\n        type === 'DataView' ? value.byteLength : value.length\n      );\n      break;\n    case 'DOMQuad':\n      try {\n        cloned = new DOMQuad(\n          structuredCloneInternal(value.p1, map),\n          structuredCloneInternal(value.p2, map),\n          structuredCloneInternal(value.p3, map),\n          structuredCloneInternal(value.p4, map)\n        );\n      } catch (error) {\n        if (nativeRestrictedStructuredClone) {\n          cloned = nativeRestrictedStructuredClone(value);\n        } else throwUnpolyfillable(type);\n      }\n      break;\n    case 'FileList':\n      dataTransfer = createDataTransfer();\n      if (dataTransfer) {\n        for (i = 0, length = lengthOfArrayLike(value); i < length; i++) {\n          dataTransfer.items.add(structuredCloneInternal(value[i], map));\n        }\n        cloned = dataTransfer.files;\n      } else if (nativeRestrictedStructuredClone) {\n        cloned = nativeRestrictedStructuredClone(value);\n      } else throwUnpolyfillable(type);\n      break;\n    case 'ImageData':\n      // Safari 9 ImageData is a constructor, but typeof ImageData is 'object'\n      try {\n        cloned = new ImageData(\n          structuredCloneInternal(value.data, map),\n          value.width,\n          value.height,\n          { colorSpace: value.colorSpace }\n        );\n      } catch (error) {\n        if (nativeRestrictedStructuredClone) {\n          cloned = nativeRestrictedStructuredClone(value);\n        } else throwUnpolyfillable(type);\n      } break;\n    default:\n      if (nativeRestrictedStructuredClone) {\n        cloned = nativeRestrictedStructuredClone(value);\n      } else switch (type) {\n        case 'BigInt':\n          // can be a 3rd party polyfill\n          cloned = Object(value.valueOf());\n          break;\n        case 'Boolean':\n          cloned = Object(thisBooleanValue(value));\n          break;\n        case 'Number':\n          cloned = Object(thisNumberValue(value));\n          break;\n        case 'String':\n          cloned = Object(thisStringValue(value));\n          break;\n        case 'Date':\n          cloned = new Date(thisTimeValue(value));\n          break;\n        case 'ArrayBuffer':\n          C = global.DataView;\n          // `ArrayBuffer#slice` is not available in IE10\n          // `ArrayBuffer#slice` and `DataView` are not available in old FF\n          if (!C && typeof value.slice != 'function') throwUnpolyfillable(type);\n          // detached buffers throws in `DataView` and `.slice`\n          try {\n            if (typeof value.slice == 'function' && !value.resizable) {\n              cloned = value.slice(0);\n            } else {\n              length = value.byteLength;\n              options = 'maxByteLength' in value ? { maxByteLength: value.maxByteLength } : undefined;\n              cloned = new ArrayBuffer(length, options);\n              source = new C(value);\n              target = new C(cloned);\n              for (i = 0; i < length; i++) {\n                target.setUint8(i, source.getUint8(i));\n              }\n            }\n          } catch (error) {\n            throw new DOMException('ArrayBuffer is detached', DATA_CLONE_ERROR);\n          } break;\n        case 'SharedArrayBuffer':\n          // SharedArrayBuffer should use shared memory, we can't polyfill it, so return the original\n          cloned = value;\n          break;\n        case 'Blob':\n          try {\n            cloned = value.slice(0, value.size, value.type);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'DOMPoint':\n        case 'DOMPointReadOnly':\n          C = global[type];\n          try {\n            cloned = C.fromPoint\n              ? C.fromPoint(value)\n              : new C(value.x, value.y, value.z, value.w);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'DOMRect':\n        case 'DOMRectReadOnly':\n          C = global[type];\n          try {\n            cloned = C.fromRect\n              ? C.fromRect(value)\n              : new C(value.x, value.y, value.width, value.height);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'DOMMatrix':\n        case 'DOMMatrixReadOnly':\n          C = global[type];\n          try {\n            cloned = C.fromMatrix\n              ? C.fromMatrix(value)\n              : new C(value);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'AudioData':\n        case 'VideoFrame':\n          if (!isCallable(value.clone)) throwUnpolyfillable(type);\n          try {\n            cloned = value.clone();\n          } catch (error) {\n            throwUncloneable(type);\n          } break;\n        case 'File':\n          try {\n            cloned = new File([value], value.name, value);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'CropTarget':\n        case 'CryptoKey':\n        case 'FileSystemDirectoryHandle':\n        case 'FileSystemFileHandle':\n        case 'FileSystemHandle':\n        case 'GPUCompilationInfo':\n        case 'GPUCompilationMessage':\n        case 'ImageBitmap':\n        case 'RTCCertificate':\n        case 'WebAssembly.Module':\n          throwUnpolyfillable(type);\n          // break omitted\n        default:\n          throwUncloneable(type);\n      }\n  }\n\n  mapSet(map, value, cloned);\n\n  if (deep) switch (type) {\n    case 'Array':\n    case 'Object':\n      keys = objectKeys(value);\n      for (i = 0, length = lengthOfArrayLike(keys); i < length; i++) {\n        key = keys[i];\n        createProperty(cloned, key, structuredCloneInternal(value[key], map));\n      } break;\n    case 'Map':\n      value.forEach(function (v, k) {\n        mapSet(cloned, structuredCloneInternal(k, map), structuredCloneInternal(v, map));\n      });\n      break;\n    case 'Set':\n      value.forEach(function (v) {\n        setAdd(cloned, structuredCloneInternal(v, map));\n      });\n      break;\n    case 'Error':\n      createNonEnumerableProperty(cloned, 'message', structuredCloneInternal(value.message, map));\n      if (hasOwn(value, 'cause')) {\n        createNonEnumerableProperty(cloned, 'cause', structuredCloneInternal(value.cause, map));\n      }\n      if (name == 'AggregateError') {\n        cloned.errors = structuredCloneInternal(value.errors, map);\n      } // break omitted\n    case 'DOMException':\n      if (ERROR_STACK_INSTALLABLE) {\n        createNonEnumerableProperty(cloned, 'stack', structuredCloneInternal(value.stack, map));\n      }\n  }\n\n  return cloned;\n};\n\nvar tryToTransfer = function (rawTransfer, map) {\n  if (!isObject(rawTransfer)) throw TypeError('Transfer option cannot be converted to a sequence');\n\n  var transfer = [];\n\n  iterate(rawTransfer, function (value) {\n    push(transfer, anObject(value));\n  });\n\n  var i = 0;\n  var length = lengthOfArrayLike(transfer);\n  var value, type, C, transferredArray, transferred, canvas, context;\n\n  if (PROPER_TRANSFER) {\n    transferredArray = nativeStructuredClone(transfer, { transfer: transfer });\n    while (i < length) mapSet(map, transfer[i], transferredArray[i++]);\n  } else while (i < length) {\n    value = transfer[i++];\n    if (mapHas(map, value)) throw new DOMException('Duplicate transferable', DATA_CLONE_ERROR);\n\n    type = classof(value);\n\n    switch (type) {\n      case 'ImageBitmap':\n        C = global.OffscreenCanvas;\n        if (!isConstructor(C)) throwUnpolyfillable(type, TRANSFERRING);\n        try {\n          canvas = new C(value.width, value.height);\n          context = canvas.getContext('bitmaprenderer');\n          context.transferFromImageBitmap(value);\n          transferred = canvas.transferToImageBitmap();\n        } catch (error) { /* empty */ }\n        break;\n      case 'AudioData':\n      case 'VideoFrame':\n        if (!isCallable(value.clone) || !isCallable(value.close)) throwUnpolyfillable(type, TRANSFERRING);\n        try {\n          transferred = value.clone();\n          value.close();\n        } catch (error) { /* empty */ }\n        break;\n      case 'ArrayBuffer':\n        if (!isCallable(value.transfer)) throwUnpolyfillable(type, TRANSFERRING);\n        transferred = value.transfer();\n        break;\n      case 'MediaSourceHandle':\n      case 'MessagePort':\n      case 'OffscreenCanvas':\n      case 'ReadableStream':\n      case 'TransformStream':\n      case 'WritableStream':\n        throwUnpolyfillable(type, TRANSFERRING);\n    }\n\n    if (transferred === undefined) throw new DOMException('This object cannot be transferred: ' + type, DATA_CLONE_ERROR);\n    mapSet(map, value, transferred);\n  }\n};\n\n// `structuredClone` method\n// https://html.spec.whatwg.org/multipage/structured-data.html#dom-structuredclone\n$({ global: true, enumerable: true, sham: !PROPER_TRANSFER, forced: FORCED_REPLACEMENT }, {\n  structuredClone: function structuredClone(value /* , { transfer } */) {\n    var options = validateArgumentsLength(arguments.length, 1) > 1 && !isNullOrUndefined(arguments[1]) ? anObject(arguments[1]) : undefined;\n    var transfer = options ? options.transfer : undefined;\n    var map;\n\n    if (transfer !== undefined) {\n      map = new Map();\n      tryToTransfer(transfer, map);\n    }\n\n    return structuredCloneInternal(value, map);\n  }\n});\n","// Current version.\nexport var VERSION = '1.13.6';\n\n// Establish the root object, `window` (`self`) in the browser, `global`\n// on the server, or `this` in some virtual machines. We use `self`\n// instead of `window` for `WebWorker` support.\nexport var root = (typeof self == 'object' && self.self === self && self) ||\n          (typeof global == 'object' && global.global === global && global) ||\n          Function('return this')() ||\n          {};\n\n// Save bytes in the minified (but not gzipped) version:\nexport var ArrayProto = Array.prototype, ObjProto = Object.prototype;\nexport var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport var push = ArrayProto.push,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty;\n\n// Modern feature detection.\nexport var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined',\n    supportsDataView = typeof DataView !== 'undefined';\n\n// All **ECMAScript 5+** native function implementations that we hope to use\n// are declared here.\nexport var nativeIsArray = Array.isArray,\n    nativeKeys = Object.keys,\n    nativeCreate = Object.create,\n    nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\n\n// Create references to these builtin functions because we override them.\nexport var _isNaN = isNaN,\n    _isFinite = isFinite;\n\n// Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\nexport var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\nexport var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n  'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n// The largest integer that can be represented exactly.\nexport var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n","// Some functions take a variable number of arguments, or a few expected\n// arguments at the beginning and then a variable number of values to operate\n// on. This helper accumulates all remaining arguments past the function’s\n// argument length (or an explicit `startIndex`), into an array that becomes\n// the last argument. Similar to ES6’s \"rest parameter\".\nexport default function restArguments(func, startIndex) {\n  startIndex = startIndex == null ? func.length - 1 : +startIndex;\n  return function() {\n    var length = Math.max(arguments.length - startIndex, 0),\n        rest = Array(length),\n        index = 0;\n    for (; index < length; index++) {\n      rest[index] = arguments[index + startIndex];\n    }\n    switch (startIndex) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, arguments[0], rest);\n      case 2: return func.call(this, arguments[0], arguments[1], rest);\n    }\n    var args = Array(startIndex + 1);\n    for (index = 0; index < startIndex; index++) {\n      args[index] = arguments[index];\n    }\n    args[startIndex] = rest;\n    return func.apply(this, args);\n  };\n}\n","// Is a given variable an object?\nexport default function isObject(obj) {\n  var type = typeof obj;\n  return type === 'function' || (type === 'object' && !!obj);\n}\n","// Is a given value equal to null?\nexport default function isNull(obj) {\n  return obj === null;\n}\n","// Is a given variable undefined?\nexport default function isUndefined(obj) {\n  return obj === void 0;\n}\n","import { toString } from './_setup.js';\n\n// Is a given value a boolean?\nexport default function isBoolean(obj) {\n  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n}\n","// Is a given value a DOM element?\nexport default function isElement(obj) {\n  return !!(obj && obj.nodeType === 1);\n}\n","import { toString } from './_setup.js';\n\n// Internal function for creating a `toString`-based type tester.\nexport default function tagTester(name) {\n  var tag = '[object ' + name + ']';\n  return function(obj) {\n    return toString.call(obj) === tag;\n  };\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('String');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Number');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Date');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('RegExp');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Error');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Symbol');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('ArrayBuffer');\n","import tagTester from './_tagTester.js';\nimport { root } from './_setup.js';\n\nvar isFunction = tagTester('Function');\n\n// Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\n// v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\nvar nodelist = root.document && root.document.childNodes;\nif (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n  isFunction = function(obj) {\n    return typeof obj == 'function' || false;\n  };\n}\n\nexport default isFunction;\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Object');\n","import { supportsDataView } from './_setup.js';\nimport hasObjectTag from './_hasObjectTag.js';\n\n// In IE 10 - Edge 13, `DataView` has string tag `'[object Object]'`.\n// In IE 11, the most common among them, this problem also applies to\n// `Map`, `WeakMap` and `Set`.\nexport var hasStringTagBug = (\n      supportsDataView && hasObjectTag(new DataView(new ArrayBuffer(8)))\n    ),\n    isIE11 = (typeof Map !== 'undefined' && hasObjectTag(new Map));\n","import tagTester from './_tagTester.js';\nimport isFunction from './isFunction.js';\nimport isArrayBuffer from './isArrayBuffer.js';\nimport { hasStringTagBug } from './_stringTagBug.js';\n\nvar isDataView = tagTester('DataView');\n\n// In IE 10 - Edge 13, we need a different heuristic\n// to determine whether an object is a `DataView`.\nfunction ie10IsDataView(obj) {\n  return obj != null && isFunction(obj.getInt8) && isArrayBuffer(obj.buffer);\n}\n\nexport default (hasStringTagBug ? ie10IsDataView : isDataView);\n","import { nativeIsArray } from './_setup.js';\nimport tagTester from './_tagTester.js';\n\n// Is a given value an array?\n// Delegates to ECMA5's native `Array.isArray`.\nexport default nativeIsArray || tagTester('Array');\n","import { hasOwnProperty } from './_setup.js';\n\n// Internal function to check whether `key` is an own property name of `obj`.\nexport default function has(obj, key) {\n  return obj != null && hasOwnProperty.call(obj, key);\n}\n","import tagTester from './_tagTester.js';\nimport has from './_has.js';\n\nvar isArguments = tagTester('Arguments');\n\n// Define a fallback version of the method in browsers (ahem, IE < 9), where\n// there isn't any inspectable \"Arguments\" type.\n(function() {\n  if (!isArguments(arguments)) {\n    isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n}());\n\nexport default isArguments;\n","import { _isFinite } from './_setup.js';\nimport isSymbol from './isSymbol.js';\n\n// Is a given object a finite number?\nexport default function isFinite(obj) {\n  return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\n}\n","import { _isNaN } from './_setup.js';\nimport isNumber from './isNumber.js';\n\n// Is the given value `NaN`?\nexport default function isNaN(obj) {\n  return isNumber(obj) && _isNaN(obj);\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function constant(value) {\n  return function() {\n    return value;\n  };\n}\n","import { MAX_ARRAY_INDEX } from './_setup.js';\n\n// Common internal logic for `isArrayLike` and `isBufferLike`.\nexport default function createSizePropertyCheck(getSizeProperty) {\n  return function(collection) {\n    var sizeProperty = getSizeProperty(collection);\n    return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\n  }\n}\n","// Internal helper to generate a function to obtain property `key` from `obj`.\nexport default function shallowProperty(key) {\n  return function(obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n}\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `byteLength` property of an object.\nexport default shallowProperty('byteLength');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getByteLength from './_getByteLength.js';\n\n// Internal helper to determine whether we should spend extensive checks against\n// `ArrayBuffer` et al.\nexport default createSizePropertyCheck(getByteLength);\n","import { supportsArrayBuffer, nativeIsView, toString } from './_setup.js';\nimport isDataView from './isDataView.js';\nimport constant from './constant.js';\nimport isBufferLike from './_isBufferLike.js';\n\n// Is a given value a typed array?\nvar typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\nfunction isTypedArray(obj) {\n  // `ArrayBuffer.isView` is the most future-proof, so use it when available.\n  // Otherwise, fall back on the above regular expression.\n  return nativeIsView ? (nativeIsView(obj) && !isDataView(obj)) :\n                isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\n}\n\nexport default supportsArrayBuffer ? isTypedArray : constant(false);\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `length` property of an object.\nexport default shallowProperty('length');\n","import { nonEnumerableProps, ObjProto } from './_setup.js';\nimport isFunction from './isFunction.js';\nimport has from './_has.js';\n\n// Internal helper to create a simple lookup structure.\n// `collectNonEnumProps` used to depend on `_.contains`, but this led to\n// circular imports. `emulatedSet` is a one-off solution that only works for\n// arrays of strings.\nfunction emulatedSet(keys) {\n  var hash = {};\n  for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\n  return {\n    contains: function(key) { return hash[key] === true; },\n    push: function(key) {\n      hash[key] = true;\n      return keys.push(key);\n    }\n  };\n}\n\n// Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\n// be iterated by `for key in ...` and thus missed. Extends `keys` in place if\n// needed.\nexport default function collectNonEnumProps(obj, keys) {\n  keys = emulatedSet(keys);\n  var nonEnumIdx = nonEnumerableProps.length;\n  var constructor = obj.constructor;\n  var proto = (isFunction(constructor) && constructor.prototype) || ObjProto;\n\n  // Constructor is a special case.\n  var prop = 'constructor';\n  if (has(obj, prop) && !keys.contains(prop)) keys.push(prop);\n\n  while (nonEnumIdx--) {\n    prop = nonEnumerableProps[nonEnumIdx];\n    if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\n      keys.push(prop);\n    }\n  }\n}\n","import isObject from './isObject.js';\nimport { nativeKeys, hasEnumBug } from './_setup.js';\nimport has from './_has.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve the names of an object's own properties.\n// Delegates to **ECMAScript 5**'s native `Object.keys`.\nexport default function keys(obj) {\n  if (!isObject(obj)) return [];\n  if (nativeKeys) return nativeKeys(obj);\n  var keys = [];\n  for (var key in obj) if (has(obj, key)) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isArray from './isArray.js';\nimport isString from './isString.js';\nimport isArguments from './isArguments.js';\nimport keys from './keys.js';\n\n// Is a given array, string, or object empty?\n// An \"empty\" object has no enumerable own-properties.\nexport default function isEmpty(obj) {\n  if (obj == null) return true;\n  // Skip the more expensive `toString`-based type checks if `obj` has no\n  // `.length`.\n  var length = getLength(obj);\n  if (typeof length == 'number' && (\n    isArray(obj) || isString(obj) || isArguments(obj)\n  )) return length === 0;\n  return getLength(keys(obj)) === 0;\n}\n","import keys from './keys.js';\n\n// Returns whether an object has a given set of `key:value` pairs.\nexport default function isMatch(object, attrs) {\n  var _keys = keys(attrs), length = _keys.length;\n  if (object == null) return !length;\n  var obj = Object(object);\n  for (var i = 0; i < length; i++) {\n    var key = _keys[i];\n    if (attrs[key] !== obj[key] || !(key in obj)) return false;\n  }\n  return true;\n}\n","import { VERSION } from './_setup.js';\n\n// If Underscore is called as a function, it returns a wrapped object that can\n// be used OO-style. This wrapper holds altered versions of all functions added\n// through `_.mixin`. Wrapped objects may be chained.\nexport default function _(obj) {\n  if (obj instanceof _) return obj;\n  if (!(this instanceof _)) return new _(obj);\n  this._wrapped = obj;\n}\n\n_.VERSION = VERSION;\n\n// Extracts the result from a wrapped and chained object.\n_.prototype.value = function() {\n  return this._wrapped;\n};\n\n// Provide unwrapping proxies for some methods used in engine operations\n// such as arithmetic and JSON stringification.\n_.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n_.prototype.toString = function() {\n  return String(this._wrapped);\n};\n","import getByteLength from './_getByteLength.js';\n\n// Internal function to wrap or shallow-copy an ArrayBuffer,\n// typed array or DataView to a new view, reusing the buffer.\nexport default function toBufferView(bufferSource) {\n  return new Uint8Array(\n    bufferSource.buffer || bufferSource,\n    bufferSource.byteOffset || 0,\n    getByteLength(bufferSource)\n  );\n}\n","import _ from './underscore.js';\nimport { toString, SymbolProto } from './_setup.js';\nimport getByteLength from './_getByteLength.js';\nimport isTypedArray from './isTypedArray.js';\nimport isFunction from './isFunction.js';\nimport { hasStringTagBug }  from './_stringTagBug.js';\nimport isDataView from './isDataView.js';\nimport keys from './keys.js';\nimport has from './_has.js';\nimport toBufferView from './_toBufferView.js';\n\n// We use this string twice, so give it a name for minification.\nvar tagDataView = '[object DataView]';\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction eq(a, b, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) return a !== 0 || 1 / a === 1 / b;\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) return false;\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) return b !== b;\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n  return deepEq(a, b, aStack, bStack);\n}\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction deepEq(a, b, aStack, bStack) {\n  // Unwrap any wrapped objects.\n  if (a instanceof _) a = a._wrapped;\n  if (b instanceof _) b = b._wrapped;\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) return false;\n  // Work around a bug in IE 10 - Edge 13.\n  if (hasStringTagBug && className == '[object Object]' && isDataView(a)) {\n    if (!isDataView(b)) return false;\n    className = tagDataView;\n  }\n  switch (className) {\n    // These types are compared by value.\n    case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case '[object String]':\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return '' + a === '' + b;\n    case '[object Number]':\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) return +b !== +b;\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case '[object Date]':\n    case '[object Boolean]':\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case '[object Symbol]':\n      return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    case '[object ArrayBuffer]':\n    case tagDataView:\n      // Coerce to typed array so we can fall through.\n      return deepEq(toBufferView(a), toBufferView(b), aStack, bStack);\n  }\n\n  var areArrays = className === '[object Array]';\n  if (!areArrays && isTypedArray(a)) {\n      var byteLength = getByteLength(a);\n      if (byteLength !== getByteLength(b)) return false;\n      if (a.buffer === b.buffer && a.byteOffset === b.byteOffset) return true;\n      areArrays = true;\n  }\n  if (!areArrays) {\n    if (typeof a != 'object' || typeof b != 'object') return false;\n\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor &&\n                             isFunction(bCtor) && bCtor instanceof bCtor)\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) return bStack[length] === b;\n  }\n\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) return false;\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], aStack, bStack)) return false;\n    }\n  } else {\n    // Deep compare objects.\n    var _keys = keys(a), key;\n    length = _keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (keys(b).length !== length) return false;\n    while (length--) {\n      // Deep compare each member\n      key = _keys[length];\n      if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\n\n// Perform a deep comparison to check if two objects are equal.\nexport default function isEqual(a, b) {\n  return eq(a, b);\n}\n","import isObject from './isObject.js';\nimport { hasEnumBug } from './_setup.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve all the enumerable property names of an object.\nexport default function allKeys(obj) {\n  if (!isObject(obj)) return [];\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isFunction from './isFunction.js';\nimport allKeys from './allKeys.js';\n\n// Since the regular `Object.prototype.toString` type tests don't work for\n// some types in IE 11, we use a fingerprinting heuristic instead, based\n// on the methods. It's not great, but it's the best we got.\n// The fingerprint method lists are defined below.\nexport function ie11fingerprint(methods) {\n  var length = getLength(methods);\n  return function(obj) {\n    if (obj == null) return false;\n    // `Map`, `WeakMap` and `Set` have no enumerable keys.\n    var keys = allKeys(obj);\n    if (getLength(keys)) return false;\n    for (var i = 0; i < length; i++) {\n      if (!isFunction(obj[methods[i]])) return false;\n    }\n    // If we are testing against `WeakMap`, we need to ensure that\n    // `obj` doesn't have a `forEach` method in order to distinguish\n    // it from a regular `Map`.\n    return methods !== weakMapMethods || !isFunction(obj[forEachName]);\n  };\n}\n\n// In the interest of compact minification, we write\n// each string in the fingerprints only once.\nvar forEachName = 'forEach',\n    hasName = 'has',\n    commonInit = ['clear', 'delete'],\n    mapTail = ['get', hasName, 'set'];\n\n// `Map`, `WeakMap` and `Set` each have slightly different\n// combinations of the above sublists.\nexport var mapMethods = commonInit.concat(forEachName, mapTail),\n    weakMapMethods = commonInit.concat(mapTail),\n    setMethods = ['add'].concat(commonInit, forEachName, hasName);\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, mapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(mapMethods) : tagTester('Map');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, weakMapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(weakMapMethods) : tagTester('WeakMap');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, setMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(setMethods) : tagTester('Set');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakSet');\n","import keys from './keys.js';\n\n// Retrieve the values of an object's properties.\nexport default function values(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var values = Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[_keys[i]];\n  }\n  return values;\n}\n","import keys from './keys.js';\n\n// Convert an object into a list of `[key, value]` pairs.\n// The opposite of `_.object` with one argument.\nexport default function pairs(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var pairs = Array(length);\n  for (var i = 0; i < length; i++) {\n    pairs[i] = [_keys[i], obj[_keys[i]]];\n  }\n  return pairs;\n}\n","import keys from './keys.js';\n\n// Invert the keys and values of an object. The values must be serializable.\nexport default function invert(obj) {\n  var result = {};\n  var _keys = keys(obj);\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    result[obj[_keys[i]]] = _keys[i];\n  }\n  return result;\n}\n","import isFunction from './isFunction.js';\n\n// Return a sorted list of the function names available on the object.\nexport default function functions(obj) {\n  var names = [];\n  for (var key in obj) {\n    if (isFunction(obj[key])) names.push(key);\n  }\n  return names.sort();\n}\n","// An internal function for creating assigner functions.\nexport default function createAssigner(keysFunc, defaults) {\n  return function(obj) {\n    var length = arguments.length;\n    if (defaults) obj = Object(obj);\n    if (length < 2 || obj == null) return obj;\n    for (var index = 1; index < length; index++) {\n      var source = arguments[index],\n          keys = keysFunc(source),\n          l = keys.length;\n      for (var i = 0; i < l; i++) {\n        var key = keys[i];\n        if (!defaults || obj[key] === void 0) obj[key] = source[key];\n      }\n    }\n    return obj;\n  };\n}\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Extend a given object with all the properties in passed-in object(s).\nexport default createAssigner(allKeys);\n","import createAssigner from './_createAssigner.js';\nimport keys from './keys.js';\n\n// Assigns a given object with all the own properties in the passed-in\n// object(s).\n// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\nexport default createAssigner(keys);\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Fill in a given object with default properties.\nexport default createAssigner(allKeys, true);\n","import isObject from './isObject.js';\nimport { nativeCreate } from './_setup.js';\n\n// Create a naked function reference for surrogate-prototype-swapping.\nfunction ctor() {\n  return function(){};\n}\n\n// An internal function for creating a new object that inherits from another.\nexport default function baseCreate(prototype) {\n  if (!isObject(prototype)) return {};\n  if (nativeCreate) return nativeCreate(prototype);\n  var Ctor = ctor();\n  Ctor.prototype = prototype;\n  var result = new Ctor;\n  Ctor.prototype = null;\n  return result;\n}\n","import baseCreate from './_baseCreate.js';\nimport extendOwn from './extendOwn.js';\n\n// Creates an object that inherits from the given prototype object.\n// If additional properties are provided then they will be added to the\n// created object.\nexport default function create(prototype, props) {\n  var result = baseCreate(prototype);\n  if (props) extendOwn(result, props);\n  return result;\n}\n","import isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport extend from './extend.js';\n\n// Create a (shallow-cloned) duplicate of an object.\nexport default function clone(obj) {\n  if (!isObject(obj)) return obj;\n  return isArray(obj) ? obj.slice() : extend({}, obj);\n}\n","// Invokes `interceptor` with the `obj` and then returns `obj`.\n// The primary purpose of this method is to \"tap into\" a method chain, in\n// order to perform operations on intermediate results within the chain.\nexport default function tap(obj, interceptor) {\n  interceptor(obj);\n  return obj;\n}\n","import _ from './underscore.js';\nimport isArray from './isArray.js';\n\n// Normalize a (deep) property `path` to array.\n// Like `_.iteratee`, this function can be customized.\nexport default function toPath(path) {\n  return isArray(path) ? path : [path];\n}\n_.toPath = toPath;\n","import _ from './underscore.js';\nimport './toPath.js';\n\n// Internal wrapper for `_.toPath` to enable minification.\n// Similar to `cb` for `_.iteratee`.\nexport default function toPath(path) {\n  return _.toPath(path);\n}\n","// Internal function to obtain a nested property in `obj` along `path`.\nexport default function deepGet(obj, path) {\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    if (obj == null) return void 0;\n    obj = obj[path[i]];\n  }\n  return length ? obj : void 0;\n}\n","import toPath from './_toPath.js';\nimport deepGet from './_deepGet.js';\nimport isUndefined from './isUndefined.js';\n\n// Get the value of the (deep) property on `path` from `object`.\n// If any property in `path` does not exist or if the value is\n// `undefined`, return `defaultValue` instead.\n// The `path` is normalized through `_.toPath`.\nexport default function get(object, path, defaultValue) {\n  var value = deepGet(object, toPath(path));\n  return isUndefined(value) ? defaultValue : value;\n}\n","import _has from './_has.js';\nimport toPath from './_toPath.js';\n\n// Shortcut function for checking if an object has a given property directly on\n// itself (in other words, not on a prototype). Unlike the internal `has`\n// function, this public version can also traverse nested properties.\nexport default function has(obj, path) {\n  path = toPath(path);\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    var key = path[i];\n    if (!_has(obj, key)) return false;\n    obj = obj[key];\n  }\n  return !!length;\n}\n","// Keep the identity function around for default iteratees.\nexport default function identity(value) {\n  return value;\n}\n","import extendOwn from './extendOwn.js';\nimport isMatch from './isMatch.js';\n\n// Returns a predicate for checking whether an object has a given set of\n// `key:value` pairs.\nexport default function matcher(attrs) {\n  attrs = extendOwn({}, attrs);\n  return function(obj) {\n    return isMatch(obj, attrs);\n  };\n}\n","import deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Creates a function that, when passed an object, will traverse that object’s\n// properties down the given `path`, specified as an array of keys or indices.\nexport default function property(path) {\n  path = toPath(path);\n  return function(obj) {\n    return deepGet(obj, path);\n  };\n}\n","// Internal function that returns an efficient (for current engines) version\n// of the passed-in callback, to be repeatedly applied in other Underscore\n// functions.\nexport default function optimizeCb(func, context, argCount) {\n  if (context === void 0) return func;\n  switch (argCount == null ? 3 : argCount) {\n    case 1: return function(value) {\n      return func.call(context, value);\n    };\n    // The 2-argument case is omitted because we’re not using it.\n    case 3: return function(value, index, collection) {\n      return func.call(context, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(context, accumulator, value, index, collection);\n    };\n  }\n  return function() {\n    return func.apply(context, arguments);\n  };\n}\n","import identity from './identity.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport matcher from './matcher.js';\nimport property from './property.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// An internal function to generate callbacks that can be applied to each\n// element in a collection, returning the desired result — either `_.identity`,\n// an arbitrary callback, a property matcher, or a property accessor.\nexport default function baseIteratee(value, context, argCount) {\n  if (value == null) return identity;\n  if (isFunction(value)) return optimizeCb(value, context, argCount);\n  if (isObject(value) && !isArray(value)) return matcher(value);\n  return property(value);\n}\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\n\n// External wrapper for our callback generator. Users may customize\n// `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n// This abstraction hides the internal-only `argCount` argument.\nexport default function iteratee(value, context) {\n  return baseIteratee(value, context, Infinity);\n}\n_.iteratee = iteratee;\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\nimport iteratee from './iteratee.js';\n\n// The function we call internally to generate a callback. It invokes\n// `_.iteratee` if overridden, otherwise `baseIteratee`.\nexport default function cb(value, context, argCount) {\n  if (_.iteratee !== iteratee) return _.iteratee(value, context);\n  return baseIteratee(value, context, argCount);\n}\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the results of applying the `iteratee` to each element of `obj`.\n// In contrast to `_.map` it returns an object.\nexport default function mapObject(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = keys(obj),\n      length = _keys.length,\n      results = {};\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys[index];\n    results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function noop(){}\n","import noop from './noop.js';\nimport get from './get.js';\n\n// Generates a function for a given object that returns a given property.\nexport default function propertyOf(obj) {\n  if (obj == null) return noop;\n  return function(path) {\n    return get(obj, path);\n  };\n}\n","import optimizeCb from './_optimizeCb.js';\n\n// Run a function **n** times.\nexport default function times(n, iteratee, context) {\n  var accum = Array(Math.max(0, n));\n  iteratee = optimizeCb(iteratee, context, 1);\n  for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n  return accum;\n}\n","// Return a random integer between `min` and `max` (inclusive).\nexport default function random(min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n","// A (possibly faster) way to get the current timestamp as an integer.\nexport default Date.now || function() {\n  return new Date().getTime();\n};\n","import keys from './keys.js';\n\n// Internal helper to generate functions for escaping and unescaping strings\n// to/from HTML interpolation.\nexport default function createEscaper(map) {\n  var escaper = function(match) {\n    return map[match];\n  };\n  // Regexes for identifying a key that needs to be escaped.\n  var source = '(?:' + keys(map).join('|') + ')';\n  var testRegexp = RegExp(source);\n  var replaceRegexp = RegExp(source, 'g');\n  return function(string) {\n    string = string == null ? '' : '' + string;\n    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n  };\n}\n","// Internal list of HTML entities for escaping.\nexport default {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n","import createEscaper from './_createEscaper.js';\nimport escapeMap from './_escapeMap.js';\n\n// Function for escaping strings to HTML interpolation.\nexport default createEscaper(escapeMap);\n","import createEscaper from './_createEscaper.js';\nimport unescapeMap from './_unescapeMap.js';\n\n// Function for unescaping strings from HTML interpolation.\nexport default createEscaper(unescapeMap);\n","import invert from './invert.js';\nimport escapeMap from './_escapeMap.js';\n\n// Internal list of HTML entities for unescaping.\nexport default invert(escapeMap);\n","import _ from './underscore.js';\n\n// By default, Underscore uses ERB-style template delimiters. Change the\n// following template settings to use alternative delimiters.\nexport default _.templateSettings = {\n  evaluate: /<%([\\s\\S]+?)%>/g,\n  interpolate: /<%=([\\s\\S]+?)%>/g,\n  escape: /<%-([\\s\\S]+?)%>/g\n};\n","import defaults from './defaults.js';\nimport _ from './underscore.js';\nimport './templateSettings.js';\n\n// When customizing `_.templateSettings`, if you don't want to define an\n// interpolation, evaluation or escaping regex, we need one that is\n// guaranteed not to match.\nvar noMatch = /(.)^/;\n\n// Certain characters need to be escaped so that they can be put into a\n// string literal.\nvar escapes = {\n  \"'\": \"'\",\n  '\\\\': '\\\\',\n  '\\r': 'r',\n  '\\n': 'n',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\nvar escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\nfunction escapeChar(match) {\n  return '\\\\' + escapes[match];\n}\n\n// In order to prevent third-party code injection through\n// `_.templateSettings.variable`, we test it against the following regular\n// expression. It is intentionally a bit more liberal than just matching valid\n// identifiers, but still prevents possible loopholes through defaults or\n// destructuring assignment.\nvar bareIdentifier = /^\\s*(\\w|\\$)+\\s*$/;\n\n// JavaScript micro-templating, similar to John Resig's implementation.\n// Underscore templating handles arbitrary delimiters, preserves whitespace,\n// and correctly escapes quotes within interpolated code.\n// NB: `oldSettings` only exists for backwards compatibility.\nexport default function template(text, settings, oldSettings) {\n  if (!settings && oldSettings) settings = oldSettings;\n  settings = defaults({}, settings, _.templateSettings);\n\n  // Combine delimiters into one regular expression via alternation.\n  var matcher = RegExp([\n    (settings.escape || noMatch).source,\n    (settings.interpolate || noMatch).source,\n    (settings.evaluate || noMatch).source\n  ].join('|') + '|$', 'g');\n\n  // Compile the template source, escaping string literals appropriately.\n  var index = 0;\n  var source = \"__p+='\";\n  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n    source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n    index = offset + match.length;\n\n    if (escape) {\n      source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n    } else if (interpolate) {\n      source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n    } else if (evaluate) {\n      source += \"';\\n\" + evaluate + \"\\n__p+='\";\n    }\n\n    // Adobe VMs need the match returned to produce the correct offset.\n    return match;\n  });\n  source += \"';\\n\";\n\n  var argument = settings.variable;\n  if (argument) {\n    // Insure against third-party code injection. (CVE-2021-23358)\n    if (!bareIdentifier.test(argument)) throw new Error(\n      'variable is not a bare identifier: ' + argument\n    );\n  } else {\n    // If a variable is not specified, place data values in local scope.\n    source = 'with(obj||{}){\\n' + source + '}\\n';\n    argument = 'obj';\n  }\n\n  source = \"var __t,__p='',__j=Array.prototype.join,\" +\n    \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n    source + 'return __p;\\n';\n\n  var render;\n  try {\n    render = new Function(argument, '_', source);\n  } catch (e) {\n    e.source = source;\n    throw e;\n  }\n\n  var template = function(data) {\n    return render.call(this, data, _);\n  };\n\n  // Provide the compiled source as a convenience for precompilation.\n  template.source = 'function(' + argument + '){\\n' + source + '}';\n\n  return template;\n}\n","import isFunction from './isFunction.js';\nimport toPath from './_toPath.js';\n\n// Traverses the children of `obj` along `path`. If a child is a function, it\n// is invoked with its parent as context. Returns the value of the final\n// child, or `fallback` if any child is undefined.\nexport default function result(obj, path, fallback) {\n  path = toPath(path);\n  var length = path.length;\n  if (!length) {\n    return isFunction(fallback) ? fallback.call(obj) : fallback;\n  }\n  for (var i = 0; i < length; i++) {\n    var prop = obj == null ? void 0 : obj[path[i]];\n    if (prop === void 0) {\n      prop = fallback;\n      i = length; // Ensure we don't continue iterating.\n    }\n    obj = isFunction(prop) ? prop.call(obj) : prop;\n  }\n  return obj;\n}\n","// Generate a unique integer id (unique within the entire client session).\n// Useful for temporary DOM ids.\nvar idCounter = 0;\nexport default function uniqueId(prefix) {\n  var id = ++idCounter + '';\n  return prefix ? prefix + id : id;\n}\n","import _ from './underscore.js';\n\n// Start chaining a wrapped Underscore object.\nexport default function chain(obj) {\n  var instance = _(obj);\n  instance._chain = true;\n  return instance;\n}\n","import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n// Internal function to execute `sourceFunc` bound to `context` with optional\n// `args`. Determines whether to execute a function as a constructor or as a\n// normal function.\nexport default function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\n  if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n  var self = baseCreate(sourceFunc.prototype);\n  var result = sourceFunc.apply(self, args);\n  if (isObject(result)) return result;\n  return self;\n}\n","import restArguments from './restArguments.js';\nimport executeBound from './_executeBound.js';\nimport _ from './underscore.js';\n\n// Partially apply a function by creating a version that has had some of its\n// arguments pre-filled, without changing its dynamic `this` context. `_` acts\n// as a placeholder by default, allowing any combination of arguments to be\n// pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\nvar partial = restArguments(function(func, boundArgs) {\n  var placeholder = partial.placeholder;\n  var bound = function() {\n    var position = 0, length = boundArgs.length;\n    var args = Array(length);\n    for (var i = 0; i < length; i++) {\n      args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n    }\n    while (position < arguments.length) args.push(arguments[position++]);\n    return executeBound(func, bound, this, this, args);\n  };\n  return bound;\n});\n\npartial.placeholder = _;\nexport default partial;\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport executeBound from './_executeBound.js';\n\n// Create a function bound to a given object (assigning `this`, and arguments,\n// optionally).\nexport default restArguments(function(func, context, args) {\n  if (!isFunction(func)) throw new TypeError('Bind must be called on a function');\n  var bound = restArguments(function(callArgs) {\n    return executeBound(func, bound, context, this, args.concat(callArgs));\n  });\n  return bound;\n});\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getLength from './_getLength.js';\n\n// Internal helper for collection methods to determine whether a collection\n// should be iterated as an array or as an object.\n// Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\nexport default createSizePropertyCheck(getLength);\n","import getLength from './_getLength.js';\nimport isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isArguments from './isArguments.js';\n\n// Internal implementation of a recursive `flatten` function.\nexport default function flatten(input, depth, strict, output) {\n  output = output || [];\n  if (!depth && depth !== 0) {\n    depth = Infinity;\n  } else if (depth <= 0) {\n    return output.concat(input);\n  }\n  var idx = output.length;\n  for (var i = 0, length = getLength(input); i < length; i++) {\n    var value = input[i];\n    if (isArrayLike(value) && (isArray(value) || isArguments(value))) {\n      // Flatten current level of array or arguments object.\n      if (depth > 1) {\n        flatten(value, depth - 1, strict, output);\n        idx = output.length;\n      } else {\n        var j = 0, len = value.length;\n        while (j < len) output[idx++] = value[j++];\n      }\n    } else if (!strict) {\n      output[idx++] = value;\n    }\n  }\n  return output;\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport bind from './bind.js';\n\n// Bind a number of an object's methods to that object. Remaining arguments\n// are the method names to be bound. Useful for ensuring that all callbacks\n// defined on an object belong to it.\nexport default restArguments(function(obj, keys) {\n  keys = flatten(keys, false, false);\n  var index = keys.length;\n  if (index < 1) throw new Error('bindAll must be passed function names');\n  while (index--) {\n    var key = keys[index];\n    obj[key] = bind(obj[key], obj);\n  }\n  return obj;\n});\n","import has from './_has.js';\n\n// Memoize an expensive function by storing its results.\nexport default function memoize(func, hasher) {\n  var memoize = function(key) {\n    var cache = memoize.cache;\n    var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n    if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n    return cache[address];\n  };\n  memoize.cache = {};\n  return memoize;\n}\n","import restArguments from './restArguments.js';\n\n// Delays a function for the given number of milliseconds, and then calls\n// it with the arguments supplied.\nexport default restArguments(function(func, wait, args) {\n  return setTimeout(function() {\n    return func.apply(null, args);\n  }, wait);\n});\n","import partial from './partial.js';\nimport delay from './delay.js';\nimport _ from './underscore.js';\n\n// Defers a function, scheduling it to run after the current call stack has\n// cleared.\nexport default partial(delay, _, 1);\n","import now from './now.js';\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nexport default function throttle(func, wait, options) {\n  var timeout, context, args, result;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function() {\n    var _now = now();\n    if (!previous && options.leading === false) previous = _now;\n    var remaining = wait - (_now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = _now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function() {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n","import restArguments from './restArguments.js';\nimport now from './now.js';\n\n// When a sequence of calls of the returned function ends, the argument\n// function is triggered. The end of a sequence is defined by the `wait`\n// parameter. If `immediate` is passed, the argument function will be\n// triggered at the beginning of the sequence instead of at the end.\nexport default function debounce(func, wait, immediate) {\n  var timeout, previous, args, result, context;\n\n  var later = function() {\n    var passed = now() - previous;\n    if (wait > passed) {\n      timeout = setTimeout(later, wait - passed);\n    } else {\n      timeout = null;\n      if (!immediate) result = func.apply(context, args);\n      // This check is needed because `func` can recursively invoke `debounced`.\n      if (!timeout) args = context = null;\n    }\n  };\n\n  var debounced = restArguments(function(_args) {\n    context = this;\n    args = _args;\n    previous = now();\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n      if (immediate) result = func.apply(context, args);\n    }\n    return result;\n  });\n\n  debounced.cancel = function() {\n    clearTimeout(timeout);\n    timeout = args = context = null;\n  };\n\n  return debounced;\n}\n","import partial from './partial.js';\n\n// Returns the first function passed as an argument to the second,\n// allowing you to adjust arguments, run code before and after, and\n// conditionally execute the original function.\nexport default function wrap(func, wrapper) {\n  return partial(wrapper, func);\n}\n","// Returns a negated version of the passed-in predicate.\nexport default function negate(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n","// Returns a function that is the composition of a list of functions, each\n// consuming the return value of the function that follows.\nexport default function compose() {\n  var args = arguments;\n  var start = args.length - 1;\n  return function() {\n    var i = start;\n    var result = args[start].apply(this, arguments);\n    while (i--) result = args[i].call(this, result);\n    return result;\n  };\n}\n","// Returns a function that will only be executed on and after the Nth call.\nexport default function after(times, func) {\n  return function() {\n    if (--times < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n}\n","// Returns a function that will only be executed up to (but not including) the\n// Nth call.\nexport default function before(times, func) {\n  var memo;\n  return function() {\n    if (--times > 0) {\n      memo = func.apply(this, arguments);\n    }\n    if (times <= 1) func = null;\n    return memo;\n  };\n}\n","import partial from './partial.js';\nimport before from './before.js';\n\n// Returns a function that will be executed at most one time, no matter how\n// often you call it. Useful for lazy initialization.\nexport default partial(before, 2);\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the first key on an object that passes a truth test.\nexport default function findKey(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = keys(obj), key;\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    key = _keys[i];\n    if (predicate(obj[key], key, obj)) return key;\n  }\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Internal function to generate `_.findIndex` and `_.findLastIndex`.\nexport default function createPredicateIndexFinder(dir) {\n  return function(array, predicate, context) {\n    predicate = cb(predicate, context);\n    var length = getLength(array);\n    var index = dir > 0 ? 0 : length - 1;\n    for (; index >= 0 && index < length; index += dir) {\n      if (predicate(array[index], index, array)) return index;\n    }\n    return -1;\n  };\n}\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the first index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(1);\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the last index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(-1);\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Use a comparator function to figure out the smallest index at which\n// an object should be inserted so as to maintain order. Uses binary search.\nexport default function sortedIndex(array, obj, iteratee, context) {\n  iteratee = cb(iteratee, context, 1);\n  var value = iteratee(obj);\n  var low = 0, high = getLength(array);\n  while (low < high) {\n    var mid = Math.floor((low + high) / 2);\n    if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n  }\n  return low;\n}\n","import getLength from './_getLength.js';\nimport { slice } from './_setup.js';\nimport isNaN from './isNaN.js';\n\n// Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\nexport default function createIndexFinder(dir, predicateFind, sortedIndex) {\n  return function(array, item, idx) {\n    var i = 0, length = getLength(array);\n    if (typeof idx == 'number') {\n      if (dir > 0) {\n        i = idx >= 0 ? idx : Math.max(idx + length, i);\n      } else {\n        length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n      }\n    } else if (sortedIndex && idx && length) {\n      idx = sortedIndex(array, item);\n      return array[idx] === item ? idx : -1;\n    }\n    if (item !== item) {\n      idx = predicateFind(slice.call(array, i, length), isNaN);\n      return idx >= 0 ? idx + i : -1;\n    }\n    for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n      if (array[idx] === item) return idx;\n    }\n    return -1;\n  };\n}\n","import sortedIndex from './sortedIndex.js';\nimport findIndex from './findIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the first occurrence of an item in an array,\n// or -1 if the item is not included in the array.\n// If the array is large and already in sort order, pass `true`\n// for **isSorted** to use binary search.\nexport default createIndexFinder(1, findIndex, sortedIndex);\n","import findLastIndex from './findLastIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the last occurrence of an item in an array,\n// or -1 if the item is not included in the array.\nexport default createIndexFinder(-1, findLastIndex);\n","import isArrayLike from './_isArrayLike.js';\nimport findIndex from './findIndex.js';\nimport findKey from './findKey.js';\n\n// Return the first value which passes a truth test.\nexport default function find(obj, predicate, context) {\n  var keyFinder = isArrayLike(obj) ? findIndex : findKey;\n  var key = keyFinder(obj, predicate, context);\n  if (key !== void 0 && key !== -1) return obj[key];\n}\n","import find from './find.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.find`: getting the first\n// object containing specific `key:value` pairs.\nexport default function findWhere(obj, attrs) {\n  return find(obj, matcher(attrs));\n}\n","import optimizeCb from './_optimizeCb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// The cornerstone for collection functions, an `each`\n// implementation, aka `forEach`.\n// Handles raw objects in addition to array-likes. Treats all\n// sparse array-likes as if they were dense.\nexport default function each(obj, iteratee, context) {\n  iteratee = optimizeCb(iteratee, context);\n  var i, length;\n  if (isArrayLike(obj)) {\n    for (i = 0, length = obj.length; i < length; i++) {\n      iteratee(obj[i], i, obj);\n    }\n  } else {\n    var _keys = keys(obj);\n    for (i = 0, length = _keys.length; i < length; i++) {\n      iteratee(obj[_keys[i]], _keys[i], obj);\n    }\n  }\n  return obj;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the results of applying the iteratee to each element.\nexport default function map(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length,\n      results = Array(length);\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    results[index] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// Internal helper to create a reducing function, iterating left or right.\nexport default function createReduce(dir) {\n  // Wrap code that reassigns argument variables in a separate function than\n  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n  var reducer = function(obj, iteratee, memo, initial) {\n    var _keys = !isArrayLike(obj) && keys(obj),\n        length = (_keys || obj).length,\n        index = dir > 0 ? 0 : length - 1;\n    if (!initial) {\n      memo = obj[_keys ? _keys[index] : index];\n      index += dir;\n    }\n    for (; index >= 0 && index < length; index += dir) {\n      var currentKey = _keys ? _keys[index] : index;\n      memo = iteratee(memo, obj[currentKey], currentKey, obj);\n    }\n    return memo;\n  };\n\n  return function(obj, iteratee, memo, context) {\n    var initial = arguments.length >= 3;\n    return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n  };\n}\n","import createReduce from './_createReduce.js';\n\n// **Reduce** builds up a single result from a list of values, aka `inject`,\n// or `foldl`.\nexport default createReduce(1);\n","import createReduce from './_createReduce.js';\n\n// The right-associative version of reduce, also known as `foldr`.\nexport default createReduce(-1);\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// Return all the elements that pass a truth test.\nexport default function filter(obj, predicate, context) {\n  var results = [];\n  predicate = cb(predicate, context);\n  each(obj, function(value, index, list) {\n    if (predicate(value, index, list)) results.push(value);\n  });\n  return results;\n}\n","import filter from './filter.js';\nimport negate from './negate.js';\nimport cb from './_cb.js';\n\n// Return all the elements for which a truth test fails.\nexport default function reject(obj, predicate, context) {\n  return filter(obj, negate(cb(predicate)), context);\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine whether all of the elements pass a truth test.\nexport default function every(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (!predicate(obj[currentKey], currentKey, obj)) return false;\n  }\n  return true;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine if at least one element in the object passes a truth test.\nexport default function some(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (predicate(obj[currentKey], currentKey, obj)) return true;\n  }\n  return false;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport indexOf from './indexOf.js';\n\n// Determine if the array or object contains a given item (using `===`).\nexport default function contains(obj, item, fromIndex, guard) {\n  if (!isArrayLike(obj)) obj = values(obj);\n  if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n  return indexOf(obj, item, fromIndex) >= 0;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport map from './map.js';\nimport deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Invoke a method (with arguments) on every item in a collection.\nexport default restArguments(function(obj, path, args) {\n  var contextPath, func;\n  if (isFunction(path)) {\n    func = path;\n  } else {\n    path = toPath(path);\n    contextPath = path.slice(0, -1);\n    path = path[path.length - 1];\n  }\n  return map(obj, function(context) {\n    var method = func;\n    if (!method) {\n      if (contextPath && contextPath.length) {\n        context = deepGet(context, contextPath);\n      }\n      if (context == null) return void 0;\n      method = context[path];\n    }\n    return method == null ? method : method.apply(context, args);\n  });\n});\n","import map from './map.js';\nimport property from './property.js';\n\n// Convenience version of a common use case of `_.map`: fetching a property.\nexport default function pluck(obj, key) {\n  return map(obj, property(key));\n}\n","import filter from './filter.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.filter`: selecting only\n// objects containing specific `key:value` pairs.\nexport default function where(obj, attrs) {\n  return filter(obj, matcher(attrs));\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the maximum element (or element-based computation).\nexport default function max(obj, iteratee, context) {\n  var result = -Infinity, lastComputed = -Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value > result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed > lastComputed || (computed === -Infinity && result === -Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the minimum element (or element-based computation).\nexport default function min(obj, iteratee, context) {\n  var result = Infinity, lastComputed = Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value < result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed < lastComputed || (computed === Infinity && result === Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArray from './isArray.js';\nimport { slice } from './_setup.js';\nimport isString from './isString.js';\nimport isArrayLike from './_isArrayLike.js';\nimport map from './map.js';\nimport identity from './identity.js';\nimport values from './values.js';\n\n// Safely create a real, live array from anything iterable.\nvar reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\nexport default function toArray(obj) {\n  if (!obj) return [];\n  if (isArray(obj)) return slice.call(obj);\n  if (isString(obj)) {\n    // Keep surrogate pair characters together.\n    return obj.match(reStrSymbol);\n  }\n  if (isArrayLike(obj)) return map(obj, identity);\n  return values(obj);\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport getLength from './_getLength.js';\nimport random from './random.js';\nimport toArray from './toArray.js';\n\n// Sample **n** random values from a collection using the modern version of the\n// [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n// If **n** is not specified, returns a single random element.\n// The internal `guard` argument allows it to work with `_.map`.\nexport default function sample(obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = values(obj);\n    return obj[random(obj.length - 1)];\n  }\n  var sample = toArray(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n}\n","import sample from './sample.js';\n\n// Shuffle a collection.\nexport default function shuffle(obj) {\n  return sample(obj, Infinity);\n}\n","import cb from './_cb.js';\nimport pluck from './pluck.js';\nimport map from './map.js';\n\n// Sort the object's values by a criterion produced by an iteratee.\nexport default function sortBy(obj, iteratee, context) {\n  var index = 0;\n  iteratee = cb(iteratee, context);\n  return pluck(map(obj, function(value, key, list) {\n    return {\n      value: value,\n      index: index++,\n      criteria: iteratee(value, key, list)\n    };\n  }).sort(function(left, right) {\n    var a = left.criteria;\n    var b = right.criteria;\n    if (a !== b) {\n      if (a > b || a === void 0) return 1;\n      if (a < b || b === void 0) return -1;\n    }\n    return left.index - right.index;\n  }), 'value');\n}\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// An internal function used for aggregate \"group by\" operations.\nexport default function group(behavior, partition) {\n  return function(obj, iteratee, context) {\n    var result = partition ? [[], []] : {};\n    iteratee = cb(iteratee, context);\n    each(obj, function(value, index) {\n      var key = iteratee(value, index, obj);\n      behavior(result, value, key);\n    });\n    return result;\n  };\n}\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Groups the object's values by a criterion. Pass either a string attribute\n// to group by, or a function that returns the criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key].push(value); else result[key] = [value];\n});\n","import group from './_group.js';\n\n// Indexes the object's values by a criterion, similar to `_.groupBy`, but for\n// when you know that your index values will be unique.\nexport default group(function(result, value, key) {\n  result[key] = value;\n});\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Counts instances of an object that group by a certain criterion. Pass\n// either a string attribute to count by, or a function that returns the\n// criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key]++; else result[key] = 1;\n});\n","import group from './_group.js';\n\n// Split a collection into two arrays: one whose elements all pass the given\n// truth test, and one whose elements all do not pass the truth test.\nexport default group(function(result, value, pass) {\n  result[pass ? 0 : 1].push(value);\n}, true);\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the number of elements in a collection.\nexport default function size(obj) {\n  if (obj == null) return 0;\n  return isArrayLike(obj) ? obj.length : keys(obj).length;\n}\n","// Internal `_.pick` helper function to determine whether `key` is an enumerable\n// property name of `obj`.\nexport default function keyInObj(value, key, obj) {\n  return key in obj;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport optimizeCb from './_optimizeCb.js';\nimport allKeys from './allKeys.js';\nimport keyInObj from './_keyInObj.js';\nimport flatten from './_flatten.js';\n\n// Return a copy of the object only containing the allowed properties.\nexport default restArguments(function(obj, keys) {\n  var result = {}, iteratee = keys[0];\n  if (obj == null) return result;\n  if (isFunction(iteratee)) {\n    if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n    keys = allKeys(obj);\n  } else {\n    iteratee = keyInObj;\n    keys = flatten(keys, false, false);\n    obj = Object(obj);\n  }\n  for (var i = 0, length = keys.length; i < length; i++) {\n    var key = keys[i];\n    var value = obj[key];\n    if (iteratee(value, key, obj)) result[key] = value;\n  }\n  return result;\n});\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport negate from './negate.js';\nimport map from './map.js';\nimport flatten from './_flatten.js';\nimport contains from './contains.js';\nimport pick from './pick.js';\n\n// Return a copy of the object without the disallowed properties.\nexport default restArguments(function(obj, keys) {\n  var iteratee = keys[0], context;\n  if (isFunction(iteratee)) {\n    iteratee = negate(iteratee);\n    if (keys.length > 1) context = keys[1];\n  } else {\n    keys = map(flatten(keys, false, false), String);\n    iteratee = function(value, key) {\n      return !contains(keys, key);\n    };\n  }\n  return pick(obj, iteratee, context);\n});\n","import { slice } from './_setup.js';\n\n// Returns everything but the last entry of the array. Especially useful on\n// the arguments object. Passing **n** will return all the values in\n// the array, excluding the last N.\nexport default function initial(array, n, guard) {\n  return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n}\n","import initial from './initial.js';\n\n// Get the first element of an array. Passing **n** will return the first N\n// values in the array. The **guard** check allows it to work with `_.map`.\nexport default function first(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[0];\n  return initial(array, array.length - n);\n}\n","import { slice } from './_setup.js';\n\n// Returns everything but the first entry of the `array`. Especially useful on\n// the `arguments` object. Passing an **n** will return the rest N values in the\n// `array`.\nexport default function rest(array, n, guard) {\n  return slice.call(array, n == null || guard ? 1 : n);\n}\n","import rest from './rest.js';\n\n// Get the last element of an array. Passing **n** will return the last N\n// values in the array.\nexport default function last(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[array.length - 1];\n  return rest(array, Math.max(0, array.length - n));\n}\n","import filter from './filter.js';\n\n// Trim out all falsy values from an array.\nexport default function compact(array) {\n  return filter(array, Boolean);\n}\n","import _flatten from './_flatten.js';\n\n// Flatten out an array, either recursively (by default), or up to `depth`.\n// Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\nexport default function flatten(array, depth) {\n  return _flatten(array, depth, false);\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport filter from './filter.js';\nimport contains from './contains.js';\n\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\nexport default restArguments(function(array, rest) {\n  rest = flatten(rest, true, true);\n  return filter(array, function(value){\n    return !contains(rest, value);\n  });\n});\n","import restArguments from './restArguments.js';\nimport difference from './difference.js';\n\n// Return a version of the array that does not contain the specified value(s).\nexport default restArguments(function(array, otherArrays) {\n  return difference(array, otherArrays);\n});\n","import isBoolean from './isBoolean.js';\nimport cb from './_cb.js';\nimport getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// The faster algorithm will not work with an iteratee if the iteratee\n// is not a one-to-one function, so providing an iteratee will disable\n// the faster algorithm.\nexport default function uniq(array, isSorted, iteratee, context) {\n  if (!isBoolean(isSorted)) {\n    context = iteratee;\n    iteratee = isSorted;\n    isSorted = false;\n  }\n  if (iteratee != null) iteratee = cb(iteratee, context);\n  var result = [];\n  var seen = [];\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var value = array[i],\n        computed = iteratee ? iteratee(value, i, array) : value;\n    if (isSorted && !iteratee) {\n      if (!i || seen !== computed) result.push(value);\n      seen = computed;\n    } else if (iteratee) {\n      if (!contains(seen, computed)) {\n        seen.push(computed);\n        result.push(value);\n      }\n    } else if (!contains(result, value)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport uniq from './uniq.js';\nimport flatten from './_flatten.js';\n\n// Produce an array that contains the union: each distinct element from all of\n// the passed-in arrays.\nexport default restArguments(function(arrays) {\n  return uniq(flatten(arrays, true, true));\n});\n","import getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce an array that contains every item shared between all the\n// passed-in arrays.\nexport default function intersection(array) {\n  var result = [];\n  var argsLength = arguments.length;\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var item = array[i];\n    if (contains(result, item)) continue;\n    var j;\n    for (j = 1; j < argsLength; j++) {\n      if (!contains(arguments[j], item)) break;\n    }\n    if (j === argsLength) result.push(item);\n  }\n  return result;\n}\n","import max from './max.js';\nimport getLength from './_getLength.js';\nimport pluck from './pluck.js';\n\n// Complement of zip. Unzip accepts an array of arrays and groups\n// each array's elements on shared indices.\nexport default function unzip(array) {\n  var length = (array && max(array, getLength).length) || 0;\n  var result = Array(length);\n\n  for (var index = 0; index < length; index++) {\n    result[index] = pluck(array, index);\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport unzip from './unzip.js';\n\n// Zip together multiple lists into a single array -- elements that share\n// an index go together.\nexport default restArguments(unzip);\n","import getLength  from './_getLength.js';\n\n// Converts lists into objects. Pass either a single array of `[key, value]`\n// pairs, or two parallel arrays of the same length -- one of keys, and one of\n// the corresponding values. Passing by pairs is the reverse of `_.pairs`.\nexport default function object(list, values) {\n  var result = {};\n  for (var i = 0, length = getLength(list); i < length; i++) {\n    if (values) {\n      result[list[i]] = values[i];\n    } else {\n      result[list[i][0]] = list[i][1];\n    }\n  }\n  return result;\n}\n","// Generate an integer Array containing an arithmetic progression. A port of\n// the native Python `range()` function. See\n// [the Python documentation](https://docs.python.org/library/functions.html#range).\nexport default function range(start, stop, step) {\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (!step) {\n    step = stop < start ? -1 : 1;\n  }\n\n  var length = Math.max(Math.ceil((stop - start) / step), 0);\n  var range = Array(length);\n\n  for (var idx = 0; idx < length; idx++, start += step) {\n    range[idx] = start;\n  }\n\n  return range;\n}\n","import { slice } from './_setup.js';\n\n// Chunk a single array into multiple arrays, each containing `count` or fewer\n// items.\nexport default function chunk(array, count) {\n  if (count == null || count < 1) return [];\n  var result = [];\n  var i = 0, length = array.length;\n  while (i < length) {\n    result.push(slice.call(array, i, i += count));\n  }\n  return result;\n}\n","import _ from './underscore.js';\n\n// Helper function to continue chaining intermediate results.\nexport default function chainResult(instance, obj) {\n  return instance._chain ? _(obj).chain() : obj;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport functions from './functions.js';\nimport { push } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add your own custom functions to the Underscore object.\nexport default function mixin(obj) {\n  each(functions(obj), function(name) {\n    var func = _[name] = obj[name];\n    _.prototype[name] = function() {\n      var args = [this._wrapped];\n      push.apply(args, arguments);\n      return chainResult(this, func.apply(_, args));\n    };\n  });\n  return _;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport { ArrayProto } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add all mutator `Array` functions to the wrapper.\neach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) {\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) {\n        delete obj[0];\n      }\n    }\n    return chainResult(this, obj);\n  };\n});\n\n// Add all accessor `Array` functions to the wrapper.\neach(['concat', 'join', 'slice'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) obj = method.apply(obj, arguments);\n    return chainResult(this, obj);\n  };\n});\n\nexport default _;\n","// Default Export\n// ==============\n// In this module, we mix our bundled exports into the `_` object and export\n// the result. This is analogous to setting `module.exports = _` in CommonJS.\n// Hence, this module is also the entry point of our UMD bundle and the package\n// entry point for CommonJS and AMD users. In other words, this is (the source\n// of) the module you are interfacing with when you do any of the following:\n//\n// ```js\n// // CommonJS\n// var _ = require('underscore');\n//\n// // AMD\n// define(['underscore'], function(_) {...});\n//\n// // UMD in the browser\n// // _ is available as a global variable\n// ```\nimport * as allExports from './index.js';\nimport { mixin } from './index.js';\n\n// Add all of the Underscore functions to the wrapper object.\nvar _ = mixin(allExports);\n// Legacy Node.js API.\n_._ = _;\n// Export the Underscore API.\nexport default _;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.F = {};\n__webpack_require__.E = (chunkId) => {\n\tObject.keys(__webpack_require__.F).map((key) => {\n\t\t__webpack_require__.F[key](chunkId);\n\t});\n}","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"20230623-\" + ({\"143\":\"app\",\"345\":\"app-frame\",\"585\":\"outreach\",\"624\":\"formservice\",\"818\":\"auth\",\"891\":\"formapp\"}[chunkId] || chunkId) + \"-\" + {\"25\":\"17c13e3ae5a53d836d67\",\"70\":\"c845995108ac5026e241\",\"143\":\"d2e073835caa6587686f\",\"223\":\"c242812cffedbca55315\",\"245\":\"dc805fc47d857102ed62\",\"306\":\"c5bf7c2a310e64791c30\",\"345\":\"0b9eea3af45b769144a4\",\"358\":\"6837fbd90ad1cc71935f\",\"443\":\"1146df00654aadc52549\",\"585\":\"88c91510a5be72b1b71d\",\"624\":\"9f09586d28274c49cfd8\",\"675\":\"a05bcb68e560baadc832\",\"729\":\"a1e03b978add060defd8\",\"772\":\"94f92f1e799e0adfc0d9\",\"818\":\"02e30b438680b7d61fd7\",\"891\":\"185bd5fc1a6f98727dd8\",\"911\":\"7e75679b0b53f856dbc8\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"20230623-\" + ({\"143\":\"app\",\"345\":\"app-frame\",\"585\":\"outreach\",\"818\":\"auth\",\"891\":\"formapp\"}[chunkId] || chunkId) + \"-\" + {\"143\":\"6cd3e7599803e45509f4\",\"345\":\"55b7925a10a671788c33\",\"585\":\"7582e65d2c413b0baf05\",\"772\":\"ec11b771f57f8d03823d\",\"818\":\"30e0707a13c9495c185b\",\"891\":\"35b45460041b5af097c1\",\"911\":\"40f154c62ed66bb35cbd\"}[chunkId] + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","if (typeof document === \"undefined\") return;\nvar createStylesheet = (chunkId, fullhref, oldTag, resolve, reject) => {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tvar onLinkComplete = (event) => {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + realHref + \")\");\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tif (linkTag.parentNode) linkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\tif (oldTag) {\n\t\toldTag.parentNode.insertBefore(linkTag, oldTag.nextSibling);\n\t} else {\n\t\tdocument.head.appendChild(linkTag);\n\t}\n\treturn linkTag;\n};\nvar findStylesheet = (href, fullhref) => {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = (chunkId) => {\n\treturn new Promise((resolve, reject) => {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, null, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.miniCss = (chunkId, promises) => {\n\tvar cssChunks = {\"143\":1,\"345\":1,\"585\":1,\"772\":1,\"818\":1,\"891\":1,\"911\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(() => {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, (e) => {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n__webpack_require__.F.j = (chunkId) => {\n\tif((!__webpack_require__.o(installedChunks, chunkId) || installedChunks[chunkId] === undefined) && true) {\n\t\tinstalledChunks[chunkId] = null;\n\t\tvar link = document.createElement('link');\n\n\t\tif (__webpack_require__.nc) {\n\t\t\tlink.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tlink.rel = \"prefetch\";\n\t\tlink.as = \"script\";\n\t\tlink.href = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\tdocument.head.appendChild(link);\n\t}\n};\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkcare_ops_frontend\"] = globalThis[\"webpackChunkcare_ops_frontend\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.O(0, [179], () => {\n\t[729,25,818].map(__webpack_require__.E);\n}, 5);","try{self[\"workbox:window:6.5.3\"]&&_()}catch(n){}function n(n,t){return new Promise((function(r){var e=new MessageChannel;e.port1.onmessage=function(n){r(n.data)},n.postMessage(t,[e.port2])}))}function t(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,\"value\"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function e(n,t){var e;if(\"undefined\"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if(\"string\"==typeof n)return r(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return\"Object\"===e&&n.constructor&&(e=n.constructor.name),\"Map\"===e||\"Set\"===e?Array.from(n):\"Arguments\"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(n,t):void 0}}(n))||t&&n&&\"number\"==typeof n.length){e&&(n=e);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}return(e=n[Symbol.iterator]()).next.bind(e)}try{self[\"workbox:core:6.5.3\"]&&_()}catch(n){}var i=function(){var n=this;this.promise=new Promise((function(t,r){n.resolve=t,n.reject=r}))};function o(n,t){var r=location.href;return new URL(n,r).href===new URL(t,r).href}var u=function(n,t){this.type=n,Object.assign(this,t)};function a(n,t,r){return r?t?t(n):n:(n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n)}function c(){}var f={type:\"SKIP_WAITING\"};function s(n,t){if(!t)return n&&n.then?n.then(c):Promise.resolve()}var v=function(r){var e,c;function v(n,t){var e,c;return void 0===t&&(t={}),(e=r.call(this)||this).nn={},e.tn=0,e.rn=new i,e.en=new i,e.on=new i,e.un=0,e.an=new Set,e.cn=function(){var n=e.fn,t=n.installing;e.tn>0||!o(t.scriptURL,e.sn.toString())||performance.now()>e.un+6e4?(e.vn=t,n.removeEventListener(\"updatefound\",e.cn)):(e.hn=t,e.an.add(t),e.rn.resolve(t)),++e.tn,t.addEventListener(\"statechange\",e.ln)},e.ln=function(n){var t=e.fn,r=n.target,i=r.state,o=r===e.vn,a={sw:r,isExternal:o,originalEvent:n};!o&&e.mn&&(a.isUpdate=!0),e.dispatchEvent(new u(i,a)),\"installed\"===i?e.wn=self.setTimeout((function(){\"installed\"===i&&t.waiting===r&&e.dispatchEvent(new u(\"waiting\",a))}),200):\"activating\"===i&&(clearTimeout(e.wn),o||e.en.resolve(r))},e.dn=function(n){var t=e.hn,r=t!==navigator.serviceWorker.controller;e.dispatchEvent(new u(\"controlling\",{isExternal:r,originalEvent:n,sw:t,isUpdate:e.mn})),r||e.on.resolve(t)},e.gn=(c=function(n){var t=n.data,r=n.ports,i=n.source;return a(e.getSW(),(function(){e.an.has(i)&&e.dispatchEvent(new u(\"message\",{data:t,originalEvent:n,ports:r,sw:i}))}))},function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];try{return Promise.resolve(c.apply(this,n))}catch(n){return Promise.reject(n)}}),e.sn=n,e.nn=t,navigator.serviceWorker.addEventListener(\"message\",e.gn),e}c=r,(e=v).prototype=Object.create(c.prototype),e.prototype.constructor=e,e.__proto__=c;var h,l,m,w=v.prototype;return w.register=function(n){var t=(void 0===n?{}:n).immediate,r=void 0!==t&&t;try{var e=this;return function(n,t){var r=n();if(r&&r.then)return r.then(t);return t(r)}((function(){if(!r&&\"complete\"!==document.readyState)return s(new Promise((function(n){return window.addEventListener(\"load\",n)})))}),(function(){return e.mn=Boolean(navigator.serviceWorker.controller),e.yn=e.pn(),a(e.bn(),(function(n){e.fn=n,e.yn&&(e.hn=e.yn,e.en.resolve(e.yn),e.on.resolve(e.yn),e.yn.addEventListener(\"statechange\",e.ln,{once:!0}));var t=e.fn.waiting;return t&&o(t.scriptURL,e.sn.toString())&&(e.hn=t,Promise.resolve().then((function(){e.dispatchEvent(new u(\"waiting\",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),e.hn&&(e.rn.resolve(e.hn),e.an.add(e.hn)),e.fn.addEventListener(\"updatefound\",e.cn),navigator.serviceWorker.addEventListener(\"controllerchange\",e.dn),e.fn}))}))}catch(n){return Promise.reject(n)}},w.update=function(){try{return this.fn?s(this.fn.update()):void 0}catch(n){return Promise.reject(n)}},w.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},w.messageSW=function(t){try{return a(this.getSW(),(function(r){return n(r,t)}))}catch(n){return Promise.reject(n)}},w.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&n(this.fn.waiting,f)},w.pn=function(){var n=navigator.serviceWorker.controller;return n&&o(n.scriptURL,this.sn.toString())?n:void 0},w.bn=function(){try{var n=this;return function(n,t){try{var r=n()}catch(n){return t(n)}if(r&&r.then)return r.then(void 0,t);return r}((function(){return a(navigator.serviceWorker.register(n.sn,n.nn),(function(t){return n.un=performance.now(),t}))}),(function(n){throw n}))}catch(n){return Promise.reject(n)}},h=v,(l=[{key:\"active\",get:function(){return this.en.promise}},{key:\"controlling\",get:function(){return this.on.promise}}])&&t(h.prototype,l),m&&t(h,m),v}(function(){function n(){this.Pn=new Map}var t=n.prototype;return t.addEventListener=function(n,t){this.Sn(n).add(t)},t.removeEventListener=function(n,t){this.Sn(n).delete(t)},t.dispatchEvent=function(n){n.target=this;for(var t,r=e(this.Sn(n.type));!(t=r()).done;){(0,t.value)(n)}},t.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},n}());export{v as Workbox,u as WorkboxEvent,n as messageSW};\n//# sourceMappingURL=workbox-window.prod.es5.mjs.map\n","import 'core-js/modules/web.dom-exception.stack';\nimport 'core-js/modules/web.structured-clone';\nimport { Workbox } from 'workbox-window';\n\nimport { fetchConfig, versions, appConfig } from './config';\nimport { initDataDog } from './datadog';\n\nimport getRootRoute from 'js/utils/root-route';\n\nif ('serviceWorker' in navigator) {\n  const wb = new Workbox('/sw.js');\n\n  wb.register();\n}\n\nfunction startOutreach() {\n  import(/* webpackChunkName: \"outreach\" */'./outreach/index')\n    .then(({ startOutreachApp }) => {\n      startOutreachApp();\n    });\n}\n\nfunction startForm() {\n  import(/* webpackChunkName: \"formapp\" */'./formapp')\n    .then(({ startFormApp }) => {\n      startFormApp();\n    });\n}\n\nfunction start() {\n  import(/* webpackChunkName: \"app\" */'./app')\n    .then(({ startApp }) => {\n      startApp();\n    });\n}\n\nfunction startFormService() {\n  import(/* webpackChunkName: \"formservice\" */'./formservice')\n    .then(({ startFormServiceApp }) => {\n      startFormServiceApp();\n    });\n}\n\nfunction startAuth() {\n  import(/* webpackPrefetch: true, webpackChunkName: \"auth\" */ './auth')\n    .then(({ login }) => {\n      login(start);\n    });\n}\n\nfunction startApps({ isForm, isOutreach }) {\n  if (isOutreach) {\n    startOutreach();\n    return;\n  }\n\n  if (isForm) {\n    startForm();\n    return;\n  }\n\n  startAuth();\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const rootRoute = getRootRoute();\n  const isFormService = rootRoute === 'formservice';\n\n  if (isFormService) {\n    startFormService();\n    return;\n  }\n\n  const isForm = rootRoute === 'formapp';\n  const isOutreach = rootRoute === 'outreach';\n\n  if ((_DEVELOP_ || _E2E_) && sessionStorage.getItem('cypress')) {\n    versions.frontend = 'cypress';\n    appConfig.name = 'Cypress Clinic';\n    appConfig.cypress = sessionStorage.getItem('cypress');\n\n    startApps({ isForm, isOutreach });\n    return;\n  }\n\n  fetchConfig(() => {\n    initDataDog({ isForm });\n\n    startApps({ isForm, isOutreach });\n  });\n});\n"],"names":["deferred","inProgress","dataWebpackPrefix","auth0Config","datadogConfig","appConfig","versions","fetchConfig","success","fetch","URLSearchParams","_","_NOW_","then","response","json","config","extend","auth0","datadog","app","ConsoleApiName","log","debug","info","warn","error","display","api","args","_i","arguments","length","Object","prototype","hasOwnProperty","call","apply","catchUserErrors","fn","errorMsg","err","console","bind","onMonitorErrorCollected","ExperimentalFeature","__spreadArray","to","from","pack","ar","i","l","Array","slice","concat","debugMode","setDebugMode","newDebugMode","monitored","__","descriptor","originalMethod","value","monitor","this","callMonitored","context","e","displayIfDebugEnabled","includes","candidate","search","indexOf","arrayFrom","arrayLike","array","Set","forEach","item","push","find","predicate","objectValues","object","keys","map","key","objectEntries","startsWith","cssEscape","str","window","CSS","escape","replace","ch","asCodePoint","charCodeAt","toString","target","toAssign","source","makePublicApi","stub","publicApi","version","onReady","callback","defineProperty","get","enumerable","defineGlobal","global","name","existingGlobalVariable","q","getGlobalObject","globalThis","configurable","globalObject","_dd_temp_","self","enabledExperimentalFeatures","isExperimentalFeatureEnabled","featureName","has","ONE_KIBI_BYTE","ONE_MEBI_BYTE","HAS_MULTI_BYTES_CHARACTERS","computeBytesCount","test","undefined","TextEncoder","encode","Blob","size","getZoneJsOriginalValue","original","browserWindow","Zone","__symbol__","delay","timeoutId","throttle","wait","options","pendingExecutionWithParameters","pendingTimeoutId","needLeadingExecution","leading","needTrailingExecution","trailing","inWaitPeriod","throttled","parameters","cancel","noop","getType","isArray","mergeInto","destination","circularReferenceChecker","WeakSet","set_1","hasAlreadyBeenSeen","add","createCircularReferenceChecker","Date","getTime","RegExp","flags","ignoreCase","multiline","sticky","unicode","join","merged_1","merged","deepClone","combine","sources","_a","sources_1","jsonStringify","replacer","space","JSON","stringify","restoreObjectPrototypeToJson","detachToJsonMethod","restoreArrayPrototypeToJson","restoreValuePrototypeToJson","getPrototypeOf","restoreValueToJson","objectToJson","toJSON","SANITIZE_DEFAULT_MAX_CHARACTER_COUNT","JSON_PATH_ROOT_ELEMENT","KEY_DECORATION_LENGTH","sanitize","maxCharacterCount","containerQueue","visitedObjectsWithPath","WeakMap","sanitizedData","sanitizeProcessor","accumulatedCharacterCount","containerToProcess","shift","separatorLength","targetData","path","warnOverCharacterLimit","parentPath","queue","sourceToSanitize","tryToApplyToJSON","description","sanitizedSource","Event","isTrusted","match","sanitizeObjects","sourceAsObject","currentPath","set","changeType","CUSTOMER_DATA_BYTES_LIMIT","warnIfCustomerDataLimitReached","bytesCount","customerDataType","createContextManager","computeBytesCountImpl","bytesCountCache","alreadyWarned","computeBytesCountThrottled","getBytesCount","remove","newContext","getContext","setContext","SANITIZE_INPUTS","setContextProperty","property","removeContextProperty","clearContext","BoundedBuffer","buffer","splice","drain","performDraw","threshold","Math","random","round","num","decimals","toFixed","isPercentage","isNumber","navigationStart","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_YEAR","relativeToClocks","relative","timeStamp","relativeTime","correctedOrigin","dateNow","performance","now","getNavigationStart","addDuration","getTimeStamp","toServerDuration","duration","timeStampNow","relativeNow","clocksNow","clocksOrigin","elapsed","start","end","a","b","getRelativeTime","timestamp","timing","generateUUID","placeholder","parseInt","findCommaSeparatedValue","rawString","matches","exec","safeTruncate","suffix","lastChar","correctedLength","getCurrentSiteCache","COOKIE_ACCESS_DELAY","setCookie","expireDelay","date","setTime","expires","toUTCString","sameSite","crossSite","domain","secure","document","cookie","getCookie","deleteCookie","areCookiesAuthorized","testCookieName","testCookieValue","isCookieCorrectlySet","SYNTHETICS_TEST_ID_COOKIE_NAME","SYNTHETICS_RESULT_ID_COOKIE_NAME","SYNTHETICS_INJECTS_RUM_COOKIE_NAME","willSyntheticsInjectRum","Boolean","_DATADOG_SYNTHETICS_INJECTS_RUM","getSyntheticsTestId","_DATADOG_SYNTHETICS_PUBLIC_ID","getSyntheticsResultId","_DATADOG_SYNTHETICS_RESULT_ID","getEventBridge","eventBridgeGlobal","DatadogEventBridge","getAllowedWebViewHosts","parse","send","eventType","event","canUseEventBridge","currentHost","location","hostname","bridge","some","allowedHost","UNKNOWN_FUNCTION","computeStackTrace","ex","stack","stackProperty","tryToGetString","exString","String","split","line","stackFrame","parts","CHROME_LINE_RE","isNative","isEval","submatch","CHROME_EVAL_RE","column","func","url","parseChromeLine","CHROME_ANONYMOUS_FUNCTION_RE","parseChromeAnonymousLine","WINJS_LINE_RE","parseWinLine","GECKO_LINE_RE","GECKO_EVAL_RE","parseGeckoLine","message","fileUrl","filePosition","PROVIDED_ERROR_MESSAGE_PREFIX","ErrorSource","AGENT","CONSOLE","CUSTOM","LOGGER","NETWORK","SOURCE","REPORT","computeRawError","stackTrace","originalError","handlingStack","startClocks","nonErrorPrefix","handling","Error","sanitizedError","type","toStackTraceString","causes","flattenErrorCauses","result","formatErrorMessage","frame","createHandlingStack","formattedStack","parentSource","currentError","cause","sanitizeUser","newUser","user","checkUser","isValid","shallowClone","objectHasValue","isEmptyObject","normalizeUrl","buildUrl","getLinkElementOrigin","href","getOrigin","base","supportedURL","isURLSupported","originalURL","getSupportedUrl","doc","anchorElement","createElement","baseElement","implementation","createHTMLDocument","head","appendChild","body","URL","element","origin","sanitizedHost","host","protocol","INTAKE_SITE_STAGING","INTAKE_SITE_US1","INTAKE_SITE_EU1","INTAKE_SITE_AP1","ENDPOINTS","logs","rum","sessionReplay","INTAKE_TRACKS","createEndpointBuilder","initConfiguration","endpointType","configurationTags","buildUrlWithParameters","proxy","proxyUrl","normalizedProxyUrl_1","encodeURIComponent","site","internalAnalyticsSubdomain","domainParts","extension","pop","subdomain","buildEndpointHost","normalizedProxyUrl_2","createEndpointUrlWithParametersBuilder","build","flushReason","retry","clientToken","tags","COLLECT_FLUSH_REASON","count","lastFailureStatus","reverse","buildEndpointParameters","urlPrefix","TAG_SIZE_LIMIT","FORBIDDEN_CHARACTERS","buildTag","rawValue","valueSizeLimit","sanitizedValue","DefaultPrivacyLevel","ALLOW","MASK","MASK_USER_INPUT","validateAndBuildConfiguration","_b","_c","sessionSampleRate","sampleRate","telemetrySampleRate","telemetryConfigurationSampleRate","enableExperimentalFeatures","filter","flag","beforeSend","cookieOptions","buildCookieOptions","service","silentMultipleInit","batchBytesLimit","eventRateLimiterThreshold","maxTelemetryEventsPerPage","flushTimeout","batchMessagesLimit","messageBytesLimit","configuration","env","datacenter","buildTags","endpointBuilders","logsEndpointBuilder","rumEndpointBuilder","sessionReplayEndpointBuilder","computeEndpointBuilders","intakeUrlPrefixes","builder","replicaConfiguration","replica","replicaEndpointBuilders","applicationId","computeReplicaConfiguration","isIntakeUrl","intakeEndpoint","computeTransportConfiguration","useSecureSessionCookie","useCrossSiteSessionCookie","mustUseSecureCookie","trackSessionAcrossSubdomains","domainLevels","candidateDomain","getCurrentSite","serializeConfiguration","session_sample_rate","telemetry_sample_rate","telemetry_configuration_sample_rate","use_before_send","use_cross_site_session_cookie","use_secure_session_cookie","use_proxy","silent_multiple_init","track_session_across_subdomains","track_resources","trackResources","track_long_task","trackLongTasks","isMatchOption","itemType","matchList","list","useStartsWith","clearTracingIfNeeded","status","isAborted","traceId","spanId","traceSampled","injectHeadersIfTracingAllowed","sessionManager","inject","getCrypto","findTrackedSession","propagatorTypes","tracingHeaders","tracingOption","allowedTracingUrls","TraceIdentifier","traceSampleRate","propagatorType","toDecimalString","traceparent","toPaddedHexadecimalString","b3","crypto","msCrypto","Uint8Array","getRandomValues","radix","high","readInt32","low","mod","floor","offset","getSelectedTracingPropagators","usedTracingPropagators","option","allowedTracingOrigins","buildCommonContext","globalContextManager","userContextManager","recorderApi","hasReplay","isRecording","sendToExtension","payload","__ddBrowserSdkExtensionCallback","Observable","onFirstSubscribe","observers","subscribe","f","_this","onLastUnsubscribe","unsubscribe","other","notify","data","observer","mergeObservables","observables","globalObservable","subscriptions","observable","subscription","addEventListener","eventTarget","eventName","listener","addEventListeners","eventNames","once","capture","passive","wrappedListener","stop","PageExitReason","HIDDEN","UNLOADING","PAGEHIDE","FROZEN","createPageExitObservable","pagehideEnabled","stopListeners","reason","visibilityState","stopBeforeUnloadListener","isPageExitReason","onRawTelemetryEventCollected","TelemetryType","ALLOWED_FRAME_URLS","TELEMETRY_EXCLUDED_SITES","telemetryConfiguration","maxEventsPerPage","sentEventCount","telemetryEnabled","telemetryConfigurationEnabled","startTelemetry","telemetryService","contextProvider","rawEvent","event_1","_dd","format_version","telemetry","experimental_features","toTelemetryEvent","addTelemetryError","setContextProvider","provider","enabled","isTelemetryReplicationAllowed","addTelemetryDebug","addTelemetry","kind","scrubCustomerFrames","formatError","addTelemetryConfiguration","allowedFrameUrl","getMutationObserverConstructor","constructor","MutationObserver","originalInstance","runOnReadyState","expectedReadyState","readyState","FAKE_INITIAL_DOCUMENT","RESOURCE_TYPES","initiatorType","areInOrder","numbers","computePerformanceResourceDetails","entry","validEntry","toValidEntry","startTime","fetchStart","redirectStart","redirectEnd","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","details","download","formatTiming","responseEnd","first_byte","connect","ssl","dns","hasRedirection","redirect","computeSize","decodedBodySize","isAllowedRequestUrl","isTextNode","node","nodeType","Node","TEXT_NODE","isElementNode","ELEMENT_NODE","isNodeShadowHost","shadowRoot","isNodeShadowRoot","DOCUMENT_FRAGMENT_NODE","getParentNode","parentNode","viewportObservable","viewport","INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD","getDocumentTraceId","traceIdMeta","querySelector","traceTimeMeta","createDocumentTraceData","content","getDocumentTraceDataFromMeta","comment","childNodes","getTraceCommentFromNode","findTraceComment","getDocumentTraceDataFromComment","traceTime","rawTraceTime","Number","COMMENT_NODE","isCommentNode","supportPerformanceObject","supportPerformanceTimingEvent","entryType","PerformanceObserver","supportedEntryTypes","startPerformanceCollection","lifeCycle","handleRumPerformanceEntries","forcedAttributes","getEntriesByType","relativePerformanceTiming","computeRelativePerformanceTiming","performanceEntries_1","getEntries","handlePerformanceEntryList_1","entries","mainEntries","experimentalEntries","observe","buffered","entryTypes","clearResourceTimings","sendFakeTiming","retrieveNavigationTiming","startTimeStamp","timingSent","removeEventListeners","evt","cancelable","processingStart","sendTiming","sendTimingIfPointerIsNotCancelled","retrieveFirstInputTiming","numberKey","timingElement","rumAllowedPerformanceEntries","loadEventEnd","isIncompleteNavigation","isForbiddenResource","createEventRateLimiter","limit","onLimitReached","eventCount","allowNextEvent","isLimitReached","initViewportObservable","updateDimension","getViewportDimension","visual","visualViewport","width","scale","height","innerWidth","innerHeight","getDisplayContext","CLICKMAP","viewportDimension","current","field","isValidObjectContaining","fields","VIEW_EVENTS_MODIFIABLE_FIELD_PATHS","OTHER_EVENTS_MODIFIABLE_FIELD_PATHS","startRumAssembly","viewContexts","urlContexts","actionContexts","reportError","eventRateLimiters","syntheticsContext","testId","resultId","test_id","result_id","injected","getSyntheticsContext","ciTestContext","testExecutionId","Cypress","test_execution_id","getCiTestContext","rawRumEvent","domainContext","savedCommonContext","customerContext","viewContext","findView","urlContext","findUrl","session","commonContext","actionId","findActionId","serverRumEvent","drift","plan","browser_sdk_version","application","id","view","referrer","action","synthetics","ci_test","has_replay","usr","modifiableFieldPaths","modifier","clone","originalValue","newValue","originalType","newType","limitModification","shouldSend","MAX_NUMBER_OF_SELECTABLE_FOREGROUND_PERIODS","MAX_NUMBER_OF_STORED_FOREGROUND_PERIODS","foregroundPeriods","addNewForegroundPeriod","currentForegroundPeriod","closeForegroundPeriod","isInForegroundAt","foregroundPeriod","selectInForegroundPeriodsFor","eventStartTime","eventEndTime","filteredForegroundPeriods","earliestIndex","max","startDuration","endDuration","unshift","xhrObservable","LifeCycle","callbacks","eventCallbacks","SESSION_TIME_OUT_DELAY","SESSION_EXPIRATION_DELAY","END_OF_TIMES","Infinity","CLEAR_OLD_VALUES_INTERVAL","ValueHistory","clearOldValuesInterval","clearOldValues","endTime","index","close","closeActive","latestEntry","findAll","reset","oldTimeThreshold","VIEW_CONTEXT_TIME_OUT_DELAY","instrumentMethod","method","instrumentationFactory","instrumentation","instrumentationWrapper","instrumentMethodAndCallOriginal","before","after","instrumentSetter","originalDescriptor","getOwnPropertyDescriptor","thisObject","fetchObservable","xhrContexts","initXhrObservable","stopInstrumentingStart","XMLHttpRequest","openXhr","stopInstrumentingSend","sendXhr","stopInstrumentingAbort","abortXhr","state","startContext","xhr","hasBeenReported","stopInstrumentingOnReadyStateChange","DONE","onEnd","unsubscribeLoadEndListener","completeContext","initFetchObservable","originalFetch","input","init","responsePromise","afterSend","Request","reportFetch","DOMException","code","ABORT_ERR","responseType","isServerError","tryToClone","readBytesFromStream","stream","reader","getReader","chunks","readBytesCount","onDone","bytes","limitExceeded","catch","collectStreamBody","completeBuffer_1","offset_1","chunk","bytesLimit","readMore","read","done","nextRequestIndex","getNextRequestIndex","trackEventCounts","isChildEvent","onChange","eventCounts","errorCount","longTaskCount","resourceCount","actionCount","frustrationCount","frustration","PAGE_ACTIVITY_VALIDATION_DELAY","PAGE_ACTIVITY_END_DELAY","waitPageActivityEnd","domMutationObservable","pageActivityEndCallback","maxDuration","pageActivityObservable","firstRequestIndex","pendingRequestsCount","notifyPageActivity","isExcludedUrl","startEvent","requestIndex","request","stopTrackingWindowOpen","s","isBusy","createPageActivityObservable","pageActivityEndTimeoutId","hasCompleted","validationTimeoutId","complete","hadActivity","maxDurationTimeoutId","pageActivitySubscription","lastChangeTime","doWaitPageActivityEnd","requestUrl","excludedActivityUrls","MAX_DURATION_BETWEEN_CLICKS","MAX_DISTANCE_BETWEEN_CLICKS","DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE","getActionNameFromElementProgrammatically","targetElement","programmaticAttribute","elementWithAttribute","supportsElementClosestResult","HTMLElement","closest","hasAttribute","parentElement","truncate","normalizeWhitespace","getAttribute","trim","supportsLabelPropertyResult","priorityStrategies","userProgrammaticAttribute","HTMLInputElement","labels","getTextualContent","label","ownerDocument","querySelectorAll","htmlFor","nodeName","labelledByAttribute","refElement","getElementById","fallbackStrategies","MAX_PARENTS_TO_CONSIDER","getActionNameFromElementForStrategies","strategies","recursionCounter","strategies_1","name_1","strategy","trimmedName","isContentEditable","text_1","innerText","removeTextFromElements","query","element_1","textToReplace","documentMode","textContent","supportScopeSelectorCache","STABLE_ATTRIBUTES","GLOBALLY_UNIQUE_SELECTOR_GETTERS","getStableAttributeSelector","isGeneratedValue","UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS","tagName","classList","className","getSelectorFromElement","actionNameAttribute","targetElementSelector","globallyUniqueSelector","findSelector","isSelectorUniqueGlobally","isSelectorUniqueAmongSiblings","combineSelector","getPositionSelector","selector","getAttributeSelector","STABLE_ATTRIBUTES_1","attributeName","sibling","firstElementChild","elementIndex","nextElementSibling","selectorGetters","childSelector","selectorGetters_1","elementSelector","selectorGetter","fullSelector","supportScopeSelector","parent","child","isSelectionEmpty","selection","getSelection","isCollapsed","isValidPointerEvent","Element","isPrimary","MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE","DEAD_CLICK_EXCLUDE_SELECTOR","isDead","click","hasPageActivity","getUserActivity","msMatchesSelector","CLICK_ACTION_MAX_DURATION","ACTION_CONTEXT_TIME_OUT_DELAY","trackClickActions","currentClickChain","history","stopObservable","stopClickChain","stopActionEventsListener","selectionEmptyAtPointerDown","clickContext","onPointerDown","onPointerUp","userActivity","listeners","localUserActivity_1","listenActionEvents","pointerDownEvent","trackFrustrations","clickActionBase","position","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","computeClickActionBase","hadActivityOnPointerDown","pageActivityEndEvent","processPointerDown","appendClickToClickChain","newClick","stopWaitPageActivityEnd","discard","validate","viewEndedSubscription","endClocks","stopSubscription","startClickAction","tryAppend","rageClick_1","firstClick","onFinalize","maxDurationBetweenClicksTimeout","bufferedClicks","appendClick","tryFinalize","dontAcceptMoreClick","every","isStopped","first","second","sqrt","pow","createClickChain","clicks","rageClick","isRage","addFrustration","hasError","hasSelectionChanged","computeFrustration","finalizeClicks","activityEndTime","historyEntry","eventCountsSubscription","frustrationTypes","newActivityEndTime","frustrationType","domEvents","clickAction","counts","events","processAction","foregroundContexts","autoActionProperties","isAutoAction","loading_time","long_task","resource","actionEvent","inForeground","in_foreground","ERROR_TYPES_RE","trackRuntimeError","errorObservable","stopInstrumentingOnError","lineNo","columnNo","errorObj","location_1","msg","groups","instrumentOnError","stopInstrumentingOnUnhandledRejection","instrumentUnhandledRejection","consoleObservablesByApi","initConsoleObservable","apis","consoleObservables","originalConsoleApi","params","param","formatConsoleParameters","firstErrorParam","buildConsoleLog","createConsoleObservable","trackFirstHiddenSingleton","RawReportType","intervention","deprecation","cspViolation","initReportObservable","blockedURI","effectiveDirective","subtype","buildStack","originalPolicy","sourceFile","lineNumber","columnNumber","buildRawReportFromCspViolation","reportTypes","ReportingObserver","handleReports","reports","report","buildRawReportFromReport","types","disconnect","createReportObservable","startResourceCollection","pageStateHistory","matchingTiming","sameNameEntries","getEntriesByName","candidates","matchRequestTiming","correspondingTimingOverrides","computePerformanceEntryMetrics","tracingInfo","span_id","trace_id","rule_psr","getRulePsr","computeRequestTracingInfo","indexingInfo","computeIndexingInfo","pageStateInfo","computePageStateInfo","resourceEvent","status_code","performanceEntry","requestInput","requestInit","processRequest","entries_1","processResourceEntry","isValidUrl","pathname","getPathName","RESOURCE_TYPES_1","isType","computeResourceKind","entryMetrics","computeEntryTracingInfo","resourceStart","discarded","resourceAllowed","RESOURCE_PAGE_STATES","page_states","page_was_discarded","wasDiscarded","trackFirstHidden","TIMING_MAXIMUM_DELAY","trackInitialViewTimings","timings","setTimings","newTimings","stopNavigationTracking","domComplete","domContentLoaded","domContentLoadedEventEnd","domInteractive","loadEvent","firstByte","trackNavigationTimings","stopFCPTracking","firstHidden","fcpEntry","firstContentfulPaint","trackFirstContentfulPaintTiming","stopLCPTracking","firstInteractionTimestamp","stopEventListener","unsubscribeLifeCycle","lcpEntry","findLast","largestContentfulPaint","trackLargestContentfulPaintTiming","stopFIDTracking","firstInputEntry","firstInputDelay","firstInputTime","trackFirstInputTimings","trackViewMetrics","scheduleViewUpdate","loadingType","viewStart","stopCLSTracking","viewMetrics","loadType","isWaitingForLoadEvent","isWaitingForActivityLoadingTime","loadingTimeCandidates","invokeCallbackIfAllCandidatesAreReceived","newLoadingTime","loadingTime","setLoadEvent","trackLoadingTime","stopLoadingTimeTracking","cumulativeLayoutShift","maxClsValue","update","slidingSessionWindow","hadRecentInput","trackCumulativeLayoutShift","KEEP_TRACKING_EVENT_COUNTS_AFTER_VIEW_DELAY","THROTTLE_VIEW_UPDATE_PERIOD","SESSION_KEEP_ALIVE_INTERVAL","newView","initialLocation","viewOptions","customTimings","documentVersion","triggerViewUpdate","cancelScheduleViewUpdate","stopViewMetricsTracking","viewId","scheduleStop","trackViewEventCounts","scheduleStopEventCountsTracking","currentEnd","isActive","scheduleUpdate","clocks","triggerUpdate","updateTimings","addTiming","time","looksLikeRelativeTime","sanitized","sanitizeTiming","getPathFromHash","hash","startViewCollection","locationChangeObservable","featureFlagContexts","initialViewOptions","replayStats","getReplayStats","featureFlagContext","findFeatureFlagEvaluations","viewEvent","document_version","replay_stats","cumulative_layout_shift","dom_complete","dom_content_loaded","dom_interactive","first_contentful_paint","first_input_delay","first_input_time","is_active","largest_contentful_paint","load_event","loading_type","time_spent","in_foreground_periods","feature_flags","custom_timings","newObject","mapValues","processViewUpdate","areViewsTrackedAutomatically","locationChangeSubscription","initialView","stopInitialViewTracking","currentView","stopViewLifeCycle","trackViewChange","pageExitEvent","keepAliveInterval","startViewLifeCycle","currentLocation","otherLocation","correspondingId","oldLocation","newLocation","substr","renewViewOnLocationChange","startView","trackViews","trackViewsManually","ongoingOperations","SESSION_ENTRY_REGEXP","SESSION_ENTRY_SEPARATOR","SESSION_COOKIE_NAME","LOCK_RETRY_DELAY","MAX_NUMBER_OF_LOCK_RETRIES","bufferedOperations","withCookieLockAccess","operations","numberOfRetries","next","currentLock","currentSession","retrieveSessionCookie","isCookieLockEnabled","lock","retryLater","setSessionCookie","processedSession","process","persistSessionCookie","isExpiredState","chrome","navigator","userAgent","currentNumberOfRetries","nextOperations","deleteSessionCookie","expire","toSessionString","sessionString","isValidSessionString","OLD_SESSION_COOKIE_NAME","OLD_RUM_COOKIE_NAME","OLD_LOGS_COOKIE_NAME","RUM_SESSION_KEY","LOGS_SESSION_KEY","VISIBILITY_CHECK_DELAY","SESSION_CONTEXT_TIMEOUT_DELAY","stopCallbacks","startSessionManager","productKey","computeSessionState","oldSessionId","oldRumType","oldLogsType","tryOldCookiesMigration","sessionStore","renewObservable","expireObservable","watchSessionTimeoutId","cookieSession","isActiveSession","synchronizeSession","sessionCache","hasSessionInCache","isSessionInCacheOutdated","created","expandOrRenewSession","isTracked","synchronizedSession","trackingType","expandOrRenewCookie","renewSessionInCache","expandSession","getSession","startSessionStore","sessionContextHistory","buildSessionContext","expandSessionWhenVisible","visibilityCheckInterval","trackVisibility","findActiveSession","isTypeTracked","rumSessionType","createFlushController","messagesLimit","durationLimit","pageExitObservable","flushObservable","flush","durationLimitTimeoutId","currentBytesCount","currentMessagesCount","messagesCount","cancelDurationLimitTimeout","notifyBeforeAddMessage","messageBytesCount","notifyAfterAddMessage","notifyAfterRemoveMessage","Batch","flushController","pushOnlyBuffer","upsertBuffer","addOrUpdate","upsert","messages","sendOnExit","processedMessage","hasMessageFor","separatorBytesCount","removedMessage","MAX_ONGOING_BYTES_COUNT","MAX_ONGOING_REQUESTS","MAX_QUEUE_BYTES_COUNT","MAX_BACKOFF_TIME","INITIAL_BACKOFF_TIME","sendWithRetryStrategy","sendStrategy","transportStatus","queuedPayloads","bandwidthMonitor","canHandle","onSuccess","retryQueuedPayloads","onFailure","enqueue","scheduleRetry","dequeue","currentBackoffTime","min","onLine","shouldRetryRequest","ongoingRequestCount","isFull","queueFullReported","previousQueue","newPayloadQueue","createHttpRequest","endpointBuilder","retryState","ongoingByteCount","sendStrategyForRetry","onResponse","isKeepAliveSupported","fetchUrl","keepalive","mode","sendXHR","fetchKeepAliveStrategy","sendBeacon","beaconUrl","hasReportedBeaconError","reportBeaconError","sendBeaconStrategy","open","URL_CONTEXT_TIME_OUT_DELAY","currentPeriodMeasures","currentBatchMeasures","batchHasRumEvent","FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY","MEASURES_PERIOD_DURATION","sendCurrentPeriodMeasures","batchCount","initCurrentPeriodMeasures","updateMeasure","measure","sum","mergeMeasure","batchBytesCount","batchMessagesCount","globalContextBytes","userContextBytes","featureFlagBytes","initCurrentBatchMeasures","currentPageState","pageStateEntries","getPageState","hasFocus","addPageState","nextPageState","maxPageStateEntries","RecordType","FullSnapshot","IncrementalSnapshot","Meta","Focus","ViewEnd","VisualViewport","FrustrationRecord","NodeType","Document","DocumentType","Text","CDATA","DocumentFragment","IncrementalSource","Mutation","MouseMove","MouseInteraction","Scroll","ViewportResize","Input","TouchMove","MediaInteraction","StyleSheetRule","MouseInteractionType","MouseUp","MouseDown","Click","ContextMenu","DblClick","Blur","TouchStart","TouchEnd","MediaInteractionType","Play","Pause","assembleIncrementalSnapshot","NodePrivacyLevel","IGNORE","PRIVACY_ATTR_NAME","PRIVACY_ATTR_VALUE_ALLOW","PRIVACY_ATTR_VALUE_MASK","PRIVACY_ATTR_VALUE_MASK_USER_INPUT","PRIVACY_ATTR_VALUE_HIDDEN","PRIVACY_CLASS_ALLOW","PRIVACY_CLASS_MASK","PRIVACY_CLASS_MASK_USER_INPUT","PRIVACY_CLASS_HIDDEN","CENSORED_STRING_MARK","CENSORED_IMG_MARK","FORM_PRIVATE_TAG_NAMES","INPUT","OUTPUT","TEXTAREA","SELECT","OPTION","DATALIST","OPTGROUP","MAX_ATTRIBUTE_VALUE_CHAR_LENGTH","getNodePrivacyLevel","defaultPrivacyLevel","parentNodePrivacyLevel","reducePrivacyLevel","getNodeSelfPrivacyLevel","childPrivacyLevel","privAttr","inputElement","autocomplete","contains","relAttribute","getLowerCaseAttribute","nameAttribute","propertyAttribute","toLowerCase","shouldIgnoreElement","shouldMaskNode","privacyLevel","isFormElement","censorText","text","getTextContent","textNode","ignoreWhiteSpace","parentTagName","nodePrivacyLevel","isStyle","serializedNodeIds","hasSerializedNode","getSerializedNodeId","getElementInputValue","URL_IN_CSS_REF","ABSOLUTE_URL","DATA_URI","TAG_NAME_REGEX","getValidTagName","processedTagName","serializeStyleSheets","cssStyleSheets","cssStyleSheet","rules","cssRules","cssRule","cssText","disabled","media","serializeAttribute","attributeValue","getCssRulesString","cssHref","getCssRuleString","matchingSubstring","singleQuote","urlWrappedInSingleQuotes","doubleQuote","urlWrappedInDoubleQuotes","urlNotWrappedInQuotes","quote","baseUrl","makeUrlAbsolute","rule","isCSSImportRule","styleSheet","serializeNodeWithId","serializedNode","DOCUMENT_NODE","serializeChildNodes","adoptedStyleSheets","serializeDocumentNode","isShadowRoot","serializationContext","shadowRootsController","addShadowRoot","serializeDocumentFragmentNode","DOCUMENT_TYPE_NODE","documentType","publicId","systemId","el","isSVG","SVGElement","attributes","rr_width","rr_height","safeAttrs","formValue","optionElement","selected","stylesheet","styleSheets","_cssText","sheet","scrollTop","scrollLeft","checked","mediaElement","rr_mediaState","paused","elementsScrollPositions","rr_scrollLeft","rr_scrollTop","serializeAttributes","serializeElementNode","serializeTextNode","CDATA_SECTION_NODE","serializeNode","_nextId","serializedNodeWithId","serializeNodeId","setSerializedNodeId","childNode","serializedChildNode","serializeDocument","isTouchEvent","changedTouches","getEventTarget","composed","composedPath","convertMouseEventToLayoutCoordinates","normalized","layoutViewportX","layoutViewportY","visualViewportX","visualViewportY","abs","pageTop","offsetTop","scrollY","pageLeft","offsetLeft","scrollX","isVisualViewportFactoredIn","getVisualViewport","getScrollX","pageXOffset","getScrollY","pageYOffset","MOUSE_MOVE_OBSERVER_THRESHOLD","tryToComputeCoordinates","isFinite","SCROLL_OBSERVER_THRESHOLD","eventTypeToMouseInteraction","initInputObserver","cb","_d","lastInputStateMap","onElementChange","inputState","isChecked","cbWithDedup","lastInputState","stopEventListeners","HTMLTextAreaElement","HTMLSelectElement","instrumentationStoppers","stopper","getPathToNestedCSSRule","currentRule","parentRule","index_1","parentStyleSheet","VISUAL_VIEWPORT_OBSERVER_THRESHOLD","MUTATION_PROCESS_MAX_DELAY","initMutationObserver","mutationCallback","mutationBatch","processMutationBatch","cancelScheduledFlush","pendingMutations","addMutations","mutations","opts","requestIdleCallback","cancelIdleCallback","id_1","requestAnimationFrame","cancelAnimationFrame","timeout","createMutationBatch","mutation","removedNodes","removedNode","traverseRemovedShadowDom","removeShadowRoot","filteredMutations","nodeAndAncestorsHaveSerializedNode","addedAndMovedNodes","Map","_loop_1","addedNodes","delete","mutations_1","sortedAddedAndMovedNodes","sort","compareDocumentPosition","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_PRECEDING","addedNodeMutations","sortedAddedAndMovedNodes_1","hasBeenSerialized","nextId","getNextSibling","parentId","removedNodeMutations","adds","removes","nextSibling","processChildListMutations","texts","textMutations","handledNodes","filteredMutations_1","oldValue","processCharacterDataMutations","attributeMutations","handledElements","handledAttributes","emittedMutations","filteredMutations_2","transformedValue","inputValue","emittedMutation","processAttributesMutations","processMutations","takeRecords","attributeOldValue","characterData","characterDataOldValue","childList","subtree","shadowDomRemovedCallback","record","emit","scrollPositionsByElement","scrollPositions","scrollingElement","mutationCb","inputCb","controllerByShadowRoot","stopMutationObserver","stopInputObserver","initShadowRootsController","takeFullSnapshot","has_focus","initialOffset","o","updatePosition","mediaInteractionCb","focusCb","recordIds","mutationHandler","mousemoveHandler","mouseInteractionHandler","scrollHandler","viewportResizeHandler","inputHandler","mediaInteractionHandler","styleSheetObserver","focusHandler","visualViewportResizeHandler","frustrationHandler","p","mouseInteractionCb","mouseInteractionRecord","mousemoveCb","positions","scrollCb","styleSheetCb","r","viewportResizeCb","d","frustrationCb","frustrationRecord","visualViewportResizeCb","getIdForEvent","initRecordIds","coordinates","timeOffset","interaction","initMouseInteractionObserver","initScrollObserver","initViewportResizeObserver","checkStyleSheetAndCallback","ownerNode","CSSStyleSheet","instrumentGroupingCSSRuleClass","cls","CSSGroupingRule","CSSMediaRule","CSSSupportsRule","initStyleSheetObserver","cancelThrottle","removeListener","initVisualViewportResizeObserver","initFrustrationObserver","stopObservers","flushMutationsFromObservers","flushMutations","takeSubsequentFullSnapshot","buildReplayPayload","metadata","rawSegmentBytesCount","formData","FormData","append","toFormEntries","byteLength","onEntry","prefix","statsPerView","MAX_STATS_HISTORY","getSegmentsCount","getOrCreateReplayStats","segments_count","addRecord","records_count","segments_total_raw_size","isFirst_1","_value","deleteOldestStats","workerURL","Segment","worker","creationReason","initialRecord","onWrote","onFlushed","creation_reason","has_full_snapshot","index_in_view","removeMessageListener","additionalBytesCount","rawBytesCount","compressedBytesCount","segment","postMessage","SEGMENT_DURATION_LIMIT","SEGMENT_BYTES_LIMIT","startSegmentCollection","httpRequest","getSegmentContext","nextSegmentCreationReason","unsubscribeViewCreated","flushSegment","unsubscribePageExited","expirationTimeoutId","createNewSegment","computeSegmentContext","compressedSegmentBytesCount","doStartSegmentCollection","createDeflateWorker","createObjectURL","workerCodeFn","Worker","zero","buf","len","LITERALS","L_CODES","D_CODES","MAX_BITS","extra_lbits","extra_dbits","extra_blbits","bl_order","static_ltree","static_dtree","_dist_code","_length_code","MAX_MATCH","base_length","static_l_desc","static_d_desc","static_bl_desc","base_dist","StaticTreeDesc","static_tree","extra_bits","extra_base","elems","max_length","has_stree","TreeDesc","dyn_tree","stat_desc","max_code","d_code","dist","put_short","w","pending_buf","pending","send_bits","bi_valid","bi_buf","send_code","c","tree","bi_reverse","res","gen_codes","bl_count","bits","n","next_code","init_block","dyn_ltree","dyn_dtree","bl_tree","END_BLOCK","opt_len","static_len","last_lit","bi_windup","smaller","m","depth","_n2","_m2","pqdownheap","k","v","heap","j","heap_len","compress_block","ltree","dtree","lc","extra","lx","d_buf","l_buf","build_tree","desc","stree","heap_max","h","xbits","overflow","gen_bitlen","scan_tree","curlen","prevlen","nextlen","max_count","min_count","REP_3_6","REPZ_3_10","REPZ_11_138","send_tree","static_init_done","_tr_stored_block","stored_len","last","header","subarray","copy_block","trees","LENGTH_CODES","tr_static_init","l_desc","d_desc","bl_desc","opt_lenb","static_lenb","max_blindex","level","strm","data_type","black_mask","detect_data_type","BL_CODES","build_bl_tree","lcodes","dcodes","blcodes","rank","send_all_trees","lit_bufsize","STATIC_TREES","bi_flush","adler32_1","adler","pos","s1","s2","crcTable","Uint32Array","table","makeTable","crc32_1","crc","t","constants","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_SYNC_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_BLOCK","Z_TREES","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_MEM_ERROR","Z_BUF_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","_tr_init$1","_tr_stored_block$1","_tr_flush_block$1","_tr_tally$1","_tr_align$1","Z_FIXED$1","Z_UNKNOWN$1","MAX_MATCH$1","MIN_LOOKAHEAD","HCRC_STATE","BUSY_STATE","FINISH_STATE","errorCode","zero$1","HASH","prev","hash_shift","hash_mask","flush_pending","avail_out","output","pending_out","next_out","total_out","flush_block_only","block_start","strstart","put_byte","putShortMSB","longest_match","cur_match","chain_length","max_chain_length","scan","best_len","prev_length","nice_match","w_size","_win","wmask","w_mask","strend","scan_end1","scan_end","good_match","lookahead","match_start","fill_window","more","_w_size","window_size","hash_size","avail_in","next_in","wrap","total_in","insert","ins_h","deflate_fast","hash_head","bflush","match_length","max_lazy_match","MIN_MATCH$1","deflate_slow","max_insert","prev_match","match_available","Config","good_length","max_lazy","nice_length","max_chain","configuration_table","max_block_size","pending_buf_size","max_start","DeflateState","gzhead","gzindex","last_flush","w_bits","hash_bits","Uint16Array","HEAP_SIZE$1","MAX_BITS$1","deflateResetKeep","deflateReset","ret","deflateInit2","windowBits","memLevel","deflate_1","deflateInit","deflateSetHeader","deflate","beg","val","old_flush","hcrc","os","bstate","deflate_huff","deflate_rle","deflateEnd","deflateSetDictionary","dictionary","dictLength","tmpDict","avail","deflateInfo","_utf8len","zstream","Z_NO_FLUSH$1","Z_FULL_FLUSH$1","Z_FINISH$1","Z_OK$1","Z_STREAM_END$1","Z_DEFAULT_COMPRESSION$1","Z_DEFAULT_STRATEGY$1","Z_DEFLATED$1","Deflate","chunkSize","opt","raw","gzip","ended","dict","_dict_set","flush_mode","_flush_mode","onData","_l","flattenChunks","string2buf","c2","m_pos","str_len","buf_len","makePakoDeflate","pushData","binaryData","reduce","total","startDeflateWorker","createDeflateWorkerImpl","worker_1","onError","doStartDeflateWorker","isBrowserSupported","NodeList","getSessionReplayLink","isRecordingStarted","errorType","sessionReplayAllowed","getErrorType","sessionId","rumConfiguration","getSiteDefaultSubdomain","getSessionReplayUrl","startRecordingImpl","startDeflateWorkerImpl","onRumStart","startStrategy","stopStrategy","stopRecording","replayRequest","stopSegmentCollection","unsubscribeViewEnded","makeRecorderApi","datadogRum","startRumImpl","ignoreInitIfSyntheticsWillInjectRum","isAlreadyInitialized","getInternalContextStrategy","getInitConfigurationStrategy","stopSessionStrategy","getSessionReplayLinkStrategy","bufferApiCalls","addTimingStrategy","startViewStrategy","addActionStrategy","addErrorStrategy","providedError","addFeatureFlagEvaluationStrategy","doStartRum","startRumResults","bridge_1","startRumTelemetry","FEATURE_FLAGS","getFeatureFlagBytesCount","addFeatureFlagEvaluation","currentContext","startFeatureFlagContexts","startRumEventBridge","batch","telemetryEventObservable","replicaBatch","createRumBatch","primaryBatch","primaryFlushController","withReplicaApplicationId","replicated","makeRumBatch","startRumBatch","batchFlushObservable","customerDataTelemetrySampleRate","hasFeatureFlagContext","startCustomerDataTelemetry","longTaskAllowed","startRumSessionManagerStub","rawTrackingType","hasValidRumSession","sessionReplaySampleRate","oldPlansBehavior","startRumSessionManager","onHistoryChange","stopInstrumentingPushState","stopInstrumentingReplaceState","onHashChange","stopHistoryTracking","onLocationChange","stopHashTracking","createLocationChangeObservable","viewContextHistory","buildViewContext","startViewContexts","previousViewUrl","urlContextHistory","viewUrl","buildUrlContext","changeTime","startUrlContexts","onFocusChange","onBlurChange","stopForegroundTracking","stopBlurTracking","startForegroundContexts","trackUserInteractions","addAction","startActionCollection","startRumEventCollection","baseSerializedConfiguration","premium_sample_rate","premiumSampleRate","replay_sample_rate","replaySampleRate","session_replay_sample_rate","trace_sample_rate","tracingSampleRate","action_name_attribute","use_allowed_tracing_origins","use_allowed_tracing_urls","selected_tracing_propagators","default_privacy_level","use_excluded_activity_urls","track_frustrations","track_views_manually","track_user_interactions","trackInteractions","serializeRumConfiguration","startLongTaskCollection","stateStartTime","persisted","addError","consoleError","trackConsoleError","trackReportError","handling_stack","source_type","processError","rawError","doStartErrorCollection","startErrorCollection","tracer","traceFetch","headers","headers_1","Headers","traceXhr","setRequestHeader","startTracer","rawContext","trackXhr","clonedResponse","POSITIVE_INFINITY","waitForResponseToComplete","trackFetch","startRequestCollection","internalContext","application_id","session_id","user_action","startInternalContext","stopSession","getInternalContext","rumPublicApi","overrideInitConfigurationForBridge","canHandleSession","canInitRum","_e","_f","tracingOptions_1","expectedItem","tracingOptions_2","legacyMatchOption","convertLegacyMatchOptionToTracingOption","validateAndBuildTracingOptions","baseConfiguration","validateAndBuildRumConfiguration","beforeInitCalls","addRumGlobalContext","setGlobalContextProperty","removeRumGlobalContext","removeGlobalContextProperty","getRumGlobalContext","getGlobalContext","setRumGlobalContext","setGlobalContext","clearGlobalContext","getInitConfiguration","setUser","getUser","setUserProperty","sanitizedProperty","removeUserProperty","removeUser","clearUser","startSessionReplayRecording","stopSessionReplayRecording","makeRumPublicApi","DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT","validateAndBuildForwardOption","allowedValues","removeDuplicates","StatusType","HandlerType","STATUSES","Logger","handleLogStrategy","handlerType","loggerContext","contextManager","logger","messageContext","errorContext","sanitizedMessageContext","addContext","removeContext","setHandler","handler","getHandler","setLevel","getLevel","decorators","Reflect","decorate","__decorate","startBatchWithReplica","endpoint","replicaEndpoint","createBatch","computeTrackingType","STATUS_PRIORITIES","isAuthorized","loggerHandler","sanitizedHandlerType","logsSentBeforeRumInjectionTelemetryAdded","getRUMInternalContext","getInternalContextFromRumGlobal","DD_RUM_SYNTHETICS","DD_RUM","rumGlobal","LogStatusForApi","LogStatusForReport","truncateResponseText","responseText","requestErrorResponseLengthLimit","substring","format","datadogLogs","startLogsImpl","customLoggers","beforeInitLoggerLog","logsMessage","mainLogger","canInitLogs","forwardConsoleLogs","forwardReports","forwardErrorsToLogs","validateAndBuildLogsConfiguration","rawLogsEvent","telemetryBatch_1","startLogsTelemetry","xhrSubscription","handleResponse","fetchSubscription","onResponseDataAvailable","responseData","http","isRejected","computeXhrResponseData","TextDecoder","decode","truncateResponseStream","computeFetchResponseText","computeFetchErrorText","startNetworkErrorCollection","rawErrorObservable","startRuntimeErrorCollection","startConsoleCollection","getFileFromStackTraceString","startReportCollection","handleLog","savedDate","startLoggerCollection","startLogsSessionManagerStub","rawSessionType","hasValidLoggerSession","startLogsSessionManager","statusWithCustom","logRateLimiters","_g","startLogsAssembly","serverLogsEvent","startLogsBridge","startLogsBatch","baseSerializedInitConfiguration","forward_errors_to_logs","forward_console_logs","forward_reports","serializeLogsConfiguration","trackedSession","getLoggerGlobalContext","setLoggerGlobalContext","addLoggerGlobalContext","removeLoggerGlobalContext","createLogger","conf","getLogger","makeLogsPublicApi","ddInitialized","getEnv","attrs","async","logResponse","contentType","responseHeaders","fromEntries","responseBody","initDataDog","_ref3","isForm","_ref","initLogs","_ref2","urlPaths","isPdfPrinter","initRum","getRootRoute","isCallable","tryToString","$TypeError","TypeError","module","exports","argument","$String","isPrototypeOf","it","Prototype","isObject","toIndexedObject","toAbsoluteIndex","lengthOfArrayLike","createMethod","IS_INCLUDES","$this","fromIndex","O","uncurryThis","stringSlice","TO_STRING_TAG_SUPPORT","classofRaw","TO_STRING_TAG","wellKnownSymbol","$Object","CORRECT_ARGUMENTS","tag","tryGet","callee","hasOwn","ownKeys","getOwnPropertyDescriptorModule","definePropertyModule","exceptions","DESCRIPTORS","createPropertyDescriptor","bitmap","writable","toPropertyKey","propertyKey","makeBuiltIn","defineGlobalProperty","simple","unsafe","nonConfigurable","nonWritable","fails","documentAll","all","IS_HTMLDDA","EXISTS","IndexSizeError","DOMStringSizeError","HierarchyRequestError","WrongDocumentError","InvalidCharacterError","NoDataAllowedError","NoModificationAllowedError","NotFoundError","NotSupportedError","InUseAttributeError","InvalidStateError","SyntaxError","InvalidModificationError","NamespaceError","InvalidAccessError","ValidationError","TypeMismatchError","SecurityError","NetworkError","AbortError","URLMismatchError","QuotaExceededError","TimeoutError","InvalidNodeTypeError","DataCloneError","IS_DENO","IS_NODE","Deno","classof","v8","$Error","TEST","V8_OR_CHAKRA_STACK_ENTRY","IS_V8_OR_CHAKRA_STACK","dropEntries","prepareStackTrace","createNonEnumerableProperty","defineBuiltIn","copyConstructorProperties","isForced","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","dontCallGetSet","forced","sham","aCallable","NATIVE_BIND","that","Function","FunctionPrototype","getDescriptor","PROPER","CONFIGURABLE","uncurryThisWithBind","namespace","getMethod","isNullOrUndefined","Iterators","ITERATOR","anObject","getIteratorMethod","usingIterator","iteratorMethod","V","P","check","g","toObject","propertyIsEnumerable","setPrototypeOf","dummy","Wrapper","NewTarget","NewTargetPrototype","store","functionToString","inspectSource","NATIVE_WEAK_MAP","shared","sharedKey","hiddenKeys","OBJECT_ALREADY_INITIALIZED","facade","STATE","enforce","getterFor","TYPE","ArrayPrototype","$documentAll","getBuiltIn","empty","construct","constructorRegExp","INCORRECT_TO_STRING","isConstructorModern","isConstructorLegacy","called","replacement","feature","detection","normalize","POLYFILL","NATIVE","string","USE_SYMBOL_AS_UID","$Symbol","isArrayIteratorMethod","getIterator","iteratorClose","Result","stopped","ResultPrototype","iterable","unboundFunction","iterator","iterFn","step","AS_ENTRIES","IS_RECORD","IS_ITERATOR","INTERRUPTED","condition","callFn","innerResult","innerError","toLength","obj","CONFIGURABLE_FUNCTION_NAME","InternalStateModule","enforceInternalState","getInternalState","CONFIGURABLE_LENGTH","TEMPLATE","getter","setter","arity","MapPrototype","proto","ceil","trunc","$default","IE8_DOM_DEFINE","V8_PROTOTYPE_DEFINE_BUG","$defineProperty","$getOwnPropertyDescriptor","ENUMERABLE","WRITABLE","Attributes","propertyIsEnumerableModule","internalObjectKeys","getOwnPropertyNames","getOwnPropertySymbols","names","$propertyIsEnumerable","NASHORN_BUG","uncurryThisAccessor","aPossiblePrototype","CORRECT_SETTER","__proto__","pref","valueOf","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","hasIndices","dotAll","unicodeSets","regExpFlags","RegExpPrototype","R","SetPrototype","$has","$keys","uid","SHARED","IS_PURE","copyright","license","V8","IS_BROWSER","structuredClone","ArrayBuffer","transfer","V8_VERSION","symbol","Symbol","toIntegerOrInfinity","integer","IndexedObject","requireObjectCoercible","number","isSymbol","ordinaryToPrimitive","TO_PRIMITIVE","exoticToPrim","toPrimitive","postfix","NATIVE_SYMBOL","passed","required","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","$","anInstance","inheritIfRequired","normalizeStringArgument","DOMExceptionConstants","clearErrorStack","DOM_EXCEPTION","NativeDOMException","$DOMException","DOMExceptionPrototype","argumentsLength","ERROR_HAS_STACK","DOM_EXCEPTION_HAS_STACK","BUGGY_DESCRIPTOR","FORCED_CONSTRUCTOR","PolyfilledDOMException","PolyfilledDOMExceptionPrototype","constant","constantName","structuredCloneImplementation","getBuiltin","isConstructor","iterate","createProperty","validateArgumentsLength","getRegExpFlags","MapHelpers","SetHelpers","ERROR_STACK_INSTALLABLE","PROPER_TRANSFER","EvalError","RangeError","ReferenceError","URIError","PerformanceMark","WebAssembly","CompileError","LinkError","RuntimeError","mapHas","mapGet","mapSet","setAdd","objectKeys","thisBooleanValue","thisNumberValue","thisStringValue","thisTimeValue","PERFORMANCE_MARK","DATA_CLONE_ERROR","TRANSFERRING","checkBasicSemantic","set1","set2","checkErrorsCloning","nativeStructuredClone","FORCED_REPLACEMENT","AggregateError","errors","structuredCloneFromMark","detail","nativeRestrictedStructuredClone","throwUncloneable","throwUnpolyfillable","structuredCloneInternal","C","cloned","dataTransfer","deep","byteOffset","DOMQuad","p1","p2","p3","p4","DataTransfer","ClipboardEvent","clipboardData","error2","items","files","createDataTransfer","ImageData","colorSpace","DataView","resizable","maxByteLength","setUint8","getUint8","fromPoint","z","fromRect","fromMatrix","File","rawTransfer","transferredArray","transferred","canvas","OffscreenCanvas","transferFromImageBitmap","transferToImageBitmap","tryToTransfer","VERSION","root","ArrayProto","ObjProto","SymbolProto","supportsArrayBuffer","supportsDataView","nativeIsArray","nativeKeys","nativeCreate","create","nativeIsView","isView","_isNaN","isNaN","_isFinite","hasEnumBug","nonEnumerableProps","MAX_ARRAY_INDEX","restArguments","startIndex","rest","isNull","isUndefined","isBoolean","isElement","tagTester","isFunction","nodelist","Int8Array","hasStringTagBug","isIE11","isDataView","getInt8","isArrayBuffer","isArguments","parseFloat","createSizePropertyCheck","getSizeProperty","collection","sizeProperty","shallowProperty","typedArrayPattern","collectNonEnumProps","emulatedSet","nonEnumIdx","prop","isEmpty","isString","isMatch","_keys","_wrapped","toBufferView","bufferSource","tagDataView","eq","aStack","bStack","deepEq","areArrays","aCtor","bCtor","isEqual","allKeys","ie11fingerprint","methods","weakMapMethods","forEachName","commonInit","mapTail","mapMethods","setMethods","values","pairs","invert","functions","createAssigner","keysFunc","defaults","baseCreate","Ctor","props","extendOwn","tap","interceptor","toPath","deepGet","defaultValue","identity","matcher","optimizeCb","argCount","accumulator","baseIteratee","iteratee","mapObject","results","currentKey","propertyOf","times","accum","createEscaper","escaper","testRegexp","replaceRegexp","templateSettings","evaluate","interpolate","noMatch","escapes","escapeRegExp","escapeChar","bareIdentifier","template","settings","oldSettings","render","variable","fallback","idCounter","uniqueId","chain","instance","_chain","executeBound","sourceFunc","boundFunc","callingContext","partial","boundArgs","bound","callArgs","flatten","strict","idx","memoize","hasher","cache","address","setTimeout","previous","later","_now","remaining","clearTimeout","debounce","immediate","debounced","_args","wrapper","negate","compose","memo","findKey","createPredicateIndexFinder","dir","sortedIndex","mid","createIndexFinder","predicateFind","findIndex","findLastIndex","findWhere","each","createReduce","initial","reducer","reject","guard","contextPath","pluck","where","computed","lastComputed","reStrSymbol","toArray","sample","rand","temp","shuffle","sortBy","criteria","right","group","behavior","partition","pass","keyInObj","pick","compact","otherArrays","difference","uniq","isSorted","seen","arrays","intersection","argsLength","unzip","range","chainResult","mixin","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","chunkIds","priority","notFulfilled","fulfilled","F","E","chunkId","__esModule","definition","Promise","promises","u","miniCssF","script","needAttach","scripts","getElementsByTagName","charset","nc","setAttribute","src","onScriptComplete","onerror","onload","doneFns","removeChild","toStringTag","installedCssChunks","miniCss","resolve","fullhref","existingLinkTags","dataHref","rel","existingStyleTags","findStylesheet","oldTag","linkTag","realHref","createStylesheet","loadStylesheet","installedChunks","installedChunkData","promise","realSrc","link","as","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","MessageChannel","port1","onmessage","port2","assign","nn","tn","rn","en","on","un","an","cn","installing","scriptURL","sn","vn","removeEventListener","hn","ln","sw","isExternal","originalEvent","mn","isUpdate","dispatchEvent","wn","waiting","dn","serviceWorker","controller","gn","ports","getSW","register","yn","pn","bn","wasWaitingBeforeRegister","messageSW","messageSkipWaiting","Pn","Sn","startApp","Workbox","rootRoute","_ref4","startFormServiceApp","isOutreach","_ref6","startOutreachApp","startFormApp","_ref5","login","startApps"],"sourceRoot":""}