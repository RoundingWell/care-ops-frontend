{"version":3,"file":"20241011-auth-soQb3frt.js","sources":["../node_modules/@auth0/auth0-spa-js/dist/auth0-spa-js.production.esm.js","../src/js/auth/config.js","../src/js/auth/auth0.js","../src/js/auth/none.js","../node_modules/@kinde-oss/kinde-auth-pkce-js/dist/kinde-auth-pkce-js.esm.js","../src/js/auth/kinde.js","../node_modules/@workos-inc/authkit-js/dist/index.mjs","../src/js/auth/workos.js","../src/js/auth.js"],"sourcesContent":["function e(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i}\"function\"==typeof SuppressedError&&SuppressedError;var t=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}function o(e,t){return e(t={exports:{}},t.exports),t.exports}var n=o((function(e,t){Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(){var e=this;this.locked=new Map,this.addToLocked=function(t,i){var o=e.locked.get(t);void 0===o?void 0===i?e.locked.set(t,[]):e.locked.set(t,[i]):void 0!==i&&(o.unshift(i),e.locked.set(t,o))},this.isLocked=function(t){return e.locked.has(t)},this.lock=function(t){return new Promise((function(i,o){e.isLocked(t)?e.addToLocked(t,i):(e.addToLocked(t),i())}))},this.unlock=function(t){var i=e.locked.get(t);if(void 0!==i&&0!==i.length){var o=i.pop();e.locked.set(t,i),void 0!==o&&setTimeout(o,0)}else e.locked.delete(t)}}return e.getInstance=function(){return void 0===e.instance&&(e.instance=new e),e.instance},e}();t.default=function(){return i.getInstance()}}));i(n);var a=i(o((function(e,i){var o=t&&t.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(n,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):new i((function(t){t(e.value)})).then(r,s)}c((o=o.apply(e,t||[])).next())}))},a=t&&t.__generator||function(e,t){var i,o,n,a,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError(\"Generator is already executing.\");for(;r;)try{if(i=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(n=r.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){r.label=a[1];break}if(6===a[0]&&r.label<n[1]){r.label=n[1],n=a;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(a);break}n[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},r=t;Object.defineProperty(i,\"__esModule\",{value:!0});var s=\"browser-tabs-lock-key\",c={key:function(e){return o(r,void 0,void 0,(function(){return a(this,(function(e){throw new Error(\"Unsupported\")}))}))},getItem:function(e){return o(r,void 0,void 0,(function(){return a(this,(function(e){throw new Error(\"Unsupported\")}))}))},clear:function(){return o(r,void 0,void 0,(function(){return a(this,(function(e){return[2,window.localStorage.clear()]}))}))},removeItem:function(e){return o(r,void 0,void 0,(function(){return a(this,(function(e){throw new Error(\"Unsupported\")}))}))},setItem:function(e,t){return o(r,void 0,void 0,(function(){return a(this,(function(e){throw new Error(\"Unsupported\")}))}))},keySync:function(e){return window.localStorage.key(e)},getItemSync:function(e){return window.localStorage.getItem(e)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(e){return window.localStorage.removeItem(e)},setItemSync:function(e,t){return window.localStorage.setItem(e,t)}};function d(e){return new Promise((function(t){return setTimeout(t,e)}))}function u(e){for(var t=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz\",i=\"\",o=0;o<e;o++){i+=t[Math.floor(Math.random()*t.length)]}return i}var l=function(){function e(t){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+u(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=t,void 0===e.waiters&&(e.waiters=[])}return e.prototype.acquireLock=function(t,i){return void 0===i&&(i=5e3),o(this,void 0,void 0,(function(){var o,n,r,l,h,p,m;return a(this,(function(a){switch(a.label){case 0:o=Date.now()+u(4),n=Date.now()+i,r=s+\"-\"+t,l=void 0===this.storageHandler?c:this.storageHandler,a.label=1;case 1:return Date.now()<n?[4,d(30)]:[3,8];case 2:return a.sent(),null!==l.getItemSync(r)?[3,5]:(h=this.id+\"-\"+t+\"-\"+o,[4,d(Math.floor(25*Math.random()))]);case 3:return a.sent(),l.setItemSync(r,JSON.stringify({id:this.id,iat:o,timeoutKey:h,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,d(30)];case 4:return a.sent(),null!==(p=l.getItemSync(r))&&(m=JSON.parse(p)).id===this.id&&m.iat===o?(this.acquiredIatSet.add(o),this.refreshLockWhileAcquired(r,o),[2,!0]):[3,7];case 5:return e.lockCorrector(void 0===this.storageHandler?c:this.storageHandler),[4,this.waitForSomethingToChange(n)];case 6:a.sent(),a.label=7;case 7:return o=Date.now()+u(4),[3,1];case 8:return[2,!1]}}))}))},e.prototype.refreshLockWhileAcquired=function(e,t){return o(this,void 0,void 0,(function(){var i=this;return a(this,(function(r){return setTimeout((function(){return o(i,void 0,void 0,(function(){var i,o,r;return a(this,(function(a){switch(a.label){case 0:return[4,n.default().lock(t)];case 1:return a.sent(),this.acquiredIatSet.has(t)?(i=void 0===this.storageHandler?c:this.storageHandler,null===(o=i.getItemSync(e))?(n.default().unlock(t),[2]):((r=JSON.parse(o)).timeRefreshed=Date.now(),i.setItemSync(e,JSON.stringify(r)),n.default().unlock(t),this.refreshLockWhileAcquired(e,t),[2])):(n.default().unlock(t),[2])}}))}))}),1e3),[2]}))}))},e.prototype.waitForSomethingToChange=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(i){switch(i.label){case 0:return[4,new Promise((function(i){var o=!1,n=Date.now(),a=!1;function r(){if(a||(window.removeEventListener(\"storage\",r),e.removeFromWaiting(r),clearTimeout(s),a=!0),!o){o=!0;var t=50-(Date.now()-n);t>0?setTimeout(i,t):i(null)}}window.addEventListener(\"storage\",r),e.addToWaiting(r);var s=setTimeout(r,Math.max(0,t-Date.now()))}))];case 1:return i.sent(),[2]}}))}))},e.addToWaiting=function(t){this.removeFromWaiting(t),void 0!==e.waiters&&e.waiters.push(t)},e.removeFromWaiting=function(t){void 0!==e.waiters&&(e.waiters=e.waiters.filter((function(e){return e!==t})))},e.notifyWaiters=function(){void 0!==e.waiters&&e.waiters.slice().forEach((function(e){return e()}))},e.prototype.releaseLock=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.releaseLock__private__(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.releaseLock__private__=function(t){return o(this,void 0,void 0,(function(){var i,o,r,d;return a(this,(function(a){switch(a.label){case 0:return i=void 0===this.storageHandler?c:this.storageHandler,o=s+\"-\"+t,null===(r=i.getItemSync(o))?[2]:(d=JSON.parse(r)).id!==this.id?[3,2]:[4,n.default().lock(d.iat)];case 1:a.sent(),this.acquiredIatSet.delete(d.iat),i.removeItemSync(o),n.default().unlock(d.iat),e.notifyWaiters(),a.label=2;case 2:return[2]}}))}))},e.lockCorrector=function(t){for(var i=Date.now()-5e3,o=t,n=[],a=0;;){var r=o.keySync(a);if(null===r)break;n.push(r),a++}for(var c=!1,d=0;d<n.length;d++){var u=n[d];if(u.includes(s)){var l=o.getItemSync(u);if(null!==l){var h=JSON.parse(l);(void 0===h.timeRefreshed&&h.timeAcquired<i||void 0!==h.timeRefreshed&&h.timeRefreshed<i)&&(o.removeItemSync(u),c=!0)}}}c&&e.notifyWaiters()},e.waiters=void 0,e}();i.default=l})));const r={timeoutInSeconds:60},s={name:\"auth0-spa-js\",version:\"2.1.3\"},c=()=>Date.now();class d extends Error{constructor(e,t){super(t),this.error=e,this.error_description=t,Object.setPrototypeOf(this,d.prototype)}static fromPayload({error:e,error_description:t}){return new d(e,t)}}class u extends d{constructor(e,t,i,o=null){super(e,t),this.state=i,this.appState=o,Object.setPrototypeOf(this,u.prototype)}}class l extends d{constructor(){super(\"timeout\",\"Timeout\"),Object.setPrototypeOf(this,l.prototype)}}class h extends l{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,h.prototype)}}class p extends d{constructor(e){super(\"cancelled\",\"Popup closed\"),this.popup=e,Object.setPrototypeOf(this,p.prototype)}}class m extends d{constructor(e,t,i){super(e,t),this.mfa_token=i,Object.setPrototypeOf(this,m.prototype)}}class f extends d{constructor(e,t){super(\"missing_refresh_token\",`Missing Refresh Token (audience: '${g(e,[\"default\"])}', scope: '${g(t)}')`),this.audience=e,this.scope=t,Object.setPrototypeOf(this,f.prototype)}}function g(e,t=[]){return e&&!t.includes(e)?e:\"\"}const w=()=>window.crypto,y=()=>{const e=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.\";let t=\"\";return Array.from(w().getRandomValues(new Uint8Array(43))).forEach((i=>t+=e[i%e.length])),t},k=e=>btoa(e),v=t=>{var{clientId:i}=t,o=e(t,[\"clientId\"]);return new URLSearchParams((e=>Object.keys(e).filter((t=>void 0!==e[t])).reduce(((t,i)=>Object.assign(Object.assign({},t),{[i]:e[i]})),{}))(Object.assign({client_id:i},o))).toString()},b=e=>(e=>decodeURIComponent(atob(e).split(\"\").map((e=>\"%\"+(\"00\"+e.charCodeAt(0).toString(16)).slice(-2))).join(\"\")))(e.replace(/_/g,\"/\").replace(/-/g,\"+\")),_=async(e,t)=>{const i=await fetch(e,t);return{ok:i.ok,json:await i.json()}},I=async(e,t,i)=>{const o=new AbortController;let n;return t.signal=o.signal,Promise.race([_(e,t),new Promise(((e,t)=>{n=setTimeout((()=>{o.abort(),t(new Error(\"Timeout when executing 'fetch'\"))}),i)}))]).finally((()=>{clearTimeout(n)}))},S=async(e,t,i,o,n,a,r)=>{return s={auth:{audience:t,scope:i},timeout:n,fetchUrl:e,fetchOptions:o,useFormData:r},c=a,new Promise((function(e,t){const i=new MessageChannel;i.port1.onmessage=function(o){o.data.error?t(new Error(o.data.error)):e(o.data),i.port1.close()},c.postMessage(s,[i.port2])}));var s,c},O=async(e,t,i,o,n,a,r=1e4)=>n?S(e,t,i,o,r,n,a):I(e,o,r);async function T(t,i){var{baseUrl:o,timeout:n,audience:a,scope:r,auth0Client:c,useFormData:u}=t,l=e(t,[\"baseUrl\",\"timeout\",\"audience\",\"scope\",\"auth0Client\",\"useFormData\"]);const h=u?v(l):JSON.stringify(l);return await async function(t,i,o,n,a,r,s){let c,u=null;for(let e=0;e<3;e++)try{c=await O(t,o,n,a,r,s,i),u=null;break}catch(e){u=e}if(u)throw u;const l=c.json,{error:h,error_description:p}=l,g=e(l,[\"error\",\"error_description\"]),{ok:w}=c;if(!w){const e=p||`HTTP error. Unable to fetch ${t}`;if(\"mfa_required\"===h)throw new m(h,e,g.mfa_token);if(\"missing_refresh_token\"===h)throw new f(o,n);throw new d(h||\"request_error\",e)}return g}(`${o}/oauth/token`,n,a||\"default\",r,{method:\"POST\",body:h,headers:{\"Content-Type\":u?\"application/x-www-form-urlencoded\":\"application/json\",\"Auth0-Client\":btoa(JSON.stringify(c||s))}},i,u)}const j=(...e)=>{return(t=e.filter(Boolean).join(\" \").trim().split(/\\s+/),Array.from(new Set(t))).join(\" \");var t};class C{constructor(e,t=\"@@auth0spajs@@\",i){this.prefix=t,this.suffix=i,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join(\"::\")}static fromKey(e){const[t,i,o,n]=e.split(\"::\");return new C({clientId:i,scope:n,audience:o},t)}static fromCacheEntry(e){const{scope:t,audience:i,client_id:o}=e;return new C({scope:t,audience:i,clientId:o})}}class z{set(e,t){localStorage.setItem(e,JSON.stringify(t))}get(e){const t=window.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(e){return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter((e=>e.startsWith(\"@@auth0spajs@@\")))}}class P{constructor(){this.enclosedCache=function(){let e={};return{set(t,i){e[t]=i},get(t){const i=e[t];if(i)return i},remove(t){delete e[t]},allKeys:()=>Object.keys(e)}}()}}class x{constructor(e,t,i){this.cache=e,this.keyManifest=t,this.nowProvider=i||c}async setIdToken(e,t,i){var o;const n=this.getIdTokenCacheKey(e);await this.cache.set(n,{id_token:t,decodedToken:i}),await(null===(o=this.keyManifest)||void 0===o?void 0:o.add(n))}async getIdToken(e){const t=await this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!t&&e.scope&&e.audience){const t=await this.get(e);if(!t)return;if(!t.id_token||!t.decodedToken)return;return{id_token:t.id_token,decodedToken:t.decodedToken}}if(t)return{id_token:t.id_token,decodedToken:t.decodedToken}}async get(e,t=0){var i;let o=await this.cache.get(e.toKey());if(!o){const t=await this.getCacheKeys();if(!t)return;const i=this.matchExistingCacheKey(e,t);i&&(o=await this.cache.get(i))}if(!o)return;const n=await this.nowProvider(),a=Math.floor(n/1e3);return o.expiresAt-t<a?o.body.refresh_token?(o.body={refresh_token:o.body.refresh_token},await this.cache.set(e.toKey(),o),o.body):(await this.cache.remove(e.toKey()),void await(null===(i=this.keyManifest)||void 0===i?void 0:i.remove(e.toKey()))):o.body}async set(e){var t;const i=new C({clientId:e.client_id,scope:e.scope,audience:e.audience}),o=await this.wrapCacheEntry(e);await this.cache.set(i.toKey(),o),await(null===(t=this.keyManifest)||void 0===t?void 0:t.add(i.toKey()))}async clear(e){var t;const i=await this.getCacheKeys();i&&(await i.filter((t=>!e||t.includes(e))).reduce((async(e,t)=>{await e,await this.cache.remove(t)}),Promise.resolve()),await(null===(t=this.keyManifest)||void 0===t?void 0:t.clear()))}async wrapCacheEntry(e){const t=await this.nowProvider();return{body:e,expiresAt:Math.floor(t/1e3)+e.expires_in}}async getCacheKeys(){var e;return this.keyManifest?null===(e=await this.keyManifest.get())||void 0===e?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(e){return new C({clientId:e},\"@@auth0spajs@@\",\"@@user@@\").toKey()}matchExistingCacheKey(e,t){return t.filter((t=>{var i;const o=C.fromKey(t),n=new Set(o.scope&&o.scope.split(\" \")),a=(null===(i=e.scope)||void 0===i?void 0:i.split(\" \"))||[],r=o.scope&&a.reduce(((e,t)=>e&&n.has(t)),!0);return\"@@auth0spajs@@\"===o.prefix&&o.clientId===e.clientId&&o.audience===e.audience&&r}))[0]}}class Z{constructor(e,t,i){this.storage=e,this.clientId=t,this.cookieDomain=i,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}}const K=e=>\"number\"==typeof e,W=[\"iss\",\"aud\",\"exp\",\"nbf\",\"iat\",\"jti\",\"azp\",\"nonce\",\"auth_time\",\"at_hash\",\"c_hash\",\"acr\",\"amr\",\"sub_jwk\",\"cnf\",\"sip_from_tag\",\"sip_date\",\"sip_callid\",\"sip_cseq_num\",\"sip_via_branch\",\"orig\",\"dest\",\"mky\",\"events\",\"toe\",\"txn\",\"rph\",\"sid\",\"vot\",\"vtm\"],E=e=>{if(!e.id_token)throw new Error(\"ID token is required but missing\");const t=(e=>{const t=e.split(\".\"),[i,o,n]=t;if(3!==t.length||!i||!o||!n)throw new Error(\"ID token could not be decoded\");const a=JSON.parse(b(o)),r={__raw:e},s={};return Object.keys(a).forEach((e=>{r[e]=a[e],W.includes(e)||(s[e]=a[e])})),{encoded:{header:i,payload:o,signature:n},header:JSON.parse(b(i)),claims:r,user:s}})(e.id_token);if(!t.claims.iss)throw new Error(\"Issuer (iss) claim must be a string present in the ID token\");if(t.claims.iss!==e.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected \"${e.iss}\", found \"${t.claims.iss}\"`);if(!t.user.sub)throw new Error(\"Subject (sub) claim must be a string present in the ID token\");if(\"RS256\"!==t.header.alg)throw new Error(`Signature algorithm of \"${t.header.alg}\" is not supported. Expected the ID token to be signed with \"RS256\".`);if(!t.claims.aud||\"string\"!=typeof t.claims.aud&&!Array.isArray(t.claims.aud))throw new Error(\"Audience (aud) claim must be a string or array of strings present in the ID token\");if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected \"${e.aud}\" but was not one of \"${t.claims.aud.join(\", \")}\"`);if(t.claims.aud.length>1){if(!t.claims.azp)throw new Error(\"Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values\");if(t.claims.azp!==e.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected \"${e.aud}\", found \"${t.claims.azp}\"`)}}else if(t.claims.aud!==e.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected \"${e.aud}\" but found \"${t.claims.aud}\"`);if(e.nonce){if(!t.claims.nonce)throw new Error(\"Nonce (nonce) claim must be a string present in the ID token\");if(t.claims.nonce!==e.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected \"${e.nonce}\", found \"${t.claims.nonce}\"`)}if(e.max_age&&!K(t.claims.auth_time))throw new Error(\"Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified\");if(null==t.claims.exp||!K(t.claims.exp))throw new Error(\"Expiration Time (exp) claim must be a number present in the ID token\");if(!K(t.claims.iat))throw new Error(\"Issued At (iat) claim must be a number present in the ID token\");const i=e.leeway||60,o=new Date(e.now||Date.now()),n=new Date(0);if(n.setUTCSeconds(t.claims.exp+i),o>n)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${o}) is after expiration time (${n})`);if(null!=t.claims.nbf&&K(t.claims.nbf)){const e=new Date(0);if(e.setUTCSeconds(t.claims.nbf-i),o<e)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${o}) is before ${e}`)}if(null!=t.claims.auth_time&&K(t.claims.auth_time)){const n=new Date(0);if(n.setUTCSeconds(parseInt(t.claims.auth_time)+e.max_age+i),o>n)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${o}) is after last auth at ${n}`)}if(e.organization){const i=e.organization.trim();if(i.startsWith(\"org_\")){const e=i;if(!t.claims.org_id)throw new Error(\"Organization ID (org_id) claim must be a string present in the ID token\");if(e!==t.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected \"${e}\", found \"${t.claims.org_id}\"`)}else{const e=i.toLowerCase();if(!t.claims.org_name)throw new Error(\"Organization Name (org_name) claim must be a string present in the ID token\");if(e!==t.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected \"${e}\", found \"${t.claims.org_name}\"`)}}return t};var R=o((function(e,i){var o=t&&t.__assign||function(){return o=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};function n(e,t){if(!t)return\"\";var i=\"; \"+e;return!0===t?i:i+\"=\"+t}function a(e,t,i){return encodeURIComponent(e).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\\(/g,\"%28\").replace(/\\)/g,\"%29\")+\"=\"+encodeURIComponent(t).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(e){if(\"number\"==typeof e.expires){var t=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*e.expires),e.expires=t}return n(\"Expires\",e.expires?e.expires.toUTCString():\"\")+n(\"Domain\",e.domain)+n(\"Path\",e.path)+n(\"Secure\",e.secure)+n(\"SameSite\",e.sameSite)}(i)}function r(e){for(var t={},i=e?e.split(\"; \"):[],o=/(%[\\dA-F]{2})+/gi,n=0;n<i.length;n++){var a=i[n].split(\"=\"),r=a.slice(1).join(\"=\");'\"'===r.charAt(0)&&(r=r.slice(1,-1));try{t[a[0].replace(o,decodeURIComponent)]=r.replace(o,decodeURIComponent)}catch(e){}}return t}function s(){return r(document.cookie)}function c(e,t,i){document.cookie=a(e,t,o({path:\"/\"},i))}i.__esModule=!0,i.encode=a,i.parse=r,i.getAll=s,i.get=function(e){return s()[e]},i.set=c,i.remove=function(e,t){c(e,\"\",o(o({},t),{expires:-1}))}}));i(R),R.encode,R.parse,R.getAll;var U=R.get,L=R.set,D=R.remove;const X={get(e){const t=U(e);if(void 0!==t)return JSON.parse(t)},save(e,t,i){let o={};\"https:\"===window.location.protocol&&(o={secure:!0,sameSite:\"none\"}),(null==i?void 0:i.daysUntilExpire)&&(o.expires=i.daysUntilExpire),(null==i?void 0:i.cookieDomain)&&(o.domain=i.cookieDomain),L(e,JSON.stringify(t),o)},remove(e,t){let i={};(null==t?void 0:t.cookieDomain)&&(i.domain=t.cookieDomain),D(e,i)}},N={get(e){const t=X.get(e);return t||X.get(`_legacy_${e}`)},save(e,t,i){let o={};\"https:\"===window.location.protocol&&(o={secure:!0}),(null==i?void 0:i.daysUntilExpire)&&(o.expires=i.daysUntilExpire),(null==i?void 0:i.cookieDomain)&&(o.domain=i.cookieDomain),L(`_legacy_${e}`,JSON.stringify(t),o),X.save(e,t,i)},remove(e,t){let i={};(null==t?void 0:t.cookieDomain)&&(i.domain=t.cookieDomain),D(e,i),X.remove(e,t),X.remove(`_legacy_${e}`,t)}},J={get(e){if(\"undefined\"==typeof sessionStorage)return;const t=sessionStorage.getItem(e);return null!=t?JSON.parse(t):void 0},save(e,t){sessionStorage.setItem(e,JSON.stringify(t))},remove(e){sessionStorage.removeItem(e)}};function F(e,t,i){var o=void 0===t?null:t,n=function(e,t){var i=atob(e);if(t){for(var o=new Uint8Array(i.length),n=0,a=i.length;n<a;++n)o[n]=i.charCodeAt(n);return String.fromCharCode.apply(null,new Uint16Array(o.buffer))}return i}(e,void 0!==i&&i),a=n.indexOf(\"\\n\",10)+1,r=n.substring(a)+(o?\"//# sourceMappingURL=\"+o:\"\"),s=new Blob([r],{type:\"application/javascript\"});return URL.createObjectURL(s)}var H,Y,G,V,M=(H=\"Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=\",Y=null,G=!1,function(e){return V=V||F(H,Y,G),new Worker(V,e)});const A={};class B{constructor(e,t){this.cache=e,this.clientId=t,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(e){var t;const i=new Set((null===(t=await this.cache.get(this.manifestKey))||void 0===t?void 0:t.keys)||[]);i.add(e),await this.cache.set(this.manifestKey,{keys:[...i]})}async remove(e){const t=await this.cache.get(this.manifestKey);if(t){const i=new Set(t.keys);return i.delete(e),i.size>0?await this.cache.set(this.manifestKey,{keys:[...i]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`@@auth0spajs@@::${e}`}}const $={memory:()=>(new P).enclosedCache,localstorage:()=>new z},q=e=>$[e],Q=t=>{const{openUrl:i,onRedirect:o}=t,n=e(t,[\"openUrl\",\"onRedirect\"]);return Object.assign(Object.assign({},n),{openUrl:!1===i||i?i:o})},ee=new a;class te{constructor(e){let t,i;if(this.userCache=(new P).enclosedCache,this.defaultOptions={authorizationParams:{scope:\"openid profile email\"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await ee.releaseLock(\"auth0.lock.getTokenSilently\"),window.removeEventListener(\"pagehide\",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),\"undefined\"!=typeof window&&(()=>{if(!w())throw new Error(\"For security reasons, `window.crypto` is required to run `auth0-spa-js`.\");if(void 0===w().subtle)throw new Error(\"\\n      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.\\n    \")})(),e.cache&&e.cacheLocation&&console.warn(\"Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`.\"),e.cache)i=e.cache;else{if(t=e.cacheLocation||\"memory\",!q(t))throw new Error(`Invalid cache location \"${t}\"`);i=q(t)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=!1===e.legacySameSiteCookie?X:N,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(e=>`auth0.${e}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;const o=e.useCookiesForTransactions?this.cookieStorage:J;var n;this.scope=j(\"openid\",this.options.authorizationParams.scope,this.options.useRefreshTokens?\"offline_access\":\"\"),this.transactionManager=new Z(o,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||c,this.cacheManager=new x(i,i.allKeys?void 0:new B(i,this.options.clientId),this.nowProvider),this.domainUrl=(n=this.options.domain,/^https?:\\/\\//.test(n)?n:`https://${n}`),this.tokenIssuer=((e,t)=>e?e.startsWith(\"https://\")?e:`https://${e}/`:`${t}/`)(this.options.issuer,this.domainUrl),\"undefined\"!=typeof window&&window.Worker&&this.options.useRefreshTokens&&\"memory\"===t&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new M)}_url(e){const t=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||s)));return`${this.domainUrl}${e}&auth0Client=${t}`}_authorizeUrl(e){return this._url(`/authorize?${v(e)}`)}async _verifyIdToken(e,t,i){const o=await this.nowProvider();return E({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:t,organization:i,leeway:this.options.leeway,max_age:(n=this.options.authorizationParams.max_age,\"string\"!=typeof n?n:parseInt(n,10)||void 0),now:o});var n}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(e,t,i){const o=k(y()),n=k(y()),a=y(),r=(e=>{const t=new Uint8Array(e);return(e=>{const t={\"+\":\"-\",\"/\":\"_\",\"=\":\"\"};return e.replace(/[+/=]/g,(e=>t[e]))})(window.btoa(String.fromCharCode(...Array.from(t))))})(await(async e=>{const t=w().subtle.digest({name:\"SHA-256\"},(new TextEncoder).encode(e));return await t})(a)),s=((e,t,i,o,n,a,r,s)=>Object.assign(Object.assign(Object.assign({client_id:e.clientId},e.authorizationParams),i),{scope:j(t,i.scope),response_type:\"code\",response_mode:s||\"query\",state:o,nonce:n,redirect_uri:r||e.authorizationParams.redirect_uri,code_challenge:a,code_challenge_method:\"S256\"}))(this.options,this.scope,e,o,n,r,e.redirect_uri||this.options.authorizationParams.redirect_uri||i,null==t?void 0:t.response_mode),c=this._authorizeUrl(s);return{nonce:n,code_verifier:a,scope:s.scope,audience:s.audience||\"default\",redirect_uri:s.redirect_uri,state:o,url:c}}async loginWithPopup(e,t){var i;if(e=e||{},!(t=t||{}).popup&&(t.popup=(e=>{const t=window.screenX+(window.innerWidth-400)/2,i=window.screenY+(window.innerHeight-600)/2;return window.open(e,\"auth0:authorize:popup\",`left=${t},top=${i},width=400,height=600,resizable,scrollbars=yes,status=1`)})(\"\"),!t.popup))throw new Error(\"Unable to open a popup for loginWithPopup - window.open returned `null`\");const o=await this._prepareAuthorizeUrl(e.authorizationParams||{},{response_mode:\"web_message\"},window.location.origin);t.popup.location.href=o.url;const n=await(e=>new Promise(((t,i)=>{let o;const n=setInterval((()=>{e.popup&&e.popup.closed&&(clearInterval(n),clearTimeout(a),window.removeEventListener(\"message\",o,!1),i(new p(e.popup)))}),1e3),a=setTimeout((()=>{clearInterval(n),i(new h(e.popup)),window.removeEventListener(\"message\",o,!1)}),1e3*(e.timeoutInSeconds||60));o=function(r){if(r.data&&\"authorization_response\"===r.data.type){if(clearTimeout(a),clearInterval(n),window.removeEventListener(\"message\",o,!1),e.popup.close(),r.data.response.error)return i(d.fromPayload(r.data.response));t(r.data.response)}},window.addEventListener(\"message\",o)})))(Object.assign(Object.assign({},t),{timeoutInSeconds:t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(o.state!==n.state)throw new d(\"state_mismatch\",\"Invalid state\");const a=(null===(i=e.authorizationParams)||void 0===i?void 0:i.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:o.audience,scope:o.scope,code_verifier:o.code_verifier,grant_type:\"authorization_code\",code:n.code,redirect_uri:o.redirect_uri},{nonceIn:o.nonce,organization:a})}async getUser(){var e;const t=await this._getIdTokenFromCache();return null===(e=null==t?void 0:t.decodedToken)||void 0===e?void 0:e.user}async getIdTokenClaims(){var e;const t=await this._getIdTokenFromCache();return null===(e=null==t?void 0:t.decodedToken)||void 0===e?void 0:e.claims}async loginWithRedirect(t={}){var i;const o=Q(t),{openUrl:n,fragment:a,appState:r}=o,s=e(o,[\"openUrl\",\"fragment\",\"appState\"]),c=(null===(i=s.authorizationParams)||void 0===i?void 0:i.organization)||this.options.authorizationParams.organization,d=await this._prepareAuthorizeUrl(s.authorizationParams||{}),{url:u}=d,l=e(d,[\"url\"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},l),{appState:r}),c&&{organization:c}));const h=a?`${u}#${a}`:u;n?await n(h):window.location.assign(h)}async handleRedirectCallback(e=window.location.href){const t=e.split(\"?\").slice(1);if(0===t.length)throw new Error(\"There are no query params available for parsing.\");const{state:i,code:o,error:n,error_description:a}=(e=>{e.indexOf(\"#\")>-1&&(e=e.substring(0,e.indexOf(\"#\")));const t=new URLSearchParams(e);return{state:t.get(\"state\"),code:t.get(\"code\")||void 0,error:t.get(\"error\")||void 0,error_description:t.get(\"error_description\")||void 0}})(t.join(\"\")),r=this.transactionManager.get();if(!r)throw new d(\"missing_transaction\",\"Invalid state\");if(this.transactionManager.remove(),n)throw new u(n,a||n,i,r.appState);if(!r.code_verifier||r.state&&r.state!==i)throw new d(\"state_mismatch\",\"Invalid state\");const s=r.organization,c=r.nonce,l=r.redirect_uri;return await this._requestToken(Object.assign({audience:r.audience,scope:r.scope,code_verifier:r.code_verifier,grant_type:\"authorization_code\",code:o},l?{redirect_uri:l}:{}),{nonceIn:c,organization:s}),{appState:r.appState}}async checkSession(e){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get(\"auth0.is.authenticated\"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(\"auth0.is.authenticated\")}try{await this.getTokenSilently(e)}catch(e){}}async getTokenSilently(e={}){var t;const i=Object.assign(Object.assign({cacheMode:\"on\"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:j(this.scope,null===(t=e.authorizationParams)||void 0===t?void 0:t.scope)})}),o=await((e,t)=>{let i=A[t];return i||(i=e().finally((()=>{delete A[t],i=null})),A[t]=i),i})((()=>this._getTokenSilently(i)),`${this.options.clientId}::${i.authorizationParams.audience}::${i.authorizationParams.scope}`);return e.detailedResponse?o:null==o?void 0:o.access_token}async _getTokenSilently(t){const{cacheMode:i}=t,o=e(t,[\"cacheMode\"]);if(\"off\"!==i){const e=await this._getEntryFromCache({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||\"default\",clientId:this.options.clientId});if(e)return e}if(\"cache-only\"!==i){if(!await(async(e,t=3)=>{for(let i=0;i<t;i++)if(await e())return!0;return!1})((()=>ee.acquireLock(\"auth0.lock.getTokenSilently\",5e3)),10))throw new l;try{if(window.addEventListener(\"pagehide\",this._releaseLockOnPageHide),\"off\"!==i){const e=await this._getEntryFromCache({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||\"default\",clientId:this.options.clientId});if(e)return e}const e=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(o):await this._getTokenFromIFrame(o),{id_token:t,access_token:n,oauthTokenScope:a,expires_in:r}=e;return Object.assign(Object.assign({id_token:t,access_token:n},a?{scope:a}:null),{expires_in:r})}finally{await ee.releaseLock(\"auth0.lock.getTokenSilently\"),window.removeEventListener(\"pagehide\",this._releaseLockOnPageHide)}}}async getTokenWithPopup(e={},t={}){var i;const o=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:j(this.scope,null===(i=e.authorizationParams)||void 0===i?void 0:i.scope)})});t=Object.assign(Object.assign({},r),t),await this.loginWithPopup(o,t);return(await this.cacheManager.get(new C({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||\"default\",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(t){null!==t.clientId?t.clientId=t.clientId||this.options.clientId:delete t.clientId;const i=t.logoutParams||{},{federated:o}=i,n=e(i,[\"federated\"]),a=o?\"&federated\":\"\";return this._url(`/v2/logout?${v(Object.assign({clientId:t.clientId},n))}`)+a}async logout(t={}){const i=Q(t),{openUrl:o}=i,n=e(i,[\"openUrl\"]);null===t.clientId?await this.cacheManager.clear():await this.cacheManager.clear(t.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove(\"@@user@@\");const a=this._buildLogoutUrl(n);o?await o(a):!1!==o&&window.location.assign(a)}async _getTokenFromIFrame(e){const t=Object.assign(Object.assign({},e.authorizationParams),{prompt:\"none\"}),i=this.cookieStorage.get(this.orgHintCookieName);i&&!t.organization&&(t.organization=i);const{url:o,state:n,nonce:a,code_verifier:r,redirect_uri:s,scope:c,audience:u}=await this._prepareAuthorizeUrl(t,{response_mode:\"web_message\"},window.location.origin);try{if(window.crossOriginIsolated)throw new d(\"login_required\",\"The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.\");const i=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,h=await((e,t,i=60)=>new Promise(((o,n)=>{const a=window.document.createElement(\"iframe\");a.setAttribute(\"width\",\"0\"),a.setAttribute(\"height\",\"0\"),a.style.display=\"none\";const r=()=>{window.document.body.contains(a)&&(window.document.body.removeChild(a),window.removeEventListener(\"message\",s,!1))};let s;const c=setTimeout((()=>{n(new l),r()}),1e3*i);s=function(e){if(e.origin!=t)return;if(!e.data||\"authorization_response\"!==e.data.type)return;const i=e.source;i&&i.close(),e.data.response.error?n(d.fromPayload(e.data.response)):o(e.data.response),clearTimeout(c),window.removeEventListener(\"message\",s,!1),setTimeout(r,2e3)},window.addEventListener(\"message\",s,!1),window.document.body.appendChild(a),a.setAttribute(\"src\",e)})))(o,this.domainUrl,i);if(n!==h.state)throw new d(\"state_mismatch\",\"Invalid state\");const p=await this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:r,code:h.code,grant_type:\"authorization_code\",redirect_uri:s,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:a,organization:t.organization});return Object.assign(Object.assign({},p),{scope:c,oauthTokenScope:p.scope,audience:u})}catch(e){throw\"login_required\"===e.error&&this.logout({openUrl:!1}),e}}async _getTokenUsingRefreshToken(e){const t=await this.cacheManager.get(new C({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||\"default\",clientId:this.options.clientId}));if(!(t&&t.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw new f(e.authorizationParams.audience||\"default\",e.authorizationParams.scope)}const i=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,o=\"number\"==typeof e.timeoutInSeconds?1e3*e.timeoutInSeconds:null;try{const n=await this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:\"refresh_token\",refresh_token:t&&t.refresh_token,redirect_uri:i}),o&&{timeout:o}));return Object.assign(Object.assign({},n),{scope:e.authorizationParams.scope,oauthTokenScope:n.scope,audience:e.authorizationParams.audience||\"default\"})}catch(t){if((t.message.indexOf(\"Missing Refresh Token\")>-1||t.message&&t.message.indexOf(\"invalid refresh token\")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw t}}async _saveEntryInCache(t){const{id_token:i,decodedToken:o}=t,n=e(t,[\"id_token\",\"decodedToken\"]);this.userCache.set(\"@@user@@\",{id_token:i,decodedToken:o}),await this.cacheManager.setIdToken(this.options.clientId,t.id_token,t.decodedToken),await this.cacheManager.set(n)}async _getIdTokenFromCache(){const e=this.options.authorizationParams.audience||\"default\",t=await this.cacheManager.getIdToken(new C({clientId:this.options.clientId,audience:e,scope:this.scope})),i=this.userCache.get(\"@@user@@\");return t&&t.id_token===(null==i?void 0:i.id_token)?i:(this.userCache.set(\"@@user@@\",t),t)}async _getEntryFromCache({scope:e,audience:t,clientId:i}){const o=await this.cacheManager.get(new C({scope:e,audience:t,clientId:i}),60);if(o&&o.access_token){const{access_token:e,oauthTokenScope:t,expires_in:i}=o,n=await this._getIdTokenFromCache();return n&&Object.assign(Object.assign({id_token:n.id_token,access_token:e},t?{scope:t}:null),{expires_in:i})}}async _requestToken(e,t){const{nonceIn:i,organization:o}=t||{},n=await T(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},e),this.worker),a=await this._verifyIdToken(n.id_token,i,o);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},n),{decodedToken:a,scope:e.scope,audience:e.audience||\"default\"}),n.scope?{oauthTokenScope:n.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(o||a.claims.org_id),Object.assign(Object.assign({},n),{decodedToken:a})}}class ie{}async function oe(e){const t=new te(e);return await t.checkSession(),t}export{te as Auth0Client,u as AuthenticationError,C as CacheKey,d as GenericError,P as InMemoryCache,z as LocalStorageCache,m as MfaRequiredError,f as MissingRefreshTokenError,p as PopupCancelledError,h as PopupTimeoutError,l as TimeoutError,ie as User,oe as createAuth0Client};\n//# sourceMappingURL=auth0-spa-js.production.esm.js.map\n","export const PATH_ROOT = '/';\nexport const PATH_RWELL = '/rw';\nexport const PATH_AUTHD = '/authenticated';\nexport const PATH_LOGIN = '/login';\nexport const PATH_LOGOUT = '/logout';\n","import { extend, isEmpty } from 'underscore';\nimport Radio from 'backbone.radio';\nimport { createAuth0Client } from '@auth0/auth0-spa-js';\n\nimport { auth0Config as config, appConfig } from 'js/config';\n\nimport { LoginPromptView } from 'js/views/globals/prelogin/prelogin_views';\n\nimport { PATH_ROOT, PATH_RWELL, PATH_AUTHD, PATH_LOGIN, PATH_LOGOUT } from './config';\n\nconst RWELL_CONNECTION = 'google-oauth2';\n\nlet auth0;\nlet token;\n\nfunction should() {\n  return !isEmpty(config);\n}\n\nfunction setAuth0(auth0Client) {\n  auth0 = auth0Client;\n  return auth0.isAuthenticated();\n}\n\nfunction setToken(tokenString) {\n  token = tokenString;\n}\n\nfunction getToken() {\n  if (token) return token;\n  if (!auth0 || !navigator.onLine) return;\n\n  return auth0\n    .getTokenSilently()\n    .catch(() => {\n      logout();\n    });\n}\n\n/*\n * Modifies the current history state\n */\nfunction replaceState(state) {\n  window.history.replaceState({}, document.title, state);\n}\n\n/*\n * authenticate parses the implicit flow hash to determine the token\n * if there is an error it forces a new authorization with a new login\n * If successful, redirects to the initial path and sends the app\n * the token and config org name\n */\nfunction authenticate(success) {\n  return auth0.handleRedirectCallback()\n    .then(({ appState }) => {\n      if (appState === PATH_LOGIN) appState = PATH_ROOT;\n\n      if (appState === PATH_RWELL) {\n        appState = PATH_ROOT;\n        localStorage.setItem(PATH_RWELL, 1);\n      }\n\n      replaceState(appState);\n      success();\n    })\n    .catch(() => {\n      login();\n    });\n}\n\n/*\n *  Take appconfig.auth0 and extend it with the default config\n */\nfunction getConfig() {\n  config.authorizationParams = extend({\n    redirect_uri: location.origin + PATH_AUTHD,\n    audience: 'care-ops-backend',\n  }, config.authorizationParams);\n\n  if (localStorage.getItem(PATH_RWELL)) {\n    config.authorizationParams.connection = RWELL_CONNECTION;\n  }\n\n  return config;\n}\n\nfunction logout() {\n  window.location = PATH_LOGOUT;\n}\n\nfunction loginWithRedirect(opts) {\n  auth0.loginWithRedirect(extend({ prompt: 'login' }, opts));\n}\n\nfunction login(appState = PATH_ROOT) {\n  // iframe buster\n  if (top !== self) {\n    top.location = PATH_LOGIN;\n    return;\n  }\n\n  if (appConfig.disableLoginPrompt) {\n    return loginWithRedirect({ appState });\n  }\n\n  replaceState(PATH_LOGIN);\n\n  const loginPromptView = new LoginPromptView();\n\n  loginPromptView.on('click:login', ()=> {\n    loginWithRedirect({ appState });\n  });\n\n  loginPromptView.render();\n}\n\n/*\n * login will occur for any pre-auth flow\n * initially requesting auth0 authorization\n * And authenticating authorization if auth0 redirected to AUTHD_PATH\n */\nfunction auth(success) {\n  createAuth0Client(getConfig())\n    .then(setAuth0)\n    .then(isAuthenticated => {\n      if (location.pathname === PATH_LOGOUT) {\n        token = null;\n        const federated = Radio.request('settings', 'get', 'federated_logout');\n        auth0.logout({ logoutParams: { returnTo: location.origin, federated } });\n        return;\n      }\n\n      // RWell specific login\n      if (location.pathname === PATH_RWELL) {\n        loginWithRedirect({\n          appState: PATH_RWELL,\n          authorizationParams: {\n            connection: RWELL_CONNECTION,\n          },\n        });\n        return;\n      }\n\n      if (location.pathname === PATH_AUTHD) {\n        authenticate(success);\n        return;\n      }\n\n      if (!isAuthenticated) {\n        login(location.pathname);\n        return;\n      }\n\n      if (location.pathname === PATH_LOGIN) {\n        replaceState(PATH_ROOT);\n      }\n\n      success();\n    });\n}\n\nexport {\n  auth,\n  logout,\n  setToken,\n  getToken,\n  should,\n};\n","import { appConfig } from 'js/config';\nimport { PATH_ROOT, PATH_LOGOUT } from './config';\n\nlet token;\n\nfunction should() {\n  return appConfig.cypress || !navigator.onLine;\n}\n\nfunction setToken(tokenString) {\n  token = tokenString;\n}\n\nfunction getToken() {\n  return token;\n}\n\nfunction logout() {\n  window.location = PATH_LOGOUT;\n}\n\nfunction auth(success) {\n  if (location.pathname === PATH_LOGOUT) {\n    token = null;\n    window.location = PATH_ROOT;\n    return;\n  }\n\n  return success();\n}\n\nexport {\n  auth,\n  logout,\n  setToken,\n  getToken,\n  should,\n};\n","// Generated by genversion.\nconst version = '4.2.0';\n\nconst SESSION_PREFIX = 'pkce-code-verifier';\nvar flagDataTypeMap;\n(function (flagDataTypeMap) {\n    flagDataTypeMap[\"s\"] = \"string\";\n    flagDataTypeMap[\"i\"] = \"integer\";\n    flagDataTypeMap[\"b\"] = \"boolean\";\n})(flagDataTypeMap || (flagDataTypeMap = {}));\nvar storageMap;\n(function (storageMap) {\n    storageMap[\"token_bundle\"] = \"kinde_token\";\n    storageMap[\"access_token\"] = \"kinde_access_token\";\n    storageMap[\"id_token\"] = \"kinde_id_token\";\n    storageMap[\"user\"] = \"user\";\n    storageMap[\"refresh_token\"] = \"kinde_refresh_token\";\n})(storageMap || (storageMap = {}));\n\nclass InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nfunction jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n\nconst hasCookie = (name) => document.cookie\n    .split('; ')\n    .find((row) => row.split('=')[0] === name)\n    ?.split('=')[1];\n\n// Base64-urlencodes the input string\nfunction base64UrlEncode(str) {\n    // Convert the ArrayBuffer to string using Uint8 array to conver to what btoa accepts.\n    // btoa accepts chars only within ascii 0-255 and base64 encodes them.\n    // Then convert the base64 encoded to base64url encoded\n    //   (replace + with -, replace / with _, trim trailing =)\n    const numberArray = Array.from(new Uint8Array(str));\n    return btoa(String.fromCharCode.apply(null, numberArray))\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/=+$/, '');\n}\n\n// Calculate the SHA256 hash of the input text.\n// Returns a promise that resolves to an ArrayBuffer\nfunction sha256(plain) {\n    const encoder = new TextEncoder();\n    const data = encoder.encode(plain);\n    return window.crypto.subtle.digest('SHA-256', data);\n}\n\n// Return the base64-urlencoded sha256 hash for the PKCE challenge\nasync function pkceChallengeFromVerifier(v) {\n    const hashed = await sha256(v);\n    return base64UrlEncode(hashed);\n}\n\nfunction randomString() {\n    const array = new Uint32Array(28);\n    window.crypto.getRandomValues(array);\n    return Array.from(array, (dec) => ('0' + dec.toString(16)).substr(-2)).join('');\n}\n\nconst LEEWAY = 60;\nconst isJWTActive = (jwtToken) => {\n    const unixTime = Math.floor(Date.now() / 1000);\n    return jwtToken.exp + LEEWAY > unixTime;\n};\n\nconst setupChallenge = async (authorizationEndpoint, appState) => {\n    const state = randomString();\n    const code_verifier = randomString(); // the secret\n    // Hash and base64-urlencode the secret to use as the challenge\n    const code_challenge = await pkceChallengeFromVerifier(code_verifier);\n    sessionStorage.setItem(`${SESSION_PREFIX}-${state}`, JSON.stringify({\n        codeVerifier: code_verifier,\n        appState\n    }));\n    // Build and encode the authorisation request url\n    const url = new URL(authorizationEndpoint);\n    return { state, code_challenge, url };\n};\n\nconst createStore = () => {\n    let items = {};\n    const getItem = (key) => {\n        return items[key];\n    };\n    const setItem = (key, value) => {\n        items[key] = value;\n    };\n    const removeItem = (key) => {\n        delete items[key];\n    };\n    const reset = () => {\n        items = {};\n    };\n    return {\n        reset,\n        getItem,\n        removeItem,\n        setItem\n    };\n};\nconst store = createStore();\n\nconst getClaim = (claim, tokenKey = 'access_token') => {\n    const token = store.getItem(`kinde_${tokenKey}`);\n    return token ? { name: claim, value: token[claim] } : null;\n};\n\nconst getClaimValue = (claim, tokenKey = 'access_token') => {\n    const obj = getClaim(claim, tokenKey);\n    return obj && obj.value;\n};\n\nconst getFlag = (code, defaultValue, flagType) => {\n    const flags = getClaimValue('feature_flags');\n    const flag = (flags && flags[code] ? flags[code] : {});\n    if (flag.v == null && defaultValue == null) {\n        throw Error(`Flag ${code} was not found, and no default value has been provided`);\n    }\n    if (flagType && flag.t && flagType !== flag.t) {\n        throw Error(`Flag ${code} is of type ${flagDataTypeMap[flag.t]} - requested type ${flagDataTypeMap[flagType]}`);\n    }\n    return {\n        code,\n        type: flagDataTypeMap[flag.t || flagType],\n        value: (flag.v == null ? defaultValue : flag.v),\n        is_default: flag.v == null\n    };\n};\n\nconst getBooleanFlag = (code, defaultValue) => {\n    try {\n        const flag = getFlag(code, defaultValue, 'b');\n        return flag.value;\n    }\n    catch (err) {\n        console.error(err);\n        return err;\n    }\n};\n\nconst getIntegerFlag = (code, defaultValue) => {\n    try {\n        const flag = getFlag(code, defaultValue, 'i');\n        return flag.value;\n    }\n    catch (err) {\n        console.error(err);\n        return err;\n    }\n};\n\nconst getStringFlag = (code, defaultValue) => {\n    try {\n        const flag = getFlag(code, defaultValue, 's');\n        return flag.value;\n    }\n    catch (err) {\n        console.error(err);\n        return err;\n    }\n};\n\nconst getUserOrganizations = () => {\n    const orgCodes = (getClaimValue('org_codes', 'id_token') ?? []);\n    return {\n        orgCodes\n    };\n};\n\nconst PAYLOAD_CLAIMS = ['iss', 'azp'];\nconst isTokenValid = (token, config) => {\n    if (!token) {\n        throw new Error('ID token is required');\n    }\n    PAYLOAD_CLAIMS.forEach((claim) => {\n        if (!token.payload[claim]) {\n            throw new Error(`(${claim}) claim is required.`);\n        }\n        if (token.payload[claim] !== config[claim]) {\n            throw new Error(`${claim} claim mismatch. Expected: \"${config[claim]}\", Received: \"${token.payload[claim]}\"`);\n        }\n    });\n    if (token.header.alg !== 'RS256') {\n        throw new Error(`Unsupported signature alg. Expected: \"RS256\", Received: \"${token.header.alg}\"`);\n    }\n    if (config.aud) {\n        if (!Array.isArray(token.payload.aud)) {\n            throw new Error('(aud) claim must be an array');\n        }\n        if (!token.payload.aud.every((element) => config.aud.includes(element))) {\n            throw new Error(`(aud) claim mismatch. Expected: \"${config.aud}\", Received: \"${token.payload.aud.join(', ')}\"`);\n        }\n    }\n    const isJWTExpired = !isJWTActive(token.payload);\n    if (isJWTExpired) {\n        throw new Error(`Token expired`);\n    }\n    return true;\n};\n\nconst isCustomDomain = (url) => {\n    const domain = new URL(url);\n    const bareDomain = domain.hostname.split('.').slice(-2).join('.');\n    return bareDomain !== 'kinde.com';\n};\n\nconst createKindeClient = async (options) => {\n    if (!options) {\n        throw Error('Please provide your Kinde credentials');\n    }\n    if (options !== Object(options)) {\n        throw Error('The Kinde SDK must be initiated with an object');\n    }\n    const { audience, client_id: clientId, domain, is_dangerously_use_local_storage = false, redirect_uri, logout_uri = redirect_uri, on_redirect_callback, on_error_callback, scope = 'openid profile email offline', proxy_redirect_uri, _framework, _frameworkVersion } = options;\n    if (audience && typeof audience !== 'string') {\n        throw Error('Please supply a valid audience for your api');\n    }\n    if (scope && typeof scope !== 'string') {\n        throw Error('Please supply a valid scope');\n    }\n    if (!redirect_uri || typeof options.redirect_uri !== 'string') {\n        throw Error('Please supply a valid redirect_uri for your users to be redirected after successful authentication');\n    }\n    if (!domain || typeof domain !== 'string') {\n        throw Error('Please supply a valid Kinde domain so we can connect to your account');\n    }\n    if (typeof is_dangerously_use_local_storage !== 'boolean') {\n        throw TypeError('Please supply a boolean value for is_dangerously_use_local_storage');\n    }\n    const client_id = clientId || 'spa@live';\n    // If code is running on localhost, it's a development environment\n    const isDevelopment = location.hostname === 'localhost' || location.hostname === '127.0.0.1';\n    // Indicates using a custom domain on a production environment\n    const isUseCookie = !isDevelopment &&\n        !is_dangerously_use_local_storage &&\n        isCustomDomain(domain);\n    const isUseLocalStorage = isDevelopment || is_dangerously_use_local_storage;\n    const config = {\n        audience,\n        client_id,\n        redirect_uri,\n        authorization_endpoint: `${domain}/oauth2/auth`,\n        token_endpoint: `${domain}/oauth2/token`,\n        requested_scopes: scope,\n        domain,\n        _framework,\n        _frameworkVersion\n    };\n    const setStore = (data) => {\n        if (!data || data.error)\n            return;\n        const idToken = jwtDecode(data.id_token);\n        const idTokenHeader = jwtDecode(data.id_token, { header: true });\n        const accessToken = jwtDecode(data.access_token);\n        const accessTokenHeader = jwtDecode(data.access_token, { header: true });\n        const validatorOptions = {\n            iss: domain,\n            azp: clientId,\n            aud: audience\n        };\n        isTokenValid({\n            payload: idToken,\n            header: idTokenHeader\n        }, { ...validatorOptions, aud: clientId });\n        isTokenValid({\n            payload: accessToken,\n            header: accessTokenHeader\n        }, validatorOptions);\n        {\n            store.setItem(storageMap.token_bundle, data);\n            store.setItem(storageMap.access_token, accessToken);\n            store.setItem(storageMap.id_token, idToken);\n            if (idToken.sub) {\n                store.setItem(storageMap.user, {\n                    id: idToken.sub,\n                    given_name: idToken.given_name,\n                    family_name: idToken.family_name,\n                    email: idToken.email,\n                    picture: idToken.picture\n                });\n            }\n            if (isUseLocalStorage) {\n                localStorage.setItem(storageMap.refresh_token, data.refresh_token);\n            }\n            else {\n                store.setItem(storageMap.refresh_token, data.refresh_token);\n            }\n        }\n    };\n    const useRefreshToken = async ({ tokenType } = { tokenType: storageMap.access_token }) => {\n        const localStorageRefreshToken = isUseLocalStorage\n            ? localStorage.getItem(storageMap.refresh_token)\n            : store.getItem(storageMap.refresh_token);\n        const isCallTokenEndpoint = localStorageRefreshToken || (isUseCookie && hasCookie('_kbrte'));\n        if (isCallTokenEndpoint) {\n            try {\n                const response = await fetch(config.token_endpoint, {\n                    method: 'POST',\n                    ...(isUseCookie && { credentials: 'include' }),\n                    headers: new Headers({\n                        'Content-type': 'application/x-www-form-urlencoded; charset=UTF-8',\n                        'Kinde-SDK': `\n            ${config._framework || 'JavaScript'}/${config._frameworkVersion || version}`\n                    }),\n                    body: new URLSearchParams({\n                        client_id: config.client_id,\n                        grant_type: 'refresh_token',\n                        ...(!isUseCookie &&\n                            localStorageRefreshToken && { refresh_token: localStorageRefreshToken })\n                    })\n                });\n                const data = await response.json();\n                setStore(data);\n                if (tokenType === storageMap.id_token) {\n                    return data.id_token;\n                }\n                return data.access_token;\n            }\n            catch (err) {\n                console.error(err);\n            }\n        }\n    };\n    const getTokenType = async (tokenType, options) => {\n        const token = store.getItem(storageMap.token_bundle);\n        if (!token || options.isForceRefresh) {\n            return await useRefreshToken({ tokenType });\n        }\n        const tokenToReturn = store.getItem(tokenType);\n        const isTokenActive = isJWTActive(tokenToReturn);\n        if (isTokenActive) {\n            return tokenType === storageMap.access_token\n                ? token.access_token\n                : token.id_token;\n        }\n        else {\n            return await useRefreshToken({ tokenType });\n        }\n    };\n    const getToken = async (options = {}) => {\n        return await getTokenType(storageMap.access_token, options);\n    };\n    const getIdToken = async (options = {}) => {\n        return await getTokenType(storageMap.id_token, options);\n    };\n    const isAuthenticated = async () => {\n        const accessToken = store.getItem(storageMap.access_token);\n        if (!accessToken) {\n            return false;\n        }\n        const isTokenActive = isJWTActive(accessToken);\n        if (isTokenActive) {\n            return true;\n        }\n        await useRefreshToken();\n        return true;\n    };\n    const getPermissions = () => {\n        const orgCode = getClaimValue('org_code');\n        const permissions = (getClaimValue('permissions') ?? []);\n        return {\n            permissions,\n            orgCode\n        };\n    };\n    const getPermission = (key) => {\n        const orgCode = getClaimValue('org_code');\n        const permissions = (getClaimValue('permissions') ?? []);\n        return {\n            isGranted: permissions.some((p) => p === key),\n            orgCode\n        };\n    };\n    const getOrganization = () => {\n        const orgCode = getClaimValue('org_code');\n        return {\n            orgCode\n        };\n    };\n    const clearUrlParams = () => {\n        const url = new URL(window.location.toString());\n        url.search = '';\n        window.history.pushState({}, '', url);\n    };\n    const handleRedirectToApp = async (q) => {\n        const code = q.get('code');\n        const state = q.get('state');\n        const error = q.get('error');\n        const stringState = sessionStorage.getItem(`${SESSION_PREFIX}-${state}`);\n        // Verify state\n        if (!stringState) {\n            console.error('Invalid state');\n        }\n        else {\n            if (error) {\n                const error = q.get('error');\n                const errorDescription = q.get('error_description');\n                clearUrlParams();\n                sessionStorage.removeItem(`${SESSION_PREFIX}-${state}`);\n                const { appState } = JSON.parse(stringState);\n                if (on_error_callback) {\n                    on_error_callback({\n                        error,\n                        errorDescription,\n                        state,\n                        appState\n                    });\n                }\n                else {\n                    window.location.href = appState.kindeOriginUrl;\n                }\n                return false;\n            }\n            const { appState, codeVerifier } = JSON.parse(stringState);\n            // Exchange authorisation code for an access token\n            try {\n                const response = await fetch(config.token_endpoint, {\n                    method: 'POST',\n                    ...(isUseCookie && { credentials: 'include' }),\n                    headers: new Headers({\n                        'Content-type': 'application/x-www-form-urlencoded; charset=UTF-8',\n                        'Kinde-SDK': `${config._framework || 'JavaScript'}/${config._frameworkVersion || version}`\n                    }),\n                    body: new URLSearchParams({\n                        client_id: config.client_id,\n                        code,\n                        code_verifier: codeVerifier,\n                        grant_type: 'authorization_code',\n                        redirect_uri: config.redirect_uri\n                    })\n                });\n                const data = await response.json();\n                setStore(data);\n                // Remove auth code from address bar\n                clearUrlParams();\n                sessionStorage.removeItem(`${SESSION_PREFIX}-${state}`);\n                const user = getUser();\n                if (on_redirect_callback) {\n                    on_redirect_callback(user, appState);\n                }\n            }\n            catch (err) {\n                console.error(err);\n                sessionStorage.removeItem(`${SESSION_PREFIX}-${state}`);\n            }\n        }\n    };\n    const redirectToKinde = async (options) => {\n        const { app_state = {}, prompt, is_create_org, org_name = '', org_code, authUrlParams = {} } = options;\n        if (!app_state.kindeOriginUrl) {\n            app_state.kindeOriginUrl = window.location.href;\n        }\n        const { state, code_challenge, url } = await setupChallenge(config.authorization_endpoint, app_state);\n        const searchParams = {\n            redirect_uri,\n            client_id,\n            response_type: 'code',\n            scope: config.requested_scopes,\n            code_challenge,\n            code_challenge_method: 'S256',\n            state\n        };\n        if (prompt) {\n            searchParams.prompt = prompt;\n        }\n        if (org_code) {\n            searchParams.org_code = org_code;\n        }\n        if (is_create_org) {\n            searchParams.is_create_org = String(is_create_org);\n            searchParams.org_name = org_name;\n        }\n        const urlSearchParams = new URLSearchParams(Object.assign(authUrlParams, searchParams));\n        if (audience) {\n            /* if multiple audiences requested it should appear multiple times in the query string */\n            audience\n                .trim()\n                .split(/\\s+/)\n                .forEach((aud) => {\n                urlSearchParams.append('audience', aud);\n            });\n        }\n        url.search = String(urlSearchParams);\n        window.location.href = url.toString();\n    };\n    const register = async (options) => {\n        await redirectToKinde({\n            ...options,\n            prompt: 'create'\n        });\n    };\n    const login = async (options) => {\n        await redirectToKinde({\n            ...options\n        });\n    };\n    const createOrg = async (options) => {\n        await redirectToKinde({\n            ...options,\n            prompt: 'create',\n            is_create_org: true\n        });\n    };\n    const getUser = () => {\n        return store.getItem(storageMap.user);\n    };\n    const getUserProfile = async () => {\n        const token = await getToken();\n        const headers = {\n            Accept: 'application/json',\n            Authorization: `Bearer ${token}`\n        };\n        try {\n            const res = await fetch(`${config.domain}/oauth2/v2/user_profile`, {\n                method: 'GET',\n                headers: headers\n            });\n            const json = await res.json();\n            store.setItem(storageMap.user, {\n                id: json.sub,\n                given_name: json.given_name,\n                family_name: json.family_name,\n                email: json.email,\n                picture: json.picture\n            });\n            return store.getItem(storageMap.user);\n        }\n        catch (err) {\n            console.error(err);\n        }\n    };\n    const logout = async () => {\n        const url = new URL(`${config.domain}/logout`);\n        try {\n            store.reset();\n            if (isUseLocalStorage) {\n                localStorage.removeItem(storageMap.refresh_token);\n            }\n            const searchParams = new URLSearchParams({\n                redirect: logout_uri\n            });\n            url.search = String(searchParams);\n            window.location.href = url.toString();\n        }\n        catch (err) {\n            console.error(err);\n        }\n    };\n    const init = async () => {\n        const q = new URLSearchParams(window.location.search);\n        // Is a redirect from Kinde Auth server\n        if (isKindeRedirect(q)) {\n            await handleRedirectToApp(q);\n        }\n        else {\n            // For onload / new tab / page refresh\n            if (isUseCookie || isUseLocalStorage) {\n                await useRefreshToken();\n            }\n        }\n    };\n    const isKindeRedirect = (searchParams) => {\n        // Check if the search params hve the code parameter\n        const hasOauthCode = searchParams.has('code');\n        const hasError = searchParams.has('error');\n        if (!hasOauthCode && !hasError)\n            return false;\n        // Also check if redirect_uri matches current url\n        const { protocol, host, pathname } = window.location;\n        const currentRedirectUri = proxy_redirect_uri || `${protocol}//${host}${pathname}`;\n        return (currentRedirectUri === redirect_uri ||\n            currentRedirectUri === `${redirect_uri}/`);\n    };\n    await init();\n    return {\n        getToken,\n        getIdToken,\n        getUser,\n        getUserProfile,\n        login,\n        logout,\n        register,\n        isAuthenticated,\n        createOrg,\n        getClaim,\n        getFlag,\n        getBooleanFlag,\n        getStringFlag,\n        getIntegerFlag,\n        getPermissions,\n        getPermission,\n        getOrganization,\n        getUserOrganizations\n    };\n};\n\nexport { createKindeClient as default };\n","import { extend, isEmpty } from 'underscore';\nimport createKindeClient from '@kinde-oss/kinde-auth-pkce-js';\n\nimport { kindeConfig as config, appConfig } from 'js/config';\n\nimport { LoginPromptView } from 'js/views/globals/prelogin/prelogin_views';\n\nimport { PATH_ROOT, PATH_RWELL, PATH_AUTHD, PATH_LOGIN, PATH_LOGOUT } from './config';\n\nlet kinde;\nlet token;\n\nfunction should() {\n  return !isEmpty(config);\n}\n\nfunction setToken(tokenString) {\n  token = tokenString;\n}\n\nfunction getToken() {\n  if (token) return token;\n  if (!kinde || !navigator.onLine) return;\n\n  return kinde\n    .getToken()\n    .catch(() => {\n      logout();\n    });\n}\n\n/*\n * Modifies the current history state\n */\nfunction replaceState(state) {\n  window.history.replaceState({}, document.title, state);\n}\n\nfunction registerKinde(path, connection) {\n  kinde.register({\n    app_state: { path },\n    authUrlParams: { connection_id: connection },\n  });\n}\n\n\nasync function createKinde(success) {\n  const kindeCreateParams = {\n    redirect_uri: location.origin + PATH_AUTHD,\n    logout_uri: location.origin,\n    on_redirect_callback: (user, { path } = {}) => {\n      if (!user) {\n        login(path);\n        return;\n      }\n\n      if (path === PATH_LOGIN) path = PATH_ROOT;\n\n      if (path === PATH_RWELL) {\n        path = PATH_ROOT;\n        localStorage.setItem(PATH_RWELL, 1);\n      }\n\n      replaceState(path);\n\n      success();\n    },\n  };\n\n  return createKindeClient(extend(kindeCreateParams, config.createParams));\n}\n\nfunction logout() {\n  window.location = PATH_LOGOUT;\n}\n\nfunction login(path = PATH_ROOT, connection = config.connections.default) {\n  // iframe buster\n  if (top !== self) {\n    top.location = PATH_LOGIN;\n    return;\n  }\n\n  replaceState(PATH_LOGIN);\n\n  if (appConfig.disableLoginPrompt) {\n    registerKinde(path, connection);\n    return;\n  }\n\n  const loginPromptView = new LoginPromptView();\n\n  loginPromptView.on('click:login', ()=> {\n    registerKinde(path, connection);\n  });\n\n  loginPromptView.render();\n}\n\n/*\n * Requests kinde authorization\n * And authenticates authorization if kinde redirected to PATH_AUTHD\n */\nasync function auth(success) {\n  // NOTE: Set path before await create to avoid redirect replaceState changing the value\n  const pathName = location.pathname;\n\n  kinde = await createKinde(success);\n\n  if (pathName === PATH_AUTHD) return;\n\n  if (pathName === PATH_LOGOUT) {\n    token = null;\n    kinde.logout();\n    return;\n  }\n\n  // RWell specific login\n  if (pathName === PATH_RWELL || localStorage.getItem(PATH_RWELL)) {\n    login(PATH_RWELL, config.connections.roundingwell);\n    return;\n  }\n\n  if (!await kinde.getUser()) {\n    login(pathName);\n    return;\n  }\n\n  success();\n}\n\nexport {\n  auth,\n  logout,\n  setToken,\n  getToken,\n  should,\n};\n","// src/exceptions/no-client-id-provided.exception.ts\nvar NoClientIdProvidedException = class extends Error {\n  constructor() {\n    super(...arguments);\n    this.status = 500;\n    this.name = \"NoClientIdProvidedException\";\n    this.message = `Missing Client ID. Pass it to the constructor (createClient(\"client_01HXRMBQ9BJ3E7QSTQ9X2PHVB7\"))`;\n  }\n};\n\n// src/serializers/user.serializer.ts\nvar deserializeUser = (user) => ({\n  object: user.object,\n  id: user.id,\n  email: user.email,\n  emailVerified: user.email_verified,\n  firstName: user.first_name,\n  profilePictureUrl: user.profile_picture_url,\n  lastName: user.last_name,\n  createdAt: user.created_at,\n  updatedAt: user.updated_at\n});\n\n// src/serializers/authentication-response.serializer.ts\nvar deserializeAuthenticationResponse = (authenticationResponse) => {\n  const {\n    user,\n    organization_id,\n    access_token,\n    refresh_token,\n    impersonator,\n    ...rest\n  } = authenticationResponse;\n  return {\n    user: deserializeUser(user),\n    organizationId: organization_id,\n    accessToken: access_token,\n    refreshToken: refresh_token,\n    impersonator,\n    ...rest\n  };\n};\n\n// src/utils/authenticate-with-code.ts\nasync function authenticateWithCode(options) {\n  const { baseUrl, clientId, code, codeVerifier, useCookie } = options;\n  const response = await fetch(`${baseUrl}/user_management/authenticate`, {\n    method: \"POST\",\n    ...useCookie && { credentials: \"include\" },\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      code,\n      client_id: clientId,\n      grant_type: \"authorization_code\",\n      code_verifier: codeVerifier\n    })\n  });\n  if (response.ok) {\n    const data = await response.json();\n    return deserializeAuthenticationResponse(data);\n  } else {\n    console.log(\"error\", await response.json());\n  }\n}\n\n// src/errors.ts\nvar AuthKitError = class extends Error {\n};\nvar RefreshError = class extends AuthKitError {\n};\nvar LoginRequiredError = class extends AuthKitError {\n  constructor() {\n    super(...arguments);\n    this.message = \"No access token available\";\n  }\n};\n\n// src/utils/authenticate-with-refresh-token.ts\nasync function authenticateWithRefreshToken({\n  baseUrl,\n  clientId,\n  refreshToken,\n  organizationId,\n  useCookie\n}) {\n  const response = await fetch(`${baseUrl}/user_management/authenticate`, {\n    method: \"POST\",\n    ...useCookie && { credentials: \"include\" },\n    headers: {\n      Accept: \"application/json, text/plain, */*\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      client_id: clientId,\n      grant_type: \"refresh_token\",\n      ...!useCookie && { refresh_token: refreshToken },\n      organization_id: organizationId\n    })\n  });\n  if (response.ok) {\n    const data = await response.json();\n    return deserializeAuthenticationResponse(data);\n  } else {\n    const error = await response.json();\n    throw new RefreshError(error.error_description);\n  }\n}\n\n// src/utils/to-query-string.ts\nfunction toQueryString(options) {\n  const searchParams = new URLSearchParams();\n  const keys = Object.keys(options).sort();\n  for (const key of keys) {\n    const value = options[key];\n    if (value) {\n      searchParams.append(key, value);\n    }\n  }\n  return searchParams.toString();\n}\n\n// src/utils/get-authorization-url.ts\nfunction getAuthorizationUrl(baseUrl, {\n  clientId,\n  connectionId,\n  context,\n  domainHint,\n  loginHint,\n  organizationId,\n  provider = \"authkit\",\n  redirectUri,\n  state,\n  screenHint,\n  passwordResetToken,\n  invitationToken,\n  codeChallenge,\n  codeChallengeMethod\n}) {\n  if (!provider && !connectionId && !organizationId) {\n    throw new TypeError(\n      `Incomplete arguments. Need to specify either a 'connectionId', 'organizationId', or 'provider'.`\n    );\n  }\n  if (provider !== \"authkit\" && screenHint) {\n    throw new TypeError(\n      `'screenHint' is only supported for 'authkit' provider`\n    );\n  }\n  const query = toQueryString({\n    connection_id: connectionId,\n    context,\n    organization_id: organizationId,\n    domain_hint: domainHint,\n    login_hint: loginHint,\n    provider,\n    client_id: clientId,\n    redirect_uri: redirectUri,\n    response_type: \"code\",\n    state,\n    screen_hint: screenHint,\n    invitation_token: invitationToken,\n    password_reset_token: passwordResetToken,\n    code_challenge: codeChallenge,\n    code_challenge_method: codeChallengeMethod\n  });\n  return `${baseUrl}/user_management/authorize?${query}`;\n}\n\n// src/utils/memory-storage.ts\nfunction createMemoryStorage() {\n  let _store = {};\n  function setItem(key, value) {\n    _store[key] = value;\n  }\n  function getItem(key) {\n    return _store[key];\n  }\n  function removeItem(key) {\n    delete _store[key];\n  }\n  function reset() {\n    _store = {};\n  }\n  return {\n    setItem,\n    getItem,\n    removeItem,\n    reset\n  };\n}\nvar memoryStorage = createMemoryStorage();\n\n// src/utils/storage-keys.ts\nvar storageKeys = {\n  codeVerifier: \"workos:code-verifier\",\n  user: \"workos:user\",\n  accessToken: \"workos:access-token\",\n  refreshToken: \"workos:refresh-token\",\n  expiresAt: \"workos:expires-at\"\n};\n\n// src/utils/session-data.ts\nfunction getClaims(accessToken) {\n  return JSON.parse(atob(accessToken.split(\".\")[1]));\n}\nfunction setSessionData(data, { devMode = false } = {}) {\n  const { user, accessToken, refreshToken } = data;\n  memoryStorage.setItem(storageKeys.user, user);\n  memoryStorage.setItem(storageKeys.accessToken, accessToken);\n  (devMode ? window.localStorage : memoryStorage).setItem(\n    storageKeys.refreshToken,\n    refreshToken\n  );\n  const { exp, iat } = getClaims(accessToken);\n  const expiresIn = exp - iat;\n  const expiresAt = Date.now() + expiresIn * 1e3;\n  memoryStorage.setItem(storageKeys.expiresAt, expiresAt);\n}\nfunction removeSessionData({ devMode = false } = {}) {\n  memoryStorage.removeItem(storageKeys.user);\n  memoryStorage.removeItem(storageKeys.accessToken);\n  (devMode ? window.localStorage : memoryStorage).removeItem(\n    storageKeys.refreshToken\n  );\n}\nfunction getRefreshToken({ devMode = false } = {}) {\n  return (devMode ? window.localStorage : memoryStorage).getItem(\n    storageKeys.refreshToken\n  );\n}\n\n// src/utils/get-logout-url.ts\nfunction getLogoutUrl(baseUrl) {\n  const accessToken = memoryStorage.getItem(storageKeys.accessToken);\n  if (typeof accessToken !== \"string\") return null;\n  const { sid: sessionId } = getClaims(accessToken);\n  return `${baseUrl}/user_management/sessions/logout?session_id=${sessionId}`;\n}\n\n// src/utils/is-redirect-callback.ts\nfunction isRedirectCallback(redirectUri, searchParams) {\n  const hasCode = searchParams.has(\"code\");\n  if (!hasCode) return false;\n  const { protocol, host, pathname } = window.location;\n  const currentUri = `${protocol}//${host}${pathname}`;\n  return currentUri === redirectUri || currentUri === `${redirectUri}/`;\n}\n\n// src/utils/pkce.ts\nasync function createPkceChallenge() {\n  const codeVerifier = createCodeVerifier();\n  const codeChallenge = await createCodeChallenge(codeVerifier);\n  return { codeVerifier, codeChallenge };\n}\nfunction createCodeVerifier() {\n  const randomBytes = crypto.getRandomValues(new Uint32Array(96));\n  return base64urlEncode(randomBytes);\n}\nasync function createCodeChallenge(codeVerifier) {\n  const hashed = await sha256(codeVerifier);\n  return base64urlEncode(hashed);\n}\nfunction base64urlEncode(buffer) {\n  return btoa(\n    Array.from(new Uint8Array(buffer), (b) => String.fromCharCode(b)).join(\"\")\n  ).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\n}\nfunction sha256(plain) {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(plain);\n  return window.crypto.subtle.digest(\"SHA-256\", data);\n}\n\n// src/vendor/browser-tabs-lock/processLock.ts\nvar ProcessLocking = class _ProcessLocking {\n  constructor() {\n    this.locked = /* @__PURE__ */ new Map();\n    this.addToLocked = (key, toAdd) => {\n      let callbacks = this.locked.get(key);\n      if (callbacks === void 0) {\n        if (toAdd === void 0) {\n          this.locked.set(key, []);\n        } else {\n          this.locked.set(key, [toAdd]);\n        }\n      } else {\n        if (toAdd !== void 0) {\n          callbacks.unshift(toAdd);\n          this.locked.set(key, callbacks);\n        }\n      }\n    };\n    this.isLocked = (key) => {\n      return this.locked.has(key);\n    };\n    this.lock = (key) => {\n      return new Promise((resolve, reject) => {\n        if (this.isLocked(key)) {\n          this.addToLocked(key, resolve);\n        } else {\n          this.addToLocked(key);\n          resolve();\n        }\n      });\n    };\n    this.unlock = (key) => {\n      let callbacks = this.locked.get(key);\n      if (callbacks === void 0 || callbacks.length === 0) {\n        this.locked.delete(key);\n        return;\n      }\n      let toCall = callbacks.pop();\n      this.locked.set(key, callbacks);\n      if (toCall !== void 0) {\n        setTimeout(toCall, 0);\n      }\n    };\n  }\n  static getInstance() {\n    if (_ProcessLocking.instance === void 0) {\n      _ProcessLocking.instance = new _ProcessLocking();\n    }\n    return _ProcessLocking.instance;\n  }\n};\nfunction getLock() {\n  return ProcessLocking.getInstance();\n}\n\n// src/vendor/browser-tabs-lock/index.ts\nvar LOCK_STORAGE_KEY = \"browser-tabs-lock-key\";\nvar DEFAULT_STORAGE_HANDLER = {\n  key: async (index) => {\n    throw new Error(\"Unsupported\");\n  },\n  getItem: async (key) => {\n    throw new Error(\"Unsupported\");\n  },\n  clear: async () => {\n    return window.localStorage.clear();\n  },\n  removeItem: async (key) => {\n    throw new Error(\"Unsupported\");\n  },\n  setItem: async (key, value) => {\n    throw new Error(\"Unsupported\");\n  },\n  keySync: (index) => {\n    return window.localStorage.key(index);\n  },\n  getItemSync: (key) => {\n    return window.localStorage.getItem(key);\n  },\n  clearSync: () => {\n    return window.localStorage.clear();\n  },\n  removeItemSync: (key) => {\n    return window.localStorage.removeItem(key);\n  },\n  setItemSync: (key, value) => {\n    return window.localStorage.setItem(key, value);\n  }\n};\nfunction delay(milliseconds) {\n  return new Promise((resolve) => setTimeout(resolve, milliseconds));\n}\nfunction generateRandomString(length) {\n  const CHARS = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz\";\n  let randomstring = \"\";\n  for (let i = 0; i < length; i++) {\n    const INDEX = Math.floor(Math.random() * CHARS.length);\n    randomstring += CHARS[INDEX];\n  }\n  return randomstring;\n}\nfunction getLockId() {\n  return Date.now().toString() + generateRandomString(15);\n}\nvar _SuperTokensLock = class _SuperTokensLock {\n  constructor(storageHandler) {\n    this.acquiredIatSet = /* @__PURE__ */ new Set();\n    this.storageHandler = void 0;\n    this.id = getLockId();\n    this.acquireLock = this.acquireLock.bind(this);\n    this.releaseLock = this.releaseLock.bind(this);\n    this.releaseLock__private__ = this.releaseLock__private__.bind(this);\n    this.waitForSomethingToChange = this.waitForSomethingToChange.bind(this);\n    this.refreshLockWhileAcquired = this.refreshLockWhileAcquired.bind(this);\n    this.storageHandler = storageHandler;\n    if (_SuperTokensLock.waiters === void 0) {\n      _SuperTokensLock.waiters = [];\n    }\n  }\n  /**\n   * @async\n   * @memberOf Lock\n   * @function acquireLock\n   * @param {string} lockKey - Key for which the lock is being acquired\n   * @param {number} [timeout=5000] - Maximum time for which the function will wait to acquire the lock\n   * @returns {Promise<boolean>}\n   * @description Will return true if lock is being acquired, else false.\n   *              Also the lock can be acquired for maximum 10 secs\n   */\n  async acquireLock(lockKey, timeout = 5e3) {\n    let iat = Date.now() + generateRandomString(4);\n    const MAX_TIME = Date.now() + timeout;\n    const STORAGE_KEY = `${LOCK_STORAGE_KEY}-${lockKey}`;\n    const STORAGE = this.storageHandler === void 0 ? DEFAULT_STORAGE_HANDLER : this.storageHandler;\n    while (Date.now() < MAX_TIME) {\n      await delay(30);\n      let lockObj = STORAGE.getItemSync(STORAGE_KEY);\n      if (lockObj === null) {\n        const TIMEOUT_KEY = `${this.id}-${lockKey}-${iat}`;\n        await delay(Math.floor(Math.random() * 25));\n        STORAGE.setItemSync(STORAGE_KEY, JSON.stringify({\n          id: this.id,\n          iat,\n          timeoutKey: TIMEOUT_KEY,\n          timeAcquired: Date.now(),\n          timeRefreshed: Date.now()\n        }));\n        await delay(30);\n        let lockObjPostDelay = STORAGE.getItemSync(STORAGE_KEY);\n        if (lockObjPostDelay !== null) {\n          let parsedLockObjPostDelay = JSON.parse(lockObjPostDelay);\n          if (parsedLockObjPostDelay.id === this.id && parsedLockObjPostDelay.iat === iat) {\n            this.acquiredIatSet.add(iat);\n            this.refreshLockWhileAcquired(STORAGE_KEY, iat);\n            return true;\n          }\n        }\n      } else {\n        _SuperTokensLock.lockCorrector(this.storageHandler === void 0 ? DEFAULT_STORAGE_HANDLER : this.storageHandler);\n        await this.waitForSomethingToChange(MAX_TIME);\n      }\n      iat = Date.now() + generateRandomString(4);\n    }\n    return false;\n  }\n  async refreshLockWhileAcquired(storageKey, iat) {\n    setTimeout(async () => {\n      await getLock().lock(iat);\n      if (!this.acquiredIatSet.has(iat)) {\n        getLock().unlock(iat);\n        return;\n      }\n      const STORAGE = this.storageHandler === void 0 ? DEFAULT_STORAGE_HANDLER : this.storageHandler;\n      let lockObj = STORAGE.getItemSync(storageKey);\n      if (lockObj !== null) {\n        let parsedLockObj = JSON.parse(lockObj);\n        parsedLockObj.timeRefreshed = Date.now();\n        STORAGE.setItemSync(storageKey, JSON.stringify(parsedLockObj));\n        getLock().unlock(iat);\n      } else {\n        getLock().unlock(iat);\n        return;\n      }\n      this.refreshLockWhileAcquired(storageKey, iat);\n    }, 1e3);\n  }\n  async waitForSomethingToChange(MAX_TIME) {\n    await new Promise((resolve) => {\n      let resolvedCalled = false;\n      let startedAt = Date.now();\n      const MIN_TIME_TO_WAIT = 50;\n      let removedListeners = false;\n      function stopWaiting() {\n        if (!removedListeners) {\n          window.removeEventListener(\"storage\", stopWaiting);\n          _SuperTokensLock.removeFromWaiting(stopWaiting);\n          clearTimeout(timeOutId);\n          removedListeners = true;\n        }\n        if (!resolvedCalled) {\n          resolvedCalled = true;\n          let timeToWait = MIN_TIME_TO_WAIT - (Date.now() - startedAt);\n          if (timeToWait > 0) {\n            setTimeout(resolve, timeToWait);\n          } else {\n            resolve(null);\n          }\n        }\n      }\n      window.addEventListener(\"storage\", stopWaiting);\n      _SuperTokensLock.addToWaiting(stopWaiting);\n      let timeOutId = setTimeout(stopWaiting, Math.max(0, MAX_TIME - Date.now()));\n    });\n  }\n  static addToWaiting(func) {\n    this.removeFromWaiting(func);\n    if (_SuperTokensLock.waiters === void 0) {\n      return;\n    }\n    _SuperTokensLock.waiters.push(func);\n  }\n  static removeFromWaiting(func) {\n    if (_SuperTokensLock.waiters === void 0) {\n      return;\n    }\n    _SuperTokensLock.waiters = _SuperTokensLock.waiters.filter((i) => i !== func);\n  }\n  static notifyWaiters() {\n    if (_SuperTokensLock.waiters === void 0) {\n      return;\n    }\n    let waiters = [..._SuperTokensLock.waiters];\n    waiters.forEach((i) => i());\n  }\n  /**\n   * @function releaseLock\n   * @memberOf Lock\n   * @param {string} lockKey - Key for which lock is being released\n   * @returns {void}\n   * @description Release a lock.\n   */\n  async releaseLock(lockKey) {\n    return await this.releaseLock__private__(lockKey);\n  }\n  /**\n   * @function releaseLock\n   * @memberOf Lock\n   * @param {string} lockKey - Key for which lock is being released\n   * @returns {void}\n   * @description Release a lock.\n   */\n  async releaseLock__private__(lockKey) {\n    const STORAGE = this.storageHandler === void 0 ? DEFAULT_STORAGE_HANDLER : this.storageHandler;\n    const STORAGE_KEY = `${LOCK_STORAGE_KEY}-${lockKey}`;\n    let lockObj = STORAGE.getItemSync(STORAGE_KEY);\n    if (lockObj === null) {\n      return;\n    }\n    let parsedlockObj = JSON.parse(lockObj);\n    if (parsedlockObj.id === this.id) {\n      await getLock().lock(parsedlockObj.iat);\n      this.acquiredIatSet.delete(parsedlockObj.iat);\n      STORAGE.removeItemSync(STORAGE_KEY);\n      getLock().unlock(parsedlockObj.iat);\n      _SuperTokensLock.notifyWaiters();\n    }\n  }\n  /**\n   * @function lockCorrector\n   * @returns {void}\n   * @description If a lock is acquired by a tab and the tab is closed before the lock is\n   *              released, this function will release those locks\n   */\n  static lockCorrector(storageHandler) {\n    const MIN_ALLOWED_TIME = Date.now() - 5e3;\n    const STORAGE = storageHandler;\n    const KEYS = [];\n    let currIndex = 0;\n    while (true) {\n      let key = STORAGE.keySync(currIndex);\n      if (key === null) {\n        break;\n      }\n      KEYS.push(key);\n      currIndex++;\n    }\n    let notifyWaiters = false;\n    for (let i = 0; i < KEYS.length; i++) {\n      const LOCK_KEY = KEYS[i];\n      if (LOCK_KEY.includes(LOCK_STORAGE_KEY)) {\n        let lockObj = STORAGE.getItemSync(LOCK_KEY);\n        if (lockObj !== null) {\n          let parsedlockObj = JSON.parse(lockObj);\n          if (parsedlockObj.timeRefreshed === void 0 && parsedlockObj.timeAcquired < MIN_ALLOWED_TIME || parsedlockObj.timeRefreshed !== void 0 && parsedlockObj.timeRefreshed < MIN_ALLOWED_TIME) {\n            STORAGE.removeItemSync(LOCK_KEY);\n            notifyWaiters = true;\n          }\n        }\n      }\n    }\n    if (notifyWaiters) {\n      _SuperTokensLock.notifyWaiters();\n    }\n  }\n};\n_SuperTokensLock.waiters = void 0;\nvar SuperTokensLock = _SuperTokensLock;\n\n// src/create-client.ts\nvar DEFAULT_HOSTNAME = \"api.workos.com\";\nvar ORGANIZATION_ID_SESSION_STORAGE_KEY = \"workos_organization_id\";\nasync function createClient(clientId, options = {}) {\n  if (!clientId) {\n    throw new NoClientIdProvidedException();\n  }\n  const {\n    apiHostname = DEFAULT_HOSTNAME,\n    https = true,\n    port,\n    redirectUri = window.origin,\n    devMode = location.hostname === \"localhost\" || location.hostname === \"127.0.0.1\",\n    // refresh if this is true\n    onBeforeAutoRefresh = () => {\n      return !document.hidden;\n    },\n    onRedirectCallback = (_) => {\n    },\n    onRefresh: _onRefresh,\n    onRefreshFailure: _onRefreshFailure\n  } = options;\n  const _clientId = clientId;\n  const _redirectUri = redirectUri;\n  const _baseUrl = `${https ? \"https\" : \"http\"}://${apiHostname}${port ? `:${port}` : \"\"}`;\n  const _useCookie = !devMode;\n  let _authkitClientState = \"INITIAL\";\n  const _shouldRefresh = () => {\n    switch (_authkitClientState) {\n      case \"INITIAL\":\n      case \"AUTHENTICATING\":\n        return true;\n      case \"ERROR\":\n        return false;\n      case \"AUTHENTICATED\":\n        const accessToken = memoryStorage.getItem(storageKeys.accessToken);\n        const expiresAt = memoryStorage.getItem(storageKeys.expiresAt);\n        if (!accessToken || !expiresAt) {\n          return true;\n        }\n        const LEEWAY = 10 * 1e3;\n        const refreshTime = expiresAt - LEEWAY;\n        return refreshTime < Date.now();\n    }\n  };\n  async function signIn(opts = {}) {\n    return _redirect({ ...opts, type: \"sign-in\" });\n  }\n  async function signUp(opts = {}) {\n    return _redirect({ ...opts, type: \"sign-up\" });\n  }\n  async function _redirect({\n    type,\n    state,\n    context,\n    invitationToken,\n    passwordResetToken\n  }) {\n    const { codeVerifier, codeChallenge } = await createPkceChallenge();\n    window.sessionStorage.setItem(storageKeys.codeVerifier, codeVerifier);\n    const url = getAuthorizationUrl(_baseUrl, {\n      clientId: _clientId,\n      redirectUri: _redirectUri,\n      screenHint: type,\n      context,\n      codeChallenge,\n      codeChallengeMethod: \"S256\",\n      invitationToken,\n      passwordResetToken,\n      state: state ? JSON.stringify(state) : void 0\n    });\n    window.location.assign(url);\n  }\n  function getUser() {\n    const user = memoryStorage.getItem(storageKeys.user);\n    return user ? user : null;\n  }\n  function _getAccessToken() {\n    return memoryStorage.getItem(storageKeys.accessToken);\n  }\n  async function getAccessToken() {\n    if (_shouldRefresh()) {\n      try {\n        await refreshSession();\n      } catch (err) {\n        if (err instanceof RefreshError) {\n          throw new LoginRequiredError();\n        } else {\n          throw err;\n        }\n      }\n    }\n    const accessToken = _getAccessToken();\n    if (!accessToken) {\n      throw new LoginRequiredError();\n    }\n    return accessToken;\n  }\n  let _refreshTimer;\n  const _scheduleAutomaticRefresh = () => {\n    _refreshTimer = setTimeout(() => {\n      if (_shouldRefresh() && onBeforeAutoRefresh()) {\n        refreshSession().catch((e) => {\n          console.error(e);\n        }).then(_scheduleAutomaticRefresh);\n      } else {\n        _scheduleAutomaticRefresh();\n      }\n    }, 1e3);\n  };\n  async function _initialize() {\n    if (_authkitClientState !== \"INITIAL\") {\n      return;\n    }\n    const searchParams = new URLSearchParams(window.location.search);\n    if (isRedirectCallback(redirectUri, searchParams)) {\n      await _handleCallback();\n    } else {\n      try {\n        await refreshSession();\n        _scheduleAutomaticRefresh();\n      } catch {\n      }\n    }\n  }\n  async function _handleCallback() {\n    if (_authkitClientState !== \"INITIAL\") {\n      return;\n    }\n    const url = new URL(window.location.href);\n    const code = url.searchParams.get(\"code\");\n    const stateParam = url.searchParams.get(\"state\");\n    const state = stateParam ? JSON.parse(stateParam) : void 0;\n    _authkitClientState = \"AUTHENTICATING\";\n    const codeVerifier = window.sessionStorage.getItem(\n      storageKeys.codeVerifier\n    );\n    if (code) {\n      if (codeVerifier) {\n        try {\n          const authenticationResponse = await authenticateWithCode({\n            baseUrl: _baseUrl,\n            clientId: _clientId,\n            code,\n            codeVerifier,\n            useCookie: _useCookie\n          });\n          if (authenticationResponse) {\n            _authkitClientState = \"AUTHENTICATED\";\n            _scheduleAutomaticRefresh();\n            setSessionData(authenticationResponse, { devMode });\n            _onRefresh && _onRefresh(authenticationResponse);\n            onRedirectCallback({ state, ...authenticationResponse });\n          }\n        } catch (error) {\n          _authkitClientState = \"ERROR\";\n          console.error(error);\n        }\n      } else {\n        _authkitClientState = \"ERROR\";\n        console.error(`Couldn't exchange code.\n\nAn authorization_code was supplied for a login which did not originate at the application. This could happen for various reasons:\n\n* This could have been an attempted Login CSRF attack. You were not affected.\n* The developer may not have configured a Login Initiation endpoint.\n* Was this an Impersonation attempt? Impersonation support is coming soon.`);\n      }\n    }\n    const cleanUrl = new URL(window.location.toString());\n    cleanUrl.search = \"\";\n    window.sessionStorage.removeItem(storageKeys.codeVerifier);\n    window.history.replaceState({}, \"\", cleanUrl);\n  }\n  const REFRESH_LOCK = \"WORKOS_REFRESH_SESSION\";\n  async function refreshSession({\n    organizationId\n  } = {}) {\n    const beginningState = _authkitClientState;\n    const lock = new SuperTokensLock();\n    try {\n      _authkitClientState = \"AUTHENTICATING\";\n      if (await lock.acquireLock(REFRESH_LOCK)) {\n        if (organizationId) {\n          sessionStorage.setItem(\n            ORGANIZATION_ID_SESSION_STORAGE_KEY,\n            organizationId\n          );\n        } else {\n          const accessToken = _getAccessToken();\n          if (accessToken) {\n            organizationId = getClaims(accessToken)?.org_id;\n          } else {\n            organizationId = sessionStorage.getItem(ORGANIZATION_ID_SESSION_STORAGE_KEY) ?? void 0;\n          }\n        }\n        const authenticationResponse = await authenticateWithRefreshToken({\n          baseUrl: _baseUrl,\n          clientId: _clientId,\n          refreshToken: getRefreshToken({ devMode }),\n          organizationId,\n          useCookie: _useCookie\n        });\n        _authkitClientState = \"AUTHENTICATED\";\n        setSessionData(authenticationResponse, { devMode });\n        _onRefresh && _onRefresh(authenticationResponse);\n      } else {\n        console.warn(\"Couldn't acquire refresh lock\");\n        _authkitClientState = beginningState;\n      }\n    } catch (error) {\n      console.error(error);\n      if (error instanceof RefreshError) {\n        removeSessionData({ devMode });\n        beginningState !== \"INITIAL\" && _onRefreshFailure && _onRefreshFailure({ signIn });\n      }\n      _authkitClientState = \"ERROR\";\n      throw error;\n    } finally {\n      await lock.releaseLock(REFRESH_LOCK);\n    }\n  }\n  function signOut() {\n    const url = getLogoutUrl(_baseUrl);\n    if (url) {\n      removeSessionData({ devMode });\n      window.location.assign(url);\n    }\n  }\n  await _initialize();\n  return {\n    signIn,\n    signUp,\n    getUser,\n    getAccessToken,\n    signOut\n  };\n}\nexport {\n  AuthKitError,\n  LoginRequiredError,\n  createClient,\n  getClaims\n};\n//# sourceMappingURL=index.mjs.map","import { extend, isEmpty } from 'underscore';\n\nimport { createClient } from '@workos-inc/authkit-js';\n\nimport { workosConfig as config, appConfig } from 'js/config';\n\nimport { LoginPromptView } from 'js/views/globals/prelogin/prelogin_views';\n\nimport { PATH_ROOT, PATH_RWELL, PATH_AUTHD, PATH_LOGIN, PATH_LOGOUT } from './config';\n\nlet authkit;\nlet token;\n\nfunction should() {\n  return !isEmpty(config);\n}\n\nfunction setToken(tokenString) {\n  token = tokenString;\n}\n\nfunction getToken() {\n  if (token) return token;\n  if (!authkit || !navigator.onLine) return;\n\n  return authkit\n    .getAccessToken()\n    .catch(() => {\n      logout();\n    });\n}\n\n/*\n * Modifies the current history state\n */\nfunction replaceState(state) {\n  window.history.replaceState({}, document.title, state);\n}\n\nfunction logout() {\n  window.location = PATH_LOGOUT;\n}\n\nfunction login(state = PATH_ROOT) {\n  // iframe buster\n  if (top !== self) {\n    top.location = PATH_LOGIN;\n    return;\n  }\n\n  if (appConfig.disableLoginPrompt) {\n    authkit.signIn({ state });\n    return;\n  }\n\n  replaceState(PATH_LOGIN);\n\n  const loginPromptView = new LoginPromptView();\n\n  loginPromptView.on('click:login', ()=> {\n    authkit.signIn({ state });\n  });\n\n  loginPromptView.render();\n}\n\n// If considered RW and rwClientId is set\nfunction getClientId(pathName) {\n  const { clientId, rwClientId } = config;\n\n  // RWell specific login\n  if (rwClientId && (pathName === PATH_RWELL || localStorage.getItem(PATH_RWELL))) {\n    return rwClientId;\n  }\n\n  return clientId;\n}\n\nasync function createAuthkit(success, pathName) {\n  const createClientOptions = {\n    redirectUri: location.origin + PATH_AUTHD,\n    onRedirectCallback: ({ user, state }) => {\n      if (!user) {\n        login(state);\n        return;\n      }\n\n      if (state === PATH_LOGIN) state = PATH_ROOT;\n\n      if (state === PATH_RWELL) {\n        state = PATH_ROOT;\n        localStorage.setItem(PATH_RWELL, 1);\n      }\n\n      replaceState(state);\n\n      success();\n    },\n  };\n\n  return createClient(getClientId(pathName), extend(createClientOptions, config.createClientOptions));\n}\n\n/*\n * Requests authorization\n * And authenticates authorization if redirected to PATH_AUTHD\n */\n\nasync function auth(success) {\n  // NOTE: Set path before await create to avoid redirect replaceState changing the value\n  const pathName = location.pathname;\n\n  authkit = await createAuthkit(success, pathName);\n\n  if (pathName === PATH_AUTHD) return;\n\n  if (pathName === PATH_LOGOUT) {\n    token = null;\n    authkit.signOut();\n    return;\n  }\n\n  if (!await authkit.getUser()) {\n    login(pathName);\n    return;\n  }\n\n  success();\n}\n\nexport {\n  auth,\n  logout,\n  setToken,\n  getToken,\n  should,\n};\n","import Radio from 'backbone.radio';\n\nimport * as auth0 from './auth/auth0';\nimport * as none from './auth/none';\nimport * as kinde from './auth/kinde';\nimport * as workos from './auth/workos';\n\nimport 'scss/app-root.scss';\n\nlet authAgent;\n\nfunction getAuthAgent() {\n  if (none.should()) return none;\n\n  if (authAgent) return authAgent;\n\n  // These should be ordered by priority lowest to highest\n  if (auth0.should()) authAgent = auth0;\n  if (kinde.should()) authAgent = kinde;\n  if (workos.should()) authAgent = workos;\n\n  return authAgent;\n}\n\nfunction setToken(tokenString) {\n  getAuthAgent().setToken(tokenString);\n}\n\nfunction getToken() {\n  return getAuthAgent().getToken();\n}\n\nfunction logout() {\n  getAuthAgent().logout();\n}\n\nRadio.reply('auth', {\n  logout,\n  setToken,\n  getToken,\n});\n\nasync function auth(success) {\n  getAuthAgent().auth(success);\n}\n\nexport {\n  auth,\n};\n"],"names":["e","t","i","o","n","a","r","c","s","d","u","l","h","p","m","f","g","w","y","k","v","b","_","I","S","O","T","j","C","z","P","x","Z","K","W","E","R","U","L","D","X","N","J","F","H","Y","G","V","M","A","B","$","q","Q","ee","te","oe","PATH_ROOT","PATH_RWELL","PATH_AUTHD","PATH_LOGIN","PATH_LOGOUT","RWELL_CONNECTION","auth0","token","should","isEmpty","config","setAuth0","auth0Client","setToken","tokenString","getToken","logout","replaceState","state","authenticate","success","appState","login","getConfig","extend","loginWithRedirect","opts","appConfig","loginPromptView","LoginPromptView","auth","createAuth0Client","isAuthenticated","federated","Radio","version","SESSION_PREFIX","flagDataTypeMap","storageMap","InvalidTokenError","b64DecodeUnicode","str","code","base64UrlDecode","output","jwtDecode","options","pos","part","decoded","hasCookie","name","row","base64UrlEncode","numberArray","sha256","plain","data","pkceChallengeFromVerifier","hashed","randomString","array","dec","LEEWAY","isJWTActive","jwtToken","unixTime","setupChallenge","authorizationEndpoint","code_verifier","code_challenge","url","createStore","items","key","value","store","getClaim","claim","tokenKey","getClaimValue","obj","getFlag","defaultValue","flagType","flags","flag","getBooleanFlag","err","getIntegerFlag","getStringFlag","getUserOrganizations","PAYLOAD_CLAIMS","isTokenValid","element","isCustomDomain","createKindeClient","audience","clientId","domain","is_dangerously_use_local_storage","redirect_uri","logout_uri","on_redirect_callback","on_error_callback","scope","proxy_redirect_uri","_framework","_frameworkVersion","client_id","isDevelopment","isUseCookie","isUseLocalStorage","setStore","idToken","idTokenHeader","accessToken","accessTokenHeader","validatorOptions","useRefreshToken","tokenType","localStorageRefreshToken","getTokenType","tokenToReturn","getIdToken","getPermissions","orgCode","getPermission","getOrganization","clearUrlParams","handleRedirectToApp","error","stringState","errorDescription","codeVerifier","user","getUser","redirectToKinde","app_state","prompt","is_create_org","org_name","org_code","authUrlParams","searchParams","urlSearchParams","aud","register","createOrg","getUserProfile","headers","json","init","isKindeRedirect","hasOauthCode","hasError","protocol","host","pathname","currentRedirectUri","kinde","registerKinde","path","connection","createKinde","kindeCreateParams","pathName","NoClientIdProvidedException","deserializeUser","deserializeAuthenticationResponse","authenticationResponse","organization_id","access_token","refresh_token","impersonator","rest","authenticateWithCode","baseUrl","useCookie","response","AuthKitError","RefreshError","LoginRequiredError","authenticateWithRefreshToken","refreshToken","organizationId","toQueryString","keys","getAuthorizationUrl","connectionId","context","domainHint","loginHint","provider","redirectUri","screenHint","passwordResetToken","invitationToken","codeChallenge","codeChallengeMethod","query","createMemoryStorage","_store","setItem","getItem","removeItem","reset","memoryStorage","storageKeys","getClaims","setSessionData","devMode","exp","iat","expiresIn","expiresAt","removeSessionData","getRefreshToken","getLogoutUrl","sessionId","isRedirectCallback","currentUri","createPkceChallenge","createCodeVerifier","createCodeChallenge","randomBytes","base64urlEncode","buffer","ProcessLocking","_ProcessLocking","toAdd","callbacks","resolve","reject","toCall","getLock","LOCK_STORAGE_KEY","DEFAULT_STORAGE_HANDLER","index","delay","milliseconds","generateRandomString","length","CHARS","randomstring","INDEX","getLockId","_SuperTokensLock","storageHandler","lockKey","timeout","MAX_TIME","STORAGE_KEY","STORAGE","TIMEOUT_KEY","lockObjPostDelay","parsedLockObjPostDelay","storageKey","lockObj","parsedLockObj","resolvedCalled","startedAt","MIN_TIME_TO_WAIT","removedListeners","stopWaiting","timeOutId","timeToWait","func","parsedlockObj","MIN_ALLOWED_TIME","KEYS","currIndex","notifyWaiters","LOCK_KEY","SuperTokensLock","DEFAULT_HOSTNAME","ORGANIZATION_ID_SESSION_STORAGE_KEY","createClient","apiHostname","https","port","onBeforeAutoRefresh","onRedirectCallback","_onRefresh","_onRefreshFailure","_clientId","_redirectUri","_baseUrl","_useCookie","_authkitClientState","_shouldRefresh","signIn","_redirect","signUp","type","_getAccessToken","getAccessToken","refreshSession","_scheduleAutomaticRefresh","_initialize","_handleCallback","stateParam","cleanUrl","REFRESH_LOCK","beginningState","lock","signOut","authkit","getClientId","rwClientId","createAuthkit","createClientOptions","authAgent","getAuthAgent","none.should","none","auth0.should","kinde.should","workos.should","workos"],"mappings":"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","x_google_ignoreList":[0,4,6]}