{"version":3,"mappings":"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","names":["initPlatform","doc","LayoutView","View","Region","_Handlebars2","container","depth0","helpers","partials","data","lookupProperty","parent","propertyName","stack1","times","index","dayjs","ActionsView","helper","alias1","alias2","alias3","alias4","alias5","MonthPickerView","CellView","CalendarView","CollectionView","StateModel$1","Backbone","currentMonth","selectedDate","selectedMonth","date","dates","flatten","startDay","daysInPrev","map","range","day","endDay","todaysDate","isDisabled","dateNum","beginDate","endDate","CLASS_OPTIONS","Datepicker","Component","StateModel","state","options","datepicker","view","model","monthPickerView","actionsView","calView","extend","result","hasAllText","text","query","every","words","queryWord","matcher","buildMatcher","InputFocusBehavior","Behavior","element","ENTER_KEY","keyCodes","InputWatcherBehavior","evt","throttle","watchText","KeyListenerBehavior","Radio","event","domEvent","keyCode","some","isArray","bind","ESCAPE_KEY","DOWN_KEY","TAB_KEY","UP_KEY","PicklistBehavior","evts","$items","$highlighted","nextIndex","$scrollItem","offsetDir","$scrollEl","picklistScrollTop","picklistHeight","childViewHeight","childViewTop","childViewBottom","offset","CLASS_OPTIONS_ITEM","attr","canClear","isSelectList","PicklistEmpty","PicklistItem","classNames","item","noop","isCheckable","isSelected","Picklist","opts","pick","Picklists","debounce","each","list","picklist","childView","size","Picklist$1","intl","picklistOptions","popWidth","viewOptions","ViewClass","Droplist","isActive","selected","region","align","TooltipView","Tooltip","delay","_delay","anime","orientation","ignoreEl","AlertTemplate","HandlebarsRuntime","OPTIONS","icons","AlertView","AlertsView","ALERT_TIMEOUT","AlertService","App","alertView","alertsView","omit","responseJson","errors","error","SettingsService","settings","settingName","workspaceSettings","workspaceSetting","get","setting","WidgetsService","widgets","slug","widgetSlugs","deIDdWidgets","invoke","compact","assign","make_assign","create","make_create","trim","make_trim","Global","global","util","slice","pluck","isList","isFunction","isObject","obj","props1","props2","etc","val","key","assignProps1","assignProps2","assignArgsList","F","str","fn","arr","res","v","k","i","require$$0","storeEngine","createStore","storeAPI","optionalDefaultValue","value","callback","self","namespacedKey","namespace","plugin","_warn","_console","storages","plugins","namespacePrefix","namespaceRegexp","legalNamespaces","_privateStoreProps","storage","testStr","ok","pluginFnProp","propName","oldFn","args","super_fn","arg","newFnArgs","strVal","defaultVal","seenPlugin","pluginProperties","store","prop","localStorage_1","read","write","remove","clearAll","localStorage","sessionStorage_1","sessionStorage","cookieStorage","_has","regexpStr","cookies","kvp","_","memoryStorage_1","memoryStorage","engine","require$$1","require$$2","require$$3","require$$4","store_modern","WorkspaceService","workspaces","route","workspace","programs","sharedWorkspaces","program","directories","clinicianRequests","promise","resolvePromise","rejectPromise","activeRolesCache","getActiveRoles","roles","canAdmin","activeRoles","reject","role","includes","BootstrapService","name","currentUser","teams","getWorkspaceRoute","HistoryService","navigate","navigated","fragment","replace","handleEmptyHistory","LastestListService","eventArgs","getClinicians","teamId","FormsService","feVersion","versions","isLocked","isSubmitRestricted","actionId","ids","draft","localDraft","submission","updated","fieldName","requestId","field","responseData","clinicians","directoryName","directory","by","icd","definition","flowId","patientId","form","FORM_RESPONSE_STATUS","prefillActionTag","isReadOnly","filter","response","storedSubmission","firstResponse","responseId","formResponse","animSidebar","targets","ModalTemplate","i18n","ReplaceElRegion","ModalView","PreloadRegion","disable","SidebarModalView","SmallModalView","IframeFormView","IframeFormBehavior","LoadingModalView","LoadingModalTemplate","ModalService","modalRegion","modalSmallRegion","modalSidebarRegion","modalLoadingRegion","ConfirmModal","SidebarModal","patient","formName","formService","modal","WSService","url","token","channel","Resource","Store","resources","values","id","type","ErrorTemplate","ErrorView","legacyRoots","ErrorApp","RouterApp","rootRoute","getRootRoute","contains","status","px","num","userActivityCh","topRegionCh","TopRegionBehavior","target","iframeEl","el","historyCh","preventRegionClose","AppView","shouldShow","TopRegionView","PreloaderRegionView","PreloaderView","ModalRegionView","hotkeyCh","width","height","bodyHeight","left","top","testView","popDefaults","PopRegionView","$body","popOptions","partial","windowPadding","outerWidth","bodyWidth","direction","outerHeight","TooltipRegionView","className","leftPer","topPer","RootView","viewIndex","$document","$","Application","appConfig","popRegion","Optionlist","n","addError","AppFrameApp","appFrameApp","startApp"],"ignoreList":[18,19,20,21,22,23,24],"sources":["../src/js/utils/platform.js","../src/js/components/datepicker/datepicker_views.js","../src/js/components/datepicker/datepicker_state.js","../src/js/components/datepicker/index.js","../src/js/utils/formatting/has-all-text.js","../src/js/behaviors/input-focus.js","../src/js/behaviors/input-watcher.js","../src/js/behaviors/key-listener.js","../src/js/behaviors/picklist-transport.js","../src/js/components/picklist/index.js","../src/js/components/droplist/index.js","../src/js/components/optionlist/index.js","../src/js/components/tooltip/index.js","../src/js/views/globals/alert-box/alert-box.hbs","../src/js/views/globals/alert-box/alert-box_views.js","../src/js/services/alert.js","../src/js/services/settings.js","../src/js/services/widgets.js","../node_modules/store/src/util.js","../node_modules/store/src/store-engine.js","../node_modules/store/storages/localStorage.js","../node_modules/store/storages/sessionStorage.js","../node_modules/store/storages/cookieStorage.js","../node_modules/store/storages/memoryStorage.js","../node_modules/store/dist/store.modern.js","../src/js/services/workspace.js","../src/js/services/bootstrap.js","../src/js/services/history.js","../src/js/services/latest-list.js","../src/js/services/forms.js","../src/js/anim/index.js","../src/js/views/globals/modal/modal.hbs","../src/js/views/globals/modal/loading/loading_modal.hbs","../src/js/views/globals/modal/modal_views.js","../src/js/services/modal.js","../src/js/services/ws.js","../src/js/views/globals/error/error.hbs","../src/js/views/globals/error/error_views.js","../src/js/apps/globals/error_app.js","../src/js/utils/formatting/px.js","../src/js/behaviors/top-region.js","../src/js/views/globals/root_views.js","../src/js/app.js"],"sourcesContent":["export default function initPlatform() {\n  const doc = document.documentElement;\n  doc.setAttribute('data-useragent', navigator.userAgent);\n  doc.setAttribute('data-platform', navigator.platform);\n}\n","import { times } from 'underscore';\nimport dayjs from 'dayjs';\nimport hbs from 'handlebars-inline-precompile';\nimport { View, CollectionView, Region } from 'marionette';\n\nimport './datepicker.scss';\n\nconst LayoutView = View.extend({\n  className: 'datepicker',\n  regionClass: Region.extend({ replaceElement: true }),\n  regions: {\n    calendar: '[data-calendar-region]',\n    monthPicker: '[data-month-picker-region]',\n    actions: '[data-actions-region]',\n  },\n  template: hbs`\n    <div data-month-picker-region></div>\n    <div class=\"datepicker__body\">\n      {{#each dayOfWeek}}<div class=\"datepicker__day\">{{formatDateTime this \"dd\"}}</div>{{/each}}\n      <div data-calendar-region></div>\n    </div>\n    <div data-actions-region></div>\n  `,\n  templateContext() {\n    const dayOfWeek = times(7, index => {\n      return dayjs().weekday(index);\n    });\n\n    return { dayOfWeek };\n  },\n});\n\nconst ActionsView = View.extend({\n  template: hbs`\n    <button class=\"datepicker__button js-today\">{{ @intl.components.datepicker.today }}</button>{{~ remove_whitespace ~}}\n    <button class=\"datepicker__button js-tomorrow\">{{ @intl.components.datepicker.tomorrow }}</button>{{~ remove_whitespace ~}}\n    <button class=\"datepicker__button js-clear\">{{ @intl.components.datepicker.clear }}</button>\n  `,\n  triggers: {\n    'click .js-today': 'click:today',\n    'click .js-tomorrow': 'click:tomorrow',\n    'click .js-clear': 'click:clear',\n  },\n});\n\nconst MonthPickerView = View.extend({\n  className: 'datepicker__header',\n  triggers: {\n    'click .js-next': 'click:nextMonth',\n    'click .js-prev': 'click:prevMonth',\n    'click .js-month': 'click:month',\n  },\n  template: hbs`\n    <div class=\"datepicker__nav flex\">\n      <button class=\"js-prev\">{{fas \"caret-left\"}} {{formatDateTime prevMonth \"MMM\"}}</button>\n      <span {{#if canSelectMonth}}class=\"datepicker__month js-month\"{{/if}}>{{formatDateTime currentMonth \"MMM YYYY\"}}</span>\n      <button class=\"js-next\">{{formatDateTime nextMonth \"MMM\"}} {{fas \"caret-right\"}}</button>\n    </div>\n  `,\n  templateContext() {\n    return {\n      nextMonth: this.model.getNextMonth(),\n      prevMonth: this.model.getPrevMonth(),\n      canSelectMonth: this.getOption('canSelectMonth'),\n    };\n  },\n});\n\nconst CellView = View.extend({\n  className() {\n    if (this.model.get('isOtherMonth')) {\n      return 'is-other-month';\n    }\n    if (this.model.get('isDisabled')) {\n      return 'is-disabled';\n    }\n  },\n  tagName: 'li',\n  getTemplate() {\n    if (this.model.get('isOtherMonth') || this.model.get('isDisabled')) {\n      return hbs`{{ date }}`;\n    }\n\n    return hbs`<a class=\"{{#if isSelected}}is-selected{{/if}}{{#if isToday}} is-today{{/if}}\">{{ date }}</a>`;\n  },\n  triggers: {\n    'click a': 'select',\n  },\n});\n\nconst CalendarView = CollectionView.extend({\n  className: 'datepicker__days',\n  tagName: 'ul',\n  childView: CellView,\n  childViewTriggers: {\n    'select': 'select:date',\n  },\n});\n\nexport {\n  ActionsView,\n  LayoutView,\n  MonthPickerView,\n  CalendarView,\n};\n","import { flatten, map, range } from 'underscore';\nimport Backbone from 'backbone';\nimport dayjs from 'dayjs';\n\nexport default Backbone.Model.extend({\n  initialize({ currentMonth, selectedDate, selectedMonth }) {\n    this.setCurrentMonth(currentMonth);\n    this.setSelectedDate(selectedDate);\n    this.setSelectedMonth(selectedMonth);\n  },\n  setCurrentMonth(date) {\n    // If date === null dayjs(date) will fail\n    const currentMonth = date ? dayjs(date) : dayjs();\n\n    this.set('currentMonth', currentMonth.startOf('month'));\n  },\n  setSelectedDate(date) {\n    if (!date) {\n      this.set({\n        selectedDate: null,\n      });\n      return;\n    }\n\n    date = dayjs(date);\n\n    this.set({\n      selectedDate: date.startOf('day'),\n      currentMonth: date.startOf('month'),\n      selectedMonth: null,\n    });\n  },\n  setSelectedMonth(date) {\n    if (!date) {\n      this.set({\n        selectedMonth: null,\n      });\n      return;\n    }\n\n    const selectedMonth = dayjs(date).startOf('month');\n\n    this.set({\n      selectedMonth,\n      currentMonth: selectedMonth,\n      selectedDate: null,\n    });\n  },\n  getCurrentMonth() {\n    return this.dayjs('currentMonth');\n  },\n  getNextMonth() {\n    return this.dayjs('currentMonth').add(1, 'months');\n  },\n  getPrevMonth() {\n    return this.dayjs('currentMonth').subtract(1, 'months');\n  },\n  getCalendar() {\n    const dates = flatten([\n      this._getPreDates(),\n      this._getDates(),\n      this._getPostDates(),\n    ]);\n\n    return new Backbone.Collection(dates);\n  },\n  _getPreDates() {\n    const startDay = this.getCurrentMonth().weekday();\n\n    // Bail if Sunday (0)\n    if (!startDay) return [];\n\n    const daysInPrev = this.getPrevMonth().daysInMonth();\n\n    return map(range(daysInPrev - (startDay - 1), daysInPrev + 1), day => ({\n      date: String(day),\n      isOtherMonth: true,\n    }));\n  },\n  _getPostDates() {\n    const endDay = this.getCurrentMonth().endOf('month').weekday();\n\n    // Bail if end\n    if (endDay === 6) return [];\n\n    return map(range(1, 7 - endDay), day => ({\n      date: String(day),\n      isOtherMonth: true,\n    }));\n  },\n  _getDates() {\n    const currentMonth = this.getCurrentMonth();\n    const todaysDate = currentMonth.isSame(dayjs(), 'month') && dayjs().date();\n\n    return map(range(1, currentMonth.daysInMonth() + 1), day => {\n      const isDisabled = this._isBeforeBeginDate(day) || this._isAfterEndDate(day);\n\n      return {\n        date: String(day),\n        isDisabled,\n        isSelected: !isDisabled && this._isSelectedDate(day),\n        isToday: todaysDate === day,\n      };\n    });\n  },\n  _isBeforeBeginDate(dateNum) {\n    const beginDate = this.dayjs('beginDate');\n\n    if (!beginDate) return false;\n\n    const date = this.getCurrentMonth().date(dateNum);\n\n    return date.isBefore(beginDate, 'day');\n  },\n  _isAfterEndDate(dateNum) {\n    const endDate = this.dayjs('endDate');\n\n    if (!endDate) return false;\n\n    const date = this.getCurrentMonth().date(dateNum);\n\n    return date.isAfter(endDate, 'day');\n  },\n  _isSelectedDate(dateNum) {\n    const selectedDate = this.dayjs('selectedDate');\n\n    if (!selectedDate || !this.getCurrentMonth().isSame(selectedDate, 'month')) return false;\n\n    return selectedDate.date() === dateNum;\n  },\n});\n","/*\n    Datepicker Component init API\n\n    uiView:                    // required - the view ui $('.selector') is in\n    ui: $('.selector')         // if not defined uiView will be used\n    position: {                // set by default to uiView.getBounds(ui)\n        top: 1,\n        left: 1,\n    }\n\n    state: {\n        beginDate dayjs(),    // No dates selectable before this date\n        endDate: dayjs(),     // No dates selectable after this date\n        currentMonth: dayjs(),\n        selectedDate: dayjs()\n    }\n*/\n\nimport { extend, result } from 'underscore';\n\nimport dayjs from 'dayjs';\n\nimport Component from 'js/base/component';\n\nimport { ActionsView, LayoutView, MonthPickerView, CalendarView } from './datepicker_views';\n\nimport StateModel from './datepicker_state.js';\n\nconst CLASS_OPTIONS = [\n  'position',\n  'uiView',\n  'ui',\n];\n\nexport default Component.extend({\n  StateModel,\n  stateEvents: {\n    'change': 'show',\n    'change:selectedDate': 'onChangeStateSelectedDate',\n    'change:selectedMonth': 'onChangeStateSelectedMonth',\n  },\n  onChangeStateSelectedDate(state, selectedDate) {\n    this.triggerMethod('change:selectedDate', selectedDate);\n  },\n  onChangeStateSelectedMonth(state, selectedMonth) {\n    this.triggerMethod('change:selectedMonth', selectedMonth);\n  },\n  constructor: function(options) {\n    this.mergeOptions(options, CLASS_OPTIONS);\n\n    this.listenTo(this.uiView, 'render destroy', this.destroy);\n\n    Component.apply(this, arguments);\n  },\n  ViewClass: LayoutView,\n  onSelectToday() {\n    const state = this.getState();\n    state.setSelectedDate(dayjs());\n  },\n  onSelectTomorrow() {\n    const state = this.getState();\n    state.setSelectedDate(dayjs().add(1, 'days'));\n  },\n  onSelectClear() {\n    const state = this.getState();\n    state.setSelectedDate(null);\n    state.setSelectedMonth(null);\n  },\n  onBeforeShow(datepicker, view) {\n    view.showChildView('monthPicker', this.getMonthPickerView());\n    view.showChildView('actions', this.getActionsView());\n    view.showChildView('calendar', this.getCalendarView());\n  },\n  getMonthPickerView() {\n    const model = this.getState();\n\n    const monthPickerView = new MonthPickerView({\n      model,\n      canSelectMonth: this.getOption('canSelectMonth'),\n    });\n\n    this.listenTo(monthPickerView, {\n      'click:nextMonth': this.onSelectNextMonth,\n      'click:prevMonth': this.onSelectPrevMonth,\n      'click:month': this.onSelectMonth,\n    });\n\n    return monthPickerView;\n  },\n  getActionsView() {\n    const actionsView = new ActionsView();\n\n    this.listenTo(actionsView, {\n      'click:today': this.onSelectToday,\n      'click:tomorrow': this.onSelectTomorrow,\n      'click:clear': this.onSelectClear,\n    });\n\n    return actionsView;\n  },\n  onSelectNextMonth() {\n    const state = this.getState();\n    state.setCurrentMonth(state.getNextMonth());\n  },\n  onSelectPrevMonth() {\n    const state = this.getState();\n    state.setCurrentMonth(state.getPrevMonth());\n  },\n  onSelectMonth() {\n    const state = this.getState();\n    state.setSelectedMonth(state.getCurrentMonth());\n  },\n  onSelectDate({ model }) {\n    const state = this.getState();\n    const date = model.get('date');\n    const currentMonth = this.getState().getCurrentMonth();\n\n    state.setSelectedDate(currentMonth.date(date));\n  },\n  getCalendarView() {\n    const model = this.getState();\n\n    const calView = new CalendarView({\n      model,\n      collection: model.getCalendar(),\n    });\n\n    this.listenTo(calView, {\n      'select:date': this.onSelectDate,\n    });\n\n    return calView;\n  },\n  position() {\n    return this.uiView.getBounds(this.ui);\n  },\n  regionOptions() {\n    return extend({ popWidth: 256 }, result(this, 'position'));\n  },\n});\n","import { every } from 'underscore';\n\nimport buildMatcher from 'js/utils/formatting/build-matcher';\nimport words from 'js/utils/formatting/words';\n\nexport default (text, query) => {\n  if (!text) return false;\n\n  return every(words(query), queryWord => {\n    const matcher = buildMatcher(queryWord);\n\n    return !!String(text).match(matcher);\n  });\n};\n","import { Behavior } from 'marionette';\n\nexport default Behavior.extend({\n  selector: 'input',\n\n  ui() {\n    return {\n      input: this.getOption('selector'),\n    };\n  },\n\n  onDomRefresh() {\n    const element = this.ui.input[0];\n    if (!element || !element.style) return;\n    element.style.transform = 'TranslateY(-10000px)';\n    element.focus();\n    setTimeout(function() {\n      /* istanbul ignore next: edge case destroy during timeout */\n      if (!element || !element.style) return;\n      element.style.transform = 'none';\n    }, 30);\n  },\n});\n","import { throttle } from 'underscore';\nimport { Behavior } from 'marionette';\n\nimport keyCodes from 'js/utils/formatting/key-codes';\n\nconst { ENTER_KEY } = keyCodes;\n\nexport default Behavior.extend({\n  events: {\n    'keydown @ui.input': 'watchKeyDown',\n    'keyup @ui.input': 'watchKeyUp',\n    'input @ui.input': 'watchInput',\n  },\n\n  ui: {\n    input: 'input',\n  },\n\n  onDomRefresh() {\n    this._currentText = this.getWatchText();\n  },\n\n  getWatchText() {\n    return this.ui.input.val();\n  },\n\n  watchKeyDown(evt) {\n    this.view.triggerMethod('watch:keydown', evt);\n    this._evt = evt;\n  },\n\n  watchInput() {\n    /* istanbul ignore next */\n    if (!this._evt) return;\n\n    /* istanbul ignore next */\n    if (this._evt.isDefaultPrevented()) return;\n\n    this.watchKeyUp(this._evt);\n  },\n\n  // Both inputInput and inputKeyUp occur for browsers that support both\n  // added throttle here to match contenteditable watchKeyUp implementation\n  // contenteditable doesn't have oninput for contenteditable for IE9+\n  watchKeyUp: throttle(function(evt) {\n    /* istanbul ignore next */\n    if (!this.view.isRendered()) return;\n\n    /* istanbul ignore next */\n    if (evt.which === ENTER_KEY) {\n      evt.preventDefault();\n      return;\n    }\n\n    this.view.triggerMethod('watch:keyup', evt);\n    this.triggerWatchChange();\n  }, 1),\n\n  triggerWatchChange() {\n    const watchText = this.getWatchText();\n\n    if (watchText === this._currentText) return;\n\n    this._currentText = watchText;\n\n    this.view.triggerMethod('watch:change', watchText);\n  },\n});\n","import { bind, isArray, some } from 'underscore';\nimport Radio from 'backbone.radio';\nimport { Behavior } from 'marionette';\n\nexport default Behavior.extend({\n  initialize() {\n    this.listenTo(Radio.channel('user-activity'), 'document:keydown', this.keydown);\n  },\n\n  keyEvents: {},\n\n  triggerEvent(event, domEvent, keyCode) {\n    if (domEvent.which === keyCode) {\n      this.view.triggerMethod(event, domEvent);\n\n      return true;\n    }\n  },\n\n  keydown(domEvent) {\n    some(this.getOption('keyEvents'), (keyCode, event) => {\n      if (!isArray(keyCode)) {\n        this.triggerEvent(event, domEvent, keyCode);\n        return;\n      }\n\n      return some(keyCode, bind(this.triggerEvent, this, event, domEvent));\n    });\n  },\n});\n","import { Behavior } from 'marionette';\n\nimport keyCodes from 'js/utils/formatting/key-codes';\n\nimport KeyListenerBehavior from './key-listener';\n\nconst { ENTER_KEY, ESCAPE_KEY, DOWN_KEY, TAB_KEY, UP_KEY } = keyCodes;\n\nexport default Behavior.extend({\n  behaviors: [\n    {\n      behaviorClass: KeyListenerBehavior,\n      keyEvents: {\n        'transport:down': DOWN_KEY,\n        'transport:up': UP_KEY,\n        'select': ENTER_KEY,\n        'close': [ESCAPE_KEY, TAB_KEY],\n      },\n    },\n  ],\n\n  options: {\n    items: '.js-picklist-item',\n    scroll: '.js-picklist-scroll',\n  },\n\n  events() {\n    const evts = {};\n\n    // by default 'mouseenter .js-picklist-item'\n    evts[`mouseenter ${ this.getOption('items') }`] = this.onHoverItem;\n\n    return evts;\n  },\n\n  // must be onAttach, so that the width of droplist is already set for scrolling calc\n  onAttach() {\n    const $items = this.getItems();\n    this.scrollTo($items, $items.filter('.is-selected'), 'middle');\n  },\n\n  onHoverItem(evt) {\n    this.updateTransport(this.getItems(), this.view.$(evt.currentTarget));\n  },\n\n  onTransportDown(evt) {\n    evt.preventDefault();\n\n    const $items = this.getItems();\n    const $highlighted = this._getNextHighlighted($items);\n\n    this.updateTransport($items, $highlighted);\n\n    this.scrollTo($items);\n  },\n\n  onTransportUp(evt) {\n    evt.preventDefault();\n\n    const $items = this.getItems();\n    const $highlighted = this._getPrevHighlighted($items);\n\n    this.updateTransport($items, $highlighted);\n\n    this.scrollTo($items);\n  },\n\n  getItems() {\n    return this.view.$(this.getOption('items'));\n  },\n\n  getHighlighted($items) {\n    return $items.filter('.is-highlighted');\n  },\n\n  updateTransport($items, $highlighted) {\n    $items.removeClass('is-highlighted');\n    $highlighted.addClass('is-highlighted');\n  },\n\n  // determines based on what is highlighted (or not)\n  // what the next highlighted item will be when arrow up is pushed\n  _getPrevHighlighted($items) {\n    const $highlighted = this.getHighlighted($items);\n\n    /* istanbul ignore if: complicated generic test, but simple code */\n    if (!$highlighted.length) {\n      return $items.last();\n    }\n\n    const nextIndex = $items.index($highlighted) - 1;\n\n    if (nextIndex < 0) {\n      return $highlighted;\n    }\n\n    return $items.eq(nextIndex);\n  },\n\n  // determines based on what is highlighted (or not)\n  // what the next highlighted item will be when arrow down is pushed\n  _getNextHighlighted($items) {\n    const $highlighted = this.getHighlighted($items);\n\n    /* istanbul ignore if: complicated generic test, but simple code */\n    if (!$highlighted.length) {\n      return $items.first();\n    }\n\n    const nextIndex = $items.index($highlighted) + 1;\n\n    if (nextIndex === $items.length) {\n      return $highlighted;\n    }\n\n    return $items.eq(nextIndex);\n  },\n\n  // looks for the highlighted items position and scrolls the list so that it is shown.\n  // pass 'middle' as the offsetDir to place the highlighted element in the middle\n  // of the scrollable window\n  /* istanbul ignore next: hard to test, but battle tested */\n  scrollTo($items, $scrollItem, offsetDir) {\n    if (!$items.length) return;\n\n    if (!$scrollItem || !$scrollItem.length) {\n      $scrollItem = this.getHighlighted($items);\n    }\n\n    if (!$scrollItem.length) return;\n\n    const $scrollEl = this.view.$(this.getOption('scroll'));\n\n    const picklistScrollTop = $scrollEl.scrollTop();\n    const picklistHeight = $scrollEl.outerHeight();\n    const childViewHeight = $scrollItem.outerHeight();\n    const childViewTop = $scrollItem.position().top;\n    const childViewBottom = childViewTop + childViewHeight - picklistHeight;\n    let offset = 0;\n\n    if (offsetDir === 'middle') {\n      offset = (picklistHeight / 2) - (childViewHeight / 2);\n    }\n\n    if (childViewTop < 0) {\n      $scrollEl.scrollTop(picklistScrollTop + childViewTop + offset);\n    }\n\n    if (childViewBottom > 0) {\n      $scrollEl.scrollTop(picklistScrollTop + childViewBottom + offset);\n    }\n  },\n\n\n  // Keylistener non-transport related events\n  // -----------------------------------------\n\n  // simulates the click trigger on the currently highlighted element\n  onSelect(evt) {\n    evt.preventDefault();\n\n    this.view.$('.is-highlighted').click();\n  },\n});\n","import { debounce, each, extend, noop, pick, result, size } from 'underscore';\nimport hbs from 'handlebars-inline-precompile';\nimport { View, CollectionView } from 'marionette';\n\nimport 'scss/modules/forms.scss';\n\nimport intl from 'js/i18n';\nimport hasAllText from 'js/utils/formatting/has-all-text';\n\nimport Component from 'js/base/component';\n\nimport './picklist.scss';\n\nimport InputFocusBehavior from 'js/behaviors/input-focus';\nimport InputWatcherBehavior from 'js/behaviors/input-watcher';\nimport PicklistBehavior from 'js/behaviors/picklist-transport';\n\nconst CLASS_OPTIONS = [\n  'attr',\n  'canClear',\n  'childView',\n  'childViewEventPrefix',\n  'className',\n  'clearText',\n  'emptyView',\n  'emptyViewOptions',\n  'headingText',\n  'infoText',\n  'isSelectlist',\n  'lists',\n  'noResultsText',\n  'placeholderText',\n  'template',\n];\n\nconst CLASS_OPTIONS_ITEM = [\n  'attr',\n  'getItemSearchText',\n  'isCheckable',\n  'itemClassName',\n  'itemTemplate',\n  'itemTemplateContext',\n];\n\nconst attr = 'text';\nconst canClear = false;\nconst isSelectList = false;\n\nconst PicklistEmpty = View.extend({\n  tagName: 'li',\n  className: 'picklist--no-results',\n  template: hbs`{{ noResultsText }}`,\n  serializeData() {\n    return this.options;\n  },\n});\n\nconst PicklistItem = View.extend({\n  tagName: 'li',\n  itemTemplate: hbs`\n    <div class=\"flex-grow\">{{#if icon}}{{fa icon.type icon.icon classes=icon.classes}}{{/if}}<span>{{matchText text query}}</span></div>\n    {{#if isChecked}}{{fas \"check\" classes=\"u-icon--12 u-margin--l-16\"}}{{/if}}\n  `,\n  itemClassName() {\n    const classNames = [];\n\n    if (this.model.get('isDisabled')) classNames.push('is-disabled');\n    if (this.model.get('hasDivider')) classNames.push('has-divider');\n\n    return classNames.join(' ');\n  },\n  className() {\n    const classNames = ['picklist__item', 'js-picklist-item', result(this, 'itemClassName', '')];\n\n    if (this.model === this.state.get('selected')) classNames.push('is-selected');\n\n    return classNames.join(' ');\n  },\n  triggers: {\n    'click': 'select',\n  },\n  preinitialize(options) {\n    this.mergeOptions(options, ['state', ...CLASS_OPTIONS_ITEM]);\n  },\n  onRender() {\n    this.searchText = this.getItemSearchText(this.model);\n  },\n  getItemSearchText(item) {\n    return this.$el.text();\n  },\n  itemTemplateContext: noop,\n  templateContext() {\n    const isCheckable = this.getOption('isCheckable');\n    const isSelected = this.model === this.state.get('selected');\n    return extend({\n      text: this.model.get(this.attr),\n      query: this.state.get('query'),\n      isChecked: isCheckable && isSelected,\n    }, result(this, 'itemTemplateContext'));\n  },\n  getTemplate() {\n    return this.itemTemplate;\n  },\n});\n\nconst Picklist = CollectionView.extend({\n  className: 'picklist__group',\n  tagName: 'li',\n  template: hbs`\n    {{#if headingText}}<div class=\"picklist__heading\">{{ headingText }}</div>{{/if}}\n    <ul></ul>\n    {{#if infoText}}<div class=\"picklist__info\">{{fas \"circle-info\"}}{{ infoText }}</div>{{/if}}\n  `,\n  serializeCollection: noop,\n  childViewContainer: 'ul',\n  childViewEventPrefix: 'item',\n  modelEvents: {\n    'change:query': 'filter',\n  },\n  viewFilter(view) {\n    view.render();\n    const query = this.model.get('query');\n    return !query || !view.searchText || hasAllText(view.searchText, query);\n  },\n  initialize(options) {\n    this.mergeOptions(options, CLASS_OPTIONS_ITEM);\n  },\n  childViewOptions() {\n    const opts = pick(this, ...CLASS_OPTIONS_ITEM);\n    return extend({ state: this.model }, opts);\n  },\n  templateContext() {\n    return {\n      headingText: this.getOption('headingText'),\n      infoText: this.getOption('infoText'),\n    };\n  },\n});\n\nconst Picklists = CollectionView.extend({\n  behaviors: [\n    {\n      behaviorClass: InputFocusBehavior,\n      selector: '.js-input',\n    },\n    InputWatcherBehavior,\n    PicklistBehavior,\n  ],\n  template: hbs`\n    <div>\n      {{#if headingText}}<div class=\"picklist__heading u-margin--b-8\">{{ headingText }}</div>{{/if}}\n      {{#if isSelectlist}}<input type=\"text\" class=\"js-input picklist__input input-primary--small\" placeholder=\"{{ placeholderText }}\" value=\"{{ query }}\">{{/if}}\n      {{#if canClear}}<div><a class=\"picklist__item js-picklist-item js-clear\">{{ clearText }}</a></div>{{/if}}\n    </div>\n    <ul class=\"flex-region picklist__scroll js-picklist-scroll\"></ul>\n    {{#if infoText}}<div class=\"picklist__info \">{{fas \"circle-info\"}}{{ infoText }}</div>{{/if}}\n  `,\n  triggers: {\n    'focus @ui.input': 'focus',\n    'click @ui.clear': 'clear',\n  },\n  ui: {\n    input: '.js-input',\n    clear: '.js-clear',\n  },\n  onClear() {\n    this.triggerMethod('picklist:item:select', { model: null });\n  },\n  serializeCollection: noop,\n  childViewContainer: 'ul',\n  emptyView: PicklistEmpty,\n  initialize(options) {\n    this.mergeOptions(options, CLASS_OPTIONS);\n    this.mergeOptions(options, CLASS_OPTIONS_ITEM);\n\n    this.debouncedFilter = debounce(this.filter, 1);\n\n    each(this.lists, this.addList, this);\n  },\n  addList(list) {\n    const options = extend({\n      model: this.model,\n      childView: this.childView,\n    }, pick(this, ...CLASS_OPTIONS_ITEM), list);\n\n    const picklist = new Picklist(options);\n\n    picklist.render();\n\n    this.addChildView(picklist);\n  },\n  viewFilter(childView) {\n    return !!size(childView.children) || childView.shouldShow;\n  },\n  childViewEvents: {\n    'before:render:children'() {\n      return this.debouncedFilter();\n    },\n  },\n  onRenderChildren() {\n    this.$('.js-picklist-item').removeClass('is-highlighted');\n\n    if (!this.model.get('query')) return;\n\n    this.$('.js-picklist-item').first().addClass('is-highlighted');\n  },\n  emptyViewOptions() {\n    return { noResultsText: this.noResultsText };\n  },\n  templateContext() {\n    return {\n      canClear: this.canClear,\n      clearText: this.clearText,\n      headingText: this.headingText,\n      infoText: this.infoText,\n      placeholderText: this.placeholderText,\n      isSelectlist: this.isSelectlist,\n    };\n  },\n});\n\nexport default Component.extend({\n  attr,\n  canClear,\n  isSelectList,\n  childView: PicklistItem,\n  className: 'picklist',\n  childViewEventPrefix: 'picklist',\n  clearText: intl.components.picklist.clearText,\n  headingText: '',\n  infoText: '',\n  noResultsText: intl.components.picklist.noResultsText,\n  constructor: function(options) {\n    this.mergeOptions(options, CLASS_OPTIONS);\n    this.mergeOptions(options, CLASS_OPTIONS_ITEM);\n\n    Component.apply(this, arguments);\n  },\n  viewOptions() {\n    const opts = pick(this, ...CLASS_OPTIONS, ...CLASS_OPTIONS_ITEM);\n    return extend({ model: this.getState() }, opts);\n  },\n  ViewClass: Picklists,\n  viewEvents: {\n    'watch:change': 'onWatchChange',\n  },\n  onWatchChange(query) {\n    this.setState('query', query);\n  },\n});\n","import { extend, result } from 'underscore';\nimport Backbone from 'backbone';\nimport hbs from 'handlebars-inline-precompile';\nimport { View } from 'marionette';\n\nimport 'scss/modules/buttons.scss';\n\nimport intl from 'js/i18n';\nimport Component from 'js/base/component';\n\nimport Picklist from 'js/components/picklist';\n\n// NOTE: Use this if you intend to keep the selected state\n\nconst CLASS_OPTIONS = [\n  'align',\n  'collection',\n  'lists',\n  'picklistEvents',\n  'picklistOptions',\n  'popRegion',\n  'popWidth',\n  'position',\n  'viewOptions',\n];\n\nconst picklistOptions = {\n  attr: 'text',\n  canClear: false,\n  headingText: null,\n  infoText: null,\n  isSelectlist: false,\n  placeholderText: null,\n};\n\nconst popWidth = null;\n\nconst viewOptions = {\n  className: 'button-secondary',\n  template: hbs`\n    {{~#if icon}}{{fa icon.type icon.icon classes=icon.classes}}{{/if}}\n    {{~#if (lookup this attr)}}<span>{{lookup this attr}}</span>{{else}}\n      {{~#if defaultText}}<span>{{ defaultText }}</span>{{/if~}}\n    {{/if}}`,\n  templateContext() {\n    return {\n      attr: 'text',\n      defaultText: intl.components.droplist.defaultText,\n    };\n  },\n};\n\nconst StateModel = Backbone.Model.extend({\n  defaults: {\n    isDisabled: false,\n    isActive: false,\n    selected: null,\n  },\n});\n\n\nconst ViewClass = View.extend({\n  initialize({ state }) {\n    this.model = state.selected;\n  },\n  attributes() {\n    return {\n      disabled: this.getOption('state').isDisabled,\n    };\n  },\n  tagName: 'button',\n  triggers: {\n    'click': 'click',\n    'focus': 'focus',\n  },\n});\n\nexport default Component.extend({\n  picklistOptions,\n  popWidth,\n  StateModel,\n  ViewClass,\n  constructor: function(options) {\n    this.mergeOptions(options, CLASS_OPTIONS);\n\n    this.once('show', () => {\n      if (!this.getState('isActive')) return;\n\n      this.showPicklist();\n    });\n\n    Component.apply(this, arguments);\n  },\n  mixinViewOptions(options) {\n    return extend({ state: this.getState().attributes }, viewOptions, result(this, 'viewOptions'), options);\n  },\n  viewEvents: {\n    'click': 'onClick',\n  },\n  onClick() {\n    this.toggleState('isActive');\n  },\n  stateEvents: {\n    'change:isDisabled': 'onChangeIsDisabled',\n    'change:isActive': 'onChangeIsActive',\n    'change:selected': 'onChangeStateSelected',\n  },\n  onChangeIsDisabled() {\n    this.show();\n  },\n  onChangeIsActive(state, isActive) {\n    const view = this.getView();\n    view.$el.toggleClass('is-active', isActive);\n\n    if (!isActive) return;\n\n    // blur off the button so enter won't trigger select repeatedly\n    view.$el.blur();\n\n    this.showPicklist();\n  },\n  onChangeStateSelected(state, selected) {\n    this.show();\n    this.triggerMethod('change:selected', selected);\n  },\n  showPicklist() {\n    const picklist = new Picklist(extend({\n      lists: this.lists || [{ collection: this.collection }],\n      state: { selected: this.getState('selected') },\n    }, result(this, 'picklistOptions')));\n\n    this.popRegion.show(picklist, this.popRegionOptions());\n\n    this.bindEvents(picklist.getView(), this._picklistEvents);\n    this.bindEvents(picklist.getView(), result(this, 'picklistEvents'));\n  },\n  position() {\n    return this.getView().getBounds();\n  },\n  popRegionOptions() {\n    return extend({\n      ignoreEl: this.getView().el,\n      popWidth: result(this, 'popWidth'),\n      align: this.align,\n    }, result(this, 'position'));\n  },\n  _picklistEvents: {\n    'close': 'onPicklistClose',\n    'picklist:item:select': 'onPicklistSelect',\n    'destroy': 'onPicklistDestroy',\n  },\n  onPicklistClose() {\n    this.popRegion.empty();\n  },\n  onPicklistSelect({ model }) {\n    this.popRegion.empty();\n    this.setState('selected', model);\n  },\n  onPicklistDestroy() {\n    this.toggleState('isActive', false);\n  },\n}, {\n  setPopRegion(region) {\n    this.prototype.popRegion = region;\n  },\n});\n","import { extend, result } from 'underscore';\n\nimport Picklist from 'js/components/picklist';\n\n// NOTE: Use this if you do not intend to keep the selected state\n\nconst CLASS_OPTIONS = [\n  'align',\n  'ignoreEl',\n  'popWidth',\n  'position',\n  'uiView',\n  'ui',\n];\n\nconst attr = 'text';\nconst align = 'left';\nconst popWidth = null;\n\nexport default Picklist.extend({\n  attr,\n  align,\n  popWidth,\n  constructor: function(options) {\n    this.mergeOptions(options, CLASS_OPTIONS);\n\n    this.listenTo(this.uiView, 'render destroy', this.destroy);\n\n    Picklist.apply(this, arguments);\n  },\n  viewTriggers: {\n    'close': 'close',\n    'picklist:item:select': 'select',\n  },\n  position() {\n    return this.uiView.getBounds(this.ui);\n  },\n  regionOptions() {\n    return extend({\n      ignoreEl: this.ignoreEl || this.ui[0],\n      popWidth: this.popWidth,\n      align: this.align,\n    }, result(this, 'position'));\n  },\n  onClose() {\n    this.destroy();\n  },\n  onSelect({ model }) {\n    if (model.get('isDisabled')) return;\n\n    const onSelect = model.get('onSelect');\n    onSelect.call(this, model);\n\n    this.destroy();\n  },\n});\n","import { bind, delay as _delay, extend, result } from 'underscore';\nimport hbs from 'handlebars-inline-precompile';\nimport anime from 'animejs';\nimport { View } from 'marionette';\n\nimport Component from 'js/base/component';\n\nimport './tooltip.scss';\n\nconst CLASS_OPTIONS = [\n  'className',\n  'delay',\n  'ignoreEl',\n  'message',\n  'messageHtml',\n  'orientation',\n  'position',\n  'uiView',\n  'ui',\n];\n\nconst TooltipView = View.extend({\n  template: hbs`{{ message }}{{{ messageHtml }}}`,\n  templateContext() {\n    return {\n      message: this.getOption('message'),\n      messageHtml: this.getOption('messageHtml'),\n    };\n  },\n});\n\nexport default Component.extend({\n  ViewClass: TooltipView,\n  className: 'tooltip',\n  delay: 0,\n  constructor: function(options) {\n    this.mergeOptions(options, CLASS_OPTIONS);\n\n    this.setListeners();\n\n    this.listenTo(this.uiView, 'render destroy', this.destroy);\n\n    Component.apply(this, arguments);\n  },\n  setListeners() {\n    if (!this.ui) return;\n\n    this.ui.on('pointerenter.tooltip', bind(this.showTooltip, this));\n\n    this.ui.on('mouseleave.tooltip', bind(this.hideTooltip, this));\n\n    this.ui.on('pointerdown.tooltip', bind(this.showTooltip, this));\n  },\n  showTooltip() {\n    clearTimeout(this.delayTimeout);\n\n    const delay = result(this, 'delay');\n\n    this.delayTimeout = _delay(bind(this.show, this), delay);\n  },\n  hideTooltip() {\n    clearTimeout(this.delayTimeout);\n\n    this.empty();\n  },\n  onBeforeDestroy() {\n    clearTimeout(this.delayTimeout);\n  },\n  onShow() {\n    anime({\n      targets: this.getView().el,\n      duration: 1500,\n      opacity: [0, 1],\n    });\n  },\n  viewOptions() {\n    return {\n      className: result(this, 'className'),\n      message: result(this, 'message'),\n      messageHtml: result(this, 'messageHtml'),\n    };\n  },\n  position() {\n    return this.uiView.getBounds(this.ui);\n  },\n  regionOptions() {\n    const orientation = result(this, 'orientation');\n    const ignoreEl = result(this, 'ignoreEl');\n    return extend({ orientation, ignoreEl }, result(this, 'position'));\n  },\n});\n","\n            import HandlebarsRuntime from 'handlebars/runtime';\n            export default HandlebarsRuntime.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" <button class=\\\"alert-box__link js-undo\\\" type=\\\"button\\\">\"\n    + container.escapeExpression(container.lambda(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"alertBox\"))) && lookupProperty(stack1,\"alertBoxTemplate\"))) && lookupProperty(stack1,\"undoBtn\")), depth0))\n    + \"</button>\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"alert-box__icon \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"alertType\") || (depth0 != null ? lookupProperty(depth0,\"alertType\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"alertType\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":28},\"end\":{\"line\":1,\"column\":43}}}) : helper)))\n    + \"\\\">\\n  \"\n    + alias4((lookupProperty(helpers,\"far\")||(depth0 && lookupProperty(depth0,\"far\"))||alias2).call(alias1,(depth0 != null ? lookupProperty(depth0,\"iconType\") : depth0),{\"name\":\"far\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":2},\"end\":{\"line\":2,\"column\":18}}}))\n    + \"\\n</div>\\n<div class=\\\"alert-box__body\\\">\\n  \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"text\") || (depth0 != null ? lookupProperty(depth0,\"text\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"text\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":2},\"end\":{\"line\":5,\"column\":12}}}) : helper)))\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"html\") || (depth0 != null ? lookupProperty(depth0,\"html\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"html\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":12},\"end\":{\"line\":5,\"column\":24}}}) : helper))) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"hasUndo\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":24},\"end\":{\"line\":5,\"column\":163}}})) != null ? stack1 : \"\")\n    + \"\\n</div>\\n<button class=\\\"alert-box__cancel js-dismiss\\\" type=\\\"button\\\">\"\n    + alias4(container.lambda(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"alertBox\"))) && lookupProperty(stack1,\"alertBoxTemplate\"))) && lookupProperty(stack1,\"dismissBtn\")), depth0))\n    + \"</button>\\n\";\n},\"useData\":true});\n          ","import { bind } from 'underscore';\nimport anime from 'animejs';\nimport { View, CollectionView } from 'marionette';\n\nimport AlertTemplate from './alert-box.hbs';\n\nimport './alert-box.scss';\n\nconst OPTIONS = ['alertType', 'text', 'html', 'hasUndo'];\n\nconst icons = {\n  success: 'circle-check',\n  info: 'circle-info',\n  error: 'circle-xmark',\n};\n\nconst AlertView = View.extend({\n  className: 'alert-box',\n  alertType: 'info',\n  template: AlertTemplate,\n  triggers: {\n    'click .js-dismiss': 'click:dismiss',\n    'click .js-undo': 'click:undo',\n  },\n  initialize(options) {\n    this.mergeOptions(options, OPTIONS);\n  },\n  onAttach() {\n    anime({\n      targets: this.el,\n      duration: 900,\n      translateY: [-10, 0],\n      opacity: [0, 1],\n      easing: 'easeInOutQuad',\n    });\n  },\n  onClickDismiss() {\n    this.dismiss();\n  },\n  onClickUndo() {\n    if (this.isDismissed) return;\n\n    this._dismiss();\n\n    this.triggerMethod('undo', this);\n  },\n  _dismiss() {\n    this.isDismissed = true;\n\n    anime({\n      targets: this.el,\n      opacity: [1, 0],\n      duration: 800,\n      easing: 'easeInSine',\n      complete: bind(this.destroy, this),\n    });\n  },\n  dismiss() {\n    if (this.isDismissed) return;\n\n    this._dismiss();\n\n    this.triggerMethod('dismiss', this);\n  },\n  templateContext() {\n    return {\n      alertType: this.alertType,\n      text: this.text,\n      html: this.html,\n      hasUndo: this.hasUndo,\n      iconType: icons[this.alertType],\n    };\n  },\n});\n\nconst AlertsView = CollectionView.extend({\n  className: 'alert-box__container',\n  onRemoveChild() {\n    if (this.children.length) return;\n\n    this.destroy();\n  },\n});\n\nexport { AlertView, AlertsView };\n","import { delay, each, extend, omit } from 'underscore';\n\nimport App from 'js/base/app';\n\nimport { AlertView, AlertsView } from 'js/views/globals/alert-box/alert-box_views';\n\n// in ms\nconst ALERT_TIMEOUT = 4000;\n\nexport default App.extend({\n  channelName: 'alert',\n  radioRequests: {\n    'show': 'showAlert',\n    'show:success': 'showSuccess',\n    'show:info': 'showInfo',\n    'show:error': 'showError',\n    'show:undo': 'showUndo',\n    'show:apiError': 'showApiError',\n  },\n  showAlert(options) {\n    const alertView = new AlertView(options);\n\n    delay(function() {\n      alertView.dismiss();\n    }, ALERT_TIMEOUT);\n\n    let alertsView = this.getView();\n\n    if (!alertsView) {\n      alertsView = this.showView(new AlertsView());\n    }\n\n    return alertsView.addChildView(alertView);\n  },\n  showSuccess(text) {\n    this.showAlert({ text, alertType: 'success' });\n  },\n  showInfo(text) {\n    this.showAlert({ text, alertType: 'info' });\n  },\n  showError(text) {\n    this.showAlert({ text, alertType: 'error' });\n  },\n  showUndo(options) {\n    options = extend({ hasUndo: true }, options);\n\n    const alertView = this.showAlert(omit(options, 'onUndo', 'onComplete'));\n\n    this.listenTo(alertView, {\n      'undo': options.onUndo,\n      'dismiss': options.onComplete,\n    });\n  },\n  showApiError(responseJson) {\n    const errors = responseJson.errors;\n\n    /* istanbul ignore if */\n    if (!errors.length) return;\n\n    each(errors, error => this.showAlert({ text: error.detail, alertType: 'error' }));\n  },\n});\n","import { get } from 'underscore';\nimport Radio from 'backbone.radio';\n\nimport App from 'js/base/app';\n\nexport default App.extend({\n  channelName: 'settings',\n  radioRequests: {\n    'get': 'getSetting',\n  },\n  initialize({ settings }) {\n    this.settings = settings;\n  },\n  getSetting(settingName) {\n    const currentWorkspace = Radio.request('workspace', 'current');\n    const workspaceSettings = currentWorkspace.get('settings');\n    const workspaceSetting = get(workspaceSettings, settingName);\n\n    if (workspaceSetting) return workspaceSetting;\n\n    const setting = this.settings.get(settingName);\n\n    if (!setting) return;\n\n    return setting.get('value');\n  },\n});\n","import { get, map, invoke, compact } from 'underscore';\nimport Radio from 'backbone.radio';\n\nimport App from 'js/base/app';\n\nexport default App.extend({\n  channelName: 'widgets',\n  radioRequests: {\n    'sidebarWidgets': 'getSidebarWidgets',\n    'build': 'buildWidgets',\n    'find': 'findWidget',\n  },\n  initialize({ widgets }) {\n    this.widgets = widgets;\n  },\n  findWidget(slug) {\n    return this.widgets.find({ slug });\n  },\n  getSidebarWidgets() {\n    const setting = Radio.request('settings', 'get', 'widgets_patient_sidebar');\n\n    return this.buildWidgets(get(setting, 'widgets'));\n  },\n  buildWidgets(widgetSlugs) {\n    const widgets = map(widgetSlugs, this.findWidget, this);\n\n    // NOTE: omit IDs so that widgets can be duplicated in a single list\n    const deIDdWidgets = invoke(compact(widgets), 'omit', 'id');\n\n    return Radio.request('entities', 'widgets:collection', deIDdWidgets);\n  },\n});\n","var assign = make_assign()\nvar create = make_create()\nvar trim = make_trim()\nvar Global = (typeof window !== 'undefined' ? window : global)\n\nmodule.exports = {\n\tassign: assign,\n\tcreate: create,\n\ttrim: trim,\n\tbind: bind,\n\tslice: slice,\n\teach: each,\n\tmap: map,\n\tpluck: pluck,\n\tisList: isList,\n\tisFunction: isFunction,\n\tisObject: isObject,\n\tGlobal: Global\n}\n\nfunction make_assign() {\n\tif (Object.assign) {\n\t\treturn Object.assign\n\t} else {\n\t\treturn function shimAssign(obj, props1, props2, etc) {\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\n\t\t\t\teach(Object(arguments[i]), function(val, key) {\n\t\t\t\t\tobj[key] = val\n\t\t\t\t})\n\t\t\t}\t\t\t\n\t\t\treturn obj\n\t\t}\n\t}\n}\n\nfunction make_create() {\n\tif (Object.create) {\n\t\treturn function create(obj, assignProps1, assignProps2, etc) {\n\t\t\tvar assignArgsList = slice(arguments, 1)\n\t\t\treturn assign.apply(this, [Object.create(obj)].concat(assignArgsList))\n\t\t}\n\t} else {\n\t\tfunction F() {} // eslint-disable-line no-inner-declarations\n\t\treturn function create(obj, assignProps1, assignProps2, etc) {\n\t\t\tvar assignArgsList = slice(arguments, 1)\n\t\t\tF.prototype = obj\n\t\t\treturn assign.apply(this, [new F()].concat(assignArgsList))\n\t\t}\n\t}\n}\n\nfunction make_trim() {\n\tif (String.prototype.trim) {\n\t\treturn function trim(str) {\n\t\t\treturn String.prototype.trim.call(str)\n\t\t}\n\t} else {\n\t\treturn function trim(str) {\n\t\t\treturn str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n\t\t}\n\t}\n}\n\nfunction bind(obj, fn) {\n\treturn function() {\n\t\treturn fn.apply(obj, Array.prototype.slice.call(arguments, 0))\n\t}\n}\n\nfunction slice(arr, index) {\n\treturn Array.prototype.slice.call(arr, index || 0)\n}\n\nfunction each(obj, fn) {\n\tpluck(obj, function(val, key) {\n\t\tfn(val, key)\n\t\treturn false\n\t})\n}\n\nfunction map(obj, fn) {\n\tvar res = (isList(obj) ? [] : {})\n\tpluck(obj, function(v, k) {\n\t\tres[k] = fn(v, k)\n\t\treturn false\n\t})\n\treturn res\n}\n\nfunction pluck(obj, fn) {\n\tif (isList(obj)) {\n\t\tfor (var i=0; i<obj.length; i++) {\n\t\t\tif (fn(obj[i], i)) {\n\t\t\t\treturn obj[i]\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (var key in obj) {\n\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\tif (fn(obj[key], key)) {\n\t\t\t\t\treturn obj[key]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction isList(val) {\n\treturn (val != null && typeof val != 'function' && typeof val.length == 'number')\n}\n\nfunction isFunction(val) {\n\treturn val && {}.toString.call(val) === '[object Function]'\n}\n\nfunction isObject(val) {\n\treturn val && {}.toString.call(val) === '[object Object]'\n}\n","var util = require('./util')\nvar slice = util.slice\nvar pluck = util.pluck\nvar each = util.each\nvar bind = util.bind\nvar create = util.create\nvar isList = util.isList\nvar isFunction = util.isFunction\nvar isObject = util.isObject\n\nmodule.exports = {\n\tcreateStore: createStore\n}\n\nvar storeAPI = {\n\tversion: '2.0.12',\n\tenabled: false,\n\t\n\t// get returns the value of the given key. If that value\n\t// is undefined, it returns optionalDefaultValue instead.\n\tget: function(key, optionalDefaultValue) {\n\t\tvar data = this.storage.read(this._namespacePrefix + key)\n\t\treturn this._deserialize(data, optionalDefaultValue)\n\t},\n\n\t// set will store the given value at key and returns value.\n\t// Calling set with value === undefined is equivalent to calling remove.\n\tset: function(key, value) {\n\t\tif (value === undefined) {\n\t\t\treturn this.remove(key)\n\t\t}\n\t\tthis.storage.write(this._namespacePrefix + key, this._serialize(value))\n\t\treturn value\n\t},\n\n\t// remove deletes the key and value stored at the given key.\n\tremove: function(key) {\n\t\tthis.storage.remove(this._namespacePrefix + key)\n\t},\n\n\t// each will call the given callback once for each key-value pair\n\t// in this store.\n\teach: function(callback) {\n\t\tvar self = this\n\t\tthis.storage.each(function(val, namespacedKey) {\n\t\t\tcallback.call(self, self._deserialize(val), (namespacedKey || '').replace(self._namespaceRegexp, ''))\n\t\t})\n\t},\n\n\t// clearAll will remove all the stored key-value pairs in this store.\n\tclearAll: function() {\n\t\tthis.storage.clearAll()\n\t},\n\n\t// additional functionality that can't live in plugins\n\t// ---------------------------------------------------\n\n\t// hasNamespace returns true if this store instance has the given namespace.\n\thasNamespace: function(namespace) {\n\t\treturn (this._namespacePrefix == '__storejs_'+namespace+'_')\n\t},\n\n\t// createStore creates a store.js instance with the first\n\t// functioning storage in the list of storage candidates,\n\t// and applies the the given mixins to the instance.\n\tcreateStore: function() {\n\t\treturn createStore.apply(this, arguments)\n\t},\n\t\n\taddPlugin: function(plugin) {\n\t\tthis._addPlugin(plugin)\n\t},\n\t\n\tnamespace: function(namespace) {\n\t\treturn createStore(this.storage, this.plugins, namespace)\n\t}\n}\n\nfunction _warn() {\n\tvar _console = (typeof console == 'undefined' ? null : console)\n\tif (!_console) { return }\n\tvar fn = (_console.warn ? _console.warn : _console.log)\n\tfn.apply(_console, arguments)\n}\n\nfunction createStore(storages, plugins, namespace) {\n\tif (!namespace) {\n\t\tnamespace = ''\n\t}\n\tif (storages && !isList(storages)) {\n\t\tstorages = [storages]\n\t}\n\tif (plugins && !isList(plugins)) {\n\t\tplugins = [plugins]\n\t}\n\n\tvar namespacePrefix = (namespace ? '__storejs_'+namespace+'_' : '')\n\tvar namespaceRegexp = (namespace ? new RegExp('^'+namespacePrefix) : null)\n\tvar legalNamespaces = /^[a-zA-Z0-9_\\-]*$/ // alpha-numeric + underscore and dash\n\tif (!legalNamespaces.test(namespace)) {\n\t\tthrow new Error('store.js namespaces can only have alphanumerics + underscores and dashes')\n\t}\n\t\n\tvar _privateStoreProps = {\n\t\t_namespacePrefix: namespacePrefix,\n\t\t_namespaceRegexp: namespaceRegexp,\n\n\t\t_testStorage: function(storage) {\n\t\t\ttry {\n\t\t\t\tvar testStr = '__storejs__test__'\n\t\t\t\tstorage.write(testStr, testStr)\n\t\t\t\tvar ok = (storage.read(testStr) === testStr)\n\t\t\t\tstorage.remove(testStr)\n\t\t\t\treturn ok\n\t\t\t} catch(e) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\n\t\t_assignPluginFnProp: function(pluginFnProp, propName) {\n\t\t\tvar oldFn = this[propName]\n\t\t\tthis[propName] = function pluginFn() {\n\t\t\t\tvar args = slice(arguments, 0)\n\t\t\t\tvar self = this\n\n\t\t\t\t// super_fn calls the old function which was overwritten by\n\t\t\t\t// this mixin.\n\t\t\t\tfunction super_fn() {\n\t\t\t\t\tif (!oldFn) { return }\n\t\t\t\t\teach(arguments, function(arg, i) {\n\t\t\t\t\t\targs[i] = arg\n\t\t\t\t\t})\n\t\t\t\t\treturn oldFn.apply(self, args)\n\t\t\t\t}\n\n\t\t\t\t// Give mixing function access to super_fn by prefixing all mixin function\n\t\t\t\t// arguments with super_fn.\n\t\t\t\tvar newFnArgs = [super_fn].concat(args)\n\n\t\t\t\treturn pluginFnProp.apply(self, newFnArgs)\n\t\t\t}\n\t\t},\n\n\t\t_serialize: function(obj) {\n\t\t\treturn JSON.stringify(obj)\n\t\t},\n\n\t\t_deserialize: function(strVal, defaultVal) {\n\t\t\tif (!strVal) { return defaultVal }\n\t\t\t// It is possible that a raw string value has been previously stored\n\t\t\t// in a storage without using store.js, meaning it will be a raw\n\t\t\t// string value instead of a JSON serialized string. By defaulting\n\t\t\t// to the raw string value in case of a JSON parse error, we allow\n\t\t\t// for past stored values to be forwards-compatible with store.js\n\t\t\tvar val = ''\n\t\t\ttry { val = JSON.parse(strVal) }\n\t\t\tcatch(e) { val = strVal }\n\n\t\t\treturn (val !== undefined ? val : defaultVal)\n\t\t},\n\t\t\n\t\t_addStorage: function(storage) {\n\t\t\tif (this.enabled) { return }\n\t\t\tif (this._testStorage(storage)) {\n\t\t\t\tthis.storage = storage\n\t\t\t\tthis.enabled = true\n\t\t\t}\n\t\t},\n\n\t\t_addPlugin: function(plugin) {\n\t\t\tvar self = this\n\n\t\t\t// If the plugin is an array, then add all plugins in the array.\n\t\t\t// This allows for a plugin to depend on other plugins.\n\t\t\tif (isList(plugin)) {\n\t\t\t\teach(plugin, function(plugin) {\n\t\t\t\t\tself._addPlugin(plugin)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep track of all plugins we've seen so far, so that we\n\t\t\t// don't add any of them twice.\n\t\t\tvar seenPlugin = pluck(this.plugins, function(seenPlugin) {\n\t\t\t\treturn (plugin === seenPlugin)\n\t\t\t})\n\t\t\tif (seenPlugin) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.plugins.push(plugin)\n\n\t\t\t// Check that the plugin is properly formed\n\t\t\tif (!isFunction(plugin)) {\n\t\t\t\tthrow new Error('Plugins must be function values that return objects')\n\t\t\t}\n\n\t\t\tvar pluginProperties = plugin.call(this)\n\t\t\tif (!isObject(pluginProperties)) {\n\t\t\t\tthrow new Error('Plugins must return an object of function properties')\n\t\t\t}\n\n\t\t\t// Add the plugin function properties to this store instance.\n\t\t\teach(pluginProperties, function(pluginFnProp, propName) {\n\t\t\t\tif (!isFunction(pluginFnProp)) {\n\t\t\t\t\tthrow new Error('Bad plugin property: '+propName+' from plugin '+plugin.name+'. Plugins should only return functions.')\n\t\t\t\t}\n\t\t\t\tself._assignPluginFnProp(pluginFnProp, propName)\n\t\t\t})\n\t\t},\n\t\t\n\t\t// Put deprecated properties in the private API, so as to not expose it to accidential\n\t\t// discovery through inspection of the store object.\n\t\t\n\t\t// Deprecated: addStorage\n\t\taddStorage: function(storage) {\n\t\t\t_warn('store.addStorage(storage) is deprecated. Use createStore([storages])')\n\t\t\tthis._addStorage(storage)\n\t\t}\n\t}\n\n\tvar store = create(_privateStoreProps, storeAPI, {\n\t\tplugins: []\n\t})\n\tstore.raw = {}\n\teach(store, function(prop, propName) {\n\t\tif (isFunction(prop)) {\n\t\t\tstore.raw[propName] = bind(store, prop)\t\t\t\n\t\t}\n\t})\n\teach(storages, function(storage) {\n\t\tstore._addStorage(storage)\n\t})\n\teach(plugins, function(plugin) {\n\t\tstore._addPlugin(plugin)\n\t})\n\treturn store\n}\n","var util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'localStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nfunction localStorage() {\n\treturn Global.localStorage\n}\n\nfunction read(key) {\n\treturn localStorage().getItem(key)\n}\n\nfunction write(key, data) {\n\treturn localStorage().setItem(key, data)\n}\n\nfunction each(fn) {\n\tfor (var i = localStorage().length - 1; i >= 0; i--) {\n\t\tvar key = localStorage().key(i)\n\t\tfn(read(key), key)\n\t}\n}\n\nfunction remove(key) {\n\treturn localStorage().removeItem(key)\n}\n\nfunction clearAll() {\n\treturn localStorage().clear()\n}\n","var util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'sessionStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll\n}\n\nfunction sessionStorage() {\n\treturn Global.sessionStorage\n}\n\nfunction read(key) {\n\treturn sessionStorage().getItem(key)\n}\n\nfunction write(key, data) {\n\treturn sessionStorage().setItem(key, data)\n}\n\nfunction each(fn) {\n\tfor (var i = sessionStorage().length - 1; i >= 0; i--) {\n\t\tvar key = sessionStorage().key(i)\n\t\tfn(read(key), key)\n\t}\n}\n\nfunction remove(key) {\n\treturn sessionStorage().removeItem(key)\n}\n\nfunction clearAll() {\n\treturn sessionStorage().clear()\n}\n","// cookieStorage is useful Safari private browser mode, where localStorage\n// doesn't work but cookies do. This implementation is adopted from\n// https://developer.mozilla.org/en-US/docs/Web/API/Storage/LocalStorage\n\nvar util = require('../src/util')\nvar Global = util.Global\nvar trim = util.trim\n\nmodule.exports = {\n\tname: 'cookieStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar doc = Global.document\n\nfunction read(key) {\n\tif (!key || !_has(key)) { return null }\n\tvar regexpStr = \"(?:^|.*;\\\\s*)\" +\n\t\tescape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") +\n\t\t\"\\\\s*\\\\=\\\\s*((?:[^;](?!;))*[^;]?).*\"\n\treturn unescape(doc.cookie.replace(new RegExp(regexpStr), \"$1\"))\n}\n\nfunction each(callback) {\n\tvar cookies = doc.cookie.split(/; ?/g)\n\tfor (var i = cookies.length - 1; i >= 0; i--) {\n\t\tif (!trim(cookies[i])) {\n\t\t\tcontinue\n\t\t}\n\t\tvar kvp = cookies[i].split('=')\n\t\tvar key = unescape(kvp[0])\n\t\tvar val = unescape(kvp[1])\n\t\tcallback(val, key)\n\t}\n}\n\nfunction write(key, data) {\n\tif(!key) { return }\n\tdoc.cookie = escape(key) + \"=\" + escape(data) + \"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/\"\n}\n\nfunction remove(key) {\n\tif (!key || !_has(key)) {\n\t\treturn\n\t}\n\tdoc.cookie = escape(key) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/\"\n}\n\nfunction clearAll() {\n\teach(function(_, key) {\n\t\tremove(key)\n\t})\n}\n\nfunction _has(key) {\n\treturn (new RegExp(\"(?:^|;\\\\s*)\" + escape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(doc.cookie)\n}\n","// memoryStorage is a useful last fallback to ensure that the store\n// is functions (meaning store.get(), store.set(), etc will all function).\n// However, stored values will not persist when the browser navigates to\n// a new page or reloads the current page.\n\nmodule.exports = {\n\tname: 'memoryStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar memoryStorage = {}\n\nfunction read(key) {\n\treturn memoryStorage[key]\n}\n\nfunction write(key, data) {\n\tmemoryStorage[key] = data\n}\n\nfunction each(callback) {\n\tfor (var key in memoryStorage) {\n\t\tif (memoryStorage.hasOwnProperty(key)) {\n\t\t\tcallback(memoryStorage[key], key)\n\t\t}\n\t}\n}\n\nfunction remove(key) {\n\tdelete memoryStorage[key]\n}\n\nfunction clearAll(key) {\n\tmemoryStorage = {}\n}\n","var engine = require('../src/store-engine')\n\nvar storages = [\n\trequire('../storages/localStorage'), \n\trequire('../storages/sessionStorage'), \n\trequire('../storages/cookieStorage'), \n\trequire('../storages/memoryStorage'),\n]\nvar plugins = []\n\nmodule.exports = engine.createStore(storages, plugins)\n","import { get } from 'underscore';\nimport Radio from 'backbone.radio';\nimport store from 'store';\n\nimport App from 'js/base/app';\n\nexport default App.extend({\n  channelName: 'workspace',\n  radioRequests: {\n    'current': 'getCurrentWorkspace',\n    'directories': 'getDirectories',\n    'fetch': 'fetchWorkspace',\n  },\n  _getWorkspace(slug) {\n    const currentUser = Radio.request('bootstrap', 'currentUser');\n    const workspaces = currentUser.getWorkspaces();\n\n    if (!workspaces.length) throw 'No workspaces found';\n\n    return workspaces.find({ slug })\n      || workspaces.find({ id: store.get('currentWorkspace') })\n      || workspaces.at(0);\n  },\n  _setCurrentWorkspace(route) {\n    const workspace = this._getWorkspace(route);\n\n    if (workspace.id !== get(this.currentWorkspace, 'id')) {\n      store.set('currentWorkspace', workspace.id);\n      this.currentWorkspace = workspace;\n      this.getChannel().trigger('change:workspace', workspace);\n    }\n\n    return workspace;\n  },\n  getCurrentWorkspace(route) {\n    if (route) {\n      return this._setCurrentWorkspace(route);\n    }\n\n    return this.currentWorkspace;\n  },\n  getDirectories() {\n    return this.directories.clone();\n  },\n  _getSharedWorkspaces(programs) {\n    const sharedWorkspaces = Radio.request('entities', 'workspaces:collection');\n\n    programs.each(program => {\n      const workspaces = program.getUserWorkspaces();\n\n      sharedWorkspaces.add(workspaces.models);\n    });\n\n    return sharedWorkspaces;\n  },\n  initialize({ route }) {\n    this._setCurrentWorkspace(route);\n  },\n  beforeStart() {\n    return [\n      Radio.request('entities', 'fetch:directories:filterable'),\n      Radio.request('entities', 'fetch:programs:byWorkspace', this.currentWorkspace.id),\n      Radio.request('entities', 'fetch:states:collection'),\n      Radio.request('entities', 'fetch:forms:collection'),\n    ];\n  },\n  onStart(options, directories, programs) {\n    this.directories = directories;\n\n    const workspaces = this._getSharedWorkspaces(programs);\n\n    const clinicianRequests = workspaces.map(workspace => {\n      return Radio.request('entities', 'fetch:clinicians:byWorkspace', workspace.id);\n    });\n\n    Promise.all([...clinicianRequests])\n      .then(() => {\n        this.resolvePromise(this.currentWorkspace);\n      })\n      .catch((...args) => {\n        this.rejectPromise(...args);\n        this.stop();\n      });\n  },\n  onFail(options, ...args) {\n    this.rejectPromise(...args);\n  },\n  fetchWorkspace() {\n    const promise = new Promise((resolvePromise, rejectPromise) => {\n      this.resolvePromise = resolvePromise;\n      this.rejectPromise = rejectPromise;\n    });\n\n    if (this.isRunning()) {\n      this.restart();\n\n      return promise;\n    }\n\n    this.start();\n\n    return promise;\n  },\n});\n","import { includes, reject } from 'underscore';\nimport Backbone from 'backbone';\nimport Radio from 'backbone.radio';\n\nimport getWorkspaceRoute from 'js/utils/root-route';\n\nimport App from 'js/base/app';\n\nimport SettingsService from './settings';\nimport WidgetsService from './widgets';\nimport WorkspaceService from './workspace';\n\n// NOTE: Roles are set only at login so they can be cached\nlet activeRolesCache;\n\nfunction getActiveRoles(roles, canAdmin) {\n  const activeRoles = roles.reject({ name: 'patient' });\n\n  if (canAdmin) return activeRoles;\n\n  return reject(activeRoles, role => {\n    return includes(role.get('permissions'), 'clinicians:admin');\n  });\n}\n\nexport default App.extend({\n  channelName: 'bootstrap',\n  radioRequests: {\n    'currentUser': 'getCurrentUser',\n    'workspaces': 'getWorkspaces',\n    'organization': 'getOrganization',\n    'roles': 'getActiveRoles',\n    'teams': 'getTeams',\n    'fetch': 'fetchBootstrap',\n  },\n  getCurrentUser() {\n    return this.currentUser;\n  },\n  getOrganization() {\n    return this.organization;\n  },\n  getWorkspaces() {\n    return this.workspaces.clone();\n  },\n  // Returns roles that the current user can manage\n  getActiveRoles() {\n    if (activeRolesCache) return activeRolesCache;\n\n    const canAdmin = this.currentUser.can('clinicians:admin');\n    const activeRoles = getActiveRoles(this.roles, canAdmin);\n\n    activeRolesCache = Radio.request('entities', 'roles:collection', activeRoles);\n\n    return activeRolesCache;\n  },\n  getTeams() {\n    return this.teams.clone();\n  },\n  initialize({ name }) {\n    this.organization = new Backbone.Model({ name });\n\n    // NOTE: handle pre-init'd workspace requests\n    Radio.reply('workspace', 'current');\n  },\n  beforeStart() {\n    return [\n      Radio.request('entities', 'fetch:clinicians:current'),\n      Radio.request('entities', 'fetch:roles:collection'),\n      Radio.request('entities', 'fetch:teams:collection'),\n      Radio.request('entities', 'fetch:workspaces:collection'),\n      Radio.request('entities', 'fetch:settings:collection'),\n      Radio.request('entities', 'fetch:widgets:collection'),\n    ];\n  },\n  onStart(options, currentUser, roles, teams, workspaces, settings, widgets) {\n    this.currentUser = currentUser;\n    this.roles = roles;\n    this.teams = teams;\n    this.workspaces = workspaces;\n\n    new SettingsService({ settings });\n\n    new WidgetsService({ widgets });\n\n    Radio.reset('workspace');\n    new WorkspaceService({ route: getWorkspaceRoute() });\n\n    this.resolvePromise(currentUser);\n  },\n  onFail(options, ...args) {\n    this.rejectPromise(...args);\n  },\n  fetchBootstrap() {\n    const promise = new Promise((resolvePromise, rejectPromise) => {\n      this.resolvePromise = resolvePromise;\n      this.rejectPromise = rejectPromise;\n    });\n\n    this.start();\n\n    return promise;\n  },\n});\n","import Backbone from 'backbone';\n\nimport App from 'js/base/app';\n\nexport default App.extend({\n  channelName: 'history',\n  radioRequests: {\n    'go:back': 'goBack',\n  },\n  initialize() {\n    const navigate = Backbone.history.navigate;\n    this._prevHistory = [Backbone.history.getFragment()];\n\n    // Patch Backbone history navigate to track history\n    Backbone.history.navigate = (route, options) => {\n      const navigated = navigate.call(Backbone.history, route, options);\n\n      /* istanbul ignore next: supports backbone.navigate api, but likely unused */\n      if (navigated === false) return false;\n\n      this.setPrevious(route, options);\n\n      this.triggerChange();\n\n      return navigated;\n    };\n\n    window.addEventListener('popstate', () => {\n      const fragment = Backbone.history.getFragment();\n\n      // If the current url will be at the top of the stack, assume back button\n      if (fragment === this._prevHistory.at(1)) {\n        this._prevHistory.shift();\n      } else {\n        this._prevHistory.unshift(fragment);\n      }\n\n      this.triggerChange();\n    });\n  },\n  setPrevious(route, { replace }) {\n    if (replace) {\n      this._prevHistory[0] = route;\n      return;\n    }\n\n    this._prevHistory.unshift(route);\n  },\n  triggerChange() {\n    this.getChannel().trigger('change:route', this._prevHistory[0]);\n  },\n  goBack(handleEmptyHistory) {\n    if (handleEmptyHistory && this._prevHistory.length < 2) {\n      handleEmptyHistory();\n      return;\n    }\n\n    // Remove the current route from the stack\n    this._prevHistory.shift();\n\n    // Navigate to the previous route\n    Backbone.history.navigate(this._prevHistory.shift(), { trigger: true });\n  },\n});\n","import Radio from 'backbone.radio';\n\nimport App from 'js/base/app';\n\nexport default App.extend({\n  channelName: 'history',\n\n  radioRequests: {\n    'set:latestList': 'setLatestList',\n    'has:latestList': 'hasLatestList',\n    'go:latestList': 'goLatestList',\n  },\n\n  setLatestList(event,\n    /* istanbul ignore next */\n    eventArgs = []) {\n    this._latestList = event;\n    this._latestListArgs = eventArgs;\n  },\n\n  hasLatestList() {\n    return !!this._latestList;\n  },\n\n  goLatestList() {\n    /* istanbul ignore if */\n    if (!this.hasLatestList()) return;\n    Radio.trigger('event-router', this._latestList, ...this._latestListArgs);\n  },\n});\n","import { map, get, debounce, omit } from 'underscore';\nimport dayjs from 'dayjs';\nimport store from 'store';\n\nimport Radio from 'backbone.radio';\n\nimport App from 'js/base/app';\n\nimport { FORM_RESPONSE_STATUS } from 'js/static';\n\nimport { versions } from 'js/config';\n\nfunction getClinicians(teamId) {\n  if (teamId) {\n    const team = Radio.request('entities', 'teams:model', teamId);\n    return team.getAssignableClinicians();\n  }\n\n  const currentWorkspace = Radio.request('workspace', 'current');\n  return currentWorkspace.getAssignableClinicians();\n}\n\nexport default App.extend({\n  startAfterInitialized: true,\n  channelName() {\n    return `form${ this.getOption('form').id }`;\n  },\n  channelRequest() {\n    if (this.isDestroyed()) return;\n\n    const channel = this.getChannel();\n\n    return channel.request(...arguments);\n  },\n  initialize(options) {\n    this.updateDraft = debounce(this.updateDraft, 15000);\n    this.refreshForm = debounce(this.refreshForm, 1800000);\n\n    this.mergeOptions(options, ['action', 'form', 'patient', 'responses', 'latestResponse']);\n\n    this.currentUser = Radio.request('bootstrap', 'currentUser');\n  },\n  onBeforeDestroy() {\n    this.updateDraft.cancel();\n    this.refreshForm.cancel();\n  },\n  radioRequests: {\n    'ready:form': 'readyForm',\n    'submit:form': 'submitForm',\n    'fetch:clinicians': 'fetchClinicians',\n    'fetch:directory': 'fetchDirectory',\n    'fetch:form': 'fetchForm',\n    'fetch:form:data': 'fetchFormPrefill',\n    'fetch:form:response': 'fetchFormResponse',\n    'update:storedSubmission': 'updateStoredSubmission',\n    'get:storedSubmission': 'getStoredSubmission',\n    'clear:storedSubmission': 'clearStoredSubmission',\n    'fetch:field': 'fetchField',\n    'update:field': 'updateField',\n    'fetch:icd': 'fetchIcd',\n    'version': 'checkVersion',\n  },\n  readyForm() {\n    this.trigger('ready');\n\n    this.refreshForm();\n  },\n  checkVersion(feVersion) {\n    /* istanbul ignore if: can't test reload */\n    if (feVersion !== versions.frontend) window.location.reload();\n  },\n  isReadOnly() {\n    const isLocked = this.action && this.action.isLocked();\n    const isSubmitRestricted = this.action && !this.action.canSubmit();\n\n    return this.form.isReadOnly() || isLocked || isSubmitRestricted;\n  },\n  getStoreId() {\n    const actionId = get(this.action, 'id');\n    const ids = [this.currentUser.id, this.patient.id, this.form.id];\n    if (actionId) ids.push(actionId);\n    return `form-subm-${ ids.join('-') }`;\n  },\n  getLatestDraft() {\n    if (this.responses) {\n      // NOTE: latestResponse is for the currentUser\n      // If the first response is not the latestResponse, the draft is invalidated\n      if (this.responses.first() !== this.latestResponse) return {};\n    }\n\n    return (this.latestResponse && this.latestResponse.getDraft()) || {};\n  },\n  getStoredSubmission() {\n    const draft = this.getLatestDraft();\n    const localDraft = store.get(this.getStoreId()) || {};\n\n    if (draft.updated && (!localDraft.updated || dayjs(draft.updated).isAfter(localDraft.updated))) {\n      this.trigger('update:submission', draft.updated);\n      return draft;\n    }\n\n    if (localDraft.updated) this.trigger('update:submission', localDraft.updated);\n    return localDraft;\n  },\n  updateStoredSubmission(submission) {\n    /* istanbul ignore if: difficult to test read only submission change */\n    if (this.isReadOnly()) return;\n\n    const updated = dayjs().format();\n\n    // Cache the draft for debounced updateDraft\n    this._draft = submission;\n\n    try {\n      store.set(this.getStoreId(), { submission, updated });\n      this.trigger('update:submission', updated);\n    } catch /* istanbul ignore next: Tested locally, test runner borks on CI */ {\n      store.each((value, key) => {\n        if (String(key).startsWith('form-subm-')) store.remove(key);\n      });\n      store.set(this.getStoreId(), { submission, updated });\n    }\n\n    this.updateDraft();\n    this.refreshForm();\n  },\n  clearStoredSubmission() {\n    this.latestResponse = null;\n    store.remove(this.getStoreId());\n    this.trigger('update:submission');\n  },\n  fetchField({ fieldName, requestId }) {\n    const field = Radio.request('entities', 'patientFields:model', {\n      name: fieldName,\n      _patient: this.patient.id,\n    });\n\n    return field.fetch()\n      .then(() => {\n        this.channelRequest('send', 'fetch:field', { value: field.get('value'), requestId });\n      })\n      .catch(({ responseData }) => {\n        this.channelRequest('send', 'fetch:field', { error: responseData, requestId });\n      });\n  },\n  updateField({ fieldName, value, requestId }) {\n    const field = Radio.request('entities', 'patientFields:model', {\n      name: fieldName,\n      value,\n      _patient: this.patient.id,\n    });\n\n    return field.saveAll()\n      .then(() => {\n        this.channelRequest('send', 'update:field', { value: field.get('value'), requestId });\n      })\n      .catch(({ responseData }) => {\n        this.channelRequest('send', 'update:field', { error: responseData, requestId });\n      });\n  },\n  fetchClinicians({ teamId, requestId }) {\n    const clinicians = getClinicians(teamId);\n\n    this.channelRequest('send', 'fetch:directory', { value: clinicians.toJSON(), requestId });\n  },\n  fetchDirectory({ directoryName, query, requestId }) {\n    return Promise.resolve(Radio.request('entities', 'fetch:directories:model', directoryName, query))\n      .then(directory => {\n        this.channelRequest('send', 'fetch:directory', { value: directory.get('value'), requestId });\n      })\n      .catch(({ responseData }) => {\n        this.channelRequest('send', 'fetch:directory', { error: responseData, requestId });\n      });\n  },\n  fetchIcd({ by, requestId }) {\n    return Promise.resolve(Radio.request('entities', 'fetch:icd', by))\n      .then(icd => {\n        this.channelRequest('send', 'fetch:icd', { value: get(icd, ['data', 'icdCodes']), requestId });\n      })\n      .catch(({ responseData }) => {\n        this.channelRequest('send', 'fetch:icd', { error: responseData, requestId });\n      });\n  },\n  fetchForm() {\n    return Promise.resolve(Radio.request('entities', 'fetch:forms:definition', this.form.id))\n      .then(definition => {\n        this.channelRequest('send', 'fetch:form', {\n          definition,\n          contextScripts: this.form.getContextScripts(),\n        });\n      });\n  },\n  fetchFormStoreSubmission({ submission }) {\n    return Promise.all([\n      Radio.request('entities', 'fetch:forms:definition', this.form.id),\n    ]).then(([definition]) => {\n      this.channelRequest('send', 'fetch:form:data', {\n        definition,\n        storedSubmission: submission,\n        ...omit(this.form.getContext(), 'loaderReducers'),\n      });\n    });\n  },\n  _getPrefillFilters({ flowId, patientId }, form) {\n    const opts = {\n      status: FORM_RESPONSE_STATUS.SUBMITTED,\n      flow: flowId,\n      patient: patientId,\n    };\n\n    const isReport = form.isReport();\n\n    if (isReport) opts.submitted = `<=${ this.action.get('created_at') }`;\n\n    const prefillActionTag = form.getPrefillActionTag();\n\n    if (prefillActionTag) {\n      opts['action.tags'] = prefillActionTag;\n\n      return opts;\n    }\n\n    opts.form = form.getPrefillFormId();\n\n    return opts;\n  },\n  fetchLatestFormSubmission(flowId) {\n    const isReadOnly = this.isReadOnly();\n    const actionId = get(this.action, 'id');\n    const patientId = this.patient.id;\n\n    const filter = this._getPrefillFilters({ flowId, patientId }, this.form);\n\n    return Promise.all([\n      Radio.request('entities', 'fetch:forms:definition', this.form.id),\n      Radio.request('entities', 'fetch:forms:data', actionId, patientId, this.form.id),\n      Radio.request('entities', 'fetch:formResponses:latest', filter),\n    ]).then(([definition, data, response]) => {\n      this.channelRequest('send', 'fetch:form:data', {\n        definition,\n        isReadOnly,\n        formData: data.attributes,\n        responseData: response.getFormData(),\n        formSubmission: response.getResponse(),\n        ...this.form.getContext(),\n      });\n    });\n  },\n  fetchFormPrefill() {\n    const storedSubmission = this.getStoredSubmission();\n    const isReadOnly = this.isReadOnly();\n\n    if (!isReadOnly && storedSubmission.updated) {\n      return this.fetchFormStoreSubmission(storedSubmission);\n    }\n\n    const firstResponse = this.responses && this.responses.getFirstSubmission();\n\n    if (!firstResponse && this.action) {\n      if (this.action.hasTag('prefill-latest-response')) return this.fetchLatestFormSubmission();\n      if (this.action.hasTag('prefill-flow-response')) return this.fetchLatestFormSubmission(this.action.get('_flow'));\n    }\n\n    return Promise.all([\n      Radio.request('entities', 'fetch:forms:definition', this.form.id),\n      Radio.request('entities', 'fetch:forms:data', get(this.action, 'id'), this.patient.id, this.form.id),\n      Radio.request('entities', 'fetch:formResponses:model', get(firstResponse, 'id')),\n    ]).then(([definition, data, response]) => {\n      this.channelRequest('send', 'fetch:form:data', {\n        definition,\n        isReadOnly,\n        formData: data.attributes,\n        responseData: response.getFormData(),\n        formSubmission: response.getResponse(),\n        ...this.form.getContext(),\n      });\n    });\n  },\n  fetchFormResponse({ responseId }) {\n    return Promise.all([\n      Radio.request('entities', 'fetch:forms:definition', this.form.id),\n      Radio.request('entities', 'fetch:formResponses:model', responseId),\n    ]).then(([definition, response]) => {\n      this.channelRequest('send', 'fetch:form:response', {\n        definition,\n        responseData: response.getFormData(),\n        formSubmission: response.getResponse(),\n        contextScripts: this.form.getContextScripts(),\n      });\n    });\n  },\n  useLatestDraft(responseData) {\n    if (!this.latestResponse || this.latestResponse.get('status') !== FORM_RESPONSE_STATUS.DRAFT) return responseData;\n\n    return {\n      ...responseData,\n      id: this.latestResponse.id,\n    };\n  },\n  updateDraft() {\n    const data = this.useLatestDraft({\n      response: { data: this._draft },\n      status: FORM_RESPONSE_STATUS.DRAFT,\n      _form: this.form,\n      _patient: this.patient,\n      _action: this.action,\n    });\n\n    const formResponse = Radio.request('entities', 'formResponses:model', data);\n\n    this.latestResponse = formResponse;\n\n    return formResponse.saveAll()\n      .catch(({ responseData }) => {\n        /* istanbul ignore next: Don't handle non-API errors */\n        if (!responseData) return;\n\n        this.trigger('error', responseData.errors);\n      });\n  },\n  refreshForm() {\n    this.trigger('refresh');\n  },\n  submitForm({ response }) {\n    // Cancel any pending draft updates or stale form refreshes\n    this.updateDraft.cancel();\n    this.refreshForm.cancel();\n\n    const data = this.useLatestDraft({\n      response,\n      status: FORM_RESPONSE_STATUS.SUBMITTED,\n      _form: this.form,\n      _patient: this.patient,\n      _action: this.action,\n    });\n\n    const formResponse = Radio.request('entities', 'formResponses:model', data);\n\n    this.trigger('submit');\n\n    return formResponse.saveAll()\n      .then(() => {\n        // Cancel any draft updates or stale form refreshes that may have been queued while the form was submitting\n        this.updateDraft.cancel();\n        this.refreshForm.cancel();\n        this.clearStoredSubmission();\n        this.trigger('success', formResponse);\n      }).catch(({ responseData }) => {\n        /* istanbul ignore next: Don't handle non-API errors */\n        if (!responseData) return;\n\n        this.trigger('error', responseData.errors);\n\n        const errors = map(responseData.errors, 'detail');\n        this.channelRequest('send', 'form:errors', errors);\n      });\n  },\n});\n","import anime from 'animejs';\n\nfunction animSidebar(targets) {\n  return anime({\n    targets,\n    translateX: [{ value: 20, duration: 0 }, { value: 0, duration: 200 }],\n    opacity: [{ value: 0, duration: 0 }, { value: 1, duration: 300 }],\n    easing: 'easeInOutQuad',\n  });\n}\n\nexport {\n  animSidebar,\n};\n","\n            import HandlebarsRuntime from 'handlebars/runtime';\n            export default HandlebarsRuntime.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"modal__header-icon\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"fa\")||(depth0 && lookupProperty(depth0,\"fa\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"headerIconType\") : depth0),(depth0 != null ? lookupProperty(depth0,\"headerIcon\") : depth0),{\"name\":\"fa\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":53},\"end\":{\"line\":2,\"column\":85}}}))\n    + \"</span>\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<button class=\\\"button--text js-close\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"cancelText\") || (depth0 != null ? lookupProperty(depth0,\"cancelText\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"cancelText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":14,\"column\":60},\"end\":{\"line\":14,\"column\":76}}}) : helper)))\n    + \"</button>\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"modal__header \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"headerClass\") || (depth0 != null ? lookupProperty(depth0,\"headerClass\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"headerClass\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":26},\"end\":{\"line\":1,\"column\":43}}}) : helper)))\n    + \"\\\" data-header-region>\\n  \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"headerIcon\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":2},\"end\":{\"line\":2,\"column\":99}}})) != null ? stack1 : \"\")\n    + \"\\n  <div class=\\\"flex-grow\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"headingText\") || (depth0 != null ? lookupProperty(depth0,\"headingText\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"headingText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":25},\"end\":{\"line\":3,\"column\":42}}}) : helper)))\n    + \"</div>\\n  <button class=\\\"button--icon js-close\\\">\"\n    + alias4((lookupProperty(helpers,\"far\")||(depth0 && lookupProperty(depth0,\"far\"))||alias2).call(alias1,\"xmark\",{\"name\":\"far\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":40},\"end\":{\"line\":4,\"column\":55}}}))\n    + \"</button>\\n</div>\\n\\n<div class=\\\"modal__body\\\" data-body-region>\\n  <div class=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bodyClass\") || (depth0 != null ? lookupProperty(depth0,\"bodyClass\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bodyClass\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":14},\"end\":{\"line\":8,\"column\":29}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bodyText\") || (depth0 != null ? lookupProperty(depth0,\"bodyText\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bodyText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":31},\"end\":{\"line\":8,\"column\":45}}}) : helper)))\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"bodyHTML\") || (depth0 != null ? lookupProperty(depth0,\"bodyHTML\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bodyHTML\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":45},\"end\":{\"line\":8,\"column\":61}}}) : helper))) != null ? stack1 : \"\")\n    + \"</div>\\n</div>\\n\\n<div class=\\\"modal__footer\\\" data-footer-region>\\n  <div class=\\\"modal__footer-actions\\\">\\n    <button type=\\\"submit\\\" class=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"buttonClass\") || (depth0 != null ? lookupProperty(depth0,\"buttonClass\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"buttonClass\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":33},\"end\":{\"line\":13,\"column\":50}}}) : helper)))\n    + \" js-submit\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"submitText\") || (depth0 != null ? lookupProperty(depth0,\"submitText\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"submitText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":62},\"end\":{\"line\":13,\"column\":78}}}) : helper)))\n    + \"</button>\\n    \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"cancelText\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":14,\"column\":4},\"end\":{\"line\":14,\"column\":92}}})) != null ? stack1 : \"\")\n    + \"\\n  </div>\\n  <div data-info-region class=\\\"modal__footer-info\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"infoText\") || (depth0 != null ? lookupProperty(depth0,\"infoText\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"infoText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":51},\"end\":{\"line\":16,\"column\":65}}}) : helper)))\n    + \"</div>\\n</div>\\n\";\n},\"useData\":true});\n          ","\n            import HandlebarsRuntime from 'handlebars/runtime';\n            export default HandlebarsRuntime.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"loading-modal__content is-animated\\\">\\n  <div>\"\n    + container.escapeExpression(container.lambda(((stack1 = ((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"modal\"))) && lookupProperty(stack1,\"loading\"))) && lookupProperty(stack1,\"loadingModal\"))) && lookupProperty(stack1,\"headerText\")), depth0))\n    + \"</div>\\n  <div class=\\\"loading-modal__bar\\\">\\n    <div class=\\\"loading-modal__bar-progress\\\"></div>\\n  </div>\\n</div>\\n\";\n},\"useData\":true});\n          ","import { extend, delay } from 'underscore';\nimport hbs from 'handlebars-inline-precompile';\nimport { View, Region } from 'marionette';\n\nimport 'scss/modules/buttons.scss';\nimport 'scss/modules/modals.scss';\n\nimport './loading/loading_modal.scss';\n\nimport intl from 'js/i18n';\n\nimport { animSidebar } from 'js/anim';\n\nimport PreloadRegion from 'js/regions/preload_region';\n\nimport IframeFormBehavior from 'js/behaviors/iframe-form';\n\nimport ModalTemplate from './modal.hbs';\nimport LoadingModalTemplate from './loading/loading_modal.hbs';\n\nconst i18n = intl.globals.modal.modalViews;\n\nconst ReplaceElRegion = Region.extend({ replaceElement: true, timeout: 0 });\n\nconst ModalView = View.extend({\n  className: 'modal',\n  buttonClass: 'button--green',\n  bodyClass: 'modal__content',\n  headerIconType: 'far',\n  cancelText: i18n.modalView.cancelText,\n  submitText: i18n.modalView.submitText,\n  regionClass: ReplaceElRegion,\n  regions: {\n    header: '[data-header-region]',\n    body: {\n      el: '[data-body-region]',\n      regionClass: PreloadRegion.extend({ timeout: 0 }),\n    },\n    footer: '[data-footer-region]',\n    info: '[data-info-region]',\n  },\n  childViewTriggers: {\n    'cancel': 'cancel',\n    'submit': 'submit',\n  },\n  triggers: {\n    'click @ui.close': 'cancel',\n    'click @ui.submit': 'submit',\n  },\n  ui: {\n    close: '.js-close',\n    submit: '.js-submit',\n  },\n  serializeData() {\n    // Passes data on the view to the template\n    return extend({}, this);\n  },\n  template: ModalTemplate,\n  initialize() {\n    if (this.headerView) this.showChildView('header', this.headerView);\n    if (this.bodyView) this.showChildView('body', this.bodyView);\n    if (this.footerView) this.showChildView('footer', this.footerView);\n  },\n  onSubmit() {\n    this.destroy();\n  },\n  onCancel() {\n    this.destroy();\n  },\n  disableSubmit(disable = true) {\n    this.ui.submit.prop('disabled', disable);\n  },\n  startPreloader() {\n    this.getRegion('body').startPreloader();\n  },\n});\n\nconst SidebarModalView = ModalView.extend({\n  className: 'modal--sidebar',\n  bodyClass: 'modal__content--sidebar',\n  headerClass: 'modal__header--sidebar',\n  onAttach() {\n    animSidebar(this.el);\n  },\n});\n\nconst SmallModalView = ModalView.extend({\n  className: 'modal--small',\n  bodyClass: 'modal__content--small',\n  headerClass: 'modal__header--small',\n});\n\nconst IframeFormView = View.extend({\n  behaviors: [IframeFormBehavior],\n  className() {\n    const size = this.getOption('size');\n\n    if (size === 'small') return 'modal__form-iframe--small';\n    if (size === 'large') return 'modal__form-iframe--large';\n\n    return 'modal__form-iframe';\n  },\n  template: hbs`<iframe src=\"/formapp/\"></iframe>`,\n});\n\n\nconst LoadingModalView = View.extend({\n  className: 'pos--absolute',\n  template: LoadingModalTemplate,\n  onAttach() {\n    delay(() => {\n      this.destroy();\n    }, 5000);\n  },\n});\n\nexport {\n  ModalView,\n  SidebarModalView,\n  SmallModalView,\n  IframeFormView,\n  LoadingModalView,\n};\n","import Radio from 'backbone.radio';\nimport App from 'js/base/app';\n\nimport FormsService from 'js/services/forms';\n\nimport { ModalView, SidebarModalView, SmallModalView, IframeFormView, LoadingModalView } from 'js/views/globals/modal/modal_views';\n\nexport default App.extend({\n  channelName: 'modal',\n  radioRequests: {\n    'show': 'showModal',\n    'show:small': 'showSmall',\n    'show:custom': 'showCustom',\n    'show:sidebar': 'showSidebar',\n    'show:form': 'showForm',\n    'show:loading': 'showLoading',\n  },\n  initialize({ modalRegion, modalSmallRegion, modalSidebarRegion, modalLoadingRegion }) {\n    this.modalRegion = modalRegion;\n    this.modalSmallRegion = modalSmallRegion;\n    this.modalSidebarRegion = modalSidebarRegion;\n    this.modalLoadingRegion = modalLoadingRegion;\n  },\n  showModal(options) {\n    const ConfirmModal = ModalView.extend(options);\n    const view = new ConfirmModal();\n\n    this.modalRegion.show(view);\n\n    return view;\n  },\n  showSmall(options) {\n    const ConfirmModal = SmallModalView.extend(options);\n    const view = new ConfirmModal();\n\n    this.modalSmallRegion.show(view);\n\n    return view;\n  },\n  showCustom(view) {\n    this.modalRegion.show(view);\n    return view;\n  },\n  showSidebar(options) {\n    const SidebarModal = SidebarModalView.extend(options);\n    const view = new SidebarModal();\n\n    this.modalSidebarRegion.show(view);\n\n    return view;\n  },\n  showForm(patient, formName, form, size) {\n    const formService = new FormsService({ patient, form });\n\n    const modal = this.showModal({\n      headingText: formName,\n      headerIcon: 'square-poll-horizontal',\n      bodyView: new IframeFormView({ model: form, size }),\n      onBeforeDestroy() {\n        formService.destroy();\n      },\n      onSubmit() {\n        modal.disableSubmit();\n        Radio.request(`form${ form.id }`, 'send', 'form:submit');\n      },\n    });\n\n    modal.disableSubmit();\n\n    this.listenTo(formService, {\n      'success'() {\n        modal.destroy();\n      },\n      'ready'() {\n        modal.disableSubmit(false);\n      },\n      'error'() {\n        modal.disableSubmit(false);\n      },\n    });\n\n    return modal;\n  },\n  showLoading(options) {\n    const modal = new LoadingModalView(options);\n\n    this.modalLoadingRegion.show(modal);\n\n    return modal;\n  },\n});\n","import { each, values, isArray } from 'underscore';\nimport Backbone from 'backbone';\nimport Radio from 'backbone.radio';\nimport Store from 'backbone.store';\n\nimport App from 'js/base/app';\n\nexport default App.extend({\n  HEART_BEAT_INTERVAL: 50000,\n  channelName: 'ws',\n\n  radioRequests: {\n    'send': 'send',\n    'subscribe': 'subscribe',\n    'subscribe:persist': 'subscribePersist',\n    'unsubscribe': 'unsubscribe',\n  },\n\n  initialize({ url }) {\n    this.resources = new Backbone.Collection();\n    this.persistent = {};\n    this.ws = {};\n    this.url = url;\n  },\n\n  beforeStart() {\n    return Radio.request('auth', 'getToken');\n  },\n\n  onStart({ data }, token) {\n    this.ws = new WebSocket(this.url, token);\n    this.ws.addEventListener('open', this.onOpen.bind(this, data));\n    this.ws.addEventListener('close', this.onClose.bind(this));\n    this.ws.addEventListener('message', this.onMessage.bind(this));\n    this.ws.addEventListener('error', this.onError.bind(this));\n  },\n\n  _subscribe() {\n    const currentUser = Radio.request('bootstrap', 'currentUser');\n\n    this.send({\n      name: 'Subscribe',\n      data: {\n        clientKey: currentUser.clientKey,\n        resources: this.resources.toJSON(),\n      },\n    });\n  },\n\n  send(data) {\n    if (!this.url) return;\n\n    if (this.ws.readyState === WebSocket.OPEN) {\n      this.sendData(data);\n      return;\n    }\n\n    if (this.ws.readyState === WebSocket.CLOSED) {\n      this.restart({ data });\n      return;\n    }\n\n    if (this.ws.readyState !== WebSocket.CONNECTING) {\n      this.start({ data });\n      return;\n    }\n\n    this.ws.addEventListener('open', this.onOpen.bind(this, data));\n  },\n\n  sendData(data) {\n    this.ws.send(JSON.stringify(data));\n  },\n\n  onOpen(data) {\n    this.sendData(data);\n    this.startHeartbeat();\n  },\n\n  startHeartbeat() {\n    this.stopHeartbeat();\n\n    this.heartBeat = setInterval(() => {\n      this.sendData({ name: 'ping' });\n    }, this.HEART_BEAT_INTERVAL);\n  },\n\n  stopHeartbeat() {\n    if (!this.heartBeat) return;\n\n    clearInterval(this.heartBeat);\n    this.heartBeat = null;\n  },\n\n  onClose() {\n    this.stopHeartbeat();\n  },\n\n  onMessage(event) {\n    const channel = this.getChannel();\n\n    const data = JSON.parse(event.data);\n\n    if (data.name === 'pong') return;\n\n    if (data.resource) {\n      const Resource = Store.get(data.resource.type);\n      const resource = new Resource({ id: data.resource.id });\n      resource.handleMessage(data);\n    }\n\n    channel.trigger('message', data);\n  },\n\n  onError(event) {\n    // eslint-disable-next-line no-console\n    console.error(event);\n  },\n\n  subscribe(resources) {\n    this.resources.reset(resources);\n    this.resources.add(values(this.persistent));\n    this._subscribe();\n  },\n\n  subscribePersist(resources) {\n    resources = isArray(resources) ? resources : [resources];\n    each(resources, ({ id, type }) => {\n      this.persistent[id] = { id, type };\n    });\n    this.resources.add(resources);\n    this._subscribe();\n  },\n\n  unsubscribe(resources) {\n    resources = isArray(resources) ? resources : [resources];\n    each(resources, ({ id }) => {\n      delete this.persistent[id];\n    });\n    this.resources.remove(resources);\n    this._subscribe();\n  },\n});\n","\n            import HandlebarsRuntime from 'handlebars/runtime';\n            export default HandlebarsRuntime.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            \"\n    + alias2(alias1(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"error\"))) && lookupProperty(stack1,\"errorTemplate\"))) && lookupProperty(stack1,\"notFoundMessage\")), depth0))\n    + \"<br>\\n            \"\n    + alias2(alias1(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"error\"))) && lookupProperty(stack1,\"errorTemplate\"))) && lookupProperty(stack1,\"notFoundInfo\")), depth0))\n    + \"\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.escapeExpression, alias2=depth0 != null ? depth0 : (container.nullContext || {}), alias3=container.hooks.helperMissing, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            \"\n    + alias1(container.lambda(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"error\"))) && lookupProperty(stack1,\"errorTemplate\"))) && lookupProperty(stack1,\"errorMessage\")), depth0))\n    + \"<br>\\n            \"\n    + alias1((lookupProperty(helpers,\"formatMessage\")||(depth0 && lookupProperty(depth0,\"formatMessage\"))||alias3).call(alias2,(lookupProperty(helpers,\"intlGet\")||(depth0 && lookupProperty(depth0,\"intlGet\"))||alias3).call(alias2,\"globals.error.errorTemplate.errorInfo\",{\"name\":\"intlGet\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":28},\"end\":{\"line\":20,\"column\":77}}}),{\"name\":\"formatMessage\",\"hash\":{\"status\":(depth0 != null ? lookupProperty(depth0,\"status\") : depth0)},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":12},\"end\":{\"line\":20,\"column\":93}}}))\n    + \"\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"error-page__contains\\\">\\n  <div class=\\\"error-page__wrap\\\">\\n    <div class=\\\"error-page__dialog\\\">\\n      <div class=\\\"error-page__section\\\">\\n        <svg class=\\\"svg needs-attention u-margin--b-4\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"32\\\" height=\\\"32\\\" viewBox=\\\"0 0 32 32\\\">\\n          <g></g>\\n          <path d=\\\"M14.983 6.713c0.562-0.951 1.472-0.951 2.034 0l12.738 17.565c0.562 0.951 0.123 1.722-0.982 1.722h-25.548c-1.104 0-1.544-0.771-0.982-1.722l12.738-17.565z\\\" fill=\\\"#E65140\\\" />\\n        </svg>\\n\\n        <h2 class=\\\"error-page__heading\\\">\"\n    + alias2(alias1(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"error\"))) && lookupProperty(stack1,\"errorTemplate\"))) && lookupProperty(stack1,\"errorHeader\")), depth0))\n    + \"</h2>\\n      </div>\\n      <div class=\\\"error-page__section\\\">\\n        <p>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"is404\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":14,\"column\":10},\"end\":{\"line\":17,\"column\":17}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"status\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":18,\"column\":10},\"end\":{\"line\":21,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"        </p>\\n        <a class=\\\"js-back button--blue u-margin--t-16\\\">\"\n    + alias2(alias1(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"error\"))) && lookupProperty(stack1,\"errorTemplate\"))) && lookupProperty(stack1,\"backBtn\")), depth0))\n    + \"</a>\\n      </div>\\n    </div>\\n    <svg class=\\\"svg roundingwell-logo u-margin--t-16\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"116\\\" height=\\\"21\\\" viewBox=\\\"0 0 185 32\\\">\\n      <g></g>\\n      <path d=\\\"M40.975 11.456c-1.339 0.082-2.624 0.683-3.499 1.995v8.501c0 0.547-0.465 1.011-1.039 1.011h-0.027c-0.547-0.027-0.984-0.465-0.984-1.011v-11.535c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v1.312c0.793-1.039 2.105-2.351 3.635-2.351 0.492 0 0.929 0.41 0.929 0.957 0 0.602-0.465 1.093-1.066 1.121z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M49.53 23.128c-4.018 0-6.533-3.116-6.533-6.943 0-3.827 2.515-6.916 6.533-6.916s6.533 3.089 6.533 6.916c0 3.826-2.514 6.943-6.533 6.943zM49.53 11.101c-2.815 0-4.401 2.406-4.401 5.084 0 2.706 1.585 5.111 4.401 5.111 2.815 0 4.373-2.406 4.373-5.111 0-2.679-1.558-5.084-4.373-5.084z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M68.636 22.964c-0.547 0-1.011-0.465-1.011-1.011v-1.011c-1.011 1.148-2.733 2.187-4.701 2.187-2.761 0-4.209-1.34-4.209-4.21v-8.501c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v7.872c0 2.323 1.175 3.007 2.952 3.007 1.613 0 3.143-0.929 3.909-1.995v-8.883c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v11.535c0 0.546-0.465 1.011-1.039 1.011z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M83.013 22.964c-0.547 0-1.011-0.465-1.011-1.011v-7.79c0-2.323-1.175-3.062-2.952-3.062-1.613 0-3.143 0.984-3.909 2.050v8.801c0 0.547-0.465 1.011-1.039 1.011-0.547 0-1.011-0.465-1.011-1.011v-11.535c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v1.093c0.929-1.093 2.733-2.242 4.701-2.242 2.761 0 4.21 1.394 4.21 4.264v8.419c-0 0.547-0.465 1.012-1.039 1.012z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M98.046 22.964c-0.547 0-1.011-0.465-1.011-1.011v-1.121c-0.984 1.34-2.597 2.296-4.455 2.296-3.444 0-5.877-2.624-5.877-6.915 0-4.21 2.405-6.943 5.877-6.943 1.777 0 3.389 0.875 4.455 2.324v-6.205c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v16.564c0 0.547-0.464 1.012-1.038 1.012zM97.035 13.233c-0.738-1.148-2.324-2.132-3.964-2.132-2.651 0-4.237 2.187-4.237 5.112 0 2.924 1.585 5.084 4.237 5.084 1.64 0 3.226-0.929 3.964-2.077v-5.986z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M103.512 22.964c-0.546 0-1.011-0.465-1.011-1.011v-11.535c0-0.519 0.465-0.984 1.066-0.984 0.52 0 0.984 0.465 0.984 0.984v11.535c0 0.547-0.465 1.012-1.039 1.012z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M117.89 22.964c-0.547 0-1.012-0.465-1.012-1.011v-7.79c0-2.323-1.175-3.062-2.952-3.062-1.613 0-3.143 0.984-3.909 2.050v8.801c0 0.547-0.464 1.011-1.038 1.011-0.547 0-1.011-0.465-1.011-1.011v-11.535c0-0.519 0.464-0.984 1.066-0.984 0.52 0 0.984 0.465 0.984 0.984v1.093c0.93-1.093 2.734-2.242 4.702-2.242 2.76 0 4.209 1.394 4.209 4.264v8.419c0 0.547-0.464 1.012-1.038 1.012z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M127.647 28.157c-1.941 0-3.499-0.355-4.947-1.585-0.191-0.164-0.301-0.41-0.301-0.684 0-0.465 0.41-0.875 0.902-0.875 0.218 0 0.41 0.055 0.574 0.191 1.039 0.929 2.214 1.257 3.772 1.257 2.187 0 4.237-1.066 4.237-3.964v-1.886c-0.957 1.34-2.57 2.351-4.428 2.351-3.444 0-5.876-2.569-5.876-6.833 0-4.237 2.405-6.861 5.876-6.861 1.777 0 3.362 0.875 4.428 2.324v-1.175c0-0.519 0.464-0.984 1.066-0.984 0.52 0 0.984 0.465 0.984 0.984v11.999c0 4.373-3.061 5.74-6.286 5.74zM131.884 13.233c-0.711-1.148-2.296-2.132-3.936-2.132-2.652 0-4.237 2.105-4.237 5.030 0 2.897 1.585 5.029 4.237 5.029 1.64 0 3.225-1.011 3.936-2.16v-5.767z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M155.309 11.237l-3.198 10.332c-0.246 0.82-1.039 1.394-1.886 1.394h-0.055c-0.875 0-1.64-0.574-1.886-1.394l-2.652-8.391-2.651 8.391c-0.246 0.82-1.039 1.394-1.913 1.394h-0.055c-0.848 0-1.613-0.574-1.859-1.394l-3.225-10.332c-0.027-0.137-0.055-0.273-0.055-0.41 0-0.684 0.574-1.394 1.449-1.394 0.629 0 1.23 0.41 1.394 1.011l2.515 8.665 2.788-8.528c0.219-0.683 0.848-1.148 1.64-1.148 0.711 0 1.34 0.465 1.585 1.148l2.788 8.528 2.514-8.665c0.164-0.601 0.766-1.011 1.395-1.011 0.847 0 1.449 0.656 1.449 1.394-0.001 0.137-0.028 0.273-0.083 0.41z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M168.073 17.141h-8.692c0.191 1.968 1.695 3.635 4.155 3.635 0.956 0 2.049-0.3 2.952-0.875 0.191-0.109 0.41-0.164 0.601-0.164 0.602 0 1.23 0.492 1.23 1.202 0 1.503-3.389 2.187-5.084 2.187-3.964 0-6.915-2.761-6.915-6.943 0-3.827 2.788-6.916 6.697-6.916 3.089 0 5.33 1.859 6.15 4.701 0.164 0.547 0.328 1.175 0.328 1.749 0 0.765-0.629 1.421-1.421 1.421zM163.017 11.62c-2.406 0-3.526 1.913-3.663 3.499h7.326c-0.055-1.53-1.094-3.499-3.663-3.499z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M173.129 22.964c-0.82 0-1.449-0.656-1.449-1.449v-15.689c0-0.765 0.629-1.421 1.503-1.421 0.766 0 1.422 0.656 1.422 1.421v15.689c-0 0.793-0.656 1.449-1.477 1.449z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M179.060 22.964c-0.82 0-1.449-0.656-1.449-1.449v-15.689c0-0.765 0.629-1.421 1.503-1.421 0.766 0 1.422 0.656 1.422 1.421v15.689c-0 0.793-0.656 1.449-1.477 1.449z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M28.781 14.834c-0.117-1.519-0.498-3.012-1.117-4.385-0.618-1.374-1.471-2.627-2.501-3.694-1.030-1.068-2.235-1.949-3.546-2.598-1.311-0.651-2.727-1.067-4.16-1.23-1.432-0.164-2.878-0.081-4.264 0.24-1.385 0.321-2.702 0.883-3.877 1.644-1.175 0.761-2.208 1.719-3.046 2.814-0.838 1.094-1.481 2.325-1.893 3.618-0.414 1.293-0.596 2.648-0.55 3.983l0.263 0.003c0.076-1.305 0.375-2.585 0.879-3.768 0.503-1.183 1.208-2.268 2.067-3.196 0.858-0.929 1.87-1.701 2.971-2.277 1.102-0.576 2.294-0.955 3.505-1.118 1.209-0.164 2.442-0.116 3.617 0.132 1.176 0.247 2.296 0.697 3.299 1.318 1.004 0.62 1.89 1.411 2.614 2.318 0.724 0.907 1.283 1.93 1.649 3.006 0.367 1.076 0.54 2.204 0.521 3.323-0.020 1.122-0.23 2.224-0.617 3.247-0.386 1.024-0.949 1.969-1.648 2.787-0.699 0.818-1.534 1.507-2.449 2.031-0.915 0.525-1.91 0.883-2.925 1.061-1.014 0.178-2.057 0.177-3.060 0.007-1.001-0.169-1.954-0.509-2.815-0.996-0.295-0.167-0.578-0.352-0.85-0.551l4.686-7.132-0.102-0.083-10.27 10.316 0.106 0.099c0.083 0.076 0.156 0.142 0.236 0.211 0.157 0.137 0.318 0.271 0.48 0.401 0.326 0.261 0.662 0.506 1.008 0.737 0.201 0.134 0.405 0.263 0.613 0.386 0.506 0.302 1.029 0.573 1.566 0.81 1.513 0.669 3.135 1.066 4.76 1.18 0.813 0.057 1.622 0.045 2.428-0.035 0.805-0.080 1.603-0.229 2.379-0.445 1.554-0.431 3.020-1.132 4.315-2.052 1.296-0.918 2.423-2.054 3.321-3.338 0.9-1.283 1.572-2.715 1.978-4.21 0.408-1.495 0.548-3.048 0.429-4.565z\\\" fill=\\\"#cccccc\\\" />\\n    </svg>\\n  </div>\\n</div>\\n\";\n},\"useData\":true});\n          ","import Radio from 'backbone.radio';\nimport { View } from 'marionette';\n\nimport 'scss/modules/buttons.scss';\n\nimport ErrorTemplate from './error.hbs';\n\nimport './error.scss';\n\nconst ErrorView = View.extend({\n  className: 'error-page',\n  template: ErrorTemplate,\n  triggers: {\n    'click .js-back': 'click:back',\n  },\n  onClickBack() {\n    Radio.trigger('event-router', 'default');\n  },\n  templateContext() {\n    return this.options;\n  },\n});\n\nexport {\n  ErrorView,\n};\n","import { bind, contains } from 'underscore';\nimport Radio from 'backbone.radio';\n\nimport RouterApp from 'js/base/routerapp';\n\nimport getRootRoute from 'js/utils/root-route';\n\nimport { ErrorView } from 'js/views/globals/error/error_views';\n\nconst legacyRoots = [\n  'worklist',\n  'patient',\n  'patient-action',\n  'flow',\n  'schedule',\n  'clinicians',\n  'dashboards',\n  'form',\n  'program',\n  'programs',\n  'program-flow',\n];\n\nexport default RouterApp.extend({\n  eventRoutes: {\n    'notFound': {\n      action: 'show404',\n      route: '404',\n      root: true,\n    },\n    'unknownError': {\n      action: 'showError',\n      route: 'unknown-error',\n      root: true,\n    },\n  },\n\n  initialize() {\n    this.router.route('*unknown', '404', bind(this.handleUnknown, this));\n  },\n\n  viewEvents: {\n    'click:back': 'stop',\n  },\n\n  onBeforeStop() {\n    this.getRegion().empty();\n  },\n\n  handleUnknown() {\n    const rootRoute = getRootRoute();\n    if (contains(legacyRoots, rootRoute)) {\n      const workspace = Radio.request('workspace', 'current');\n      this.replaceUrl(`/${ workspace.get('slug') }${ location.pathname }`);\n      return;\n    }\n\n    this.start();\n    this.show404();\n  },\n  show404() {\n    this.showView(new ErrorView({ is404: true }));\n  },\n  showError(status) {\n    this.showView(new ErrorView({ status }));\n  },\n});\n\n","export default num => {\n  return `${ parseFloat(num) }px`;\n};\n","import { bind } from 'underscore';\nimport Radio from 'backbone.radio';\nimport { Behavior } from 'marionette';\n\nimport 'scss/modules/fill-window.scss';\n\nconst userActivityCh = Radio.channel('user-activity');\nconst topRegionCh = Radio.channel('top-region');\n\nexport default Behavior.extend({\n  regionName: 'region',\n  className: 'fill-window',\n  initialize(options) {\n    this.mergeOptions(options, ['regionName', 'className']);\n  },\n  onInitialize() {\n    this.region = this.view.getRegion(this.regionName);\n    this.listenTo(this.region, {\n      'empty': bind(this.view.triggerMethod, this.view, 'region:empty'),\n      'show': bind(this.view.triggerMethod, this.view, 'region:show'),\n    });\n  },\n  onRegionShow() {\n    this.listenTo(userActivityCh, 'body:down', this.onBodyDown);\n    this.listenTo(userActivityCh, 'iframe:focus', this.onIframeFocus);\n    this.$el.addClass(this.className);\n  },\n  onRegionEmpty() {\n    this.stopListening(userActivityCh);\n    if (!this.region.isSwappingView()) this.$el.removeClass(this.className);\n  },\n  onBodyDown({ target }) {\n    this.emptyOnActvity(target);\n  },\n  onIframeFocus(iframeEl) {\n    this.emptyOnActvity(iframeEl);\n  },\n  emptyOnActvity(el) {\n    if (!this.region.hasView() || topRegionCh.request('contains', this.view, el)) return;\n\n    this.region.empty();\n  },\n});\n","import { extend, noop, partial } from 'underscore';\nimport Radio from 'backbone.radio';\nimport hbs from 'handlebars-inline-precompile';\nimport { View, CollectionView, Region } from 'marionette';\n\nimport px from 'js/utils/formatting/px';\n\nimport 'scss/modules/fill-window.scss';\n\nimport PreloadRegion from 'js/regions/preload_region';\nimport TopRegionBehavior from 'js/behaviors/top-region';\n\nimport { PreloaderView } from 'js/views/globals/prelogin/prelogin_views';\n\nimport './app-frame.scss';\nimport './tooltip.scss';\n\nconst userActivityCh = Radio.channel('user-activity');\nconst historyCh = Radio.channel('history');\n\nfunction preventRegionClose() {\n  return this.getRegion('region').hasView();\n}\n\nconst AppView = View.extend({\n  className: 'app-frame',\n  template: hbs`\n    <div class=\"app-frame__nav js-nav\" data-nav-region></div>\n    <div class=\"app-frame__content flex-region\" data-content-region></div>\n    <div class=\"app-frame__sidebar\" data-sidebar-region></div>\n  `,\n  ui: {\n    nav: '.js-nav',\n  },\n  regions: {\n    nav: '[data-nav-region]',\n    content: {\n      el: '[data-content-region]',\n      regionClass: PreloadRegion,\n    },\n    sidebar: '[data-sidebar-region]',\n  },\n  toggleNav(shouldShow) {\n    this.ui.nav.toggleClass('is-hidden', !shouldShow);\n  },\n});\n\nconst TopRegionView = View.extend({\n  behaviors: [TopRegionBehavior],\n  regionClass: Region.extend({ replaceElement: true }),\n  template: hbs`<div data-region></div>`,\n  regions: {\n    region: '[data-region]',\n  },\n  contains(target) {\n    const region = this.getRegion('region');\n    if (region.hasView() && (region.currentView.el === target || this.Dom.hasEl(region.currentView.el, target))) return true;\n    if (this.ignoreEl === target) return true;\n    if (this.ignoreEl && this.Dom.hasEl(this.ignoreEl, target)) return true;\n  },\n  empty() {\n    this.region.empty();\n  },\n});\n\nconst PreloaderRegionView = TopRegionView.extend({\n  // NOTE: ensures preload can't close on user click\n  contains: preventRegionClose,\n  onRender() {\n    this.showChildView('region', new PreloaderView());\n  },\n});\n\nconst ModalRegionView = TopRegionView.extend({\n  className: 'fill-window--dark',\n  behaviors: [{\n    behaviorClass: TopRegionBehavior,\n    className: 'is-shown',\n  }],\n  initialize(options) {\n    this.mergeOptions(options, ['$body', 'setLocation', 'contains']);\n    this.region = this.getRegion('region');\n\n    const hotkeyCh = Radio.channel('hotkey');\n    this.listenTo(hotkeyCh, 'close', this.empty);\n  },\n  onRegionShow() {\n    this.listenTo(historyCh, 'change:route', this.empty);\n    this.listenTo(userActivityCh, 'window:resize', this.setLocation);\n    this.setLocation();\n  },\n  onRegionEmpty() {\n    this.stopListening(userActivityCh);\n  },\n  setLocation() {\n    const view = this.region.currentView;\n    const width = view.$el.outerWidth();\n    const height = view.$el.outerHeight();\n    const bodyHeight = this.$body.height();\n    const bodyWidth = this.$body.width();\n\n    const left = bodyWidth / 2 - width / 2;\n    const top = bodyHeight / 3 - height / 3;\n\n    view.$el.css({\n      left: px(left),\n      top: px(top),\n    });\n  },\n  contains(target, testView) {\n    if (!this.region.hasView()) return false;\n\n    const el = this.region.currentView.el;\n\n    // testView prevents closing layers below\n    if (el === target || this.Dom.hasEl(el, target) || this !== testView) return true;\n  },\n});\n\nconst popDefaults = {\n  align: 'left',\n  direction: 'down',\n  left: 0,\n  outerHeight: 0,\n  outerWidth: 0,\n  popWidth: null,\n  top: 0,\n  windowPadding: 5,\n};\n\nconst PopRegionView = TopRegionView.extend({\n  initialize({ $body }) {\n    this.region = this.getRegion('region');\n    this.$body = $body;\n    const hotkeyCh = Radio.channel('hotkey');\n    this.listenTo(hotkeyCh, 'close', this.empty);\n  },\n  onRegionShow(region, view, options) {\n    view.$el.addClass('app-frame__pop-region');\n    const popOptions = extend({}, popDefaults, options);\n    this.ignoreEl = options.ignoreEl;\n    this.listenTo(userActivityCh, 'window:resize', this.empty);\n    this.listenTo(historyCh, 'change:route', this.empty);\n    this.listenTo(view, 'render render:children', partial(this.setLocation, popOptions));\n    this.setLocation(popOptions);\n  },\n  onRegionEmpty(region, view) {\n    view.$el.removeClass('app-frame__pop-region');\n    this.stopListening(userActivityCh);\n    this.stopListening(historyCh);\n    this.stopListening(view);\n  },\n  setLocation(popOptions) {\n    const view = this.region.currentView;\n\n    if (popOptions.popWidth) {\n      view.$el.css({\n        width: px(popOptions.popWidth),\n      });\n    }\n\n    const height = view.$el.outerHeight();\n    const top = this.setDirection(height, popOptions);\n    const width = popOptions.popWidth || view.$el.outerWidth();\n    const left = this.setAlign(width, popOptions);\n\n    view.$el.css({\n      top: px(top),\n      left: px(left),\n    });\n  },\n  setAlign(width, { left, align, windowPadding, outerWidth }) {\n    if (align === 'right') left += outerWidth - width;\n    if (left < windowPadding) return windowPadding;\n\n    const bodyWidth = this.$body.width();\n    if (left + width > bodyWidth - windowPadding) {\n      return bodyWidth - width - windowPadding;\n    }\n    return left;\n  },\n  /* istanbul ignore next: difficult to test in context */\n  setDirection(height, { top, direction, windowPadding, outerHeight }) {\n    const bodyHeight = this.$body.height();\n\n    if (direction === 'down') {\n      if (top + outerHeight + height + windowPadding > bodyHeight) {\n        direction = 'forceUp';\n        return this.setDirection(height, { top, direction, windowPadding, outerHeight });\n      }\n\n      return outerHeight + top;\n    }\n\n    top -= height;\n    if (top >= windowPadding) return top;\n\n    if (direction === 'forceUp') {\n      return bodyHeight - windowPadding - height;\n    }\n\n    direction = 'down';\n    return this.setDirection(height, { top, direction, windowPadding, outerHeight });\n  },\n});\n\nconst TooltipRegionView = TopRegionView.extend({\n  initialize({ $body }) {\n    this.region = this.getRegion('region');\n    this.$body = $body;\n  },\n  onRegionShow(region, view, options) {\n    this.listenTo(userActivityCh, 'window:resize', this.empty);\n\n    this.ignoreEl = options.ignoreEl;\n\n    if (options.orientation === 'horizontal') {\n      this.setHorizontalLocation(options);\n      return;\n    }\n\n    this.setVerticalLocation(options);\n  },\n  onRegionEmpty(options) {\n    this.stopListening(userActivityCh);\n  },\n  addClass(className) {\n    const view = this.region.currentView;\n    view.$el.addClass(className);\n  },\n  setTop(top) {\n    const view = this.region.currentView;\n    view.$el.css({ top: px(top) });\n  },\n  setLeft(left) {\n    const view = this.region.currentView;\n    view.$el.css({ left: px(left) });\n  },\n  setHorizontalLocation({ left, top, outerWidth, outerHeight }) {\n    const view = this.region.currentView;\n    const leftPer = (left + outerWidth) / this.$body.width();\n    const topPer = (top + outerHeight / 2) / this.$body.height();\n\n    // top 25% of screen\n    if (topPer < 0.25) {\n      this.addClass('is-top');\n      this.setTop(top + outerHeight / 2);\n    // bottom 25% of screen\n    } else if (topPer > 0.75) {\n      this.addClass('is-bottom');\n      this.setTop(top + outerHeight / 2 - view.$el.outerHeight());\n    } else {\n      this.setTop(top - view.$el.outerHeight() / 2 + outerHeight / 2);\n    }\n\n    // left 60% of screen\n    if (leftPer > 0.6) {\n      this.addClass('is-right-arrow');\n      this.setLeft(left - view.$el.outerWidth());\n    // right 40% of screen\n    } else {\n      this.addClass('is-left-arrow');\n      this.setLeft(left + outerWidth);\n    }\n  },\n  setVerticalLocation({ left, top, outerWidth, outerHeight }) {\n    const view = this.region.currentView;\n    const leftPer = (left + outerWidth / 2) / this.$body.width();\n    const topPer = (top + outerHeight) / this.$body.height();\n\n    // left 15% of screen\n    if (leftPer < 0.15) {\n      this.addClass('is-left');\n      this.setLeft(left + outerWidth / 2);\n    // right 15% of screen\n    } else if (leftPer > 0.85) {\n      this.addClass('is-right');\n      this.setLeft(left + outerWidth / 2 - view.$el.outerWidth());\n    } else {\n      this.setLeft(left - view.$el.outerWidth() / 2 + outerWidth / 2);\n    }\n\n    // bottom 40% of screen\n    if (topPer > 0.6) {\n      this.addClass('is-bottom-arrow');\n      this.setTop(top - view.$el.outerHeight());\n    // top 60% of screen\n    } else {\n      this.addClass('is-top-arrow');\n      this.setTop(top + outerHeight);\n    }\n  },\n});\n\nconst RootView = CollectionView.extend({\n  viewComparator: false,\n  el: '#root',\n  template: hbs``,\n  AppView: AppView,\n  initialize() {\n    // Render away any preexisting html\n    this.render();\n    this.regions = [];\n    const $body = this.$el;\n\n    Radio.reply('top-region', 'contains', this.contains, this);\n\n    this.appView = new this.AppView();\n\n    // Add lowest layer (z-index) to highest\n    this.addChildView(this.appView);\n    this.addRegionView('tooltip', new TooltipRegionView({ $body }));\n    this.addRegionView('modalSidebar', new ModalRegionView({ $body, setLocation: noop }));\n    this.addRegionView('modal', new ModalRegionView({ $body }));\n    this.addRegionView('modalSmall', new ModalRegionView({ $body }));\n    this.addRegionView('modalLoading', new ModalRegionView({ $body, contains: preventRegionClose }));\n    this.addRegionView('alert', new TopRegionView());\n    this.addRegionView('pop', new PopRegionView({ $body }));\n    this.addRegionView('preloader', new PreloaderRegionView());\n    this.addRegionView('error', new TopRegionView());\n  },\n  addRegionView(name, view) {\n    view.name = name;\n    this.addChildView(view);\n    this.regions[name] = view.getRegion('region');\n  },\n  getRegion(name) {\n    return this.regions[name];\n  },\n  contains(testView, target) {\n    const viewIndex = this.children.findIndexByView(testView);\n\n    // Tests to see if a click is registered on a higher layer\n    for (let i = this.children.length - 1; viewIndex <= i; i--) {\n      const view = this.children.findByIndex(i);\n      if (view.contains(target, testView)) return true;\n    }\n  },\n});\n\nexport {\n  RootView,\n};\n","import 'js/base/setup';\nimport 'js/i18n';\n\nimport $ from 'jquery';\nimport { get } from 'underscore';\nimport Backbone from 'backbone';\nimport Radio from 'backbone.radio';\nimport { addError } from 'js/datadog';\n\nimport 'scss/provider-core.scss';\nimport 'scss/app-root.scss';\n\nimport { appConfig } from './config';\nimport initPlatform from 'js/utils/platform';\n\nimport App from 'js/base/app';\n\nimport Datepicker from 'js/components/datepicker';\nimport Droplist from 'js/components/droplist';\nimport Optionlist from 'js/components/optionlist';\nimport Tooltip from 'js/components/tooltip';\n\nimport 'js/entities-service';\n\nimport AlertService from 'js/services/alert';\nimport BootstrapService from 'js/services/bootstrap';\nimport HistoryService from 'js/services/history';\nimport LastestListService from 'js/services/latest-list';\nimport ModalService from 'js/services/modal';\nimport WSService from 'js/services/ws';\n\nimport ErrorApp from 'js/apps/globals/error_app';\n\nimport { RootView } from 'js/views/globals/root_views';\nimport { PreloaderView } from 'js/views/globals/prelogin/prelogin_views';\n\nconst $document = $(document);\n\nconst Application = App.extend({\n  channelName: 'app',\n  radioRequests: {\n    'show:pop': 'showPop',\n  },\n\n  initialize() {\n    initPlatform();\n  },\n\n  // Before the application starts make sure:\n  // - A root layout is attached\n  // - Global services are started\n  onBeforeStart() {\n    new BootstrapService({ name: appConfig.name });\n    this.setView(new RootView());\n    this.configComponents();\n    this.startServices();\n    this.setListeners();\n    // Ensure Error is the first app initialized\n    new ErrorApp({ region: this.getRegion('error') });\n  },\n\n  configComponents() {\n    Tooltip.setRegion(this.getRegion('tooltip'));\n    const popRegion = this.getRegion('pop');\n    Datepicker.setRegion(popRegion);\n    Droplist.setPopRegion(popRegion);\n    Optionlist.setRegion(popRegion);\n  },\n\n  showPop(view, opts) {\n    const popRegion = this.getRegion('pop');\n    return popRegion.show(view, opts);\n  },\n\n  startServices() {\n    new WSService({ url: appConfig.ws });\n    new AlertService({ region: this.getRegion('alert') });\n    new LastestListService();\n    new ModalService({\n      modalRegion: this.getRegion('modal'),\n      modalSmallRegion: this.getRegion('modalSmall'),\n      modalSidebarRegion: this.getRegion('modalSidebar'),\n      modalLoadingRegion: this.getRegion('modalLoading'),\n    });\n  },\n\n  setListeners() {\n    $(window).on({\n      'resize.app'() {\n        Radio.trigger('user-activity', 'window:resize');\n      },\n      'beforeunload': /* istanbul ignore next: Unloading the window loses coverage reports */ () => {\n        this.stop();\n      },\n    });\n\n    $document.on('keydown.app', function(evt) {\n      Radio.trigger('user-activity', 'document:keydown', evt);\n    });\n\n    this.setMouseListeners();\n    this.setHotkeyListeners();\n  },\n\n  setMouseListeners() {\n    $document.on('mouseover.app', function(evt) {\n      Radio.trigger('user-activity', 'document:mouseover', evt);\n    });\n\n    /* istanbul ignore next: No need to test jquery functionality */\n    $document.on('mouseleave.app', function(evt) {\n      Radio.trigger('user-activity', 'document:mouseleave', evt);\n    });\n\n    $('body').on('pointerdown.app', function(evt) {\n      Radio.trigger('user-activity', 'body:down', evt);\n    });\n  },\n\n  setHotkeyListeners() {\n    // https://github.com/jeresig/jquery.hotkeys\n    $document.on('keydown.app', null, '/', function(evt) {\n      Radio.trigger('hotkey', 'search', evt);\n    });\n\n    $document.on('keydown.app', null, 'esc', function(evt) {\n      Radio.trigger('hotkey', 'close', evt);\n    });\n  },\n\n  beforeStart() {\n    return [\n      Radio.request('bootstrap', 'fetch'),\n      import('js/apps/globals/app-frame_app'),\n    ];\n  },\n\n  onFail(options, error) {\n    addError(get(error, 'responseData', error));\n\n    if (error === 'No workspaces found' || get(error, ['response', 'status']) === 403) {\n      this.getRegion('preloader').show(new PreloaderView({ notSetup: true }));\n    }\n  },\n\n  onStart(options, currentUser, { default: AppFrameApp }) {\n    if (!currentUser.hasTeam() || !currentUser.get('enabled')) {\n      this.getRegion('preloader').show(new PreloaderView({ notSetup: true }));\n      return;\n    }\n\n    this.emptyRegion('preloader');\n    const appFrameApp = this.addChildApp('appFrame', AppFrameApp);\n\n    this.listenToOnce(appFrameApp, 'before:start', this.startHistory);\n\n    appFrameApp.start({ view: this.getView().appView });\n  },\n\n  startHistory() {\n    Backbone.history.start({ pushState: true });\n\n    new HistoryService();\n  },\n\n  emptyRegion(name) {\n    return this.getRegion(name).empty();\n  },\n});\n\nfunction startApp() {\n  const app = new Application();\n\n  app.start();\n}\n\nexport {\n  startApp,\n  Application,\n};\n"],"file":"20241024-app-CKAzfl9d.js"}