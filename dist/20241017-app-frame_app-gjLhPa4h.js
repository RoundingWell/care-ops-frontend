const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["20241017-reduced-patients-main_app-C67n5U_j.js","20241017-iframe-form-AoanckUW.js","20241017-index-CLUXL0Ry.js","20241017-runtime-DnmPeeVn.js","20241017-app-DMYJqA4y.js","20241017-parsePhoneNumber-HF6SYIlZ.js","assets/app-BVSQGoEV.css","assets/iframe-form-Dt2lfO_2.css","20241017-schedule_views-Cy3xtU34.js","20241017-index-C1oNoNwx.js","20241017-list-pages-BySKHW0H.js","assets/list-pages-wXDk4XHx.css","20241017-app-Ddt2t32N.js","20241017-prelogin_views-jJZ4rk8a.js","assets/prelogin_views-D_NB3Jdp.css","assets/loader-CdTtOIxO.css","20241017-workspaces-DGu0l2rF.js","assets/app-BQremc7M.css","20241017-sidebar_app-B9PBqg6f.js","assets/sidebar_app-DUR0jsDX.css","20241017-build-matchers-array-CEkztBlK.js","assets/build-matchers-array-C6KS_ldS.css","assets/schedule_views-Cj1qwhL7.css","20241017-patients-main_app-IWCE7mTg.js","assets/patients-main_app-BpkN-FVK.css","20241017-dashboards-main_app-CWrSH4sa.js","assets/dashboards-main_app-CGagFgI8.css","20241017-clinicians-main_app-DIs0ze7r.js","assets/clinicians-main_app-4xXSWT_q.css","20241017-programs-main_app-yHRYFJ-1.js","assets/programs-main_app-w5LJytKv.css","20241017-forms-main_app-CQsa7Qlv.js","assets/forms-main_app-D8OEjpRW.css"])))=>i.map(i=>d[i]);
import{b as Y,m as H,ai as je,t as Ae,l as K,e as D,n as Fe,y as tt,K as nt,w as ce,a0 as Ie,J as oe,ah as re,D as at,L as lt,_ as A,s as st,C as it}from"./20241017-index-CLUXL0Ry.js";import{_ as d,V as h,B as v,R as f,C as T,a as ot}from"./20241017-runtime-DnmPeeVn.js";import{C as J,t as M,A as C,m as rt}from"./20241017-app-DMYJqA4y.js";import{d as b,H as ct}from"./20241017-parsePhoneNumber-HF6SYIlZ.js";import{i as w,r as ue}from"./20241017-index-C1oNoNwx.js";import{S as X,A as y,a as Le,P as U,b as ut}from"./20241017-workspaces-DGu0l2rF.js";import{O as Q,a as V,D as k,b as mt,T as Ne,I as O,c as Re,P as pt,s as Z}from"./20241017-app-Ddt2t32N.js";import{P as me,a as dt}from"./20241017-prelogin_views-jJZ4rk8a.js";import{k as pe,R as ft}from"./20241017-iframe-form-AoanckUW.js";/* empty css                        */const ht=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`<div class="flex-grow">
  <div class="flex">
    <div class="flex-grow">
      <h3 class="sidebar__heading">`+i((s(o,"formatMessage")||e&&s(e,"formatMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,"patients.sidebar.action.actionSidebarTemplate.headingText",{name:"intlGet",hash:{},data:l,loc:{start:{line:4,column:51},end:{line:4,column:120}}}),{name:"formatMessage",hash:{outreach:e!=null?s(e,"outreach"):e},data:l,loc:{start:{line:4,column:35},end:{line:4,column:140}}}))+`</h3>
    </div>
    <div>
      <span class="u-margin--r-8" data-menu-region></span>
      <button class="button--icon js-close">`+i((s(o,"fas")||e&&s(e,"fas")||a).call(t,"xmark",{name:"fas",hash:{},data:l,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+`</button>
    </div>
  </div>
  <div class="u-margin--t-16" data-action-region></div>
  <div data-form-region></div>
  <div data-attachments-region></div>
  <div class="action-sidebar__activity" data-activity-region></div>
</div>
<div class="u-margin--t-16" data-comment-region></div>
<div data-timestamps-region></div>
`},useData:!0}),gt=h.extend({tagName:"button",className:"button--icon js-menu",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"ellipsis",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:18}}}))},useData:!0}),triggers:{click:"click"},onClick(){const n=new v.Collection([{onSelect:Y(this.triggerMethod,this,"delete")}]);new Q({ui:this.$el,uiView:this,headingText:w.patients.sidebar.action.actionSidebarViews.menuView.menuOptions.headingText,itemTemplate:d.template({compiler:[8,">= 4.3.0"],main:function(o,u,l,t,a){var i,s=o.escapeExpression,c=o.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return s((c(l,"far")||u&&c(u,"far")||o.hooks.helperMissing).call(u??(o.nullContext||{}),"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:a,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+s(o.lambda((i=(i=(i=(i=(i=(i=(i=a&&c(a,"intl"))&&c(i,"patients"))&&c(i,"sidebar"))&&c(i,"action"))&&c(i,"actionSidebarViews"))&&c(i,"menuView"))&&c(i,"menuOptions"))&&c(i,"delete"),u))+"</span>"},useData:!0}),lists:[{collection:n}],align:"right",popWidth:248}).show()}}),wt=h.extend({className:"sidebar flex-region",template:ht,regions:{menu:"[data-menu-region]",action:"[data-action-region]",form:{el:"[data-form-region]",replaceElement:!0},activity:{el:"[data-activity-region]",regionClass:me},attachments:"[data-attachments-region]",timestamps:"[data-timestamps-region]",comment:"[data-comment-region]"},triggers:{"click .js-close":"close"},onAttach(){V(this.el)}}),vt=J.extend({stateEvents:{"change:isSelected":"onStateChangeIsSelected"},viewEvents:{click:"onClick"},viewOptions(){return{tagName:"button",className:"button--checkbox js-select",template:this.getState("isSelected")?d.template({compiler:[8,">= 4.3.0"],main:function(o,u,l,t,a){var i=o.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return o.escapeExpression((i(l,"fas")||u&&i(u,"fas")||o.hooks.helperMissing).call(u??(o.nullContext||{}),"square-check",{name:"fas",hash:{},data:a,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0}):d.template({compiler:[8,">= 4.3.0"],main:function(o,u,l,t,a){var i=o.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return o.escapeExpression((i(l,"fal")||u&&i(u,"fal")||o.hooks.helperMissing).call(u??(o.nullContext||{}),"square",{name:"fal",hash:{},data:a,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))},useData:!0}),triggers:{click:"click"}}},onClick(n,e){this.toggleState("isSelected"),this.triggerMethod("select",e)},onStateChangeIsSelected(n,e){this.show(),this.triggerMethod("change:isSelected",e)}}),He=w.patients.shared.components.stateComponent,we=d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return"<span>"+n.escapeExpression((t=(t=a(o,"name")||(e!=null?a(e,"name"):e))!=null?t:n.hooks.helperMissing,typeof t=="function"?t.call(e??(n.nullContext||{}),{name:"name",hash:{},data:l,loc:{start:{line:1,column:105},end:{line:1,column:115}}}):t))+"</span>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.escapeExpression,i=e??(n.nullContext||{}),s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return'<span class="action--'+a(n.lambda((t=e!=null?s(e,"options"):e)!=null?s(t,"color"):t,e))+'">'+a((s(o,"fa")||e&&s(e,"fa")||n.hooks.helperMissing).call(i,(t=e!=null?s(e,"options"):e)!=null?s(t,"iconType"):t,(t=e!=null?s(e,"options"):e)!=null?s(t,"icon"):t,{name:"fa",hash:{},data:l,loc:{start:{line:1,column:42},end:{line:1,column:78}}}))+((t=s(o,"unless").call(i,e!=null?s(e,"isCompact"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:78},end:{line:1,column:133}}}))!=null?t:"")+"</span>"},useData:!0}),bt=[X.QUEUED,X.STARTED,X.DONE];let ve,N,R;function Ge(){return N||(N=f.request("workspace","current").getStates(),N)}function kt(){if(R)return R;const n=Ge().groupBy("status");return R=H(bt,e=>({collection:f.request("entities","states:collection",n[e]),headingText:He.statusLabels[e]})),R}const $e=k.extend({isCompact:!1,initialize({stateId:n}){const e=f.request("workspace","current");ve!==e&&(N=null,R=null,ve=e),this.lists=kt(),this.setSelected(n)},setSelected(n){const e=Ge();this.setState({selected:e.get(n)})},onChangeSelected(n){this.triggerMethod("change:state",n)},popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},viewOptions(){const n=this.getOption("isCompact");return{className:n?"button-secondary--compact":"button-secondary w-100",template:we,templateContext:{isCompact:n}}},picklistOptions:{headingText:He.headingText,itemTemplate:we}}),ee=w.patients.shared.components.ownerComponent,yt=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return"<div>"+i((s(o,"matchText")||e&&s(e,"matchText")||a).call(t,e!=null?s(e,"name"):e,e!=null?s(e,"query"):e,{name:"matchText",hash:{},data:l,loc:{start:{line:1,column:5},end:{line:1,column:29}}}))+' <span class="owner-component__team">'+i((s(o,"matchText")||e&&s(e,"matchText")||a).call(t,e!=null?s(e,"abbr"):e,e!=null?s(e,"query"):e,{name:"matchText",hash:{},data:l,loc:{start:{line:1,column:66},end:{line:1,column:90}}}))+"</span></div>"},useData:!0}),xt=["isCompact","headingText","infoText","placeholderText","hasTeams","hasClinicians","hasCurrentClinician","owner","workspaces"];let be,S,E={};function Tt(n,e){return S||(e.can("work:team:manage")?(S=f.request("entities","teams:collection",[e.getTeam()]),S):(S=f.request("entities","teams:collection"),n.each(o=>{const u=qe(o,e);S.add(u.invoke("getTeam"))}),S))}function qe(n,e){return E[n.id]?E[n.id]:e.can("work:team:manage")?(E[n.id]=e.getTeam().getAssignableClinicians(),E[n.id]):(E[n.id]=n.getAssignableClinicians(),E[n.id])}const We=k.extend({isCompact:!1,headingText:ee.headingText,placeholderText:ee.placeholderText,hasTeams:!0,hasClinicians:!0,hasCurrentClinician:!0,popWidth(){return this.isCompact?null:this.getView().$el.outerWidth()},picklistOptions(){const n=this.getLists(),e=this.hasCurrentClinician&&je(n,({collection:o})=>o.get(this.currentUser));return{lists:n,itemTemplate:yt,itemTemplateContext(){if(this.model.type!=="teams")return{abbr:this.model.getTeam().get("abbr")}},isSelectlist:!0,infoText:this.infoText,headingText:this.headingText,placeholderText:this.placeholderText,canClear:e,clearText:this.currentUser.get("name")}},viewOptions(){const n={type:"far",icon:"circle-user"};return this.isCompact?{className:"owner-component--compact button-secondary--compact",templateContext:{attr:this.getState("selected").type==="teams"?"abbr":"name",icon:n}}:{className:"button-secondary w-100",templateContext:{attr:"name",icon:n}}},initialize(n){this.mergeOptions(n,xt),this.currentUser=f.request("bootstrap","currentUser");const e=f.request("workspace","current");this.workspaces||(this.workspaces=f.request("entities","workspaces:collection",[e])),be!==e.id&&(S=null,E={},be=e.id),this.setState({selected:this.owner})},getLists(){const n=[];return this.hasClinicians&&this.workspaces.each(e=>{const o=qe(e,this.currentUser);o.length&&n.push({collection:o,headingText:e.get("name")})}),this.hasTeams&&n.push({collection:Tt(this.workspaces,this.currentUser),headingText:n.length?ee.teamsHeadingText:null}),n},onPicklistSelect({model:n}){this.setState("selected",n||this.currentUser),this.popRegion.empty()},onChangeSelected(n){this.triggerMethod("change:owner",n)}}),Ct=w.patients.shared.components.dueComponent,Pt=d.template({1:function(n,e,o,u,l){return' class="is-overdue"'},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return`
  <span`+((t=c(o,"if").call(a,e!=null?c(e,"isOverdue"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:7},end:{line:2,column:50}}}))!=null?t:"")+`>
    `+s((c(o,"far")||e&&c(e,"far")||i).call(a,"calendar-days",{name:"far",hash:{},data:l,loc:{start:{line:3,column:4},end:{line:3,column:27}}}))+s((c(o,"formatDateTime")||e&&c(e,"formatDateTime")||i).call(a,e!=null?c(e,"date"):e,e!=null?c(e,"dateFormat"):e,{name:"formatDateTime",hash:{defaultHtml:e!=null?c(e,"defaultHtml"):e,inputFormat:"YYYY-MM-DD"},data:l,loc:{start:{line:3,column:27},end:{line:3,column:110}}}))+`
  </span>
`},useData:!0}),_t=J.extend({isCompact:!1,viewEvents:{click:"onClick"},onClick(){this.toggleState("isActive")},stateEvents:{"change:isActive":"onChangeIsActive","change:selected":"onChangeStateSelected"},onChangeIsActive(n,e){const o=this.getView();o.$el.toggleClass("is-active",e),e&&(o.$el.blur(),this.showDatepicker())},viewOptions(){const n=this.getOption("isCompact"),e=this.getState("selected"),o=this.getState("isDisabled");return{tagName:"button",attributes:{disabled:o},className(){return n?"button-secondary--compact due-component":"button-secondary w-100 due-component"},triggers:{click:"click"},template:Pt,templateContext:{defaultHtml:n?"":`<span>${Ct.defaultText}</span>`,dateFormat:n?"SHORT":"LONG",date:e,isOverdue:!o&&this.getOption("isOverdue")}}},initialize({date:n}){this.setState({selected:n})},showDatepicker(){const n=new mt({uiView:this.getView(),state:{selectedDate:this.getState("selected")}});this.listenTo(n,{"change:selectedDate"(e){this.setState("selected",e),n.destroy()},destroy:this.onDatepickerDestroy}),n.show()},onDatepickerDestroy(){this.toggleState("isActive",!1)},onChangeStateSelected(n,e){this.show(),this.triggerMethod("change:due",e)}}),G=w.patients.shared.components.timeComponent,de="HH:mm:ss",Ot=b("07:00:00",de),St=Ae(96,function(n){return{id:Ot.add(15*n,"minutes").format(de)}}),Dt=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"clock",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))},useData:!0}),Mt=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return i((s(o,"far")||e&&s(e,"far")||a).call(t,"clock",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"id"):e,"LT",{name:"formatDateTime",hash:{defaultHtml:e!=null?s(e,"defaultHtml"):e,inputFormat:"HH:mm:ss"},data:l,loc:{start:{line:1,column:15},end:{line:1,column:88}}}))},useData:!0}),Vt=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return i((s(o,"far")||e&&s(e,"far")||a).call(t,"clock",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"time"):e,"LT",{name:"formatDateTime",hash:{inputFormat:"HH:mm:ss"},data:l,loc:{start:{line:1,column:15},end:{line:1,column:66}}}))},useData:!0}),Et=k.extend({collection:new v.Collection(St),align:"right",popWidth:192,isCompact:!1,isSelectlist:!0,getClassName(n,e){const o=n&&this.getOption("isOverdue")?"is-overdue":"";return e?`button-secondary--compact time-component ${o}`:`button-secondary time-component w-100 ${o}`},getTemplate(n,e){return!n&&this.getOption("time")?Vt:!n&&e?Dt:Mt},viewOptions(){const n=this.getOption("isCompact"),e=this.getState("selected"),o=e?e.id:null;return{className:this.getClassName(o,n),template:this.getTemplate(o,n),templateContext:{time:this.getOption("time"),defaultHtml:`<span>${G.placeholderText}</span>`}}},picklistOptions:{canClear:!0,clearText:G.clear,headingText:G.headingText,placeholderText:G.placeholderText,isSelectlist:!0,itemTemplateContext(){return{text:b(this.model.id,de).format("LT")}}},initialize({time:n}){const e=this.collection.get(n);this.setState({selected:e})},onChangeSelected(n){const e=n?n.id:null;this.triggerMethod("change:time",e)}}),te=w.patients.shared.components.durationComponent,jt=H(K(99),function(n){return{id:n+1}}),At=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return a((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"stopwatch",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+a(n.lambda((t=(t=(t=(t=(t=l&&i(l,"intl"))&&i(t,"patients"))&&i(t,"shared"))&&i(t,"components"))&&i(t,"durationComponent"))&&i(t,"defaultText"),e))+"</span>"},useData:!0}),Ft=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return i((s(o,"far")||e&&s(e,"far")||a).call(t,"stopwatch",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+i((s(o,"formatMessage")||e&&s(e,"formatMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,"patients.shared.components.durationComponent.mins",{name:"intlGet",hash:{},data:l,loc:{start:{line:1,column:41},end:{line:1,column:102}}}),{name:"formatMessage",hash:{min:e!=null?s(e,"id"):e},data:l,loc:{start:{line:1,column:25},end:{line:1,column:111}}}))+"</span>"},useData:!0}),It=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return n.escapeExpression((i(o,"formatMessage")||e&&i(e,"formatMessage")||a).call(t,(i(o,"intlGet")||e&&i(e,"intlGet")||a).call(t,"patients.shared.components.durationComponent.mins",{name:"intlGet",hash:{},data:l,loc:{start:{line:1,column:16},end:{line:1,column:77}}}),{name:"formatMessage",hash:{min:e!=null?i(e,"id"):e},data:l,loc:{start:{line:1,column:0},end:{line:1,column:86}}}))},useData:!0}),Lt=k.extend({collection:new v.Collection(jt),getTemplate(){return this.getState("selected")?Ft:At},viewOptions(){return{className:"button-secondary w-100",template:this.getTemplate()}},picklistOptions:{canClear:!0,clearText:te.clear,headingText:te.headingText,placeholderText:te.placeholderText,isSelectlist:!0,itemTemplate:It},initialize({duration:n}){const e=this.collection.get(n);this.setState({selected:e})},popWidth(){return this.getView().$el.outerWidth()},onChangeSelected(n){const e=n?n.id:0;this.triggerMethod("change:duration",e)}}),ms=h.extend({className:"button-secondary--compact",tagName:"button",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"square-poll-horizontal",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:32}}}))},useData:!0}),triggers:{click:"click"},onClick(){f.trigger("event-router","form:patientAction",this.model.id,this.model.getForm().id)}}),ps=h.extend({template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"circle-info",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))},useData:!0}),triggers:{click:"prevent-row-click"},onRender(){const n=d.template({1:function(o,u,l,t,a){var i,s=u??(o.nullContext||{}),c=o.hooks.helperMissing,r=o.escapeExpression,m=o.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return'<p class="action-tooltip__flow"><span class="action-tooltip__flow-icon">'+r((m(l,"fas")||u&&m(u,"fas")||c).call(s,"folder",{name:"fas",hash:{},data:a,loc:{start:{line:2,column:94},end:{line:2,column:110}}}))+"</span>"+r((i=(i=m(l,"flowName")||(u!=null?m(u,"flowName"):u))!=null?i:c,typeof i=="function"?i.call(s,{name:"flowName",hash:{},data:a,loc:{start:{line:2,column:117},end:{line:2,column:131}}}):i))+"</p>"},compiler:[8,">= 4.3.0"],main:function(o,u,l,t,a){var i,s,c=u??(o.nullContext||{}),r=o.hooks.helperMissing,m=o.escapeExpression,p="function",g=o.lookupProperty||function(x,ge){if(Object.prototype.hasOwnProperty.call(x,ge))return x[ge]};return`
      `+((i=g(l,"if").call(c,u!=null?g(u,"flowName"):u,{name:"if",hash:{},fn:o.program(1,a,0),inverse:o.noop,data:a,loc:{start:{line:2,column:6},end:{line:2,column:142}}}))!=null?i:"")+`
      <p><span class="action-tooltip__action-icon">`+m((g(l,"far")||u&&g(u,"far")||r).call(c,"file-lines",{name:"far",hash:{},data:a,loc:{start:{line:3,column:51},end:{line:3,column:71}}}))+'</span><span class="action-tooltip__action-name">'+m((s=(s=g(l,"name")||(u!=null?g(u,"name"):u))!=null?s:r,typeof s===p?s.call(c,{name:"name",hash:{},data:a,loc:{start:{line:3,column:120},end:{line:3,column:130}}}):s))+`</span></p>
      <p class="action-tooltip__action-details">`+m((s=(s=g(l,"details")||(u!=null?g(u,"details"):u))!=null?s:r,typeof s===p?s.call(c,{name:"details",hash:{},data:a,loc:{start:{line:4,column:48},end:{line:4,column:61}}}):s))+`</p>
    `},useData:!0}),e=this.model.getFlow();new Ne({messageHtml:ue(n,{name:this.model.get("name"),flowName:e?e.get("name"):null,details:this._formatDetails(this.model.get("details"))}),uiView:this,ui:this.$el})},_formatDetails(n){return!n||n.length<=140?n:`${M(n.slice(0,140))}...`}}),Ue=h.extend({tagName:"span",className(){return this.getOption("isCompact")?"patient-readonly--compact patient-readonly__status js-no-click":"patient-readonly w-100 js-no-click"},template:d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<span class="u-margin--l-8">'+n.escapeExpression((t=(t=a(o,"stateName")||(e!=null?a(e,"stateName"):e))!=null?t:n.hooks.helperMissing,typeof t=="function"?t.call(e??(n.nullContext||{}),{name:"stateName",hash:{},data:l,loc:{start:{line:1,column:142},end:{line:1,column:157}}}):t))+"</span>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.hooks.helperMissing,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return'<span class="action--'+i(n.lambda((t=e!=null?r(e,"stateOptions"):e)!=null?r(t,"color"):t,e))+'">'+i((r(o,"fa")||e&&r(e,"fa")||c).call(s,(t=e!=null?r(e,"stateOptions"):e)!=null?r(t,"iconType"):t,(t=e!=null?r(e,"stateOptions"):e)!=null?r(t,"icon"):t,{name:"fa",hash:{},data:l,loc:{start:{line:1,column:47},end:{line:1,column:93}}}))+((t=r(o,"unless").call(s,e!=null?r(e,"isCompact"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:93},end:{line:1,column:175}}}))!=null?t:"")+"</span>"+i((a=(a=r(o,"remove_whitespace")||(e!=null?r(e,"remove_whitespace"):e))!=null?a:c,typeof a=="function"?a.call(s,{name:"remove_whitespace",hash:{},data:l,loc:{start:{line:1,column:182},end:{line:1,column:207}}}):a))},useData:!0}),templateContext(){const n=this.model.getState();return{isCompact:this.getOption("isCompact"),stateOptions:n.get("options"),stateName:n.get("name")}}}),ze=h.extend({tagName:"span",className(){return this.getOption("isCompact")?"patient-readonly--compact patient-readonly__owner js-no-click":"patient-readonly patient-readonly__owner w-100 js-no-click"},template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return s((c(o,"far")||e&&c(e,"far")||i).call(a,"circle-user",{name:"far",hash:{classes:"u-margin--r-8"},data:l,loc:{start:{line:1,column:0},end:{line:1,column:45}}}))+"<span>"+s((t=(t=c(o,"owner")||(e!=null?c(e,"owner"):e))!=null?t:i,typeof t=="function"?t.call(a,{name:"owner",hash:{},data:l,loc:{start:{line:1,column:51},end:{line:1,column:62}}}):t))+"</span>"},useData:!0}),templateContext(){const n=this.model.getOwner();return{owner:n.get(n.type==="teams"?"abbr":"name")}}}),ds=h.extend({tagName:"span",className:"patient-readonly--compact js-no-click",template:d.template({1:function(n,e,o,u,l){return' class="is-overdue"'},3:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return'<span class="u-margin--l-8">'+n.escapeExpression((t(o,"formatDateTime")||e&&t(e,"formatDateTime")||n.hooks.helperMissing).call(e??(n.nullContext||{}),e!=null?t(e,"due_date"):e,"SHORT",{name:"formatDateTime",hash:{inputFormat:"YYYY-MM-DD"},data:l,loc:{start:{line:3,column:73},end:{line:3,column:133}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`
    <span`+((t=i(o,"if").call(a,e!=null?i(e,"isOverdue"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:9},end:{line:2,column:52}}}))!=null?t:"")+`>
      `+n.escapeExpression((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(a,"calendar-days",{name:"far",hash:{},data:l,loc:{start:{line:3,column:6},end:{line:3,column:29}}}))+((t=i(o,"if").call(a,e!=null?i(e,"due_date"):e,{name:"if",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:3,column:29},end:{line:3,column:147}}}))!=null?t:"")+`
    </span>
  `},useData:!0}),templateContext(){return{isOverdue:this.model.isOverdue()}}}),fs=h.extend({tagName:"span",className:"patient-readonly--compact patient-readonly__time js-no-click",template:d.template({1:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return'<span class="u-margin--l-8">'+n.escapeExpression((t(o,"formatDateTime")||e&&t(e,"formatDateTime")||n.hooks.helperMissing).call(e??(n.nullContext||{}),e!=null?t(e,"due_time"):e,"LT",{name:"formatDateTime",hash:{inputFormat:"HH:mm:ss"},data:l,loc:{start:{line:1,column:59},end:{line:1,column:114}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return n.escapeExpression((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(a,"clock",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+((t=i(o,"if").call(a,e!=null?i(e,"due_time"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:15},end:{line:1,column:128}}}))!=null?t:"")},useData:!0})}),Nt=h.extend({template:d.template({1:function(n,e,o,u,l){return" is-overdue"},3:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return'<span class="u-margin--l-8">'+n.escapeExpression((t(o,"formatDateTime")||e&&t(e,"formatDateTime")||n.hooks.helperMissing).call(e??(n.nullContext||{}),e!=null?t(e,"due_date"):e,"SHORT",{name:"formatDateTime",hash:{inputFormat:"YYYY-MM-DD"},data:l,loc:{start:{line:3,column:73},end:{line:3,column:133}}}))+"</span>"},5:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return'<span class="u-margin--l-8">'+n.escapeExpression((t(o,"formatDateTime")||e&&t(e,"formatDateTime")||n.hooks.helperMissing).call(e??(n.nullContext||{}),e!=null?t(e,"due_time"):e,"LT",{name:"formatDateTime",hash:{inputFormat:"HH:mm:ss"},data:l,loc:{start:{line:6,column:65},end:{line:6,column:120}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return`
    <span class="patient-readonly`+((t=c(o,"if").call(a,e!=null?c(e,"isOverdue"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:33},end:{line:2,column:68}}}))!=null?t:"")+`">
      `+s((c(o,"far")||e&&c(e,"far")||i).call(a,"calendar-days",{name:"far",hash:{},data:l,loc:{start:{line:3,column:6},end:{line:3,column:29}}}))+((t=c(o,"if").call(a,e!=null?c(e,"due_date"):e,{name:"if",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:3,column:29},end:{line:3,column:147}}}))!=null?t:"")+`
    </span>
    <span class="patient-readonly patient-readonly__time `+((t=c(o,"if").call(a,e!=null?c(e,"isOverdue"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:5,column:57},end:{line:5,column:92}}}))!=null?t:"")+`">
      `+s((c(o,"far")||e&&c(e,"far")||i).call(a,"clock",{name:"far",hash:{},data:l,loc:{start:{line:6,column:6},end:{line:6,column:21}}}))+((t=c(o,"if").call(a,e!=null?c(e,"due_time"):e,{name:"if",hash:{},fn:n.program(5,l,0),inverse:n.noop,data:l,loc:{start:{line:6,column:21},end:{line:6,column:134}}}))!=null?t:"")+`
    </span>
  `},useData:!0}),templateContext(){return{isOverdue:this.model.isOverdue()}}}),Rt=h.extend({tagName:"span",className:"patient-readonly w-100",template:d.template({1:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return'      <span class="u-margin--l-8">'+n.escapeExpression((i(o,"formatMessage")||e&&i(e,"formatMessage")||a).call(t,(i(o,"intlGet")||e&&i(e,"intlGet")||a).call(t,"patients.shared.readOnlyViews.readOnlyDurationView.mins",{name:"intlGet",hash:{},data:l,loc:{start:{line:3,column:50},end:{line:3,column:117}}}),{name:"formatMessage",hash:{min:e!=null?i(e,"duration"):e},data:l,loc:{start:{line:3,column:34},end:{line:3,column:132}}}))+`</span>
`},3:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'      <span class="u-margin--l-8">'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"shared"))&&a(t,"readOnlyViews"))&&a(t,"readOnlyDurationView"))&&a(t,"noDuration"),e))+`</span>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return n.escapeExpression((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(a,"stopwatch",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+`
`+((t=i(o,"if").call(a,e!=null?i(e,"duration"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.program(3,l,0),data:l,loc:{start:{line:2,column:4},end:{line:6,column:11}}}))!=null?t:"")+"  "},useData:!0})}),Ht=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.hooks.helperMissing,r="function",m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+i(n.lambda((t=(t=(t=(t=(t=l&&m(l,"intl"))&&m(t,"patients"))&&m(t,"sidebar"))&&m(t,"action"))&&m(t,"actionDetailsTemplate"))&&m(t,"placeholder"),e))+'">'+i((a=(a=m(o,"details")||(e!=null?m(e,"details"):e))!=null?a:c,typeof a===r?a.call(s,{name:"details",hash:{},data:l,loc:{start:{line:1,column:148},end:{line:1,column:161}}}):a))+`</textarea>
<div class="textarea-flex__container input-secondary sidebar__details js-spacer">`+i((a=(a=m(o,"details")||(e!=null?m(e,"details"):e))!=null?a:c,typeof a===r?a.call(s,{name:"details",hash:{},data:l,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):a))+` </div>
`},useData:!0}),Gt=h.extend({className:"u-margin--t-8 sidebar__save",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
    <button class="button--green js-save">`+i(a((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"patients"))&&s(t,"sidebar"))&&s(t,"action"))&&s(t,"actionSidebarActionViews"))&&s(t,"saveView"))&&s(t,"saveBtn"),e))+`</button>
    <button class="button--text u-margin--r-4 js-cancel">`+i(a((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"patients"))&&s(t,"sidebar"))&&s(t,"action"))&&s(t,"actionSidebarActionViews"))&&s(t,"saveView"))&&s(t,"cancelBtn"),e))+`</button>
  `},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),$t=h.extend({className:"pos--relative",template:Ht,behaviors:[O],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange(n){this.ui.input.val(n),this.ui.spacer.text(n||" "),this.model.set("details",M(n))}}),qt=h.extend({template:d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<span class="sidebar--no-results">'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"sidebar"))&&a(t,"action"))&&a(t,"actionSidebarActionViews"))&&a(t,"readOnlyActionView"))&&a(t,"noDetails"),e))+"</span>"},3:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`    <div class="flex u-margin--t-8">
      <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"patients"))&&s(t,"sidebar"))&&s(t,"action"))&&s(t,"actionSidebarActionViews"))&&s(t,"readOnlyActionView"))&&s(t,"permissionLabel"),e))+`</h4>
      <div class="flex flex--grow action-sidebar__info">
        `+i((s(o,"far")||e&&s(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"ban",{name:"far",hash:{},data:l,loc:{start:{line:16,column:8},end:{line:16,column:21}}}))+'<span class="u-margin--l-8">'+i(a((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"patients"))&&s(t,"sidebar"))&&s(t,"action"))&&s(t,"actionSidebarActionViews"))&&s(t,"readOnlyActionView"))&&s(t,"permissionInfo"),e))+`</span>
      </div>
    </div>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c="function",r=n.escapeExpression,m=n.lambda,p=n.lookupProperty||function(g,x){if(Object.prototype.hasOwnProperty.call(g,x))return g[x]};return`
    <div class="pos--relative">
      <div class="action-sidebar__name">`+r((a=(a=p(o,"name")||(e!=null?p(e,"name"):e))!=null?a:s,typeof a===c?a.call(i,{name:"name",hash:{},data:l,loc:{start:{line:3,column:40},end:{line:3,column:50}}}):a))+`</div>
    </div>
    <div class="u-margin--t-8">
    `+r((a=(a=p(o,"details")||(e!=null?p(e,"details"):e))!=null?a:s,typeof a===c?a.call(i,{name:"details",hash:{},data:l,loc:{start:{line:6,column:4},end:{line:6,column:17}}}):a))+((t=p(o,"unless").call(i,e!=null?p(e,"details"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:6,column:17},end:{line:6,column:177}}}))!=null?t:"")+`
    </div>
    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">`+r(m((t=(t=(t=(t=(t=(t=l&&p(l,"intl"))&&p(t,"patients"))&&p(t,"sidebar"))&&p(t,"action"))&&p(t,"actionSidebarActionViews"))&&p(t,"readOnlyActionView"))&&p(t,"stateLabel"),e))+`</h4><div class="flex-grow" data-state-region></div></div>
    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">`+r(m((t=(t=(t=(t=(t=(t=l&&p(l,"intl"))&&p(t,"patients"))&&p(t,"sidebar"))&&p(t,"action"))&&p(t,"actionSidebarActionViews"))&&p(t,"readOnlyActionView"))&&p(t,"ownerLabel"),e))+`</h4><div class="flex-grow" data-owner-region></div></div>
    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">`+r(m((t=(t=(t=(t=(t=(t=l&&p(l,"intl"))&&p(t,"patients"))&&p(t,"sidebar"))&&p(t,"action"))&&p(t,"actionSidebarActionViews"))&&p(t,"readOnlyActionView"))&&p(t,"dueDayLabel"),e))+`</h4><div class="flex flex-grow" data-due-datetime-region></div></div>
    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">`+r(m((t=(t=(t=(t=(t=(t=l&&p(l,"intl"))&&p(t,"patients"))&&p(t,"sidebar"))&&p(t,"action"))&&p(t,"actionSidebarActionViews"))&&p(t,"readOnlyActionView"))&&p(t,"durationLabel"),e))+`</h4><div class="flex-grow" data-duration-region></div></div>
`+((t=p(o,"unless").call(i,e!=null?p(e,"canEdit"):e,{name:"unless",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:12,column:4},end:{line:19,column:15}}}))!=null?t:"")+"  "},useData:!0}),regions:{state:"[data-state-region]",owner:"[data-owner-region]",dueDateTime:"[data-due-datetime-region]",duration:"[data-duration-region]"},onRender(){this.showState(),this.showOwner(),this.showDueDateTime(),this.showDuration()},showState(){const n=new Ue({model:this.model});this.showChildView("state",n)},showOwner(){const n=new ze({model:this.model});this.showChildView("owner",n)},showDueDateTime(){const n=new Nt({model:this.model});this.showChildView("dueDateTime",n)},showDuration(){const n=new Rt({model:this.model});this.showChildView("duration",n)},templateContext(){return{canEdit:this.model.canEdit()}}}),Wt=h.extend({childViewTriggers:{save:"save",cancel:"cancel"},template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c="function",r=n.escapeExpression,m=n.lambda,p=n.lookupProperty||function(g,x){if(Object.prototype.hasOwnProperty.call(g,x))return g[x]};return`
    <div class="action-sidebar__name">`+r((a=(a=p(o,"name")||(e!=null?p(e,"name"):e))!=null?a:s,typeof a===c?a.call(i,{name:"name",hash:{},data:l,loc:{start:{line:2,column:38},end:{line:2,column:48}}}):a))+`</div>
    <div class="u-margin--t-8" data-details-region></div>
    <div data-save-region></div>
    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">`+r(m((t=(t=(t=(t=(t=(t=l&&p(l,"intl"))&&p(t,"patients"))&&p(t,"sidebar"))&&p(t,"action"))&&p(t,"actionSidebarActionViews"))&&p(t,"actionView"))&&p(t,"stateLabel"),e))+`</h4><div class="flex-grow" data-state-region></div></div>
    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">`+r(m((t=(t=(t=(t=(t=(t=l&&p(l,"intl"))&&p(t,"patients"))&&p(t,"sidebar"))&&p(t,"action"))&&p(t,"actionSidebarActionViews"))&&p(t,"actionView"))&&p(t,"ownerLabel"),e))+`</h4><div class="flex-grow" data-owner-region></div></div>
    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">`+r(m((t=(t=(t=(t=(t=(t=l&&p(l,"intl"))&&p(t,"patients"))&&p(t,"sidebar"))&&p(t,"action"))&&p(t,"actionSidebarActionViews"))&&p(t,"actionView"))&&p(t,"dueDayLabel"),e))+`</h4>
      <div class="flex flex-grow">`+r((a=(a=p(o,"remove_whitespace")||(e!=null?p(e,"remove_whitespace"):e))!=null?a:s,typeof a===c?a.call(i,{name:"remove_whitespace",hash:{},data:l,loc:{start:{line:8,column:34},end:{line:8,column:59}}}):a))+'<div class="flex-grow" data-due-date-region></div>'+r((a=(a=p(o,"remove_whitespace")||(e!=null?p(e,"remove_whitespace"):e))!=null?a:s,typeof a===c?a.call(i,{name:"remove_whitespace",hash:{},data:l,loc:{start:{line:9,column:58},end:{line:9,column:83}}}):a))+'<div class="flex-grow" data-due-time-region></div>'+r((a=(a=p(o,"remove_whitespace")||(e!=null?p(e,"remove_whitespace"):e))!=null?a:s,typeof a===c?a.call(i,{name:"remove_whitespace",hash:{},data:l,loc:{start:{line:10,column:58},end:{line:10,column:83}}}):a))+`</div>
    </div>
    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">`+r(m((t=(t=(t=(t=(t=(t=l&&p(l,"intl"))&&p(t,"patients"))&&p(t,"sidebar"))&&p(t,"action"))&&p(t,"actionSidebarActionViews"))&&p(t,"actionView"))&&p(t,"durationLabel"),e))+`</h4><div class="flex-grow" data-duration-region></div></div>
  `},useData:!0}),regions:{name:"[data-name-region]",details:"[data-details-region]",save:"[data-save-region]",state:"[data-state-region]",owner:"[data-owner-region]",dueDate:"[data-due-date-region]",dueTime:"[data-due-time-region]",duration:"[data-duration-region]"},modelEvents:{"change:_state":"onChangeActionState","change:_owner":"onChangeOwner","change:due_date":"onChangeDue","change:due_time":"onChangeDue","change:duration":"onChangeDuration"},onChangeActionState(){const n=this.model.isDone(),o=this.model.getPreviousState().isDone();if(n===o){this.showState();return}this.render()},onChangeOwner(){this.isRendered()&&this.showOwner()},onChangeDue(){this.showDueDate(),this.showDueTime()},onChangeDuration(){this.showDuration()},cloneAction(){this.clonedAction&&this.stopListening(this.clonedAction),this.clonedAction=this.model.clone()},onRender(){this.showEditForm(),this.showState(),this.showOwner(),this.showDueDate(),this.showDueTime(),this.showDuration()},showSave(){this.showChildView("save",new Gt({model:this.clonedAction}))},onSave(){this.getRegion("save").empty()},onCancel(){this.showEditForm()},showEditForm(){this.cloneAction(),this.listenTo(this.clonedAction,"change:details",this.showSave),this.getRegion("save").empty(),this.showDetails()},showDetails(){this.showChildView("details",new $t({model:this.clonedAction}))},showState(){const n=new $e({stateId:this.model.get("_state")});this.listenTo(n,"change:state",e=>{this.model.saveState(e)}),this.showChildView("state",n)},showOwner(){const n=this.model.isDone(),e=this.model.getProgram(),o=new We({owner:this.model.getOwner(),workspaces:e.getUserWorkspaces(),state:{isDisabled:n}});this.listenTo(o,"change:owner",u=>{this.model.saveOwner(u)}),this.showChildView("owner",o)},showDueDate(){const n=this.model.isDone(),e=new _t({date:this.model.get("due_date"),state:{isDisabled:n},isOverdue:this.model.isOverdue()});this.listenTo(e,"change:due",o=>{this.model.saveDueDate(o)}),this.showChildView("dueDate",e)},showDueTime(){const n=this.model.isDone()||!this.model.get("due_date"),e=new Et({time:this.model.get("due_time"),isOverdue:this.model.isOverdue(),state:{isDisabled:n}});this.listenTo(e,"change:time",o=>{this.model.saveDueTime(o)}),this.showChildView("dueTime",e)},showDuration(){const n=this.model.isDone(),e=new Lt({duration:this.model.get("duration"),state:{isDisabled:n}});this.listenTo(e,"change:duration",o=>{this.model.save({duration:o})}),this.showChildView("duration",e)}}),Ut=d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return`<div class="u-margin--t-8 u-text-align--right">
  <button class="button--link js-response">`+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"sidebar"))&&a(t,"action"))&&a(t,"formSharingTemplate"))&&a(t,"buttonResponseText"),e))+`</button>
</div>
`},3:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return`<div class="u-margin--t-8">
  <button class="button--link js-undo-cancel"`+((t=a(o,"if").call(e??(n.nullContext||{}),e!=null?a(e,"isDone"):e,{name:"if",hash:{},fn:n.program(4,l,0),inverse:n.noop,data:l,loc:{start:{line:24,column:45},end:{line:24,column:75}}}))!=null?t:"")+">"+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"sidebar"))&&a(t,"action"))&&a(t,"formSharingTemplate"))&&a(t,"buttonUndoText"),e))+`</button>
</div>
`},4:function(n,e,o,u,l){return" disabled"},6:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return`<div class="u-margin--t-8">
  <button class="button--link js-cancel">`+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"sidebar"))&&a(t,"action"))&&a(t,"formSharingTemplate"))&&a(t,"buttonCancelText"),e))+`</button>
</div>
`},8:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lambda,s=n.escapeExpression,c=n.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return`<div class="flex u-margin--t-8">
  <div class="flex-grow">
    <button class="button--link js-cancel"`+((t=c(o,"if").call(a,e!=null?c(e,"isDone"):e,{name:"if",hash:{},fn:n.program(4,l,0),inverse:n.noop,data:l,loc:{start:{line:37,column:42},end:{line:37,column:72}}}))!=null?t:"")+">"+s(i((t=(t=(t=(t=(t=l&&c(l,"intl"))&&c(t,"patients"))&&c(t,"sidebar"))&&c(t,"action"))&&c(t,"formSharingTemplate"))&&c(t,"buttonCancelText"),e))+`</button>
  </div>
  <button class="button--link js-share"`+((t=c(o,"if").call(a,e!=null?c(e,"isDone"):e,{name:"if",hash:{},fn:n.program(4,l,0),inverse:n.noop,data:l,loc:{start:{line:39,column:39},end:{line:39,column:69}}}))!=null?t:"")+">"+s(i((t=(t=(t=(t=(t=l&&c(l,"intl"))&&c(t,"patients"))&&c(t,"sidebar"))&&c(t,"action"))&&c(t,"formSharingTemplate"))&&c(t,"buttonShareText"),e))+`</button>
</div>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lambda,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`<div class="flex">
  <h3 class="sidebar__heading flex-grow">`+s((r(o,"far")||e&&r(e,"far")||i).call(a,"share-from-square",{name:"far",hash:{classes:"u-margin--r-8"},data:l,loc:{start:{line:2,column:41},end:{line:2,column:92}}}))+s(c((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"patients"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"formSharingTemplate"))&&r(t,"label"),e))+`</h3>
</div>
<div class="flex u-margin--t-16">
  <h4 class="sidebar__label--inset u-margin--t-8">`+s(c((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"patients"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"formSharingTemplate"))&&r(t,"recipientLabel"),e))+`</h4>
  <div class="flex-grow"><button class="button-secondary w-100" disabled>`+s((r(o,"far")||e&&r(e,"far")||i).call(a,"user-plus",{name:"far",hash:{},data:l,loc:{start:{line:6,column:73},end:{line:6,column:92}}}))+"<span>"+s(c((t=e!=null?r(e,"patient"):e)!=null?r(t,"first_name"):t,e))+" "+s(c((t=e!=null?r(e,"patient"):e)!=null?r(t,"last_name"):t,e))+`</span></button></div>
</div>
<div class="flex u-margin--t-8">
  <h4 class="sidebar__label--inset u-margin--t-8">`+s(c((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"patients"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"formSharingTemplate"))&&r(t,"stateLabel"),e))+`</h4>
  <div class="flex-grow action-sidebar__sharing-state">
    <span class="action--`+s(c((t=e!=null?r(e,"stateOptions"):e)!=null?r(t,"color"):t,e))+'">'+s((r(o,"fa")||e&&r(e,"fa")||i).call(a,(t=e!=null?r(e,"stateOptions"):e)!=null?r(t,"iconType"):t,(t=e!=null?r(e,"stateOptions"):e)!=null?r(t,"icon"):t,{name:"fa",hash:{},data:l,loc:{start:{line:11,column:51},end:{line:11,column:98}}}))+"<span>"+s((r(o,"formatMessage")||e&&r(e,"formatMessage")||i).call(a,(r(o,"intlGet")||e&&r(e,"intlGet")||i).call(a,"patients.sidebar.action.formSharingTemplate.stateText",{name:"intlGet",hash:{},data:l,loc:{start:{line:12,column:28},end:{line:12,column:93}}}),{name:"formatMessage",hash:{sharing:e!=null?r(e,"sharing"):e},data:l,loc:{start:{line:12,column:12},end:{line:12,column:111}}}))+`</span>
    </span>
  </div>
</div>`+((t=r(o,"if").call(a,e!=null?r(e,"isResponded"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:16,column:0},end:{line:20,column:8}}}))!=null?t:"")+((t=r(o,"if").call(a,e!=null?r(e,"isCanceled"):e,{name:"if",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:22,column:0},end:{line:26,column:8}}}))!=null?t:"")+((t=r(o,"if").call(a,e!=null?r(e,"isWaiting"):e,{name:"if",hash:{},fn:n.program(6,l,0),inverse:n.noop,data:l,loc:{start:{line:28,column:0},end:{line:32,column:8}}}))!=null?t:"")+((t=r(o,"if").call(a,e!=null?r(e,"isError"):e,{name:"if",hash:{},fn:n.program(8,l,0),inverse:n.noop,data:l,loc:{start:{line:34,column:0},end:{line:41,column:8}}}))!=null?t:"")},useData:!0}),zt=h.extend({attributes(){return{disabled:!!this.getOption("isShowingForm")}},tagName:"button",className:"button-secondary w-100 action-sidebar__form",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return s((c(o,"far")||e&&c(e,"far")||i).call(a,"square-poll-horizontal",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:32}}}))+"<span>"+s((t=(t=c(o,"name")||(e!=null?c(e,"name"):e))!=null?t:i,typeof t=="function"?t.call(a,{name:"name",hash:{},data:l,loc:{start:{line:1,column:38},end:{line:1,column:48}}}):t))+"</span>"},useData:!0}),triggers:{click:"click"}});function Bt(n){switch(n){case y.PENDING:case y.SENT:return{iconType:"fas",icon:"circle-dot",color:"black"};case y.RESPONDED:return{iconType:"fas",icon:"circle-check",color:"green"};case y.CANCELED:case y.ERROR_OPT_OUT:return{iconType:"far",icon:"octagon-minus",color:"orange"};default:return{iconType:"fas",icon:"circle-exclamation",color:"red"}}}const Yt=h.extend({className:"sidebar__dialog",triggers:{"click .js-share":"click:share","click .js-cancel":"click:cancelShare","click .js-undo-cancel":"click:undoCancelShare","click .js-response":"click:response"},template:Ut,templateContext(){const n=this.model.getPatient(),e=this.model.get("sharing"),o=Bt(e),u=e===y.PENDING,l=e===y.SENT,t=e===y.RESPONDED,a=e===y.CANCELED;return{stateOptions:o,isWaiting:l||u,isResponded:t,isCanceled:a,isError:!u&&!l&&!t&&!a,patient:n.pick("first_name","last_name"),isDone:this.model.isDone()}}}),Kt=h.extend({modelEvents:{"change:sharing":"onChangeSharing","change:_state":"onChangeActionState"},childViewTriggers:{"click:share":"click:share","click:cancelShare":"click:cancelShare","click:undoCancelShare":"click:undoCancelShare"},template:d.template({1:function(n,e,o,u,l){return" u-margin--t-8"},3:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<h4 class="sidebar__label u-margin--t-8">'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"sidebar"))&&a(t,"action"))&&a(t,"actionSidebarFormsViews"))&&a(t,"formLayoutView"))&&a(t,"formLabel"),e))+"</h4>"},5:function(n,e,o,u,l){return" u-margin--t-24"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`
    <div class="flex`+((t=i(o,"if").call(a,e!=null?i(e,"hasForm"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:20},end:{line:2,column:56}}}))!=null?t:"")+`">
      `+((t=i(o,"if").call(a,e!=null?i(e,"hasForm"):e,{name:"if",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:3,column:6},end:{line:3,column:158}}}))!=null?t:"")+`
      <div class="flex-grow" data-form-region></div>
    </div>
    <div class="flex`+((t=i(o,"if").call(a,e!=null?i(e,"hasSharing"):e,{name:"if",hash:{},fn:n.program(5,l,0),inverse:n.noop,data:l,loc:{start:{line:6,column:20},end:{line:6,column:60}}}))!=null?t:"")+`">
      <div class="flex-grow" data-form-sharing-region></div>
    </div>
  `},useData:!0}),templateContext(){return{hasSharing:this.model.hasSharing(),hasForm:!!this.model.getForm()}},regions:{form:"[data-form-region]",formSharing:"[data-form-sharing-region]"},onChangeSharing(){this.showFormSharing()},onChangeActionState(){this.showFormSharing()},onRender(){this.showForm(),this.showFormSharing()},showForm(){const n=this.model.getForm();if(!n)return;const e=new zt({model:n,isShowingForm:this.getOption("isShowingForm")});this.listenTo(e,"click",()=>{this.triggerMethod("click:form",n)}),this.showChildView("form",e)},showFormSharing(){if(!this.model.hasSharing())return;const n=new Yt({model:this.model});this.listenTo(n,"click:response",()=>{this.triggerMethod("click:form",this.model.getForm())}),this.showChildView("formSharing",n)}}),Jt=h.extend({className:"comment__actions",template:d.template({1:function(n,e,o,u,l){return"disabled"},3:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return"        "+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"shared"))&&a(t,"commentsViews"))&&a(t,"postCommentView"))&&a(t,"postBtn"),e))+`
`},5:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return"        "+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"shared"))&&a(t,"commentsViews"))&&a(t,"postCommentView"))&&a(t,"saveBtn"),e))+`
`},7:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<button class="button--text u-margin--r-4 js-cancel">'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"shared"))&&a(t,"commentsViews"))&&a(t,"postCommentView"))&&a(t,"cancelBtn"),e))+"</button>"},9:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return'<button class="button--text u-float--left comment__delete js-delete"><span class="u-margin--r-4">'+a((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"trash-can",{name:"far",hash:{},data:l,loc:{start:{line:10,column:118},end:{line:10,column:137}}}))+"</span>"+a(n.lambda((t=(t=(t=(t=(t=l&&i(l,"intl"))&&i(t,"patients"))&&i(t,"shared"))&&i(t,"commentsViews"))&&i(t,"postCommentView"))&&i(t,"deleteBtn"),e))+"</button>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`
    <button class="button--green js-post" `+((t=i(o,"if").call(a,e!=null?i(e,"isDisabled"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:42},end:{line:2,column:75}}}))!=null?t:"")+`>
`+((t=i(o,"if").call(a,e!=null?i(e,"isNew"):e,{name:"if",hash:{},fn:n.program(3,l,0),inverse:n.program(5,l,0),data:l,loc:{start:{line:3,column:6},end:{line:7,column:13}}}))!=null?t:"")+`    </button>
    `+((t=i(o,"unless").call(a,e!=null?i(e,"shouldHideCancel"):e,{name:"unless",hash:{},fn:n.program(7,l,0),inverse:n.noop,data:l,loc:{start:{line:9,column:4},end:{line:9,column:172}}}))!=null?t:"")+`
    `+((t=i(o,"unless").call(a,e!=null?i(e,"isNew"):e,{name:"unless",hash:{},fn:n.program(9,l,0),inverse:n.noop,data:l,loc:{start:{line:10,column:4},end:{line:10,column:231}}}))!=null?t:"")+`
  `},useData:!0}),templateContext(){const n=this.getOption("shouldHideCancel"),e=!this.model.isValid()||!this.model.hasChanged("message"),o=this.model.isNew();return{shouldHideCancel:n,isDisabled:e,isNew:o}},triggers:{"click .js-cancel":"cancel","click .js-post":"post","click .js-delete":"delete"}}),Be=h.extend({behaviors:[O],modelEvents:{"change:message":"showPostView"},ui:{input:".js-input",spacer:".js-spacer"},template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c="function",r=n.escapeExpression,m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return`
    <div class="flex comment__form">
      <span class="comment__author-label">`+r((a=(a=m(o,"initials")||(e!=null?m(e,"initials"):e))!=null?a:s,typeof a===c?a.call(i,{name:"initials",hash:{},data:l,loc:{start:{line:3,column:42},end:{line:3,column:56}}}):a))+`</span>
      <div class="flex-grow pos--relative">
        <textarea class="input-secondary textarea-flex__input js-input" placeholder="`+r(n.lambda((t=(t=(t=(t=(t=l&&m(l,"intl"))&&m(t,"patients"))&&m(t,"shared"))&&m(t,"commentsViews"))&&m(t,"commentFormView"))&&m(t,"placeholder"),e))+'">'+r((a=(a=m(o,"message")||(e!=null?m(e,"message"):e))!=null?a:s,typeof a===c?a.call(i,{name:"message",hash:{},data:l,loc:{start:{line:5,column:156},end:{line:5,column:169}}}):a))+`</textarea>
        <div class="textarea-flex__container input-secondary comment__input js-spacer">`+r((a=(a=m(o,"message")||(e!=null?m(e,"message"):e))!=null?a:s,typeof a===c?a.call(i,{name:"message",hash:{},data:l,loc:{start:{line:6,column:87},end:{line:6,column:100}}}):a))+`</div>
      </div>
    </div>
    <div data-post-region></div>
  `},useData:!0}),regions:{post:"[data-post-region]"},childViewTriggers:{post:"post:comment",cancel:"cancel:comment",delete:"confirm:delete"},templateContext(){return{initials:this.model.getClinician().getInitials()}},onRender(){this.showPostView()},onWatchChange(n){this.ui.input.val(n),this.ui.spacer.text(n||" "),this.model.set("message",M(n))},showPostView(){const n=this.model.isNew()&&!this.model.get("message");this.showChildView("post",new Jt({model:this.model,shouldHideCancel:n}))},onConfirmDelete(){const n=f.request("modal","show:small",{bodyText:w.patients.shared.commentsViews.commentFormView.deleteModal.bodyText,headingText:w.patients.shared.commentsViews.commentFormView.deleteModal.headingText,submitText:w.patients.shared.commentsViews.commentFormView.deleteModal.submitText,buttonClass:"button--red",onSubmit:()=>{n.destroy(),this.triggerMethod("delete:comment",this.model)}})}}),Qt=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"created",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:56}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:57}}}),{name:"formatHTMLMessage",hash:{team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:83}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),Xt=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"clinicianAssigned",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:66}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:67}}}),{name:"formatHTMLMessage",hash:{to_name:e!=null?s(e,"to_clinician"):e,team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:116}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),Zt=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"actionCopiedFromProgram",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:72}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:73}}}),{name:"formatHTMLMessage",hash:{source:e!=null?s(e,"source"):e,program:e!=null?s(e,"program"):e,team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:133}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),en=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"detailsUpdated",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:63}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:64}}}),{name:"formatHTMLMessage",hash:{team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:90}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),tn=d.template({1:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return"  "+n.escapeExpression((i(o,"formatHTMLMessage")||e&&i(e,"formatHTMLMessage")||a).call(t,(i(o,"intlGet")||e&&i(e,"intlGet")||a).call(t,(i(o,"getI18nSource")||e&&i(e,"getI18nSource")||a).call(t,"dueDateCleared",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:3,column:31},end:{line:3,column:63}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:3,column:22},end:{line:3,column:64}}}),{name:"formatHTMLMessage",hash:{team:e!=null?i(e,"team"):e,name:e!=null?i(e,"name"):e},data:l,loc:{start:{line:3,column:2},end:{line:3,column:91}}}))+`
`},3:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return"  "+n.escapeExpression((i(o,"formatHTMLMessage")||e&&i(e,"formatHTMLMessage")||a).call(t,(i(o,"intlGet")||e&&i(e,"intlGet")||a).call(t,(i(o,"getI18nSource")||e&&i(e,"getI18nSource")||a).call(t,"dueDateUpdated",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:5,column:31},end:{line:5,column:63}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:5,column:22},end:{line:5,column:64}}}),{name:"formatHTMLMessage",hash:{date:(i(o,"formatDateTime")||e&&i(e,"formatDateTime")||a).call(t,e!=null?i(e,"value"):e,"LONG",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:5,column:96},end:{line:5,column:125}}}),team:e!=null?i(e,"team"):e,name:e!=null?i(e,"name"):e},data:l,loc:{start:{line:5,column:2},end:{line:5,column:127}}}))+`
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`
`+((t=i(o,"unless").call(a,e!=null?i(e,"value"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.program(3,l,0),data:l,loc:{start:{line:2,column:2},end:{line:6,column:13}}}))!=null?t:"")+"  <div>"+n.escapeExpression((i(o,"formatDateTime")||e&&i(e,"formatDateTime")||n.hooks.helperMissing).call(a,e!=null?i(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+`</div>
`},useData:!0}),nn=d.template({1:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return"  "+n.escapeExpression((i(o,"formatHTMLMessage")||e&&i(e,"formatHTMLMessage")||a).call(t,(i(o,"intlGet")||e&&i(e,"intlGet")||a).call(t,(i(o,"getI18nSource")||e&&i(e,"getI18nSource")||a).call(t,"dueTimeCleared",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:3,column:31},end:{line:3,column:63}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:3,column:22},end:{line:3,column:64}}}),{name:"formatHTMLMessage",hash:{team:e!=null?i(e,"team"):e,name:e!=null?i(e,"name"):e},data:l,loc:{start:{line:3,column:2},end:{line:3,column:91}}}))+`
`},3:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return"  "+n.escapeExpression((i(o,"formatHTMLMessage")||e&&i(e,"formatHTMLMessage")||a).call(t,(i(o,"intlGet")||e&&i(e,"intlGet")||a).call(t,(i(o,"getI18nSource")||e&&i(e,"getI18nSource")||a).call(t,"dueTimeUpdated",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:5,column:31},end:{line:5,column:63}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:5,column:22},end:{line:5,column:64}}}),{name:"formatHTMLMessage",hash:{time:(i(o,"formatDateTime")||e&&i(e,"formatDateTime")||a).call(t,e!=null?i(e,"value"):e,"LT",{name:"formatDateTime",hash:{inputFormat:"HH:mm:ss"},data:l,loc:{start:{line:5,column:96},end:{line:5,column:146}}}),team:e!=null?i(e,"team"):e,name:e!=null?i(e,"name"):e},data:l,loc:{start:{line:5,column:2},end:{line:5,column:148}}}))+`
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`
`+((t=i(o,"unless").call(a,e!=null?i(e,"value"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.program(3,l,0),data:l,loc:{start:{line:2,column:2},end:{line:6,column:13}}}))!=null?t:"")+"  <div>"+n.escapeExpression((i(o,"formatDateTime")||e&&i(e,"formatDateTime")||n.hooks.helperMissing).call(a,e!=null?i(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+`</div>
`},useData:!0}),an=d.template({1:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return"  "+n.escapeExpression((i(o,"formatHTMLMessage")||e&&i(e,"formatHTMLMessage")||a).call(t,(i(o,"intlGet")||e&&i(e,"intlGet")||a).call(t,(i(o,"getI18nSource")||e&&i(e,"getI18nSource")||a).call(t,"durationCleared",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:3,column:31},end:{line:3,column:64}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:3,column:22},end:{line:3,column:65}}}),{name:"formatHTMLMessage",hash:{team:e!=null?i(e,"team"):e,name:e!=null?i(e,"name"):e},data:l,loc:{start:{line:3,column:2},end:{line:3,column:91}}}))+`
`},3:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return"  "+n.escapeExpression((i(o,"formatHTMLMessage")||e&&i(e,"formatHTMLMessage")||a).call(t,(i(o,"intlGet")||e&&i(e,"intlGet")||a).call(t,(i(o,"getI18nSource")||e&&i(e,"getI18nSource")||a).call(t,"durationUpdated",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:5,column:31},end:{line:5,column:64}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:5,column:22},end:{line:5,column:65}}}),{name:"formatHTMLMessage",hash:{duration:e!=null?i(e,"value"):e,team:e!=null?i(e,"team"):e,name:e!=null?i(e,"name"):e},data:l,loc:{start:{line:5,column:2},end:{line:5,column:108}}}))+`
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`
`+((t=i(o,"unless").call(a,e!=null?i(e,"value"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.program(3,l,0),data:l,loc:{start:{line:2,column:2},end:{line:6,column:13}}}))!=null?t:"")+"  <div>"+n.escapeExpression((i(o,"formatDateTime")||e&&i(e,"formatDateTime")||n.hooks.helperMissing).call(a,e!=null?i(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+`</div>
`},useData:!0}),ln=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"formUpdated",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:60}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:61}}}),{name:"formatHTMLMessage",hash:{form:e!=null?s(e,"form"):e,team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:99}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),sn=d.template({1:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return"    "+n.escapeExpression((i(o,"formatHTMLMessage")||e&&i(e,"formatHTMLMessage")||a).call(t,(i(o,"intlGet")||e&&i(e,"intlGet")||a).call(t,(i(o,"getI18nSource")||e&&i(e,"getI18nSource")||a).call(t,"formResponded",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:3,column:33},end:{line:3,column:64}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:3,column:24},end:{line:3,column:65}}}),{name:"formatHTMLMessage",hash:{form:e!=null?i(e,"form"):e,team:e!=null?i(e,"team"):e,name:e!=null?i(e,"name"):e},data:l,loc:{start:{line:3,column:4},end:{line:3,column:103}}}))+`
`},3:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return"    "+n.escapeExpression((i(o,"formatHTMLMessage")||e&&i(e,"formatHTMLMessage")||a).call(t,(i(o,"intlGet")||e&&i(e,"intlGet")||a).call(t,(i(o,"getI18nSource")||e&&i(e,"getI18nSource")||a).call(t,"formRecipientResponded",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:5,column:33},end:{line:5,column:73}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:5,column:24},end:{line:5,column:74}}}),{name:"formatHTMLMessage",hash:{form:e!=null?i(e,"form"):e,recipient:e!=null?i(e,"recipient"):e},data:l,loc:{start:{line:5,column:4},end:{line:5,column:110}}}))+`
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`
`+((t=i(o,"if").call(a,e!=null?i(e,"_editor"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.program(3,l,0),data:l,loc:{start:{line:2,column:2},end:{line:6,column:9}}}))!=null?t:"")+"  <div>"+n.escapeExpression((i(o,"formatDateTime")||e&&i(e,"formatDateTime")||n.hooks.helperMissing).call(a,e!=null?i(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+`</div>
`},useData:!0}),on=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"nameUpdated",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:60}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:61}}}),{name:"formatHTMLMessage",hash:{from_name:e!=null?s(e,"previous"):e,to_name:e!=null?s(e,"value"):e,team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:124}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),rn=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"teamAssigned",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:61}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:62}}}),{name:"formatHTMLMessage",hash:{to_team:e!=null?s(e,"to_team"):e,team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:106}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),cn=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"stateUpdated",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:61}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:62}}}),{name:"formatHTMLMessage",hash:{to_state:e!=null?s(e,"to_state"):e,team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:108}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),un=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"sharingCanceled",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:64}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:65}}}),{name:"formatHTMLMessage",hash:{team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:91}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),mn=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"sharingSent",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:60}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:61}}}),{name:"formatHTMLMessage",hash:{form:e!=null?s(e,"form"):e,recipient:e!=null?s(e,"recipient"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:97}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),pn=h.extend({className:"u-margin--b-16",ui:{edit:".js-edit"},triggers:{"click @ui.edit":"click:edit"},childViewTriggers:{"cancel:comment":"cancel:edit","post:comment":"save:comment","delete:comment":"delete:comment"},regions:{comment:"[data-comment-activity-region]"},template:d.template({1:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return'<span class="js-edit comment__edit">'+a((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"pen",{name:"far",hash:{},data:l,loc:{start:{line:8,column:61},end:{line:8,column:74}}}))+" "+a(n.lambda((t=(t=(t=(t=(t=(t=l&&i(l,"intl"))&&i(t,"patients"))&&i(t,"sidebar"))&&i(t,"action"))&&i(t,"activityViews"))&&i(t,"commentView"))&&i(t,"edit"),e))+"</span>"},3:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<span class="comment__edited"> '+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"sidebar"))&&a(t,"action"))&&a(t,"activityViews"))&&a(t,"commentView"))&&a(t,"edited"),e))+" </span>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c="function",r=n.escapeExpression,m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return`
    <div data-comment-activity-region>
      <div class="comment__item">
        <div class="comment__author-label">`+r((a=(a=m(o,"initials")||(e!=null?m(e,"initials"):e))!=null?a:s,typeof a===c?a.call(i,{name:"initials",hash:{},data:l,loc:{start:{line:4,column:43},end:{line:4,column:57}}}):a))+`</div>
        <div class="comment__title">
          <span class="comment__author-name">`+r((a=(a=m(o,"name")||(e!=null?m(e,"name"):e))!=null?a:s,typeof a===c?a.call(i,{name:"name",hash:{},data:l,loc:{start:{line:6,column:45},end:{line:6,column:55}}}):a))+`</span>
          <span class="comment__timestamp">`+r((m(o,"formatDateTime")||e&&m(e,"formatDateTime")||s).call(i,e!=null?m(e,"created_at"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:7,column:43},end:{line:7,column:84}}}))+`</span>
          `+((t=m(o,"if").call(i,e!=null?m(e,"canEdit"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:8,column:10},end:{line:8,column:155}}}))!=null?t:"")+`
        </div>
        <div class="comment__message">`+r((a=(a=m(o,"message")||(e!=null?m(e,"message"):e))!=null?a:s,typeof a===c?a.call(i,{name:"message",hash:{},data:l,loc:{start:{line:10,column:38},end:{line:10,column:51}}}):a))+((t=m(o,"if").call(i,e!=null?m(e,"edited_at"):e,{name:"if",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:10,column:51},end:{line:10,column:182}}}))!=null?t:"")+`</div>
      </div>
    </div>
  `},useData:!0}),templateContext(){const n=this.model.getClinician(),e=f.request("bootstrap","currentUser");return{canEdit:n.id===e.id,name:n.get("name"),initials:n.getInitials()}},onRender(){const n=this.model.get("edited_at");if(!n)return;const e=d.template({compiler:[8,">= 4.3.0"],main:function(o,u,l,t,a){var i=u??(o.nullContext||{}),s=o.hooks.helperMissing,c=o.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return o.escapeExpression((c(l,"formatHTMLMessage")||u&&c(u,"formatHTMLMessage")||s).call(i,(c(l,"intlGet")||u&&c(u,"intlGet")||s).call(i,"patients.sidebar.action.activityViews.commentView.editTooltip",{name:"intlGet",hash:{},data:a,loc:{start:{line:1,column:20},end:{line:1,column:93}}}),{name:"formatHTMLMessage",hash:{edited:(c(l,"formatDateTime")||u&&c(u,"formatDateTime")||s).call(i,u!=null?c(u,"edited"):u,"TIME",{name:"formatDateTime",hash:{},data:a,loc:{start:{line:1,column:104},end:{line:1,column:134}}})},data:a,loc:{start:{line:1,column:0},end:{line:1,column:137}}}))},useData:!0});new Ne({messageHtml:ue(e,{edited:n}),uiView:this,ui:this.ui.edit})},onClickEdit(){this.showChildView("comment",new Be({model:this.model.clone()}))},onSaveComment({model:n}){this.model.save({message:n.get("message"),edited_at:b.utc().format()}),this.render()},onCancelEdit(){this.render()},onDeleteComment(){this.model.destroy()}}),dn=h.extend({className:"action-sidebar__activity-item",getTemplate(){const n=this.model.get("event_type"),e={ActionClinicianAssigned:Xt,ActionCreated:Qt,ActionDetailsUpdated:en,ActionDueDateUpdated:tn,ActionDueTimeUpdated:nn,ActionDurationUpdated:an,ActionFormUpdated:ln,ActionFormResponded:sn,ActionNameUpdated:on,ActionCopiedFromProgramAction:Zt,ActionTeamAssigned:rn,ActionStateUpdated:cn};if(n==="ActionSharingUpdated"){const o=this.model.get("value");if(o===y.SENT)return mn;if(o===y.CANCELED)return un}return e[n]?e[n]:d.template({compiler:[8,">= 4.3.0"],main:function(o,u,l,t,a){return""},useData:!0})},templateContext(){const n=this.model.getRecipient(),e=this.model.getEditor(),o=this.model.getClinician(),u=this.model.getProgram(),l=this.model.getForm(),t=`patients.sidebar.action.activityViews.${this.model.get("source")}`;return{recipient:n?`${n.get("first_name")} ${n.get("last_name")}`:null,name:e.get("name"),team:e.getTeam().get("name"),to_clinician:o.get("name"),to_team:this.model.getTeam().get("name"),to_state:this.model.getState().get("name"),program:u?u.get("name"):null,form:l?l.get("name"):null,getI18nSource(a){return`${t}.${a}`}}}}),fn=T.extend({className:"u-margin--t-24",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`
    <h3 class="sidebar__heading">
      `+a((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"timeline-arrow",{name:"far",hash:{},data:l,loc:{start:{line:3,column:6},end:{line:3,column:30}}}))+'<span class="u-margin--l-8">'+a(n.lambda((t=(t=(t=(t=(t=l&&i(l,"intl"))&&i(t,"patients"))&&i(t,"sidebar"))&&i(t,"action"))&&i(t,"activityViews"))&&i(t,"activityHeadingText"),e))+`</span>
    </h3>
    <div class="u-margin--t-16 sidebar__activity" data-activities-region></div>
  `},useData:!0}),childViewContainer:"[data-activities-region]",childView(n){return n.type==="events"?dn:pn},viewFilter({model:n}){return!(n.get("event_type")==="ActionCreated"&&n.get("source")==="system")},viewComparator(n,e){return Le("asc",this._getSortDate(n.model),this._getSortDate(e.model))},_getSortDate(n){return n.get("date")?n.get("date"):n.get("created_at")}}),hn=h.extend({className:"sidebar__footer flex",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.hooks.helperMissing,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`
    <div class="sidebar__footer-left"><h4 class="sidebar__label">`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"patients"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"activityViews"))&&r(t,"createdAt"),e))+"</h4><div>"+i((r(o,"formatDateTime")||e&&r(e,"formatDateTime")||c).call(s,e!=null?r(e,"createdAt"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:2,column:134},end:{line:2,column:172}}}))+`</div></div>
    <div><h4 class="sidebar__label">`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"patients"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"activityViews"))&&r(t,"updatedAt"),e))+"</h4><div>"+i((r(o,"formatDateTime")||e&&r(e,"formatDateTime")||c).call(s,e!=null?r(e,"updated_at"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:105},end:{line:3,column:144}}}))+`</div></div>
  `},useData:!0}),templateContext(){return{createdAt:this.getOption("createdEvent").get("date")}}}),gn=h.extend({className:"action-sidebar__no-results",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"sidebar"))&&a(t,"action"))&&a(t,"actionSidebarAttachmentsViews"))&&a(t,"emptyView"),e))},useData:!0})}),wn=h.extend({className:"u-margin--t-16",modelEvents:{"change:_progress":"onChangeProgress","change:_download":"render"},downloadTemplate:d.template({1:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`        <a class="action-sidebar__attachment-action js-remove">
          `+a((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"trash-can",{name:"far",hash:{},data:l,loc:{start:{line:9,column:10},end:{line:9,column:29}}}))+" <span>"+a(n.lambda((t=(t=(t=(t=(t=(t=l&&i(l,"intl"))&&i(t,"patients"))&&i(t,"sidebar"))&&i(t,"action"))&&i(t,"actionSidebarAttachmentsViews"))&&i(t,"attachmentView"))&&i(t,"removeText"),e))+`</span>
        </a>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c="function",r=n.escapeExpression,m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return`
    <a class="action-sidebar__attachment-filename" target="_blank" href="`+r((a=(a=m(o,"_view")||(e!=null?m(e,"_view"):e))!=null?a:s,typeof a===c?a.call(i,{name:"_view",hash:{},data:l,loc:{start:{line:2,column:73},end:{line:2,column:82}}}):a))+'">'+r((a=(a=m(o,"filename")||(e!=null?m(e,"filename"):e))!=null?a:s,typeof a===c?a.call(i,{name:"filename",hash:{},data:l,loc:{start:{line:2,column:84},end:{line:2,column:96}}}):a))+`</a>
    <div class="flex">
      <a class="action-sidebar__attachment-action flex-grow" href="`+r((a=(a=m(o,"_download")||(e!=null?m(e,"_download"):e))!=null?a:s,typeof a===c?a.call(i,{name:"_download",hash:{},data:l,loc:{start:{line:4,column:67},end:{line:4,column:80}}}):a))+`" download>
        `+r((m(o,"far")||e&&m(e,"far")||s).call(i,"download",{name:"far",hash:{},data:l,loc:{start:{line:5,column:8},end:{line:5,column:26}}}))+" <span>"+r(n.lambda((t=(t=(t=(t=(t=(t=l&&m(l,"intl"))&&m(t,"patients"))&&m(t,"sidebar"))&&m(t,"action"))&&m(t,"actionSidebarAttachmentsViews"))&&m(t,"attachmentView"))&&m(t,"downloadText"),e))+`</span>
      </a>
`+((t=m(o,"if").call(i,e!=null?m(e,"canRemoveAttachments"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:7,column:5},end:{line:11,column:13}}}))!=null?t:"")+`    </div>
  `},useData:!0}),uploadTemplate:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return`
    <div class="action-sidebar__attachment-filename">`+n.escapeExpression((t=(t=a(o,"filename")||(e!=null?a(e,"filename"):e))!=null?t:n.hooks.helperMissing,typeof t=="function"?t.call(e??(n.nullContext||{}),{name:"filename",hash:{},data:l,loc:{start:{line:2,column:53},end:{line:2,column:65}}}):t))+`</div>
    <div class="loader__bar u-margin--t-8 js-progress-bar">
      <div class="loader__bar-progress js-progress"></div>
    </div>
  `},useData:!0}),ui:{progress:".js-progress",remove:".js-remove"},triggers:{"click @ui.remove":"click:remove"},onChangeProgress(){!this.isRendered()||!this.ui.progress.length||dt({targets:this.ui.progress[0],width:`${this.model.get("_progress")}%`,easing:"easeInOutSine"})},onClickRemove(){const n=f.request("modal","show:small",{bodyText:w.patients.sidebar.action.actionSidebarAttachmentsViews.removeModal.bodyText,headingText:w.patients.sidebar.action.actionSidebarAttachmentsViews.removeModal.headingText,submitText:w.patients.sidebar.action.actionSidebarAttachmentsViews.removeModal.submitText,buttonClass:"button--red",onSubmit:()=>{n.destroy(),this.triggerMethod("remove:attachment",this.model)}})},getTemplate(){return this.model.get("_download")?this.downloadTemplate:this.uploadTemplate},templateContext(){return{filename:this.model.getFilename(),canRemoveAttachments:this.getOption("canRemoveAttachments")}}}),vn=T.extend({className:"u-margin--t-24",collectionEvents:{changeId:"filter"},template:d.template({1:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`        <form>
          <input type="file" id="upload-attachment" accept=".pdf" class="action-sidebar__attachment-file js-file">
          <label for="upload-attachment" class="button-primary u-margin--t-16 js-add">`+a((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"paperclip",{name:"far",hash:{},data:l,loc:{start:{line:10,column:86},end:{line:10,column:105}}}))+"<span>"+a(n.lambda((t=(t=(t=(t=(t=(t=l&&i(l,"intl"))&&i(t,"patients"))&&i(t,"sidebar"))&&i(t,"action"))&&i(t,"actionSidebarAttachmentsViews"))&&i(t,"attachmentsViews"))&&i(t,"addAttachment"),e))+`</span></label>
        </form>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
    <div class="sidebar__attachments">
      <h3 class="sidebar__heading">
        `+i((s(o,"far")||e&&s(e,"far")||n.hooks.helperMissing).call(a,"paperclip",{name:"far",hash:{},data:l,loc:{start:{line:4,column:8},end:{line:4,column:27}}}))+'<span class="u-margin--l-8">'+i(n.lambda((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"patients"))&&s(t,"sidebar"))&&s(t,"action"))&&s(t,"actionSidebarAttachmentsViews"))&&s(t,"attachmentsViews"))&&s(t,"attachmentsHeadingText"),e))+`</span>
      </h3>
      <div data-attachments-files-region></div>
`+((t=s(o,"if").call(a,e!=null?s(e,"canUploadAttachments"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:7,column:6},end:{line:12,column:13}}}))!=null?t:"")+`    </div>
  `},useData:!0}),templateContext(){return{canUploadAttachments:this.getOption("canUploadAttachments")}},childViewContainer:"[data-attachments-files-region]",childView:wn,childViewOptions(){return{canRemoveAttachments:this.getOption("canRemoveAttachments")}},emptyView:gn,viewComparator(n,e){return Le("desc",n.model.get("created_at"),e.model.get("created_at"))},viewFilter({model:n}){return!n.isNew()},ui:{file:".js-file",add:".js-add"},events:{"change @ui.file":"onChangeFile","click @ui.add":"onClickAdd"},onClickAdd(){this.ui.file[0].value=""},onChangeFile(){const n=this.ui.file[0].files[0];n&&this.triggerMethod("add:attachment",n)},childViewTriggers:{"remove:attachment":"remove:attachment"}}),bn=C.extend({setAccess(){const n=!this.action.isFlowDone()&&this.action.canEdit(),e=this.action.canDelete();this.setState({canEdit:n,canDelete:e})},stateEvents:{"change:canEdit":"onStateChangeCanEdit","change:canDelete":"onStateChangeCanDelete"},onStateChangeCanEdit(){this.showAction()},onStateChangeCanDelete(){this.showMenu()},onBeforeStart({action:n,isShowingForm:e}){this.action=n,this.isShowingForm=e,this.setAccess(),this.setView(new wt({model:this.action}));const o=this.action.getFlow();o&&this.listenTo(o,"change:_state",this.setAccess),this.listenTo(n,"change:_owner",this.onChangeOwner),this.showMenu(),this.showAction(),this.showForm(),this.getRegion("activity").startPreloader(),this.showView()},onBeforeStop(){const n=this.action.getFlow();n&&this.stopListening(n),this.stopListening(this.action)},beforeStart(){return[f.request("entities","fetch:actionEvents:collection",this.action.id),f.request("entities","fetch:comments:collection:byAction",this.action.id),f.request("entities","fetch:files:collection:byAction",this.action.id)]},onChangeOwner(){this.setAccess(),this.isRunning()&&this.showAttachments()},onStart(n,e,o,u){this.activityCollection=new v.Collection([...e.models,...o.models]),this.attachments=u,this.showActivity(),this.showNewCommentForm(),this.showAttachments()},viewEvents:{close:"stop"},showAction(){if(!this.getState("canEdit")){this.showChildView("action",new qt({model:this.action}));return}const n=new Wt({model:this.action});this.listenTo(n,{save:this.onSave}),this.showChildView("action",n)},showMenu(){if(!this.getState("canDelete")){this.getRegion("menu").empty();return}const n=new gt({model:this.action});this.listenTo(n,"delete",this.onDelete),this.showChildView("menu",n)},showForm(){if(!this.action.getForm()&&!this.action.hasSharing())return;const n=this.showChildView("form",new Kt({model:this.action,isShowingForm:this.isShowingForm}));this.listenTo(n,{"click:form":this.onClickForm,"click:share":this.onClickShare,"click:cancelShare":this.onClickCancel,"click:undoCancelShare":this.onClickUndoCancel})},showActivity(){this.showChildView("activity",new fn({collection:this.activityCollection,model:this.action}));const n=this.activityCollection.find({event_type:"ActionCreated"});this.showChildView("timestamps",new hn({model:this.action,createdEvent:n}))},showNewCommentForm(){const n=f.request("bootstrap","currentUser"),e=this.showChildView("comment",new Be({model:f.request("entities","comments:model",{_action:this.action.id,_clinician:n.id})}));this.listenTo(e,{"post:comment":this.onPostNewComment,"cancel:comment":this.onCancelNewComment})},showAttachments(){const n=!!f.request("settings","get","upload_attachments")&&this.action.hasAllowedUploads();if(!n&&!this.attachments.length)return;const e=new vn({collection:this.attachments,canUploadAttachments:n,canRemoveAttachments:this.action.canEdit()});this.listenTo(e,{"add:attachment":this.onAddAttachment,"remove:attachment":this.onRemoveAttachment}),this.showChildView("attachments",e)},onAddAttachment(n){const e=this.attachments.add({_action:this.action.id,_patient:this.action.getPatient().id,created_at:b.utc().format()});e.upload(n),this.listenTo(e,"upload:failed",()=>{f.request("alert","show:error",w.patients.sidebar.actionSidebarApp.uploadError)})},onRemoveAttachment(n){n.destroy()},onSave({model:n}){this.action.save({details:n.get("details")})},onDelete(){this.action.destroy({wait:!0}).then(()=>{this.stop()}).catch(({responseData:n})=>{f.request("alert","show:apiError",n)})},onStop(){this.action.trigger("editing",!1),f.request("sidebar","close")},onClickForm(n){f.trigger("event-router","form:patientAction",this.action.id,n.id)},onClickShare(){this.action.save({sharing:y.PENDING})},onClickCancel(){this.action.save({sharing:y.CANCELED})},onClickUndoCancel(){this.action.save({sharing:y.PENDING})},onPostNewComment({model:n}){n.set({created_at:b.utc().format()}).save(),this.activityCollection.add(n),this.showNewCommentForm()},onCancelNewComment(){this.showNewCommentForm()}}),F=w.patients.shared.flowsViews,kn=$e.extend({onPicklistSelect({model:n}){if(n.isDone()&&this.getOption("flow")){this.shouldSelectDone(n);return}this.setSelectedStatus(n)},shouldSelectDone(n){if(this.getOption("flow").isAllDone()){this.setSelectedStatus(n);return}if(this.popRegion.empty(),f.request("settings","get","require_done_flow")){f.request("modal","show:small",{bodyText:F.requireDoneModal.bodyText,headingText:F.requireDoneModal.headingText,submitText:F.requireDoneModal.submitText,cancelText:!1,buttonClass:"button--blue"});return}const o=f.request("modal","show:small",{bodyText:F.doneModal.bodyText,headingText:F.doneModal.headingText,submitText:F.doneModal.submitText,onSubmit:()=>{this.setSelectedStatus(n),o.destroy()}})},setSelectedStatus(n){this.setState("selected",n),this.popRegion.empty()}}),yn=d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<span class="sidebar--no-results">'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"sidebar"))&&a(t,"flow"))&&a(t,"flowSidebarTemplate"))&&a(t,"noDetails"),e))+"</span>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=n.lambda,s=n.escapeExpression,c=e??(n.nullContext||{}),r=n.hooks.helperMissing,m="function",p=n.lookupProperty||function(g,x){if(Object.prototype.hasOwnProperty.call(g,x))return g[x]};return`<div class="flex-grow">
  <div class="flex">
    <div class="flex-grow">
      <h3 class="sidebar__heading">`+s(i((t=(t=(t=(t=(t=l&&p(l,"intl"))&&p(t,"patients"))&&p(t,"sidebar"))&&p(t,"flow"))&&p(t,"flowSidebarTemplate"))&&p(t,"headingText"),e))+`</h3>
    </div>
    <div>
      <span class="u-margin--r-8" data-menu-region></span>
      <button class="button--icon js-close">`+s((p(o,"fas")||e&&p(e,"fas")||r).call(c,"xmark",{name:"fas",hash:{},data:l,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+`</button>
    </div>
  </div>
  <div class="u-margin--t-16">
    <div class="patient-flow-sidebar__name">`+s((a=(a=p(o,"name")||(e!=null?p(e,"name"):e))!=null?a:r,typeof a===m?a.call(c,{name:"name",hash:{},data:l,loc:{start:{line:12,column:44},end:{line:12,column:54}}}):a))+`</div>
    <div class="sidebar__details">`+s((a=(a=p(o,"details")||(e!=null?p(e,"details"):e))!=null?a:r,typeof a===m?a.call(c,{name:"details",hash:{},data:l,loc:{start:{line:13,column:34},end:{line:13,column:47}}}):a))+((t=p(o,"unless").call(c,e!=null?p(e,"details"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:13,column:47},end:{line:13,column:181}}}))!=null?t:"")+`</div>
    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">`+s(i((t=(t=(t=(t=(t=l&&p(l,"intl"))&&p(t,"patients"))&&p(t,"sidebar"))&&p(t,"flow"))&&p(t,"flowSidebarTemplate"))&&p(t,"stateLabel"),e))+`</h4><div class="flex-grow" data-state-region></div></div>
    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">`+s(i((t=(t=(t=(t=(t=l&&p(l,"intl"))&&p(t,"patients"))&&p(t,"sidebar"))&&p(t,"flow"))&&p(t,"flowSidebarTemplate"))&&p(t,"ownerLabel"),e))+`</h4><div class="flex-grow" data-owner-region></div></div>
    <div data-permission-region></div>
  </div>
  <div class="u-margin--t-24">
    <h3 class="sidebar__heading">`+s(i((t=(t=(t=(t=(t=l&&p(l,"intl"))&&p(t,"patients"))&&p(t,"sidebar"))&&p(t,"flow"))&&p(t,"flowSidebarTemplate"))&&p(t,"activityHeadingText"),e))+`</h3>
    <div class="u-margin--t-8 sidebar__activity" data-activity-region></div>
  </div>
</div>
<div data-timestamps-region></div>
`},useData:!0}),Ye=w.patients.sidebar.flow.flowSidebarViews,xn=h.extend({className:"sidebar__footer flex",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.hooks.helperMissing,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`
    <div class="sidebar__footer-left"><h4 class="sidebar__label">`+i(a((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"patients"))&&r(t,"sidebar"))&&r(t,"flow"))&&r(t,"flowSidebarViews"))&&r(t,"timestampsView"))&&r(t,"createdAt"),e))+"</h4><div>"+i((r(o,"formatDateTime")||e&&r(e,"formatDateTime")||c).call(s,e!=null?r(e,"created_at"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:2,column:150},end:{line:2,column:189}}}))+`</div></div>
    <div><h4 class="sidebar__label">`+i(a((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"patients"))&&r(t,"sidebar"))&&r(t,"flow"))&&r(t,"flowSidebarViews"))&&r(t,"timestampsView"))&&r(t,"updatedAt"),e))+"</h4><div>"+i((r(o,"formatDateTime")||e&&r(e,"formatDateTime")||c).call(s,e!=null?r(e,"updated_at"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:121},end:{line:3,column:160}}}))+`</div></div>
  `},useData:!0})}),Tn=h.extend({tagName:"button",className:"button--icon",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"ellipsis",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:18}}}))},useData:!0}),triggers:{click:"click"}}),Cn=h.extend({className:"flex u-margin--t-8",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
    <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"patients"))&&s(t,"sidebar"))&&s(t,"flow"))&&s(t,"flowSidebarViews"))&&s(t,"permissionView"))&&s(t,"label"),e))+`</h4>
    <div class="flex flex--grow action-sidebar__info">
      `+i((s(o,"far")||e&&s(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"ban",{name:"far",hash:{},data:l,loc:{start:{line:4,column:6},end:{line:4,column:19}}}))+'<span class="u-margin--l-8">'+i(a((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"patients"))&&s(t,"sidebar"))&&s(t,"flow"))&&s(t,"flowSidebarViews"))&&s(t,"permissionView"))&&s(t,"info"),e))+`</span>
    </div>
  `},useData:!0})}),Pn=h.extend({childViewTriggers:{save:"save",cancel:"cancel"},className:"sidebar flex-region",template:yn,regions:{menu:"[data-menu-region]",state:"[data-state-region]",owner:"[data-owner-region]",permission:"[data-permission-region]",activity:{el:"[data-activity-region]",regionClass:me},timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close"},templateContext(){return{canEdit:this.model.canEdit()}},modelEvents:{"change:_state":"showOwner","change:_owner":"showFlow"},onAttach(){V(this.el)},onRender(){this.showFlow(),this.showTimestamps()},showFlow(){this.canEdit=this.model.canEdit(),this.canDelete=this.model.canDelete(),this.showActions(),this.showMenu()},showActions(){this.showState(),this.showOwner(),this.showPermission()},showMenu(){if(!this.canDelete){this.getRegion("menu").empty();return}const n=new Tn;this.listenTo(n,"click",this.onClickMenu),this.showChildView("menu",n)},onClickMenu(n){const e=new v.Collection([{onSelect:Y(this.triggerMethod,this,"delete")}]);new Q({ui:n.$el,uiView:this,headingText:Ye.layoutView.headingText,itemTemplate:d.template({compiler:[8,">= 4.3.0"],main:function(u,l,t,a,i){var s,c=u.escapeExpression,r=u.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return c((r(t,"far")||l&&r(l,"far")||u.hooks.helperMissing).call(l??(u.nullContext||{}),"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:i,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+c(u.lambda((s=(s=(s=(s=(s=(s=i&&r(i,"intl"))&&r(s,"patients"))&&r(s,"sidebar"))&&r(s,"flow"))&&r(s,"flowSidebarViews"))&&r(s,"layoutView"))&&r(s,"delete"),l))+"</span>"},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()},showState(){if(!this.canEdit){const e=new Ue({model:this.model});this.showChildView("state",e);return}const n=new kn({flow:this.model,stateId:this.model.get("_state")});this.listenTo(n,"change:state",e=>{this.model.saveState(e)}),this.showChildView("state",n)},showOwner(){if(!this.canEdit){const u=new ze({model:this.model});this.showChildView("owner",u);return}const n=this.model.isDone(),e=this.model.getProgram(),o=new We({owner:this.model.getOwner(),workspaces:e.getUserWorkspaces(),state:{isDisabled:n}});this.listenTo(o,"change:owner",u=>{this.model.saveOwner(u)}),this.showChildView("owner",o)},showTimestamps(){this.showChildView("timestamps",new xn({model:this.model}))},showPermission(){if(this.canEdit){this.getRegion("permission").empty();return}this.showChildView("permission",new Cn)}});function _n(n){return D({buttonClass:"button--red"},Ye.deleteModal,n)}const On=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"programStarted",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:63}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:64}}}),{name:"formatHTMLMessage",hash:{program:e!=null?s(e,"program"):e,team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:108}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),Sn=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"clinicianAssigned",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:66}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:67}}}),{name:"formatHTMLMessage",hash:{to_name:e!=null?s(e,"to_clinician"):e,team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:116}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),Dn=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"detailsUpdated",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:63}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:64}}}),{name:"formatHTMLMessage",hash:{team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:90}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),Mn=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"nameUpdated",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:60}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:61}}}),{name:"formatHTMLMessage",hash:{from_name:e!=null?s(e,"previous"):e,to_name:e!=null?s(e,"value"):e,team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:124}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),Vn=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"teamAssigned",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:61}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:62}}}),{name:"formatHTMLMessage",hash:{to_team:e!=null?s(e,"to_team"):e,team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:106}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),En=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  `+i((s(o,"formatHTMLMessage")||e&&s(e,"formatHTMLMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,(s(o,"getI18nSource")||e&&s(e,"getI18nSource")||a).call(t,"stateUpdated",{name:"getI18nSource",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:61}}}),{name:"intlGet",hash:{},data:l,loc:{start:{line:2,column:22},end:{line:2,column:62}}}),{name:"formatHTMLMessage",hash:{to_state:e!=null?s(e,"to_state"):e,team:e!=null?s(e,"team"):e,name:e!=null?s(e,"name"):e},data:l,loc:{start:{line:2,column:2},end:{line:2,column:108}}}))+`
  <div>`+i((s(o,"formatDateTime")||e&&s(e,"formatDateTime")||a).call(t,e!=null?s(e,"date"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+`</div>
`},useData:!0}),jn=h.extend({className:"patient-flow-sidebar__activity-item",getTemplate(){const n=this.model.get("event_type"),e={FlowProgramStarted:On,FlowClinicianAssigned:Sn,FlowDetailsUpdated:Dn,FlowNameUpdated:Mn,FlowTeamAssigned:Vn,FlowStateUpdated:En};return e[n]?e[n]:d.template({compiler:[8,">= 4.3.0"],main:function(o,u,l,t,a){return""},useData:!0})},templateContext(){const n=this.model.getEditor(),e=this.model.getClinician(),o=this.model.getProgram(),u=`patients.sidebar.flow.activityViews.${this.model.get("source")}`;return{name:n.get("name"),team:n.getTeam().get("name"),program:o?o.get("name"):null,to_clinician:e.get("name"),to_team:this.model.getTeam().get("name"),to_state:this.model.getState().get("name"),getI18nSource(l){return`${u}.${l}`}}}}),An=T.extend({childView:jn}),Fn=C.extend({onBeforeStart({flow:n}){this.flow=n,this.flow.trigger("editing",!0),this.showView(new Pn({model:this.flow})),this.getRegion("activity").startPreloader()},beforeStart(){return f.request("entities","fetch:flowEvents:collection",this.flow.id)},onStart(n,e){this.showChildView("activity",new An({collection:e,model:this.flow}))},viewEvents:{close:"stop",delete:"onDelete"},onDelete(){const n=f.request("modal","show:small",_n({onSubmit:()=>{this.flow.destroy({wait:!0}).then(()=>{f.trigger("event-router","patient:dashboard",this.flow.get("_patient"))}).catch(({responseData:e})=>{f.request("alert","show:apiError",e)}),n.destroy()}}))},onStop(){this.flow.trigger("editing",!1),f.request("sidebar","close")}}),fe=n=>n&&n.replace(/(\r\n|\n|\r)/gm," "),In=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.hooks.helperMissing,r="function",m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+i(n.lambda((t=(t=(t=(t=(t=l&&m(l,"intl"))&&m(t,"programs"))&&m(t,"sidebar"))&&m(t,"program"))&&m(t,"programDetailsTemplate"))&&m(t,"placeholder"),e))+'">'+i((a=(a=m(o,"details")||(e!=null?m(e,"details"):e))!=null?a:c,typeof a===r?a.call(s,{name:"details",hash:{},data:l,loc:{start:{line:1,column:150},end:{line:1,column:163}}}):a))+`</textarea>
<div class="textarea-flex__container input-secondary sidebar__details js-spacer">`+i((a=(a=m(o,"details")||(e!=null?m(e,"details"):e))!=null?a:c,typeof a===r?a.call(s,{name:"details",hash:{},data:l,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):a))+` </div>
`},useData:!0}),Ln=d.template({1:function(n,e,o,u,l){return" has-error"},3:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return' placeholder="'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"programs"))&&a(t,"sidebar"))&&a(t,"program"))&&a(t,"programNameTemplate"))&&a(t,"placeholder"),e))+'"'},5:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<div class="form-error u-margin--b-4">'+n.escapeExpression((t=(t=a(o,"error")||(e!=null?a(e,"error"):e))!=null?t:n.hooks.helperMissing,typeof t=="function"?t.call(e??(n.nullContext||{}),{name:"error",hash:{},data:l,loc:{start:{line:5,column:51},end:{line:5,column:62}}}):t))+"</div>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c="function",r=n.escapeExpression,m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return`<div class="pos--relative">
  <textarea class="input-primary textarea-flex__input js-input`+((t=m(o,"if").call(i,e!=null?m(e,"error"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:62},end:{line:2,column:92}}}))!=null?t:"")+'"'+((t=m(o,"if").call(i,e!=null?m(e,"isNew"):e,{name:"if",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:93},end:{line:2,column:196}}}))!=null?t:"")+">"+r((a=(a=m(o,"name")||(e!=null?m(e,"name"):e))!=null?a:s,typeof a===c?a.call(i,{name:"name",hash:{},data:l,loc:{start:{line:2,column:197},end:{line:2,column:207}}}):a))+`</textarea>
  <div class="textarea-flex__container input-primary js-spacer">`+r((a=(a=m(o,"name")||(e!=null?m(e,"name"):e))!=null?a:s,typeof a===c?a.call(i,{name:"name",hash:{},data:l,loc:{start:{line:3,column:64},end:{line:3,column:74}}}):a))+` </div>
</div>
`+((t=m(o,"if").call(i,e!=null?m(e,"error"):e,{name:"if",hash:{},fn:n.program(5,l,0),inverse:n.noop,data:l,loc:{start:{line:5,column:0},end:{line:5,column:75}}}))!=null?t:"")+`
`},useData:!0}),Nn=d.template({1:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`      <div class="flex u-margin--t-16">
        <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"sidebar"))&&s(t,"program"))&&s(t,"programSidebarTemplate"))&&s(t,"publishedLabel"),e))+`</h4>
        <div class="flex-grow" data-published-region></div>
      </div>
      <div class="flex u-margin--t-8">
        <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"sidebar"))&&s(t,"program"))&&s(t,"programSidebarTemplate"))&&s(t,"archivedLabel"),e))+`</h4>
        <div class="flex-grow" data-archived-region></div>
      </div>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.escapeExpression,i=e??(n.nullContext||{}),s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`<div class="flex-grow">
  <div class="flex">
    <div class="flex-grow">
      <h3 class="sidebar__heading">`+a(n.lambda((t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"sidebar"))&&s(t,"program"))&&s(t,"programSidebarTemplate"))&&s(t,"headingText"),e))+`</h3>
    </div>
    <div>
      <button class="button--icon js-close">`+a((s(o,"fas")||e&&s(e,"fas")||n.hooks.helperMissing).call(i,"xmark",{name:"fas",hash:{},data:l,loc:{start:{line:7,column:44},end:{line:7,column:59}}}))+`</button>
    </div>
  </div>
  <div class="u-margin--t-16">
    <div data-name-region></div>
    <div class="u-margin--t-8" data-details-region></div>
    <div data-save-region></div>
`+((t=s(o,"unless").call(i,e!=null?s(e,"isNew"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:14,column:4},end:{line:23,column:15}}}))!=null?t:"")+`  </div>
</div>
<div data-timestamps-region></div>
`},useData:!0}),{ENTER_KEY:Rn}=pe,Hn=h.extend({className:"u-margin--t-8 sidebar__save",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<button class="button--green" disabled>'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"programs"))&&a(t,"sidebar"))&&a(t,"program"))&&a(t,"programsSidebarViews"))&&a(t,"disabledSaveView"))&&a(t,"saveBtn"),e))+"</button>"},useData:!0})}),Gn=h.extend({className:"u-margin--t-8 sidebar__save",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
    <button class="button--green js-save">`+i(a((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"sidebar"))&&s(t,"program"))&&s(t,"programsSidebarViews"))&&s(t,"saveView"))&&s(t,"saveBtn"),e))+`</button>
    <button class="button--text u-margin--r-4 js-cancel">`+i(a((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"sidebar"))&&s(t,"program"))&&s(t,"programsSidebarViews"))&&s(t,"saveView"))&&s(t,"cancelBtn"),e))+`</button>
  `},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),$n=h.extend({template:Ln,behaviors:[O],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown(n){if(n.which===Rn){n.preventDefault();return}},onWatchChange(n){const e=fe(n);this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("name",e)},templateContext(){return{error:this.getOption("error"),isNew:this.model.isNew()}},onDomRefresh(){this.model.isNew()&&this.ui.input.focus()}}),qn=h.extend({className:"pos--relative",template:In,behaviors:[O],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange(n){this.ui.input.val(n),this.ui.spacer.text(n||" "),this.model.set("details",M(n))}}),ke=h.extend({template:d.template({1:function(n,e,o,u,l){return"is-on"},3:function(n,e,o,u,l){return"disabled"},5:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return n.escapeExpression((t(o,"fas")||e&&t(e,"fas")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"toggle-on",{name:"fas",hash:{},data:l,loc:{start:{line:3,column:20},end:{line:3,column:39}}}))},7:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"toggle-off",{name:"far",hash:{},data:l,loc:{start:{line:3,column:47},end:{line:3,column:67}}}))},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
    <button class="programs-sidebar__toggle button-secondary `+((t=s(o,"if").call(a,e!=null?s(e,"status"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:61},end:{line:2,column:87}}}))!=null?t:"")+' js-toggle" '+((t=s(o,"if").call(a,e!=null?s(e,"isDisabled"):e,{name:"if",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:99},end:{line:2,column:132}}}))!=null?t:"")+`>
      `+((t=s(o,"if").call(a,e!=null?s(e,"status"):e,{name:"if",hash:{},fn:n.program(5,l,0),inverse:n.program(7,l,0),data:l,loc:{start:{line:3,column:6},end:{line:3,column:74}}}))!=null?t:"")+`
      `+n.escapeExpression((s(o,"formatMessage")||e&&s(e,"formatMessage")||i).call(a,(s(o,"intlGet")||e&&s(e,"intlGet")||i).call(a,"programs.shared.components.toggleComponent.toggle",{name:"intlGet",hash:{},data:l,loc:{start:{line:4,column:22},end:{line:4,column:83}}}),{name:"formatMessage",hash:{status:e!=null?s(e,"status"):e},data:l,loc:{start:{line:4,column:6},end:{line:4,column:99}}}))+`
    </button>
  `},useData:!0}),templateContext(){return{status:this.getOption("status"),isDisabled:this.getOption("isDisabled")}},triggers:{"click .js-toggle":"click"}}),Wn=h.extend({className:"sidebar__footer flex",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.hooks.helperMissing,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`
    <div class="sidebar__footer-left"><h4 class="sidebar__label">`+i(a((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"program"))&&r(t,"programsSidebarViews"))&&r(t,"timestampsView"))&&r(t,"createdAt"),e))+"</h4><div>"+i((r(o,"formatDateTime")||e&&r(e,"formatDateTime")||c).call(s,e!=null?r(e,"created_at"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:2,column:157},end:{line:2,column:196}}}))+`</div></div>
    <div><h4 class="sidebar__label">`+i(a((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"program"))&&r(t,"programsSidebarViews"))&&r(t,"timestampsView"))&&r(t,"updatedAt"),e))+"</h4><div>"+i((r(o,"formatDateTime")||e&&r(e,"formatDateTime")||c).call(s,e!=null?r(e,"updated_at"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:128},end:{line:3,column:167}}}))+`</div></div>
  `},useData:!0})}),Un=h.extend({childViewTriggers:{save:"save",cancel:"cancel",toggle:"toggle"},className:"sidebar flex-region",template:Nn,regions:{name:"[data-name-region]",details:"[data-details-region]",published:"[data-published-region]",archived:"[data-archived-region]",save:"[data-save-region]",timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close"},templateContext(){return{isNew:this.model.isNew()}},initialize({program:n}){this.program=n,this.model=this.program.clone(),this.model.isNew()||this.listenTo(this.program,{"change:published_at":this.showPublished,"change:archived_at":this.showArchived})},onAttach(){V(this.el)},onRender(){this.showForm(),this.showPublished(),this.showArchived(),this.showTimestamps()},showForm(){this.stopListening(this.model),this.model=this.program.clone(),this.listenTo(this.model,"change:name change:details",this.showSave),this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName(n){this.showChildView("name",new $n({model:this.model,program:this.program,error:n}))},showDetails(){this.showChildView("details",new qn({model:this.model,program:this.program}))},showSave(){if(!this.model.isValid())return this.showDisabledSave();this.showChildView("save",new Gn({model:this.model}))},showPublished(){if(this.program.isNew())return;const n=!!this.program.get("published_at"),e=new ke({status:n});this.listenTo(e,"click",()=>{const o=n?null:b.utc().format();this.program.save({published_at:o})}),this.showChildView("published",e)},showArchived(){if(this.program.isNew())return;const n=!!this.program.get("archived_at"),e=new ke({status:n});this.listenTo(e,"click",()=>{const o=n?null:b.utc().format();this.program.save({archived_at:o})}),this.showChildView("archived",e)},showTimestamps(){this.program.isNew()||this.showChildView("timestamps",new Wn({model:this.program}))},showDisabledSave(){this.showChildView("save",new Hn)},onSave(){this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty()},showErrors({name:n}){this.showName(n),this.showDisabledSave()},onCancel(){if(this.model.isNew()){this.triggerMethod("close",this);return}this.showForm()}}),zn=C.extend({onBeforeStart({program:n}){this.program=n,this.showView(new Un({program:this.program}))},viewEvents:{save:"onSave",close:"stop"},onSave({model:n}){const e=this.program.isNew();this.program.save(n.pick("name","details")).then(()=>{e&&f.request("sidebar","close")},({responseData:o})=>{const u=this.program.parseErrors(o);this.getView().showErrors(u)})},onStop(){this.program&&this.program.isNew()&&this.program.destroy(),f.request("sidebar","close")}}),z=w.programs.shared.components.behaviorComponent,Bn=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return'<span class="'+s((t=(t=c(o,"className")||(e!=null?c(e,"className"):e))!=null?t:i,typeof t=="function"?t.call(a,{name:"className",hash:{},data:l,loc:{start:{line:1,column:13},end:{line:1,column:28}}}):t))+'">'+s((c(o,"far")||e&&c(e,"far")||i).call(a,e!=null?c(e,"icon"):e,{name:"far",hash:{},data:l,loc:{start:{line:1,column:30},end:{line:1,column:42}}}))+"</span>"},useData:!0}),ye=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s="function",c=n.escapeExpression,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return'<span class="'+c((t=(t=r(o,"className")||(e!=null?r(e,"className"):e))!=null?t:i,typeof t===s?t.call(a,{name:"className",hash:{},data:l,loc:{start:{line:1,column:13},end:{line:1,column:28}}}):t))+'">'+c((r(o,"far")||e&&r(e,"far")||i).call(a,e!=null?r(e,"icon"):e,{name:"far",hash:{},data:l,loc:{start:{line:1,column:30},end:{line:1,column:42}}}))+"<span>"+c((t=(t=r(o,"name")||(e!=null?r(e,"name"):e))!=null?t:i,typeof t===s?t.call(a,{name:"name",hash:{},data:l,loc:{start:{line:1,column:48},end:{line:1,column:58}}}):t))+"</span></span>"},useData:!0}),Yn=[{icon:"circle-play",className:"program-action--standard",name:z.standardText,behavior:U.STANDARD},{icon:"circle-pause",className:"program-action--conditional",name:z.conditionalText,behavior:U.CONDITIONAL},{icon:"bolt",className:"program-action--automated",name:z.automatedText,behavior:U.AUTOMATED}],Ke=k.extend({isCompact:!1,initialize(n){const{behavior:e}=n;if(this.mergeOptions(n,["isConditionalAvailable"]),this.collection=new v.Collection(Yn),!Fe(this,"isConditionalAvailable")){const o=this.collection.find({behavior:U.CONDITIONAL});this.collection.remove(o)}this.setSelected({behavior:e})},isConditionalAvailable:!0,onChangeSelected(n){const e=n.get("behavior");this.triggerMethod("change:status",{behavior:e})},setSelected({behavior:n}){const e=this.collection.find({behavior:n});this.setState({selected:e})},popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},viewOptions(){const n=this.getOption("isCompact");return{className:n?"button-secondary--compact":"button-secondary w-100",template:n?Bn:ye}},picklistOptions(){return{headingText:z.headingText,itemTemplate:ye}}}),ne=w.shared.components.teamComponent,Kn=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return"<div>"+i((s(o,"matchText")||e&&s(e,"matchText")||a).call(t,e!=null?s(e,"name"):e,e!=null?s(e,"query"):e,{name:"matchText",hash:{},data:l,loc:{start:{line:1,column:5},end:{line:1,column:29}}}))+' <span class="team-component__team">'+i((s(o,"matchText")||e&&s(e,"matchText")||a).call(t,e!=null?s(e,"abbr"):e,e!=null?s(e,"query"):e,{name:"matchText",hash:{},data:l,loc:{start:{line:1,column:65},end:{line:1,column:89}}}))+"</span></div>"},useData:!0}),he=k.extend({TeamItemTemplate:Kn,isCompact:!1,defaultText(){return this.getOption("isCompact")?null:ne.defaultText},popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},canClear:!1,picklistOptions(){return{canClear:this.getOption("canClear"),itemTemplate:this.TeamItemTemplate,isSelectlist:!0,headingText:ne.headingText,placeholderText:ne.placeholderText}},viewOptions(){const n={type:"far",icon:"circle-user"},e=Fe(this,"defaultText");return this.getOption("isCompact")?{className:"button-secondary--compact",templateContext:{defaultText:e,attr:"abbr",icon:n}}:{className:"button-secondary w-100",templateContext:{defaultText:e,attr:"name",icon:n}}},initialize({team:n}){this.collection=f.request("bootstrap","teams"),this.setState({selected:this.collection.get(n)})},onChangeSelected(n){this.triggerMethod("change:team",n)}}),Jn=Ke.extend({isConditionalAvailable:!1,onPicklistSelect({model:n}){this.setState("selected",n),this.popRegion.empty()}});let $;function Qn(){return $||($=f.request("bootstrap","teams"),$)}const Xn=he.extend({canClear:!0,initialize({owner:n}){this.collection=Qn(),this.setState({selected:n})},onChangeSelected(n){this.triggerMethod("change:owner",n)}}),ae=w.programs.shared.components.tagsManagerComponent,Zn=h.extend({tagName:"li",className:"list-manager__item tags-manager__item",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return s((c(o,"far")||e&&c(e,"far")||i).call(a,"tag",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:13}}}))+"<span>"+s((t=(t=c(o,"text")||(e!=null?c(e,"text"):e))!=null?t:i,typeof t=="function"?t.call(a,{name:"text",hash:{},data:l,loc:{start:{line:1,column:19},end:{line:1,column:27}}}):t))+'</span><button class="button--icon list-manager__remove js-remove">'+s((c(o,"far")||e&&c(e,"far")||i).call(a,"trash-can",{name:"far",hash:{},data:l,loc:{start:{line:1,column:94},end:{line:1,column:113}}}))+"</button>"},useData:!0}),triggers:{"click .js-remove":"remove"}}),ea=h.extend({tagName:"button",className:"picklist__item js-picklist-item tags-manager__add",modelEvents:{"change:query":"render"},template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return i(n.lambda((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"shared"))&&s(t,"components"))&&s(t,"tagsManagerComponent"))&&s(t,"tagsAddView"))&&s(t,"addLabel"),e))+" "+i((a=(a=s(o,"query")||(e!=null?s(e,"query"):e))!=null?a:n.hooks.helperMissing,typeof a=="function"?a.call(e??(n.nullContext||{}),{name:"query",hash:{},data:l,loc:{start:{line:1,column:81},end:{line:1,column:92}}}):a))},useData:!0}),onBeforeRender(){this.shouldShow=!!this.model.get("query")},triggers:{click:"click:add"}}),ta=T.extend({tagName:"ul",childView:Zn,childViewTriggers:{remove:"remove"},onRemove(n){this.triggerMethod("remove:tag",n.model)}}),na=k.extend({initialize(){this.listenTo(this.collection,"update",this.show)},popWidth(){return this.getView().$el.outerWidth()},viewOptions:{className:"button-secondary list-manager__droplist",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return a((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"tag",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:13}}}))+"<span>"+a(n.lambda((t=(t=(t=(t=(t=(t=l&&i(l,"intl"))&&i(t,"programs"))&&i(t,"shared"))&&i(t,"components"))&&i(t,"tagsManagerComponent"))&&i(t,"tagsDroplist"))&&i(t,"addTag"),e))+"</span>"},useData:!0})},picklistOptions:{attr:"text",headingText:ae.tagsDroplist.picklistOptions.headingText,noResultsText:ae.tagsDroplist.picklistOptions.noResultsText,isSelectlist:!0,placeholderText:ae.tagsDroplist.picklistOptions.placeholderText},picklistEvents:{"watch:change"(n){this.setState("query",n)},"picklist:click:add"(){const n=M(this.getState("query")),e=f.request("entities","tags:model",{text:n});this.triggerMethod("add:tag",e),this.popRegion.empty()}},onPicklistSelect({model:n}){this.triggerMethod("add:tag",n),this.popRegion.empty()}}),Je=h.extend({className:"list-manager__wrapper",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){return`
    <div data-tags-region></div>
    <div data-droplist-region></div>
  `},useData:!0}),regions:{tags:"[data-tags-region]",droplist:"[data-droplist-region]"},initialize({tags:n,allTags:e}){this.tags=n.clone(),this.allTags=e.clone(),this.allTags.remove(this.tags.models)},onRender(){this.showTags(),this.showDroplist()},showTags(){const n=this.showChildView("tags",new ta({collection:this.tags}));this.listenTo(n,"remove:tag",this.removeItemTag)},showDroplist(){const n=this.showChildView("droplist",new na({collection:this.allTags,...this.getOption("droplistOptions")}));this.listenTo(n.popRegion,{show(){n.popRegion.currentView.addChildView(new ea({model:n.getState()}))}}),this.listenTo(n,"add:tag",this.addItemTag)},addItemTag(n){this.tags.add(n),this.allTags.remove(n),this.triggerMethod("add:tag",n)},removeItemTag(n){this.tags.remove(n),this.allTags.add(n),this.triggerMethod("remove:tag",n)}}),aa=d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return`    <div class="sidebar__section">
      <div><h3 class="sidebar__section-label">`+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"programs"))&&a(t,"sidebar"))&&a(t,"flow"))&&a(t,"flowSidebarTemplate"))&&a(t,"tagsLabel"),e))+`</h3></div>
      <div data-tags-region></div>
    </div>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.hooks.helperMissing,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`<div class="flex-grow">
  <div class="flex">
    <div class="flex-grow">
      <h3 class="sidebar__heading">`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"flow"))&&r(t,"flowSidebarTemplate"))&&r(t,"headingText"),e))+`</h3>
    </div>
    <div>
      <button class="button--icon u-margin--r-8 js-menu">`+i((r(o,"far")||e&&r(e,"far")||c).call(s,"ellipsis",{name:"far",hash:{},data:l,loc:{start:{line:7,column:57},end:{line:7,column:75}}}))+`</button>
      <button class="button--icon js-close">`+i((r(o,"fas")||e&&r(e,"fas")||c).call(s,"xmark",{name:"fas",hash:{},data:l,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+`</button>
    </div>
  </div>
  <div class="u-margin--t-16">
    <div data-name-region></div>
    <div class="u-margin--t-8" data-details-region></div>
    <div data-save-region></div>
    <div class="flex u-margin--t-16">
      <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"flow"))&&r(t,"flowSidebarTemplate"))&&r(t,"publishedLabel"),e))+`</h4>
      <div class="flex-grow" data-published-region></div>
    </div>
    <div class="flex u-margin--t-8">
      <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"flow"))&&r(t,"flowSidebarTemplate"))&&r(t,"archivedLabel"),e))+`</h4>
      <div class="flex-grow" data-archived-region></div>
    </div>
    <div class="flex u-margin--t-8">
      <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"flow"))&&r(t,"flowSidebarTemplate"))&&r(t,"behaviorLabel"),e))+`</h4>
      <div class="flex-grow" data-behavior-region></div>
    </div>
    <div class="flex u-margin--t-8">
      <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"flow"))&&r(t,"flowSidebarTemplate"))&&r(t,"ownerLabel"),e))+`</h4>
      <div class="flex-grow" data-owner-region></div>
    </div>
`+((t=r(o,"if").call(s,e!=null?r(e,"canTag"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:31,column:4},end:{line:36,column:11}}}))!=null?t:"")+`  </div>
</div>
<div data-timestamps-region></div>
`},useData:!0}),la=d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return' placeholder="'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"programs"))&&a(t,"sidebar"))&&a(t,"flow"))&&a(t,"flowNameTemplate"))&&a(t,"placeholder"),e))+'"'},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c="function",r=n.escapeExpression,m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return'<textarea class="input-primary textarea-flex__input js-input"'+((t=m(o,"if").call(i,e!=null?m(e,"isNew"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:61},end:{line:1,column:158}}}))!=null?t:"")+">"+r((a=(a=m(o,"name")||(e!=null?m(e,"name"):e))!=null?a:s,typeof a===c?a.call(i,{name:"name",hash:{},data:l,loc:{start:{line:1,column:159},end:{line:1,column:169}}}):a))+`</textarea>
<div class="textarea-flex__container input-primary js-spacer">`+r((a=(a=m(o,"name")||(e!=null?m(e,"name"):e))!=null?a:s,typeof a===c?a.call(i,{name:"name",hash:{},data:l,loc:{start:{line:2,column:62},end:{line:2,column:72}}}):a))+` </div>
`},useData:!0}),sa=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.hooks.helperMissing,r="function",m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+i(n.lambda((t=(t=(t=(t=(t=l&&m(l,"intl"))&&m(t,"programs"))&&m(t,"sidebar"))&&m(t,"flow"))&&m(t,"flowDetailsTemplate"))&&m(t,"placeholder"),e))+'">'+i((a=(a=m(o,"details")||(e!=null?m(e,"details"):e))!=null?a:c,typeof a===r?a.call(s,{name:"details",hash:{},data:l,loc:{start:{line:1,column:144},end:{line:1,column:157}}}):a))+`</textarea>
<div class="textarea-flex__container input-secondary sidebar__details js-spacer">`+i((a=(a=m(o,"details")||(e!=null?m(e,"details"):e))!=null?a:c,typeof a===r?a.call(s,{name:"details",hash:{},data:l,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):a))+` </div>
`},useData:!0}),ia=w.programs.sidebar.flow.flowSidebarViews,{ENTER_KEY:oa}=pe,ra=h.extend({className:"u-margin--t-8 sidebar__save",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<button class="button--green" disabled>'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"programs"))&&a(t,"sidebar"))&&a(t,"flow"))&&a(t,"flowSidebarViews"))&&a(t,"disabledSaveView"))&&a(t,"saveBtn"),e))+"</button>"},useData:!0})}),ca=h.extend({className:"u-margin--t-8 sidebar__save",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
    <button class="button--green js-save">`+i(a((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"sidebar"))&&s(t,"flow"))&&s(t,"flowSidebarViews"))&&s(t,"saveView"))&&s(t,"saveBtn"),e))+`</button>
    <button class="button--text u-margin--r-4 js-cancel">`+i(a((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"sidebar"))&&s(t,"flow"))&&s(t,"flowSidebarViews"))&&s(t,"saveView"))&&s(t,"cancelBtn"),e))+`</button>
  `},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),ua=h.extend({className:"pos--relative",template:la,behaviors:[O],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown(n){if(n.which===oa){n.preventDefault();return}},onWatchChange(n){const e=fe(n);this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("name",e)},templateContext(){return{isNew:this.model.isNew()}},onDomRefresh(){this.model.isNew()&&this.ui.input.focus()}}),ma=h.extend({className:"pos--relative",template:sa,behaviors:[O],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange(n){this.ui.input.val(n),this.ui.spacer.text(n||" "),this.model.set("details",M(n))}}),xe=h.extend({template:d.template({1:function(n,e,o,u,l){return"is-on"},3:function(n,e,o,u,l){return"disabled"},5:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return n.escapeExpression((t(o,"fas")||e&&t(e,"fas")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"toggle-on",{name:"fas",hash:{},data:l,loc:{start:{line:3,column:20},end:{line:3,column:39}}}))},7:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"toggle-off",{name:"far",hash:{},data:l,loc:{start:{line:3,column:47},end:{line:3,column:67}}}))},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
    <button class="program-flow-sidebar__toggle button-secondary `+((t=s(o,"if").call(a,e!=null?s(e,"status"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:65},end:{line:2,column:91}}}))!=null?t:"")+' js-toggle" '+((t=s(o,"if").call(a,e!=null?s(e,"isDisabled"):e,{name:"if",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:103},end:{line:2,column:136}}}))!=null?t:"")+`>
      `+((t=s(o,"if").call(a,e!=null?s(e,"status"):e,{name:"if",hash:{},fn:n.program(5,l,0),inverse:n.program(7,l,0),data:l,loc:{start:{line:3,column:6},end:{line:3,column:74}}}))!=null?t:"")+`
      `+n.escapeExpression((s(o,"formatMessage")||e&&s(e,"formatMessage")||i).call(a,(s(o,"intlGet")||e&&s(e,"intlGet")||i).call(a,"programs.shared.components.toggleComponent.toggle",{name:"intlGet",hash:{},data:l,loc:{start:{line:4,column:22},end:{line:4,column:83}}}),{name:"formatMessage",hash:{status:e!=null?s(e,"status"):e},data:l,loc:{start:{line:4,column:6},end:{line:4,column:99}}}))+`
    </button>
  `},useData:!0}),templateContext(){return{status:this.getOption("status"),isDisabled:this.getOption("isDisabled")}},triggers:{"click .js-toggle":"click"}}),pa=h.extend({className:"sidebar__footer flex",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.hooks.helperMissing,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`
    <div class="sidebar__footer-left"><h4 class="sidebar__label">`+i(a((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"flow"))&&r(t,"flowSidebarViews"))&&r(t,"timestampsView"))&&r(t,"createdAt"),e))+"</h4><div>"+i((r(o,"formatDateTime")||e&&r(e,"formatDateTime")||c).call(s,e!=null?r(e,"created_at"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:2,column:150},end:{line:2,column:189}}}))+`</div></div>
    <div><h4 class="sidebar__label">`+i(a((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"flow"))&&r(t,"flowSidebarViews"))&&r(t,"timestampsView"))&&r(t,"updatedAt"),e))+"</h4><div>"+i((r(o,"formatDateTime")||e&&r(e,"formatDateTime")||c).call(s,e!=null?r(e,"updated_at"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:121},end:{line:3,column:160}}}))+`</div></div>
  `},useData:!0})}),da=h.extend({childViewTriggers:{save:"save",cancel:"cancel"},className:"sidebar flex-region",template:aa,regions:{name:"[data-name-region]",details:"[data-details-region]",published:"[data-published-region]",archived:"[data-archived-region]",behavior:"[data-behavior-region]",owner:"[data-owner-region]",tags:"[data-tags-region]",save:"[data-save-region]",timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close","click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const n=new v.Collection([{onSelect:Y(this.triggerMethod,this,"delete")}]);new Q({ui:this.ui.menu,uiView:this,headingText:w.programs.sidebar.flow.layoutView.menuOptions.headingText,itemTemplate:d.template({compiler:[8,">= 4.3.0"],main:function(o,u,l,t,a){var i,s=o.escapeExpression,c=o.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return s((c(l,"far")||u&&c(u,"far")||o.hooks.helperMissing).call(u??(o.nullContext||{}),"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:a,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+s(o.lambda((i=(i=(i=(i=(i=(i=a&&c(a,"intl"))&&c(i,"programs"))&&c(i,"sidebar"))&&c(i,"flow"))&&c(i,"layoutView"))&&c(i,"menuOptions"))&&c(i,"delete"),u))+"</span>"},useData:!0}),lists:[{collection:n}],align:"right",popWidth:248}).show()},templateContext(){const n=this.model.isNew();return{isNew:n,canTag:!n&&this.currentUser.can("programs:tags:manage")}},initialize({flow:n,tags:e}){this.currentUser=f.request("bootstrap","currentUser"),this.tags=e,this.flow=n,this.model=this.flow.clone(),this.listenTo(this.flow,{"change:published_at":this.showPublished,"change:archived_at":this.showArchived,"change:behavior":this.showBehavior,"change:_owner":this.onChangeOwner})},onChangeOwner(){this.showOwner()},onAttach(){V(this.el)},onRender(){this.showFlow(),this.showTimestamps()},showFlow(){this.showForm(),this.showPublished(),this.showArchived(),this.showBehavior(),this.showOwner(),this.showTags()},showForm(){this.stopListening(this.model),this.model=this.flow.clone(),this.listenTo(this.model,"change:name change:details",this.showSave),this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName(){this.showChildView("name",new ua({model:this.model,flow:this.flow}))},showDetails(){this.showChildView("details",new ma({model:this.model,flow:this.flow}))},showPublished(){const n=!!this.flow.get("published_at"),e=new xe({status:n,isDisabled:this.flow.isNew()});this.listenTo(e,"click",()=>{const o=n?null:b.utc().format();this.flow.save({published_at:o})}),this.showChildView("published",e)},showArchived(){const n=!!this.flow.get("archived_at"),e=new xe({status:n,isDisabled:this.flow.isNew()});this.listenTo(e,"click",()=>{const o=n?null:b.utc().format();this.flow.save({archived_at:o})}),this.showChildView("archived",e)},showBehavior(){const n=this.flow.isNew(),e=new Jn({behavior:this.flow.get("behavior"),state:{isDisabled:n}});this.listenTo(e,"change:status",({behavior:o})=>{this.flow.save({behavior:o})}),this.showChildView("behavior",e)},showOwner(){const n=this.flow.isNew(),e=new Xn({owner:this.flow.getOwner(),state:{isDisabled:n}});this.listenTo(e,"change:owner",o=>{this.flow.saveOwner(o)}),this.showChildView("owner",e)},showTags(){if(this.model.isNew()||!this.currentUser.can("programs:tags:manage"))return;const n=new Je({allTags:this.tags,tags:this.flow.getTags()});this.listenTo(n,{"add:tag"(e){this.flow.addTag(e)},"remove:tag"(e){this.flow.removeTag(e)}}),this.showChildView("tags",n)},showTimestamps(){this.flow.isNew()||this.showChildView("timestamps",new pa({model:this.flow}))},showSave(){if(!this.model.isValid())return this.showDisabledSave();this.showChildView("save",new ca({model:this.model}))},showDisabledSave(){this.showChildView("save",new ra)},onSave(){this.getRegion("save").empty()},onCancel(){if(this.model.isNew()){this.triggerMethod("close",this);return}this.showForm()}});function fa(n){return D({buttonClass:"button--red"},ia.deleteModal,n)}const ha=C.extend({beforeStart(){return f.request("entities","fetch:tags:collection")},onStart({flow:n},e){this.flow=n,this.flow.trigger("editing",!0),this.showView(new da({flow:this.flow,tags:e}))},viewEvents:{save:"onSave",close:"stop",delete:"onDelete"},onSave({model:n}){if(n.isNew()){this.flow.saveAll(n.attributes).then(()=>{f.trigger("event-router","programFlow",this.flow.id)});return}this.flow.save(n.pick("name","details"))},onDelete(){const n=f.request("modal","show:small",fa({onSubmit:()=>{this.flow.destroy({wait:!0}).then(()=>{f.trigger("event-router","program:details",this.flow.get("_program"))}).catch(({responseData:e})=>{f.request("alert","show:apiError",e)}),n.destroy()}}))},onStop(){this.flow&&this.flow.isNew()&&this.flow.destroy(),this.flow.trigger("editing",!1),f.request("sidebar","close")}}),le=w.programs.shared.components.formComponent,ga=d.template({1:function(n,e,o,u,l){return"disabled"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`
  <button class="js-button button-secondary button__group flex-grow" `+((t=r(o,"if").call(i,e!=null?r(e,"isDisabled"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:69},end:{line:2,column:102}}}))!=null?t:"")+`>
    `+c((r(o,"far")||e&&r(e,"far")||s).call(i,"square-poll-horizontal",{name:"far",hash:{},data:l,loc:{start:{line:3,column:4},end:{line:3,column:36}}}))+"<span>"+c((a=(a=r(o,"name")||(e!=null?r(e,"name"):e))!=null?a:s,typeof a=="function"?a.call(i,{name:"name",hash:{},data:l,loc:{start:{line:3,column:42},end:{line:3,column:52}}}):a))+`</span>
  </button><button class="js-click-form button button__group form-component__form-button" `+((t=r(o,"if").call(i,e!=null?r(e,"isDisabled"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:4,column:90},end:{line:4,column:123}}}))!=null?t:"")+">"+c((r(o,"fas")||e&&r(e,"fas")||s).call(i,"up-right-and-down-left-from-center",{name:"fas",hash:{},data:l,loc:{start:{line:4,column:124},end:{line:4,column:168}}}))+`</button>
`},useData:!0}),wa=d.template({1:function(n,e,o,u,l){return"disabled"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
  <button class="js-button button-secondary w-100" `+((t=s(o,"if").call(a,e!=null?s(e,"isDisabled"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:51},end:{line:2,column:84}}}))!=null?t:"")+`>
    `+i((s(o,"far")||e&&s(e,"far")||n.hooks.helperMissing).call(a,"square-poll-horizontal",{name:"far",hash:{},data:l,loc:{start:{line:3,column:4},end:{line:3,column:36}}}))+"<span>"+i(n.lambda((t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"shared"))&&s(t,"components"))&&s(t,"formComponent"))&&s(t,"defaultText"),e))+`</span>
  </button>
`},useData:!0});let Te,j;function va(n){if(j)return j;j=n.getForms();const e=j.reject({published_at:null});return j.reset(e),j}const ba=k.extend({viewOptions(){return{className:"flex",template:this.getState("selected")?ga:wa,templateContext(){return{isDisabled:this.getOption("state").isDisabled}},tagName:"div",triggers:{"click .js-button":"click","focus .js-button":"focus","click .js-click-form":"click:form"}}},viewEvents:{click:"onClick","click:form":"onViewClickForm"},onViewClickForm(){this.triggerMethod("click:form",this.getState("selected"))},picklistOptions:{canClear:!0,headingText:le.headingText,placeholderText:le.placeholderText,noResultsText:le.noResultsText,isSelectlist:!0,itemTemplateContext:{icon:{type:"far",icon:"square-poll-horizontal"}},attr:"name"},initialize({form:n}){const e=f.request("workspace","current");Te!==e.id&&(j=null,Te=e.id),this.collection=va(e),this.setState({selected:n})},popWidth(){return this.getView().$el.outerWidth()},onChangeSelected(n){this.triggerMethod("change:form",n)}}),Ce=w.programs.shared.components.dueDayComponent,ka=H(K(366),function(n){return{id:n}}),ya=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return a((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"stopwatch",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+a(n.lambda((t=(t=(t=(t=(t=l&&i(l,"intl"))&&i(t,"programs"))&&i(t,"shared"))&&i(t,"components"))&&i(t,"dueDayComponent"))&&i(t,"sameDay"),e))+"</span>"},useData:!0}),xa=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"stopwatch",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))},useData:!0}),Ta=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return a((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"stopwatch",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+a(n.lambda((t=(t=(t=(t=(t=l&&i(l,"intl"))&&i(t,"programs"))&&i(t,"shared"))&&i(t,"components"))&&i(t,"dueDayComponent"))&&i(t,"defaultText"),e))+"</span>"},useData:!0}),Ca=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return i((s(o,"far")||e&&s(e,"far")||a).call(t,"stopwatch",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+"<span>"+i((s(o,"formatMessage")||e&&s(e,"formatMessage")||a).call(t,(s(o,"intlGet")||e&&s(e,"intlGet")||a).call(t,"programs.shared.components.dueDayComponent.days",{name:"intlGet",hash:{},data:l,loc:{start:{line:1,column:42},end:{line:1,column:101}}}),{name:"formatMessage",hash:{day:e!=null?s(e,"id"):e},data:l,loc:{start:{line:1,column:25},end:{line:1,column:110}}}))+"</span>"},useData:!0}),Pa=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return n.escapeExpression((i(o,"formatMessage")||e&&i(e,"formatMessage")||a).call(t,(i(o,"intlGet")||e&&i(e,"intlGet")||a).call(t,"programs.shared.components.dueDayComponent.days",{name:"intlGet",hash:{},data:l,loc:{start:{line:1,column:17},end:{line:1,column:76}}}),{name:"formatMessage",hash:{day:e!=null?i(e,"id"):e},data:l,loc:{start:{line:1,column:0},end:{line:1,column:85}}}))},useData:!0}),_a=k.extend({collection:new v.Collection(ka),isCompact:!1,getTemplate(n,e){return n===0?ya:!n&&e?xa:n?Ca:Ta},viewOptions(){const n=this.getOption("isCompact"),e=this.getState("selected"),o=e?e.id:null;return{className:n?"button-secondary--compact":"button-secondary w-100",template:this.getTemplate(o,n)}},picklistOptions:{canClear:!0,headingText:Ce.headingText,placeholderText:Ce.placeholderText,isSelectlist:!0,itemTemplate:Pa},initialize({day:n}){const e=this.collection.get(n);this.setState({selected:e})},popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},onChangeSelected(n){const e=n?n.id:null;this.triggerMethod("change:day",e)}});let q;function Oa(){return q||(q=f.request("bootstrap","teams"),q)}const Sa=he.extend({canClear:!0,initialize({owner:n,isFromFlow:e}){this.collection=Oa(),e&&(this.defaultText=w.programs.shared.actionsView.ownerComponent.defaultText),this.setState({selected:n})},onChangeSelected(n){this.triggerMethod("change:owner",n)}}),Da=d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return`    <div class="sidebar__section">
      <div><h3 class="sidebar__section-label">`+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"programs"))&&a(t,"sidebar"))&&a(t,"action"))&&a(t,"actionSidebarTemplate"))&&a(t,"tagsLabel"),e))+`</h3></div>
      <div data-tags-region></div>
    </div>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.hooks.helperMissing,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`<div class="flex-grow">
  <div class="flex">
    <div class="flex-grow">
      <h3 class="sidebar__heading" data-heading-region>`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarTemplate"))&&r(t,"headingText"),e))+`</h3>
    </div>
    <div>
      <button class="button--icon u-margin--r-8 js-menu">`+i((r(o,"far")||e&&r(e,"far")||c).call(s,"ellipsis",{name:"far",hash:{},data:l,loc:{start:{line:7,column:57},end:{line:7,column:75}}}))+`</button>
      <button class="button--icon js-close">`+i((r(o,"fas")||e&&r(e,"fas")||c).call(s,"xmark",{name:"fas",hash:{},data:l,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+`</button>
    </div>
  </div>
  <div class="u-margin--t-16">
    <div data-name-region></div>
    <div class="u-margin--t-8" data-details-region></div>
    <div data-save-region></div>
    <div class="flex u-margin--t-16">
      <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarTemplate"))&&r(t,"publishedLabel"),e))+`</h4>
      <div class="flex-grow" data-published-region></div>
    </div>
    <div class="flex u-margin--t-8">
      <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarTemplate"))&&r(t,"archivedLabel"),e))+`</h4>
      <div class="flex-grow" data-archived-region></div>
    </div>
    <div class="flex u-margin--t-8">
      <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarTemplate"))&&r(t,"behaviorLabel"),e))+`</h4>
      <div class="flex-grow" data-behavior-region></div>
    </div>
    <div class="flex u-margin--t-8">
      <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarTemplate"))&&r(t,"ownerLabel"),e))+`</h4>
      <div class="flex-grow" data-owner-region></div>
    </div>
    <div class="flex u-margin--t-8">
      <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarTemplate"))&&r(t,"dueDayLabel"),e))+`</h4>
      <div class="flex-grow" data-due-region></div>
    </div>
    <div class="flex u-margin--t-8">
      <h4 class="sidebar__label u-margin--t-8">`+i(a((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarTemplate"))&&r(t,"formLabel"),e))+`</h4>
      <div class="flex-grow" data-form-region></div>
    </div>
    <div class="u-margin--t-24" data-form-sharing-region></div>
    <div class="u-margin--t-24" data-allow-uploads-region></div>
`+((t=r(o,"if").call(s,e!=null?r(e,"canTag"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:41,column:4},end:{line:46,column:11}}}))!=null?t:"")+`  </div>
</div>
<div data-timestamps-region></div>
`},useData:!0}),Ma=d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return' placeholder="'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"programs"))&&a(t,"sidebar"))&&a(t,"action"))&&a(t,"actionNameTemplate"))&&a(t,"placeholder"),e))+'"'},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c="function",r=n.escapeExpression,m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return'<textarea class="input-primary textarea-flex__input js-input"'+((t=m(o,"if").call(i,e!=null?m(e,"isNew"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:61},end:{line:1,column:162}}}))!=null?t:"")+">"+r((a=(a=m(o,"name")||(e!=null?m(e,"name"):e))!=null?a:s,typeof a===c?a.call(i,{name:"name",hash:{},data:l,loc:{start:{line:1,column:163},end:{line:1,column:173}}}):a))+`</textarea>
<div class="textarea-flex__container input-primary js-spacer">`+r((a=(a=m(o,"name")||(e!=null?m(e,"name"):e))!=null?a:s,typeof a===c?a.call(i,{name:"name",hash:{},data:l,loc:{start:{line:2,column:62},end:{line:2,column:72}}}):a))+` </div>
`},useData:!0}),Va=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.hooks.helperMissing,r="function",m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+i(n.lambda((t=(t=(t=(t=(t=l&&m(l,"intl"))&&m(t,"programs"))&&m(t,"sidebar"))&&m(t,"action"))&&m(t,"actionDetailsTemplate"))&&m(t,"placeholder"),e))+'">'+i((a=(a=m(o,"details")||(e!=null?m(e,"details"):e))!=null?a:c,typeof a===r?a.call(s,{name:"details",hash:{},data:l,loc:{start:{line:1,column:148},end:{line:1,column:161}}}):a))+`</textarea>
<div class="textarea-flex__container input-secondary sidebar__details js-spacer">`+i((a=(a=m(o,"details")||(e!=null?m(e,"details"):e))!=null?a:c,typeof a===r?a.call(s,{name:"details",hash:{},data:l,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):a))+` </div>
`},useData:!0}),{ENTER_KEY:Ea}=pe,ja=h.extend({className:"u-margin--t-8 sidebar__save",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<button class="button--green" disabled>'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"programs"))&&a(t,"sidebar"))&&a(t,"action"))&&a(t,"actionSidebarViews"))&&a(t,"disabledSaveView"))&&a(t,"saveBtn"),e))+"</button>"},useData:!0})}),Aa=h.extend({className:"u-margin--t-8 sidebar__save",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
    <button class="button--green js-save">`+i(a((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"sidebar"))&&s(t,"action"))&&s(t,"actionSidebarViews"))&&s(t,"saveView"))&&s(t,"saveBtn"),e))+`</button>
    <button class="button--text u-margin--r-4 js-cancel">`+i(a((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"sidebar"))&&s(t,"action"))&&s(t,"actionSidebarViews"))&&s(t,"saveView"))&&s(t,"cancelBtn"),e))+`</button>
  `},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),Fa=h.extend({className:"pos--relative",template:Ma,behaviors:[O],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown(n){if(n.which===Ea){n.preventDefault();return}},onWatchChange(n){const e=fe(n);this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("name",e)},templateContext(){return{isNew:this.model.isNew()}},onDomRefresh(){this.model.isNew()&&this.ui.input.focus()}}),Ia=h.extend({className:"pos--relative",template:Va,behaviors:[O],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange(n){this.ui.input.val(n),this.ui.spacer.text(n||" "),this.model.set("details",M(n))}}),Pe=h.extend({template:d.template({1:function(n,e,o,u,l){return"is-on"},3:function(n,e,o,u,l){return"disabled"},5:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return n.escapeExpression((t(o,"fas")||e&&t(e,"fas")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"toggle-on",{name:"fas",hash:{},data:l,loc:{start:{line:3,column:20},end:{line:3,column:39}}}))},7:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"toggle-off",{name:"far",hash:{},data:l,loc:{start:{line:3,column:47},end:{line:3,column:67}}}))},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
    <button class="program-action-sidebar__toggle button-secondary `+((t=s(o,"if").call(a,e!=null?s(e,"status"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:67},end:{line:2,column:93}}}))!=null?t:"")+' js-toggle" '+((t=s(o,"if").call(a,e!=null?s(e,"isDisabled"):e,{name:"if",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:105},end:{line:2,column:138}}}))!=null?t:"")+`>
      `+((t=s(o,"if").call(a,e!=null?s(e,"status"):e,{name:"if",hash:{},fn:n.program(5,l,0),inverse:n.program(7,l,0),data:l,loc:{start:{line:3,column:6},end:{line:3,column:74}}}))!=null?t:"")+`
      `+n.escapeExpression((s(o,"formatMessage")||e&&s(e,"formatMessage")||i).call(a,(s(o,"intlGet")||e&&s(e,"intlGet")||i).call(a,"programs.shared.components.toggleComponent.toggle",{name:"intlGet",hash:{},data:l,loc:{start:{line:4,column:22},end:{line:4,column:83}}}),{name:"formatMessage",hash:{status:e!=null?s(e,"status"):e},data:l,loc:{start:{line:4,column:6},end:{line:4,column:99}}}))+`
    </button>
  `},useData:!0}),templateContext(){return{status:this.getOption("status"),isDisabled:this.getOption("isDisabled")}},triggers:{"click .js-toggle":"click"}}),La=h.extend({className:"sidebar__footer flex",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.hooks.helperMissing,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`
    <div class="sidebar__footer-left"><h4 class="sidebar__label">`+i(a((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarViews"))&&r(t,"timestampsView"))&&r(t,"createdAt"),e))+"</h4><div>"+i((r(o,"formatDateTime")||e&&r(e,"formatDateTime")||c).call(s,e!=null?r(e,"created_at"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:2,column:154},end:{line:2,column:193}}}))+`</div></div>
    <div><h4 class="sidebar__label">`+i(a((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarViews"))&&r(t,"timestampsView"))&&r(t,"updatedAt"),e))+"</h4><div>"+i((r(o,"formatDateTime")||e&&r(e,"formatDateTime")||c).call(s,e!=null?r(e,"updated_at"):e,"AT_TIME",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:3,column:125},end:{line:3,column:164}}}))+`</div></div>
  `},useData:!0})}),Na=h.extend({getTemplate(){return this.model.hasOutreach()?d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return n.escapeExpression(n.lambda((t=(t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"programs"))&&a(t,"sidebar"))&&a(t,"action"))&&a(t,"actionSidebarViews"))&&a(t,"headingView"))&&a(t,"headingOutreachText"),e))},useData:!0}):d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return n.escapeExpression(n.lambda((t=(t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"programs"))&&a(t,"sidebar"))&&a(t,"action"))&&a(t,"actionSidebarViews"))&&a(t,"headingView"))&&a(t,"headingText"),e))},useData:!0})}}),_e=h.extend({tagName:"button",className:"button--blue w-100",attributes(){return{disabled:this.getOption("isDisabled")}},triggers:{click:"click"},template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return a((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"share-from-square",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:27}}}))+" "+a(n.lambda((t=(t=(t=(t=(t=(t=l&&i(l,"intl"))&&i(t,"programs"))&&i(t,"sidebar"))&&i(t,"action"))&&i(t,"actionSidebarViews"))&&i(t,"formSharingButtonView"))&&i(t,"buttonText"),e))},useData:!0})}),Ra=h.extend({className:"sidebar__dialog",triggers:{"click .js-disable":"click"},template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lambda,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`
    <div class="flex">
      <h3 class="sidebar__heading flex-grow">`+s((r(o,"far")||e&&r(e,"far")||i).call(a,"share-from-square",{name:"far",hash:{classes:"u-margin--r-8"},data:l,loc:{start:{line:3,column:45},end:{line:3,column:96}}}))+s(c((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarViews"))&&r(t,"formSharingView"))&&r(t,"label"),e))+`</h3>
      <button class="button--link js-disable">`+s(c((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarViews"))&&r(t,"formSharingView"))&&r(t,"disableButtonText"),e))+`</button>
    </div>
    <div class="flex u-margin--t-16">
      <h4 class="sidebar__label--inset u-margin--t-8">`+s(c((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarViews"))&&r(t,"formSharingView"))&&r(t,"recipientLabel"),e))+`</h4>
      <div class="flex-grow"><button class="button-secondary w-100" disabled>`+s((r(o,"far")||e&&r(e,"far")||i).call(a,"user-plus",{name:"far",hash:{},data:l,loc:{start:{line:8,column:77},end:{line:8,column:96}}}))+" "+s(c((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarViews"))&&r(t,"formSharingView"))&&r(t,"recipientDefault"),e))+`</button></div>
    </div>
    <div class="flex u-margin--t-8">
      <h4 class="sidebar__label--inset u-margin--t-8">`+s(c((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarViews"))&&r(t,"formSharingView"))&&r(t,"whenLabel"),e))+`</h4>
      <div class="flex-grow"><button class="button-secondary w-100" disabled>`+s((r(o,"far")||e&&r(e,"far")||i).call(a,"stopwatch",{name:"far",hash:{},data:l,loc:{start:{line:12,column:77},end:{line:12,column:96}}}))+" "+s(c((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"programs"))&&r(t,"sidebar"))&&r(t,"action"))&&r(t,"actionSidebarViews"))&&r(t,"formSharingView"))&&r(t,"whenDefault"),e))+`</button></div>
    </div>
  `},useData:!0})}),Ha=h.extend({template:d.template({1:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lambda,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`      <div class="flex sidebar__attachments">
        <h3 class="flex-grow sidebar__heading">
          `+a((s(o,"far")||e&&s(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"paperclip",{name:"far",hash:{},data:l,loc:{start:{line:5,column:10},end:{line:5,column:29}}}))+'<span class="u-margin--l-8">'+a(i((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"sidebar"))&&s(t,"action"))&&s(t,"actionSidebarViews"))&&s(t,"uploadsEnabledView"))&&s(t,"attachmentsHeadingText"),e))+`</span>
        </h3>
        <button class="button--link js-disable">`+a(i((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"sidebar"))&&s(t,"action"))&&s(t,"actionSidebarViews"))&&s(t,"uploadsEnabledView"))&&s(t,"disableButtonText"),e))+`</button>
      </div>
`},3:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return"      <button "+((t=s(o,"if").call(a,e!=null?s(e,"isButtonDisabled"):e,{name:"if",hash:{},fn:n.program(4,l,0),inverse:n.noop,data:l,loc:{start:{line:10,column:14},end:{line:10,column:53}}}))!=null?t:"")+` class="button--blue w-100 js-enable">
        `+i((s(o,"far")||e&&s(e,"far")||n.hooks.helperMissing).call(a,"paperclip",{name:"far",hash:{},data:l,loc:{start:{line:11,column:8},end:{line:11,column:27}}}))+" "+i(n.lambda((t=(t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"programs"))&&s(t,"sidebar"))&&s(t,"action"))&&s(t,"actionSidebarViews"))&&s(t,"uploadsEnabledView"))&&s(t,"enableButtonText"),e))+`
      </button>
`},4:function(n,e,o,u,l){return"disabled"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return`
`+((t=a(o,"if").call(e??(n.nullContext||{}),e!=null?a(e,"isUploadsEnabled"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.program(3,l,0),data:l,loc:{start:{line:2,column:4},end:{line:13,column:11}}}))!=null?t:"")+"  "},useData:!0}),triggers:{"click .js-enable":"click:enable","click .js-disable":"click:disable"},templateContext(){return{isUploadsEnabled:this.getOption("isUploadsEnabled"),isButtonDisabled:this.getOption("isButtonDisabled")}}}),Ga=h.extend({childViewTriggers:{save:"save",cancel:"cancel"},className:"sidebar flex-region",template:Da,regions:{heading:"[data-heading-region]",name:"[data-name-region]",details:"[data-details-region]",published:"[data-published-region]",archived:"[data-archived-region]",behavior:"[data-behavior-region]",owner:"[data-owner-region]",due:"[data-due-region]",form:"[data-form-region]",formSharing:"[data-form-sharing-region]",allowUploads:"[data-allow-uploads-region]",tags:"[data-tags-region]",save:"[data-save-region]",timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close","click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu(){const n=new v.Collection([{onSelect:Y(this.triggerMethod,this,"delete")}]);new Q({ui:this.ui.menu,uiView:this,headingText:w.programs.sidebar.action.layoutView.menuOptions.headingText,itemTemplate:d.template({compiler:[8,">= 4.3.0"],main:function(o,u,l,t,a){var i,s=o.escapeExpression,c=o.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return s((c(l,"far")||u&&c(u,"far")||o.hooks.helperMissing).call(u??(o.nullContext||{}),"trash-can",{name:"far",hash:{classes:"sidebar__delete-icon"},data:a,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))+"<span>"+s(o.lambda((i=(i=(i=(i=(i=(i=a&&c(a,"intl"))&&c(i,"programs"))&&c(i,"sidebar"))&&c(i,"action"))&&c(i,"layoutView"))&&c(i,"menuOptions"))&&c(i,"delete"),u))+"</span>"},useData:!0}),lists:[{collection:n}],align:"right",popWidth:248}).show()},templateContext(){const n=this.model.isNew();return{isNew:n,canTag:!n&&this.currentUser.can("programs:tags:manage")}},initialize({action:n,tags:e}){this.currentUser=f.request("bootstrap","currentUser"),this.tags=e,this.action=n,this.model=this.action.clone(),this.listenTo(this.action,{"change:_form change:outreach":this.showHeading,"change:published_at":this.showPublished,"change:archived_at":this.showArchived,"change:behavior":this.showBehavior,"change:_owner":this.onChangeOwner,"change:days_until_due":this.onChangeDueDay})},onChangeOwner(){this.showOwner()},onChangeDueDay(){this.showDueDay()},onAttach(){V(this.el)},onRender(){this.showHeading(),this.showAction(),this.showTimestamps(),this.showTags()},showHeading(){this.showChildView("heading",new Na({model:this.action}))},showAction(){this.showEditForm(),this.showPublished(),this.showArchived(),this.showBehavior(),this.showOwner(),this.showDueDay(),this.showForm()},showEditForm(){this.stopListening(this.model),this.model=this.action.clone(),this.listenTo(this.model,"change:name change:details",this.showSave),this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName(){this.showChildView("name",new Fa({model:this.model,action:this.action}))},showDetails(){this.showChildView("details",new Ia({model:this.model,action:this.action}))},showPublished(){const n=!!this.action.get("published_at"),e=new Pe({status:n,isDisabled:this.action.isNew()});this.listenTo(e,"click",()=>{const o=n?null:b.utc().format();this.action.save({published_at:o})}),this.showChildView("published",e)},showArchived(){const n=!!this.action.get("archived_at"),e=new Pe({status:n,isDisabled:this.action.isNew()});this.listenTo(e,"click",()=>{const o=n?null:b.utc().format();this.action.save({archived_at:o})}),this.showChildView("archived",e)},showBehavior(){const n=this.action.isNew(),e=!!this.action.get("_program_flow"),o=new Ke({isConditionalAvailable:e,behavior:this.action.get("behavior"),state:{isDisabled:n}});this.listenTo(o,"change:status",({behavior:u})=>{this.action.save({behavior:u})}),this.showChildView("behavior",o)},showOwner(){const n=this.action.isNew(),e=!!this.action.get("_program_flow"),o=new Sa({owner:this.action.getOwner(),isFromFlow:e,state:{isDisabled:n}});this.listenTo(o,"change:owner",u=>{this.action.saveOwner(u)}),this.showChildView("owner",o)},showDueDay(){const n=this.action.isNew(),e=new _a({day:this.action.get("days_until_due"),state:{isDisabled:n}});this.listenTo(e,"change:day",o=>{this.action.save({days_until_due:o})}),this.showChildView("due",e)},showForm(){const n=this.action.isNew(),e=new ba({form:this.action.getForm(),state:{isDisabled:n}});this.listenTo(e,{"change:form"(o){this.action.saveForm(o)},"click:form"(o){this.triggerMethod("click:form",o)}}),this.showChildView("form",e)},showTags(){if(this.model.isNew()||!this.currentUser.can("programs:tags:manage"))return;const n=new Je({allTags:this.tags,tags:this.action.getTags()});this.listenTo(n,{"add:tag"(e){this.action.addTag(e)},"remove:tag"(e){this.action.removeTag(e)}}),this.showChildView("tags",n)},showTimestamps(){this.action.isNew()||this.showChildView("timestamps",new La({model:this.action}))},showSave(){if(!this.model.isValid())return this.showDisabledSave();this.showChildView("save",new Aa({model:this.model}))},showDisabledSave(){this.showChildView("save",new ja)},onSave(){this.getRegion("save").empty()},onCancel(){if(this.model.isNew()){this.triggerMethod("close",this);return}this.showEditForm()}}),$a=C.extend({beforeStart(){return f.request("entities","fetch:tags:collection")},onBeforeStart({action:n}){this.action=n},onStart(n,e){this.showView(new Ga({action:this.action,tags:e})),this.showFormSharing(),this.listenTo(this.action,"change:_form change:outreach",this.showFormSharing),this.showUploadsEnabled(),this.listenTo(this.action,"change:allowed_uploads",this.showUploadsEnabled)},showUploadsEnabled(){if(!f.request("settings","get","upload_attachments"))return;const n=new Ha({isUploadsEnabled:!!tt(this.action.get("allowed_uploads")),isButtonDisabled:this.action.isNew()});this.listenTo(n,"click:enable",()=>{this.action.enableAttachmentUploads()}),this.listenTo(n,"click:disable",()=>{this.action.disableAttachmentUploads()}),this.showChildView("allowUploads",n)},showFormSharing(){if(!f.request("settings","get","care_team_outreach"))return;if(!this.action.getForm()){this.showChildView("formSharing",new _e({isDisabled:!0}));return}if(!this.action.hasOutreach()){const o=new _e;this.listenTo(o,"click",()=>{this.action.save({outreach:"patient"})}),this.showChildView("formSharing",o);return}const e=new Ra;this.listenTo(e,"click",()=>{this.action.save({outreach:ut.DISABLED})}),this.showChildView("formSharing",e)},viewEvents:{save:"onSave",close:"stop",delete:"onDelete","click:form":"onClickForm"},onSave({model:n}){if(n.isNew()){this.action.saveAll(n.attributes).then(()=>{const e=this.action.get("_program_flow");if(e){f.trigger("event-router","programFlow:action",e,this.action.id);return}f.trigger("event-router","program:action",this.action.get("_program"),this.action.id)});return}this.action.save(n.pick("name","details"))},onDelete(){this.action.destroy({wait:!0}).then(()=>{this.stop()}).catch(({responseData:n})=>{f.request("alert","show:apiError",n)})},onStop(){this.action.trigger("editing",!1),this.action&&this.action.isNew()&&this.action.destroy(),f.request("sidebar","close")},onClickForm(n){f.trigger("event-router","form:preview",n.id)}}),Oe=w.clinicians.shared.components.roleComponent,qa=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s="function",c=n.escapeExpression,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return"<div><div>"+c((t=(t=r(o,"label")||(e!=null?r(e,"label"):e))!=null?t:i,typeof t===s?t.call(a,{name:"label",hash:{},data:l,loc:{start:{line:1,column:10},end:{line:1,column:21}}}):t))+'</div><div class="role-component__details">'+c((t=(t=r(o,"description")||(e!=null?r(e,"description"):e))!=null?t:i,typeof t===s?t.call(a,{name:"description",hash:{},data:l,loc:{start:{line:1,column:64},end:{line:1,column:81}}}):t))+"</div></div>"},useData:!0}),Wa=k.extend({isCompact:!1,popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},picklistOptions:{headingText:Oe.headingText,itemTemplate:qa},viewOptions(){return{className:this.getOption("isCompact")?"button-secondary":"button-secondary w-100",templateContext:{attr:"label",defaultText:Oe.defaultText,icon:{type:"far",icon:"shield"}}}},initialize({role:n}){this.collection=f.request("bootstrap","roles"),this.setState({selected:n})},onChangeSelected(n){this.triggerMethod("change:role",n)}}),Ua=h.extend({tagName:"li",className(){return this.getOption("isDisabled")?"list-manager__item is-disabled":"list-manager__item"},template:d.template({1:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return'<button class="button--icon list-manager__remove js-remove">'+n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"trash-can",{name:"far",hash:{},data:l,loc:{start:{line:1,column:118},end:{line:1,column:137}}}))+"</button>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return c((r(o,"far")||e&&r(e,"far")||s).call(i,"users",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+"<span>"+c((a=(a=r(o,"name")||(e!=null?r(e,"name"):e))!=null?a:s,typeof a=="function"?a.call(i,{name:"name",hash:{},data:l,loc:{start:{line:1,column:21},end:{line:1,column:29}}}):a))+"</span>"+((t=r(o,"unless").call(i,e!=null?r(e,"isDisabled"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:36},end:{line:1,column:157}}}))!=null?t:"")},useData:!0}),templateContext(){return{isDisabled:this.getOption("isDisabled")}},triggers:{"click .js-remove":"remove"}}),za=T.extend({tagName:"ul",childView:Ua,childViewOptions(){return{isDisabled:this.getOption("isDisabled")}},childViewTriggers:{remove:"remove"},onRemove(n){this.triggerMethod("remove:member",n.model)}}),Ba=k.extend({initialize(){this.listenTo(this.collection,"update",this.show)},popWidth(){return this.getView().$el.outerWidth()},viewOptions:{className:"button-secondary list-manager__droplist",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return a((i(o,"far")||e&&i(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"users",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+"<span>"+a(n.lambda((t=(t=(t=(t=(t=l&&i(l,"intl"))&&i(t,"shared"))&&i(t,"components"))&&i(t,"workspacesManager"))&&i(t,"workspacesDroplist"))&&i(t,"addWorkspace"),e))+"</span>"},useData:!0})},picklistOptions:{attr:"name"},onShow(){const n=this.getOption("isDisabled");this.setState({isDisabled:n||this.collection.length===0})},onPicklistSelect({model:n}){this.triggerMethod("add:member",n),this.popRegion.empty()}}),B=h.extend({className:"list-manager__wrapper",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){return`
    <div data-workspaces-region></div>
    <div data-droplist-region></div>
  `},useData:!0}),regions:{workspaces:"[data-workspaces-region]",droplist:"[data-droplist-region]"},initialize({member:n,workspaces:e}){this.member=n,this.memberWorkspaces=this.member.getWorkspaces(),this.workspaces=e,this.workspaces.remove(this.memberWorkspaces.models)},onRender(){this.showWorkspaces(),this.showDroplist()},showWorkspaces(){const n=this.showChildView("workspaces",new za({collection:this.memberWorkspaces,isDisabled:this.getOption("isDisabled")}));this.listenTo(n,"remove:member",this.removeMemberWorkspace)},showDroplist(){if(this.getOption("isDisabled"))return;const n=this.showChildView("droplist",new Ba({collection:this.workspaces,...this.getOption("droplistOptions")}));this.listenTo(n,"add:member",this.addMemberWorkspace)},addMemberWorkspace(n){this.memberWorkspaces.add(n),this.workspaces.remove(n),this.triggerMethod("add:member",this.member,n)},removeMemberWorkspace(n){this.memberWorkspaces.remove(n),this.workspaces.add(n),this.triggerMethod("remove:member",this.member,n)}}),L=w.clinicians.shared.clinicianViews,Ya=B.extend({removeMemberWorkspace(n){if(this.member.isNew()){B.prototype.removeMemberWorkspace.call(this,n);return}const e=f.request("modal","show:small",{bodyText:ue(d.template({compiler:[8,">= 4.3.0"],main:function(o,u,l,t,a){var i=u??(o.nullContext||{}),s=o.hooks.helperMissing,c=o.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return o.escapeExpression((c(l,"formatMessage")||u&&c(u,"formatMessage")||s).call(i,(c(l,"intlGet")||u&&c(u,"intlGet")||s).call(i,"clinicians.shared.clinicianViews.workspacesComponent.removeModal.bodyText",{name:"intlGet",hash:{},data:a,loc:{start:{line:1,column:16},end:{line:1,column:101}}}),{name:"formatMessage",hash:{team:u!=null?c(u,"team"):u,workspace:u!=null?c(u,"workspace"):u},data:a,loc:{start:{line:1,column:0},end:{line:1,column:133}}}))},useData:!0}),{workspace:n.get("name"),team:this.member.getTeam().get("name")}),headingText:L.workspacesComponent.removeModal.headingText,submitText:L.workspacesComponent.removeModal.submitText,buttonClass:"button--red",onSubmit:()=>{e.destroy(),B.prototype.removeMemberWorkspace.call(this,n)}})}}),Ka={id:"enabled",state:"active",icon:{type:"fas",icon:"circle-check"},name:L.stateComponent.active},Ja={id:"enabled",state:"pending",icon:{type:"fas",icon:"circle-half-stroke"},name:L.stateComponent.pending},Qa={id:"disabled",state:"disabled",icon:{type:"far",icon:"circle-minus"},name:L.stateComponent.disabled},Xa=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return'<span class="clinician-state--'+c((a=(a=r(o,"state")||(e!=null?r(e,"state"):e))!=null?a:s,typeof a=="function"?a.call(i,{name:"state",hash:{},data:l,loc:{start:{line:1,column:30},end:{line:1,column:41}}}):a))+'">'+c((r(o,"fa")||e&&r(e,"fa")||s).call(i,(t=e!=null?r(e,"icon"):e)!=null?r(t,"type"):t,(t=e!=null?r(e,"icon"):e)!=null?r(t,"icon"):t,{name:"fa",hash:{},data:l,loc:{start:{line:1,column:43},end:{line:1,column:69}}}))+"</span>"},useData:!0}),Se=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c="function",r=n.escapeExpression,m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return'<span class="clinician-state--'+r((a=(a=m(o,"state")||(e!=null?m(e,"state"):e))!=null?a:s,typeof a===c?a.call(i,{name:"state",hash:{},data:l,loc:{start:{line:1,column:30},end:{line:1,column:41}}}):a))+'">'+r((m(o,"fa")||e&&m(e,"fa")||s).call(i,(t=e!=null?m(e,"icon"):e)!=null?m(t,"type"):t,(t=e!=null?m(e,"icon"):e)!=null?m(t,"icon"):t,{name:"fa",hash:{},data:l,loc:{start:{line:1,column:43},end:{line:1,column:69}}}))+"<span>"+r((a=(a=m(o,"name")||(e!=null?m(e,"name"):e))!=null?a:s,typeof a===c?a.call(i,{name:"name",hash:{},data:l,loc:{start:{line:1,column:75},end:{line:1,column:85}}}):a))+"</span></span>"},useData:!0}),Za=k.extend({isCompact:!1,popWidth(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},picklistOptions(){return{itemTemplate:Se,headingText:L.stateComponent.headingText}},viewOptions(){const n=this.getOption("isCompact");return{className:n?"button-secondary--compact":"button-secondary w-100",template:n?Xa:Se}},initialize({selectedId:n,isActive:e}){this.collection=new v.Collection([e?Ka:Ja,Qa]),this.setState("selected",this.collection.get(n))}}),el=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lambda,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`<div class="flex-grow">
  <div class="flex">
    <div class="flex-grow">
      <h3 class="sidebar__heading">Clinician</h3>
    </div>
    <div>
      <button class="button--icon js-close">`+a((s(o,"fas")||e&&s(e,"fas")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"xmark",{name:"fas",hash:{},data:l,loc:{start:{line:7,column:44},end:{line:7,column:59}}}))+`</button>
    </div>
  </div>
  <div class="u-margin--t-16">
    <div data-name-region></div>
    <div class="u-margin--t-8" data-email-region></div>
    <div data-save-region></div>

    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">`+a(i((t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"clinicians"))&&s(t,"sidebar"))&&s(t,"clinicianSidebarTemplate"))&&s(t,"state"),e))+`</h4><div class="flex-grow" data-state-region></div></div>
    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">`+a(i((t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"clinicians"))&&s(t,"sidebar"))&&s(t,"clinicianSidebarTemplate"))&&s(t,"role"),e))+`</h4><div class="flex-grow" data-role-region></div></div>
    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">`+a(i((t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"clinicians"))&&s(t,"sidebar"))&&s(t,"clinicianSidebarTemplate"))&&s(t,"team"),e))+`</h4><div class="flex-grow" data-team-region></div></div>
    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">`+a(i((t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"clinicians"))&&s(t,"sidebar"))&&s(t,"clinicianSidebarTemplate"))&&s(t,"workspaces"),e))+`</h4><div class="flex-grow clinician-sidebar__workspaces" data-workspaces-region></div></div>
    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8"></h4><div class="flex-grow" data-info-region></div></div>
    <div class="flex u-margin--t-8"><div class="flex-grow" data-worklist-region></div></div>
  </div>
</div>
<div data-timestamps-region></div>
`},useData:!0}),tl=h.extend({className:"pos--relative",template:d.template({1:function(n,e,o,u,l){return" has-error"},3:function(n,e,o,u,l){return"disabled"},5:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return'<span class="clinician-sidebar__locked-icon">'+n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"lock",{name:"far",hash:{},data:l,loc:{start:{line:3,column:68},end:{line:3,column:82}}}))+"</span>"},7:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<div class="form-error u-margin--b-4">'+n.escapeExpression((t=(t=a(o,"error")||(e!=null?a(e,"error"):e))!=null?t:n.hooks.helperMissing,typeof t=="function"?t.call(e??(n.nullContext||{}),{name:"error",hash:{},data:l,loc:{start:{line:4,column:55},end:{line:4,column:66}}}):t))+"</div>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.escapeExpression,c=n.hooks.helperMissing,r="function",m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return`
    <input class="input-primary w-100 js-input`+((t=m(o,"if").call(i,e!=null?m(e,"error"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:46},end:{line:2,column:76}}}))!=null?t:"")+'" placeholder="'+s(n.lambda((t=(t=(t=(t=(t=l&&m(l,"intl"))&&m(t,"clinicians"))&&m(t,"sidebar"))&&m(t,"clinicianSidebarViews"))&&m(t,"nameView"))&&m(t,"placeholder"),e))+'" value="'+s((a=(a=m(o,"name")||(e!=null?m(e,"name"):e))!=null?a:c,typeof a===r?a.call(i,{name:"name",hash:{},data:l,loc:{start:{line:2,column:173},end:{line:2,column:183}}}):a))+'" '+((t=m(o,"unless").call(i,e!=null?m(e,"canEdit"):e,{name:"unless",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:185},end:{line:2,column:223}}}))!=null?t:"")+" />"+s((a=(a=m(o,"remove_whitespace")||(e!=null?m(e,"remove_whitespace"):e))!=null?a:c,typeof a===r?a.call(i,{name:"remove_whitespace",hash:{},data:l,loc:{start:{line:2,column:226},end:{line:2,column:251}}}):a))+((t=m(o,"unless").call(i,e!=null?m(e,"canEdit"):e,{name:"unless",hash:{},fn:n.program(5,l,0),inverse:n.noop,data:l,loc:{start:{line:3,column:4},end:{line:3,column:100}}}))!=null?t:"")+`
    `+((t=m(o,"if").call(i,e!=null?m(e,"error"):e,{name:"if",hash:{},fn:n.program(7,l,0),inverse:n.noop,data:l,loc:{start:{line:4,column:4},end:{line:4,column:79}}}))!=null?t:"")+`
  `},useData:!0}),templateContext(){return{canEdit:this.model.isEditable(),error:this.getOption("error")}},ui:{input:".js-input"},events:{"input @ui.input":"onInput"},onInput(n){this.model.set("name",n.target.value)}}),nl=h.extend({className:"pos--relative",template:d.template({1:function(n,e,o,u,l){return" has-error"},3:function(n,e,o,u,l){return"disabled"},5:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return'<span class="clinician-sidebar__locked-icon">'+n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"lock",{name:"far",hash:{},data:l,loc:{start:{line:3,column:68},end:{line:3,column:82}}}))+"</span>"},7:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<div class="form-error u-margin--b-4">'+n.escapeExpression((t=(t=a(o,"error")||(e!=null?a(e,"error"):e))!=null?t:n.hooks.helperMissing,typeof t=="function"?t.call(e??(n.nullContext||{}),{name:"error",hash:{},data:l,loc:{start:{line:4,column:55},end:{line:4,column:66}}}):t))+"</div>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.escapeExpression,c=n.hooks.helperMissing,r="function",m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return`
    <input class="input-primary w-100 js-input`+((t=m(o,"if").call(i,e!=null?m(e,"error"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:46},end:{line:2,column:76}}}))!=null?t:"")+'" placeholder="'+s(n.lambda((t=(t=(t=(t=(t=l&&m(l,"intl"))&&m(t,"clinicians"))&&m(t,"sidebar"))&&m(t,"clinicianSidebarViews"))&&m(t,"emailView"))&&m(t,"placeholder"),e))+'" value="'+s((a=(a=m(o,"email")||(e!=null?m(e,"email"):e))!=null?a:c,typeof a===r?a.call(i,{name:"email",hash:{},data:l,loc:{start:{line:2,column:174},end:{line:2,column:185}}}):a))+'" '+((t=m(o,"unless").call(i,e!=null?m(e,"canEdit"):e,{name:"unless",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:187},end:{line:2,column:225}}}))!=null?t:"")+" />"+s((a=(a=m(o,"remove_whitespace")||(e!=null?m(e,"remove_whitespace"):e))!=null?a:c,typeof a===r?a.call(i,{name:"remove_whitespace",hash:{},data:l,loc:{start:{line:2,column:228},end:{line:2,column:253}}}):a))+((t=m(o,"unless").call(i,e!=null?m(e,"canEdit"):e,{name:"unless",hash:{},fn:n.program(5,l,0),inverse:n.noop,data:l,loc:{start:{line:3,column:4},end:{line:3,column:100}}}))!=null?t:"")+`
    `+((t=m(o,"if").call(i,e!=null?m(e,"error"):e,{name:"if",hash:{},fn:n.program(7,l,0),inverse:n.noop,data:l,loc:{start:{line:4,column:4},end:{line:4,column:79}}}))!=null?t:"")+`
  `},useData:!0}),templateContext(){return{canEdit:this.model.isEditable(),error:this.getOption("error")}},ui:{input:".js-input"},events:{"input @ui.input":"onInput"},onInput(n){this.model.set("email",n.target.value)}}),al=h.extend({className:"u-margin--t-8 sidebar__save",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
    <button class="button--green js-save">`+i(a((t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"clinicians"))&&s(t,"sidebar"))&&s(t,"clinicianSidebarViews"))&&s(t,"saveView"))&&s(t,"saveBtn"),e))+`</button>
    <button class="button--text u-margin--r-4 js-cancel">`+i(a((t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"clinicians"))&&s(t,"sidebar"))&&s(t,"clinicianSidebarViews"))&&s(t,"saveView"))&&s(t,"cancelBtn"),e))+`</button>
  `},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),ll=h.extend({className:"u-margin--t-8 sidebar__save",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<button class="button--green" disabled>'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"clinicians"))&&a(t,"sidebar"))&&a(t,"clinicianSidebarViews"))&&a(t,"disabledSaveView"))&&a(t,"saveBtn"),e))+"</button>"},useData:!0})}),sl=h.extend({className:"sidebar__info",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`
    `+a((i(o,"fas")||e&&i(e,"fas")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"circle-info",{name:"fas",hash:{},data:l,loc:{start:{line:2,column:4},end:{line:2,column:25}}}))+a(n.lambda((t=(t=(t=(t=(t=l&&i(l,"intl"))&&i(t,"clinicians"))&&i(t,"sidebar"))&&i(t,"clinicianSidebarViews"))&&i(t,"infoView"))&&i(t,"workspaceTeamInfo"),e))+`
  `},useData:!0})}),il=h.extend({className:"clinician-sidebar__worklist",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return`
    <h3 class="sidebar__heading">
      `+s((c(o,"formatHTMLMessage")||e&&c(e,"formatHTMLMessage")||i).call(a,(c(o,"intlGet")||e&&c(e,"intlGet")||i).call(a,"clinicians.sidebar.clinicianSidebarViews.worklistView.workspaceName",{name:"intlGet",hash:{},data:l,loc:{start:{line:3,column:26},end:{line:3,column:105}}}),{name:"formatHTMLMessage",hash:{name:e!=null?c(e,"workspaceName"):e},data:l,loc:{start:{line:3,column:6},end:{line:3,column:126}}}))+`
    </h3>
    <button class="button-primary w-100 u-margin--t-8 js-button">
      `+s((c(o,"far")||e&&c(e,"far")||i).call(a,"list",{name:"far",hash:{},data:l,loc:{start:{line:6,column:6},end:{line:6,column:20}}}))+"<span>"+s((c(o,"formatHTMLMessage")||e&&c(e,"formatHTMLMessage")||i).call(a,(c(o,"intlGet")||e&&c(e,"intlGet")||i).call(a,"clinicians.sidebar.clinicianSidebarViews.worklistView.worklistBtn",{name:"intlGet",hash:{},data:l,loc:{start:{line:6,column:46},end:{line:6,column:123}}}),{name:"formatHTMLMessage",hash:{name:e!=null?c(e,"clinicianName"):e},data:l,loc:{start:{line:6,column:26},end:{line:6,column:144}}}))+`</span>
    </button>
    <div class="clinician-sidebar__worklist-info">
      `+s(n.lambda((t=(t=(t=(t=(t=l&&c(l,"intl"))&&c(t,"clinicians"))&&c(t,"sidebar"))&&c(t,"clinicianSidebarViews"))&&c(t,"worklistView"))&&c(t,"workspacesInfo"),e))+`
    </div>
  `},useData:!0}),initialize({clinician:n,workspace:e}){this.clinician=n,this.workspace=e},templateContext(){return{clinicianName:this.clinician.get("name"),workspaceName:this.workspace.get("name")}},triggers:{"click .js-button":"click:button"},onClickButton(){f.request("sidebar","close"),f.trigger("event-router","worklist","owned-by",this.clinician.id)}}),ol=h.extend({className:"sidebar flex-region",template:el,triggers:{"click .js-close":"close"},childViewTriggers:{save:"save",cancel:"cancel"},regions:{name:"[data-name-region]",email:"[data-email-region]",save:"[data-save-region]",team:"[data-team-region]",workspaces:"[data-workspaces-region]",info:"[data-info-region]",role:"[data-role-region]",state:"[data-state-region]",worklist:"[data-worklist-region]"},initialize({clinician:n}){this.clinician=n,this.listenTo(this.clinician,{"change:enabled":this.onChangeEnabled,"change:_team":this.showInfo,"change:_workspaces":this.showInfo})},onAttach(){V(this.el)},onChangeEnabled(){this.showState(),this.showRole(),this.showTeam(),this.showWorkspaces(),this.showWorklist()},onRender(){this.showForm(),this.showState(),this.showRole(),this.showTeam(),this.showWorkspaces(),this.showInfo(),this.showWorklist()},cloneClinician(){this.clonedClinician&&this.stopListening(this.clonedClinician),this.clonedClinician=this.clinician.clone()},showName(n){this.showChildView("name",new tl({model:this.clonedClinician,error:n}))},showEmail(n){this.showChildView("email",new nl({model:this.clonedClinician,error:n}))},showState(){const n=this.clinician.isActive(),e=this.clinician.get("enabled")?"enabled":"disabled",o=new Za({isActive:n,selectedId:e});this.listenTo(o,"change:selected",u=>{this.clinician.save({enabled:u.id!=="disabled"})}),this.showChildView("state",o)},showRole(){const n=!this.clinician.get("enabled"),e=new Wa({role:this.clinician.getRole(),state:{isDisabled:n}});this.listenTo(e,"change:role",o=>{this.clinician.saveRole(o)}),this.showChildView("role",e)},showTeam(){const n=!this.clinician.get("enabled"),e=new he({team:this.clinician.get("_team"),state:{isDisabled:n}});this.listenTo(e,"change:team",o=>{this.clinician.saveTeam(o)}),this.showChildView("team",e)},showWorkspaces(){const n=this.showChildView("workspaces",new Ya({member:this.clinician,workspaces:f.request("bootstrap","workspaces"),droplistOptions:{isDisabled:!this.clinician.get("enabled")}}));this.listenTo(n,{"add:member"(e,o){o.addClinician(e)},"remove:member"(e,o){o.removeClinician(e)}})},showSave(){if(!this.clonedClinician.isValid()){this.showDisabledSave();return}this.showChildView("save",new al({model:this.clonedClinician}))},showDisabledSave(){this.showChildView("save",new ll)},showForm(){this.cloneClinician(),this.listenTo(this.clonedClinician,"change:name change:email",this.showSave),this.getRegion("save").empty(),this.showName(),this.showEmail()},showInfo(){if(!this.clinician.hasTeam()||this.clinician.getWorkspaces().length===0){this.showChildView("info",new sl);return}this.getRegion("info").empty()},showWorklist(){const n=f.request("workspace","current");this.showChildView("worklist",new il({clinician:this.clinician,workspace:n}))},showErrors({name:n,email:e}){this.showName(n),this.showEmail(e),this.showDisabledSave()},onSave(){this.getRegion("save").empty()},onCancel(){this.showForm()}}),rl=C.extend({onBeforeStart({clinician:n}){this.clinician=n,this.showView(new ol({clinician:n}))},viewEvents:{save:"onSave",close:"stop"},onSave({model:n}){this.clinician.save(n.attributes).then(()=>{f.trigger("event-router","clinician",this.clinician.id)},({responseData:e})=>{const o=this.clinician.parseErrors(e);this.getView().showErrors(o)})},onStop(){this.clinician.trigger("editing",!1),f.request("sidebar","close"),f.trigger("event-router","clinicians:all")}}),cl=d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c="function",r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`<div class="flex-grow">
  <div class="flex">
    <div class="flex-grow">
      <span class="worklist-patient-sidebar__user-icon">`+s((r(o,"far")||e&&r(e,"far")||i).call(a,"address-card",{name:"far",hash:{},data:l,loc:{start:{line:4,column:56},end:{line:4,column:78}}}))+`</span>
    </div>
    <div class="worklist-patient-sidebar__close-icon">
      <button class="button--icon js-close">`+s((r(o,"fas")||e&&r(e,"fas")||i).call(a,"xmark",{name:"fas",hash:{},data:l,loc:{start:{line:7,column:44},end:{line:7,column:59}}}))+`</button>
    </div>
  </div>
  <div class="worklist-patient-sidebar__patient-info js-patient">
    <div class="worklist-patient-sidebar__patient-name">`+s((t=(t=r(o,"first_name")||(e!=null?r(e,"first_name"):e))!=null?t:i,typeof t===c?t.call(a,{name:"first_name",hash:{},data:l,loc:{start:{line:11,column:56},end:{line:11,column:72}}}):t))+" "+s((t=(t=r(o,"last_name")||(e!=null?r(e,"last_name"):e))!=null?t:i,typeof t===c?t.call(a,{name:"last_name",hash:{},data:l,loc:{start:{line:11,column:73},end:{line:11,column:88}}}):t))+`</div>
    <div>
      <button class="button--link">View Patient Dashboard</button>
    </div>
  </div>
  <div class="worklist-patient-sidebar__widgets" data-widgets-region></div>
</div>
`},useData:!0});function ul(n,e,o,u){return nt(n)?new n(D({model:e,slug:o.get("slug")},u,o.get("definition"))):new h(D({model:e},u,o.get("definition"),n))}const ml={widget:h.extend({className:"widgets-value",initialize(){const n=this.getOption("slug"),e=f.request("entities","get:widgetValues:model",n,this.model.id);this.values=e.get("values"),this.template=ct.compile(this.template)},serializeData(){return this.values}}),dob:{modelEvents:{"change:birth_date":"render"},template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return n.escapeExpression((i(o,"formatHTMLMessage")||e&&i(e,"formatHTMLMessage")||a).call(t,(i(o,"intlGet")||e&&i(e,"intlGet")||a).call(t,"patients.widgets.widgets.dob",{name:"intlGet",hash:{},data:l,loc:{start:{line:1,column:20},end:{line:1,column:60}}}),{name:"formatHTMLMessage",hash:{age:e!=null?i(e,"age"):e,dob:(i(o,"formatDateTime")||e&&i(e,"formatDateTime")||a).call(t,e!=null?i(e,"dob"):e,"LONG",{name:"formatDateTime",hash:{inputFormat:"YYYY-MM-DD"},data:l,loc:{start:{line:1,column:65},end:{line:1,column:117}}})},data:l,loc:{start:{line:1,column:0},end:{line:1,column:127}}}))},useData:!0}),templateContext(){const n=this.model.get("birth_date"),e=b().diff(b(n,"YYYY-MM-DD"),"years");return{dob:n,age:e}}},sex:{modelEvents:{"change:sex":"render"},template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=e??(n.nullContext||{}),a=n.hooks.helperMissing,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return n.escapeExpression((i(o,"formatMessage")||e&&i(e,"formatMessage")||a).call(t,(i(o,"intlGet")||e&&i(e,"intlGet")||a).call(t,"patients.widgets.widgets.sex",{name:"intlGet",hash:{},data:l,loc:{start:{line:1,column:16},end:{line:1,column:56}}}),{name:"formatMessage",hash:{sex:e!=null?i(e,"sex"):e},data:l,loc:{start:{line:1,column:0},end:{line:1,column:66}}}))},useData:!0})},status:h.extend({template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return'<span class="widgets__status-'+s((t=(t=c(o,"status")||(e!=null?c(e,"status"):e))!=null?t:i,typeof t=="function"?t.call(a,{name:"status",hash:{},data:l,loc:{start:{line:1,column:29},end:{line:1,column:41}}}):t))+'">'+s((c(o,"formatMessage")||e&&c(e,"formatMessage")||i).call(a,(c(o,"intlGet")||e&&c(e,"intlGet")||i).call(a,"patients.widgets.widgets.status",{name:"intlGet",hash:{},data:l,loc:{start:{line:1,column:59},end:{line:1,column:102}}}),{name:"formatMessage",hash:{status:e!=null?c(e,"status"):e},data:l,loc:{start:{line:1,column:43},end:{line:1,column:118}}}))+"</span>"},useData:!0}),initialize(){this.workspacePatient=this.model.getWorkspacePatient(),this.listenTo(this.workspacePatient,"change:status",this.render)},templateContext(){return{status:this.workspacePatient.get("status")}}}),divider:{template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){return'<div class="widgets__divider"></div>'},useData:!0})},workspaces:{modelEvents:{"change:_workspaces":"render"},template:d.template({1:function(n,e,o,u,l){return"<div>"+n.escapeExpression(n.lambda(e,e))+"</div>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return(t=a(o,"each").call(e??(n.nullContext||{}),e!=null?a(e,"workspaces"):e,{name:"each",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:0},end:{line:1,column:50}}}))!=null?t:""},useData:!0}),templateContext(){return{workspaces:this.model.getWorkspaces().map("name")}}},patientIdentifiers:{className:"widgets-value",template:d.template({1:function(n,e,o,u,l){var t,a,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return(t=(a=(a=i(o,"defaultHtml")||(e!=null?i(e,"defaultHtml"):e))!=null?a:n.hooks.helperMissing,typeof a=="function"?a.call(e??(n.nullContext||{}),{name:"defaultHtml",hash:{},data:l,loc:{start:{line:1,column:42},end:{line:1,column:61}}}):a))!=null?t:""},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return n.escapeExpression((a=(a=s(o,"displayValue")||(e!=null?s(e,"displayValue"):e))!=null?a:n.hooks.helperMissing,typeof a=="function"?a.call(i,{name:"displayValue",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:18}}}):a))+((t=s(o,"unless").call(i,e!=null?s(e,"displayValue"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:18},end:{line:1,column:72}}}))!=null?t:"")},useData:!0}),templateContext(){const n=this.getOption("default_html"),e=this.model.get("identifiers"),o=this.getOption("identifier_type"),u=je(e,{type:o});return{displayValue:u&&u.value,defaultHtml:n}}},formWidget:h.extend({className:"button-primary widgets__form-widget",tagName:"button",attributes(){return{disabled:this.getOption("is_modal")}},template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return`
      `+s((c(o,"far")||e&&c(e,"far")||i).call(a,"square-poll-horizontal",{name:"far",hash:{},data:l,loc:{start:{line:2,column:6},end:{line:2,column:38}}}))+`
      <span class="u-text--overflow">`+s((t=(t=c(o,"formName")||(e!=null?c(e,"formName"):e))!=null?t:i,typeof t=="function"?t.call(a,{name:"formName",hash:{},data:l,loc:{start:{line:3,column:37},end:{line:3,column:49}}}):t))+`</span>
      <span class="widgets__form-widget-expand-icon">`+s((c(o,"fas")||e&&c(e,"fas")||i).call(a,"up-right-and-down-left-from-center",{name:"fas",hash:{},data:l,loc:{start:{line:4,column:53},end:{line:4,column:97}}}))+"</span>"},useData:!0}),templateContext(){return{formName:this.getOption("form_name")}},initialize({is_modal:n,form_id:e}){n&&f.request("entities","fetch:forms:model",e).then(u=>{this.form=u,this.$el.prop("disabled",!1)})},triggers:{click:"click"},onClick(){if(this.getOption("is_modal")){f.request("modal","show:form",this.model,this.getOption("form_name"),this.form,this.getOption("modal_size"));return}f.trigger("event-router","form:patient",this.model.id,this.getOption("form_id"))}})},pl=h.extend({className(){return this.getOption("itemClassName")},template:d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<div class="widgets__heading">'+n.escapeExpression(n.lambda((t=e!=null?a(e,"definition"):e)!=null?a(t,"display_name"):t,e))+"</div>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return((t=a(o,"if").call(e??(n.nullContext||{}),(t=e!=null?a(e,"definition"):e)!=null?a(t,"display_name"):t,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:0},end:{line:1,column:103}}}))!=null?t:"")+'<div class="widgets__item" data-content-region></div>'},useData:!0}),regions:{content:"[data-content-region]"},onRender(){const n=this.getOption("widget"),e=this.getOption("patient");this.showChildView("content",ul(n,e,this.model))}}),dl=T.extend({childView:pl,childViewOptions(n){const e=ml[n.get("category")];return{itemClassName:this.getOption("itemClassName"),widget:e,model:n,patient:this.model}},viewFilter({model:n}){return n.get("category")},viewComparator:!1}),fl=dl.extend({itemClassName:"patient-sidebar__section"}),hl=h.extend({className:"sidebar sidebar--small flex-region",template:cl,regions:{widgets:{el:"[data-widgets-region]",regionClass:me}},triggers:{"click .js-close":"close","click .js-patient":"click:patient"},onAttach(){V(this.el)},onClickPatient(){f.trigger("event-router","patient:dashboard",this.model.id)}}),gl=C.extend({onBeforeStart({patient:n}){this.showView(new hl({model:n})),this.widgets=f.request("widgets","sidebarWidgets"),this.getRegion("widgets").startPreloader()},beforeStart({patient:n}){const e=f.request("entities","fetch:patients:model",n.id),o=f.request("entities","fetch:workspacePatients:byPatient",n.id),u=this.widgets.invoke("fetchValues",n.id);return[e,o,...u]},onStart({patient:n}){this.showChildView("widgets",new fl({model:n,collection:this.widgets}))},viewEvents:{close:"stop"},onStop(){f.request("sidebar","close")}}),Qe=w.patients.sidebar.filters.filtersSidebarViews,wl=k.extend({popWidth(){return this.getView().$el.outerWidth()},viewOptions:{className:"button-secondary w-100",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return n.escapeExpression((t=(t=a(o,"name")||(e!=null?a(e,"name"):e))!=null?t:n.hooks.helperMissing,typeof t=="function"?t.call(e??(n.nullContext||{}),{name:"name",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:10}}}):t))},useData:!0})},picklistOptions(){return{attr:"name",isSelectlist:!0,headingText:Qe.customFilterDropList.headingText,placeholderText:`${this.getOption("filterTitle")}...`}}}),vl=h.extend({className:"flex flex-align-center u-margin--b-8",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return`
    <h4 class="sidebar__label">`+n.escapeExpression((t=(t=a(o,"name")||(e!=null?a(e,"name"):e))!=null?t:n.hooks.helperMissing,typeof t=="function"?t.call(e??(n.nullContext||{}),{name:"name",hash:{},data:l,loc:{start:{line:2,column:31},end:{line:2,column:41}}}):t))+`</h4>
    <div class="flex-grow" data-filter-button></div>
  `},useData:!0}),regions:{filterButton:"[data-filter-button]"},initialize({state:n}){this.state=n,this.slug=this.model.get("slug"),this.listenTo(n,"change:customFilters",this.render)},onRender(){const n=this.getOptions(),e=n.get(this.state.getFilter(this.slug))||n.at(0),o=new wl({collection:n,state:{selected:e},filterTitle:this.model.get("name")});this.listenTo(o.getState(),"change:selected",(u,{id:l})=>{this.state.setFilter(this.slug,l)}),this.showChildView("filterButton",o)},getOptions(){const n=this.model.getOptions().clone();return n.unshift({id:null,name:Qe.customFilterView.defaultText}),n}}),bl=T.extend({className:"u-margin--t-32",childView:vl,childViewOptions(){return{state:this.getOption("state")}},viewComparator({model:n}){return String(n.get("name")).toLowerCase()}}),Xe=h.extend({className:"u-margin--b-8",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.hooks.helperMissing,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`
    <div class="flex flex-align-center">
      <div data-check-region class="u-margin--r-16"></div>
      <span class="action--`+i(n.lambda((t=e!=null?r(e,"options"):e)!=null?r(t,"color"):t,e))+`">
        <span class="u-margin--r-8">`+i((r(o,"fa")||e&&r(e,"fa")||c).call(s,(t=e!=null?r(e,"options"):e)!=null?r(t,"iconType"):t,(t=e!=null?r(e,"options"):e)!=null?r(t,"icon"):t,{name:"fa",hash:{},data:l,loc:{start:{line:5,column:36},end:{line:5,column:72}}}))+"</span><span>"+i((a=(a=r(o,"name")||(e!=null?r(e,"name"):e))!=null?a:c,typeof a=="function"?a.call(s,{name:"name",hash:{},data:l,loc:{start:{line:5,column:85},end:{line:5,column:95}}}):a))+`</span>
      </span>
    </div>
  `},useData:!0}),regions:{check:"[data-check-region]"},initialize({state:n,stateType:e}){this.state=n,this.stateType=e},onRender(){this.showCheck()},toggleSelected(n){this.$el.toggleClass("is-selected",n)},showCheck(){const n=this.model.id,e=this.state.get(this.stateType),o=e&&e.includes(n);this.toggleSelected(o);const u=new vt({state:{isSelected:o}});this.listenTo(u,{"change:isSelected":l=>{this.toggleSelected(l),this.triggerMethod("select",n,l)}}),this.showChildView("check",u)}}),kl=T.extend({modelEvents:{"change:states":"render"},childView:Xe,childViewOptions(){return{state:this.model,stateType:"states"}},childViewTriggers:{select:"select:state"},className:"sidebar__section",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<h3 class="sidebar__heading u-margin--b-8">'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"sidebar"))&&a(t,"filters"))&&a(t,"filtersSidebarViews"))&&a(t,"statesFiltersView"))&&a(t,"headingText"),e))+"</h3>"},useData:!0}),onSelectState(n,e){this.model.selectStatesFilter(n,e)}}),yl=T.extend({modelEvents:{"change:flowStates":"render"},childView:Xe,childViewOptions(){return{state:this.model,stateType:"flowStates"}},childViewTriggers:{select:"select:state"},className:"sidebar__section",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<h3 class="sidebar__heading u-margin--b-8">'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"patients"))&&a(t,"sidebar"))&&a(t,"filters"))&&a(t,"filtersSidebarViews"))&&a(t,"flowStatesFiltersView"))&&a(t,"headingText"),e))+"</h3>"},useData:!0}),onSelectState(n,e){this.model.selectFlowStatesFilter(n,e)}}),xl=h.extend({modelEvents:{"change:filtersCount":"render"},template:d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return"<span>("+n.escapeExpression((t=(t=a(o,"filtersCount")||(e!=null?a(e,"filtersCount"):e))!=null?t:n.hooks.helperMissing,typeof t=="function"?t.call(e??(n.nullContext||{}),{name:"filtersCount",hash:{},data:l,loc:{start:{line:6,column:37},end:{line:6,column:53}}}):t))+")</span>"},3:function(n,e,o,u,l){return"disabled"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lambda,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`
    <div class="flex flex-align-center">
      <div class="flex-grow">
        <h3 class="sidebar__heading">
          <span class="u-margin--r-8">`+s((r(o,"far")||e&&r(e,"far")||i).call(a,"sliders",{name:"far",hash:{},data:l,loc:{start:{line:5,column:38},end:{line:5,column:55}}}))+"</span>"+s(c((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"patients"))&&r(t,"sidebar"))&&r(t,"filters"))&&r(t,"filtersSidebarViews"))&&r(t,"headerView"))&&r(t,"allFiltersLabel"),e))+`
          `+((t=r(o,"if").call(a,e!=null?r(e,"filtersCount"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:6,column:10},end:{line:6,column:68}}}))!=null?t:"")+`
        </h3>
      </div>
      <div class="flex flex-align-center">
        <button class="filters-sidebar__clear-filters js-clear-filters" `+((t=r(o,"unless").call(a,e!=null?r(e,"filtersCount"):e,{name:"unless",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:10,column:72},end:{line:10,column:115}}}))!=null?t:"")+`>
          `+s(c((t=(t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"patients"))&&r(t,"sidebar"))&&r(t,"filters"))&&r(t,"filtersSidebarViews"))&&r(t,"headerView"))&&r(t,"clearFilters"),e))+`
        </button>
        <button class="filters-sidebar__close button--icon js-close">`+s((r(o,"fas")||e&&r(e,"fas")||i).call(a,"xmark",{name:"fas",hash:{},data:l,loc:{start:{line:13,column:69},end:{line:13,column:84}}}))+`</button>
      </div>
    </div>
  `},useData:!0})}),Tl=h.extend({className:"sidebar flex-region",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){return`
    <div class="flex-grow">
      <div data-header-region></div>
      <div data-custom-filters-region></div>
      <div data-states-filters-region></div>
      <div data-flow-states-filters-region></div>
    </div>
  `},useData:!0}),regions:{header:{el:"[data-header-region]",replaceElement:!0},customFilters:"[data-custom-filters-region]",statesFilters:"[data-states-filters-region]",flowStatesFilters:"[data-flow-states-filters-region]"},triggers:{"click .js-close":"close","click .js-clear-filters":"click:clearFilters"},onAttach(){V(this.el)}}),Cl=C.extend({onStart({filtersState:n}){this.filtersState=n,this.setView(new Tl),this.showHeaderView(),this.showCustomFiltersView(),this.showStatesFiltersView(),this.showFlowStatesFiltersView(),this.listenTo(n,"change:listType",this.showFlowStatesFiltersView),this.showView()},viewEvents:{close:"stop","click:clearFilters":"onClearFilters"},showHeaderView(){const n=new xl({model:this.filtersState});this.showChildView("header",n)},showCustomFiltersView(){const n=f.request("workspace","directories"),e=f.request("settings","get","custom_filters");if(e&&e.length){const u=n.filter(l=>e.includes(l.get("slug")));n.reset(u)}const o=new bl({collection:n,state:this.filtersState});this.showChildView("customFilters",o)},showFlowStatesFiltersView(){if(this.filtersState.isFlowType()){this.getRegion("flowStatesFilters").empty();return}const e=f.request("workspace","current").getStates(),o=new yl({collection:e,model:this.filtersState});this.showChildView("flowStatesFilters",o)},showStatesFiltersView(){const n=new kl({collection:this.filtersState.getAvailableStates(),model:this.filtersState});this.showChildView("statesFilters",n)},onClearFilters(){this.filtersState.setDefaultFilterStates()},onStop(){f.request("sidebar","close")}}),Pl=C.extend({channelName:"sidebar",radioRequests:{close:"closeSidebar",start:"startSidebarApp"},childApps:{action:bn,flow:Fn,program:zn,programFlow:ha,programAction:$a,clinician:rl,patient:gl,filters:Cl},startSidebarApp(n,e){if(this.isStarting)return;this.isStarting=!0,this.stopSidebarApp();const o=D({region:this.getRegion()},e);return this.currentApp=this.startChildApp(n,o),this.isStarting=!1,this.getChannel().trigger("show",this.currentApp),this.currentApp},closeSidebar(){const n=this.currentApp;this.stopSidebarApp(),this.getRegion().empty(),this.getChannel().trigger("close",n)},stopSidebarApp(){this.currentApp&&(this.currentApp.stop(),delete this.currentApp)}}),_l=d.template({1:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`      <div class="u-margin--t-8 qa-search-option">
        <span class="patient-search__search-by-label">`+i(a(e!=null?s(e,"label"):e,e))+`</span>
        `+i(a((t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"globals"))&&s(t,"search"))&&s(t,"patientSearchViews"))&&s(t,"emptyView"))&&s(t,"exampleId"),e))+" "+i(a(e!=null?s(e,"example"):e,e))+`
      </div>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=e??(n.nullContext||{}),c=n.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return`
  <div class="patient-search__tip">`+i(a((t=(t=(t=(t=(t=l&&c(l,"intl"))&&c(t,"globals"))&&c(t,"search"))&&c(t,"patientSearchViews"))&&c(t,"emptyView"))&&c(t,"searchTip"),e))+`</div>
  <div class="patient-search__search-by">
    <div class="patient-search__search-by-title">`+i(a((t=(t=(t=(t=(t=l&&c(l,"intl"))&&c(t,"globals"))&&c(t,"search"))&&c(t,"patientSearchViews"))&&c(t,"emptyView"))&&c(t,"searchBy"),e))+`</div>
    <div class="u-margin--t-8 qa-search-option">
      <span class="patient-search__search-by-label">`+i(a((t=(t=(t=(t=(t=l&&c(l,"intl"))&&c(t,"globals"))&&c(t,"search"))&&c(t,"patientSearchViews"))&&c(t,"emptyView"))&&c(t,"exampleDobLabel"),e))+`</span>
      `+i(a((t=(t=(t=(t=(t=l&&c(l,"intl"))&&c(t,"globals"))&&c(t,"search"))&&c(t,"patientSearchViews"))&&c(t,"emptyView"))&&c(t,"exampleDob"),e))+`
    </div>
`+((t=c(o,"each").call(s,(t=e!=null?c(e,"settings"):e)!=null?c(t,"identifiers"):t,{name:"each",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:9,column:4},end:{line:14,column:13}}}))!=null?t:"")+`  </div>
  <div class="patient-search__shortcut">`+i((c(o,"fas")||e&&c(e,"fas")||n.hooks.helperMissing).call(s,"keyboard",{name:"fas",hash:{},data:l,loc:{start:{line:16,column:40},end:{line:16,column:58}}}))+'<strong class="u-margin--l-8">'+i(a((t=(t=(t=(t=(t=l&&c(l,"intl"))&&c(t,"globals"))&&c(t,"search"))&&c(t,"patientSearchViews"))&&c(t,"emptyView"))&&c(t,"shortcut"),e))+`</strong></div>
`},useData:!0}),Ol=h.extend({collectionEvents:{search:"render"},tagName:"li",className:"patient-search__no-results",initialize({state:n}){this.state=n,this.listenTo(this.state,"change:search",this.render)},templateContext(){const n=f.request("settings","get","patient_search"),e=this.state.get("canPatientCreate");return{settings:n,canPatientCreate:e}},getTemplate(){const n=this.state.get("search");return!n||n.length<3?_l:this.collection.isSearching?d.template({compiler:[8,">= 4.3.0"],main:function(e,o,u,l,t){var a,i=e.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return e.escapeExpression(e.lambda((a=(a=(a=(a=(a=t&&i(t,"intl"))&&i(a,"globals"))&&i(a,"search"))&&i(a,"patientSearchViews"))&&i(a,"emptyView"))&&i(a,"searching"),o))},useData:!0}):d.template({1:function(e,o,u,l,t){var a,i=e.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return'        <a class="u-margin--l-8 u-text-link js-add">'+e.escapeExpression(e.lambda((a=(a=(a=(a=(a=t&&i(t,"intl"))&&i(a,"globals"))&&i(a,"search"))&&i(a,"patientSearchViews"))&&i(a,"emptyView"))&&i(a,"addPatient"),o))+`</a>
`},compiler:[8,">= 4.3.0"],main:function(e,o,u,l,t){var a,i=e.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`
      `+e.escapeExpression(e.lambda((a=(a=(a=(a=(a=t&&i(t,"intl"))&&i(a,"globals"))&&i(a,"search"))&&i(a,"patientSearchViews"))&&i(a,"emptyView"))&&i(a,"noResults"),o))+`
`+((a=i(u,"if").call(o??(e.nullContext||{}),o!=null?i(o,"canPatientCreate"):o,{name:"if",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:3,column:6},end:{line:5,column:13}}}))!=null?a:"")+"    "},useData:!0})}}),Sl=h.extend({tagName:"li",className:"js-picklist-item patient-search__picklist-item",initialize({state:n}){this.state=n,this.listenTo(this.state,"change:search",this.render)},triggers:{click:"select"},onSelect(){this.state.set({selected:this.model})},template:d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return`        <div class="patient-search__picklist-item-identifier u-text--overflow">
          `+((t=a(o,"if").call(e??(n.nullContext||{}),(t=(t=e!=null?a(e,"identifiers"):e)!=null?a(t,"0"):t)!=null?a(t,"value"):t,{name:"if",hash:{},fn:n.program(2,l,0),inverse:n.program(4,l,0),data:l,loc:{start:{line:11,column:10},end:{line:11,column:99}}}))!=null?t:"")+`
        </div>
`},2:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return n.escapeExpression((a(o,"matchText")||e&&a(e,"matchText")||n.hooks.helperMissing).call(e??(n.nullContext||{}),(t=(t=e!=null?a(e,"identifiers"):e)!=null?a(t,"0"):t)!=null?a(t,"value"):t,e!=null?a(e,"search"):e,{name:"matchText",hash:{},data:l,loc:{start:{line:11,column:37},end:{line:11,column:77}}}))},4:function(n,e,o,u,l){return"&ndash;"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`
    <div class="patient-search__picklist-item-name u-text--overflow">
      <span>`+c((r(o,"matchText")||e&&r(e,"matchText")||s).call(i,e!=null?r(e,"name"):e,e!=null?r(e,"search"):e,{name:"matchText",hash:{},data:l,loc:{start:{line:3,column:12},end:{line:3,column:37}}}))+c((a=(a=r(o,"remove_whitespace")||(e!=null?r(e,"remove_whitespace"):e))!=null?a:s,typeof a=="function"?a.call(i,{name:"remove_whitespace",hash:{},data:l,loc:{start:{line:3,column:37},end:{line:3,column:62}}}):a))+`</span>
    </div>
    <div class="patient-search__picklist-item-meta">
      <div class="patient-search__picklist-item-dob u-text--overflow">
        `+c((r(o,"formatDateTime")||e&&r(e,"formatDateTime")||s).call(i,e!=null?r(e,"birth_date"):e,"MM/DD/YYYY",{name:"formatDateTime",hash:{},data:l,loc:{start:{line:7,column:8},end:{line:7,column:50}}}))+`
      </div>
`+((t=r(o,"if").call(i,e!=null?r(e,"hasIdentifiers"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:9,column:6},end:{line:13,column:13}}}))!=null?t:"")+`    </div>
  `},useData:!0}),templateContext(){return{name:`${this.model.get("first_name")} ${this.model.get("last_name")}`,search:this.state.get("search"),hasIdentifiers:this.collection.hasIdentifiers()}}}),Dl=T.extend({tagName:"ul",serializeCollection:ce,childView:Sl,childViewOptions(){return{collection:this.collection,state:this.model}},onRenderChildren(){this.$(".js-picklist-item").removeClass("is-highlighted"),this.model.get("search")&&this.$(".js-picklist-item").first().addClass("is-highlighted")},emptyView:Ol}),Ml=h.extend({className:"patient-search__picklist-header",template:d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return`        <div class="patient-search__picklist-header-identifier">
        `+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"globals"))&&a(t,"search"))&&a(t,"patientSearchViews"))&&a(t,"headerView"))&&a(t,"id"),e))+`
        </div>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return`
    <div class="patient-search__picklist-header-name">
      `+i(a((t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"globals"))&&s(t,"search"))&&s(t,"patientSearchViews"))&&s(t,"headerView"))&&s(t,"patient"),e))+`
    </div>
    <div class="patient-search__picklist-header-meta">
      <div class="patient-search__picklist-header-dob">
        `+i(a((t=(t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"globals"))&&s(t,"search"))&&s(t,"patientSearchViews"))&&s(t,"headerView"))&&s(t,"dob"),e))+`
      </div>
`+((t=s(o,"if").call(e??(n.nullContext||{}),e!=null?s(e,"hasIdentifiers"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:9,column:6},end:{line:13,column:13}}}))!=null?t:"")+`    </div>
  `},useData:!0}),templateContext(){return{hasIdentifiers:this.collection.hasIdentifiers()}}}),Vl=h.extend({className:"patient-search__picklist",collectionEvents:{search:"showHeader"},modelEvents:{"change:search":"showHeader"},behaviors:[{behaviorClass:Re,selector:".js-input"},O,pt],triggers:{"focus @ui.input":"focus","click @ui.add":"add"},ui:{input:".js-input",add:".js-add"},regionClass:ot.extend({replaceElement:!0}),regions:{header:"[data-header-region]",list:"[data-list-region]"},template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`
    <div class="modal__header patient-search__header">
      <span class="modal__header-icon">`+c((r(o,"far")||e&&r(e,"far")||s).call(i,"magnifying-glass",{name:"far",hash:{},data:l,loc:{start:{line:3,column:39},end:{line:3,column:65}}}))+`</span>
      <input type="text" class="js-input patient-search__input" placeholder="`+c(n.lambda((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"globals"))&&r(t,"search"))&&r(t,"patientSearchViews"))&&r(t,"dialogView"))&&r(t,"placeholderText"),e))+'" value="'+c((a=(a=r(o,"search")||(e!=null?r(e,"search"):e))!=null?a:s,typeof a=="function"?a.call(i,{name:"search",hash:{},data:l,loc:{start:{line:4,column:158},end:{line:4,column:170}}}):a))+`">
    </div>
    <div class="flex-region picklist__scroll js-picklist-scroll">
      <div data-header-region></div>
      <div data-list-region></div>
    </div>
  `},useData:!0}),onRender(){this.showHeader(),this.showChildView("list",new Dl({collection:this.collection,model:this.model}))},showHeader(){if(!this.collection.length){this.getRegion("header").empty();return}this.showChildView("header",new Ml({collection:this.collection}))}}),El=J.extend({initialize:function(n){this.mergeOptions(n,["collection"])},viewOptions(){return{model:this.getState(),collection:this.collection}},ViewClass:Vl,viewEvents:{"watch:change":"onWatchChange"},viewTriggers:{add:"click:addPatient",close:"close"},onWatchChange(n){this.setState("search",n)}}),jl=h.extend({className:"modal",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return`
    <a href="#" class="button--icon patient-search__close js-close">`+n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"xmark",{name:"far",hash:{},data:l,loc:{start:{line:2,column:68},end:{line:2,column:83}}}))+`</a>
    <div data-picklist-region></div>
  `},useData:!0}),triggers:{"click .js-close":"close"},regions:{picklist:{el:"[data-picklist-region]",replaceElement:!0}},serializeCollection:ce,onRender(){const n=this.collection,e=this.getOption("prefillText"),o=new El({collection:n,state:{search:e,canPatientCreate:this.getOption("canPatientCreate")}});this.listenTo(o.getState(),{"change:search":this.onChangeSearch,"change:selected":this.onChangeSelected}),this.showChildView("picklist",o),e&&this.collection.search(e),this.listenTo(o,{"click:addPatient":()=>{this.triggerMethod("click:addPatient")},close:this.destroy})},onChangeSearch(n,e){this.collection.search(e)},onChangeSelected(n,e){this.triggerMethod("search:select",e)},onClose(){this.destroy()}}),Al=C.extend({onStart({prefillText:n,canPatientCreate:e}){const o=new jl({collection:f.request("entities","searchPatients:collection"),prefillText:n,canPatientCreate:e});this.listenTo(o,{"search:select"(u){f.trigger("event-router","patient:dashboard",u.get("_patient")),o.destroy()},"click:addPatient"(){this.triggerMethod("click:addPatient")},destroy(){this.stop()}}),f.request("modal","show:custom",o)}}),P=w.globals.appNav.appNavViews,Fl=k.extend({popWidth:"248px",position(){const{outerHeight:n}=this.getView().getBounds();return{top:n,left:16}},viewOptions:{tagName:"div",className(){return this.getOption("state").isMinimized?"app-nav__header minimized":"app-nav__header"},template:d.template({1:function(n,e,o,u,l){return`        <img class="app-nav__header-logo" src="/rwell-logo.svg" />
`},3:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s="function",c=n.escapeExpression,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return`        <div class="u-text--overflow">
          <h2 class="app-nav__header-title u-text--overflow">`+c((t=(t=r(o,"workspaceName")||(e!=null?r(e,"workspaceName"):e))!=null?t:i,typeof t===s?t.call(a,{name:"workspaceName",hash:{},data:l,loc:{start:{line:6,column:61},end:{line:6,column:80}}}):t))+`</h2>
          <span class="app-nav__header-arrow">`+c((r(o,"far")||e&&r(e,"far")||i).call(a,"angle-down",{name:"far",hash:{},data:l,loc:{start:{line:7,column:46},end:{line:7,column:66}}}))+`</span>
        </div>
        <div class="u-text--overflow">`+c((t=(t=r(o,"userName")||(e!=null?r(e,"userName"):e))!=null?t:i,typeof t===s?t.call(a,{name:"userName",hash:{},data:l,loc:{start:{line:9,column:38},end:{line:9,column:52}}}):t))+`</div>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return`
`+((t=a(o,"if").call(e??(n.nullContext||{}),e!=null?a(e,"isMinimized"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.program(3,l,0),data:l,loc:{start:{line:2,column:6},end:{line:10,column:13}}}))!=null?t:"")+"    "},useData:!0}),templateContext(){const n=f.request("bootstrap","currentUser"),e=f.request("workspace","current");return{userName:n.get("name"),workspaceName:e.get("name"),isMinimized:this.getOption("state").isMinimized}}},picklistOptions(){return{className:"picklist app-nav__picklist",template:d.template({1:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return'            <a class="picklist__item app-nav__picklist-item js-picklist-item" href="'+c((a=(a=r(o,"infoText")||(e!=null?r(e,"infoText"):e))!=null?a:s,typeof a=="function"?a.call(i,{name:"infoText",hash:{},data:l,loc:{start:{line:9,column:84},end:{line:9,column:98}}}):a))+`" target="_blank">
              `+c((r(o,"far")||e&&r(e,"far")||s).call(i,"life-ring",{name:"far",hash:{},data:l,loc:{start:{line:10,column:14},end:{line:10,column:33}}}))+"<span>"+c(n.lambda((t=(t=(t=(t=(t=l&&r(l,"intl"))&&r(t,"globals"))&&r(t,"appNav"))&&r(t,"appNavViews"))&&r(t,"mainNavDroplist"))&&r(t,"help"),e))+`</span>
            </a>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=n.lambda,s=n.escapeExpression,c=e??(n.nullContext||{}),r=n.hooks.helperMissing,m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return`
        <div class="app-nav__picklist-heading">`+s(i((t=(t=(t=(t=(t=l&&m(l,"intl"))&&m(t,"globals"))&&m(t,"appNav"))&&m(t,"appNavViews"))&&m(t,"mainNavDroplist"))&&m(t,"organizationHeading"),e))+`</div>
        <div class="app-nav__picklist-workspace-name js-picklist-item">`+s((a=(a=m(o,"headingText")||(e!=null?m(e,"headingText"):e))!=null?a:r,typeof a=="function"?a.call(c,{name:"headingText",hash:{},data:l,loc:{start:{line:3,column:71},end:{line:3,column:88}}}):a))+`</div>
        <div class="flex-region picklist__scroll">
          <div class="app-nav__picklist-heading">`+s(i((t=(t=(t=(t=(t=l&&m(l,"intl"))&&m(t,"globals"))&&m(t,"appNav"))&&m(t,"appNavViews"))&&m(t,"mainNavDroplist"))&&m(t,"workspacesHeading"),e))+`</div>
          <ul class="js-picklist-scroll"></ul>
          <div class="app-nav__picklist-bottom">
`+((t=m(o,"if").call(c,e!=null?m(e,"infoText"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:8,column:12},end:{line:12,column:19}}}))!=null?t:"")+`            <a class="picklist__item app-nav__picklist-item js-picklist-item" href="/logout">
              `+s((m(o,"fas")||e&&m(e,"fas")||r).call(c,"right-from-bracket",{name:"fas",hash:{},data:l,loc:{start:{line:14,column:14},end:{line:14,column:42}}}))+"<span>"+s(i((t=(t=(t=(t=(t=l&&m(l,"intl"))&&m(t,"globals"))&&m(t,"appNav"))&&m(t,"appNavViews"))&&m(t,"mainNavDroplist"))&&m(t,"signOut"),e))+`</span>
            </a>
          </div>
        </div>
      `},useData:!0}),headingText(){return f.request("bootstrap","organization").get("name")},infoText(){return f.request("settings","get","help_url")??"https://help.roundingwell.com/"},itemClassName:"app-nav__picklist-item"}},picklistEvents:{"picklist:item:select":"onSelect"},onSelect({model:n}){const e=f.request("workspace","current");n.id!==e.id&&n.get("onSelect")()}}),Il=k.extend({popWidth:"248px",position(){const n=this.getOption("state").get("isMinimized");return{top:window.innerHeight-16,left:n?52:164}},viewOptions:{tagName:"div",className:"flex flex-align-center app-nav__bottom-button",template:d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<span class="u-text--overflow">'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"globals"))&&a(t,"appNav"))&&a(t,"appNavViews"))&&a(t,"adminToolsDroplist"))&&a(t,"adminTools"),e))+"</span>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return n.escapeExpression((i(o,"fas")||e&&i(e,"fas")||n.hooks.helperMissing).call(a,"ellipsis",{name:"fas",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:18}}}))+((t=i(o,"unless").call(a,e!=null?i(e,"isMinimized"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:18},end:{line:1,column:158}}}))!=null?t:"")},useData:!0}),templateContext(){return{isMinimized:this.getOption("state").get("isMinimized")}}},picklistOptions(){return{className:"picklist app-nav__picklist",itemClassName:"flex flex-align-center app-nav__picklist-item",headingText:w.globals.appNav.appNavViews.adminToolsDroplist.adminTools,lists:[{collection:this.collection,itemTemplate:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return`
          `+s((c(o,"fa")||e&&c(e,"fa")||i).call(a,(t=e!=null?c(e,"icon"):e)!=null?c(t,"type"):t,(t=e!=null?c(e,"icon"):e)!=null?c(t,"icon"):t,{name:"fa",hash:{classes:(t=e!=null?c(e,"icon"):e)!=null?c(t,"classes"):t},data:l,loc:{start:{line:2,column:10},end:{line:2,column:58}}}))+"<span>"+s((c(o,"formatMessage")||e&&c(e,"formatMessage")||i).call(a,e!=null?c(e,"text"):e,{name:"formatMessage",hash:{},data:l,loc:{start:{line:3,column:16},end:{line:3,column:38}}}))+`</span>
        `},useData:!0})}]}},picklistEvents:{"picklist:item:select":"onSelect"},onSelect({model:n}){n.get("onSelect")()}}),Ll=h.extend({className:"app-nav__bottom",regions:{dashboards:{el:"[data-nav-dashboards-region]",replaceElement:!0},adminTools:{el:"[data-nav-admin-tools-region]",replaceElement:!0}},template:d.template({1:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`      <div class="flex flex-align-center app-nav__bottom-button js-add-patient">
        `+n.escapeExpression((i(o,"fas")||e&&i(e,"fas")||n.hooks.helperMissing).call(a,"circle-plus",{name:"fas",hash:{},data:l,loc:{start:{line:5,column:8},end:{line:5,column:29}}}))+((t=i(o,"unless").call(a,e!=null?i(e,"isMinimized"):e,{name:"unless",hash:{},fn:n.program(2,l,0),inverse:n.noop,data:l,loc:{start:{line:5,column:29},end:{line:5,column:161}}}))!=null?t:"")+`
      </div>
`},2:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<span class="u-text--overflow">'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"globals"))&&a(t,"appNav"))&&a(t,"appNavViews"))&&a(t,"appNavView"))&&a(t,"addPatient"),e))+"</span>"},4:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return"        "+n.escapeExpression((t(o,"fas")||e&&t(e,"fas")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"square-caret-right",{name:"fas",hash:{},data:l,loc:{start:{line:11,column:8},end:{line:11,column:36}}}))+`
`},6:function(n,e,o,u,l){var t,a=n.escapeExpression,i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return"        "+a((i(o,"fas")||e&&i(e,"fas")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"square-caret-left",{name:"fas",hash:{},data:l,loc:{start:{line:13,column:8},end:{line:13,column:35}}}))+'<span class="u-text--overflow">'+a(n.lambda((t=(t=(t=(t=(t=l&&i(l,"intl"))&&i(t,"globals"))&&i(t,"appNav"))&&i(t,"appNavViews"))&&i(t,"appNavView"))&&i(t,"minimizeMenu"),e))+`</span>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`
    <div data-nav-dashboards-region></div>
`+((t=i(o,"if").call(a,e!=null?i(e,"canPatientCreate"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:3,column:4},end:{line:7,column:11}}}))!=null?t:"")+`    <div data-nav-admin-tools-region></div>
    <div class="flex flex-align-center app-nav__bottom-button js-minimize-menu">
`+((t=i(o,"if").call(a,e!=null?i(e,"isMinimized"):e,{name:"if",hash:{},fn:n.program(4,l,0),inverse:n.program(6,l,0),data:l,loc:{start:{line:10,column:6},end:{line:14,column:13}}}))!=null?t:"")+`    </div>
  `},useData:!0}),templateContext(){return{canPatientCreate:this.getOption("canPatientCreate")}}}),Nl=h.extend({className(){return this.model.get("isMinimized")?"app-nav minimized":"app-nav"},regions:{navMain:{el:"[data-nav-main-region]",replaceElement:!0},navContent:"[data-nav-content-region]",bottomNavContent:{el:"[data-bottom-nav-content-region]",replaceElement:!0}},triggers:{"click .js-add-patient":"click:addPatient","click .js-minimize-menu":"click:minimizeMenu"},template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){return`
    <div data-nav-main-region></div>
    <div data-nav-content-region></div>
    <div data-bottom-nav-content-region></div>
  `},useData:!0}),modelEvents:{"change:isMinimized":"onToggleMinimized"},onToggleMinimized(){this.$el.toggleClass("minimized",this.model.get("isMinimized"))},removeSelected(){this.$(".is-selected").removeClass("is-selected")}}),Ze=h.extend({tagName:"a",className:"flex app-nav__link",template:d.template({1:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return"        "+n.escapeExpression((t(o,"fa")||e&&t(e,"fa")||n.hooks.helperMissing).call(e??(n.nullContext||{}),e!=null?t(e,"type"):e,e!=null?t(e,"icon"):e,{name:"fa",hash:{classes:e!=null?t(e,"classes"):e},data:l,loc:{start:{line:4,column:8},end:{line:4,column:56}}}))},3:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return'<div class="u-margin--l-16 u-text--overflow">'+n.escapeExpression((t(o,"formatMessage")||e&&t(e,"formatMessage")||n.hooks.helperMissing).call(e??(n.nullContext||{}),e!=null?t(e,"text"):e,{name:"formatMessage",hash:{},data:l,loc:{start:{line:7,column:72},end:{line:7,column:94}}}))+"</div>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`
    <div class="flex flex-align-center app-nav__link-icons">
`+((t=i(o,"each").call(a,e!=null?i(e,"icons"):e,{name:"each",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:3,column:6},end:{line:5,column:15}}}))!=null?t:"")+`    </div>
    `+((t=i(o,"unless").call(a,e!=null?i(e,"isMinimized"):e,{name:"unless",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:7,column:4},end:{line:7,column:111}}}))!=null?t:"")+`
  `},useData:!0}),templateContext(){return{isMinimized:this.state.get("isMinimized")}},triggers:{click:"click"},modelEvents:{selected:"onSelected"},initialize({state:n}){this.state=n},onClick(){f.trigger("event-router",this.model.get("event"),...this.model.get("eventArgs"))},onSelected(){this.$el.addClass("is-selected")}}),Rl=T.extend({childView:Ze,childViewOptions(){return{state:this.model}}}),Hl=h.extend({template:d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'<span class="u-text--overflow">'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"globals"))&&a(t,"appNav"))&&a(t,"appNavViews"))&&a(t,"patientsAppNav"))&&a(t,"searchTitle"),e))+"</span>"},3:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'      <h3 class="app-nav__title">'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"globals"))&&a(t,"appNav"))&&a(t,"appNavViews"))&&a(t,"patientsAppNav"))&&a(t,"worklistsTitle"),e))+`</h3>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.lookupProperty||function(s,c){if(Object.prototype.hasOwnProperty.call(s,c))return s[c]};return`
    <h3 class="flex app-nav__search js-search">
      `+n.escapeExpression((i(o,"fas")||e&&i(e,"fas")||n.hooks.helperMissing).call(a,"magnifying-glass",{name:"fas",hash:{},data:l,loc:{start:{line:3,column:6},end:{line:3,column:32}}}))+((t=i(o,"unless").call(a,e!=null?i(e,"isMinimized"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:3,column:32},end:{line:3,column:169}}}))!=null?t:"")+`
    </h3>
`+((t=i(o,"unless").call(a,e!=null?i(e,"isMinimized"):e,{name:"unless",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:5,column:4},end:{line:7,column:15}}}))!=null?t:"")+`    <div data-worklists-region></div>
  `},useData:!0}),regions:{worklists:"[data-worklists-region]"},triggers:{"click @ui.search":"search"},ui:{search:".js-search"},onSearchActive(n){this.isDestroyed()||this.ui.search.toggleClass("is-active",n)}}),Gl=d.template({1:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c=n.escapeExpression,r="function",m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return'<button class="button-secondary  date-select__date'+((t=m(o,"unless").call(i,e!=null?m(e,"isDisabled"):e,{name:"unless",hash:{},fn:n.program(2,l,0),inverse:n.noop,data:l,loc:{start:{line:3,column:50},end:{line:3,column:97}}}))!=null?t:"")+((t=m(o,"if").call(i,e!=null?m(e,"hasError"):e,{name:"if",hash:{},fn:n.program(4,l,0),inverse:n.noop,data:l,loc:{start:{line:3,column:97},end:{line:3,column:130}}}))!=null?t:"")+'" tabindex="-1" '+((t=m(o,"if").call(i,e!=null?m(e,"isDisabled"):e,{name:"if",hash:{},fn:n.program(6,l,0),inverse:n.noop,data:l,loc:{start:{line:3,column:146},end:{line:3,column:179}}}))!=null?t:"")+">"+c((m(o,"far")||e&&m(e,"far")||s).call(i,"calendar-days",{name:"far",hash:{},data:l,loc:{start:{line:3,column:180},end:{line:3,column:203}}}))+"<span>"+c((a=(a=m(o,"date")||(e!=null?m(e,"date"):e))!=null?a:s,typeof a===r?a.call(i,{name:"date",hash:{},data:l,loc:{start:{line:3,column:209},end:{line:3,column:217}}}):a))+"</span></button>"+c((a=(a=m(o,"remove_whitespace")||(e!=null?m(e,"remove_whitespace"):e))!=null?a:s,typeof a===r?a.call(i,{name:"remove_whitespace",hash:{},data:l,loc:{start:{line:3,column:233},end:{line:3,column:258}}}):a))+((t=m(o,"unless").call(i,e!=null?m(e,"isDisabled"):e,{name:"unless",hash:{},fn:n.program(8,l,0),inverse:n.noop,data:l,loc:{start:{line:4,column:0},end:{line:4,column:130}}}))!=null?t:"")+`
`},2:function(n,e,o,u,l){return" button__group"},4:function(n,e,o,u,l){return" has-error"},6:function(n,e,o,u,l){return"disabled"},8:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return'<button class="button-secondary--compact button__group js-cancel">'+n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"circle-xmark",{name:"far",hash:{},data:l,loc:{start:{line:4,column:88},end:{line:4,column:110}}}))+"</button>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return`<div data-select-region></div>
`+((t=a(o,"if").call(e??(n.nullContext||{}),e!=null?a(e,"date"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:0},end:{line:5,column:7}}}))!=null?t:"")},useData:!0}),$l=h.extend({template:Gl,regions:{selectRegion:{el:"[data-select-region]",replaceElement:!0}},ui:{cancel:".js-cancel"},triggers:{"click @ui.cancel":"click:cancel"},formatDate(){const n=this.getOption("state");return n.selectedDate?b(n.selectedDate).format("MMM DD, YYYY"):Ie(n.month)?n.year:b().month(n.month).year(n.year).format("MMM YYYY")},templateContext(){const n=this.getOption("state");return{date:this.formatDate(),hasError:n.hasError,isDisabled:n.isDisabled}}}),se=w.components.dateSelect,ql=new v.Collection(Ae(12,n=>{const e=b().month(n);return{value:n,text:`${e.format("MMMM")} (${n+1})`}})),De=b().year(),Wl=K(De,De-120,-1),Ul=H(Wl,function(n){return{value:n,text:String(n)}}),ie=k.extend({picklistOptions:{isSelectlist:!0},template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return n.escapeExpression((t=(t=a(o,"buttonText")||(e!=null?a(e,"buttonText"):e))!=null?t:n.hooks.helperMissing,typeof t=="function"?t.call(e??(n.nullContext||{}),{name:"buttonText",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:16}}}):t))},useData:!0}),viewOptions(){const n=this.getOption("buttonText");return{className:"button-secondary date-select__button",template:this.getOption("template"),templateContext:{buttonText:n}}}}),zl=v.Model.extend({defaults:{year:null,month:null,day:null,selectedDate:null,hasError:!1,isDisabled:!1},reset(){this.set(this.defaults)}}),Bl=J.extend({ViewClass:$l,StateModel:zl,stateEvents:{change:"onChangeState","change:selectedDate":"onChangeSelectedDate","change:hasError":"show"},viewTriggers:{"click:cancel":"click:cancel"},onChangeState(){if(this.getState("day")&&!this.getState("selectedDate")){const n=b().year(this.getState("year")).month(this.getState("month")).date(this.getState("day"));this.setState({selectedDate:n});return}this.show()},onChangeSelectedDate(n,e){this.triggerMethod("change:date",n,e)},onClickCancel(){this.getState().reset()},onShow(n,e){if(!this.getState("selectedDate")){if(!this.getState("year")){this.showSelectList(this.getYearSelect(),{field:"year",view:e});return}if(Ie(this.getState("month"))){this.showSelectList(this.getMonthSelect(),{field:"month",view:e});return}this.showSelectList(this.getDaySelect(),{field:"day",view:e})}},getYearSelect(){return new ie({collection:new v.Collection(Ul),buttonText:se.yearPlaceholderText,template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=e??(n.nullContext||{}),i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(r,m){if(Object.prototype.hasOwnProperty.call(r,m))return r[m]};return s((c(o,"far")||e&&c(e,"far")||i).call(a,"calendar-days",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:23}}}))+"<span>"+s((t=(t=c(o,"buttonText")||(e!=null?c(e,"buttonText"):e))!=null?t:i,typeof t=="function"?t.call(a,{name:"buttonText",hash:{},data:l,loc:{start:{line:1,column:29},end:{line:1,column:45}}}):t))+"</span>"},useData:!0})})},getMonthSelect(){return new ie({collection:ql,buttonText:se.monthPlaceholderText,state:{isActive:!0}})},getDaySelect(){return new ie({collection:this.getDayOpts(),buttonText:se.dayPlaceholderText,state:{isActive:!0}})},showSelectList(n,{field:e,view:o}){this.listenTo(n,"change:selected",u=>{this.setState(e,u.get("value"))}),o.showChildView("selectRegion",n)},getDayOpts(){const e=b().year(this.getState("year")).month(this.getState("month")).daysInMonth(),o=K(1,e+1),u=H(o,function(l){return{value:l,text:String(l)}});return new v.Collection(u)}}),Yl=d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return'  <div class="u-margin--b-8 flex"><div class="modal__form-label">'+n.escapeExpression(n.lambda((t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"globals"))&&a(t,"patientModal"))&&a(t,"patientModalTemplate"))&&a(t,"workspaces"),e))+`</div><div class="modal__form-component" data-workspaces-region></div></div>
`},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a=n.lambda,i=n.escapeExpression,s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return'<div class="u-margin--b-8 flex"><div class="modal__form-label">'+i(a((t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"globals"))&&s(t,"patientModal"))&&s(t,"patientModalTemplate"))&&s(t,"firstName"),e))+`</div><div class="flex-grow" data-first-name-region></div></div>
<div class="u-margin--b-8 flex"><div class="modal__form-label">`+i(a((t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"globals"))&&s(t,"patientModal"))&&s(t,"patientModalTemplate"))&&s(t,"lastName"),e))+`</div><div class="flex-grow" data-last-name-region></div></div>
<div class="u-margin--b-8 flex"><div class="modal__form-label">`+i(a((t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"globals"))&&s(t,"patientModal"))&&s(t,"patientModalTemplate"))&&s(t,"dateOfBirth"),e))+`</div><div data-dob-region></div></div>
<div class="u-margin--b-8 flex"><div class="modal__form-label">`+i(a((t=(t=(t=(t=l&&s(l,"intl"))&&s(t,"globals"))&&s(t,"patientModal"))&&s(t,"patientModalTemplate"))&&s(t,"sex"),e))+`</div><div data-sex-region></div></div>
`+((t=s(o,"unless").call(e??(n.nullContext||{}),e!=null?s(e,"isNew"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:5,column:0},end:{line:7,column:11}}}))!=null?t:"")},useData:!0}),_=w.globals.patientModal.patientModalViews,Me=h.extend({behaviors(){if(this.getOption("shouldFocus"))return[{behaviorClass:Re,selector:".js-input"}]},className:"pos--relative",template:d.template({1:function(n,e,o,u,l){return"has-error"},3:function(n,e,o,u,l){return"disabled"},5:function(n,e,o,u,l){var t=n.lookupProperty||function(a,i){if(Object.prototype.hasOwnProperty.call(a,i))return a[i]};return'<span class="patient-modal__locked-icon">'+n.escapeExpression((t(o,"far")||e&&t(e,"far")||n.hooks.helperMissing).call(e??(n.nullContext||{}),"lock",{name:"far",hash:{},data:l,loc:{start:{line:3,column:64},end:{line:3,column:78}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c="function",r=n.escapeExpression,m=n.lookupProperty||function(p,g){if(Object.prototype.hasOwnProperty.call(p,g))return p[g]};return`
    <input class="input-primary w-100 js-input `+((t=m(o,"if").call(i,e!=null?m(e,"hasError"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:47},end:{line:2,column:79}}}))!=null?t:"")+'" placeholder="'+r((a=(a=m(o,"placeholder")||(e!=null?m(e,"placeholder"):e))!=null?a:s,typeof a===c?a.call(i,{name:"placeholder",hash:{},data:l,loc:{start:{line:2,column:94},end:{line:2,column:111}}}):a))+'" value="'+r((a=(a=m(o,"value")||(e!=null?m(e,"value"):e))!=null?a:s,typeof a===c?a.call(i,{name:"value",hash:{},data:l,loc:{start:{line:2,column:120},end:{line:2,column:131}}}):a))+'" '+((t=m(o,"unless").call(i,e!=null?m(e,"canEdit"):e,{name:"unless",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l,loc:{start:{line:2,column:133},end:{line:2,column:171}}}))!=null?t:"")+` />
    `+((t=m(o,"unless").call(i,e!=null?m(e,"canEdit"):e,{name:"unless",hash:{},fn:n.program(5,l,0),inverse:n.noop,data:l,loc:{start:{line:3,column:4},end:{line:3,column:96}}}))!=null?t:"")+`
  `},useData:!0}),templateContext(){const n=this.getOption("state").get("errors");return{hasError:n&&n[this.getOption("errorField")],placeholder:this.getOption("placeholder"),value:this.model.get(this.getOption("attr")),canEdit:this.model.canEdit()}},ui:{input:".js-input"},events:{"input @ui.input":"onChange"},initialize({state:n}){this.listenTo(n,"change:errors",this.render)},onChange(){const n=this.ui.input.val();this.model.set(this.getOption("attr"),M(n))},onDomRefresh(){this.getOption("shouldFocus")&&this.ui.input.focus()}}),Kl=k.extend({initialize({model:n}){const e=n.get("sex");this.collection=new v.Collection([{text:_.sexDroplist.male,value:"m"},{text:_.sexDroplist.female,value:"f"},{text:_.sexDroplist.other,value:"u"}]),this.setState("selected",this.collection.find({value:e}))},viewOptions:{className:"button-secondary modal__form-component",template:d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"globals"))&&a(t,"patientModal"))&&a(t,"patientModalViews"))&&a(t,"sexDroplist"))&&a(t,"defaultText"),e))},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]};return c((r(o,"far")||e&&r(e,"far")||s).call(i,"user",{name:"far",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:14}}}))+"<span>"+c((a=(a=r(o,"text")||(e!=null?r(e,"text"):e))!=null?a:s,typeof a=="function"?a.call(i,{name:"text",hash:{},data:l,loc:{start:{line:1,column:20},end:{line:1,column:30}}}):a))+((t=r(o,"unless").call(i,e!=null?r(e,"text"):e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:30},end:{line:1,column:131}}}))!=null?t:"")+"</span>"},useData:!0})}}),Jl=h.extend({className:"modal__form-component",template:d.template({compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){return"<div data-date-select-region></div>"},useData:!0}),regions:{dateSelect:{el:"[data-date-select-region]",replaceElement:!0}},onChangeDate(n,e){n.set("hasError",e&&e.isAfter()),this.triggerMethod("change:selected",e)},onRender(){const n=new Bl({state:{selectedDate:this.model.get("birth_date"),isDisabled:!this.model.canEdit()},viewOptions:{className:"flex"}});this.listenTo(n,"change:date",this.onChangeDate),this.showChildView("dateSelect",n)}}),Ve=h.extend({className:"modal__footer-info modal__error",template:d.template({1:function(n,e,o,u,l){var t,a=n.lookupProperty||function(i,s){if(Object.prototype.hasOwnProperty.call(i,s))return i[s]};return' <a class="u-margin--l-8 u-text-link js-search">'+n.escapeExpression(n.lambda((t=(t=(t=(t=(t=l&&a(l,"intl"))&&a(t,"globals"))&&a(t,"patientModal"))&&a(t,"patientModalViews"))&&a(t,"errorView"))&&a(t,"searchBtn"),e))+"</a>"},compiler:[8,">= 4.3.0"],main:function(n,e,o,u,l){var t,a,i=e??(n.nullContext||{}),s=n.lookupProperty||function(c,r){if(Object.prototype.hasOwnProperty.call(c,r))return c[r]};return n.escapeExpression((a=(a=s(o,"error")||(e!=null?s(e,"error"):e))!=null?a:n.hooks.helperMissing,typeof a=="function"?a.call(i,{name:"error",hash:{},data:l,loc:{start:{line:1,column:0},end:{line:1,column:11}}}):a))+((t=s(o,"if").call(i,e!=null?s(e,"hasSearch"):e,{name:"if",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:1,column:11},end:{line:1,column:155}}}))!=null?t:"")},useData:!0}),templateContext(){return{error:this.getOption("error")||_.errorView.errors[this.getOption("errorCode")],hasSearch:this.getOption("hasSearch")}},triggers:{"click .js-search":"click:search"}}),et=h.extend({className:"modal__content",regions:{firstName:"[data-first-name-region]",lastName:"[data-last-name-region]",dob:"[data-dob-region]",sex:"[data-sex-region]",workspaces:"[data-workspaces-region]"},modelEvents:{change:"onChange"},template:Yl,templateContext(){return{isNew:this.model.isNew(),canEdit:this.model.canEdit()}},initialize({state:n}){this.initState({state:n})},onRender(){this.showFirstNameView(),this.showLastNameView(),this.showSexDroplist(),this.showBirthDatePicker(),this.showWorkspacesComponent()},showFirstNameView(){this.showChildView("firstName",new Me({model:this.model,state:this.getState(),attr:"first_name",placeholder:_.patientModal.firstName,errorField:"name",shouldFocus:!0}))},showLastNameView(){this.showChildView("lastName",new Me({model:this.model,state:this.getState(),attr:"last_name",placeholder:_.patientModal.lastName,errorField:"name"}))},showSexDroplist(){const n=this.showChildView("sex",new Kl({model:this.model,state:{isDisabled:!this.model.canEdit()}}));this.listenTo(n,{"change:selected"(e){this.model.set("sex",e.get("value"))}})},showBirthDatePicker(){const n=this.showChildView("dob",new Jl({model:this.model,state:this.getState()}));this.listenTo(n,{"change:selected"(e){this.model.set("birth_date",e?e.format("YYYY-MM-DD"):null)}})},showWorkspacesComponent(){if(this.model.isNew())return;const n=f.request("bootstrap","currentUser");this.showChildView("workspaces",new B({member:this.model,workspaces:n.getWorkspaces(),isDisabled:!0}))}});rt(et);function Ql(n){const e=n.patient,o=new et({model:e});if(e.canEdit()){const l=e.isNew()?"add":"edit",{submit_text:t}=f.request("settings","get","patient_creation_form")||{};return t&&e.isNew()&&D(n,{submitText:t}),D({bodyView:o,headerIcon:"address-card"},_.patientModal[l],n)}return D({bodyView:o,cancelText:!1,headerIcon:"address-card",infoText:_.patientModal.patientAccountManaged},_.patientModal.view,n)}const Xl=v.Model.extend({defaults:{isMinimized:!1}}),Ee=new v.Model({text:P.dashboardsNav.dashboards,icons:[{type:"far",icon:"gauge"}],event:"dashboards:all",eventArgs:[]}),I=new v.Collection([{onSelect(){f.trigger("event-router","programs:all")},id:"ProgramsApp",text:P.adminNav.programs,icon:{type:"far",icon:"screwdriver-wrench"}},{onSelect(){f.trigger("event-router","clinicians:all")},id:"CliniciansApp",text:P.adminNav.clinicians,icon:{type:"far",icon:"users-gear"}}]),W=new v.Collection([{text:P.patientsAppNav.ownedBy,icons:[{type:"fas",icon:"list"}],event:"worklist",eventArgs:["owned-by"]},{text:P.patientsAppNav.schedule,icons:[{type:"fas",icon:"calendar-star"}],event:"schedule",eventArgs:[]},{text:P.patientsAppNav.sharedBy,icons:[{type:"fas",icon:"arrow-right-arrow-left"}],event:"worklist",eventArgs:["shared-by"]},{text:P.patientsAppNav.newPastDay,icons:[{type:"fas",icon:"angle-left"},{type:"fas",icon:"1"}],event:"worklist",eventArgs:["new-past-day"]},{text:P.patientsAppNav.updatedPastThree,icons:[{type:"fas",icon:"angle-left"},{type:"fas",icon:"3"}],event:"worklist",eventArgs:["updated-past-three-days"]},{text:P.patientsAppNav.doneLastThirty,icons:[{type:"fas",icon:"3"},{type:"fas",icon:"0"}],event:"worklist",eventArgs:["done-last-thirty-days"]}]),Zl=ft.extend({eventRoutes(){const e=f.request("bootstrap","currentUser").getWorkspaces(),o={action:"setWorkspace",route:"",root:!0};return e.reduce((u,l)=>{const t=l.get("slug");return u[`workspace:${t}`]={action:oe(this.setWorkspace,t),root:!0,route:[t,`${t}/*route`]},u},{root:o})},setWorkspace(n,e){const o=f.request("workspace","current",n);!(o&&o.get("slug"))||e||re(()=>{this.replaceUrl(this.getDefaultRoute())})},getDefaultRoute(){const e=f.request("workspace","current").get("slug");return f.request("bootstrap","currentUser").can("app:schedule:reduced")?`/${e}/schedule`:`/${e}/worklist/owned-by`},onNoMatch:ce,StateModel:Xl,startAfterInitialized:!0,channelName:"nav",initialize(){const n=f.channel("workspace");this.listenTo(n,"change:workspace",()=>{this.setCanPatientCreate(),this.showNav()});const e=f.channel("event-router");this.listenTo(e,"default",()=>{re(()=>{v.history.navigate(this.getDefaultRoute(),{trigger:!0})})})},radioRequests:{search:"showSearch",patient:"showPatientModal",select:"selectNav"},stateEvents:{"change:currentApp":"onChangeCurrentApp","change:isMinimized":"onChangeIsMinimized"},viewEvents:{"click:addPatient":"onClickAddPatient","click:minimizeMenu":"onClickMinimizeMenu"},childApps:{search:Al},selectNav(n,e,o){this.setState("currentApp",n),this.navMatch=this.getNavMatch(n,e,at(o)),e==="dashboards:all"&&!this.navMatch&&(this.navMatch=Ee),this.navMatch&&(this.getView().removeSelected(),this.navMatch.trigger("selected"))},onChangeCurrentApp(n,e){this.setSelectedAdminNavItem(e),this.getView().removeSelected()},onChangeIsMinimized(){this.showNav(),this.navMatch&&(this.getView().removeSelected(),this.navMatch.trigger("selected"));const n=this.getState("currentApp");this.setSelectedAdminNavItem(n),Z.set("isNavMenuMinimized",this.getState("isMinimized"))},getNavMatch(n,e,o){return this._navMatch(W,e,o)},_navMatch(n,e,o){return n.find(u=>u.get("event")===e&&lt(u.get("eventArgs")[0],o[0]))},onBeforeStart(){const n=Z.get("isNavMenuMinimized");if(n){this.setState("isMinimized",n);return}Z.set("isNavMenuMinimized",this.getState("isMinimized"))},onStart(){const n=f.request("bootstrap","currentUser");n.can("clinicians:manage")||I.remove("CliniciansApp"),n.can("programs:manage")||I.remove("ProgramsApp"),n.can("app:schedule:reduced")&&W.reset(W.filter({event:"schedule"})),this.setView(new Nl({model:this.getState()})),this.setCanPatientCreate(),this.showNav(),this.showView()},setCanPatientCreate(){const n=f.request("bootstrap","currentUser"),e=f.request("settings","get","manual_patient_creation");this.canPatientCreate=e&&n.can("patients:manage")},setSelectedAdminNavItem(n){if(!I.length)return;const e=I.get(n);e||this.adminNavMenu.setState("selected",null),this.adminNavMenu.setState("selected",e)},showBottomNavView(){const n=f.request("bootstrap","currentUser"),e=new Ll({model:this.getState(),canPatientCreate:this.canPatientCreate});this.showChildView("bottomNavContent",e),n.can("dashboards:view")&&(this.dashboardsNavView=new Ze({model:Ee,state:this.getState()}),e.showChildView("dashboards",this.dashboardsNavView)),I.length&&(this.adminNavMenu=new Il({collection:I,state:this.getState()}),e.showChildView("adminTools",this.adminNavMenu))},showMainNavDroplist(){const n=f.request("workspace","current"),o=f.request("bootstrap","currentUser").getWorkspaces(),u=new v.Collection(o.map(l=>({id:l.id,onSelect(){f.trigger("event-router",`workspace:${l.get("slug")}`)},text:l.get("name"),icon:{type:"far",icon:"window"}})));this.showChildView("navMain",new Fl({collection:u,state:{selected:u.get(n.id),isMinimized:this.getState("isMinimized")}}))},showNav(){this.showMainNavDroplist();const n=new Hl({model:this.getState()}),e=new Rl({collection:W,model:this.getState()});n.showChildView("worklists",e),this.listenTo(n,"search",()=>{this.showSearch()});const o=f.channel("hotkey");n.listenTo(o,"search",u=>{u.preventDefault(),this.showSearch()}),this.showChildView("navContent",n),this.showBottomNavView()},showSearch(n){const e=this.getChildView("navContent"),o=this.startChildApp("search",{prefillText:n,canPatientCreate:this.canPatientCreate});this.listenTo(o,{stop(){e.triggerMethod("search:active",!1)},"click:addPatient":this.onClickAddPatient}),e.triggerMethod("search:active",!0)},onClickAddPatient(){this.showPatientModal()},onClickMinimizeMenu(){this.toggleState("isMinimized")},getNewPatient(){const e=f.request("bootstrap","currentUser").getWorkspaces();return e.length===1?f.request("entities","patients:model",{_workspaces:[{id:e.first().id}]}):f.request("entities","patients:model")},showPatientModal(n){const{form_id:e}=f.request("settings","get","patient_creation_form")||{};n=n||this.getNewPatient();const o=n.clone(),u=f.request("modal","show",Ql({patient:o,onSubmit:()=>{if(!n.canEdit()){u.destroy();return}u.disableSubmit(),n.saveAll(o.attributes).then(()=>{if(u.destroy(),e&&o.isNew()){f.trigger("event-router","form:patient",n.id,e);return}f.trigger("event-router","patient:dashboard",n.id)}).catch(({responseData:l})=>{const t=l.errors[0].detail;u.getChildView("body").setState({errors:{name:t}});const a=new Ve({hasSearch:!0,error:t});u.listenTo(a,"click:search",()=>{const i=`${o.get("first_name")} ${o.get("last_name")}`;this.showSearch(i)}),u.showChildView("info",a)})}}));u.disableSubmit(n.canEdit()),u.listenTo(o,{change(){u.getRegion("info").empty(),u.disableSubmit(!o.isValid())},invalid(l,t){const a=t.birth_date;a==="invalidDate"&&u.showChildView("info",new Ve({errorCode:a}))}})}}),es=C.extend({routers:[],onBeforeStart(){if(this.getRegion("content").empty(),this.isRestarting())return;const n=f.channel("workspace");this.listenTo(n,"change:workspace",this.restart),new Zl({region:this.getRegion("nav")}),new Pl({region:this.getRegion("sidebar")})},beforeStart(){const n=f.request("bootstrap","currentUser"),e=n.can("app:schedule:reduced"),o=n.can("dashboards:view"),u=n.can("clinicians:manage"),l=n.can("programs:manage");return[f.request("workspace","fetch"),e?A(()=>import("./20241017-reduced-patients-main_app-C67n5U_j.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])):A(()=>import("./20241017-patients-main_app-IWCE7mTg.js"),__vite__mapDeps([23,3,2,1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,24])),o?A(()=>import("./20241017-dashboards-main_app-CWrSH4sa.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,13,14,15,9,26])):null,u?A(()=>import("./20241017-clinicians-main_app-DIs0ze7r.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,10,11,9,20,12,13,14,15,16,17,21,28])):null,l?A(()=>import("./20241017-programs-main_app-yHRYFJ-1.js"),__vite__mapDeps([29,1,2,3,4,5,6,7,16,13,14,15,10,11,9,12,17,30])):null,A(()=>import("./20241017-forms-main_app-CQsa7Qlv.js"),__vite__mapDeps([31,1,2,3,4,5,6,7,12,9,13,14,15,16,17,18,19,32]))]},onStart(n,e,o,u,l,t,a){this.initRouter(o),this.initRouter(u),this.initRouter(l),this.initRouter(t),this.initFormsApp(a),re(()=>{v.history.loadUrl(),st(this.routers,i=>i.isRunning())||f.trigger("event-router","notFound")})},onStop(){it(this.routers,"destroy"),this.routers=[]},initRouter(n){if(!n)return;const e=n.default,o=new e({region:this.getRegion("content")});return this.routers.push(o),o},initFormsApp(n){const e=this.initRouter(n);this.listenTo(e,{start:oe(this.toggleNav,!1),stop:oe(this.toggleNav,!0)})},toggleNav(n){this.isRunning()&&this.getView().toggleNav(!!n)}}),hs=Object.freeze(Object.defineProperty({__proto__:null,default:es},Symbol.toStringTag,{value:"Module"}));export{Ke as B,vt as C,_t as D,ms as F,We as O,Ue as R,$e as S,Et as T,Ya as W,ze as a,ds as b,fs as c,ps as d,kn as e,Lt as f,Za as g,Wa as h,he as i,Sa as j,_a as k,Xn as l,Jn as m,dl as n,hs as o};
