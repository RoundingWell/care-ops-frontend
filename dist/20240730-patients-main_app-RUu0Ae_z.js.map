{"version":3,"file":"20240730-patients-main_app-RUu0Ae_z.js","sources":["../src/js/apps/patients/worklist/worklist_state.js","../src/js/apps/patients/sidebar/bulk-edit-flows_app.js","../src/js/views/patients/shared/components/date-filter/date-filter_views.js","../src/js/views/patients/shared/components/date-filter/date-filter_state.js","../src/js/views/patients/shared/components/date-filter/index.js","../src/js/views/patients/worklist/action-item.hbs","../src/js/views/patients/worklist/action_views.js","../src/js/views/patients/worklist/flow-item.hbs","../src/js/views/patients/worklist/flow_views.js","../src/js/views/patients/worklist/layout.hbs","../src/js/views/patients/worklist/table-header.hbs","../src/js/views/patients/worklist/worklist_views.js","../src/js/apps/patients/worklist/worklist_sort.js","../src/js/apps/patients/worklist/worklist_app.js","../src/js/apps/patients/schedule/schedule_state.js","../src/js/apps/patients/schedule/schedule_app.js","../src/js/apps/patients/patients-main_app.js"],"sourcesContent":["import { clone, extend, omit, reduce } from 'underscore';\nimport dayjs from 'dayjs';\nimport store from 'store';\nimport { NIL as NIL_UUID } from 'uuid';\n\nimport Backbone from 'backbone';\nimport Radio from 'backbone.radio';\n\nimport MultiselectStateMixin from 'js/mixins/multiselect-state_mixin';\n\nimport { RELATIVE_DATE_RANGES } from 'js/static';\n\nconst relativeRanges = new Backbone.Collection(RELATIVE_DATE_RANGES);\n\nconst STATE_VERSION = 'v6';\n\nconst StateModel = Backbone.Model.extend({\n  defaults() {\n    return {\n      actionsSortId: 'sortCreatedDesc',\n      flowsSortId: 'sortCreatedDesc',\n      actionsDateFilters: {\n        dateType: 'created_at',\n        selectedDate: null,\n        selectedMonth: null,\n        selectedWeek: null,\n        relativeDate: null,\n      },\n      flowsDateFilters: {\n        dateType: 'created_at',\n        selectedDate: null,\n        selectedMonth: null,\n        selectedWeek: null,\n        relativeDate: null,\n      },\n      clinicianId: this.currentClinician.id,\n      teamId: this.currentClinician.getTeam().id,\n      noOwner: false,\n      lastSelectedIndex: null,\n      actionsSelected: {},\n      flowsSelected: {},\n      searchQuery: '',\n      listType: 'actions',\n    };\n  },\n  getFiltersState() {\n    return {\n      customFilters: this.get('customFilters'),\n      states: this.get('states'),\n      flowStates: this.get('flowStates'),\n      listType: this.get('listType'),\n      isDoneOnly: this.id === 'done-last-thirty-days',\n    };\n  },\n  preinitialize() {\n    this.currentClinician = Radio.request('bootstrap', 'currentUser');\n    this.currentWorkspace = Radio.request('workspace', 'current');\n  },\n  initialize() {\n    this.on('change', this.onChange);\n  },\n  getStoreKey(id) {\n    return `${ id }_${ this.currentClinician.id }_${ this.currentWorkspace.id }-${ STATE_VERSION }`;\n  },\n  getStore(id) {\n    return store.get(this.getStoreKey(id));\n  },\n  onChange() {\n    store.set(this.getStoreKey(this.id), omit(this.attributes, 'lastSelectedIndex', 'searchQuery'));\n  },\n  setClinicianId(clinicianId) {\n    if (clinicianId) return this.set({ clinicianId });\n  },\n  setSearchQuery(searchQuery = '') {\n    return this.set({\n      searchQuery: searchQuery.length > 2 ? searchQuery : '',\n      lastSelectedIndex: null,\n    });\n  },\n  getType() {\n    return this.get('listType');\n  },\n  setType(listType) {\n    return this.set({\n      listType,\n      lastSelectedIndex: null,\n    });\n  },\n  isFlowType() {\n    return this.getType() === 'flows';\n  },\n  getSort() {\n    return this.get(`${ this.getType() }SortId`);\n  },\n  setSort(sortId) {\n    this.set(`${ this.getType() }SortId`, sortId);\n  },\n  setDateFilters(filters) {\n    return this.set(`${ this.getType() }DateFilters`, clone(filters));\n  },\n  getDateFilters() {\n    return clone(this.get(`${ this.getType() }DateFilters`));\n  },\n  formatDateRange(dateType, date, rangeType) {\n    const dateFormat = (dateType === 'due_date') ? 'YYYY-MM-DD' : '';\n    return `${ dayjs(date).startOf(rangeType).format(dateFormat) },${ dayjs(date).endOf(rangeType).format(dateFormat) }`;\n  },\n  getDateRange({ dateType, selectedDate, selectedMonth, selectedWeek, relativeDate }) {\n    if (selectedDate) return this.formatDateRange(dateType, selectedDate, 'day');\n\n    if (selectedMonth) return this.formatDateRange(dateType, selectedMonth, 'month');\n\n    if (selectedWeek) return this.formatDateRange(dateType, selectedWeek, 'week');\n\n    relativeDate = relativeDate || 'thismonth';\n    const { prev, unit } = relativeRanges.get(relativeDate).pick('prev', 'unit');\n    const relativeRange = dayjs().subtract(prev, unit);\n\n    return this.formatDateRange(dateType, relativeRange, unit);\n  },\n  getStaticDateFilter() {\n    const staticDateFilters = {\n      'new-past-day': {\n        created_at: dayjs().subtract(24, 'hours').format(),\n      },\n      'updated-past-three-days': {\n        updated_at: dayjs().startOf('day').subtract(3, 'days').format(),\n      },\n      'done-last-thirty-days': {\n        updated_at: dayjs().startOf('day').subtract(30, 'days').format(),\n      },\n    };\n\n    return staticDateFilters[this.id];\n  },\n  getEntityDateFilter() {\n    const staticDateFilter = this.getStaticDateFilter();\n    if (staticDateFilter) return staticDateFilter;\n\n    const dateFilters = this.getDateFilters();\n    if (dateFilters.relativeDate === 'alltime') return {};\n\n    return {\n      [dateFilters.dateType]: this.getDateRange(dateFilters),\n    };\n  },\n  getEntityStatesFilter() {\n    const state = this.get('states').join() || NIL_UUID;\n\n    if (this.isFlowType()) return { state };\n\n    return {\n      state,\n      'flow.state': this.get('flowStates').join() || NIL_UUID,\n    };\n  },\n  isOwnerTeam() {\n    const clinician = this.get('clinicianId');\n\n    return this.id === 'shared-by' || !clinician;\n  },\n  getOwner() {\n    const clinician = this.get('clinicianId');\n\n    if (this.isOwnerTeam()) return Radio.request('entities', 'teams:model', this.get('teamId'));\n\n    return Radio.request('entities', 'clinicians:model', clinician);\n  },\n  getEntityOwnerFilter() {\n    const clinician = this.get('clinicianId');\n\n    if (this.isOwnerTeam()) {\n      const team = this.get('teamId');\n      const noOwner = this.get('noOwner');\n      const canFilterClinicians = this.currentClinician.can('app:worklist:clinician_filter');\n\n      if (noOwner || !canFilterClinicians) return { team, clinician: NIL_UUID };\n\n      return { team };\n    }\n\n    return { clinician };\n  },\n  getEntityCustomFilter() {\n    const filtersState = this.get('customFilters');\n    return reduce(filtersState, (filters, selected, slug) => {\n      if (selected !== null) filters[`@${ slug }`] = selected;\n\n      return filters;\n    }, {});\n  },\n  getEntityFilter() {\n    const filters = {};\n\n    extend(filters, this.getEntityDateFilter());\n    extend(filters, this.getEntityStatesFilter());\n    extend(filters, this.getEntityOwnerFilter());\n    extend(filters, this.getEntityCustomFilter());\n\n    return filters;\n  },\n});\n\nextend(StateModel.prototype, MultiselectStateMixin);\n\nexport default StateModel;\n\n","import { partial, pick } from 'underscore';\nimport Backbone from 'backbone';\nimport Radio from 'backbone.radio';\n\nimport App from 'js/base/app';\nimport { BulkEditFlowsBodyView, BulkEditFlowsHeaderView } from 'js/views/patients/shared/bulk-edit/bulk-edit_views';\n\nconst StateModel = Backbone.Model.extend({\n  initialize({ collection }) {\n    const initModel = collection.at(0);\n    this.initBulkState(collection, initModel);\n    this.initBulkOwner(collection, initModel);\n  },\n  initBulkState(collection, initModel) {\n    const stateId = initModel.getState().id;\n    const stateMulti = collection.some(item => {\n      return item.getState().id !== stateId;\n    });\n\n    this.set({\n      stateMulti,\n      stateId: stateMulti ? null : stateId,\n    });\n  },\n  initBulkOwner(collection, initModel) {\n    const owner = initModel.getOwner();\n    const program = initModel.getProgram();\n    const ownerMulti = collection.some(item => {\n      const differentOwners = item.getOwner().id !== owner.id;\n      const differentPrograms = item.getProgram().id !== program.id;\n      return differentOwners || differentPrograms;\n    });\n\n    this.set({\n      ownerMulti,\n      owner: ownerMulti ? null : owner,\n      workspaces: program.getUserWorkspaces(),\n    });\n  },\n  setState(state) {\n    return this.set({ stateId: state.id, stateMulti: false, stateChanged: true });\n  },\n  setOwner(owner) {\n    return this.set({ owner, ownerMulti: false, ownerChanged: true });\n  },\n  someComplete() {\n    return this.get('collection').some(item => {\n      return item.isDone();\n    });\n  },\n  getData() {\n    const {\n      stateChanged,\n      stateId,\n      ownerChanged,\n      owner,\n    } = this.attributes;\n\n    const saveData = {};\n\n    if (stateChanged) saveData._state = stateId;\n    if (ownerChanged) saveData._owner = pick(owner, 'id', 'type');\n\n    return saveData;\n  },\n});\n\nexport default App.extend({\n  StateModel,\n  onStart() {\n    const headerView = new BulkEditFlowsHeaderView({\n      collection: this.getState('collection'),\n    });\n    const bodyView = new BulkEditFlowsBodyView({\n      model: this.getState(),\n      collection: this.getState('collection'),\n    });\n\n    this.modal = Radio.request('modal', 'show:sidebar', {\n      headerView,\n      bodyView,\n      onSubmit: this.onSubmit.bind(this),\n    });\n\n    this.listenTo(headerView, {\n      'delete': partial(this.triggerMethod, 'delete'),\n    });\n\n    this.listenTo(this.modal, {\n      'destroy': this.stop,\n    });\n  },\n  onSubmit() {\n    this.modal.disableSubmit();\n    const applyOwner = !!this.getState('applyOwner');\n    if (applyOwner) {\n      this.triggerMethod('applyOwner', this.getState('owner'));\n    }\n    this.triggerMethod('save', this.getState().getData());\n  },\n  onStop() {\n    this.modal.destroy();\n  },\n});\n","import Backbone from 'backbone';\nimport { View, CollectionView } from 'marionette';\nimport hbs from 'handlebars-inline-precompile';\nimport dayjs from 'dayjs';\n\nimport Tooltip from 'js/components/tooltip';\nimport Picklist from 'js/components/picklist';\nimport './date-filter.scss';\n\nimport { RELATIVE_DATE_RANGES } from 'js/static';\n\nconst relativeRanges = new Backbone.Collection(RELATIVE_DATE_RANGES);\n\nconst TypeView = View.extend({\n  tagName: 'button',\n  className: 'button-filter button__group flex-grow',\n  template: hbs`{{formatMessage (intlGet \"patients.shared.components.dateFilterComponent.dateTypes\") type=id }}`,\n  onRender() {\n    this.$el.toggleClass('button--blue', this.getOption('selected') === this.model.id);\n  },\n  triggers: {\n    'click': 'click',\n  },\n});\n\nconst FilterTypeView = CollectionView.extend({\n  modelEvents: {\n    'change:dateType': 'render',\n  },\n  className: 'flex',\n  childView: TypeView,\n  childViewTriggers: {\n    'click': 'click',\n  },\n  onClick({ model }) {\n    this.model.set('dateType', model.id);\n  },\n  childViewOptions() {\n    return {\n      selected: this.model.get('dateType'),\n    };\n  },\n});\n\nconst DateTemplate = hbs`{{formatDateTime selectedDate \"MM/DD/YYYY\"}}{{far \"angle-down\"}}`;\n\nconst MonthTemplate = hbs`{{formatDateTime selectedMonth \"MMM YYYY\"}}{{far \"angle-down\"}}`;\n\nconst WeekTemplate = hbs`{{formatDateTime selectedWeek \"MM/DD/YYYY\"}} - {{formatDateTime selectedEndWeek \"MM/DD/YYYY\"}}{{far \"angle-down\"}}`;\n\nconst RelativeTemplate = hbs`{{formatMessage (intlGet \"patients.shared.components.dateFilterComponent.relativeDate\") relativeTo=relativeDate }}{{far \"angle-down\"}}`;\n\nconst DefaultTemplate = hbs`{{ @intl.patients.shared.components.dateFilterComponent.dateFilterViews.defaultTemplate.thisMonth }}{{far \"angle-down\"}}`;\n\nconst ControllerView = View.extend({\n  template: hbs`\n    {{#unless hidePrevNextButtons}}\n      <button class=\"button-secondary--compact u-margin--r-8 js-prev\">{{far \"angle-left\"}}</button>{{~ remove_whitespace ~}}\n    {{/unless}}\n    <button class=\"button-filter js-date\">\n      {{far \"calendar-days\"}}{{~ remove_whitespace ~}}\n      {{formatMessage (intlGet \"patients.shared.components.dateFilterComponent.dateTypes\") type=dateType }}{{~ remove_whitespace ~}}:\n      <span data-date-picker-label-region></span>\n    </button>{{~ remove_whitespace ~}}\n    {{#unless hidePrevNextButtons}}\n      <button class=\"button-secondary--compact u-margin--l-8 js-next\">{{far \"angle-right\"}}</button>\n    {{/unless}}\n  `,\n  regions: {\n    datepicker: {\n      el: '[data-date-picker-label-region]',\n      replaceElement: true,\n    },\n  },\n  ui: {\n    next: '.js-next',\n    prev: '.js-prev',\n    date: '.js-date',\n  },\n  triggers: {\n    'click @ui.prev': 'click:prev',\n    'click @ui.next': 'click:next',\n    'click @ui.date': 'click:date',\n  },\n  getLabelTemplate() {\n    if (this.model.get('selectedDate')) return DateTemplate;\n    if (this.model.get('selectedMonth')) return MonthTemplate;\n    if (this.model.get('selectedWeek')) return WeekTemplate;\n    if (this.model.get('relativeDate')) return RelativeTemplate;\n    return DefaultTemplate;\n  },\n  onRender() {\n    this.showChildView('datepicker', {\n      tagName: 'span',\n      model: this.model,\n      template: this.getLabelTemplate(),\n      templateContext() {\n        if (!this.model.get('selectedWeek')) return {};\n        return {\n          selectedEndWeek: this.model.dayjs('selectedWeek').endOf('week'),\n        };\n      },\n    });\n\n    if (this.model.get('relativeDate') === 'alltime') return;\n\n    this.getTooltips();\n  },\n  templateContext() {\n    return {\n      hidePrevNextButtons: this.model.get('relativeDate') === 'alltime',\n    };\n  },\n  getTooltips() {\n    const tooltipMessages = this.getTooltipMessages();\n\n    new Tooltip({\n      message: tooltipMessages.prevMessage,\n      uiView: this,\n      ui: this.ui.prev,\n    });\n\n    new Tooltip({\n      message: tooltipMessages.nextMessage,\n      uiView: this,\n      ui: this.ui.next,\n    });\n  },\n  getTooltipMessages() {\n    if (this.model.get('selectedDate')) {\n      return this._getTooltipDayMessage(this.model.dayjs('selectedDate'));\n    }\n\n    if (this.model.get('selectedMonth')) {\n      return this._getTooltipMonthMessage(this.model.dayjs('selectedMonth'));\n    }\n\n    if (this.model.get('selectedWeek')) {\n      return this._getTooltipWeekMessage(this.model.dayjs('selectedWeek'));\n    }\n\n    const relativeDate = this.model.get('relativeDate');\n    const { prev, unit } = relativeRanges.get(relativeDate || 'thismonth').pick('prev', 'unit');\n    const relativeMessages = {\n      day: '_getTooltipDayMessage',\n      month: '_getTooltipMonthMessage',\n      week: '_getTooltipWeekMessage',\n    };\n\n    return this[relativeMessages[unit]].call(this, dayjs().subtract(prev, unit).startOf(unit));\n  },\n  _getTooltipDayMessage(ts) {\n    return {\n      prevMessage: dayjs(ts).subtract(1, 'day').format('MM/DD/YYYY'),\n      nextMessage: dayjs(ts).add(1, 'day').format('MM/DD/YYYY'),\n    };\n  },\n  _getTooltipMonthMessage(ts) {\n    return {\n      prevMessage: dayjs(ts).subtract(1, 'month').format('MMM YYYY'),\n      nextMessage: dayjs(ts).add(1, 'month').format('MMM YYYY'),\n    };\n  },\n  _getTooltipWeekMessage(ts) {\n    const prevWeek = dayjs(ts).subtract(1, 'week');\n    const nextWeek = dayjs(ts).add(1, 'week');\n    return {\n      prevMessage: `${ prevWeek.format('MM/DD/YYYY') } - ${ prevWeek.endOf('week').format('MM/DD/YYYY') }`,\n      nextMessage: `${ nextWeek.format('MM/DD/YYYY') } - ${ nextWeek.endOf('week').format('MM/DD/YYYY') }`,\n    };\n  },\n});\n\nconst ActionsView = View.extend({\n  template: hbs`\n    <button class=\"datepicker__button js-today\">{{ @intl.patients.shared.components.dateFilterComponent.dateFilterViews.actionView.today }}</button>{{~ remove_whitespace ~}}\n    <button class=\"datepicker__button js-current-week\">{{ @intl.patients.shared.components.dateFilterComponent.dateFilterViews.actionView.week }}</button>{{~ remove_whitespace ~}}\n    <button class=\"datepicker__button js-current-month\">{{ @intl.patients.shared.components.dateFilterComponent.dateFilterViews.actionView.month }}</button>\n  `,\n  triggers: {\n    'click .js-current-week': 'click:currentWeek',\n    'click .js-today': 'click:today',\n    'click .js-current-month': 'click:currentMonth',\n  },\n});\n\nconst LayoutView = View.extend({\n  className: 'date-filter',\n  template: hbs`\n    <div class=\"date-filter__label\">{{ @intl.patients.shared.components.dateFilterComponent.dateFilterViews.layoutView.dateLabel }}</div>\n    <div class=\"date-filter__toggle\" data-date-type-region></div>\n    <div data-component-region></div>\n  `,\n  regions: {\n    dateType: '[data-date-type-region]',\n    component: '[data-component-region]',\n  },\n});\n\nconst DateRanges = Picklist.extend({\n  className: 'date-filter__ranges',\n  itemTemplate: hbs`{{formatMessage (intlGet \"patients.shared.components.dateFilterComponent.relativeDate\") relativeTo=id}}{{#if isSelected}}{{fas \"check\"}}{{/if}}`,\n  itemTemplateContext() {\n    return {\n      isSelected: this.model === this.state.get('selected'),\n    };\n  },\n  viewEvents: {\n    'picklist:item:select': 'onItemSelect',\n  },\n  onItemSelect({ model }) {\n    this.triggerMethod('select', model.id);\n  },\n});\n\nexport {\n  ActionsView,\n  ControllerView,\n  LayoutView,\n  FilterTypeView,\n  DateRanges,\n};\n","import Backbone from 'backbone';\nimport dayjs from 'dayjs';\n\nimport { RELATIVE_DATE_RANGES } from 'js/static';\n\nconst relativeRanges = new Backbone.Collection(RELATIVE_DATE_RANGES);\nconst relativeSets = {\n  day: 'setDate',\n  week: 'setWeek',\n  month: 'setMonth',\n};\n\nexport default Backbone.Model.extend({\n  setRelativeDate(relativeDate, dateType) {\n    this.set({\n      relativeDate,\n      selectedDate: null,\n      selectedWeek: null,\n      selectedMonth: null,\n      dateType: dateType,\n    });\n  },\n  setMonth(selectedMonth, dateType) {\n    this.set({\n      relativeDate: null,\n      selectedDate: null,\n      selectedWeek: null,\n      selectedMonth,\n      dateType: dateType || this.get('dateType'),\n    });\n  },\n  setWeek(selectedWeek, dateType) {\n    this.set({\n      relativeDate: null,\n      selectedDate: null,\n      selectedWeek,\n      selectedMonth: null,\n      dateType: dateType || this.get('dateType'),\n    });\n  },\n  setDate(selectedDate, dateType) {\n    this.set({\n      relativeDate: null,\n      selectedDate,\n      selectedWeek: null,\n      selectedMonth: null,\n      dateType: dateType || this.get('dateType'),\n    });\n  },\n  incrementBackward() {\n    if (this.dayjs('selectedDate')) {\n      this.setDate(this.dayjs('selectedDate').subtract(1, 'day'));\n      return;\n    }\n\n    if (this.dayjs('selectedMonth')) {\n      this.setMonth(this.dayjs('selectedMonth').subtract(1, 'month').startOf('month'));\n      return;\n    }\n\n    if (this.dayjs('selectedWeek')) {\n      this.setWeek(this.dayjs('selectedWeek').subtract(1, 'week').startOf('week'));\n      return;\n    }\n\n    const relativeDate = this.get('relativeDate') || /* istanbul ignore next: sensible default */ 'thismonth';\n    const { prev, unit } = relativeRanges.get(relativeDate).pick('prev', 'unit');\n    this[relativeSets[unit]].call(this, dayjs().subtract(prev + 1, unit).startOf(unit));\n  },\n  incrementForward() {\n    if (this.dayjs('selectedDate')) {\n      this.setDate(this.dayjs('selectedDate').add(1, 'day'));\n      return;\n    }\n\n    if (this.dayjs('selectedMonth')) {\n      this.setMonth(this.dayjs('selectedMonth').add(1, 'month').startOf('month'));\n      return;\n    }\n\n    if (this.dayjs('selectedWeek')) {\n      this.setWeek(this.dayjs('selectedWeek').add(1, 'week').startOf('week'));\n      return;\n    }\n\n    const relativeDate = this.get('relativeDate') || /* istanbul ignore next: sensible default */ 'thismonth';\n    const { prev, unit } = relativeRanges.get(relativeDate).pick('prev', 'unit');\n    this[relativeSets[unit]].call(this, dayjs().add(1 - prev, unit).startOf(unit));\n  },\n});\n","import { noop } from 'underscore';\nimport Backbone from 'backbone';\nimport Radio from 'backbone.radio';\n\nimport collectionOf from 'js/utils/formatting/collection-of';\nimport Component from 'js/base/component';\nimport Datepicker from 'js/components/datepicker';\n\nimport { ControllerView, ActionsView, FilterTypeView, LayoutView, DateRanges } from './date-filter_views';\nimport StateModel from './date-filter_state';\n\nimport { RELATIVE_DATE_RANGES } from 'js/static';\n\nconst relativeRanges = new Backbone.Collection([...RELATIVE_DATE_RANGES, { id: 'calendar' }, { id: 'alltime' }]);\n\nconst dateTypes = ['create_at', 'updated_at', 'due_date'];\n\nconst DateFilterPickerComponent = Datepicker.extend({\n  stateEvents: {\n    'change': 'show',\n    'change:selectedDate': 'onChangeStateSelectedDate',\n    'change:selectedMonth': 'onChangeStateSelectedMonth',\n  },\n  getActionsView() {\n    const actionsView = new ActionsView();\n\n    this.listenTo(actionsView, {\n      'click:today': this.onClickToday,\n      'click:currentWeek': this.onClickCurrentWeek,\n      'click:currentMonth': this.onClickCurrentMonth,\n    });\n\n    return actionsView;\n  },\n  onClickToday() {\n    this.triggerMethod('select:today');\n  },\n  onClickCurrentWeek() {\n    this.triggerMethod('select:currentWeek');\n  },\n  onClickCurrentMonth() {\n    this.triggerMethod('select:currentMonth');\n  },\n  onSelectToday: noop,\n  regionOptions: noop,\n});\n\nexport default Component.extend({\n  dateTypes,\n  StateModel,\n  stateEvents: {\n    'change': 'show',\n  },\n  ViewClass: ControllerView,\n  viewOptions() {\n    return {\n      model: this.getState(),\n    };\n  },\n  viewEvents: {\n    'click:date'() {\n      this.showPop();\n    },\n    'click:prev'() {\n      this.getState().incrementBackward();\n    },\n    'click:next'() {\n      this.getState().incrementForward();\n    },\n  },\n  initialize() {\n    this.dateTypes = new Backbone.Collection(collectionOf(this.getOption('dateTypes'), 'id'));\n    this.dateTypeState = new Backbone.Model({ dateType: this.getState('dateType') });\n  },\n  showPop() {\n    const position = this.getView().getBounds(this.getView().$el);\n    this.popView = new LayoutView();\n\n    this.popView.listenTo(this, 'destroy', this.popView.destroy);\n    this.listenTo(this.popView, 'destroy', () => {\n      this.setState('dateType', this.dateTypeState.get('dateType'));\n    });\n\n    this.showRanges();\n    this.showDateTypes();\n\n    Radio.request('app', 'show:pop', this.popView, {\n      popWidth: 256,\n      ...position,\n    });\n  },\n  showDateTypes() {\n    this.popView.showChildView('dateType', new FilterTypeView({\n      collection: this.dateTypes,\n      model: this.dateTypeState,\n    }));\n  },\n  showRanges() {\n    const state = this.getState();\n    const { selectedDate, selectedMonth, selectedWeek, relativeDate } = state.pick('selectedDate', 'selectedMonth', 'selectedWeek', 'relativeDate');\n    const selectedRange = relativeRanges.get(relativeDate || (!selectedDate && !selectedMonth && !selectedWeek && 'thismonth'));\n\n    const dateRanges = new DateRanges({\n      lists: [{ collection: relativeRanges }],\n      state: { selected: selectedRange },\n    });\n\n    this.listenTo(dateRanges, 'select', selected => {\n      if (selected === 'calendar') {\n        this.showDatePicker();\n        return;\n      }\n      state.setRelativeDate(selected, this.dateTypeState.get('dateType'));\n      this.popView.destroy();\n    });\n\n    this.popView.showChildView('component', dateRanges);\n  },\n  showDatePicker() {\n    const state = this.getState();\n\n    const datePicker = new DateFilterPickerComponent({\n      state: state.pick('selectedDate', 'selectedMonth'),\n      canSelectMonth: true,\n    });\n\n    this.listenTo(datePicker, {\n      'select:currentWeek'() {\n        state.setRelativeDate('thisweek', this.dateTypeState.get('dateType'));\n        this.popView.destroy();\n      },\n      'select:today'() {\n        state.setRelativeDate('today', this.dateTypeState.get('dateType'));\n        this.popView.destroy();\n      },\n      'select:currentMonth'() {\n        state.setRelativeDate('thismonth', this.dateTypeState.get('dateType'));\n        this.popView.destroy();\n      },\n      'change:selectedDate'(date) {\n        state.setDate(date, this.dateTypeState.get('dateType'));\n        this.popView.destroy();\n      },\n      'change:selectedMonth'(month) {\n        state.setMonth(month, this.dateTypeState.get('dateType'));\n        this.popView.destroy();\n      },\n    });\n\n    datePicker.showIn(this.popView.getRegion('component'));\n  },\n});\n","\n            import HandlebarsRuntime from 'handlebars/runtime';\n            export default HandlebarsRuntime.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"worklist-list__flow-name\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"flowName\") || (depth0 != null ? lookupProperty(depth0,\"flowName\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"flowName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":58},\"end\":{\"line\":15,\"column\":72}}}) : helper)))\n    + \"</div>\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"worklist-list__display-icon u-margin--l-8\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"far\")||(depth0 && lookupProperty(depth0,\"far\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"paperclip\",{\"name\":\"far\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":28,\"column\":80},\"end\":{\"line\":28,\"column\":99}}}))\n    + \"</span>\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=container.escapeExpression, alias4=container.lambda, alias5=\"function\", lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<td class=\\\"table-list__cell table-list__item-check js-no-click\\\"><span data-check-region></span></td>\\n<td class=\\\"table-list__cell w-15\\\">\\n  <span class=\\\"worklist-list__patient-sidebar-icon\\\">\\n    <button class=\\\"button-secondary--compact js-patient-sidebar-button\\\">\\n      \"\n    + alias3((lookupProperty(helpers,\"far\")||(depth0 && lookupProperty(depth0,\"far\"))||alias2).call(alias1,\"address-card\",{\"name\":\"far\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":6},\"end\":{\"line\":5,\"column\":28}}}))\n    + \"&#8203;\\n    </button>\\n  </span>\\n  <div class=\\\"worklist-list__patient-name js-patient\\\">\\n    \"\n    + alias3(alias4(((stack1 = (depth0 != null ? lookupProperty(depth0,\"patient\") : depth0)) != null ? lookupProperty(stack1,\"first_name\") : stack1), depth0))\n    + \" \"\n    + alias3(alias4(((stack1 = (depth0 != null ? lookupProperty(depth0,\"patient\") : depth0)) != null ? lookupProperty(stack1,\"last_name\") : stack1), depth0))\n    + \"&#8203;\\n  </div>\\n</td>\\n<td class=\\\"table-list__cell worklist-list__item-name\\\">\\n  <span class=\\\"worklist-list__action-icon\\\">\"\n    + alias3((lookupProperty(helpers,\"far\")||(depth0 && lookupProperty(depth0,\"far\"))||alias2).call(alias1,(depth0 != null ? lookupProperty(depth0,\"icon\") : depth0),{\"name\":\"far\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":43},\"end\":{\"line\":13,\"column\":55}}}))\n    + \"</span>\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":62},\"end\":{\"line\":13,\"column\":87}}}) : helper)))\n    + \"<div class=\\\"worklist-list__name\\\">\\n    \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"flowName\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":4},\"end\":{\"line\":15,\"column\":85}}})) != null ? stack1 : \"\")\n    + \"&#8203;\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":92},\"end\":{\"line\":15,\"column\":117}}}) : helper)))\n    + alias3(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":4},\"end\":{\"line\":16,\"column\":14}}}) : helper)))\n    + \"&#8203;\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":21},\"end\":{\"line\":16,\"column\":46}}}) : helper)))\n    + \"</div>\\n</td>\\n<td class=\\\"table-list__cell worklist-list__meta\\\">\\n  <span class=\\\"worklist-list__display-icon u-margin--r-16\\\" data-details-region></span>&#8203;\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":93},\"end\":{\"line\":20,\"column\":118}}}) : helper)))\n    + \"<span class=\\\"table-list__meta\\\" data-state-region></span>&#8203;<span class=\\\"worklist-list__search-helper\\\">\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"state\") || (depth0 != null ? lookupProperty(depth0,\"state\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"state\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":108},\"end\":{\"line\":21,\"column\":119}}}) : helper)))\n    + \"</span>&#8203;\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":133},\"end\":{\"line\":21,\"column\":158}}}) : helper)))\n    + \"<span class=\\\"table-list__meta\\\" data-owner-region></span>&#8203;<span class=\\\"worklist-list__search-helper\\\">\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"owner\") || (depth0 != null ? lookupProperty(depth0,\"owner\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"owner\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":22,\"column\":108},\"end\":{\"line\":22,\"column\":119}}}) : helper)))\n    + \"</span>&#8203;\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":22,\"column\":133},\"end\":{\"line\":22,\"column\":158}}}) : helper)))\n    + \"<span class=\\\"table-list__meta\\\">\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":23,\"column\":33},\"end\":{\"line\":23,\"column\":58}}}) : helper)))\n    + \"<span data-due-date-region></span>\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":38},\"end\":{\"line\":24,\"column\":63}}}) : helper)))\n    + \"<span data-due-time-region></span>\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":25,\"column\":38},\"end\":{\"line\":25,\"column\":63}}}) : helper)))\n    + \"</span>\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":26,\"column\":9},\"end\":{\"line\":26,\"column\":34}}}) : helper)))\n    + \"<span class=\\\"table-list__meta\\\" data-form-region></span>\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":27,\"column\":57},\"end\":{\"line\":27,\"column\":82}}}) : helper)))\n    + \"&#8203;\\n  \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"hasAttachments\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":28,\"column\":2},\"end\":{\"line\":28,\"column\":113}}})) != null ? stack1 : \"\")\n    + \"&#8203;\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":28,\"column\":120},\"end\":{\"line\":28,\"column\":145}}}) : helper)))\n    + \"</td>\\n<td class=\\\"table-list__cell worklist-list__action-ts w-7-5\\\">\"\n    + alias3((lookupProperty(helpers,\"formatDateTime\")||(depth0 && lookupProperty(depth0,\"formatDateTime\"))||alias2).call(alias1,(depth0 != null ? lookupProperty(depth0,\"created_at\") : depth0),\"TIME_OR_DAY\",{\"name\":\"formatDateTime\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":30,\"column\":60},\"end\":{\"line\":30,\"column\":103}}}))\n    + \"&#8203;</td>\\n<td class=\\\"table-list__cell worklist-list__action-ts w-7-5\\\">\"\n    + alias3((lookupProperty(helpers,\"formatDateTime\")||(depth0 && lookupProperty(depth0,\"formatDateTime\"))||alias2).call(alias1,(depth0 != null ? lookupProperty(depth0,\"updated_at\") : depth0),\"TIME_OR_DAY\",{\"name\":\"formatDateTime\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":31,\"column\":60},\"end\":{\"line\":31,\"column\":103}}}))\n    + \"&#8203;</td>\\n\";\n},\"useData\":true});\n          ","import Radio from 'backbone.radio';\nimport hbs from 'handlebars-inline-precompile';\nimport { View } from 'marionette';\n\nimport 'scss/modules/table-list.scss';\n\nimport { CheckComponent, StateComponent, OwnerComponent, DueComponent, TimeComponent, FormButton, DetailsTooltip } from 'js/views/patients/shared/actions_views';\nimport { ReadOnlyStateView, ReadOnlyOwnerView, ReadOnlyDueDateView, ReadOnlyDueTimeView } from 'js/views/patients/shared/read-only_views';\n\nimport ActionItemTemplate from './action-item.hbs';\n\nimport './worklist-list.scss';\n\nconst ActionTooltipTemplate = hbs`{{formatMessage (intlGet \"patients.worklist.actionViews.actionListTooltips\") title=worklistId team=owner}}`;\n\nconst ActionEmptyView = View.extend({\n  tagName: 'tr',\n  template: hbs`\n    <td class=\"table-empty-list\">\n      <h2>{{ @intl.patients.worklist.actionViews.actionEmptyView }}</h2>\n    </td>\n  `,\n});\n\nconst ActionItemView = View.extend({\n  className: 'table-list__item work-list__item',\n  tagName: 'tr',\n  template: ActionItemTemplate,\n  regions: {\n    check: '[data-check-region]',\n    state: '[data-state-region]',\n    owner: '[data-owner-region]',\n    dueDate: '[data-due-date-region]',\n    dueTime: '[data-due-time-region]',\n    form: '[data-form-region]',\n    details: '[data-details-region]',\n  },\n  templateContext() {\n    const state = this.model.getState();\n\n    return {\n      isOverdue: this.model.isOverdue(),\n      state: state.get('name'),\n      stateOptions: state.get('options'),\n      flowName: this.flow && this.flow.get('name'),\n      patient: this.model.getPatient().attributes,\n      owner: this.model.getOwner().get('name'),\n      icon: this.model.hasOutreach() ? 'share-from-square' : 'file-lines',\n      hasAttachments: this.model.hasAttachments(),\n    };\n  },\n  initialize({ state }) {\n    this.state = state;\n    this.flow = this.model.getFlow();\n\n    this.listenTo(state, {\n      'select:multiple': this.showCheck,\n      'select:none': this.showCheck,\n    });\n  },\n  modelEvents: {\n    'change': 'render',\n  },\n  triggers: {\n    'click': 'click',\n    'click .js-patient-sidebar-button': 'click:patientSidebarButton',\n    'click .js-patient': 'click:patient',\n    'click .js-no-click': 'prevent-row-click',\n  },\n  onClick() {\n    if (this.flow) {\n      Radio.trigger('event-router', 'flow:action', this.flow.id, this.model.id);\n      return;\n    }\n\n    Radio.trigger('event-router', 'patient:action', this.model.get('_patient'), this.model.id);\n  },\n  onClickPatient() {\n    Radio.trigger('event-router', 'patient:dashboard', this.model.get('_patient'));\n  },\n  onRender() {\n    this.showForm();\n    this.showDetailsTooltip();\n\n    const canEdit = this.canEdit;\n    this.canEdit = !this.model.isFlowDone() && this.model.canEdit();\n\n    this.showCheck();\n    this.showState();\n    this.showOwner();\n    this.showDueDate();\n    this.showDueTime();\n\n    if (canEdit !== this.canEdit) {\n      if (!this.canEdit) this.toggleSelected(false);\n      this.triggerMethod('change:canEdit');\n    }\n  },\n  toggleSelected(isSelected) {\n    this.$el.toggleClass('is-selected', isSelected);\n  },\n  showCheck() {\n    if (!this.canEdit) return;\n    const isSelected = this.state.isSelected(this.model);\n    this.toggleSelected(isSelected);\n    const checkComponent = new CheckComponent({ state: { isSelected } });\n\n    this.listenTo(checkComponent, {\n      'select'(domEvent) {\n        this.triggerMethod('select', this, !!domEvent.shiftKey);\n      },\n      'change:isSelected': this.toggleSelected,\n    });\n\n    this.showChildView('check', checkComponent);\n  },\n  showState() {\n    if (!this.canEdit) {\n      const readOnlyStateView = new ReadOnlyStateView({ model: this.model, isCompact: true });\n      this.showChildView('state', readOnlyStateView);\n      return;\n    }\n\n    this.stateComponent = new StateComponent({ stateId: this.model.get('_state'), isCompact: true });\n\n    this.listenTo(this.stateComponent, 'change:state', state => {\n      this.model.saveState(state);\n    });\n\n    this.showChildView('state', this.stateComponent);\n  },\n  showOwner() {\n    if (!this.canEdit) {\n      const readOnlyOwnerView = new ReadOnlyOwnerView({ model: this.model, isCompact: true });\n      this.showChildView('owner', readOnlyOwnerView);\n      return;\n    }\n\n    const isDisabled = this.model.isDone();\n    const program = this.model.getProgram();\n    this.ownerComponent = new OwnerComponent({\n      owner: this.model.getOwner(),\n      workspaces: program.getUserWorkspaces(),\n      isCompact: true,\n      state: { isDisabled },\n    });\n\n    this.listenTo(this.ownerComponent, 'change:owner', owner => {\n      this.model.saveOwner(owner);\n    });\n\n    this.showChildView('owner', this.ownerComponent);\n  },\n  showDueDate() {\n    if (!this.canEdit) {\n      const readOnlyOwnerView = new ReadOnlyDueDateView({ model: this.model });\n      this.showChildView('dueDate', readOnlyOwnerView);\n      return;\n    }\n\n    const isDisabled = this.model.isDone();\n    this.dueDateComponent = new DueComponent({\n      date: this.model.get('due_date'),\n      isCompact: true,\n      state: { isDisabled },\n      isOverdue: this.model.isOverdue(),\n    });\n\n    this.listenTo(this.dueDateComponent, 'change:due', date => {\n      this.model.saveDueDate(date);\n    });\n\n    this.showChildView('dueDate', this.dueDateComponent);\n  },\n  showDueTime() {\n    if (!this.canEdit) {\n      const readOnlyOwnerView = new ReadOnlyDueTimeView({ model: this.model });\n      this.showChildView('dueTime', readOnlyOwnerView);\n      return;\n    }\n\n    const isDisabled = this.model.isDone() || !this.model.get('due_date');\n    this.dueTimeComponent = new TimeComponent({\n      time: this.model.get('due_time'),\n      isCompact: true,\n      state: { isDisabled },\n      isOverdue: this.model.isOverdue(),\n    });\n\n    this.listenTo(this.dueTimeComponent, 'change:time', time => {\n      this.model.saveDueTime(time);\n    });\n\n    this.showChildView('dueTime', this.dueTimeComponent);\n  },\n  showForm() {\n    if (!this.model.getForm()) return;\n\n    this.showChildView('form', new FormButton({ model: this.model }));\n  },\n  showDetailsTooltip() {\n    if (!this.model.get('details')) return;\n\n    this.showChildView('details', new DetailsTooltip({ model: this.model }));\n  },\n});\n\nexport {\n  ActionTooltipTemplate,\n  ActionEmptyView,\n  ActionItemView,\n};\n","\n            import HandlebarsRuntime from 'handlebars/runtime';\n            export default HandlebarsRuntime.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"worklist-list__flow-name\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"flowName\") || (depth0 != null ? lookupProperty(depth0,\"flowName\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"flowName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":58},\"end\":{\"line\":15,\"column\":72}}}) : helper)))\n    + \"</div>\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=container.escapeExpression, alias4=container.lambda, alias5=\"function\", lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<td class=\\\"table-list__cell table-list__item-check js-no-click\\\"><span data-check-region></span></td>\\n<td class=\\\"table-list__cell w-15\\\">\\n  <span class=\\\"worklist-list__patient-sidebar-icon\\\">\\n    <button class=\\\"button-secondary--compact js-patient-sidebar-button\\\">\\n      \"\n    + alias3((lookupProperty(helpers,\"far\")||(depth0 && lookupProperty(depth0,\"far\"))||alias2).call(alias1,\"address-card\",{\"name\":\"far\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":6},\"end\":{\"line\":5,\"column\":28}}}))\n    + \"&#8203;\\n    </button>\\n  </span>\\n  <div class=\\\"worklist-list__patient-name js-patient\\\">\\n    \"\n    + alias3(alias4(((stack1 = (depth0 != null ? lookupProperty(depth0,\"patient\") : depth0)) != null ? lookupProperty(stack1,\"first_name\") : stack1), depth0))\n    + \" \"\n    + alias3(alias4(((stack1 = (depth0 != null ? lookupProperty(depth0,\"patient\") : depth0)) != null ? lookupProperty(stack1,\"last_name\") : stack1), depth0))\n    + \"&#8203;\\n  </div>\\n</td>\\n<td class=\\\"table-list__cell w-30\\\">\\n  <span class=\\\"worklist-list__flow-icon\\\">\"\n    + alias3((lookupProperty(helpers,\"fas\")||(depth0 && lookupProperty(depth0,\"fas\"))||alias2).call(alias1,\"folder\",{\"name\":\"fas\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":41},\"end\":{\"line\":13,\"column\":57}}}))\n    + \"</span>\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":64},\"end\":{\"line\":13,\"column\":89}}}) : helper)))\n    + \"<div class=\\\"worklist-list__name\\\">\\n    \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"flowName\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":4},\"end\":{\"line\":15,\"column\":85}}})) != null ? stack1 : \"\")\n    + \"&#8203;\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":92},\"end\":{\"line\":15,\"column\":117}}}) : helper)))\n    + alias3(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":4},\"end\":{\"line\":16,\"column\":14}}}) : helper)))\n    + \"&#8203;\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":21},\"end\":{\"line\":16,\"column\":46}}}) : helper)))\n    + \"</div>\\n</td>\\n<td class=\\\"table-list__cell w-40\\\">\\n  <span class=\\\"table-list__meta\\\" data-state-region></span>&#8203;<span class=\\\"worklist-list__search-helper\\\">\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"state\") || (depth0 != null ? lookupProperty(depth0,\"state\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"state\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":108},\"end\":{\"line\":20,\"column\":119}}}) : helper)))\n    + \"</span>&#8203;\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":133},\"end\":{\"line\":20,\"column\":158}}}) : helper)))\n    + \"<span class=\\\"table-list__meta\\\" data-owner-region></span>&#8203;<span class=\\\"worklist-list__search-helper\\\">\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"owner\") || (depth0 != null ? lookupProperty(depth0,\"owner\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"owner\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":108},\"end\":{\"line\":21,\"column\":119}}}) : helper)))\n    + \"</span>&#8203;\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":133},\"end\":{\"line\":21,\"column\":158}}}) : helper)))\n    + \"<progress class=\\\"progress-bar worklist-list__flow-progress\\\" value=\"\n    + alias3(alias4(((stack1 = (depth0 != null ? lookupProperty(depth0,\"_progress\") : depth0)) != null ? lookupProperty(stack1,\"complete\") : stack1), depth0))\n    + \" max=\"\n    + alias3(alias4(((stack1 = (depth0 != null ? lookupProperty(depth0,\"_progress\") : depth0)) != null ? lookupProperty(stack1,\"total\") : stack1), depth0))\n    + \"></progress>&#8203;\"\n    + alias3(((helper = (helper = lookupProperty(helpers,\"remove_whitespace\") || (depth0 != null ? lookupProperty(depth0,\"remove_whitespace\") : depth0)) != null ? helper : alias2),(typeof helper === alias5 ? helper.call(alias1,{\"name\":\"remove_whitespace\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":22,\"column\":137},\"end\":{\"line\":22,\"column\":162}}}) : helper)))\n    + \"</td>\\n<td class=\\\"table-list__cell worklist-list__action-ts w-7-5\\\">\"\n    + alias3((lookupProperty(helpers,\"formatDateTime\")||(depth0 && lookupProperty(depth0,\"formatDateTime\"))||alias2).call(alias1,(depth0 != null ? lookupProperty(depth0,\"created_at\") : depth0),\"TIME_OR_DAY\",{\"name\":\"formatDateTime\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":60},\"end\":{\"line\":24,\"column\":103}}}))\n    + \"&#8203;</td>\\n<td class=\\\"table-list__cell worklist-list__action-ts w-7-5\\\">\"\n    + alias3((lookupProperty(helpers,\"formatDateTime\")||(depth0 && lookupProperty(depth0,\"formatDateTime\"))||alias2).call(alias1,(depth0 != null ? lookupProperty(depth0,\"updated_at\") : depth0),\"TIME_OR_DAY\",{\"name\":\"formatDateTime\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":25,\"column\":60},\"end\":{\"line\":25,\"column\":103}}}))\n    + \"&#8203;</td>\\n\";\n},\"useData\":true});\n          ","import Radio from 'backbone.radio';\nimport hbs from 'handlebars-inline-precompile';\nimport { View } from 'marionette';\n\nimport 'scss/modules/table-list.scss';\nimport 'scss/modules/progress-bar.scss';\n\nimport { CheckComponent, FlowStateComponent, OwnerComponent } from 'js/views/patients/shared/flows_views';\nimport { ReadOnlyStateView, ReadOnlyOwnerView } from 'js/views/patients/shared/read-only_views';\n\nimport FlowItemTemplate from './flow-item.hbs';\n\nimport 'scss/domain/action-state.scss';\nimport './worklist-list.scss';\n\nconst FlowTooltipTemplate = hbs`{{formatMessage (intlGet \"patients.worklist.flowViews.flowListTooltips\") title=worklistId team=owner}}`;\n\nconst FlowEmptyView = View.extend({\n  tagName: 'tr',\n  template: hbs`\n    <td class=\"table-empty-list\">\n      <h2>{{ @intl.patients.worklist.flowViews.flowEmptyView }}</h2>\n    </td>\n  `,\n});\n\nconst FlowItemView = View.extend({\n  className: 'table-list__item work-list__item',\n  tagName: 'tr',\n  template: FlowItemTemplate,\n  regions: {\n    check: '[data-check-region]',\n    state: '[data-state-region]',\n    owner: '[data-owner-region]',\n  },\n  templateContext() {\n    return {\n      patient: this.model.getPatient().attributes,\n      owner: this.model.getOwner().get('name'),\n      state: this.model.getState().get('name'),\n    };\n  },\n  modelEvents: {\n    'change': 'render',\n  },\n  triggers: {\n    'click': 'click',\n    'click .js-patient-sidebar-button': 'click:patientSidebarButton',\n    'click .js-patient': 'click:patient',\n    'click .js-no-click': 'prevent-row-click',\n  },\n  initialize({ state }) {\n    this.state = state;\n\n    this.listenTo(state, {\n      'select:multiple': this.showCheck,\n      'select:none': this.showCheck,\n    });\n  },\n  onClick() {\n    Radio.trigger('event-router', 'flow', this.model.id);\n  },\n  onClickPatient() {\n    Radio.trigger('event-router', 'patient:dashboard', this.model.get('_patient'));\n  },\n  onRender() {\n    const canEdit = this.canEdit;\n    this.canEdit = this.model.canEdit();\n\n    this.showCheck();\n    this.showState();\n    this.showOwner();\n\n    if (canEdit !== this.canEdit) {\n      if (!this.canEdit) this.toggleSelected(false);\n      this.triggerMethod('change:canEdit');\n    }\n  },\n  toggleSelected(isSelected) {\n    this.$el.toggleClass('is-selected', isSelected);\n  },\n  showCheck() {\n    if (!this.canEdit) return;\n\n    const isSelected = this.state.isSelected(this.model);\n    this.toggleSelected(isSelected);\n    const checkComponent = new CheckComponent({ state: { isSelected } });\n\n    this.listenTo(checkComponent, {\n      'select'(domEvent) {\n        this.triggerMethod('select', this, !!domEvent.shiftKey);\n      },\n      'change:isSelected': this.toggleSelected,\n    });\n\n    this.showChildView('check', checkComponent);\n  },\n  showState() {\n    if (!this.model.isDone() || !this.canEdit) {\n      const readOnlyStateView = new ReadOnlyStateView({ model: this.model, isCompact: true });\n      this.showChildView('state', readOnlyStateView);\n      return;\n    }\n\n    const stateComponent = new FlowStateComponent({\n      stateId: this.model.get('_state'),\n      isCompact: true,\n    });\n\n    this.listenTo(stateComponent, 'change:state', state => {\n      this.model.saveState(state);\n    });\n\n    this.showChildView('state', stateComponent);\n  },\n  showOwner() {\n    if (!this.canEdit) {\n      const readOnlyOwnerView = new ReadOnlyOwnerView({ model: this.model, isCompact: true });\n      this.showChildView('owner', readOnlyOwnerView);\n      return;\n    }\n\n    const isDisabled = this.model.isDone();\n    const program = this.model.getProgram();\n    this.ownerComponent = new OwnerComponent({\n      owner: this.model.getOwner(),\n      workspaces: program.getUserWorkspaces(),\n      isCompact: true,\n      state: { isDisabled },\n    });\n\n    this.listenTo(this.ownerComponent, 'change:owner', owner => {\n      this.model.saveOwner(owner);\n    });\n\n    this.showChildView('owner', this.ownerComponent);\n  },\n});\n\nexport {\n  FlowTooltipTemplate,\n  FlowEmptyView,\n  FlowItemView,\n};\n","\n            import HandlebarsRuntime from 'handlebars/runtime';\n            export default HandlebarsRuntime.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"list-page__header\\\">\\n  <div class=\\\"flex list-page__title\\\">\\n    <div data-title-region></div>\\n    <div class=\\\"worklist-list__toggle\\\" data-toggle-region></div>\\n    <div class=\\\"u-margin--l-16\\\" data-search-region></div>\\n  </div>\\n  <div class=\\\"list-page__filters flex\\\">\\n    <div class=\\\"flex u-margin--r-24\\\" data-select-all-region></div>\\n    <div class=\\\"flex flex-align-center w-100\\\" data-filters-region></div>\\n    <div class=\\\"flex\\\">\\n      <span class=\\\"worklist-list__count\\\" data-count-region></span>\\n      <span class=\\\"u-margin--r-16 u-text--nowrap\\\" data-date-filter-region></span>\\n      <span class=\\\"worklist-list__filter-sort\\\" data-sort-region></span>\\n    </div>\\n  </div>\\n  <table class=\\\"worklist__header w-100 js-list-header\\\" data-table-region></table>\\n</div>\\n<div class=\\\"flex-region list-page__list js-list\\\" data-list-region></div>\\n\";\n},\"useData\":true});\n          ","\n            import HandlebarsRuntime from 'handlebars/runtime';\n            export default HandlebarsRuntime.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    \"\n    + container.escapeExpression(container.lambda(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"patients\"))) && lookupProperty(stack1,\"worklist\"))) && lookupProperty(stack1,\"tableHeaderTemplate\"))) && lookupProperty(stack1,\"flowHeader\")), depth0))\n    + \"\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    \"\n    + container.escapeExpression(container.lambda(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"patients\"))) && lookupProperty(stack1,\"worklist\"))) && lookupProperty(stack1,\"tableHeaderTemplate\"))) && lookupProperty(stack1,\"actionHeader\")), depth0))\n    + \"\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    \"\n    + container.escapeExpression(container.lambda(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"patients\"))) && lookupProperty(stack1,\"worklist\"))) && lookupProperty(stack1,\"tableHeaderTemplate\"))) && lookupProperty(stack1,\"flowAttrHeader\")), depth0))\n    + \"\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    \"\n    + container.escapeExpression(container.lambda(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"patients\"))) && lookupProperty(stack1,\"worklist\"))) && lookupProperty(stack1,\"tableHeaderTemplate\"))) && lookupProperty(stack1,\"actionAttrHeader\")), depth0))\n    + \"\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<td class=\\\"table-list__header table-list__item-check\\\"></td>\\n<td class=\\\"table-list__header w-15\\\">\"\n    + alias2(alias1(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"patients\"))) && lookupProperty(stack1,\"worklist\"))) && lookupProperty(stack1,\"tableHeaderTemplate\"))) && lookupProperty(stack1,\"patientHeader\")), depth0))\n    + \"</td>\\n<td class=\\\"table-list__header worklist-list__name-header\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"isFlowList\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":2},\"end\":{\"line\":8,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</td>\\n<td class=\\\"table-list__header worklist-list__meta-header\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"isFlowList\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.program(7, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":2},\"end\":{\"line\":15,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</td>\\n<td class=\\\"table-list__header w-7-5\\\">\"\n    + alias2(alias1(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"patients\"))) && lookupProperty(stack1,\"worklist\"))) && lookupProperty(stack1,\"tableHeaderTemplate\"))) && lookupProperty(stack1,\"createdHeader\")), depth0))\n    + \"</td>\\n<td class=\\\"table-list__header w-7-5\\\">\"\n    + alias2(alias1(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"patients\"))) && lookupProperty(stack1,\"worklist\"))) && lookupProperty(stack1,\"tableHeaderTemplate\"))) && lookupProperty(stack1,\"updatedHeader\")), depth0))\n    + \"</td>\\n\";\n},\"useData\":true});\n          ","import { every, debounce } from 'underscore';\nimport Radio from 'backbone.radio';\nimport hbs from 'handlebars-inline-precompile';\nimport { View, CollectionView } from 'marionette';\n\nimport intl, { renderTemplate } from 'js/i18n';\nimport underscored from 'js/utils/formatting/underscored';\nimport buildMatchersArray from 'js/utils/formatting/build-matchers-array';\n\nimport 'scss/modules/buttons.scss';\nimport 'scss/modules/list-pages.scss';\nimport 'scss/modules/table-list.scss';\n\nimport PreloadRegion from 'js/regions/preload_region';\n\nimport Droplist from 'js/components/droplist';\nimport Tooltip from 'js/components/tooltip';\n\nimport { TitleOwnerDroplist } from 'js/views/patients/shared/list_views';\nimport { ActionTooltipTemplate, ActionEmptyView, ActionItemView } from './action_views';\nimport { FlowTooltipTemplate, FlowEmptyView, FlowItemView } from './flow_views';\nimport LayoutTemplate from './layout.hbs';\nimport TableHeaderTemplate from './table-header.hbs';\n\nimport './worklist-list.scss';\n\nconst i18n = intl.patients.worklist.worklistViews;\n\nconst LayoutView = View.extend({\n  className: 'flex-region',\n  template: LayoutTemplate,\n  regions: {\n    dateFilter: '[data-date-filter-region]',\n    filters: '[data-filters-region]',\n    toggle: '[data-toggle-region]',\n    sort: '[data-sort-region]',\n    table: '[data-table-region]',\n    list: {\n      el: '[data-list-region]',\n      regionClass: PreloadRegion,\n    },\n    selectAll: '[data-select-all-region]',\n    title: {\n      el: '[data-title-region]',\n      replaceElement: true,\n    },\n    search: '[data-search-region]',\n    count: '[data-count-region]',\n  },\n  childViewEvents: {\n    'update:listDom': 'fixWidth',\n  },\n  triggers: {\n    'click @ui.select': 'click:select',\n  },\n  ui: {\n    listHeader: '.js-list-header',\n    list: '.js-list',\n    select: '.js-select',\n  },\n  initialize() {\n    const userActivityCh = Radio.channel('user-activity');\n    this.listenTo(userActivityCh, 'window:resize', this.fixWidth);\n  },\n  fixWidth() {\n    /* istanbul ignore if */\n    if (!this.isRendered()) return;\n\n    const headerWidth = this.ui.listHeader.width();\n    const listWidth = this.ui.list.contents().width();\n    const listPadding = parseInt(this.ui.list.css('paddingRight'), 10);\n    const scrollbarWidth = headerWidth - listWidth;\n\n    this.ui.list.css({ paddingRight: `${ listPadding - scrollbarWidth }px` });\n  },\n});\n\nconst SelectAllView = View.extend({\n  tagName: 'button',\n  className: 'button--checkbox',\n  attributes() {\n    if (this.getOption('isDisabled')) return { disabled: 'disabled' };\n  },\n  triggers: {\n    'click': 'click',\n  },\n  getTemplate() {\n    if (this.getOption('isSelectAll')) return hbs`{{fas \"square-check\"}}`;\n    if (this.getOption('isSelectNone') || this.getOption('isDisabled')) return hbs`{{fal \"square\"}}`;\n\n    return hbs`{{fas \"square-minus\"}}`;\n  },\n});\n\nconst TypeToggleView = View.extend({\n  template: hbs`\n    <button class=\"{{#unless isFlowList}}button--blue{{/unless}} button-filter button__group js-toggle-actions\">{{far \"file-lines\"}}<span>{{ @intl.patients.worklist.worklistViews.typeToggleView.actionsButton }}</span></button>{{~ remove_whitespace ~}}\n    <button class=\"{{#if isFlowList}}button--blue{{/if}} button-filter button__group js-toggle-flows\">{{fas \"folder\"}}<span>{{ @intl.patients.worklist.worklistViews.typeToggleView.flowsButton }}</span></button>\n  `,\n  templateContext() {\n    return {\n      isFlowList: this.getOption('isFlowList'),\n    };\n  },\n  triggers: {\n    'click .js-toggle-actions': 'click:toggleActions',\n    'click .js-toggle-flows': 'click:toggleFlows',\n  },\n  ui: {\n    buttons: 'button',\n  },\n  onClickToggleActions() {\n    this.triggerMethod('toggle:listType', 'actions');\n  },\n  onClickToggleFlows() {\n    this.triggerMethod('toggle:listType', 'flows');\n  },\n});\n\nconst NoOwnerToggleView = View.extend({\n  className: 'u-margin--l-24 u-margin--r-16',\n  template: hbs`\n    <button class=\"button-filter-toggle {{#if noOwner}}button--blue{{/if}}\">\n      {{ @intl.patients.worklist.worklistViews.noOwnerToggleView.noOwner }}{{#if noOwner}}{{far \"xmark\"}}{{/if}}\n    </button>\n  `,\n  triggers: {\n    click: 'click',\n  },\n});\n\nconst worklistIcons = {\n  'owned-by': ['list'],\n  'shared-by': ['arrow-right-arrow-left'],\n  'new-past-day': ['angle-left', '1'],\n  'updated-past-three-days': ['angle-left', '3'],\n  'done-last-thirty-days': ['3', '0'],\n};\n\nconst TitleLabelView = View.extend({\n  className: 'u-text--nowrap',\n  getTemplate() {\n    if (this.getOption('owner')) {\n      return hbs`{{formatMessage (intlGet \"patients.worklist.worklistViews.listTitleLabelView.listTitles\") title=worklistId owner=owner}}`;\n    }\n    return hbs`{{formatMessage (intlGet \"patients.worklist.worklistViews.listTitleLabelView.listLabels\") title=worklistId}}`;\n  },\n  templateContext() {\n    return {\n      owner: this.getOption('owner'),\n      worklistId: underscored(this.getOption('worklistId')),\n    };\n  },\n});\n\nconst ListTitleView = View.extend({\n  regions: {\n    label: '[data-label-region]',\n    owner: '[data-owner-filter-region]',\n    ownerToggle: '[data-owner-toggle-region]',\n  },\n  className: 'flex list-page__title-filter',\n  template: hbs`\n    <span class=\"list-page__title-icon\">\n      {{#each icons}}\n        {{far this}}\n      {{/each}}\n    </span>\n    <div data-label-region></div>\n    <div data-owner-filter-region></div>\n    <span class=\"list-page__header-icon js-title-info\">{{far \"circle-info\"}}</span>\n    <div data-owner-toggle-region></div>\n  `,\n  ui: {\n    tooltip: '.js-title-info',\n  },\n  templateContext() {\n    return {\n      owner: this.owner.get('name'),\n      worklistId: underscored(this.model.id),\n      icons: worklistIcons[this.model.id],\n    };\n  },\n  initialize() {\n    const currentClinician = Radio.request('bootstrap', 'currentUser');\n    this.canViewAssignedActions = currentClinician.can('app:worklist:clinician_filter');\n    this.shouldShowTeam = this.model.id !== 'owned-by';\n    this.shouldShowClinician = this.model.id !== 'shared-by';\n    this.shouldShowDroplist = (this.shouldShowClinician && this.canViewAssignedActions) || this.shouldShowTeam;\n    this.owner = this.model.getOwner();\n  },\n  onRender() {\n    this.showLabel();\n    this.showOwnerDroplist();\n    this.showOwnerToggle();\n\n    const tooltipTemplate = this.model.isFlowType() ? FlowTooltipTemplate : ActionTooltipTemplate;\n    new Tooltip({\n      message: renderTemplate(tooltipTemplate, this.templateContext()),\n      uiView: this,\n      ui: this.ui.tooltip,\n      orientation: 'vertical',\n    });\n  },\n  showLabel() {\n    const titleLabelView = new TitleLabelView({\n      owner: this.shouldShowDroplist ? null : this.owner.get('name'),\n      worklistId: this.model.id,\n    });\n\n    this.showChildView('label', titleLabelView);\n  },\n  showOwnerDroplist() {\n    if (!this.shouldShowDroplist) return;\n\n    const ownerI18n = i18n.titleOwnerDroplist;\n\n    const ownerDroplistView = new TitleOwnerDroplist({\n      owner: this.owner,\n      hasClinicians: this.shouldShowClinician && this.canViewAssignedActions,\n      hasTeams: this.shouldShowTeam,\n      hasCurrentClinician: this.shouldShowClinician,\n      headingText: this.shouldShowClinician ? ownerI18n.ownerFilterHeadingText : ownerI18n.teamsFilterHeadingText,\n      placeholderText: this.shouldShowClinician ? ownerI18n.ownerFilterPlaceholderText : ownerI18n.teamsFilterPlaceholderText,\n    });\n\n    this.listenTo(ownerDroplistView, 'change:owner', owner => {\n      this.triggerMethod('change:owner', owner);\n    });\n\n    this.showChildView('owner', ownerDroplistView);\n  },\n  showOwnerToggle() {\n    if (this.shouldShowClinician || !this.canViewAssignedActions) return;\n\n    const ownerToggleView = new NoOwnerToggleView({\n      model: this.model,\n    });\n\n    this.listenTo(ownerToggleView, 'click', () => {\n      this.triggerMethod('toggle:noOwner');\n    });\n\n    this.showChildView('ownerToggle', ownerToggleView);\n  },\n});\n\nconst AllFiltersButtonView = View.extend({\n  tagName: 'button',\n  className: 'button--link-large',\n  template: hbs`{{far \"sliders\"}}<span>{{ @intl.patients.worklist.worklistViews.allFiltersButtonView.allFiltersButton }}</span> {{#if filtersCount}}({{filtersCount}}){{/if}}`,\n  triggers: {\n    'click': 'click',\n  },\n  modelEvents: {\n    'change:filtersCount': 'render',\n  },\n});\n\nconst TableHeaderView = View.extend({\n  template: TableHeaderTemplate,\n  tagName: 'tr',\n  templateContext() {\n    return {\n      isFlowList: this.getOption('isFlowList'),\n    };\n  },\n});\n\nconst EmptyFindInListView = View.extend({\n  tagName: 'tr',\n  template: hbs`\n    <td class=\"table-empty-list\">\n      <h2>{{ @intl.patients.worklist.worklistViews.emptyFindInListView.noResults }}</h2>\n    </td>\n  `,\n});\n\nconst ListView = CollectionView.extend({\n  className: 'table-list',\n  tagName: 'table',\n  childView() {\n    return this.isFlowList ? FlowItemView : ActionItemView;\n  },\n  emptyView() {\n    if (this.collection.length && this.state.get('searchQuery')) {\n      return EmptyFindInListView;\n    }\n\n    return this.isFlowList ? FlowEmptyView : ActionEmptyView;\n  },\n  childViewOptions() {\n    return {\n      state: this.state,\n    };\n  },\n  childViewTriggers: {\n    'render': 'listItem:render',\n    'change:canEdit': 'listItem:canEdit',\n    'click:patientSidebarButton': 'click:patientSidebarButton',\n    'select': 'select',\n  },\n  onListItemRender(view) {\n    view.searchString = view.$el.text();\n  },\n  onListItemCanEdit() {\n    // NOTE: debounced in initialize\n    this.triggerMethod('change:canEdit');\n  },\n  initialize({ state, editableCollection }) {\n    this.state = state;\n    this.editableCollection = editableCollection;\n    this.isFlowList = state.isFlowType();\n\n    this.onListItemCanEdit = debounce(this.onListItemCanEdit, 60);\n\n    this.listenTo(state, 'change:searchQuery', this.searchList);\n  },\n  onAttach() {\n    this.triggerMethod('update:listDom', this);\n\n    this.searchList(null, this.state.get('searchQuery'));\n  },\n  /* istanbul ignore next: future proof */\n  onRenderChildren() {\n    if (!this.isAttached()) return;\n    this.triggerMethod('update:listDom', this);\n    this.triggerMethod('filtered', this.children.map('model'));\n  },\n  onSelect(selectedView, isShiftKeyPressed) {\n    this.state.selectRange(this.editableCollection, selectedView.model, isShiftKeyPressed);\n  },\n  searchList(state, searchQuery) {\n    if (!searchQuery) {\n      this.removeFilter();\n      return;\n    }\n\n    const matchers = buildMatchersArray(searchQuery);\n\n    this.setFilter(function({ searchString }) {\n      return every(matchers, function(matcher) {\n        return matcher.test(searchString);\n      });\n    });\n  },\n});\n\nconst SortDroplist = Droplist.extend({\n  align: 'right',\n  popWidth: 248,\n  picklistOptions: {\n    headingText: i18n.sortDroplist.headingText,\n  },\n  viewOptions: {\n    className: 'button-filter',\n    template: hbs`{{far \"arrow-down-arrow-up\"}}{{text}}{{far \"angle-down\"}}`,\n  },\n});\n\nexport {\n  LayoutView,\n  ListTitleView,\n  AllFiltersButtonView,\n  SelectAllView,\n  ListView,\n  TableHeaderView,\n  SortDroplist,\n  TypeToggleView,\n  i18n,\n  NoOwnerToggleView,\n};\n","import { get, union, map, uniq, compact } from 'underscore';\nimport Backbone from 'backbone';\nimport Radio from 'backbone.radio';\n\nimport { alphaSort, numSort } from 'js/utils/sorting';\nimport { i18n } from 'js/views/patients/worklist/worklist_views';\n\n// Casts values to String for alpha sort\nfunction getEntityFieldValue(entity, fieldName, keys) {\n  const patientField = entity.getPatient().getField(fieldName);\n  if (!patientField) return null;\n  return get(patientField.getValue(), keys);\n}\n\n// field_key may include a path for the model_attr.deeply_nested.value\nconst SortOption = Backbone.Model.extend({\n  defaults: {\n    direction: 'desc',\n    field_key: 'value',\n    entities: ['actions', 'flows'],\n  },\n  getComparator() {\n    const comparator = this.get('comparator');\n    if (comparator) return comparator.bind(this);\n\n    const fieldName = this.get('field_name');\n    const keys = this.get('field_key').split('.');\n    const direction = this.get('direction');\n    const sortType = this.get('sort_type');\n\n    return (a, b) => {\n      const aValue = getEntityFieldValue(a.model, fieldName, keys);\n      const bValue = getEntityFieldValue(b.model, fieldName, keys);\n\n      if (sortType === 'numeric') {\n        return numSort(direction, aValue, bValue);\n      }\n\n      return alphaSort(direction, aValue, bValue);\n    };\n  },\n});\n\nconst SortOptions = Backbone.Collection.extend({\n  model: SortOption,\n  getByType(entityType) {\n    const clone = this.clone();\n    const filtered = this.filter(option => option.get('entities').includes(entityType));\n    clone.reset(filtered);\n    return clone;\n  },\n  getInclude() {\n    const fieldNames = compact(this.map('field_name'));\n\n    return map(uniq(fieldNames), fieldName => {\n      return `patient.patient-fields.${ fieldName }`;\n    }).join(',');\n  },\n});\n\nconst patientNameComparator = function(a, b) {\n  return alphaSort(this.get('direction'), a.model.getPatient().getSortName(), b.model.getPatient().getSortName());\n};\n\nconst updatedAtComparator = function(a, b) {\n  return alphaSort(this.get('direction'), a.model.get('updated_at'), b.model.get('updated_at'));\n};\n\nconst createdAtComparator = function(a, b) {\n  return alphaSort(this.get('direction'), a.model.get('created_at'), b.model.get('created_at'));\n};\n\nconst defaultSortOptions = [\n  {\n    id: 'sortPatientAsc',\n    text: i18n.sortPatientOptions.asc,\n    direction: 'asc',\n    comparator: patientNameComparator,\n  },\n  {\n    id: 'sortPatientDesc',\n    text: i18n.sortPatientOptions.desc,\n    comparator: patientNameComparator,\n  },\n  {\n    id: 'sortDueAsc',\n    text: i18n.sortDueOptions.asc,\n    entities: ['actions'],\n    direction: 'asc',\n    comparator(a, b) {\n      const dueA = a.model.get('due_date');\n      const dueB = b.model.get('due_date');\n      if (dueA === dueB) {\n        return alphaSort(this.get('direction'), a.model.get('due_time'), b.model.get('due_time'), '24');\n      }\n      return alphaSort(this.get('direction'), dueA, dueB);\n    },\n  },\n  {\n    id: 'sortDueDesc',\n    text: i18n.sortDueOptions.desc,\n    entities: ['actions'],\n    comparator(a, b) {\n      const dueA = a.model.get('due_date');\n      const dueB = b.model.get('due_date');\n      if (dueA === dueB) {\n        return alphaSort(this.get('direction'), a.model.get('due_time'), b.model.get('due_time'));\n      }\n      return alphaSort(this.get('direction'), dueA, dueB);\n    },\n  },\n  {\n    id: 'sortUpdateAsc',\n    text: i18n.sortUpdateOptions.asc,\n    direction: 'asc',\n    comparator: updatedAtComparator,\n  },\n  {\n    id: 'sortUpdateDesc',\n    text: i18n.sortUpdateOptions.desc,\n    comparator: updatedAtComparator,\n  },\n  {\n    id: 'sortCreatedAsc',\n    text: i18n.sortCreatedOptions.asc,\n    direction: 'asc',\n    comparator: createdAtComparator,\n  },\n  {\n    id: 'sortCreatedDesc',\n    text: i18n.sortCreatedOptions.desc,\n    comparator: createdAtComparator,\n  },\n];\n\nfunction getSortOptions(listType) {\n  const customSort = Radio.request('settings', 'get', 'sorting');\n  const sortOpts = new SortOptions(union(defaultSortOptions, customSort));\n\n  return sortOpts.getByType(listType);\n}\n\nexport {\n  getSortOptions,\n};\n","import Radio from 'backbone.radio';\n\nimport intl, { renderTemplate } from 'js/i18n';\n\nimport App from 'js/base/app';\n\nimport StateModel from './worklist_state';\nimport FiltersStateModel from 'js/apps/patients/shared/filters_state';\n\nimport BulkEditActionsApp from 'js/apps/patients/sidebar/bulk-edit-actions_app';\nimport BulkEditFlowsApp from 'js/apps/patients/sidebar/bulk-edit-flows_app';\n\nimport DateFilterComponent from 'js/views/patients/shared/components/date-filter';\nimport SearchComponent from 'js/views/shared/components/list-search';\nimport { CountView } from 'js/views/patients/shared/list_views';\n\nimport { getSortOptions } from './worklist_sort';\n\nimport { ListView, SelectAllView, LayoutView, ListTitleView, TableHeaderView, SortDroplist, TypeToggleView, AllFiltersButtonView } from 'js/views/patients/worklist/worklist_views';\nimport { BulkEditButtonView, BulkEditFlowsSuccessTemplate, BulkEditActionsSuccessTemplate, BulkDeleteFlowsSuccessTemplate, BulkDeleteActionsSuccessTemplate } from 'js/views/patients/shared/bulk-edit/bulk-edit_views';\n\nconst FiltersApp = App.extend({\n  StateModel: FiltersStateModel,\n});\n\nexport default App.extend({\n  StateModel,\n  childApps: {\n    filters: {\n      AppClass: FiltersApp,\n      restartWithParent: false,\n    },\n    bulkEditActions: BulkEditActionsApp,\n    bulkEditFlows: BulkEditFlowsApp,\n  },\n  stateEvents: {\n    'change:listType change:clinicianId change:teamId change:noOwner': 'restart',\n    'change:customFilters change:states change:flowStates': 'restart',\n    'change:actionsDateFilters change:flowsDateFilters': 'restart',\n    'change:actionsSortId change:flowsSortId': 'onChangeStateSort',\n    'change:actionsSelected change:flowsSelected': 'onChangeSelected',\n    'change:searchQuery': 'onChangeSearchQuery',\n  },\n  startFiltersApp({ setDefaults } = {}) {\n    const filtersApp = this.startChildApp('filters', { state: this.getState().getFiltersState() });\n\n    const filterState = filtersApp.getState();\n\n    filtersApp.listenTo(filterState, 'change', () => {\n      this.setState(filterState.getFiltersState());\n    });\n\n    if (setDefaults) filterState.setDefaultFilterStates();\n\n    this.setState(filterState.getFiltersState());\n  },\n  onChangeStateSort() {\n    if (!this.isRunning()) return;\n\n    this.getChildView('list').setComparator(this.getComparator());\n  },\n  onChangeSelected() {\n    this.toggleBulkSelect();\n  },\n  onChangeSearchQuery(state) {\n    this.currentSearchQuery = state.get('searchQuery');\n  },\n  initListState() {\n    const storedState = this.getState().getStore(this.worklistId);\n\n    this.getState().setSearchQuery(this.currentSearchQuery);\n\n    if (storedState) {\n      this.setState(storedState);\n      this.getState().setClinicianId(this.clinicianId);\n      this.startFiltersApp();\n      return;\n    }\n\n    this.setState({ id: this.worklistId });\n\n    this.getState().setClinicianId(this.clinicianId);\n\n    this.startFiltersApp({ setDefaults: true });\n  },\n  onBeforeStop() {\n    this.collection = null;\n    if (!this.isRestarting()) this.stopChildApp('filters');\n  },\n  onBeforeStart({ worklistId, clinicianId }) {\n    if (this.isRestarting()) {\n      const filtersApp = this.getChildApp('filters');\n\n      filtersApp.setState(this.getState().getFiltersState());\n\n      this.getRegion('count').empty();\n\n      this.showTypeViews();\n      this.getRegion('list').startPreloader();\n\n      return;\n    }\n\n    this.worklistId = worklistId;\n    this.clinicianId = clinicianId;\n    this.initListState();\n\n    this.setView(new LayoutView());\n\n    this.showDisabledSelectAll();\n    this.showSearchView();\n    this.showFiltersButtonView();\n\n    this.showTypeViews();\n    this.getRegion('list').startPreloader();\n\n    this.showView();\n  },\n  beforeStart() {\n    const listType = this.getState().getType();\n\n    const data = {\n      filter: this.getState().getEntityFilter(),\n      include: this.sortOptions.getInclude(),\n    };\n\n    if (listType === 'actions') {\n      data.fields = { flows: ['name', 'state'] };\n    }\n\n    return Radio.request('entities', `fetch:${ listType }:collection`, { data });\n  },\n  onStart(options, collection) {\n    this.collection = collection;\n    this.filteredCollection = collection.clone();\n    this.editableCollection = collection.clone();\n\n    this.listenTo(this.filteredCollection, 'reset', this.showCountView);\n    this.showCountView();\n\n    this.listenTo(this.editableCollection, 'reset', this.toggleBulkSelect);\n    this.toggleBulkSelect();\n\n    this.showList();\n  },\n  // NOTE: Shows views dependent on getState().getType()\n  showTypeViews() {\n    this.showListTitle();\n    this.showTypeToggleView();\n    this.showDateFilter();\n    this.showSortDroplist();\n    this.showTableHeaders();\n  },\n  showList() {\n    const collectionView = new ListView({\n      collection: this.collection,\n      editableCollection: this.editableCollection,\n      state: this.getState(),\n      viewComparator: this.getComparator(),\n    });\n\n    this.listenTo(collectionView, {\n      'filtered'(filtered) {\n        this.filteredCollection.reset(filtered);\n        this.editableCollection.reset(this._getListEditable(collectionView));\n      },\n      'change:canEdit'() {\n        this.editableCollection.reset(this._getListEditable(collectionView));\n      },\n      'click:patientSidebarButton'({ model }) {\n        const sidebar = Radio.request('sidebar', 'start', 'patient', { patient: model.getPatient() });\n        collectionView.on('destroy', () => sidebar.stop());\n      },\n    });\n\n    this.showChildView('list', collectionView);\n  },\n  _getListEditable(list) {\n    return list.children.reduce((models, { canEdit, model }) => {\n      if (canEdit) models.push(model);\n      return models;\n    }, []);\n  },\n  showFiltersButtonView() {\n    const filtersApp = this.getChildApp('filters');\n    const filtersState = filtersApp.getState();\n\n    const filtersButtonView = new AllFiltersButtonView({\n      model: filtersState,\n    });\n\n    this.listenTo(filtersButtonView, 'click', () => {\n      Radio.request('sidebar', 'start', 'filters', { filtersState });\n    });\n\n    this.showChildView('filters', filtersButtonView);\n  },\n  toggleBulkSelect() {\n    this.selected = this.getState().getSelected(this.editableCollection);\n\n    this.showSelectAll();\n\n    if (this.selected.length) {\n      this.showBulkEditButtonView();\n      return;\n    }\n\n    this.showFiltersButtonView();\n  },\n  showBulkEditButtonView() {\n    const bulkEditButtonView = new BulkEditButtonView({\n      isFlowType: this.getState().isFlowType(),\n      collection: this.selected,\n    });\n\n    this.listenTo(bulkEditButtonView, {\n      'click:cancel': this.onClickBulkCancel,\n      'click:edit': this.onClickBulkEdit,\n    });\n\n    this.showChildView('filters', bulkEditButtonView);\n  },\n  onClickBulkCancel() {\n    this.getState().clearSelected();\n  },\n  onClickBulkEdit() {\n    const appName = this.getState().isFlowType() ? 'bulkEditFlows' : 'bulkEditActions';\n\n    const app = this.startChildApp(appName, {\n      state: { collection: this.selected },\n    });\n\n    this.listenTo(app, {\n      'applyOwner'(owner) {\n        this.selected.applyOwner(owner);\n      },\n      'save'(saveData) {\n        const itemCount = this.selected.length;\n\n        this.selected.save(saveData)\n          .then(() => {\n            this.showUpdateSuccess(itemCount);\n            app.stop();\n            this.getState().clearSelected();\n          })\n          .catch(() => {\n            Radio.request('alert', 'show:error', intl.patients.worklist.worklistApp.bulkEditFailure);\n            this.getState().clearSelected();\n            this.restart();\n          });\n      },\n      'delete'() {\n        const itemCount = this.selected.length;\n\n        this.selected.destroy()\n          .then(() => {\n            this.showDeleteSuccess(itemCount);\n            app.stop();\n            this.getState().clearSelected();\n          });\n      },\n    });\n  },\n  showDeleteSuccess(itemCount) {\n    if (this.getState().isFlowType()) {\n      Radio.request('alert', 'show:success', renderTemplate(BulkDeleteFlowsSuccessTemplate, { itemCount }));\n      return;\n    }\n\n    Radio.request('alert', 'show:success', renderTemplate(BulkDeleteActionsSuccessTemplate, { itemCount }));\n  },\n  showUpdateSuccess(itemCount) {\n    if (this.getState().isFlowType()) {\n      Radio.request('alert', 'show:success', renderTemplate(BulkEditFlowsSuccessTemplate, { itemCount }));\n      return;\n    }\n\n    Radio.request('alert', 'show:success', renderTemplate(BulkEditActionsSuccessTemplate, { itemCount }));\n  },\n  showDisabledSelectAll() {\n    this.showChildView('selectAll', new SelectAllView({ isDisabled: true }));\n  },\n  showSelectAll() {\n    if (!this.editableCollection.length) {\n      this.showDisabledSelectAll();\n      return;\n    }\n\n    const selectAllView = new SelectAllView({\n      isSelectAll: this.selected.length === this.editableCollection.length,\n      isSelectNone: !this.selected.length,\n    });\n\n    this.listenTo(selectAllView, 'click', this.onClickBulkSelect);\n\n    this.showChildView('selectAll', selectAllView);\n  },\n  onClickBulkSelect() {\n    if (this.selected.length === this.editableCollection.length) {\n      this.getState().clearSelected();\n      return;\n    }\n\n    this.getState().selectMultiple(this.editableCollection.map('id'));\n  },\n  getSortOption(sortId) {\n    const opt = this.sortOptions.get(sortId);\n\n    if (!opt) {\n      const stateDefaults = this.getState().defaults();\n      const defaultSortId = stateDefaults[`${ this.getState().getType() }SortId`];\n\n      return this.sortOptions.get(defaultSortId);\n    }\n\n    return opt;\n  },\n  getComparator() {\n    const sortId = this.getState().getSort();\n    return this.getSortOption(sortId).getComparator();\n  },\n  showCountView() {\n    const countView = new CountView({\n      isFlowList: this.getState().isFlowType(),\n      collection: this.collection,\n      filteredCollection: this.filteredCollection,\n    });\n\n    this.showChildView('count', countView);\n  },\n  showDateFilter() {\n    if (this.getState().getStaticDateFilter()) return;\n\n    const dateTypes = this.getState().isFlowType() ? ['created_at', 'updated_at'] : ['created_at', 'updated_at', 'due_date'];\n\n    const dateFilterComponent = new DateFilterComponent({\n      dateTypes,\n      state: this.getState().getDateFilters(),\n    });\n\n    this.listenTo(dateFilterComponent.getState(), 'change', ({ attributes }) => {\n      this.getState().setDateFilters(attributes);\n    });\n\n    this.showChildView('dateFilter', dateFilterComponent);\n  },\n  showSortDroplist() {\n    this.sortOptions = getSortOptions(this.getState().getType());\n\n    const sortSelect = new SortDroplist({\n      collection: this.sortOptions,\n      state: { selected: this.getSortOption(this.getState().getSort()) },\n    });\n\n    this.listenTo(sortSelect.getState(), 'change:selected', (state, selected) => {\n      this.getState().setSort(selected.id);\n    });\n\n    this.showChildView('sort', sortSelect);\n  },\n  showTableHeaders() {\n    const tableHeadersView = new TableHeaderView({\n      isFlowList: this.getState().isFlowType(),\n    });\n\n    this.showChildView('table', tableHeadersView);\n  },\n  showListTitle() {\n    const listTitleView = new ListTitleView({ model: this.getState() });\n\n    this.listenTo(listTitleView, {\n      'change:owner'({ id, type }) {\n        if (type === 'teams') {\n          this.setState({ teamId: id, clinicianId: null });\n        } else {\n          this.setState({ clinicianId: id, teamId: null });\n        }\n      },\n      'toggle:noOwner'() {\n        this.toggleState('noOwner');\n      },\n    });\n\n    this.showChildView('title', listTitleView);\n  },\n  showTypeToggleView() {\n    const typeToggleView = new TypeToggleView({\n      isFlowList: this.getState().isFlowType(),\n    });\n\n    this.listenTo(typeToggleView, 'toggle:listType', listType => {\n      this.getState().setType(listType);\n    });\n\n    this.showChildView('toggle', typeToggleView);\n  },\n  showSearchView() {\n    const searchComponent = new SearchComponent({\n      state: {\n        query: this.getState('searchQuery'),\n      },\n    });\n\n    this.listenTo(searchComponent.getState(), 'change:query', (state, searchQuery) => {\n      this.getState().setSearchQuery(searchQuery);\n    });\n\n    this.showChildView('search', searchComponent);\n  },\n});\n","import { clone, extend, omit, reduce } from 'underscore';\nimport dayjs from 'dayjs';\nimport store from 'store';\nimport { NIL as NIL_UUID } from 'uuid';\n\nimport Backbone from 'backbone';\nimport Radio from 'backbone.radio';\n\nimport MultiselectStateMixin from 'js/mixins/multiselect-state_mixin';\n\nimport { RELATIVE_DATE_RANGES } from 'js/static';\n\nconst relativeRanges = new Backbone.Collection(RELATIVE_DATE_RANGES);\n\nconst STATE_VERSION = 'v6';\n\nconst StateModel = Backbone.Model.extend({\n  defaults() {\n    return {\n      clinicianId: this.currentClinician.id,\n      dateFilters: {\n        dateType: 'due_date',\n        selectedDate: null,\n        selectedMonth: null,\n        selectedWeek: null,\n        relativeDate: null,\n      },\n      lastSelectedIndex: null,\n      actionsSelected: {},\n      searchQuery: '',\n    };\n  },\n  getFiltersState() {\n    return {\n      customFilters: this.get('customFilters'),\n      states: this.get('states'),\n      flowStates: this.get('flowStates'),\n      listType: this.getType(),\n    };\n  },\n  preinitialize() {\n    this.currentClinician = Radio.request('bootstrap', 'currentUser');\n    this.currentWorkspace = Radio.request('workspace', 'current');\n  },\n  initialize() {\n    this.on('change', this.onChange);\n  },\n  getStoreKey() {\n    return `schedule_${ this.currentClinician.id }_${ this.currentWorkspace.id }-${ STATE_VERSION }`;\n  },\n  getStore() {\n    return store.get(this.getStoreKey());\n  },\n  onChange() {\n    store.set(this.getStoreKey(), omit(this.attributes, 'filtersCount', 'lastSelectedIndex', 'searchQuery'));\n  },\n  setSearchQuery(searchQuery = '') {\n    return this.set({\n      searchQuery: searchQuery.length > 2 ? searchQuery : '',\n      lastSelectedIndex: null,\n    });\n  },\n  getType() {\n    return 'actions';\n  },\n  setDateFilters(filters) {\n    this.set('dateFilters', clone(filters));\n  },\n  getDateFilters() {\n    return clone(this.get('dateFilters'));\n  },\n  formatDateRange(date, rangeType) {\n    const dateFormat = 'YYYY-MM-DD';\n    return `${ dayjs(date).startOf(rangeType).format(dateFormat) },${ dayjs(date).endOf(rangeType).format(dateFormat) }`;\n  },\n  getDateRange({ selectedDate, selectedMonth, selectedWeek, relativeDate }) {\n    if (selectedDate) return this.formatDateRange(selectedDate, 'day');\n\n    if (selectedMonth) return this.formatDateRange(selectedMonth, 'month');\n\n    if (selectedWeek) return this.formatDateRange(selectedWeek, 'week');\n\n    relativeDate = relativeDate || 'thismonth';\n    const { prev, unit } = relativeRanges.get(relativeDate).pick('prev', 'unit');\n    const relativeRange = dayjs().subtract(prev, unit);\n\n    return this.formatDateRange(relativeRange, unit);\n  },\n  getEntityDateFilter() {\n    const dateFilters = this.getDateFilters();\n    if (dateFilters.relativeDate === 'alltime') return {};\n\n    return {\n      due_date: this.getDateRange(dateFilters),\n    };\n  },\n  getEntityStatesFilter() {\n    return {\n      'state': this.get('states').join() || NIL_UUID,\n      'flow.state': this.get('flowStates').join() || NIL_UUID,\n    };\n  },\n  getOwner() {\n    const clinician = this.get('clinicianId');\n\n    return Radio.request('entities', 'clinicians:model', clinician);\n  },\n  getEntityOwnerFilter() {\n    const clinician = this.get('clinicianId');\n\n    return { clinician };\n  },\n  getEntityCustomFilter() {\n    const filtersState = this.get('customFilters');\n    return reduce(filtersState, (filters, selected, slug) => {\n      if (selected !== null) filters[`@${ slug }`] = selected;\n\n      return filters;\n    }, {});\n  },\n  getEntityFilter() {\n    const filters = {};\n\n    extend(filters, this.getEntityDateFilter());\n    extend(filters, this.getEntityStatesFilter());\n    extend(filters, this.getEntityOwnerFilter());\n    extend(filters, this.getEntityCustomFilter());\n\n    return filters;\n  },\n});\n\nextend(StateModel.prototype, MultiselectStateMixin);\n\nexport default StateModel;\n","import Radio from 'backbone.radio';\n\nimport App from 'js/base/app';\n\nimport intl, { renderTemplate } from 'js/i18n';\n\nimport StateModel from './schedule_state';\nimport FiltersStateModel from 'js/apps/patients/shared/filters_state';\n\nimport BulkEditActionsApp from 'js/apps/patients/sidebar/bulk-edit-actions_app';\n\nimport DateFilterComponent from 'js/views/patients/shared/components/date-filter';\nimport SearchComponent from 'js/views/shared/components/list-search';\n\nimport { CountView } from 'js/views/patients/shared/list_views';\n\nimport { LayoutView, ScheduleTitleView, TableHeaderView, SelectAllView, ScheduleListView, AllFiltersButtonView } from 'js/views/patients/schedule/schedule_views';\nimport { BulkEditButtonView, BulkEditActionsSuccessTemplate, BulkDeleteActionsSuccessTemplate } from 'js/views/patients/shared/bulk-edit/bulk-edit_views';\n\nconst FiltersApp = App.extend({\n  StateModel: FiltersStateModel,\n});\n\nexport default App.extend({\n  StateModel,\n  childApps: {\n    filters: {\n      AppClass: FiltersApp,\n      restartWithParent: false,\n    },\n    bulkEditActions: BulkEditActionsApp,\n  },\n  stateEvents: {\n    'change:clinicianId change:dateFilters change:customFilters change:states change:flowStates': 'restart',\n    'change:actionsSelected': 'onChangeSelected',\n    'change:searchQuery': 'onChangeSearchQuery',\n  },\n  startFiltersApp({ setDefaults } = {}) {\n    const filtersApp = this.startChildApp('filters', { state: this.getState().getFiltersState() });\n\n    const filterState = filtersApp.getState();\n\n    filtersApp.listenTo(filterState, 'change', () => {\n      this.setState(filterState.getFiltersState());\n    });\n\n    if (setDefaults) filterState.setDefaultFilterStates();\n\n    this.setState(filterState.getFiltersState());\n  },\n  onChangeSelected() {\n    this.toggleBulkSelect();\n  },\n  onChangeSearchQuery(state) {\n    this.currentSearchQuery = state.get('searchQuery');\n  },\n  initListState() {\n    const storedState = this.getState().getStore();\n\n    this.getState().setSearchQuery(this.currentSearchQuery);\n\n    if (storedState) {\n      this.setState(storedState);\n      this.startFiltersApp();\n      return;\n    }\n\n    const currentUser = Radio.request('bootstrap', 'currentUser');\n    this.setState({ id: `schedule_${ currentUser.id }` });\n\n    this.startFiltersApp({ setDefaults: true });\n  },\n  onBeforeStop() {\n    this.collection = null;\n    if (!this.isRestarting()) this.stopChildApp('filters');\n  },\n  onBeforeStart() {\n    if (this.isRestarting()) {\n      const filtersApp = this.getChildApp('filters');\n\n      filtersApp.setState(this.getState().getFiltersState());\n\n      this.getRegion('count').empty();\n\n      this.getRegion('list').startPreloader();\n\n      return;\n    }\n\n    this.initListState();\n\n    this.setView(new LayoutView({\n      isReduced: this.getState('isReduced'),\n    }));\n\n    this.showDisabledSelectAll();\n    this.showSearchView();\n    this.showTableHeaders();\n    this.showScheduleTitle();\n    this.showDateFilter();\n    this.showFiltersButtonView();\n\n    this.getRegion('list').startPreloader();\n\n    this.showView();\n  },\n  beforeStart() {\n    const filter = this.getState().getEntityFilter();\n    const fields = { flows: ['name', 'state'] };\n    return Radio.request('entities', 'fetch:actions:collection', { data: { filter, fields } });\n  },\n  onStart(options, collection) {\n    this.collection = collection;\n    this.filteredCollection = collection.clone();\n    this.editableCollection = collection.clone();\n\n    this.listenTo(this.filteredCollection, 'reset', this.showCountView);\n    this.showCountView();\n\n    this.listenTo(this.editableCollection, 'reset', this.toggleBulkSelect);\n    this.toggleBulkSelect();\n\n    this.showList();\n  },\n  showList() {\n    const scheduleListView = new ScheduleListView({\n      collection: this.collection.groupByDate(),\n      editableCollection: this.editableCollection,\n      state: this.getState(),\n    });\n\n    this.listenTo(scheduleListView, {\n      'filtered'(filtered) {\n        this.filteredCollection.reset(filtered);\n        this.editableCollection.reset(this._getListEditable(scheduleListView));\n      },\n      'change:canEdit'() {\n        this.editableCollection.reset(this._getListEditable(scheduleListView));\n      },\n    });\n\n    this.showChildView('list', scheduleListView);\n  },\n  _getListEditable(list) {\n    return list.children.reduce((allModels, dayView) => {\n      return dayView.children.reduce((models, { canEdit, model }) => {\n        if (canEdit) models.push(model);\n        return models;\n      }, allModels);\n    }, []);\n  },\n  showFiltersButtonView() {\n    const filtersApp = this.getChildApp('filters');\n    const filtersState = filtersApp.getState();\n\n    const filtersButtonView = new AllFiltersButtonView({\n      model: filtersState,\n    });\n\n    this.listenTo(filtersButtonView, 'click', () => {\n      Radio.request('sidebar', 'start', 'filters', { filtersState });\n    });\n\n    this.showChildView('filters', filtersButtonView);\n  },\n  toggleBulkSelect() {\n    this.selected = this.getState().getSelected(this.editableCollection);\n\n    this.showSelectAll();\n\n    if (this.selected.length) {\n      this.showBulkEditButtonView();\n      return;\n    }\n\n    this.showFiltersButtonView();\n  },\n  showBulkEditButtonView() {\n    const bulkEditButtonView = new BulkEditButtonView({\n      collection: this.selected,\n    });\n\n    this.listenTo(bulkEditButtonView, {\n      'click:cancel': this.onClickBulkCancel,\n      'click:edit': this.onClickBulkEdit,\n    });\n\n    this.showChildView('filters', bulkEditButtonView);\n  },\n  onClickBulkCancel() {\n    this.getState().clearSelected();\n  },\n  onClickBulkEdit() {\n    const app = this.startChildApp('bulkEditActions', {\n      state: { collection: this.selected },\n    });\n\n    this.listenTo(app, {\n      'save'(saveData) {\n        const itemCount = this.selected.length;\n\n        this.selected.save(saveData)\n          .then(() => {\n            Radio.request('alert', 'show:success', renderTemplate(BulkEditActionsSuccessTemplate, { itemCount }));\n            app.stop();\n\n            if (saveData.due_date && this.selected.some(action => action.changed.due_date)) {\n              this.getState().clearSelected();\n              this.restart();\n              return;\n            }\n\n            this.getState().clearSelected();\n          })\n          .catch(() => {\n            Radio.request('alert', 'show:error', intl.patients.schedule.scheduleApp.bulkEditFailure);\n            this.getState().clearSelected();\n            this.restart();\n          });\n      },\n      'delete'() {\n        const itemCount = this.selected.length;\n\n        this.selected.destroy().then(() => {\n          Radio.request('alert', 'show:success', renderTemplate(BulkDeleteActionsSuccessTemplate, { itemCount }));\n          app.stop();\n          this.getState().clearSelected();\n          this.showList();\n        });\n      },\n    });\n  },\n  showDisabledSelectAll() {\n    this.showChildView('selectAll', new SelectAllView({ isDisabled: true }));\n  },\n  showSelectAll() {\n    if (!this.editableCollection.length) {\n      this.showDisabledSelectAll();\n      return;\n    }\n\n    const selectAllView = new SelectAllView({\n      isSelectAll: this.selected.length === this.editableCollection.length,\n      isSelectNone: !this.selected.length,\n    });\n\n    this.listenTo(selectAllView, 'click', this.onClickBulkSelect);\n\n    this.showChildView('selectAll', selectAllView);\n  },\n  onClickBulkSelect() {\n    if (this.selected.length === this.editableCollection.length) {\n      this.getState().clearSelected();\n      return;\n    }\n\n    this.getState().selectMultiple(this.editableCollection.map('id'));\n  },\n  showCountView() {\n    const countView = new CountView({\n      collection: this.collection,\n      filteredCollection: this.filteredCollection,\n    });\n\n    this.showChildView('count', countView);\n  },\n  showDateFilter() {\n    const dateTypes = ['due_date'];\n\n    const dateFilterComponent = new DateFilterComponent({\n      dateTypes,\n      state: this.getState().getDateFilters(),\n    });\n\n    this.listenTo(dateFilterComponent.getState(), 'change', ({ attributes }) => {\n      this.getState().setDateFilters(attributes);\n    });\n\n    this.showChildView('dateFilter', dateFilterComponent);\n  },\n  showTableHeaders() {\n    const tableHeadersView = new TableHeaderView();\n\n    this.showChildView('table', tableHeadersView);\n  },\n  showScheduleTitle() {\n    const scheduleTitleView = new ScheduleTitleView({ model: this.getState() });\n\n    this.listenTo(scheduleTitleView, 'change:owner', ({ id }) => {\n      this.setState({ clinicianId: id });\n    });\n\n    this.showChildView('title', scheduleTitleView);\n  },\n  showSearchView() {\n    const searchComponent = new SearchComponent({\n      state: {\n        query: this.getState('searchQuery'),\n      },\n    });\n\n    this.listenTo(searchComponent.getState(), 'change:query', (state, searchQuery) => {\n      this.getState().setSearchQuery(searchQuery);\n    });\n\n    this.showChildView('search', searchComponent);\n  },\n});\n","import Radio from 'backbone.radio';\n\nimport RouterApp from 'js/base/routerapp';\n\nimport FlowApp from 'js/apps/patients/patient/flow/flow_app';\nimport PatientApp from 'js/apps/patients/patient/patient_app';\nimport WorklistApp from 'js/apps/patients/worklist/worklist_app';\nimport ScheduleApp from 'js/apps/patients/schedule/schedule_app';\n\nexport default RouterApp.extend({\n  routerAppName: 'PatientsApp',\n\n  childApps: {\n    flow: FlowApp,\n    patient: PatientApp,\n    ownedBy: WorklistApp,\n    forTeam: WorklistApp,\n    newPastDay: WorklistApp,\n    pastThree: WorklistApp,\n    lastThirty: WorklistApp,\n    schedule: ScheduleApp,\n  },\n\n  eventRoutes: {\n    'worklist': {\n      action: 'showPatientsWorklist',\n      route: 'worklist/:id',\n      isList: true,\n    },\n    'patient:dashboard': {\n      action: 'showPatient',\n      route: 'patient/dashboard/:id',\n    },\n    'patient:archive': {\n      action: 'showPatient',\n      route: 'patient/archive/:id',\n    },\n    'patient:action': {\n      action: 'showPatient',\n      route: 'patient/:id/action/:id',\n    },\n    'flow': {\n      action: 'showFlow',\n      route: 'flow/:id',\n    },\n    'flow:action': {\n      action: 'showFlow',\n      route: 'flow/:id/action/:id',\n    },\n    'schedule': {\n      action: 'showSchedule',\n      route: 'schedule',\n      isList: true,\n    },\n  },\n\n  showPatient(patientId) {\n    this.startRoute('patient', { patientId });\n  },\n\n  showPatientsWorklist(worklistId, clinicianId) {\n    const worklistsById = {\n      'owned-by': 'ownedBy',\n      'shared-by': 'forTeam',\n      'new-past-day': 'newPastDay',\n      'updated-past-three-days': 'pastThree',\n      'done-last-thirty-days': 'lastThirty',\n    };\n\n    if (!worklistsById[worklistId]) {\n      Radio.trigger('event-router', 'notFound');\n      return;\n    }\n\n    this.startCurrent(worklistsById[worklistId], { worklistId, clinicianId });\n  },\n\n  showFlow(flowId) {\n    this.startRoute('flow', { flowId });\n  },\n\n  showSchedule() {\n    this.startCurrent('schedule');\n  },\n});\n"],"names":["relativeRanges","Backbone","RELATIVE_DATE_RANGES","STATE_VERSION","StateModel","Radio","id","store","omit","clinicianId","searchQuery","listType","sortId","filters","clone","dateType","date","rangeType","dateFormat","dayjs","selectedDate","selectedMonth","selectedWeek","relativeDate","prev","unit","relativeRange","staticDateFilter","dateFilters","state","NIL_UUID","clinician","team","noOwner","canFilterClinicians","filtersState","reduce","selected","slug","extend","MultiselectStateMixin","StateModel$5","collection","initModel","stateId","stateMulti","item","owner","program","ownerMulti","differentOwners","differentPrograms","stateChanged","ownerChanged","saveData","pick","BulkEditFlowsApp","App","headerView","BulkEditFlowsHeaderView","bodyView","BulkEditFlowsBodyView","partial","TypeView","View","_Handlebars2","container","depth0","helpers","partials","data","alias1","alias2","lookupProperty","parent","propertyName","FilterTypeView","CollectionView","model","DateTemplate","alias3","MonthTemplate","WeekTemplate","RelativeTemplate","DefaultTemplate","stack1","ControllerView","helper","alias4","tooltipMessages","Tooltip","ts","prevWeek","nextWeek","ActionsView","alias5","LayoutView","DateRanges","Picklist","relativeSets","StateModel$2","dateTypes","DateFilterPickerComponent","Datepicker","actionsView","noop","DateFilterComponent","Component","collectionOf","position","selectedRange","dateRanges","datePicker","month","ActionItemTemplate","HandlebarsRuntime","ActionTooltipTemplate","ActionEmptyView","ActionItemView","canEdit","isSelected","checkComponent","CheckComponent","domEvent","readOnlyStateView","ReadOnlyStateView","StateComponent","readOnlyOwnerView","ReadOnlyOwnerView","isDisabled","OwnerComponent","ReadOnlyDueDateView","DueComponent","ReadOnlyDueTimeView","TimeComponent","time","FormButton","DetailsTooltip","FlowItemTemplate","FlowTooltipTemplate","FlowEmptyView","FlowItemView","stateComponent","FlowStateComponent","TableHeaderTemplate","i18n","intl","LayoutTemplate","PreloadRegion","userActivityCh","headerWidth","listWidth","listPadding","scrollbarWidth","SelectAllView","TypeToggleView","NoOwnerToggleView","worklistIcons","TitleLabelView","underscored","ListTitleView","currentClinician","tooltipTemplate","renderTemplate","titleLabelView","ownerI18n","ownerDroplistView","TitleOwnerDroplist","ownerToggleView","AllFiltersButtonView","TableHeaderView","EmptyFindInListView","ListView","view","editableCollection","debounce","selectedView","isShiftKeyPressed","matchers","buildMatchersArray","searchString","every","matcher","SortDroplist","Droplist","getEntityFieldValue","entity","fieldName","keys","patientField","get","SortOption","comparator","direction","sortType","a","b","aValue","bValue","numSort","alphaSort","SortOptions","entityType","filtered","option","fieldNames","compact","map","uniq","patientNameComparator","updatedAtComparator","createdAtComparator","defaultSortOptions","dueA","dueB","getSortOptions","customSort","union","FiltersApp","FiltersStateModel","WorklistApp","BulkEditActionsApp","setDefaults","filtersApp","filterState","storedState","worklistId","options","collectionView","sidebar","list","models","filtersButtonView","bulkEditButtonView","BulkEditButtonView","appName","app","itemCount","BulkDeleteFlowsSuccessTemplate","BulkDeleteActionsSuccessTemplate","BulkEditFlowsSuccessTemplate","BulkEditActionsSuccessTemplate","selectAllView","opt","defaultSortId","countView","CountView","dateFilterComponent","attributes","sortSelect","tableHeadersView","listTitleView","type","typeToggleView","searchComponent","SearchComponent","StateModel$1","ScheduleApp","currentUser","filter","fields","scheduleListView","ScheduleListView","allModels","dayView","action","scheduleTitleView","ScheduleTitleView","patientsMain_app","RouterApp","FlowApp","PatientApp","patientId","worklistsById","flowId"],"mappings":"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"}