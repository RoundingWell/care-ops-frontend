{"version":3,"mappings":";ujCAAe,SAAS,cAAe,CACrC,MAAMA,EAAM,SAAS,gBACrBA,EAAI,aAAa,iBAAkB,UAAU,SAAS,EACtDA,EAAI,aAAa,gBAAiB,UAAU,QAAQ,CACtD,CCCA,MAAM,WAAa,KAAK,OAAO,CAC7B,UAAW,aACX,YAAa,OAAO,OAAO,CACzB,eAAgB,EACpB,CAAG,EACD,QAAS,CACP,SAAU,yBACV,YAAa,6BACb,QAAS,uBACV,EACD,SAAU,aAAa,SAAS,CAC9B,EAAK,SAAUC,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,IAAIC,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC/E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGpC,EACM,MAAO,gCAAoCP,EAAU,kBAAkBK,EAAeH,EAAS,gBAAgB,GAAKD,GAAUI,EAAeJ,EAAQ,gBAAgB,GAAKD,EAAU,MAAM,eAAe,KAAKC,IAA0BD,EAAU,aAAe,IAAIC,EAAQ,KAAM,CACjR,KAAQ,iBACR,KAAQ,CAAE,EACV,KAAQG,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,CAAC,EAAI,QACP,EACD,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUJ,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,IAAII,EACFH,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,MAAO;AAAA;AAAA;AAAA,UAA+FC,EAASH,EAAeH,EAAS,MAAM,EAAE,KAAKD,IAA0BD,EAAU,aAAe,CAAE,GAAEC,GAAU,KAAOI,EAAeJ,EAAQ,WAAW,EAAIA,EAAQ,CACxQ,KAAQ,OACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,KAAM,KAAOI,EAAS,IAAM;AAAA;AAAA;AAAA;AAAA,GAC9B,EACD,QAAW,EACf,CAAG,EACD,iBAAkB,CAIhB,MAAO,CACL,UAJgB,MAAM,EAAGC,GAClB,MAAO,EAAC,QAAQA,CAAK,CAC7B,CAGL,CACG,CACH,CAAC,EACK,YAAc,KAAK,OAAO,CAC9B,SAAU,aAAa,SAAS,CAC9B,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUT,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,IAAII,EACFE,EACAC,EAASX,EAAU,OACnBY,EAASZ,EAAU,iBACnBa,EAASZ,IAA0BD,EAAU,aAAe,CAAE,GAC9Dc,EAASd,EAAU,MAAM,cACzBe,EAAS,WACTV,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,MAAO;AAAA,kDAAyDK,EAAOD,GAAQH,GAAUA,GAAUA,EAASJ,GAAQC,EAAeD,EAAM,MAAM,IAAMC,EAAeG,EAAQ,YAAY,IAAMH,EAAeG,EAAQ,YAAY,IAAMH,EAAeG,EAAQ,OAAO,EAAGP,CAAM,CAAC,EAAI,YAAcW,GAAQF,GAAUA,EAASL,EAAeH,EAAS,mBAAmB,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,mBAAmB,EAAIA,KAAY,KAAOS,EAASI,EAAQ,OAAOJ,IAAWK,EAASL,EAAO,KAAKG,EAAQ,CAC7f,KAAQ,oBACR,KAAQ,CAAE,EACV,KAAQT,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,GACX,CACF,CACF,GAAIM,EAAM,EAAK,kDAAsDE,EAAOD,GAAQH,GAAUA,GAAUA,EAASJ,GAAQC,EAAeD,EAAM,MAAM,IAAMC,EAAeG,EAAQ,YAAY,IAAMH,EAAeG,EAAQ,YAAY,IAAMH,EAAeG,EAAQ,UAAU,EAAGP,CAAM,CAAC,EAAI,YAAcW,GAAQF,GAAUA,EAASL,EAAeH,EAAS,mBAAmB,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,mBAAmB,EAAIA,KAAY,KAAOS,EAASI,EAAQ,OAAOJ,IAAWK,EAASL,EAAO,KAAKG,EAAQ,CACtgB,KAAQ,oBACR,KAAQ,CAAE,EACV,KAAQT,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,GACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,GACX,CACF,CACF,GAAIM,EAAQ,EAAG,+CAAmDE,EAAOD,GAAQH,GAAUA,GAAUA,EAASJ,GAAQC,EAAeD,EAAM,MAAM,IAAMC,EAAeG,EAAQ,YAAY,IAAMH,EAAeG,EAAQ,YAAY,IAAMH,EAAeG,EAAQ,OAAO,EAAGP,CAAM,CAAC,EAAI;AAAA,GACvR,EACD,QAAW,EACf,CAAG,EACD,SAAU,CACR,kBAAmB,cACnB,qBAAsB,iBACtB,kBAAmB,aACpB,CACH,CAAC,EACK,gBAAkB,KAAK,OAAO,CAClC,UAAW,qBACX,SAAU,CACR,iBAAkB,kBAClB,iBAAkB,kBAClB,kBAAmB,aACpB,EACD,SAAU,aAAa,SAAS,CAC9B,EAAK,SAAUD,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,MAAO,oCACR,EACD,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUJ,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,IAAII,EACFG,EAASV,IAA0BD,EAAU,aAAe,CAAE,GAC9DY,EAASZ,EAAU,MAAM,cACzBa,EAASb,EAAU,iBACnBK,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,MAAO;AAAA;AAAA,gCAAiFM,GAAQR,EAAeH,EAAS,KAAK,GAAKD,GAAUI,EAAeJ,EAAQ,KAAK,GAAKW,GAAQ,KAAKD,EAAQ,aAAc,CAC9M,KAAQ,MACR,KAAQ,CAAE,EACV,KAAQP,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,EAAC,EAAI,IAAMS,GAAQR,EAAeH,EAAS,gBAAgB,GAAKD,GAAUI,EAAeJ,EAAQ,gBAAgB,GAAKW,GAAQ,KAAKD,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,WAAW,EAAIA,EAAQ,MAAO,CAChN,KAAQ,iBACR,KAAQ,CAAE,EACV,KAAQG,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,CAAC,EAAI;AAAA,gBAA8BI,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,gBAAgB,EAAIA,EAAQ,CAC1J,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,KAAM,KAAOI,EAAS,IAAM,IAAMK,GAAQR,EAAeH,EAAS,gBAAgB,GAAKD,GAAUI,EAAeJ,EAAQ,gBAAgB,GAAKW,GAAQ,KAAKD,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,cAAc,EAAIA,EAAQ,WAAY,CAC/O,KAAQ,iBACR,KAAQ,CAAE,EACV,KAAQG,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,GACX,CACF,CACF,EAAC,EAAI;AAAA,gCAA8CS,GAAQR,EAAeH,EAAS,gBAAgB,GAAKD,GAAUI,EAAeJ,EAAQ,gBAAgB,GAAKW,GAAQ,KAAKD,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,WAAW,EAAIA,EAAQ,MAAO,CACxP,KAAQ,iBACR,KAAQ,CAAE,EACV,KAAQG,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,CAAC,EAAI,IAAMS,GAAQR,EAAeH,EAAS,KAAK,GAAKD,GAAUI,EAAeJ,EAAQ,KAAK,GAAKW,GAAQ,KAAKD,EAAQ,cAAe,CACnI,KAAQ,MACR,KAAQ,CAAE,EACV,KAAQP,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,CAAC,EAAI;AAAA;AAAA,GACP,EACD,QAAW,EACf,CAAG,EACD,iBAAkB,CAChB,MAAO,CACL,UAAW,KAAK,MAAM,aAAc,EACpC,UAAW,KAAK,MAAM,aAAc,EACpC,eAAgB,KAAK,UAAU,gBAAgB,CACrD,CACG,CACH,CAAC,EACK,SAAW,KAAK,OAAO,CAC3B,WAAY,CACV,GAAI,KAAK,MAAM,IAAI,cAAc,EAC/B,MAAO,iBAET,GAAI,KAAK,MAAM,IAAI,YAAY,EAC7B,MAAO,aAEV,EACD,QAAS,KACT,aAAc,CACZ,OAAI,KAAK,MAAM,IAAI,cAAc,GAAK,KAAK,MAAM,IAAI,YAAY,EACxD,aAAa,SAAS,CAC3B,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUJ,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,IAAIM,EACFL,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAG1C,EACU,OAAOP,EAAU,kBAAkBU,GAAUA,EAASL,EAAeH,EAAS,MAAM,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,MAAM,EAAIA,KAAY,KAAOS,EAASV,EAAU,MAAM,cAAe,OAAOU,GAAW,WAAaA,EAAO,KAAKT,IAA0BD,EAAU,aAAe,IAAI,CACvS,KAAQ,OACR,KAAQ,CAAE,EACV,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACb,CAAW,EAAIM,EAAM,CACZ,EACD,QAAW,EACnB,CAAO,EAEI,aAAa,SAAS,CAC3B,EAAK,SAAUV,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,MAAO,aACR,EACD,EAAK,SAAUJ,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,MAAO,WACR,EACD,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUJ,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,IAAII,EACFE,EACAC,EAASV,IAA0BD,EAAU,aAAe,CAAE,GAC9DK,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGxC,EACQ,MAAO,eAAkBC,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,YAAY,EAAIA,EAAQ,CAC3I,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACX,CAAS,IAAM,KAAOI,EAAS,MAAQA,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,SAAS,EAAIA,EAAQ,CAC9I,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACX,CAAS,IAAM,KAAOI,EAAS,IAAM,KAAQR,EAAU,kBAAkBU,GAAUA,EAASL,EAAeH,EAAS,MAAM,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,MAAM,EAAIA,KAAY,KAAOS,EAASV,EAAU,MAAM,cAAe,OAAOU,GAAW,WAAaA,EAAO,KAAKC,EAAQ,CACtR,KAAQ,OACR,KAAQ,CAAE,EACV,KAAQP,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACX,CAAS,EAAIM,EAAQ,EAAG,MACjB,EACD,QAAW,EACjB,CAAK,CACF,EACD,SAAU,CACR,UAAW,QACZ,CACH,CAAC,EACK,aAAe,eAAe,OAAO,CACzC,UAAW,mBACX,QAAS,KACT,UAAW,SACX,kBAAmB,CACjB,OAAU,aACX,CACH,CAAC,ECnXD,aAAe,SAAS,MAAM,OAAO,CACnC,WAAW,CACT,aAAAM,EACA,aAAAC,EACA,cAAAC,CACJ,EAAK,CACD,KAAK,gBAAgBF,CAAY,EACjC,KAAK,gBAAgBC,CAAY,EACjC,KAAK,iBAAiBC,CAAa,CACpC,EACD,gBAAgBC,EAAM,CAEpB,MAAMH,EAAeG,EAAO,MAAMA,CAAI,EAAI,MAAK,EAC/C,KAAK,IAAI,eAAgBH,EAAa,QAAQ,OAAO,CAAC,CACvD,EACD,gBAAgBG,EAAM,CACpB,GAAI,CAACA,EAAM,CACT,KAAK,IAAI,CACP,aAAc,IACtB,CAAO,EACD,MACD,CACDA,EAAO,MAAMA,CAAI,EACjB,KAAK,IAAI,CACP,aAAcA,EAAK,QAAQ,KAAK,EAChC,aAAcA,EAAK,QAAQ,OAAO,EAClC,cAAe,IACrB,CAAK,CACF,EACD,iBAAiBA,EAAM,CACrB,GAAI,CAACA,EAAM,CACT,KAAK,IAAI,CACP,cAAe,IACvB,CAAO,EACD,MACD,CACD,MAAMD,EAAgB,MAAMC,CAAI,EAAE,QAAQ,OAAO,EACjD,KAAK,IAAI,CACP,cAAAD,EACA,aAAcA,EACd,aAAc,IACpB,CAAK,CACF,EACD,iBAAkB,CAChB,OAAO,KAAK,MAAM,cAAc,CACjC,EACD,cAAe,CACb,OAAO,KAAK,MAAM,cAAc,EAAE,IAAI,EAAG,QAAQ,CAClD,EACD,cAAe,CACb,OAAO,KAAK,MAAM,cAAc,EAAE,SAAS,EAAG,QAAQ,CACvD,EACD,aAAc,CACZ,MAAME,EAAQ,QAAQ,CAAC,KAAK,aAAc,EAAE,KAAK,YAAa,KAAK,cAAa,CAAE,CAAC,EACnF,OAAO,IAAI,SAAS,WAAWA,CAAK,CACrC,EACD,cAAe,CACb,MAAMC,EAAW,KAAK,gBAAiB,EAAC,QAAO,EAG/C,GAAI,CAACA,EAAU,MAAO,GACtB,MAAMC,EAAa,KAAK,aAAc,EAAC,YAAW,EAClD,OAAOC,MAAI,MAAMD,GAAcD,EAAW,GAAIC,EAAa,CAAC,EAAGE,IAAQ,CACrE,KAAM,OAAOA,CAAG,EAChB,aAAc,EACf,EAAC,CACH,EACD,eAAgB,CACd,MAAMC,EAAS,KAAK,gBAAe,EAAG,MAAM,OAAO,EAAE,UAGrD,OAAIA,IAAW,EAAU,GAClBF,MAAI,MAAM,EAAG,EAAIE,CAAM,EAAGD,IAAQ,CACvC,KAAM,OAAOA,CAAG,EAChB,aAAc,EACf,EAAC,CACH,EACD,WAAY,CACV,MAAMR,EAAe,KAAK,kBACpBU,EAAaV,EAAa,OAAO,MAAK,EAAI,OAAO,GAAK,QAAQ,OACpE,OAAOO,MAAI,MAAM,EAAGP,EAAa,cAAgB,CAAC,EAAGQ,GAAO,CAC1D,MAAMG,EAAa,KAAK,mBAAmBH,CAAG,GAAK,KAAK,gBAAgBA,CAAG,EAC3E,MAAO,CACL,KAAM,OAAOA,CAAG,EAChB,WAAAG,EACA,WAAY,CAACA,GAAc,KAAK,gBAAgBH,CAAG,EACnD,QAASE,IAAeF,CAChC,CACA,CAAK,CACF,EACD,mBAAmBI,EAAS,CAC1B,MAAMC,EAAY,KAAK,MAAM,WAAW,EACxC,OAAKA,EACQ,KAAK,gBAAiB,EAAC,KAAKD,CAAO,EACpC,SAASC,EAAW,KAAK,EAFd,EAGxB,EACD,gBAAgBD,EAAS,CACvB,MAAME,EAAU,KAAK,MAAM,SAAS,EACpC,OAAKA,EACQ,KAAK,gBAAiB,EAAC,KAAKF,CAAO,EACpC,QAAQE,EAAS,KAAK,EAFb,EAGtB,EACD,gBAAgBF,EAAS,CACvB,MAAMX,EAAe,KAAK,MAAM,cAAc,EAC9C,MAAI,CAACA,GAAgB,CAAC,KAAK,gBAAe,EAAG,OAAOA,EAAc,OAAO,EAAU,GAC5EA,EAAa,KAAM,IAAKW,CAChC,CACH,CAAC,ECvFKG,gBAAgB,CAAC,WAAY,SAAU,IAAI,EAClC,qBAAU,OAAO,CAChC,WAAEC,aACA,YAAa,CACX,OAAU,OACV,sBAAuB,4BACvB,uBAAwB,4BACzB,EACD,0BAA0BC,EAAOhB,EAAc,CAC7C,KAAK,cAAc,sBAAuBA,CAAY,CACvD,EACD,2BAA2BgB,EAAOf,EAAe,CAC/C,KAAK,cAAc,uBAAwBA,CAAa,CACzD,EACD,YAAa,SAAUgB,EAAS,CAC9B,KAAK,aAAaA,EAASH,eAAa,EACxC,KAAK,SAAS,KAAK,OAAQ,iBAAkB,KAAK,OAAO,EACzD,UAAU,MAAM,KAAM,SAAS,CAChC,EACD,UAAW,WACX,eAAgB,CACA,KAAK,WACb,gBAAgB,MAAK,CAAE,CAC9B,EACD,kBAAmB,CACH,KAAK,WACb,gBAAgB,MAAO,EAAC,IAAI,EAAG,MAAM,CAAC,CAC7C,EACD,eAAgB,CACd,MAAME,EAAQ,KAAK,WACnBA,EAAM,gBAAgB,IAAI,EAC1BA,EAAM,iBAAiB,IAAI,CAC5B,EACD,aAAaE,EAAYC,EAAM,CAC7BA,EAAK,cAAc,cAAe,KAAK,mBAAoB,GAC3DA,EAAK,cAAc,UAAW,KAAK,eAAgB,GACnDA,EAAK,cAAc,WAAY,KAAK,gBAAiB,EACtD,EACD,oBAAqB,CACnB,MAAMC,EAAQ,KAAK,WACbC,EAAkB,IAAI,gBAAgB,CAC1C,MAAAD,EACA,eAAgB,KAAK,UAAU,gBAAgB,CACrD,CAAK,EACD,YAAK,SAASC,EAAiB,CAC7B,kBAAmB,KAAK,kBACxB,kBAAmB,KAAK,kBACxB,cAAe,KAAK,aAC1B,CAAK,EACMA,CACR,EACD,gBAAiB,CACf,MAAMC,EAAc,IAAI,YACxB,YAAK,SAASA,EAAa,CACzB,cAAe,KAAK,cACpB,iBAAkB,KAAK,iBACvB,cAAe,KAAK,aAC1B,CAAK,EACMA,CACR,EACD,mBAAoB,CAClB,MAAMN,EAAQ,KAAK,WACnBA,EAAM,gBAAgBA,EAAM,aAAc,EAC3C,EACD,mBAAoB,CAClB,MAAMA,EAAQ,KAAK,WACnBA,EAAM,gBAAgBA,EAAM,aAAc,EAC3C,EACD,eAAgB,CACd,MAAMA,EAAQ,KAAK,WACnBA,EAAM,iBAAiBA,EAAM,gBAAiB,EAC/C,EACD,aAAa,CACX,MAAAI,CACJ,EAAK,CACD,MAAMJ,EAAQ,KAAK,WACbd,EAAOkB,EAAM,IAAI,MAAM,EACvBrB,EAAe,KAAK,SAAU,EAAC,gBAAe,EACpDiB,EAAM,gBAAgBjB,EAAa,KAAKG,CAAI,CAAC,CAC9C,EACD,iBAAkB,CAChB,MAAMkB,EAAQ,KAAK,WACbG,EAAU,IAAI,aAAa,CAC/B,MAAAH,EACA,WAAYA,EAAM,YAAa,CACrC,CAAK,EACD,YAAK,SAASG,EAAS,CACrB,cAAe,KAAK,YAC1B,CAAK,EACMA,CACR,EACD,UAAW,CACT,OAAO,KAAK,OAAO,UAAU,KAAK,EAAE,CACrC,EACD,eAAgB,CACd,OAAO,OAAO,CACZ,SAAU,GACX,EAAE,OAAO,KAAM,UAAU,CAAC,CAC5B,CACH,CAAC,ECvHD,WAAgB,CAACC,EAAMC,IAChBD,EACE,MAAM,MAAMC,CAAK,EAAGC,GAAa,CACtC,MAAMC,EAAU,aAAaD,CAAS,EACtC,MAAO,CAAC,CAAC,OAAOF,CAAI,EAAE,MAAMG,CAAO,CACvC,CAAG,EAJiB,GCHL,4BAAS,OAAO,CAC7B,SAAU,QACV,IAAK,CACH,MAAO,CACL,MAAO,KAAK,UAAU,UAAU,CACtC,CACG,EACD,cAAe,CACb,MAAMC,EAAU,KAAK,GAAG,MAAM,CAAC,EAC3B,CAACA,GAAW,CAACA,EAAQ,QACzBA,EAAQ,MAAM,UAAY,uBAC1BA,EAAQ,MAAK,EACb,WAAW,UAAY,CAEjB,CAACA,GAAW,CAACA,EAAQ,QACzBA,EAAQ,MAAM,UAAY,OAC3B,EAAE,EAAE,EACN,CACH,CAAC,EChBK,CACN,UAAEC,WACF,EAAI,SACW,8BAAS,OAAO,CAC7B,OAAQ,CACN,oBAAqB,eACrB,kBAAmB,aACnB,kBAAmB,YACpB,EACD,GAAI,CACF,MAAO,OACR,EACD,cAAe,CACb,KAAK,aAAe,KAAK,cAC1B,EACD,cAAe,CACb,OAAO,KAAK,GAAG,MAAM,IAAG,CACzB,EACD,aAAaC,EAAK,CAChB,KAAK,KAAK,cAAc,gBAAiBA,CAAG,EAC5C,KAAK,KAAOA,CACb,EACD,YAAa,CAEN,KAAK,OAGN,KAAK,KAAK,mBAAkB,GAChC,KAAK,WAAW,KAAK,IAAI,EAC1B,EAID,WAAY,SAAS,SAAUA,EAAK,CAElC,GAAK,KAAK,KAAK,WAAY,EAG3B,IAAIA,EAAI,QAAUD,YAAW,CAC3BC,EAAI,eAAc,EAClB,MACD,CACD,KAAK,KAAK,cAAc,cAAeA,CAAG,EAC1C,KAAK,mBAAkB,EACxB,EAAE,CAAC,EACJ,oBAAqB,CACnB,MAAMC,EAAY,KAAK,eACnBA,IAAc,KAAK,eACvB,KAAK,aAAeA,EACpB,KAAK,KAAK,cAAc,eAAgBA,CAAS,EAClD,CACH,CAAC,ECnDc,6BAAS,OAAO,CAC7B,YAAa,CACX,KAAK,SAAS,MAAM,QAAQ,eAAe,EAAG,mBAAoB,KAAK,OAAO,CAC/E,EACD,UAAW,CAAE,EACb,aAAaC,EAAOC,EAAUC,EAAS,CACrC,GAAID,EAAS,QAAUC,EACrB,YAAK,KAAK,cAAcF,EAAOC,CAAQ,EAChC,EAEV,EACD,QAAQA,EAAU,CAChB,KAAK,KAAK,UAAU,WAAW,EAAG,CAACC,EAASF,IAAU,CACpD,GAAI,CAAC,QAAQE,CAAO,EAAG,CACrB,KAAK,aAAaF,EAAOC,EAAUC,CAAO,EAC1C,MACD,CACD,OAAO,KAAKA,EAASC,OAAK,KAAK,aAAc,KAAMH,EAAOC,CAAQ,CAAC,CACzE,CAAK,CACF,CACH,CAAC,ECpBK,CACJ,UACA,WACA,SACA,QACA,MACF,EAAI,SACW,0BAAS,OAAO,CAC7B,UAAW,CAAC,CACV,cAAe,oBACf,UAAW,CACT,iBAAkB,SAClB,eAAgB,OAChB,OAAU,UACV,MAAS,CAAC,WAAY,OAAO,CAC9B,CACL,CAAG,EACD,QAAS,CACP,MAAO,oBACP,OAAQ,qBACT,EACD,QAAS,CACP,MAAMG,EAAO,GAGb,OAAAA,EAAK,cAAc,KAAK,UAAU,OAAO,CAAC,EAAE,EAAI,KAAK,YAC9CA,CACR,EAED,UAAW,CACT,MAAMC,EAAS,KAAK,WACpB,KAAK,SAASA,EAAQA,EAAO,OAAO,cAAc,EAAG,QAAQ,CAC9D,EACD,YAAYP,EAAK,CACf,KAAK,gBAAgB,KAAK,WAAY,KAAK,KAAK,EAAEA,EAAI,aAAa,CAAC,CACrE,EACD,gBAAgBA,EAAK,CACnBA,EAAI,eAAc,EAClB,MAAMO,EAAS,KAAK,WACdC,EAAe,KAAK,oBAAoBD,CAAM,EACpD,KAAK,gBAAgBA,EAAQC,CAAY,EACzC,KAAK,SAASD,CAAM,CACrB,EACD,cAAcP,EAAK,CACjBA,EAAI,eAAc,EAClB,MAAMO,EAAS,KAAK,WACdC,EAAe,KAAK,oBAAoBD,CAAM,EACpD,KAAK,gBAAgBA,EAAQC,CAAY,EACzC,KAAK,SAASD,CAAM,CACrB,EACD,UAAW,CACT,OAAO,KAAK,KAAK,EAAE,KAAK,UAAU,OAAO,CAAC,CAC3C,EACD,eAAeA,EAAQ,CACrB,OAAOA,EAAO,OAAO,iBAAiB,CACvC,EACD,gBAAgBA,EAAQC,EAAc,CACpCD,EAAO,YAAY,gBAAgB,EACnCC,EAAa,SAAS,gBAAgB,CACvC,EAGD,oBAAoBD,EAAQ,CAC1B,MAAMC,EAAe,KAAK,eAAeD,CAAM,EAG/C,GAAI,CAACC,EAAa,OAChB,OAAOD,EAAO,OAEhB,MAAME,EAAYF,EAAO,MAAMC,CAAY,EAAI,EAC/C,OAAIC,EAAY,EACPD,EAEFD,EAAO,GAAGE,CAAS,CAC3B,EAGD,oBAAoBF,EAAQ,CAC1B,MAAMC,EAAe,KAAK,eAAeD,CAAM,EAG/C,GAAI,CAACC,EAAa,OAChB,OAAOD,EAAO,QAEhB,MAAME,EAAYF,EAAO,MAAMC,CAAY,EAAI,EAC/C,OAAIC,IAAcF,EAAO,OAChBC,EAEFD,EAAO,GAAGE,CAAS,CAC3B,EAKD,SAASF,EAAQG,EAAaC,EAAW,CAKvC,GAJI,CAACJ,EAAO,UACR,CAACG,GAAe,CAACA,EAAY,UAC/BA,EAAc,KAAK,eAAeH,CAAM,GAEtC,CAACG,EAAY,QAAQ,OACzB,MAAME,EAAY,KAAK,KAAK,EAAE,KAAK,UAAU,QAAQ,CAAC,EAChDC,EAAoBD,EAAU,YAC9BE,EAAiBF,EAAU,cAC3BG,EAAkBL,EAAY,cAC9BM,EAAeN,EAAY,SAAQ,EAAG,IACtCO,EAAkBD,EAAeD,EAAkBD,EACzD,IAAII,EAAS,EACTP,IAAc,WAChBO,EAASJ,EAAiB,EAAIC,EAAkB,GAE9CC,EAAe,GACjBJ,EAAU,UAAUC,EAAoBG,EAAeE,CAAM,EAE3DD,EAAkB,GACpBL,EAAU,UAAUC,EAAoBI,EAAkBC,CAAM,CAEnE,EAKD,SAASlB,EAAK,CACZA,EAAI,eAAc,EAClB,KAAK,KAAK,EAAE,iBAAiB,EAAE,MAAK,CACrC,CACH,CAAC,ECrHKhB,gBAAgB,CAAC,OAAQ,WAAY,YAAa,uBAAwB,YAAa,YAAa,YAAa,mBAAoB,cAAe,WAAY,eAAgB,QAAS,gBAAiB,kBAAmB,UAAU,EACvO,mBAAqB,CAAC,OAAQ,oBAAqB,cAAe,gBAAiB,eAAgB,qBAAqB,EACxHmC,OAAO,OACP,SAAW,GACX,aAAe,GACf,cAAgB,KAAK,OAAO,CAChC,QAAS,KACT,UAAW,uBACX,SAAU,aAAa,SAAS,CAC9B,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUlE,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,IAAIM,EACFL,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,OAAOP,EAAU,kBAAkBU,GAAUA,EAASL,EAAeH,EAAS,eAAe,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,eAAe,EAAIA,KAAY,KAAOS,EAASV,EAAU,MAAM,cAAe,OAAOU,GAAW,WAAaA,EAAO,KAAKT,IAA0BD,EAAU,aAAe,IAAI,CACzT,KAAQ,gBACR,KAAQ,CAAE,EACV,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,EAAIM,EAAM,CACZ,EACD,QAAW,EACf,CAAG,EACD,eAAgB,CACd,OAAO,KAAK,OACb,CACH,CAAC,EACK,aAAe,KAAK,OAAO,CAC/B,QAAS,KACT,aAAc,aAAa,SAAS,CAClC,EAAK,SAAUV,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,IAAII,EACFH,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,OAAOP,EAAU,kBAAkBK,EAAeH,EAAS,IAAI,GAAKD,GAAUI,EAAeJ,EAAQ,IAAI,GAAKD,EAAU,MAAM,eAAe,KAAKC,IAA0BD,EAAU,aAAe,KAAKQ,EAASP,GAAU,KAAOI,EAAeJ,EAAQ,MAAM,EAAIA,IAAW,KAAOI,EAAeG,EAAQ,MAAM,EAAIA,GAASA,EAASP,GAAU,KAAOI,EAAeJ,EAAQ,MAAM,EAAIA,IAAW,KAAOI,EAAeG,EAAQ,MAAM,EAAIA,EAAQ,CACrb,KAAQ,KACR,KAAQ,CACN,SAAYA,EAASP,GAAU,KAAOI,EAAeJ,EAAQ,MAAM,EAAIA,IAAW,KAAOI,EAAeG,EAAQ,SAAS,EAAIA,CAC9H,EACD,KAAQJ,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,EAAC,CACH,EACD,EAAK,SAAUJ,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,IAAIC,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC/E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGpC,EACM,OAAOP,EAAU,kBAAkBK,EAAeH,EAAS,KAAK,GAAKD,GAAUI,EAAeJ,EAAQ,KAAK,GAAKD,EAAU,MAAM,eAAe,KAAKC,IAA0BD,EAAU,aAAe,CAAE,GAAE,QAAS,CAClN,KAAQ,MACR,KAAQ,CACN,QAAW,2BACZ,EACD,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,EAAC,CACH,EACD,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUJ,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,IAAII,EACFG,EAASV,IAA0BD,EAAU,aAAe,CAAE,GAC9DK,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,MAAO;AAAA,+BAAsCC,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,MAAM,EAAIA,EAAQ,CACzJ,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,IAAM,KAAOI,EAAS,IAAM,SAAWR,EAAU,kBAAkBK,EAAeH,EAAS,WAAW,GAAKD,GAAUI,EAAeJ,EAAQ,WAAW,GAAKD,EAAU,MAAM,eAAe,KAAKW,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,MAAM,EAAIA,EAAQA,GAAU,KAAOI,EAAeJ,EAAQ,OAAO,EAAIA,EAAQ,CAC5T,KAAQ,YACR,KAAQ,CAAE,EACV,KAAQG,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,GACX,CACF,CACT,CAAO,CAAC,EAAI;AAAA,QAA0BI,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,WAAW,EAAIA,EAAQ,CACjJ,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,KAAM,KAAOI,EAAS,IAAM;AAAA,GAC9B,EACD,QAAW,EACf,CAAG,EACD,eAAgB,CACd,MAAM2D,EAAa,GACnB,OAAI,KAAK,MAAM,IAAI,YAAY,GAAGA,EAAW,KAAK,aAAa,EAC3D,KAAK,MAAM,IAAI,YAAY,GAAGA,EAAW,KAAK,aAAa,EACxDA,EAAW,KAAK,GAAG,CAC3B,EACD,WAAY,CACV,MAAMA,EAAa,CAAC,iBAAkB,mBAAoB,OAAO,KAAM,gBAAiB,EAAE,CAAC,EAC3F,OAAI,KAAK,QAAU,KAAK,MAAM,IAAI,UAAU,GAAGA,EAAW,KAAK,aAAa,EACrEA,EAAW,KAAK,GAAG,CAC3B,EACD,SAAU,CACR,MAAS,QACV,EACD,cAAcjC,EAAS,CACrB,KAAK,aAAaA,EAAS,CAAC,QAAS,GAAG,kBAAkB,CAAC,CAC5D,EACD,UAAW,CACT,KAAK,WAAa,KAAK,kBAAkB,KAAK,KAAK,CACpD,EACD,kBAAkBkC,EAAM,CACtB,OAAO,KAAK,IAAI,MACjB,EACD,oBAAqB,KACrB,iBAAkB,CAChB,MAAMC,EAAc,KAAK,UAAU,aAAa,EAC1CC,EAAa,KAAK,QAAU,KAAK,MAAM,IAAI,UAAU,EAC3D,OAAO,OAAO,CACZ,KAAM,KAAK,MAAM,IAAI,KAAK,IAAI,EAC9B,MAAO,KAAK,MAAM,IAAI,OAAO,EAC7B,UAAWD,GAAeC,CAC3B,EAAE,OAAO,KAAM,qBAAqB,CAAC,CACvC,EACD,aAAc,CACZ,OAAO,KAAK,YACb,CACH,CAAC,EACK,SAAW,eAAe,OAAO,CACrC,UAAW,kBACX,QAAS,KACT,SAAU,aAAa,SAAS,CAC9B,EAAK,SAAUtE,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,IAAIM,EACFL,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,MAAO,kCAAsCP,EAAU,kBAAkBU,GAAUA,EAASL,EAAeH,EAAS,aAAa,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,aAAa,EAAIA,KAAY,KAAOS,EAASV,EAAU,MAAM,cAAe,OAAOU,GAAW,WAAaA,EAAO,KAAKT,IAA0BD,EAAU,aAAe,IAAI,CAC3V,KAAQ,cACR,KAAQ,CAAE,EACV,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,EAAIM,EAAQ,EAAG,QACjB,EACD,EAAK,SAAUV,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,IAAIM,EACFC,EAASV,IAA0BD,EAAU,aAAe,CAAE,GAC9DY,EAASZ,EAAU,MAAM,cACzBa,EAASb,EAAU,iBACnBK,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,MAAO,+BAAmCM,GAAQR,EAAeH,EAAS,KAAK,GAAKD,GAAUI,EAAeJ,EAAQ,KAAK,GAAKW,GAAQ,KAAKD,EAAQ,cAAe,CACjK,KAAQ,MACR,KAAQ,CAAE,EACV,KAAQP,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,EAAC,EAAIS,GAAQH,GAAUA,EAASL,EAAeH,EAAS,UAAU,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,UAAU,EAAIA,KAAY,KAAOS,EAASE,EAAQ,OAAOF,GAAW,WAAaA,EAAO,KAAKC,EAAQ,CACpN,KAAQ,WACR,KAAQ,CAAE,EACV,KAAQP,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,EAAIM,EAAQ,EAAG,QACjB,EACD,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUV,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,IAAII,EACFG,EAASV,IAA0BD,EAAU,aAAe,CAAE,GAC9DK,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,MAAO;AAAA,QAAaC,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,aAAa,EAAIA,EAAQ,CACvI,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,IAAM,KAAOI,EAAS,IAAM;AAAA;AAAA,QAA4BA,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,UAAU,EAAIA,EAAQ,CACzK,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,KAAM,KAAOI,EAAS,IAAM;AAAA,GAC9B,EACD,QAAW,EACf,CAAG,EACD,oBAAqB,KACrB,mBAAoB,KACpB,qBAAsB,OACtB,YAAa,CACX,eAAgB,QACjB,EACD,WAAW4B,EAAM,CACfA,EAAK,OAAM,EACX,MAAMM,EAAQ,KAAK,MAAM,IAAI,OAAO,EACpC,MAAO,CAACA,GAAS,CAACN,EAAK,YAAc,WAAWA,EAAK,WAAYM,CAAK,CACvE,EACD,WAAWR,EAAS,CAClB,KAAK,aAAaA,EAAS,kBAAkB,CAC9C,EACD,kBAAmB,CACjB,MAAMqC,EAAO,KAAK,KAAM,GAAG,kBAAkB,EAC7C,OAAO,OAAO,CACZ,MAAO,KAAK,KACb,EAAEA,CAAI,CACR,EACD,iBAAkB,CAChB,MAAO,CACL,YAAa,KAAK,UAAU,aAAa,EACzC,SAAU,KAAK,UAAU,UAAU,CACzC,CACG,CACH,CAAC,EACK,UAAY,eAAe,OAAO,CACtC,UAAW,CAAC,CACV,cAAe,mBACf,SAAU,WACd,EAAK,qBAAsB,gBAAgB,EACzC,SAAU,aAAa,SAAS,CAC9B,EAAK,SAAUvE,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,IAAIM,EACFL,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,MAAO,gDAAoDP,EAAU,kBAAkBU,GAAUA,EAASL,EAAeH,EAAS,aAAa,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,aAAa,EAAIA,KAAY,KAAOS,EAASV,EAAU,MAAM,cAAe,OAAOU,GAAW,WAAaA,EAAO,KAAKT,IAA0BD,EAAU,aAAe,IAAI,CACzW,KAAQ,cACR,KAAQ,CAAE,EACV,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,EAAIM,EAAQ,EAAG,QACjB,EACD,EAAK,SAAUV,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,IAAIM,EACFC,EAASV,IAA0BD,EAAU,aAAe,CAAE,GAC9DY,EAASZ,EAAU,MAAM,cACzBa,EAAS,WACTC,EAASd,EAAU,iBACnBK,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,MAAO,yFAAgGO,GAAQJ,GAAUA,EAASL,EAAeH,EAAS,iBAAiB,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,iBAAiB,EAAIA,KAAY,KAAOS,EAASE,EAAQ,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAQ,CAC/T,KAAQ,kBACR,KAAQ,CAAE,EACV,KAAQP,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,GACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,GACX,CACF,CACF,GAAIM,EAAM,EAAK,YAAgBI,GAAQJ,GAAUA,EAASL,EAAeH,EAAS,OAAO,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,OAAO,EAAIA,KAAY,KAAOS,EAASE,EAAQ,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAQ,CACpO,KAAQ,QACR,KAAQ,CAAE,EACV,KAAQP,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,GACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,GACX,CACF,CACT,CAAO,EAAIM,EAAQ,EAAG,IACjB,EACD,EAAK,SAAUV,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,IAAIM,EACFL,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,MAAO,4DAAgEP,EAAU,kBAAkBU,GAAUA,EAASL,EAAeH,EAAS,WAAW,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,WAAW,EAAIA,KAAY,KAAOS,EAASV,EAAU,MAAM,cAAe,OAAOU,GAAW,WAAaA,EAAO,KAAKT,IAA0BD,EAAU,aAAe,IAAI,CACjX,KAAQ,YACR,KAAQ,CAAE,EACV,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,EAAIM,EAAQ,EAAG,YACjB,EACD,EAAK,SAAUV,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,IAAIM,EACFC,EAASV,IAA0BD,EAAU,aAAe,CAAE,GAC9DY,EAASZ,EAAU,MAAM,cACzBa,EAASb,EAAU,iBACnBK,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,MAAO,gCAAoCM,GAAQR,EAAeH,EAAS,KAAK,GAAKD,GAAUI,EAAeJ,EAAQ,KAAK,GAAKW,GAAQ,KAAKD,EAAQ,cAAe,CAClK,KAAQ,MACR,KAAQ,CAAE,EACV,KAAQP,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,EAAC,EAAIS,GAAQH,GAAUA,EAASL,EAAeH,EAAS,UAAU,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,UAAU,EAAIA,KAAY,KAAOS,EAASE,EAAQ,OAAOF,GAAW,WAAaA,EAAO,KAAKC,EAAQ,CACpN,KAAQ,WACR,KAAQ,CAAE,EACV,KAAQP,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,EAAIM,EAAQ,EAAG,QACjB,EACD,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUV,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,IAAII,EACFG,EAASV,IAA0BD,EAAU,aAAe,CAAE,GAC9DK,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,MAAO;AAAA;AAAA,UAA0BC,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,aAAa,EAAIA,EAAQ,CACpJ,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,GACX,CACF,CACT,CAAO,IAAM,KAAOI,EAAS,IAAM;AAAA,UAAeA,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,cAAc,EAAIA,EAAQ,CAChK,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,GACX,CACF,CACT,CAAO,IAAM,KAAOI,EAAS,IAAM;AAAA,UAAeA,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,UAAU,EAAIA,EAAQ,CAC5J,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,GACX,CACF,CACT,CAAO,IAAM,KAAOI,EAAS,IAAM;AAAA;AAAA;AAAA,QAAkGA,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,UAAU,EAAIA,EAAQ,CAC/O,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,KAAM,KAAOI,EAAS,IAAM;AAAA,GAC9B,EACD,QAAW,EACf,CAAG,EACD,SAAU,CACR,kBAAmB,QACnB,kBAAmB,OACpB,EACD,GAAI,CACF,MAAO,YACP,MAAO,WACR,EACD,SAAU,CACR,KAAK,cAAc,uBAAwB,CACzC,MAAO,IACb,CAAK,CACF,EACD,oBAAqB,KACrB,mBAAoB,KACpB,UAAW,cACX,WAAW0B,EAAS,CAClB,KAAK,aAAaA,EAASH,eAAa,EACxC,KAAK,aAAaG,EAAS,kBAAkB,EAC7C,KAAK,gBAAkB,SAAS,KAAK,OAAQ,CAAC,EAC9CsC,OAAK,KAAK,MAAO,KAAK,QAAS,IAAI,CACpC,EACD,QAAQC,EAAM,CACZ,MAAMvC,EAAU,OAAO,CACrB,MAAO,KAAK,MACZ,UAAW,KAAK,SACjB,EAAE,KAAK,KAAM,GAAG,kBAAkB,EAAGuC,CAAI,EACpCC,EAAW,IAAI,SAASxC,CAAO,EACrCwC,EAAS,OAAM,EACf,KAAK,aAAaA,CAAQ,CAC3B,EACD,WAAWC,EAAW,CACpB,MAAO,CAAC,CAAC,KAAKA,EAAU,QAAQ,GAAKA,EAAU,UAChD,EACD,gBAAiB,CACf,0BAA2B,CACzB,OAAO,KAAK,iBACb,CACF,EACD,kBAAmB,CACjB,KAAK,EAAE,mBAAmB,EAAE,YAAY,gBAAgB,EACnD,KAAK,MAAM,IAAI,OAAO,GAC3B,KAAK,EAAE,mBAAmB,EAAE,MAAK,EAAG,SAAS,gBAAgB,CAC9D,EACD,kBAAmB,CACjB,MAAO,CACL,cAAe,KAAK,aAC1B,CACG,EACD,iBAAkB,CAChB,MAAO,CACL,SAAU,KAAK,SACf,UAAW,KAAK,UAChB,YAAa,KAAK,YAClB,SAAU,KAAK,SACf,gBAAiB,KAAK,gBACtB,aAAc,KAAK,YACzB,CACG,CACH,CAAC,EACc,qBAAU,OAAO,CAChC,KAAET,OACA,SACA,aACA,UAAW,aACX,UAAW,WACX,qBAAsB,WACtB,UAAW,KAAK,WAAW,SAAS,UACpC,YAAa,GACb,SAAU,GACV,cAAe,KAAK,WAAW,SAAS,cACxC,YAAa,SAAUhC,EAAS,CAC9B,KAAK,aAAaA,EAASH,eAAa,EACxC,KAAK,aAAaG,EAAS,kBAAkB,EAC7C,UAAU,MAAM,KAAM,SAAS,CAChC,EACD,aAAc,CACZ,MAAMqC,EAAO,KAAK,KAAM,GAAGxC,gBAAe,GAAG,kBAAkB,EAC/D,OAAO,OAAO,CACZ,MAAO,KAAK,SAAU,CACvB,EAAEwC,CAAI,CACR,EACD,UAAW,UACX,WAAY,CACV,eAAgB,eACjB,EACD,cAAc7B,EAAO,CACnB,KAAK,SAAS,QAASA,CAAK,CAC7B,CACH,CAAC,EC7nBKX,gBAAgB,CAAC,QAAS,aAAc,QAAS,iBAAkB,kBAAmB,YAAa,WAAY,WAAY,aAAa,EACxI,gBAAkB,CACtB,KAAM,OACN,SAAU,GACV,YAAa,KACb,SAAU,KACV,aAAc,GACd,gBAAiB,IACnB,EACM6C,WAAW,KACX,YAAc,CAClB,UAAW,mBACX,SAAU,aAAa,SAAS,CAC9B,EAAK,SAAU5E,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,IAAII,EACFH,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,OAAOP,EAAU,kBAAkBK,EAAeH,EAAS,IAAI,GAAKD,GAAUI,EAAeJ,EAAQ,IAAI,GAAKD,EAAU,MAAM,eAAe,KAAKC,IAA0BD,EAAU,aAAe,KAAKQ,EAASP,GAAU,KAAOI,EAAeJ,EAAQ,MAAM,EAAIA,IAAW,KAAOI,EAAeG,EAAQ,MAAM,EAAIA,GAASA,EAASP,GAAU,KAAOI,EAAeJ,EAAQ,MAAM,EAAIA,IAAW,KAAOI,EAAeG,EAAQ,MAAM,EAAIA,EAAQ,CACrb,KAAQ,KACR,KAAQ,CACN,SAAYA,EAASP,GAAU,KAAOI,EAAeJ,EAAQ,MAAM,EAAIA,IAAW,KAAOI,EAAeG,EAAQ,SAAS,EAAIA,CAC9H,EACD,KAAQJ,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,EAAC,CACH,EACD,EAAK,SAAUJ,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,IAAIC,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC/E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGpC,EACM,MAAO,SAAWP,EAAU,iBAAiBK,EAAeH,EAAS,QAAQ,EAAE,KAAKD,IAA0BD,EAAU,aAAe,IAAIC,EAAQA,GAAU,KAAOI,EAAeJ,EAAQ,MAAM,EAAIA,EAAQ,CAC3M,KAAQ,SACR,KAAQ,CAAE,EACV,KAAQG,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,CAAC,EAAI,SACP,EACD,EAAK,SAAUJ,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,IAAII,EACFH,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,OAAQC,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKD,IAA0BD,EAAU,aAAe,CAAE,GAAEC,GAAU,KAAOI,EAAeJ,EAAQ,aAAa,EAAIA,EAAQ,CAC1K,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,IAAM,KAAOI,EAAS,EACxB,EACD,EAAK,SAAUR,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CACzD,IAAIM,EACFL,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,MAAO,SAAWP,EAAU,kBAAkBU,GAAUA,EAASL,EAAeH,EAAS,aAAa,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,aAAa,EAAIA,KAAY,KAAOS,EAASV,EAAU,MAAM,cAAe,OAAOU,GAAW,WAAaA,EAAO,KAAKT,IAA0BD,EAAU,aAAe,IAAI,CAChU,KAAQ,cACR,KAAQ,CAAE,EACV,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,EAAIM,EAAQ,EAAG,SACjB,EACD,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUV,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,IAAII,EACFG,EAASV,IAA0BD,EAAU,aAAe,CAAE,GAC9DK,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,QAASC,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAQ,MAAM,EAAIA,EAAQ,CACrH,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,KACrB,KAAQI,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,KAAM,KAAOI,EAAS,MAAQA,EAASH,EAAeH,EAAS,IAAI,EAAE,KAAKS,EAAQN,EAAeH,EAAS,QAAQ,EAAE,KAAKS,EAAQV,EAAQA,GAAU,KAAOI,EAAeJ,EAAQ,MAAM,EAAIA,EAAQ,CAClM,KAAQ,SACR,KAAQ,CAAE,EACV,KAAQG,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACT,CAAO,EAAG,CACF,KAAQ,KACR,KAAQ,CAAE,EACV,GAAMJ,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAClC,QAAWJ,EAAU,QAAQ,EAAGI,EAAM,CAAC,EACvC,KAAQA,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,KAAM,KAAOI,EAAS,GACxB,EACD,QAAW,EACf,CAAG,EACD,iBAAkB,CAChB,MAAO,CACL,KAAM,OACN,YAAa,KAAK,WAAW,SAAS,WAC5C,CACG,CACH,EACM,WAAa,SAAS,MAAM,OAAO,CACvC,SAAU,CACR,WAAY,GACZ,SAAU,GACV,SAAU,IACX,CACH,CAAC,EACK,UAAY,KAAK,OAAO,CAC5B,WAAW,CACT,MAAAyB,CACJ,EAAK,CACD,KAAK,MAAQA,EAAM,QACpB,EACD,YAAa,CACX,MAAO,CACL,SAAU,KAAK,UAAU,OAAO,EAAE,UACxC,CACG,EACD,QAAS,SACT,SAAU,CACR,MAAS,QACT,MAAS,OACV,CACH,CAAC,EACc,mBAAU,OAAO,CAC9B,gBACF,SAAE2C,WACA,WACA,UACA,YAAa,SAAU1C,EAAS,CAC9B,KAAK,aAAaA,EAASH,eAAa,EACxC,KAAK,KAAK,OAAQ,IAAM,CACjB,KAAK,SAAS,UAAU,GAC7B,KAAK,aAAY,CACvB,CAAK,EACD,UAAU,MAAM,KAAM,SAAS,CAChC,EACD,iBAAiBG,EAAS,CACxB,OAAO,OAAO,CACZ,MAAO,KAAK,SAAQ,EAAG,UAC7B,EAAO,YAAa,OAAO,KAAM,aAAa,EAAGA,CAAO,CACrD,EACD,WAAY,CACV,MAAS,SACV,EACD,SAAU,CACR,KAAK,YAAY,UAAU,CAC5B,EACD,YAAa,CACX,oBAAqB,qBACrB,kBAAmB,mBACnB,kBAAmB,uBACpB,EACD,oBAAqB,CACnB,KAAK,KAAI,CACV,EACD,iBAAiBD,EAAO4C,EAAU,CAChC,MAAMzC,EAAO,KAAK,UAClBA,EAAK,IAAI,YAAY,YAAayC,CAAQ,EACrCA,IAGLzC,EAAK,IAAI,OACT,KAAK,aAAY,EAClB,EACD,sBAAsBH,EAAO6C,EAAU,CACrC,KAAK,KAAI,EACT,KAAK,cAAc,kBAAmBA,CAAQ,CAC/C,EACD,cAAe,CACb,MAAMJ,EAAW,IAAIK,WAAS,OAAO,CACnC,MAAO,KAAK,OAAS,CAAC,CACpB,WAAY,KAAK,UACzB,CAAO,EACD,MAAO,CACL,SAAU,KAAK,SAAS,UAAU,CACnC,CACF,EAAE,OAAO,KAAM,iBAAiB,CAAC,CAAC,EACnC,KAAK,UAAU,KAAKL,EAAU,KAAK,iBAAgB,CAAE,EACrD,KAAK,WAAWA,EAAS,QAAO,EAAI,KAAK,eAAe,EACxD,KAAK,WAAWA,EAAS,QAAO,EAAI,OAAO,KAAM,gBAAgB,CAAC,CACnE,EACD,UAAW,CACT,OAAO,KAAK,UAAU,WACvB,EACD,kBAAmB,CACjB,OAAO,OAAO,CACZ,SAAU,KAAK,QAAO,EAAG,GACzB,SAAU,OAAO,KAAM,UAAU,EACjC,MAAO,KAAK,KACb,EAAE,OAAO,KAAM,UAAU,CAAC,CAC5B,EACD,gBAAiB,CACf,MAAS,kBACT,uBAAwB,mBACxB,QAAW,mBACZ,EACD,iBAAkB,CAChB,KAAK,UAAU,OAChB,EACD,iBAAiB,CACf,MAAArC,CACJ,EAAK,CACD,KAAK,UAAU,QACf,KAAK,SAAS,WAAYA,CAAK,CAChC,EACD,mBAAoB,CAClB,KAAK,YAAY,WAAY,EAAK,CACnC,CACH,EAAG,CACD,aAAa2C,EAAQ,CACnB,KAAK,UAAU,UAAYA,CAC5B,CACH,CAAC,EC1SKjD,gBAAgB,CAAC,QAAS,WAAY,WAAY,WAAY,SAAU,IAAI,EAC5E,KAAO,OACP,MAAQ,OACR,SAAW,KACFgD,sBAAS,OAAO,CAC7B,KACA,MACA,SACA,YAAa,SAAU7C,EAAS,CAC9B,KAAK,aAAaA,EAASH,eAAa,EACxC,KAAK,SAAS,KAAK,OAAQ,iBAAkB,KAAK,OAAO,EACzDgD,WAAS,MAAM,KAAM,SAAS,CAC/B,EACD,aAAc,CACZ,MAAS,QACT,uBAAwB,QACzB,EACD,UAAW,CACT,OAAO,KAAK,OAAO,UAAU,KAAK,EAAE,CACrC,EACD,eAAgB,CACd,OAAO,OAAO,CACZ,SAAU,KAAK,UAAY,KAAK,GAAG,CAAC,EACpC,SAAU,KAAK,SACf,MAAO,KAAK,KACb,EAAE,OAAO,KAAM,UAAU,CAAC,CAC5B,EACD,SAAU,CACR,KAAK,QAAO,CACb,EACD,SAAS,CACP,MAAA1C,CACJ,EAAK,CACD,GAAIA,EAAM,IAAI,YAAY,EAAG,OACZA,EAAM,IAAI,UAAU,EAC5B,KAAK,KAAMA,CAAK,EACzB,KAAK,QAAO,CACb,CACH,CAAC,ECrCK,cAAgB,CAAC,YAAa,QAAS,WAAY,UAAW,cAAe,cAAe,WAAY,SAAU,IAAI,EACtH,YAAc,KAAK,OAAO,CAC9B,SAAU,aAAa,SAAS,CAC9B,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUrC,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,IAAII,EACFE,EACAC,EAASV,IAA0BD,EAAU,aAAe,CAAE,GAC9DY,EAASZ,EAAU,MAAM,cACzBa,EAAS,WACTR,EAAiBL,EAAU,gBAAkB,SAAUM,EAAQC,EAAc,CAC3E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGtC,EACM,OAAOP,EAAU,kBAAkBU,GAAUA,EAASL,EAAeH,EAAS,SAAS,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,SAAS,EAAIA,KAAY,KAAOS,EAASE,EAAQ,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAQ,CACnO,KAAQ,UACR,KAAQ,CAAE,EACV,KAAQP,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,CACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,GAAIM,EAAM,IAAOF,GAAUE,GAAUA,EAASL,EAAeH,EAAS,aAAa,IAAMD,GAAU,KAAOI,EAAeJ,EAAQ,aAAa,EAAIA,KAAY,KAAOS,EAASE,EAAQ,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAQ,CACpO,KAAQ,cACR,KAAQ,CAAE,EACV,KAAQP,EACR,IAAO,CACL,MAAS,CACP,KAAQ,EACR,OAAU,EACX,EACD,IAAO,CACL,KAAQ,EACR,OAAU,EACX,CACF,CACF,GAAIM,KAAY,KAAOF,EAAS,GAClC,EACD,QAAW,EACf,CAAG,EACD,iBAAkB,CAChB,MAAO,CACL,QAAS,KAAK,UAAU,SAAS,EACjC,YAAa,KAAK,UAAU,aAAa,CAC/C,CACG,CACH,CAAC,EACc,kBAAU,OAAO,CAC9B,UAAW,YACX,UAAW,UACX,MAAO,EACP,YAAa,SAAU0B,EAAS,CAC9B,KAAK,aAAaA,EAAS,aAAa,EACxC,KAAK,aAAY,EACjB,KAAK,SAAS,KAAK,OAAQ,iBAAkB,KAAK,OAAO,EACzD,UAAU,MAAM,KAAM,SAAS,CAChC,EACD,cAAe,CACR,KAAK,KACV,KAAK,GAAG,GAAG,uBAAwBkB,OAAK,KAAK,YAAa,IAAI,CAAC,EAC/D,KAAK,GAAG,GAAG,qBAAsBA,OAAK,KAAK,YAAa,IAAI,CAAC,EAC7D,KAAK,GAAG,GAAG,sBAAuBA,OAAK,KAAK,YAAa,IAAI,CAAC,EAC/D,EACD,aAAc,CACZ,aAAa,KAAK,YAAY,EAC9B,MAAM6B,EAAQ,OAAO,KAAM,OAAO,EAClC,KAAK,aAAeC,MAAO9B,OAAK,KAAK,KAAM,IAAI,EAAG6B,CAAK,CACxD,EACD,aAAc,CACZ,aAAa,KAAK,YAAY,EAC9B,KAAK,MAAK,CACX,EACD,iBAAkB,CAChB,aAAa,KAAK,YAAY,CAC/B,EACD,QAAS,CACP,MAAM,CACJ,QAAS,KAAK,QAAO,EAAG,GACxB,SAAU,KACV,QAAS,CAAC,EAAG,CAAC,CACpB,CAAK,CACF,EACD,aAAc,CACZ,MAAO,CACL,UAAW,OAAO,KAAM,WAAW,EACnC,QAAS,OAAO,KAAM,SAAS,EAC/B,YAAa,OAAO,KAAM,aAAa,CAC7C,CACG,EACD,UAAW,CACT,OAAO,KAAK,OAAO,UAAU,KAAK,EAAE,CACrC,EACD,eAAgB,CACd,MAAME,EAAc,OAAO,KAAM,aAAa,EACxCC,EAAW,OAAO,KAAM,UAAU,EACxC,OAAO,OAAO,CACZ,YAAAD,EACA,SAAAC,CACD,EAAE,OAAO,KAAM,UAAU,CAAC,CAC5B,CACH,CAAC,EChHW,cAAeC,aAAkB,SAAS,CAAC,EAAI,SAASrF,EAAUC,EAAOC,EAAQC,EAASC,EAAM,CACxG,IAAII,EAAQH,EAAiBL,EAAU,gBAAkB,SAASM,EAAQC,EAAc,CACpF,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGpC,EAEE,MAAO,0DACHP,EAAU,iBAAiBA,EAAU,QAASQ,GAAWA,GAAWA,GAAWA,EAAUJ,GAAQC,EAAeD,EAAK,MAAM,IAAOC,EAAeG,EAAO,SAAS,IAAOH,EAAeG,EAAO,UAAU,IAAOH,EAAeG,EAAO,kBAAkB,IAAOH,EAAeG,EAAO,SAAS,EAAIP,CAAM,CAAC,EACxS,WACN,EAAE,SAAW,CAAC,EAAE,UAAU,EAAE,KAAO,SAASD,EAAUC,EAAOC,EAAQC,EAASC,EAAM,CAChF,IAAII,EAAQE,EAAQC,EAAOV,IAA2BD,EAAU,aAAe,IAAKY,EAAOZ,EAAU,MAAM,cAAea,EAAO,WAAYC,EAAOd,EAAU,iBAAkBK,EAAiBL,EAAU,gBAAkB,SAASM,EAAQC,EAAc,CACxP,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGpC,EAEE,MAAO,+BACHO,GAASJ,GAAUA,EAASL,EAAeH,EAAQ,WAAW,IAAMD,GAAU,KAAOI,EAAeJ,EAAO,WAAW,EAAIA,KAAY,KAAOS,EAASE,EAAS,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAO,CAAC,KAAO,YAAY,KAAO,GAAG,KAAOP,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,EAAE,OAAS,EAAE,CAAC,CAAC,CAAC,EAAIM,EAAS,EACxU;AAAA,IACAI,GAAQT,EAAeH,EAAQ,KAAK,GAAID,GAAUI,EAAeJ,EAAO,KAAK,GAAIW,GAAQ,KAAKD,EAAQV,GAAU,KAAOI,EAAeJ,EAAO,UAAU,EAAIA,EAAQ,CAAC,KAAO,MAAM,KAAO,GAAG,KAAOG,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,CAAC,EAAE,IAAM,CAAC,KAAO,EAAE,OAAS,EAAE,CAAC,CAAC,CAAC,CAAC,EAC3Q;AAAA;AAAA;AAAA,IACAU,GAASJ,GAAUA,EAASL,EAAeH,EAAQ,MAAM,IAAMD,GAAU,KAAOI,EAAeJ,EAAO,MAAM,EAAIA,KAAY,KAAOS,EAASE,EAAS,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,KAAOP,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,CAAC,EAAE,IAAM,CAAC,KAAO,EAAE,OAAS,EAAE,CAAC,CAAC,CAAC,EAAIM,EAAS,IACtTF,GAAWE,GAAUA,EAASL,EAAeH,EAAQ,MAAM,IAAMD,GAAU,KAAOI,EAAeJ,EAAO,MAAM,EAAIA,KAAY,KAAOS,EAASE,EAAS,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,KAAOP,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,EAAE,OAAS,EAAE,CAAC,CAAC,CAAC,EAAIM,KAAa,KAAOF,EAAS,MAC/UA,EAASH,EAAeH,EAAQ,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAO,SAAS,EAAIA,EAAQ,CAAC,KAAO,KAAK,KAAO,GAAG,GAAKD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAAE,QAAUJ,EAAU,KAAK,KAAOI,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,EAAE,OAAS,GAAG,CAAC,CAAC,CAAC,IAAM,KAAOI,EAAS,IAC3S;AAAA;AAAA,6DACAM,EAAOd,EAAU,QAASQ,GAAWA,GAAWA,GAAWA,EAAUJ,GAAQC,EAAeD,EAAK,MAAM,IAAOC,EAAeG,EAAO,SAAS,IAAOH,EAAeG,EAAO,UAAU,IAAOH,EAAeG,EAAO,kBAAkB,IAAOH,EAAeG,EAAO,YAAY,EAAIP,CAAM,CAAC,EACvR;AAAA,CACN,EAAE,QAAU,EAAI,CAAC,EC3BX,QAAU,CAAC,YAAa,OAAQ,OAAQ,SAAS,EACjD,MAAQ,CACZ,QAAS,eACT,KAAM,cACN,MAAO,cACT,EACM,UAAY,KAAK,OAAO,CAC5B,UAAW,YACX,UAAW,OACX,SAAU,cACV,SAAU,CACR,oBAAqB,gBACrB,iBAAkB,YACnB,EACD,WAAWiC,EAAS,CAClB,KAAK,aAAaA,EAAS,OAAO,CACnC,EACD,UAAW,CACT,MAAM,CACJ,QAAS,KAAK,GACd,SAAU,IACV,WAAY,CAAC,IAAK,CAAC,EACnB,QAAS,CAAC,EAAG,CAAC,EACd,OAAQ,eACd,CAAK,CACF,EACD,gBAAiB,CACf,KAAK,QAAO,CACb,EACD,aAAc,CACR,KAAK,cACT,KAAK,SAAQ,EACb,KAAK,cAAc,OAAQ,IAAI,EAChC,EACD,UAAW,CACT,KAAK,YAAc,GACnB,MAAM,CACJ,QAAS,KAAK,GACd,QAAS,CAAC,EAAG,CAAC,EACd,SAAU,IACV,OAAQ,aACR,SAAUkB,OAAK,KAAK,QAAS,IAAI,CACvC,CAAK,CACF,EACD,SAAU,CACJ,KAAK,cACT,KAAK,SAAQ,EACb,KAAK,cAAc,UAAW,IAAI,EACnC,EACD,iBAAkB,CAChB,MAAO,CACL,UAAW,KAAK,UAChB,KAAM,KAAK,KACX,KAAM,KAAK,KACX,QAAS,KAAK,QACd,SAAU,MAAM,KAAK,SAAS,CACpC,CACG,CACH,CAAC,EACK,WAAa,eAAe,OAAO,CACvC,UAAW,uBACX,eAAgB,CACV,KAAK,SAAS,QAClB,KAAK,QAAO,CACb,CACH,CAAC,ECjEK,cAAgB,IACP,iBAAI,OAAO,CACxB,YAAa,QACb,cAAe,CACb,KAAQ,YACR,eAAgB,cAChB,YAAa,WACb,aAAc,YACd,YAAa,WACb,gBAAiB,cAClB,EACD,UAAUlB,EAAS,CACjB,MAAMoD,EAAY,IAAI,UAAUpD,CAAO,EACvC,MAAM,UAAY,CAChBoD,EAAU,QAAO,CAClB,EAAE,aAAa,EAChB,IAAIC,EAAa,KAAK,UACtB,OAAKA,IACHA,EAAa,KAAK,SAAS,IAAI,UAAY,GAEtCA,EAAW,aAAaD,CAAS,CACzC,EACD,YAAY7C,EAAM,CAChB,KAAK,UAAU,CACb,KAAAA,EACA,UAAW,SACjB,CAAK,CACF,EACD,SAASA,EAAM,CACb,KAAK,UAAU,CACb,KAAAA,EACA,UAAW,MACjB,CAAK,CACF,EACD,UAAUA,EAAM,CACd,KAAK,UAAU,CACb,KAAAA,EACA,UAAW,OACjB,CAAK,CACF,EACD,SAASP,EAAS,CAChBA,EAAU,OAAO,CACf,QAAS,EACV,EAAEA,CAAO,EACV,MAAMoD,EAAY,KAAK,UAAU,KAAKpD,EAAS,SAAU,YAAY,CAAC,EACtE,KAAK,SAASoD,EAAW,CACvB,KAAQpD,EAAQ,OAChB,QAAWA,EAAQ,UACzB,CAAK,CACF,EACD,aAAasD,EAAc,CACzB,MAAMC,EAASD,EAAa,OAGvBC,EAAO,QACZjB,OAAKiB,EAAQC,GAAS,KAAK,UAAU,CACnC,KAAMA,EAAM,OACZ,UAAW,OACZ,EAAC,CACH,CACH,CAAC,ECjED,IAAI,OAAS,YAAW,EACpBC,SAAS,YAAW,EACpBC,OAAO,UAAS,EAChBC,SAAS,OAAO,OAAW,IAAc,OAASC,eACtDC,OAAiB,CACf,OACA,OAAQJ,SACR,KAAMC,OACN,KAAMxC,OACN,MAAO4C,QACP,KAAMxB,OACN,IACA,MAAOyB,QACP,OAAQC,SACR,WAAYC,aACZ,SAAUC,WACV,OAAQP,QACV,EACA,SAAS,aAAc,CACrB,OAAI,OAAO,OACF,OAAO,OAEP,SAAoBQ,EAAKC,EAAQC,EAAQC,EAAK,CACnD,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IACpCjC,OAAK,OAAO,UAAUiC,CAAC,CAAC,EAAG,SAAUC,EAAKC,EAAK,CAC7CN,EAAIM,CAAG,EAAID,CACrB,CAAS,EAEH,OAAOL,CACb,CAEA,CACA,SAAS,aAAc,CACrB,GAAI,OAAO,OACT,OAAO,SAAgBA,EAAKO,EAAcC,EAAcL,EAAK,CAC3D,IAAIM,EAAiBd,QAAM,UAAW,CAAC,EACvC,OAAO,OAAO,MAAM,KAAM,CAAC,OAAO,OAAOK,CAAG,CAAC,EAAE,OAAOS,CAAc,CAAC,CAC3E,EACS,CACL,IAASC,EAAT,UAAa,CAAE,EACf,OAAO,SAAgBV,EAAKO,EAAcC,EAAcL,EAAK,CAC3D,IAAIM,EAAiBd,QAAM,UAAW,CAAC,EACvC,OAAAe,EAAE,UAAYV,EACP,OAAO,MAAM,KAAM,CAAC,IAAIU,CAAG,EAAE,OAAOD,CAAc,CAAC,CAChE,CACG,CACH,CACA,SAAS,WAAY,CACnB,OAAI,OAAO,UAAU,KACZ,SAAcE,EAAK,CACxB,OAAO,OAAO,UAAU,KAAK,KAAKA,CAAG,CAC3C,EAEW,SAAcA,EAAK,CACxB,OAAOA,EAAI,QAAQ,qCAAsC,EAAE,CACjE,CAEA,CACA,SAAS5D,OAAKiD,EAAKY,EAAI,CACrB,OAAO,UAAY,CACjB,OAAOA,EAAG,MAAMZ,EAAK,MAAM,UAAU,MAAM,KAAK,UAAW,CAAC,CAAC,CACjE,CACA,CACA,SAASL,QAAMkB,EAAKzG,EAAO,CACzB,OAAO,MAAM,UAAU,MAAM,KAAKyG,EAAKzG,GAAS,CAAC,CACnD,CACA,SAAS+D,OAAK6B,EAAKY,EAAI,CACrBhB,QAAMI,EAAK,SAAUK,EAAKC,EAAK,CAC7B,OAAAM,EAAGP,EAAKC,CAAG,EACJ,EACX,CAAG,CACH,CACA,SAAS,IAAIN,EAAKY,EAAI,CACpB,IAAIE,EAAMjB,SAAOG,CAAG,EAAI,GAAK,GAC7BJ,eAAMI,EAAK,SAAUe,EAAGC,EAAG,CACzB,OAAAF,EAAIE,CAAC,EAAIJ,EAAGG,EAAGC,CAAC,EACT,EACX,CAAG,EACMF,CACT,CACA,SAASlB,QAAMI,EAAKY,EAAI,CACtB,GAAIf,SAAOG,CAAG,GACZ,QAAS,EAAI,EAAG,EAAIA,EAAI,OAAQ,IAC9B,GAAIY,EAAGZ,EAAI,CAAC,EAAG,CAAC,EACd,OAAOA,EAAI,CAAC,MAIhB,SAASM,KAAON,EACd,GAAIA,EAAI,eAAeM,CAAG,GACpBM,EAAGZ,EAAIM,CAAG,EAAGA,CAAG,EAClB,OAAON,EAAIM,CAAG,CAKxB,CACA,SAAST,SAAOQ,EAAK,CACnB,OAAOA,GAAO,MAAQ,OAAOA,GAAO,YAAc,OAAOA,EAAI,QAAU,QACzE,CACA,SAASP,aAAWO,EAAK,CACvB,OAAOA,GAAO,GAAG,SAAS,KAAKA,CAAG,IAAM,mBAC1C,CACA,SAASN,WAASM,EAAK,CACrB,OAAOA,GAAO,GAAG,SAAS,KAAKA,CAAG,IAAM,iBAC1C,CCzGA,IAAIX,OAAOuB,OACP,MAAQvB,OAAK,MACb,MAAQA,OAAK,MACbvB,OAAOuB,OAAK,KACZ,KAAOA,OAAK,KACZ,OAASA,OAAK,OACd,OAASA,OAAK,OACd,WAAaA,OAAK,WAClB,SAAWA,OAAK,SACpB,YAAiB,CACf,WACF,EACI,SAAW,CACb,QAAS,SACT,QAAS,GAGT,IAAK,SAAUY,EAAKY,EAAsB,CACxC,IAAInH,EAAO,KAAK,QAAQ,KAAK,KAAK,iBAAmBuG,CAAG,EACxD,OAAO,KAAK,aAAavG,EAAMmH,CAAoB,CACpD,EAGD,IAAK,SAAUZ,EAAKa,EAAO,CACzB,OAAIA,IAAU,OACL,KAAK,OAAOb,CAAG,GAExB,KAAK,QAAQ,MAAM,KAAK,iBAAmBA,EAAK,KAAK,WAAWa,CAAK,CAAC,EAC/DA,EACR,EAED,OAAQ,SAAUb,EAAK,CACrB,KAAK,QAAQ,OAAO,KAAK,iBAAmBA,CAAG,CAChD,EAGD,KAAM,SAAUc,EAAU,CACxB,IAAIC,EAAO,KACX,KAAK,QAAQ,KAAK,SAAUhB,EAAKiB,EAAe,CAC9CF,EAAS,KAAKC,EAAMA,EAAK,aAAahB,CAAG,GAAIiB,GAAiB,IAAI,QAAQD,EAAK,iBAAkB,EAAE,CAAC,CAC1G,CAAK,CACF,EAED,SAAU,UAAY,CACpB,KAAK,QAAQ,UACd,EAKD,aAAc,SAAUE,EAAW,CACjC,OAAO,KAAK,kBAAoB,aAAeA,EAAY,GAC5D,EAID,YAAa,UAAY,CACvB,OAAO,YAAY,MAAM,KAAM,SAAS,CACzC,EACD,UAAW,SAAUC,EAAQ,CAC3B,KAAK,WAAWA,CAAM,CACvB,EACD,UAAW,SAAUD,EAAW,CAC9B,OAAO,YAAY,KAAK,QAAS,KAAK,QAASA,CAAS,CACzD,CACH,EACA,SAAS,OAAQ,CACf,IAAIE,EAAW,OAAO,QAAW,IAAc,KAAO,QACtD,GAAKA,EAGL,KAAIb,EAAKa,EAAS,KAAOA,EAAS,KAAOA,EAAS,IAClDb,EAAG,MAAMa,EAAU,SAAS,EAC9B,CACA,SAAS,YAAYC,EAAUC,EAASJ,EAAW,CAC5CA,IACHA,EAAY,IAEVG,GAAY,CAAC,OAAOA,CAAQ,IAC9BA,EAAW,CAACA,CAAQ,GAElBC,GAAW,CAAC,OAAOA,CAAO,IAC5BA,EAAU,CAACA,CAAO,GAEpB,IAAIC,EAAkBL,EAAY,aAAeA,EAAY,IAAM,GAC/DM,EAAkBN,EAAY,IAAI,OAAO,IAAMK,CAAe,EAAI,KAClEE,EAAkB,oBACtB,GAAI,CAACA,EAAgB,KAAKP,CAAS,EACjC,MAAM,IAAI,MAAM,0EAA0E,EAE5F,IAAIQ,EAAqB,CACvB,iBAAkBH,EAClB,iBAAkBC,EAClB,aAAc,SAAUG,EAAS,CAC/B,GAAI,CACF,IAAIC,EAAU,oBACdD,EAAQ,MAAMC,EAASA,CAAO,EAC9B,IAAIC,EAAKF,EAAQ,KAAKC,CAAO,IAAMA,EACnC,OAAAD,EAAQ,OAAOC,CAAO,EACfC,CACR,MAAW,CACV,MAAO,EACR,CACF,EACD,oBAAqB,SAAUC,EAAcC,EAAU,CACrD,IAAIC,EAAQ,KAAKD,CAAQ,EACzB,KAAKA,CAAQ,EAAI,UAAoB,CACnC,IAAIE,EAAO,MAAM,UAAW,CAAC,EACzBjB,EAAO,KAIX,SAASkB,GAAW,CAClB,GAAKF,EAGLlE,cAAK,UAAW,SAAUqE,EAAKpC,EAAG,CAChCkC,EAAKlC,CAAC,EAAIoC,CACtB,CAAW,EACMH,EAAM,MAAMhB,EAAMiB,CAAI,CAC9B,CAID,IAAIG,EAAY,CAACF,CAAQ,EAAE,OAAOD,CAAI,EACtC,OAAOH,EAAa,MAAMd,EAAMoB,CAAS,CACjD,CACK,EACD,WAAY,SAAUzC,EAAK,CACzB,OAAO,KAAK,UAAUA,CAAG,CAC1B,EACD,aAAc,SAAU0C,EAAQC,EAAY,CAC1C,GAAI,CAACD,EACH,OAAOC,EAOT,IAAItC,EAAM,GACV,GAAI,CACFA,EAAM,KAAK,MAAMqC,CAAM,CACxB,MAAW,CACVrC,EAAMqC,CACP,CACD,OAAOrC,IAAQ,OAAYA,EAAMsC,CAClC,EACD,YAAa,SAAUX,EAAS,CAC1B,KAAK,SAGL,KAAK,aAAaA,CAAO,IAC3B,KAAK,QAAUA,EACf,KAAK,QAAU,GAElB,EACD,WAAY,SAAUR,EAAQ,CAC5B,IAAIH,EAAO,KAIX,GAAI,OAAOG,CAAM,EAAG,CAClBrD,OAAKqD,EAAQ,SAAUA,EAAQ,CAC7BH,EAAK,WAAWG,CAAM,CAChC,CAAS,EACD,MACD,CAID,IAAIoB,EAAa,MAAM,KAAK,QAAS,SAAUA,EAAY,CACzD,OAAOpB,IAAWoB,CAC1B,CAAO,EACD,GAAI,CAAAA,EAMJ,IAHA,KAAK,QAAQ,KAAKpB,CAAM,EAGpB,CAAC,WAAWA,CAAM,EACpB,MAAM,IAAI,MAAM,qDAAqD,EAEvE,IAAIqB,EAAmBrB,EAAO,KAAK,IAAI,EACvC,GAAI,CAAC,SAASqB,CAAgB,EAC5B,MAAM,IAAI,MAAM,sDAAsD,EAIxE1E,OAAK0E,EAAkB,SAAUV,EAAcC,EAAU,CACvD,GAAI,CAAC,WAAWD,CAAY,EAC1B,MAAM,IAAI,MAAM,wBAA0BC,EAAW,gBAAkBZ,EAAO,KAAO,yCAAyC,EAEhIH,EAAK,oBAAoBc,EAAcC,CAAQ,CACvD,CAAO,EACF,EAKD,WAAY,SAAUJ,EAAS,CAC7B,MAAM,sEAAsE,EAC5E,KAAK,YAAYA,CAAO,CACzB,CACL,EACMc,EAAQ,OAAOf,EAAoB,SAAU,CAC/C,QAAS,CAAE,CACf,CAAG,EACD,OAAAe,EAAM,IAAM,GACZ3E,OAAK2E,EAAO,SAAUC,EAAMX,EAAU,CAChC,WAAWW,CAAI,IACjBD,EAAM,IAAIV,CAAQ,EAAI,KAAKU,EAAOC,CAAI,EAE5C,CAAG,EACD5E,OAAKuD,EAAU,SAAUM,EAAS,CAChCc,EAAM,YAAYd,CAAO,CAC7B,CAAG,EACD7D,OAAKwD,EAAS,SAAUH,EAAQ,CAC9BsB,EAAM,WAAWtB,CAAM,CAC3B,CAAG,EACMsB,CACT,CC7NA,IAAIpD,OAAOuB,OACPzB,SAASE,OAAK,OAClB,eAAiB,CACf,KAAM,eACN,KAAMsD,OACN,MAAOC,QACP,KAAM9E,OACN,OAAQ+E,SACR,SAAUC,UACZ,EACA,SAAS,cAAe,CACtB,OAAO3D,SAAO,YAChB,CACA,SAASwD,OAAK1C,EAAK,CACjB,OAAO,aAAc,EAAC,QAAQA,CAAG,CACnC,CACA,SAAS2C,QAAM3C,EAAKvG,EAAM,CACxB,OAAO,aAAY,EAAG,QAAQuG,EAAKvG,CAAI,CACzC,CACA,SAASoE,OAAKyC,EAAI,CAChB,QAASR,EAAI,eAAe,OAAS,EAAGA,GAAK,EAAGA,IAAK,CACnD,IAAIE,EAAM,aAAY,EAAG,IAAIF,CAAC,EAC9BQ,EAAGoC,OAAK1C,CAAG,EAAGA,CAAG,CAClB,CACH,CACA,SAAS4C,SAAO5C,EAAK,CACnB,OAAO,aAAc,EAAC,WAAWA,CAAG,CACtC,CACA,SAAS6C,YAAW,CAClB,OAAO,aAAY,EAAG,OACxB,CC1BA,IAAIzD,OAAOuB,OACPzB,SAASE,OAAK,OAClB,mBAAiB,CACf,KAAM,sBACN,KAAMsD,OACN,MAAOC,QACP,KAAM9E,OACN,OAAQ+E,SACR,SAAUC,UACZ,EACI,cAAgB3D,SAAO,cAC3B,SAASwD,OAAK1C,EAAK,CACjB,OAAO,cAAcA,CAAG,CAC1B,CACA,SAAS2C,QAAM3C,EAAKvG,EAAM,CACxB,cAAcuG,CAAG,EAAIvG,CACvB,CACA,SAASoE,OAAKyC,EAAI,CAChB,QAASR,EAAI,cAAc,OAAS,EAAGA,GAAK,EAAGA,IAAK,CAClD,IAAIE,EAAM,cAAc,IAAIF,CAAC,EAC7BQ,EAAG,cAAcN,CAAG,EAAGA,CAAG,CAC3B,CACH,CACA,SAAS4C,SAAO5C,EAAK,CACnB,OAAO,cAAc,WAAWA,CAAG,CACrC,CACA,SAAS6C,YAAW,CAClBhF,OAAK,SAAUmC,EAAK8C,EAAG,CACrB,OAAO,cAAc9C,CAAG,CAC5B,CAAG,CACH,CC9BA,IAAIZ,OAAOuB,OACPzB,SAASE,OAAK,OAClB,qBAAiB,CACf,KAAM,wBACN,MAAOuD,QACP,KAAMD,OACN,KAAM7E,OACN,OAAQ+E,SACR,SAAUC,UACZ,EACI,YAAc,UACdzJ,MAAM8F,SAAO,SACb,eAAiB,yBAAwB,EACzC,SAAWA,SAAO,UAAYA,SAAO,UAAU,UAAY,IAAI,MAAM,4BAA4B,EAErG,SAASyD,QAAMI,EAAYtJ,EAAM,CAC/B,GAAI,SAGJ,KAAIuJ,EAAW,OAAOD,CAAU,EAChC,eAAe,SAAUE,EAAW,CAClCA,EAAU,aAAaD,EAAUvJ,CAAI,EACrCwJ,EAAU,KAAK,WAAW,CAC9B,CAAG,EACH,CACA,SAASP,OAAKK,EAAY,CACxB,GAAI,SAGJ,KAAIC,EAAW,OAAOD,CAAU,EAC5BvC,EAAM,KACV,sBAAe,SAAUyC,EAAW,CAClCzC,EAAMyC,EAAU,aAAaD,CAAQ,CACzC,CAAG,EACMxC,EACT,CACA,SAAS3C,OAAKiD,EAAU,CACtB,eAAe,SAAUmC,EAAW,CAElC,QADIC,EAAaD,EAAU,YAAY,gBAAgB,WAC9CnD,EAAIoD,EAAW,OAAS,EAAGpD,GAAK,EAAGA,IAAK,CAC/C,IAAIvC,EAAO2F,EAAWpD,CAAC,EACvBgB,EAASmC,EAAU,aAAa1F,EAAK,IAAI,EAAGA,EAAK,IAAI,CACtD,CACL,CAAG,CACH,CACA,SAASqF,SAAOG,EAAY,CAC1B,IAAIC,EAAW,OAAOD,CAAU,EAChC,eAAe,SAAUE,EAAW,CAClCA,EAAU,gBAAgBD,CAAQ,EAClCC,EAAU,KAAK,WAAW,CAC9B,CAAG,CACH,CACA,SAASJ,YAAW,CAClB,eAAe,SAAUI,EAAW,CAClC,IAAIC,EAAaD,EAAU,YAAY,gBAAgB,WACvDA,EAAU,KAAK,WAAW,EAC1B,QAAS,EAAIC,EAAW,OAAS,EAAG,GAAK,EAAG,IAC1CD,EAAU,gBAAgBC,EAAW,CAAC,EAAE,IAAI,EAE9CD,EAAU,KAAK,WAAW,CAC9B,CAAG,CACH,CAQA,IAAI,oBAAsB,IAAI,OAAO,wCAAyC,GAAG,EACjF,SAAS,OAAOjD,EAAK,CACnB,OAAOA,EAAI,QAAQ,MAAO,OAAO,EAAE,QAAQ,oBAAqB,KAAK,CACvE,CACA,SAAS,0BAA2B,CAClC,GAAI,CAAC5G,OAAO,CAACA,MAAI,iBAAmB,CAACA,MAAI,gBAAgB,YACvD,OAAO,KAET,IAAI+J,EAAY,SACdC,EACAC,EACAJ,EAYF,GAAI,CAEFI,EAAmB,IAAI,cAAc,UAAU,EAC/CA,EAAiB,KAAI,EACrBA,EAAiB,MAAM,IAAMF,EAAY,uBAAyBA,EAAY,uCAAuC,EACrHE,EAAiB,MAAK,EACtBD,EAAeC,EAAiB,EAAE,OAAO,CAAC,EAAE,SAC5CJ,EAAYG,EAAa,cAAc,KAAK,CAC7C,MAAW,CAGVH,EAAY7J,MAAI,cAAc,KAAK,EACnCgK,EAAehK,MAAI,IACpB,CACD,OAAO,SAAUkK,EAAe,CAC9B,IAAItB,EAAO,GAAG,MAAM,KAAK,UAAW,CAAC,EACrCA,EAAK,QAAQiB,CAAS,EAGtBG,EAAa,YAAYH,CAAS,EAClCA,EAAU,YAAY,mBAAmB,EACzCA,EAAU,KAAK,WAAW,EAC1BK,EAAc,MAAM,KAAMtB,CAAI,EAC9BoB,EAAa,YAAYH,CAAS,CAEtC,CACA,CCtHA,IAAI7D,OAAOuB,OACPzB,SAASE,OAAK,OACd,KAAOA,OAAK,KAChB,cAAiB,CACf,KAAM,gBACN,KAAMsD,OACN,MAAOC,QACP,KAAM9E,OACN,OAAQ+E,SACR,SAAUC,UACZ,EACI,IAAM3D,SAAO,SACjB,SAASwD,OAAK1C,EAAK,CACjB,GAAI,CAACA,GAAO,CAAC,KAAKA,CAAG,EACnB,OAAO,KAET,IAAIuD,EAAY,gBAAkB,OAAOvD,CAAG,EAAE,QAAQ,cAAe,MAAM,EAAI,qCAC/E,OAAO,SAAS,IAAI,OAAO,QAAQ,IAAI,OAAOuD,CAAS,EAAG,IAAI,CAAC,CACjE,CACA,SAAS1F,OAAKiD,EAAU,CAEtB,QADI0C,EAAU,IAAI,OAAO,MAAM,MAAM,EAC5B,EAAIA,EAAQ,OAAS,EAAG,GAAK,EAAG,IACvC,GAAK,KAAKA,EAAQ,CAAC,CAAC,EAGpB,KAAIC,EAAMD,EAAQ,CAAC,EAAE,MAAM,GAAG,EAC1BxD,EAAM,SAASyD,EAAI,CAAC,CAAC,EACrB1D,EAAM,SAAS0D,EAAI,CAAC,CAAC,EACzB3C,EAASf,EAAKC,CAAG,EAErB,CACA,SAAS2C,QAAM3C,EAAKvG,EAAM,CACnBuG,IAGL,IAAI,OAAS,OAAOA,CAAG,EAAI,IAAM,OAAOvG,CAAI,EAAI,kDAClD,CACA,SAASmJ,SAAO5C,EAAK,CACf,CAACA,GAAO,CAAC,KAAKA,CAAG,IAGrB,IAAI,OAAS,OAAOA,CAAG,EAAI,mDAC7B,CACA,SAAS6C,YAAW,CAClBhF,OAAK,SAAUiF,EAAG9C,EAAK,CACrB4C,SAAO5C,CAAG,CACd,CAAG,CACH,CACA,SAAS,KAAKA,EAAK,CACjB,OAAO,IAAI,OAAO,cAAgB,OAAOA,CAAG,EAAE,QAAQ,cAAe,MAAM,EAAI,SAAS,EAAE,KAAK,IAAI,MAAM,CAC3G,CCtDA,IAAI,KAAOW,OACP,OAAS,KAAK,OAClB,iBAAiB,CACf,KAAM,iBACN,KAAM+B,OACN,MAAOC,QACP,KAAM9E,OACN,OAAQ+E,SACR,SAAUC,UACZ,EACA,SAAS,gBAAiB,CACxB,OAAO,OAAO,cAChB,CACA,SAASH,OAAK1C,EAAK,CACjB,OAAO,eAAgB,EAAC,QAAQA,CAAG,CACrC,CACA,SAAS2C,QAAM3C,EAAKvG,EAAM,CACxB,OAAO,eAAc,EAAG,QAAQuG,EAAKvG,CAAI,CAC3C,CACA,SAASoE,OAAKyC,EAAI,CAChB,QAASR,EAAI,iBAAiB,OAAS,EAAGA,GAAK,EAAGA,IAAK,CACrD,IAAIE,EAAM,eAAc,EAAG,IAAIF,CAAC,EAChCQ,EAAGoC,OAAK1C,CAAG,EAAGA,CAAG,CAClB,CACH,CACA,SAAS4C,SAAO5C,EAAK,CACnB,OAAO,eAAgB,EAAC,WAAWA,CAAG,CACxC,CACA,SAAS6C,YAAW,CAClB,OAAO,eAAc,EAAG,OAC1B,CCzBA,oBAAiB,CACf,KAAM,gBACN,KACA,MACA,KACA,OACA,QACF,EACI,cAAgB,GACpB,SAAS,KAAK7C,EAAK,CACjB,OAAO,cAAcA,CAAG,CAC1B,CACA,SAAS,MAAMA,EAAKvG,EAAM,CACxB,cAAcuG,CAAG,EAAIvG,CACvB,CACA,SAAS,KAAKqH,EAAU,CACtB,QAASd,KAAO,cACV,cAAc,eAAeA,CAAG,GAClCc,EAAS,cAAcd,CAAG,EAAGA,CAAG,CAGtC,CACA,SAAS,OAAOA,EAAK,CACnB,OAAO,cAAcA,CAAG,CAC1B,CACA,SAAS,SAASA,EAAK,CACrB,cAAgB,EAClB,CChCA,QAAiB,CAEjBW,eAA2B+C,mBAAkCC,qBAAoCC,cAA4BC,iBAA6BC,eAA0B,mGCwJhL,OAAO,MAAS,WAClB,KAAO,IAER,UAAY,CAGX,IAAI,OAAS,gBACT,OAAS,sCACT,SAAW,mEACX,QAAU,uBACV,aAAe,kIACf,aAAe,2GACnB,SAAS,EAAEC,EAAG,CAEZ,OAAOA,EAAI,GAAK,IAAMA,EAAIA,CAC3B,CACD,SAAS,YAAa,CACpB,OAAO,KAAK,SACb,CACG,OAAO,KAAK,UAAU,QAAW,aACnC,KAAK,UAAU,OAAS,UAAY,CAClC,OAAO,SAAS,KAAK,QAAO,CAAE,EAAI,KAAK,eAAc,EAAK,IAAM,EAAE,KAAK,YAAW,EAAK,CAAC,EAAI,IAAM,EAAE,KAAK,WAAU,CAAE,EAAI,IAAM,EAAE,KAAK,YAAa,GAAI,IAAM,EAAE,KAAK,cAAa,CAAE,EAAI,IAAM,EAAE,KAAK,eAAe,EAAI,IAAM,IACnO,EACI,QAAQ,UAAU,OAAS,WAC3B,OAAO,UAAU,OAAS,WAC1B,OAAO,UAAU,OAAS,YAE5B,IAAI,IACA,OACA,KACA,IACJ,SAAS,MAAMC,EAAQ,CAMrB,oBAAa,UAAY,EAClB,aAAa,KAAKA,CAAM,EAAI,IAAOA,EAAO,QAAQ,aAAc,SAAUC,EAAG,CAClF,IAAIC,EAAI,KAAKD,CAAC,EACd,OAAO,OAAOC,GAAM,SAAWA,EAAI,OAAS,OAASD,EAAE,WAAW,CAAC,EAAE,SAAS,EAAE,GAAG,MAAM,EAAE,CAC5F,GAAI,IAAO,IAAOD,EAAS,GAC7B,CACD,SAAS,IAAIhE,EAAKmE,EAAQ,CAGxB,IAAI,EACAzD,EACAD,EACA2D,EACAC,EAAO,IACPC,EACAzD,EAAQsD,EAAOnE,CAAG,EAiBtB,OAbIa,GAAS,OAAOA,GAAU,UAAY,OAAOA,EAAM,QAAW,aAChEA,EAAQA,EAAM,OAAOb,CAAG,GAMtB,OAAO,KAAQ,aACjBa,EAAQ,IAAI,KAAKsD,EAAQnE,EAAKa,CAAK,GAK7B,OAAOA,EAAK,CAClB,IAAK,SACH,OAAO,MAAMA,CAAK,EACpB,IAAK,SAGH,OAAO,SAASA,CAAK,EAAI,OAAOA,CAAK,EAAI,OAC3C,IAAK,UACL,IAAK,OAKH,OAAO,OAAOA,CAAK,EAKrB,IAAK,SAIH,GAAI,CAACA,EACH,MAAO,OAUT,GALA,KAAO,OACPyD,EAAU,GAIN,OAAO,UAAU,SAAS,MAAMzD,CAAK,IAAM,iBAAkB,CAK/D,IADAuD,EAASvD,EAAM,OACV,EAAI,EAAG,EAAIuD,EAAQ,GAAK,EAC3BE,EAAQ,CAAC,EAAI,IAAI,EAAGzD,CAAK,GAAK,OAMhC,OAAAJ,EAAI6D,EAAQ,SAAW,EAAI,KAAO,IAAM;AAAA,EAAQ,IAAMA,EAAQ,KAAK;AAAA,EAAQ,GAAG,EAAI;AAAA,EAAOD,EAAO,IAAM,IAAMC,EAAQ,KAAK,GAAG,EAAI,IAChI,IAAMD,EACC5D,CACR,CAID,GAAI,KAAO,OAAO,KAAQ,SAExB,IADA2D,EAAS,IAAI,OACR,EAAI,EAAG,EAAIA,EAAQ,GAAK,EACvB,OAAO,IAAI,CAAC,GAAM,WACpB1D,EAAI,IAAI,CAAC,EACTD,EAAI,IAAIC,EAAGG,CAAK,EACZJ,GACF6D,EAAQ,KAAK,MAAM5D,CAAC,GAAK,IAAM,KAAO,KAAOD,CAAC,OAOpD,KAAKC,KAAKG,EACJ,OAAO,UAAU,eAAe,KAAKA,EAAOH,CAAC,IAC/CD,EAAI,IAAIC,EAAGG,CAAK,EACZJ,GACF6D,EAAQ,KAAK,MAAM5D,CAAC,GAAK,IAAM,KAAO,KAAOD,CAAC,GAStD,OAAAA,EAAI6D,EAAQ,SAAW,EAAI,KAAO,IAAM;AAAA,EAAQ,IAAMA,EAAQ,KAAK;AAAA,EAAQ,GAAG,EAAI;AAAA,EAAOD,EAAO,IAAM,IAAMC,EAAQ,KAAK,GAAG,EAAI,IAChI,IAAMD,EACC5D,CACV,CACF,CAIG,OAAO,KAAK,WAAc,aAC5B,KAAO,CAEL,KAAM,MACN,IAAM,MACN,KAAM,MACN,KAAM,MACN,KAAM,MACN,IAAM,MACN,KAAM,MACZ,EACI,KAAK,UAAY,SAAUI,EAAO0D,EAAUC,EAAO,CAOjD,IAAI1E,EAOJ,GANA,IAAM,GACN,OAAS,GAKL,OAAO0E,GAAU,SACnB,IAAK1E,EAAI,EAAGA,EAAI0E,EAAO1E,GAAK,EAC1B,QAAU,SAIH,OAAO0E,GAAU,WAC1B,OAASA,GAOX,GADA,IAAMD,EACFA,GAAY,OAAOA,GAAa,aAAe,OAAOA,GAAa,UAAY,OAAOA,EAAS,QAAW,UAC5G,MAAM,IAAI,MAAM,gBAAgB,EAMlC,OAAO,IAAI,GAAI,CACb,GAAI1D,CACZ,CAAO,CACP,GAKM,OAAO,KAAK,OAAU,aACxB,KAAK,MAAQ,SAAU,KAAM,QAAS,CAIpC,IAAI,EACJ,SAAS,KAAKsD,EAAQnE,EAAK,CAIzB,IAAIU,EACAD,EACAI,EAAQsD,EAAOnE,CAAG,EACtB,GAAIa,GAAS,OAAOA,GAAU,SAC5B,IAAKH,KAAKG,EACJ,OAAO,UAAU,eAAe,KAAKA,EAAOH,CAAC,IAC/CD,EAAI,KAAKI,EAAOH,CAAC,EACbD,IAAM,OACRI,EAAMH,CAAC,EAAID,EAEX,OAAOI,EAAMH,CAAC,GAKtB,OAAO,QAAQ,KAAKyD,EAAQnE,EAAKa,CAAK,CACvC,CA2BD,GArBA,KAAO,OAAO,IAAI,EAClB,aAAa,UAAY,EACrB,aAAa,KAAK,IAAI,IACxB,KAAO,KAAK,QAAQ,aAAc,SAAUoD,EAAG,CAC7C,MAAO,OAAS,OAASA,EAAE,WAAW,CAAC,EAAE,SAAS,EAAE,GAAG,MAAM,EAAE,CACzE,CAAS,GAgBC,OAAO,KAAK,KAAK,QAAQ,OAAQ,GAAG,EAAE,QAAQ,SAAU,GAAG,EAAE,QAAQ,QAAS,EAAE,CAAC,EAMnF,SAAI,KAAK,IAAM,KAAO,GAAG,EAKlB,OAAO,SAAY,WAAa,KAAK,CAC1C,GAAI,CACd,EAAW,EAAE,EAAI,EAKX,MAAM,IAAI,YAAY,YAAY,CACxC,EAEA,iBCtbA,MAAiB,YACjB,SAAS,aAAc,CACrBtD,sBACO,EACT,CCJA,IAAI,OAASA,YACT,SAAW+C,IACX,QAAU,CAACC,KAA2B,EAC1C,aAAiB,OAAO,YAAY,SAAU,OAAO,oDCKrD,IAAI,iBACJ,SAAS,eAAec,EAAOC,EAAU,CACvC,MAAMC,EAAcF,EAAM,OAAO,CAC/B,KAAM,SACV,CAAG,EACD,OAAIC,EAAiBC,EACd,OAAOA,EAAaC,GAClBC,SAASD,EAAK,IAAI,aAAa,EAAG,kBAAkB,CAC5D,CACH,CACA,MAAe,qBAAI,OAAO,CACxB,YAAa,YACb,cAAe,CACb,YAAe,iBACf,iBAAoB,sBACpB,oBAAuB,sBACvB,WAAc,gBACd,aAAgB,kBAChB,YAAe,iBACf,eAAkB,iBAClB,QAAW,aACX,MAAS,iBACT,MAAS,WACT,eAAkB,oBAClB,wBAAyB,yBACzB,QAAW,aACX,MAAS,gBACV,EACD,gBAAiB,CACf,OAAO,KAAK,WACb,EACD,cAAcE,EAAM,CAClB,MAAMC,EAAa,KAAK,YAAY,cAAa,EACjD,GAAI,CAACA,EAAW,OAAQ,KAAM,sBAC9B,OAAOA,EAAW,KAAK,CACrB,KAAAD,CACN,CAAK,GAAKC,EAAW,KAAK,CACpB,GAAI,MAAM,IAAI,kBAAkB,CACjC,IAAKA,EAAW,GAAG,CAAC,CACtB,EACD,qBAAsB,CACpB,OAAO,KAAK,gBACb,EACD,oBAAoBC,EAAO,CACzB,MAAMC,EAAiBD,GAASE,eAChC,GAAI,KAAK,kBAAoB,CAACD,EAC5B,OAAO,KAAK,iBAEd,MAAME,EAAY,KAAK,cAAcF,CAAc,EACnD,OAAIE,EAAU,KAAO,IAAI,KAAK,iBAAkB,IAAI,IAClD,MAAM,IAAI,mBAAoBA,EAAU,EAAE,EAC1C,KAAK,iBAAmBA,EACxB,KAAK,WAAY,EAAC,QAAQ,mBAAoBA,CAAS,GAElDA,CACR,EACD,iBAAkB,CAChB,OAAO,KAAK,YACb,EACD,gBAAiB,CACf,OAAO,KAAK,YAAY,OACzB,EACD,eAAeC,EAAa,CAC1B,KAAK,YAAcA,CACpB,EACD,eAAgB,CACd,OAAO,KAAK,WAAW,OACxB,EACD,WAAWC,EAAa,CAEtB,GAAI,CAAC,KAAK,UAAS,EAAI,OACvB,MAAMC,EAAoB,KAAK,iBAAiB,IAAI,UAAU,EACxDC,EAAmB,IAAID,EAAmBD,CAAW,EAC3D,GAAIE,EAAkB,OAAOA,EAC7B,MAAMC,EAAU,KAAK,SAAS,IAAIH,CAAW,EAC7C,GAAKG,EACL,OAAOA,EAAQ,IAAI,OAAO,CAC3B,EAED,gBAAiB,CACf,GAAI,iBAAkB,OAAO,iBAC7B,MAAMd,EAAW,KAAK,YAAY,IAAI,kBAAkB,EAClDC,EAAc,eAAe,KAAK,MAAOD,CAAQ,EACvD,wBAAmB,MAAM,QAAQ,WAAY,mBAAoBC,CAAW,EACrE,gBACR,EACD,UAAW,CACT,OAAO,KAAK,MAAM,OACnB,EACD,YAAa,CACX,OAAO,KAAK,QAAQ,OACrB,EACD,mBAAoB,CAClB,MAAMc,EAAiB,IAAI,KAAK,WAAW,yBAAyB,EAAG,SAAS,EAC1EC,EAAU9K,MAAI6K,EAAgBX,GAC3B,KAAK,QAAQ,KAAK,CACvB,KAAAA,CACR,CAAO,CACF,EACD,OAAO,MAAM,QAAQ,WAAY,qBAAsB,OAAO,QAAQY,CAAO,EAAG,OAAQ,IAAI,CAAC,CAC9F,EACD,wBAAyB,CACvB,OAAO,IAAI,KAAK,WAAW,yBAAyB,EAAG,QAAQ,CAChE,EACD,WAAW,CACT,KAAAC,CACJ,EAAK,CACD,KAAK,iBAAmB,IAAI,QAAQ,CAACC,EAAgBC,IAAkB,CACrE,KAAK,iBAAmBD,EACxB,KAAK,gBAAkBC,CAC7B,CAAK,EACD,KAAK,aAAe,IAAI,SAAS,MAAM,CACrC,KAAAF,CACN,CAAK,CACF,EACD,aAAc,CACZ,MAAO,CAAC,MAAM,QAAQ,WAAY,0BAA0B,EAAG,MAAM,QAAQ,WAAY,wBAAwB,EAAG,MAAM,QAAQ,WAAY,wBAAwB,EAAG,MAAM,QAAQ,WAAY,2BAA2B,EAAG,MAAM,QAAQ,WAAY,6BAA6B,EAAG,MAAM,QAAQ,WAAY,0BAA0B,CAAC,CACjV,EACD,QAAQpK,EAASuK,EAAarB,EAAOsB,EAAOC,EAAUjB,EAAYW,EAAS,CACzE,KAAK,YAAcI,EACnB,KAAK,MAAQrB,EACb,KAAK,MAAQsB,EACb,KAAK,SAAWC,EAChB,KAAK,WAAajB,EAClB,KAAK,QAAUW,EACf,KAAK,oBAAmB,EACxB,KAAK,iBAAiBI,CAAW,CAClC,EACD,OAAOvK,KAAYyG,EAAM,CACvB,KAAK,gBAAgB,GAAGA,CAAI,CAC7B,EACD,gBAAiB,CACf,YAAK,MAAK,EACH,KAAK,gBACb,CACH,CAAC,EC7Ic,mBAAI,OAAO,CACxB,YAAa,UACb,cAAe,CACb,UAAW,QACZ,EACD,YAAa,CACX,MAAMiE,EAAW,SAAS,QAAQ,SAClC,KAAK,aAAe,CAAC,SAAS,QAAQ,YAAa,GAGnD,SAAS,QAAQ,SAAW,CAACjB,EAAOzJ,IAAY,CAC9C,MAAM2K,EAAYD,EAAS,KAAK,SAAS,QAASjB,EAAOzJ,CAAO,EAGhE,OAAI2K,IAAc,GAAc,IAChC,KAAK,YAAYlB,EAAOzJ,CAAO,EAC/B,KAAK,cAAa,EACX2K,EACb,EACI,OAAO,iBAAiB,WAAY,IAAM,CACxC,MAAMC,EAAW,SAAS,QAAQ,YAAW,EAGzCA,IAAa,KAAK,aAAa,GAAG,CAAC,EACrC,KAAK,aAAa,QAElB,KAAK,aAAa,QAAQA,CAAQ,EAEpC,KAAK,cAAa,CACxB,CAAK,CACF,EACD,YAAYnB,EAAO,CACjB,QAAAoB,CACJ,EAAK,CACD,GAAIA,EAAS,CACX,KAAK,aAAa,CAAC,EAAIpB,EACvB,MACD,CACD,KAAK,aAAa,QAAQA,CAAK,CAChC,EACD,eAAgB,CACd,KAAK,WAAY,EAAC,QAAQ,eAAgB,KAAK,aAAa,CAAC,CAAC,CAC/D,EACD,OAAOqB,EAAoB,CACzB,GAAIA,GAAsB,KAAK,aAAa,OAAS,EAAG,CACtDA,IACA,MACD,CAGD,KAAK,aAAa,QAGlB,SAAS,QAAQ,SAAS,KAAK,aAAa,MAAK,EAAI,CACnD,QAAS,EACf,CAAK,CACF,CACH,CAAC,ECzDc,uBAAI,OAAO,CACxB,YAAa,UACb,cAAe,CACb,iBAAkB,gBAClB,iBAAkB,gBAClB,gBAAiB,cAClB,EACD,cAAc/J,EACdgK,EAAY,GAAI,CACd,KAAK,YAAchK,EACnB,KAAK,gBAAkBgK,CACxB,EACD,eAAgB,CACd,MAAO,CAAC,CAAC,KAAK,WACf,EACD,cAAe,CAER,KAAK,cAAa,GACvB,MAAM,QAAQ,eAAgB,KAAK,YAAa,GAAG,KAAK,eAAe,CACxE,CACH,CAAC,ECfD,SAAS,cAAcC,EAAQ,CAC7B,OAAIA,EACW,MAAM,QAAQ,WAAY,cAAeA,CAAM,EAChD,0BAEW,MAAM,QAAQ,YAAa,kBAAkB,EAC9C,yBAC1B,CACA,MAAe,iBAAI,OAAO,CACxB,sBAAuB,GACvB,aAAc,CACZ,MAAO,OAAO,KAAK,UAAU,MAAM,EAAE,EAAE,EACxC,EACD,gBAAiB,CACf,OAAI,KAAK,YAAW,EAAI,OACR,KAAK,aACN,QAAQ,GAAG,SAAS,CACpC,EACD,WAAWhL,EAAS,CAClB,KAAK,YAAc,SAAS,KAAK,YAAa,IAAK,EACnD,KAAK,YAAc,SAAS,KAAK,YAAa,IAAO,EACrD,KAAK,aAAaA,EAAS,CAAC,SAAU,OAAQ,UAAW,YAAa,gBAAgB,CAAC,EACvF,KAAK,YAAc,MAAM,QAAQ,YAAa,aAAa,CAC5D,EACD,iBAAkB,CAChB,KAAK,YAAY,SACjB,KAAK,YAAY,QAClB,EACD,cAAe,CACb,aAAc,YACd,cAAe,aACf,mBAAoB,kBACpB,kBAAmB,iBACnB,aAAc,YACd,kBAAmB,mBACnB,sBAAuB,oBACvB,0BAA2B,yBAC3B,uBAAwB,sBACxB,yBAA0B,wBAC1B,cAAe,aACf,eAAgB,cAChB,YAAa,WACb,QAAW,cACZ,EACD,WAAY,CACV,KAAK,QAAQ,OAAO,EACpB,KAAK,YAAW,CACjB,EACD,aAAaiL,EAAW,CAElBA,IAAc,SAAS,UAAU,OAAO,SAAS,QACtD,EACD,YAAa,CACX,MAAMC,EAAW,KAAK,QAAU,KAAK,OAAO,WACtCC,EAAqB,KAAK,QAAU,CAAC,KAAK,OAAO,YACvD,OAAO,KAAK,KAAK,WAAU,GAAMD,GAAYC,CAC9C,EACD,YAAa,CACX,MAAMC,EAAW,IAAI,KAAK,OAAQ,IAAI,EAChCC,EAAM,CAAC,KAAK,YAAY,GAAI,KAAK,QAAQ,GAAI,KAAK,KAAK,EAAE,EAC/D,OAAID,GAAUC,EAAI,KAAKD,CAAQ,EACxB,aAAaC,EAAI,KAAK,GAAG,CAAC,EAClC,EACD,gBAAiB,CACf,OAAI,KAAK,WAGH,KAAK,UAAU,MAAK,IAAO,KAAK,eAAuB,GAEtD,KAAK,gBAAkB,KAAK,eAAe,SAAU,GAAI,EACjE,EACD,qBAAsB,CACpB,MAAMC,EAAQ,KAAK,iBACbC,EAAa,MAAM,IAAI,KAAK,WAAU,CAAE,GAAK,GACnD,OAAID,EAAM,UAAY,CAACC,EAAW,SAAW,MAAMD,EAAM,OAAO,EAAE,QAAQC,EAAW,OAAO,IAC1F,KAAK,QAAQ,oBAAqBD,EAAM,OAAO,EACxCA,IAELC,EAAW,SAAS,KAAK,QAAQ,oBAAqBA,EAAW,OAAO,EACrEA,EACR,EACD,uBAAuBC,EAAY,CAEjC,GAAI,KAAK,WAAU,EAAI,OACvB,MAAMC,EAAU,QAAQ,SAGxB,KAAK,OAASD,EACd,GAAI,CACF,MAAM,IAAI,KAAK,aAAc,CAC3B,WAAAA,EACA,QAAAC,CACR,CAAO,EACD,KAAK,QAAQ,oBAAqBA,CAAO,CAC/C,MAA+E,CACzE,MAAM,KAAK,CAACnG,EAAOb,IAAQ,CACrB,OAAOA,CAAG,EAAE,WAAW,YAAY,GAAG,MAAM,OAAOA,CAAG,CAClE,CAAO,EACD,MAAM,IAAI,KAAK,aAAc,CAC3B,WAAA+G,EACA,QAAAC,CACR,CAAO,CACF,CACD,KAAK,YAAW,EAChB,KAAK,YAAW,CACjB,EACD,uBAAwB,CACtB,KAAK,eAAiB,KACtB,MAAM,OAAO,KAAK,WAAY,GAC9B,KAAK,QAAQ,mBAAmB,CACjC,EACD,WAAW,CACT,UAAAC,EACA,UAAAC,CACJ,EAAK,CACD,MAAMC,EAAQ,MAAM,QAAQ,WAAY,sBAAuB,CAC7D,KAAMF,EACN,SAAU,KAAK,QAAQ,EAC7B,CAAK,EACD,OAAOE,EAAM,QAAQ,KAAK,IAAM,CAC9B,KAAK,eAAe,OAAQ,cAAe,CACzC,MAAOA,EAAM,SAAU,EACvB,UAAAD,CACR,CAAO,CACP,CAAK,EAAE,MAAM,CAAC,CACR,aAAAE,CACN,IAAU,CACJ,KAAK,eAAe,OAAQ,cAAe,CACzC,MAAOA,EACP,UAAAF,CACR,CAAO,CACP,CAAK,CACF,EACD,YAAY,CACV,UAAAD,EACA,MAAApG,EACA,UAAAqG,CACJ,EAAK,CACD,MAAMC,EAAQ,MAAM,QAAQ,WAAY,sBAAuB,CAC7D,KAAMF,EACN,MAAApG,EACA,SAAU,KAAK,QAAQ,EAC7B,CAAK,EACD,OAAOsG,EAAM,UAAU,KAAK,IAAM,CAChC,KAAK,eAAe,OAAQ,eAAgB,CAC1C,MAAOA,EAAM,SAAU,EACvB,UAAAD,CACR,CAAO,CACP,CAAK,EAAE,MAAM,CAAC,CACR,aAAAE,CACN,IAAU,CACJ,KAAK,eAAe,OAAQ,eAAgB,CAC1C,MAAOA,EACP,UAAAF,CACR,CAAO,CACP,CAAK,CACF,EACD,gBAAgB,CACd,OAAAX,EACA,UAAAW,CACJ,EAAK,CACD,MAAMG,EAAa,cAAcd,CAAM,EACvC,KAAK,eAAe,OAAQ,kBAAmB,CAC7C,MAAOc,EAAW,OAAQ,EAC1B,UAAAH,CACN,CAAK,CACF,EACD,eAAe,CACb,cAAAI,EACA,MAAAvL,EACA,UAAAmL,CACJ,EAAK,CACD,OAAO,QAAQ,QAAQ,MAAM,QAAQ,WAAY,0BAA2BI,EAAevL,CAAK,CAAC,EAAE,KAAKwL,GAAa,CACnH,KAAK,eAAe,OAAQ,kBAAmB,CAC7C,MAAOA,EAAU,IAAI,OAAO,EAC5B,UAAAL,CACR,CAAO,CACP,CAAK,EAAE,MAAM,CAAC,CACR,aAAAE,CACN,IAAU,CACJ,KAAK,eAAe,OAAQ,kBAAmB,CAC7C,MAAOA,EACP,UAAAF,CACR,CAAO,CACP,CAAK,CACF,EACD,SAAS,CACP,KAAAM,EACA,UAAAN,CACJ,EAAK,CACD,OAAO,QAAQ,QAAQ,MAAM,QAAQ,WAAY,mBAAoBM,CAAI,CAAC,EAAE,KAAKC,GAAO,CACtF,KAAK,eAAe,OAAQ,YAAa,CACvC,MAAO,IAAIA,EAAK,CAAC,OAAQ,UAAU,CAAC,EACpC,UAAAP,CACR,CAAO,CACP,CAAK,EAAE,MAAM,CAAC,CACR,aAAAE,CACN,IAAU,CACJ,KAAK,eAAe,OAAQ,YAAa,CACvC,MAAOA,EACP,UAAAF,CACR,CAAO,CACP,CAAK,CACF,EACD,WAAY,CACV,OAAO,QAAQ,QAAQ,MAAM,QAAQ,WAAY,yBAA0B,KAAK,KAAK,EAAE,CAAC,EAAE,KAAKQ,GAAc,CAC3G,KAAK,eAAe,OAAQ,aAAc,CACxC,WAAAA,EACA,eAAgB,KAAK,KAAK,kBAAmB,CACrD,CAAO,CACP,CAAK,CACF,EACD,yBAAyB,CACvB,WAAAX,CACJ,EAAK,CACD,OAAO,QAAQ,IAAI,CAAC,MAAM,QAAQ,WAAY,yBAA0B,KAAK,KAAK,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,CAACW,CAAU,IAAM,CAC7G,KAAK,eAAe,OAAQ,kBAAmB,CAC7C,WAAAA,EACA,iBAAkBX,EAClB,GAAG,KAAK,KAAK,KAAK,WAAU,EAAI,gBAAgB,CACxD,CAAO,CACP,CAAK,CACF,EACD,mBAAmB,CACjB,OAAAY,EACA,UAAAC,CACD,EAAEC,EAAM,CACP,MAAMjK,EAAO,CACX,OAAQ,qBAAqB,UAC7B,KAAM+J,EACN,QAASC,CACf,EACqBC,EAAK,aACRjK,EAAK,QAAU,KAAK,KAAK,OAAO,IAAI,YAAY,CAAC,IAC/D,MAAMkK,EAAmBD,EAAK,sBAC9B,OAAIC,GACFlK,EAAK,aAAa,EAAIkK,EACflK,IAETA,EAAK,KAAOiK,EAAK,mBACVjK,EACR,EACD,0BAA0B+J,EAAQ,CAChC,MAAMI,EAAa,KAAK,aAClBpB,EAAW,IAAI,KAAK,OAAQ,IAAI,EAChCiB,EAAY,KAAK,QAAQ,GACzBI,EAAS,KAAK,mBAAmB,CACrC,OAAAL,EACA,UAAAC,CACN,EAAO,KAAK,IAAI,EACZ,OAAO,QAAQ,IAAI,CAAC,MAAM,QAAQ,WAAY,yBAA0B,KAAK,KAAK,EAAE,EAAG,MAAM,QAAQ,WAAY,mBAAoBjB,EAAUiB,EAAW,KAAK,KAAK,EAAE,EAAG,MAAM,QAAQ,WAAY,6BAA8BI,CAAM,CAAC,CAAC,EAAE,KAAK,CAAC,CAACN,EAAYjO,EAAMwO,CAAQ,IAAM,CAChR,KAAK,eAAe,OAAQ,kBAAmB,CAC7C,WAAAP,EACA,WAAAK,EACA,SAAUtO,EAAK,WACf,aAAcwO,EAAS,YAAa,EACpC,eAAgBA,EAAS,YAAa,EACtC,GAAG,KAAK,KAAK,WAAY,CACjC,CAAO,CACP,CAAK,CACF,EACD,kBAAmB,CACjB,MAAMC,EAAmB,KAAK,sBACxBH,EAAa,KAAK,aACxB,GAAI,CAACA,GAAcG,EAAiB,QAClC,OAAO,KAAK,yBAAyBA,CAAgB,EAEvD,MAAMC,EAAgB,KAAK,WAAa,KAAK,UAAU,qBACvD,GAAI,CAACA,GAAiB,KAAK,OAAQ,CACjC,GAAI,KAAK,OAAO,OAAO,yBAAyB,EAAG,OAAO,KAAK,4BAC/D,GAAI,KAAK,OAAO,OAAO,uBAAuB,EAAG,OAAO,KAAK,0BAA0B,KAAK,OAAO,IAAI,OAAO,CAAC,CAChH,CACD,OAAO,QAAQ,IAAI,CAAC,MAAM,QAAQ,WAAY,yBAA0B,KAAK,KAAK,EAAE,EAAG,MAAM,QAAQ,WAAY,mBAAoB,IAAI,KAAK,OAAQ,IAAI,EAAG,KAAK,QAAQ,GAAI,KAAK,KAAK,EAAE,EAAG,MAAM,QAAQ,WAAY,4BAA6B,IAAIA,EAAe,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAACT,EAAYjO,EAAMwO,CAAQ,IAAM,CACrT,KAAK,eAAe,OAAQ,kBAAmB,CAC7C,WAAAP,EACA,WAAAK,EACA,SAAUtO,EAAK,WACf,aAAcwO,EAAS,YAAa,EACpC,eAAgBA,EAAS,YAAa,EACtC,GAAG,KAAK,KAAK,WAAY,CACjC,CAAO,CACP,CAAK,CACF,EACD,kBAAkB,CAChB,WAAAG,CACJ,EAAK,CACD,OAAO,QAAQ,IAAI,CAAC,MAAM,QAAQ,WAAY,yBAA0B,KAAK,KAAK,EAAE,EAAG,MAAM,QAAQ,WAAY,4BAA6BA,CAAU,CAAC,CAAC,EAAE,KAAK,CAAC,CAACV,EAAYO,CAAQ,IAAM,CAC3L,KAAK,eAAe,OAAQ,sBAAuB,CACjD,WAAAP,EACA,aAAcO,EAAS,YAAa,EACpC,eAAgBA,EAAS,YAAa,EACtC,eAAgB,KAAK,KAAK,kBAAmB,CACrD,CAAO,CACP,CAAK,CACF,EACD,eAAeb,EAAc,CAC3B,MAAI,CAAC,KAAK,gBAAkB,KAAK,eAAe,IAAI,QAAQ,IAAM,qBAAqB,MAAcA,EAC9F,CACL,GAAGA,EACH,GAAI,KAAK,eAAe,EAC9B,CACG,EACD,aAAc,CACZ,MAAM3N,EAAO,KAAK,eAAe,CAC/B,SAAU,CACR,KAAM,KAAK,MACZ,EACD,OAAQ,qBAAqB,MAC7B,MAAO,KAAK,KACZ,SAAU,KAAK,QACf,QAAS,KAAK,MACpB,CAAK,EACK4O,EAAe,MAAM,QAAQ,WAAY,sBAAuB5O,CAAI,EAC1E,YAAK,eAAiB4O,EACfA,EAAa,UAAU,MAAM,CAAC,CACnC,aAAAjB,CACN,IAAU,CAECA,GACL,KAAK,QAAQ,QAASA,EAAa,MAAM,CAC/C,CAAK,CACF,EACD,aAAc,CACZ,KAAK,QAAQ,SAAS,CACvB,EACD,WAAW,CACT,SAAAa,CACJ,EAAK,CAED,KAAK,YAAY,SACjB,KAAK,YAAY,SACjB,MAAMxO,EAAO,KAAK,eAAe,CAC/B,SAAAwO,EACA,OAAQ,qBAAqB,UAC7B,MAAO,KAAK,KACZ,SAAU,KAAK,QACf,QAAS,KAAK,MACpB,CAAK,EACKI,EAAe,MAAM,QAAQ,WAAY,sBAAuB5O,CAAI,EAC1E,YAAK,QAAQ,QAAQ,EACd4O,EAAa,UAAU,KAAK,IAAM,CAEvC,KAAK,YAAY,SACjB,KAAK,YAAY,SACjB,KAAK,sBAAqB,EAC1B,KAAK,QAAQ,UAAWA,CAAY,CAC1C,CAAK,EAAE,MAAM,CAAC,CACR,aAAAjB,CACN,IAAU,CAEJ,GAAI,CAACA,EAAc,OACnB,KAAK,QAAQ,QAASA,EAAa,MAAM,EACzC,MAAMtI,EAASlE,MAAIwM,EAAa,OAAQ,QAAQ,EAChD,KAAK,eAAe,OAAQ,cAAetI,CAAM,CACvD,CAAK,CACF,CACH,CAAC,EC1WD,SAAS,YAAYwJ,EAAS,CAC5B,OAAO,MAAM,CACX,QAAAA,EACA,WAAY,CAAC,CACX,MAAO,GACP,SAAU,CAChB,EAAO,CACD,MAAO,EACP,SAAU,GAChB,CAAK,EACD,QAAS,CAAC,CACR,MAAO,EACP,SAAU,CAChB,EAAO,CACD,MAAO,EACP,SAAU,GAChB,CAAK,EACD,OAAQ,eACZ,CAAG,CACH,CClBY,oBAAe5J,aAAkB,SAAS,CAAC,EAAI,SAASrF,EAAUC,EAAOC,EAAQC,EAASC,EAAM,CACxG,IAAIC,EAAiBL,EAAU,gBAAkB,SAASM,EAAQC,EAAc,CAC5E,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGpC,EAEE,MAAO,oCACHP,EAAU,kBAAkBK,EAAeH,EAAQ,IAAI,GAAID,GAAUI,EAAeJ,EAAO,IAAI,GAAID,EAAU,MAAM,eAAe,KAAKC,IAA2BD,EAAU,aAAe,IAAKC,GAAU,KAAOI,EAAeJ,EAAO,gBAAgB,EAAIA,EAASA,GAAU,KAAOI,EAAeJ,EAAO,YAAY,EAAIA,EAAQ,CAAC,KAAO,KAAK,KAAO,CAAE,EAAC,KAAOG,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,EAAE,OAAS,EAAE,CAAC,CAAC,CAAC,CAAC,EAC3a,SACN,EAAE,EAAI,SAASJ,EAAUC,EAAOC,EAAQC,EAASC,EAAM,CACnD,IAAIM,EAAQL,EAAiBL,EAAU,gBAAkB,SAASM,EAAQC,EAAc,CACpF,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGpC,EAEE,MAAO,yCACHP,EAAU,kBAAmBU,GAAUA,EAASL,EAAeH,EAAQ,YAAY,IAAMD,GAAU,KAAOI,EAAeJ,EAAO,YAAY,EAAIA,KAAY,KAAOS,EAASV,EAAU,MAAM,cAAgB,OAAOU,GAAW,WAAaA,EAAO,KAAKT,IAA2BD,EAAU,aAAe,IAAI,CAAC,KAAO,aAAa,KAAO,GAAG,KAAOI,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,GAAG,OAAS,EAAE,CAAC,CAAC,CAAC,EAAIM,EAAS,EAC7a,WACN,EAAE,SAAW,CAAC,EAAE,UAAU,EAAE,KAAO,SAASV,EAAUC,EAAOC,EAAQC,EAASC,EAAM,CAChF,IAAII,EAAQE,EAAQC,EAAOV,IAA2BD,EAAU,aAAe,IAAKY,EAAOZ,EAAU,MAAM,cAAea,EAAO,WAAYC,EAAOd,EAAU,iBAAkBK,EAAiBL,EAAU,gBAAkB,SAASM,EAAQC,EAAc,CACxP,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGpC,EAEE,MAAO,6BACHO,GAASJ,GAAUA,EAASL,EAAeH,EAAQ,aAAa,IAAMD,GAAU,KAAOI,EAAeJ,EAAO,aAAa,EAAIA,KAAY,KAAOS,EAASE,EAAS,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAO,CAAC,KAAO,cAAc,KAAO,GAAG,KAAOP,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,EAAE,OAAS,EAAE,CAAC,CAAC,CAAC,EAAIM,EAAS,EAC9U;AAAA,MACEF,EAASH,EAAeH,EAAQ,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAO,YAAY,EAAIA,EAAQ,CAAC,KAAO,KAAK,KAAO,GAAG,GAAKD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAAE,QAAUJ,EAAU,KAAK,KAAOI,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,CAAC,EAAE,IAAM,CAAC,KAAO,EAAE,OAAS,EAAE,CAAC,CAAC,CAAC,IAAM,KAAOI,EAAS,IAC5S;AAAA,2BACAM,GAASJ,GAAUA,EAASL,EAAeH,EAAQ,aAAa,IAAMD,GAAU,KAAOI,EAAeJ,EAAO,aAAa,EAAIA,KAAY,KAAOS,EAASE,EAAS,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAO,CAAC,KAAO,cAAc,KAAO,GAAG,KAAOP,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,EAAE,OAAS,EAAE,CAAC,CAAC,CAAC,EAAIM,EAAS,EAC9U;AAAA,0CACAI,GAAQT,EAAeH,EAAQ,KAAK,GAAID,GAAUI,EAAeJ,EAAO,KAAK,GAAIW,GAAQ,KAAKD,EAAO,QAAQ,CAAC,KAAO,MAAM,KAAO,CAAE,EAAC,KAAOP,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,EAAE,OAAS,EAAE,CAAC,CAAC,CAAC,CAAC,EACtN;AAAA;AAAA;AAAA;AAAA,gBACAU,GAASJ,GAAUA,EAASL,EAAeH,EAAQ,WAAW,IAAMD,GAAU,KAAOI,EAAeJ,EAAO,WAAW,EAAIA,KAAY,KAAOS,EAASE,EAAS,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAO,CAAC,KAAO,YAAY,KAAO,GAAG,KAAOP,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,EAAE,OAAS,EAAE,CAAC,CAAC,CAAC,EAAIM,EAAS,EACxU,KACAI,GAASJ,GAAUA,EAASL,EAAeH,EAAQ,UAAU,IAAMD,GAAU,KAAOI,EAAeJ,EAAO,UAAU,EAAIA,KAAY,KAAOS,EAASE,EAAS,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAO,CAAC,KAAO,WAAW,KAAO,GAAG,KAAOP,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,EAAE,OAAS,EAAE,CAAC,CAAC,CAAC,EAAIM,EAAS,IACnUF,GAAWE,GAAUA,EAASL,EAAeH,EAAQ,UAAU,IAAMD,GAAU,KAAOI,EAAeJ,EAAO,UAAU,EAAIA,KAAY,KAAOS,EAASE,EAAS,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAO,CAAC,KAAO,WAAW,KAAO,GAAG,KAAOP,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,EAAE,OAAS,EAAE,CAAC,CAAC,CAAC,EAAIM,KAAa,KAAOF,EAAS,IAC7V;AAAA;AAAA;AAAA;AAAA;AAAA,mCACAM,GAASJ,GAAUA,EAASL,EAAeH,EAAQ,aAAa,IAAMD,GAAU,KAAOI,EAAeJ,EAAO,aAAa,EAAIA,KAAY,KAAOS,EAASE,EAAS,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAO,CAAC,KAAO,cAAc,KAAO,GAAG,KAAOP,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,GAAG,OAAS,EAAE,CAAC,CAAC,CAAC,EAAIM,EAAS,EAChV,eACAI,GAASJ,GAAUA,EAASL,EAAeH,EAAQ,YAAY,IAAMD,GAAU,KAAOI,EAAeJ,EAAO,YAAY,EAAIA,KAAY,KAAOS,EAASE,EAAS,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAO,CAAC,KAAO,aAAa,KAAO,GAAG,KAAOP,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,GAAG,OAAS,EAAE,CAAC,CAAC,CAAC,EAAIM,EAAS,EAC7U;AAAA,QACEF,EAASH,EAAeH,EAAQ,IAAI,EAAE,KAAKS,EAAQV,GAAU,KAAOI,EAAeJ,EAAO,YAAY,EAAIA,EAAQ,CAAC,KAAO,KAAK,KAAO,GAAG,GAAKD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAAE,QAAUJ,EAAU,KAAK,KAAOI,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,CAAC,EAAE,IAAM,CAAC,KAAO,GAAG,OAAS,EAAE,CAAC,CAAC,CAAC,IAAM,KAAOI,EAAS,IAC9S;AAAA;AAAA,qDACAM,GAASJ,GAAUA,EAASL,EAAeH,EAAQ,UAAU,IAAMD,GAAU,KAAOI,EAAeJ,EAAO,UAAU,EAAIA,KAAY,KAAOS,EAASE,EAAS,OAAOF,IAAWG,EAASH,EAAO,KAAKC,EAAO,CAAC,KAAO,WAAW,KAAO,GAAG,KAAOP,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,GAAG,OAAS,EAAE,CAAC,CAAC,CAAC,EAAIM,EAAS,EACvU;AAAA;AAAA,CACN,EAAE,QAAU,EAAI,CAAC,ECpDU2E,kCAAkB,SAAS,CAAC,SAAW,CAAC,EAAE,UAAU,EAAE,KAAO,SAASrF,EAAUC,EAAOC,EAAQC,EAASC,EAAM,CACrI,IAAII,EAAQH,EAAiBL,EAAU,gBAAkB,SAASM,EAAQC,EAAc,CACpF,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGpC,EAEE,MAAO;AAAA,SACHP,EAAU,iBAAiBA,EAAU,QAASQ,GAAWA,GAAWA,GAAWA,GAAWA,EAAUJ,GAAQC,EAAeD,EAAK,MAAM,IAAOC,EAAeG,EAAO,SAAS,IAAOH,EAAeG,EAAO,OAAO,IAAOH,EAAeG,EAAO,SAAS,IAAOH,EAAeG,EAAO,cAAc,IAAOH,EAAeG,EAAO,YAAY,EAAIP,CAAM,CAAC,EACrV;AAAA;AAAA;AAAA;AAAA;AAAA,CACN,EAAE,QAAU,EAAI,CAAC,ECDX,KAAO,KAAK,QAAQ,MAAM,WAC1B,gBAAkB,OAAO,OAAO,CACpC,eAAgB,GAChB,QAAS,CACX,CAAC,EACK,UAAY,KAAK,OAAO,CAC5B,UAAW,QACX,YAAa,gBACb,UAAW,iBACX,eAAgB,MAChB,WAAY,KAAK,UAAU,WAC3B,WAAY,KAAK,UAAU,WAC3B,YAAa,gBACb,QAAS,CACP,OAAQ,uBACR,KAAM,CACJ,GAAI,qBACJ,YAAa,cAAc,OAAO,CAChC,QAAS,CACjB,CAAO,CACF,EACD,OAAQ,uBACR,KAAM,oBACP,EACD,kBAAmB,CACjB,OAAU,SACV,OAAU,QACX,EACD,SAAU,CACR,kBAAmB,SACnB,mBAAoB,QACrB,EACD,GAAI,CACF,MAAO,YACP,OAAQ,YACT,EACD,eAAgB,CAEd,OAAO,OAAO,GAAI,IAAI,CACvB,EACD,SAAU,cACV,YAAa,CACP,KAAK,YAAY,KAAK,cAAc,SAAU,KAAK,UAAU,EAC7D,KAAK,UAAU,KAAK,cAAc,OAAQ,KAAK,QAAQ,EACvD,KAAK,YAAY,KAAK,cAAc,SAAU,KAAK,UAAU,CAClE,EACD,UAAW,CACT,KAAK,QAAO,CACb,EACD,UAAW,CACT,KAAK,QAAO,CACb,EACD,cAAciP,EAAU,GAAM,CAC5B,KAAK,GAAG,OAAO,KAAK,WAAYA,CAAO,CACxC,EACD,gBAAiB,CACf,KAAK,UAAU,MAAM,EAAE,eAAc,CACtC,CACH,CAAC,EACK,iBAAmB,UAAU,OAAO,CACxC,UAAW,iBACX,UAAW,0BACX,YAAa,yBACb,UAAW,CACT,YAAY,KAAK,EAAE,CACpB,CACH,CAAC,EACK,eAAiB,UAAU,OAAO,CACtC,UAAW,eACX,UAAW,wBACX,YAAa,sBACf,CAAC,EACK,eAAiB,KAAK,OAAO,CACjC,UAAW,CAAC,kBAAkB,EAC9B,WAAY,CACV,MAAMC,EAAO,KAAK,UAAU,MAAM,EAClC,OAAIA,IAAS,QAAgB,4BACzBA,IAAS,QAAgB,4BACtB,oBACR,EACD,SAAU,aAAa,SAAS,CAC9B,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUnP,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,MAAO,mCACR,EACD,QAAW,EACf,CAAG,CACH,CAAC,EACK,iBAAmB,KAAK,OAAO,CACnC,UAAW,gBACX,SAAU,qBACV,UAAW,CACT,MAAM,IAAM,CACV,KAAK,QAAO,CACb,EAAE,GAAI,CACR,CACH,CAAC,ECxGc,iBAAI,OAAO,CACxB,YAAa,QACb,cAAe,CACb,KAAQ,YACR,aAAc,YACd,cAAe,aACf,eAAgB,cAChB,YAAa,WACb,eAAgB,aACjB,EACD,WAAW,CACT,YAAAgP,EACA,iBAAAC,EACA,mBAAAC,EACA,mBAAAC,CACJ,EAAK,CACD,KAAK,YAAcH,EACnB,KAAK,iBAAmBC,EACxB,KAAK,mBAAqBC,EAC1B,KAAK,mBAAqBC,CAC3B,EACD,UAAUrN,EAAS,CACjB,MAAMsN,EAAe,UAAU,OAAOtN,CAAO,EACvCE,EAAO,IAAIoN,EACjB,YAAK,YAAY,KAAKpN,CAAI,EACnBA,CACR,EACD,UAAUF,EAAS,CACjB,MAAMsN,EAAe,eAAe,OAAOtN,CAAO,EAC5CE,EAAO,IAAIoN,EACjB,YAAK,iBAAiB,KAAKpN,CAAI,EACxBA,CACR,EACD,WAAWA,EAAM,CACf,YAAK,YAAY,KAAKA,CAAI,EACnBA,CACR,EACD,YAAYF,EAAS,CACnB,MAAMuN,EAAe,iBAAiB,OAAOvN,CAAO,EAC9CE,EAAO,IAAIqN,EACjB,YAAK,mBAAmB,KAAKrN,CAAI,EAC1BA,CACR,EACD,SAASsN,EAASC,EAAUnB,EAAMW,EAAM,CACtC,MAAMS,EAAc,IAAI,aAAa,CACnC,QAAAF,EACA,KAAAlB,CACN,CAAK,EACKqB,EAAQ,KAAK,UAAU,CAC3B,YAAaF,EACb,WAAY,yBACZ,SAAU,IAAI,eAAe,CAC3B,MAAOnB,EACP,KAAAW,CACR,CAAO,EACD,iBAAkB,CAChBS,EAAY,QAAO,CACpB,EACD,UAAW,CACTC,EAAM,cAAa,EACnB,MAAM,QAAQ,OAAOrB,EAAK,EAAE,GAAI,OAAQ,aAAa,CACtD,CACP,CAAK,EACD,OAAAqB,EAAM,cAAa,EACnB,KAAK,SAASD,EAAa,CACzB,SAAY,CACVC,EAAM,QAAO,CACd,EACD,OAAU,CACRA,EAAM,cAAc,EAAK,CAC1B,EACD,OAAU,CACRA,EAAM,cAAc,EAAK,CAC1B,CACP,CAAK,EACMA,CACR,EACD,YAAY3N,EAAS,CACnB,MAAM2N,EAAQ,IAAI,iBAAiB3N,CAAO,EAC1C,YAAK,mBAAmB,KAAK2N,CAAK,EAC3BA,CACR,CACH,CAAC,ECpFW,cAAexK,aAAkB,SAAS,CAAC,EAAI,SAASrF,EAAUC,EAAOC,EAAQC,EAASC,EAAM,CACxG,IAAII,EAAQG,EAAOX,EAAU,OAAQY,EAAOZ,EAAU,iBAAkBK,EAAiBL,EAAU,gBAAkB,SAASM,EAAQC,EAAc,CAChJ,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGpC,EAEE,MAAO,eACHK,EAAOD,GAASH,GAAWA,GAAWA,GAAWA,EAAUJ,GAAQC,EAAeD,EAAK,MAAM,IAAOC,EAAeG,EAAO,SAAS,IAAOH,EAAeG,EAAO,OAAO,IAAOH,EAAeG,EAAO,eAAe,IAAOH,EAAeG,EAAO,iBAAiB,EAAIP,CAAM,CAAC,EAC5Q;AAAA,cACAW,EAAOD,GAASH,GAAWA,GAAWA,GAAWA,EAAUJ,GAAQC,EAAeD,EAAK,MAAM,IAAOC,EAAeG,EAAO,SAAS,IAAOH,EAAeG,EAAO,OAAO,IAAOH,EAAeG,EAAO,eAAe,IAAOH,EAAeG,EAAO,cAAc,EAAIP,CAAM,CAAC,EACzQ;AAAA,CACN,EAAE,EAAI,SAASD,EAAUC,EAAOC,EAAQC,EAASC,EAAM,CACnD,IAAII,EAAQG,EAAOX,EAAU,iBAAkBY,EAAOX,IAA2BD,EAAU,aAAe,CAAE,GAAGa,EAAOb,EAAU,MAAM,cAAeK,EAAiBL,EAAU,gBAAkB,SAASM,EAAQC,EAAc,CAC7N,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGpC,EAEE,MAAO,eACHI,EAAOX,EAAU,QAASQ,GAAWA,GAAWA,GAAWA,EAAUJ,GAAQC,EAAeD,EAAK,MAAM,IAAOC,EAAeG,EAAO,SAAS,IAAOH,EAAeG,EAAO,OAAO,IAAOH,EAAeG,EAAO,eAAe,IAAOH,EAAeG,EAAO,cAAc,EAAIP,CAAM,CAAC,EACnR;AAAA,cACAU,GAAQN,EAAeH,EAAQ,eAAe,GAAID,GAAUI,EAAeJ,EAAO,eAAe,GAAIY,GAAQ,KAAKD,GAAQP,EAAeH,EAAQ,SAAS,GAAID,GAAUI,EAAeJ,EAAO,SAAS,GAAIY,GAAQ,KAAKD,EAAO,wCAAwC,CAAC,KAAO,UAAU,KAAO,CAAE,EAAC,KAAOR,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,GAAG,OAAS,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,KAAO,gBAAgB,KAAO,CAAC,OAAUH,GAAU,KAAOI,EAAeJ,EAAO,QAAQ,EAAIA,CAAO,EAAE,KAAOG,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,GAAG,OAAS,EAAE,CAAC,CAAC,CAAC,CAAC,EAChjB;AAAA,CACN,EAAE,SAAW,CAAC,EAAE,UAAU,EAAE,KAAO,SAASJ,EAAUC,EAAOC,EAAQC,EAASC,EAAM,CAChF,IAAII,EAAQG,EAAOX,EAAU,OAAQY,EAAOZ,EAAU,iBAAkBa,EAAOZ,IAA2BD,EAAU,aAAe,IAAKK,EAAiBL,EAAU,gBAAkB,SAASM,EAAQC,EAAc,CAChN,GAAI,OAAO,UAAU,eAAe,KAAKD,EAAQC,CAAY,EAC3D,OAAOD,EAAOC,CAAY,CAGpC,EAEE,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CACHK,EAAOD,GAASH,GAAWA,GAAWA,GAAWA,EAAUJ,GAAQC,EAAeD,EAAK,MAAM,IAAOC,EAAeG,EAAO,SAAS,IAAOH,EAAeG,EAAO,OAAO,IAAOH,EAAeG,EAAO,eAAe,IAAOH,EAAeG,EAAO,aAAa,EAAIP,CAAM,CAAC,EACxQ;AAAA;AAAA;AAAA;AAAA,IACEO,EAASH,EAAeH,EAAQ,IAAI,EAAE,KAAKW,EAAQZ,GAAU,KAAOI,EAAeJ,EAAO,OAAO,EAAIA,EAAQ,CAAC,KAAO,KAAK,KAAO,GAAG,GAAKD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAAE,QAAUJ,EAAU,KAAK,KAAOI,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,GAAG,OAAS,EAAE,CAAC,CAAC,CAAC,IAAM,KAAOI,EAAS,MACxSA,EAASH,EAAeH,EAAQ,IAAI,EAAE,KAAKW,EAAQZ,GAAU,KAAOI,EAAeJ,EAAO,QAAQ,EAAIA,EAAQ,CAAC,KAAO,KAAK,KAAO,GAAG,GAAKD,EAAU,QAAQ,EAAGI,EAAM,CAAC,EAAE,QAAUJ,EAAU,KAAK,KAAOI,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,GAAG,OAAS,EAAE,EAAE,IAAM,CAAC,KAAO,GAAG,OAAS,EAAE,CAAC,CAAC,CAAC,IAAM,KAAOI,EAAS,IAC3S;AAAA,yDACAI,EAAOD,GAASH,GAAWA,GAAWA,GAAWA,EAAUJ,GAAQC,EAAeD,EAAK,MAAM,IAAOC,EAAeG,EAAO,SAAS,IAAOH,EAAeG,EAAO,OAAO,IAAOH,EAAeG,EAAO,eAAe,IAAOH,EAAeG,EAAO,SAAS,EAAIP,CAAM,CAAC,EACpQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CACN,EAAE,QAAU,EAAI,CAAC,ECvCX,UAAY,KAAK,OAAO,CAC5B,UAAW,aACX,SAAU,cACV,SAAU,CACR,iBAAkB,YACnB,EACD,aAAc,CACZ,MAAM,QAAQ,eAAgB,SAAS,CACxC,EACD,iBAAkB,CAChB,OAAO,KAAK,OACb,CACH,CAAC,ECZK,YAAc,CAAC,WAAY,UAAW,iBAAkB,OAAQ,WAAY,aAAc,aAAc,OAAQ,UAAW,WAAY,cAAc,EAC5I,mBAAU,OAAO,CAC9B,YAAa,CACX,SAAY,CACV,OAAQ,UACR,MAAO,MACP,KAAM,EACP,EACD,aAAgB,CACd,OAAQ,YACR,MAAO,gBACP,KAAM,EACP,CACF,EACD,YAAa,CACX,KAAK,OAAO,MAAM,WAAY,MAAOmD,OAAK,KAAK,cAAe,IAAI,CAAC,CACpE,EACD,WAAY,CACV,aAAc,MACf,EACD,cAAe,CACb,KAAK,YAAY,OAClB,EACD,eAAgB,CACd,MAAM0M,EAAY,eAClB,GAAI,SAAS,YAAaA,CAAS,EAAG,CACpC,MAAMhE,EAAY,MAAM,QAAQ,YAAa,kBAAkB,EAC/D,KAAK,WAAW,IAAIA,EAAU,IAAI,MAAM,CAAC,GAAG,SAAS,QAAQ,EAAE,EAC/D,MACD,CACD,KAAK,MAAK,EACV,KAAK,QAAO,CACb,EACD,SAAU,CACR,KAAK,SAAS,IAAI,UAAU,CAC1B,MAAO,EACR,EAAC,CACH,EACD,UAAUiE,EAAQ,CAChB,KAAK,SAAS,IAAI,UAAU,CAC1B,OAAAA,CACD,EAAC,CACH,CACH,CAAC,EChDc,GAACC,GACP,GAAG,WAAWA,CAAG,CAAC,KCGrBC,iBAAiB,MAAM,QAAQ,eAAe,EAC9C,YAAc,MAAM,QAAQ,YAAY,EAC/B,2BAAS,OAAO,CAC7B,WAAY,SACZ,UAAW,cACX,WAAW/N,EAAS,CAClB,KAAK,aAAaA,EAAS,CAAC,aAAc,WAAW,CAAC,CACvD,EACD,cAAe,CACb,KAAK,OAAS,KAAK,KAAK,UAAU,KAAK,UAAU,EACjD,KAAK,SAAS,KAAK,OAAQ,CACzB,MAASkB,OAAK,KAAK,KAAK,cAAe,KAAK,KAAM,cAAc,EAChE,KAAQA,OAAK,KAAK,KAAK,cAAe,KAAK,KAAM,aAAa,CACpE,CAAK,CACF,EACD,cAAe,CACb,KAAK,SAAS6M,iBAAgB,YAAa,KAAK,UAAU,EAC1D,KAAK,SAASA,iBAAgB,eAAgB,KAAK,aAAa,EAChE,KAAK,IAAI,SAAS,KAAK,SAAS,CACjC,EACD,eAAgB,CACd,KAAK,cAAcA,gBAAc,EAC5B,KAAK,OAAO,eAAgB,GAAE,KAAK,IAAI,YAAY,KAAK,SAAS,CACvE,EACD,WAAW,CACT,OAAAC,CACJ,EAAK,CACD,KAAK,eAAeA,CAAM,CAC3B,EACD,cAAcC,EAAU,CACtB,KAAK,eAAeA,CAAQ,CAC7B,EACD,eAAeC,EAAI,CACb,CAAC,KAAK,OAAO,QAAS,GAAI,YAAY,QAAQ,WAAY,KAAK,KAAMA,CAAE,GAC3E,KAAK,OAAO,OACb,CACH,CAAC,EC7BK,eAAiB,MAAM,QAAQ,eAAe,EAC9C,UAAY,MAAM,QAAQ,SAAS,EACzC,SAAS,oBAAqB,CAC5B,OAAO,KAAK,UAAU,QAAQ,EAAE,QAAO,CACzC,CACA,MAAM,QAAU,KAAK,OAAO,CAC1B,UAAW,YACX,SAAU,aAAa,SAAS,CAC9B,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUpQ,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,MAAO;AAAA;AAAA;AAAA;AAAA,GACR,EACD,QAAW,EACf,CAAG,EACD,GAAI,CACF,IAAK,SACN,EACD,QAAS,CACP,IAAK,oBACL,QAAS,CACP,GAAI,wBACJ,YAAa,aACd,EACD,QAAS,uBACV,EACD,UAAUiQ,EAAY,CACpB,KAAK,GAAG,IAAI,YAAY,YAAa,CAACA,CAAU,CACjD,CACH,CAAC,EACK,cAAgB,KAAK,OAAO,CAChC,UAAW,CAAC,iBAAiB,EAC7B,YAAa,OAAO,OAAO,CACzB,eAAgB,EACpB,CAAG,EACD,SAAU,aAAa,SAAS,CAC9B,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUrQ,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,MAAO,yBACR,EACD,QAAW,EACf,CAAG,EACD,QAAS,CACP,OAAQ,eACT,EACD,SAAS8P,EAAQ,CACf,MAAMlL,EAAS,KAAK,UAAU,QAAQ,EAGtC,GAFIA,EAAO,YAAcA,EAAO,YAAY,KAAOkL,GAAU,KAAK,IAAI,MAAMlL,EAAO,YAAY,GAAIkL,CAAM,IACrG,KAAK,WAAaA,GAClB,KAAK,UAAY,KAAK,IAAI,MAAM,KAAK,SAAUA,CAAM,EAAG,MAAO,EACpE,EACD,OAAQ,CACN,KAAK,OAAO,OACb,CACH,CAAC,EACK,oBAAsB,cAAc,OAAO,CAE/C,SAAU,mBACV,UAAW,CACT,KAAK,cAAc,SAAU,IAAI,aAAe,CACjD,CACH,CAAC,EACK,gBAAkB,cAAc,OAAO,CAC3C,UAAW,oBACX,UAAW,CAAC,CACV,cAAe,kBACf,UAAW,UACf,CAAG,EACD,WAAWhO,EAAS,CAClB,KAAK,aAAaA,EAAS,CAAC,QAAS,cAAe,UAAU,CAAC,EAC/D,KAAK,OAAS,KAAK,UAAU,QAAQ,EACrC,MAAMoO,EAAW,MAAM,QAAQ,QAAQ,EACvC,KAAK,SAASA,EAAU,QAAS,KAAK,KAAK,CAC5C,EACD,cAAe,CACb,KAAK,SAAS,UAAW,eAAgB,KAAK,KAAK,EACnD,KAAK,SAAS,eAAgB,gBAAiB,KAAK,WAAW,EAC/D,KAAK,YAAW,CACjB,EACD,eAAgB,CACd,KAAK,cAAc,cAAc,CAClC,EACD,aAAc,CACZ,MAAMlO,EAAO,KAAK,OAAO,YACnBmO,EAAQnO,EAAK,IAAI,WAAU,EAC3BoO,EAASpO,EAAK,IAAI,YAAW,EAC7BqO,EAAa,KAAK,MAAM,OAAM,EAE9BC,EADY,KAAK,MAAM,MAAK,EACT,EAAIH,EAAQ,EAC/BI,EAAMF,EAAa,EAAID,EAAS,EACtCpO,EAAK,IAAI,IAAI,CACX,KAAM,GAAGsO,CAAI,EACb,IAAK,GAAGC,CAAG,CACjB,CAAK,CACF,EACD,SAAST,EAAQU,EAAU,CACzB,GAAI,CAAC,KAAK,OAAO,QAAS,EAAE,MAAO,GACnC,MAAMR,EAAK,KAAK,OAAO,YAAY,GAGnC,GAAIA,IAAOF,GAAU,KAAK,IAAI,MAAME,EAAIF,CAAM,GAAK,OAASU,EAAU,MAAO,EAC9E,CACH,CAAC,EACK,YAAc,CAClB,MAAO,OACP,UAAW,OACX,KAAM,EACN,YAAa,EACb,WAAY,EACZ,SAAU,KACV,IAAK,EACL,cAAe,CACjB,EACM,cAAgB,cAAc,OAAO,CACzC,WAAW,CACT,MAAAC,CACJ,EAAK,CACD,KAAK,OAAS,KAAK,UAAU,QAAQ,EACrC,KAAK,MAAQA,EACb,MAAMP,EAAW,MAAM,QAAQ,QAAQ,EACvC,KAAK,SAASA,EAAU,QAAS,KAAK,KAAK,CAC5C,EACD,aAAatL,EAAQ5C,EAAMF,EAAS,CAClCE,EAAK,IAAI,SAAS,uBAAuB,EACzC,MAAM0O,EAAa,OAAO,CAAE,EAAE,YAAa5O,CAAO,EAClD,KAAK,SAAWA,EAAQ,SACxB,KAAK,SAAS,eAAgB,gBAAiB,KAAK,KAAK,EACzD,KAAK,SAAS,UAAW,eAAgB,KAAK,KAAK,EACnD,KAAK,SAASE,EAAM,yBAA0B,QAAQ,KAAK,YAAa0O,CAAU,CAAC,EACnF,KAAK,YAAYA,CAAU,CAC5B,EACD,cAAc9L,EAAQ5C,EAAM,CAC1BA,EAAK,IAAI,YAAY,uBAAuB,EAC5C,KAAK,cAAc,cAAc,EACjC,KAAK,cAAc,SAAS,EAC5B,KAAK,cAAcA,CAAI,CACxB,EACD,YAAY0O,EAAY,CACtB,MAAM1O,EAAO,KAAK,OAAO,YACrB0O,EAAW,UACb1O,EAAK,IAAI,IAAI,CACX,MAAO,GAAG0O,EAAW,QAAQ,CACrC,CAAO,EAEH,MAAMN,EAASpO,EAAK,IAAI,YAAW,EAC7BuO,EAAM,KAAK,aAAaH,EAAQM,CAAU,EAC1CP,EAAQO,EAAW,UAAY1O,EAAK,IAAI,aACxCsO,EAAO,KAAK,SAASH,EAAOO,CAAU,EAC5C1O,EAAK,IAAI,IAAI,CACX,IAAK,GAAGuO,CAAG,EACX,KAAM,GAAGD,CAAI,CACnB,CAAK,CACF,EACD,SAASH,EAAO,CACd,KAAAG,EACA,MAAAK,EACA,cAAAC,EACA,WAAAC,CACJ,EAAK,CAED,GADIF,IAAU,UAASL,GAAQO,EAAaV,GACxCG,EAAOM,EAAe,OAAOA,EACjC,MAAME,EAAY,KAAK,MAAM,MAAK,EAClC,OAAIR,EAAOH,EAAQW,EAAYF,EACtBE,EAAYX,EAAQS,EAEtBN,CACR,EAED,aAAaF,EAAQ,CACnB,IAAAG,EACA,UAAAQ,EACA,cAAAH,EACA,YAAAI,CACJ,EAAK,CACD,MAAMX,EAAa,KAAK,MAAM,OAAM,EACpC,OAAIU,IAAc,OACZR,EAAMS,EAAcZ,EAASQ,EAAgBP,GAC/CU,EAAY,UACL,KAAK,aAAaX,EAAQ,CAC/B,IAAAG,EACA,UAAAQ,EACA,cAAAH,EACA,YAAAI,CACV,CAAS,GAEIA,EAAcT,GAEvBA,GAAOH,EACHG,GAAOK,EAAsBL,EAC7BQ,IAAc,UACTV,EAAaO,EAAgBR,GAEtCW,EAAY,OACL,KAAK,aAAaX,EAAQ,CAC/B,IAAAG,EACA,UAAAQ,EACA,cAAAH,EACA,YAAAI,CACN,CAAK,GACF,CACH,CAAC,EACK,kBAAoB,cAAc,OAAO,CAC7C,WAAW,CACT,MAAAP,CACJ,EAAK,CACD,KAAK,OAAS,KAAK,UAAU,QAAQ,EACrC,KAAK,MAAQA,CACd,EACD,aAAa7L,EAAQ5C,EAAMF,EAAS,CAGlC,GAFA,KAAK,SAAS,eAAgB,gBAAiB,KAAK,KAAK,EACzD,KAAK,SAAWA,EAAQ,SACpBA,EAAQ,cAAgB,aAAc,CACxC,KAAK,sBAAsBA,CAAO,EAClC,MACD,CACD,KAAK,oBAAoBA,CAAO,CACjC,EACD,cAAcA,EAAS,CACrB,KAAK,cAAc,cAAc,CAClC,EACD,SAASmP,EAAW,CACL,KAAK,OAAO,YACpB,IAAI,SAASA,CAAS,CAC5B,EACD,OAAOV,EAAK,CACG,KAAK,OAAO,YACpB,IAAI,IAAI,CACX,IAAK,GAAGA,CAAG,CACjB,CAAK,CACF,EACD,QAAQD,EAAM,CACC,KAAK,OAAO,YACpB,IAAI,IAAI,CACX,KAAM,GAAGA,CAAI,CACnB,CAAK,CACF,EACD,sBAAsB,CACpB,KAAAA,EACA,IAAAC,EACA,WAAAM,EACA,YAAAG,CACJ,EAAK,CACD,MAAMhP,EAAO,KAAK,OAAO,YACnBkP,GAAWZ,EAAOO,GAAc,KAAK,MAAM,QAC3CM,GAAUZ,EAAMS,EAAc,GAAK,KAAK,MAAM,SAGhDG,EAAS,KACX,KAAK,SAAS,QAAQ,EACtB,KAAK,OAAOZ,EAAMS,EAAc,CAAC,GAExBG,EAAS,KAClB,KAAK,SAAS,WAAW,EACzB,KAAK,OAAOZ,EAAMS,EAAc,EAAIhP,EAAK,IAAI,YAAW,CAAE,GAE1D,KAAK,OAAOuO,EAAMvO,EAAK,IAAI,YAAW,EAAK,EAAIgP,EAAc,CAAC,EAI5DE,EAAU,IACZ,KAAK,SAAS,gBAAgB,EAC9B,KAAK,QAAQZ,EAAOtO,EAAK,IAAI,WAAU,CAAE,IAGzC,KAAK,SAAS,eAAe,EAC7B,KAAK,QAAQsO,EAAOO,CAAU,EAEjC,EACD,oBAAoB,CAClB,KAAAP,EACA,IAAAC,EACA,WAAAM,EACA,YAAAG,CACJ,EAAK,CACD,MAAMhP,EAAO,KAAK,OAAO,YACnBkP,GAAWZ,EAAOO,EAAa,GAAK,KAAK,MAAM,QAC/CM,GAAUZ,EAAMS,GAAe,KAAK,MAAM,SAG5CE,EAAU,KACZ,KAAK,SAAS,SAAS,EACvB,KAAK,QAAQZ,EAAOO,EAAa,CAAC,GAEzBK,EAAU,KACnB,KAAK,SAAS,UAAU,EACxB,KAAK,QAAQZ,EAAOO,EAAa,EAAI7O,EAAK,IAAI,WAAU,CAAE,GAE1D,KAAK,QAAQsO,EAAOtO,EAAK,IAAI,WAAU,EAAK,EAAI6O,EAAa,CAAC,EAI5DM,EAAS,IACX,KAAK,SAAS,iBAAiB,EAC/B,KAAK,OAAOZ,EAAMvO,EAAK,IAAI,YAAW,CAAE,IAGxC,KAAK,SAAS,cAAc,EAC5B,KAAK,OAAOuO,EAAMS,CAAW,EAEhC,CACH,CAAC,EACK,SAAW,eAAe,OAAO,CACrC,eAAgB,GAChB,GAAI,QACJ,SAAU,aAAa,SAAS,CAC9B,SAAY,CAAC,EAAG,UAAU,EAC1B,KAAQ,SAAUpR,EAAWC,EAAQC,EAASC,EAAUC,EAAM,CAC5D,MAAO,EACR,EACD,QAAW,EACf,CAAG,EACD,QACA,YAAa,CAEX,KAAK,OAAM,EACX,KAAK,QAAU,GACf,MAAMyQ,EAAQ,KAAK,IACnB,MAAM,MAAM,aAAc,WAAY,KAAK,SAAU,IAAI,EACzD,KAAK,QAAU,IAAI,KAAK,QAGxB,KAAK,aAAa,KAAK,OAAO,EAC9B,KAAK,cAAc,UAAW,IAAI,kBAAkB,CAClD,MAAAA,CACD,EAAC,EACF,KAAK,cAAc,eAAgB,IAAI,gBAAgB,CACrD,MAAAA,EACA,YAAa,IACd,EAAC,EACF,KAAK,cAAc,QAAS,IAAI,gBAAgB,CAC9C,MAAAA,CACD,EAAC,EACF,KAAK,cAAc,aAAc,IAAI,gBAAgB,CACnD,MAAAA,CACD,EAAC,EACF,KAAK,cAAc,eAAgB,IAAI,gBAAgB,CACrD,MAAAA,EACA,SAAU,kBACX,EAAC,EACF,KAAK,cAAc,QAAS,IAAI,aAAe,EAC/C,KAAK,cAAc,MAAO,IAAI,cAAc,CAC1C,MAAAA,CACD,EAAC,EACF,KAAK,cAAc,YAAa,IAAI,mBAAqB,EACzD,KAAK,cAAc,QAAS,IAAI,aAAe,CAChD,EACD,cAAcvE,EAAMlK,EAAM,CACxBA,EAAK,KAAOkK,EACZ,KAAK,aAAalK,CAAI,EACtB,KAAK,QAAQkK,CAAI,EAAIlK,EAAK,UAAU,QAAQ,CAC7C,EACD,UAAUkK,EAAM,CACd,OAAO,KAAK,QAAQA,CAAI,CACzB,EACD,SAASsE,EAAUV,EAAQ,CACzB,MAAMsB,EAAY,KAAK,SAAS,gBAAgBZ,CAAQ,EAGxD,QAASnK,EAAI,KAAK,SAAS,OAAS,EAAG+K,GAAa/K,EAAGA,IAErD,GADa,KAAK,SAAS,YAAYA,CAAC,EAC/B,SAASyJ,EAAQU,CAAQ,EAAG,MAAO,EAE/C,CACH,CAAC,EC5VK,UAAY,EAAE,QAAQ,EACtB,YAAc,IAAI,OAAO,CAC7B,YAAa,MACb,cAAe,CACb,WAAY,SACb,EACD,YAAa,CACX,cACD,EAID,eAAgB,CACd,IAAI,iBAAiB,CACnB,KAAM,UAAU,IACtB,CAAK,EACD,KAAK,QAAQ,IAAI,QAAU,EAC3B,KAAK,iBAAgB,EACrB,KAAK,cAAa,EAClB,KAAK,aAAY,EAEjB,IAAI,SAAS,CACX,OAAQ,KAAK,UAAU,OAAO,CACpC,CAAK,CACF,EACD,kBAAmB,CACjB,QAAQ,UAAU,KAAK,UAAU,SAAS,CAAC,EAC3C,MAAMa,EAAY,KAAK,UAAU,KAAK,EACtC,WAAW,UAAUA,CAAS,EAC9B,SAAS,aAAaA,CAAS,EAC/B,WAAW,UAAUA,CAAS,CAC/B,EACD,QAAQrP,EAAMmC,EAAM,CAElB,OADkB,KAAK,UAAU,KAAK,EACrB,KAAKnC,EAAMmC,CAAI,CACjC,EACD,eAAgB,CACd,IAAI,aAAa,CACf,OAAQ,KAAK,UAAU,OAAO,CACpC,CAAK,EACD,IAAI,mBACJ,IAAI,aAAa,CACf,YAAa,KAAK,UAAU,OAAO,EACnC,iBAAkB,KAAK,UAAU,YAAY,EAC7C,mBAAoB,KAAK,UAAU,cAAc,EACjD,mBAAoB,KAAK,UAAU,cAAc,CACvD,CAAK,CACF,EACD,cAAe,CACb,EAAE,MAAM,EAAE,GAAG,CACX,cAAe,CACb,MAAM,QAAQ,gBAAiB,eAAe,CAC/C,EACD,aAAuF,IAAM,CAC3F,KAAK,KAAI,CACV,CACP,CAAK,EACD,UAAU,GAAG,cAAe,SAAUxB,EAAK,CACzC,MAAM,QAAQ,gBAAiB,mBAAoBA,CAAG,CAC5D,CAAK,EACD,KAAK,kBAAiB,EACtB,KAAK,mBAAkB,CACxB,EACD,mBAAoB,CAClB,UAAU,GAAG,gBAAiB,SAAUA,EAAK,CAC3C,MAAM,QAAQ,gBAAiB,qBAAsBA,CAAG,CAC9D,CAAK,EAGD,UAAU,GAAG,iBAAkB,SAAUA,EAAK,CAC5C,MAAM,QAAQ,gBAAiB,sBAAuBA,CAAG,CAC/D,CAAK,EACD,EAAE,MAAM,EAAE,GAAG,kBAAmB,SAAUA,EAAK,CAC7C,MAAM,QAAQ,gBAAiB,YAAaA,CAAG,CACrD,CAAK,CACF,EACD,oBAAqB,CAEnB,UAAU,GAAG,cAAe,KAAM,IAAK,SAAUA,EAAK,CACpD,MAAM,QAAQ,SAAU,SAAUA,CAAG,CAC3C,CAAK,EACD,UAAU,GAAG,cAAe,KAAM,MAAO,SAAUA,EAAK,CACtD,MAAM,QAAQ,SAAU,QAASA,CAAG,CAC1C,CAAK,CACF,EACD,aAAc,CACZ,MAAO,CAAC,MAAM,QAAQ,YAAa,OAAO,oBAAG,OAAO,sCAA+B,OAAA2H,KAAA,sDAAC,CACrF,EACD,OAAOxI,EAASwD,EAAO,CACrB,SAAS,IAAIA,EAAO,eAAgBA,CAAK,CAAC,GACtCA,IAAU,uBAAyB,IAAIA,EAAO,CAAC,WAAY,QAAQ,CAAC,IAAM,KAAO,IAAIA,EAAO,CAAC,eAAgB,SAAU,EAAG,MAAM,CAAC,IAAM,SACzI,KAAK,UAAU,WAAW,EAAE,KAAK,IAAI,cAAc,CACjD,SAAU,EACX,EAAC,CAEL,EACD,QAAQxD,EAASuK,EAAa,CAC5B,QAASiF,CACb,EAAK,CACD,GAAI,CAACjF,EAAY,QAAS,GAAI,CAACA,EAAY,IAAI,SAAS,EAAG,CACzD,KAAK,UAAU,WAAW,EAAE,KAAK,IAAI,cAAc,CACjD,SAAU,EACX,EAAC,EACF,MACD,CACD,KAAK,YAAY,WAAW,EAC5B,MAAMkF,EAAc,KAAK,YAAY,WAAYD,CAAW,EAC5D,KAAK,aAAaC,EAAa,eAAgB,KAAK,YAAY,EAChEA,EAAY,MAAM,CAChB,KAAM,KAAK,QAAO,EAAG,OAC3B,CAAK,CACF,EACD,cAAe,CACb,SAAS,QAAQ,MAAM,CACrB,UAAW,EACjB,CAAK,EACD,IAAI,cACL,EACD,YAAYrF,EAAM,CAChB,OAAO,KAAK,UAAUA,CAAI,EAAE,MAAK,CAClC,CACH,CAAC,EACD,SAAS,UAAW,CACN,IAAI,cACZ,MAAK,CACX","names":["doc","container","depth0","helpers","partials","data","lookupProperty","parent","propertyName","stack1","index","helper","alias1","alias2","alias3","alias4","alias5","currentMonth","selectedDate","selectedMonth","date","dates","startDay","daysInPrev","map","day","endDay","todaysDate","isDisabled","dateNum","beginDate","endDate","CLASS_OPTIONS","StateModel","state","options","datepicker","view","model","monthPickerView","actionsView","calView","text","query","queryWord","matcher","element","ENTER_KEY","evt","watchText","event","domEvent","keyCode","bind","evts","$items","$highlighted","nextIndex","$scrollItem","offsetDir","$scrollEl","picklistScrollTop","picklistHeight","childViewHeight","childViewTop","childViewBottom","offset","attr","classNames","item","isCheckable","isSelected","opts","each","list","picklist","childView","popWidth","isActive","selected","Picklist","region","delay","_delay","orientation","ignoreEl","HandlebarsRuntime","alertView","alertsView","responseJson","errors","error","create","trim","Global","global","util","slice","pluck","isList","isFunction","isObject","obj","props1","props2","etc","i","val","key","assignProps1","assignProps2","assignArgsList","F","str","fn","arr","res","v","k","require$$0","optionalDefaultValue","value","callback","self","namespacedKey","namespace","plugin","_console","storages","plugins","namespacePrefix","namespaceRegexp","legalNamespaces","_privateStoreProps","storage","testStr","ok","pluginFnProp","propName","oldFn","args","super_fn","arg","newFnArgs","strVal","defaultVal","seenPlugin","pluginProperties","store","prop","read","write","remove","clearAll","_","unfixedKey","fixedKey","storageEl","attributes","scriptTag","storageOwner","storageContainer","storeFunction","regexpStr","cookies","kvp","require$$1","require$$2","require$$3","require$$4","require$$5","n","string","a","c","holder","length","mind","partial","replacer","space","roles","canAdmin","activeRoles","role","includes","slug","workspaces","route","workspaceRoute","getWorkspaceRoute","workspace","directories","settingName","workspaceSettings","workspaceSetting","setting","sidebarWidgets","widgets","name","resolvePromise","rejectPromise","currentUser","teams","settings","navigate","navigated","fragment","replace","handleEmptyHistory","eventArgs","teamId","feVersion","isLocked","isSubmitRestricted","actionId","ids","draft","localDraft","submission","updated","fieldName","requestId","field","responseData","clinicians","directoryName","directory","term","icd","definition","flowId","patientId","form","prefillActionTag","isReadOnly","filter","response","storedSubmission","firstResponse","responseId","formResponse","targets","disable","size","modalRegion","modalSmallRegion","modalSidebarRegion","modalLoadingRegion","ConfirmModal","SidebarModal","patient","formName","formService","modal","rootRoute","status","num","userActivityCh","target","iframeEl","el","shouldShow","hotkeyCh","width","height","bodyHeight","left","top","testView","$body","popOptions","align","windowPadding","outerWidth","bodyWidth","direction","outerHeight","className","leftPer","topPer","viewIndex","popRegion","AppFrameApp","appFrameApp"],"ignoreList":[16,17,18,19,20,21,22,23,24,25,26,27],"sources":["../src/js/utils/platform.js","../src/js/components/datepicker/datepicker_views.js","../src/js/components/datepicker/datepicker_state.js","../src/js/components/datepicker/index.js","../src/js/utils/formatting/has-all-text.js","../src/js/behaviors/input-focus.js","../src/js/behaviors/input-watcher.js","../src/js/behaviors/key-listener.js","../src/js/behaviors/picklist-transport.js","../src/js/components/picklist/index.js","../src/js/components/droplist/index.js","../src/js/components/optionlist/index.js","../src/js/components/tooltip/index.js","../src/js/views/globals/alert-box/alert-box.hbs","../src/js/views/globals/alert-box/alert-box_views.js","../src/js/services/alert.js","../node_modules/store/src/util.js","../node_modules/store/src/store-engine.js","../node_modules/store/storages/localStorage.js","../node_modules/store/storages/oldFF-globalStorage.js","../node_modules/store/storages/oldIE-userDataStorage.js","../node_modules/store/storages/cookieStorage.js","../node_modules/store/storages/sessionStorage.js","../node_modules/store/storages/memoryStorage.js","../node_modules/store/storages/all.js","../node_modules/store/plugins/lib/json2.js","../node_modules/store/plugins/json2.js","../node_modules/store/dist/store.legacy.js","../src/js/services/bootstrap.js","../src/js/services/history.js","../src/js/services/latest-list.js","../src/js/services/forms.js","../src/js/anim/index.js","../src/js/views/globals/modal/modal.hbs","../src/js/views/globals/modal/loading/loading_modal.hbs","../src/js/views/globals/modal/modal_views.js","../src/js/services/modal.js","../src/js/views/globals/error/error.hbs","../src/js/views/globals/error/error_views.js","../src/js/apps/globals/error_app.js","../src/js/utils/formatting/px.js","../src/js/behaviors/top-region.js","../src/js/views/globals/root_views.js","../src/js/app.js"],"sourcesContent":["export default function initPlatform() {\n  const doc = document.documentElement;\n  doc.setAttribute('data-useragent', navigator.userAgent);\n  doc.setAttribute('data-platform', navigator.platform);\n}\n","import { times } from 'underscore';\nimport dayjs from 'dayjs';\nimport hbs from 'handlebars-inline-precompile';\nimport { View, CollectionView, Region } from 'marionette';\n\nimport './datepicker.scss';\n\nconst LayoutView = View.extend({\n  className: 'datepicker',\n  regionClass: Region.extend({ replaceElement: true }),\n  regions: {\n    calendar: '[data-calendar-region]',\n    monthPicker: '[data-month-picker-region]',\n    actions: '[data-actions-region]',\n  },\n  template: hbs`\n    <div data-month-picker-region></div>\n    <div class=\"datepicker__body\">\n      {{#each dayOfWeek}}<div class=\"datepicker__day\">{{formatDateTime this \"dd\"}}</div>{{/each}}\n      <div data-calendar-region></div>\n    </div>\n    <div data-actions-region></div>\n  `,\n  templateContext() {\n    const dayOfWeek = times(7, index => {\n      return dayjs().weekday(index);\n    });\n\n    return { dayOfWeek };\n  },\n});\n\nconst ActionsView = View.extend({\n  template: hbs`\n    <button class=\"datepicker__button js-today\">{{ @intl.components.datepicker.today }}</button>{{~ remove_whitespace ~}}\n    <button class=\"datepicker__button js-tomorrow\">{{ @intl.components.datepicker.tomorrow }}</button>{{~ remove_whitespace ~}}\n    <button class=\"datepicker__button js-clear\">{{ @intl.components.datepicker.clear }}</button>\n  `,\n  triggers: {\n    'click .js-today': 'click:today',\n    'click .js-tomorrow': 'click:tomorrow',\n    'click .js-clear': 'click:clear',\n  },\n});\n\nconst MonthPickerView = View.extend({\n  className: 'datepicker__header',\n  triggers: {\n    'click .js-next': 'click:nextMonth',\n    'click .js-prev': 'click:prevMonth',\n    'click .js-month': 'click:month',\n  },\n  template: hbs`\n    <div class=\"datepicker__nav flex\">\n      <button class=\"js-prev\">{{fas \"caret-left\"}} {{formatDateTime prevMonth \"MMM\"}}</button>\n      <span {{#if canSelectMonth}}class=\"datepicker__month js-month\"{{/if}}>{{formatDateTime currentMonth \"MMM YYYY\"}}</span>\n      <button class=\"js-next\">{{formatDateTime nextMonth \"MMM\"}} {{fas \"caret-right\"}}</button>\n    </div>\n  `,\n  templateContext() {\n    return {\n      nextMonth: this.model.getNextMonth(),\n      prevMonth: this.model.getPrevMonth(),\n      canSelectMonth: this.getOption('canSelectMonth'),\n    };\n  },\n});\n\nconst CellView = View.extend({\n  className() {\n    if (this.model.get('isOtherMonth')) {\n      return 'is-other-month';\n    }\n    if (this.model.get('isDisabled')) {\n      return 'is-disabled';\n    }\n  },\n  tagName: 'li',\n  getTemplate() {\n    if (this.model.get('isOtherMonth') || this.model.get('isDisabled')) {\n      return hbs`{{ date }}`;\n    }\n\n    return hbs`<a class=\"{{#if isSelected}}is-selected{{/if}}{{#if isToday}} is-today{{/if}}\">{{ date }}</a>`;\n  },\n  triggers: {\n    'click a': 'select',\n  },\n});\n\nconst CalendarView = CollectionView.extend({\n  className: 'datepicker__days',\n  tagName: 'ul',\n  childView: CellView,\n  childViewTriggers: {\n    'select': 'select:date',\n  },\n});\n\nexport {\n  ActionsView,\n  LayoutView,\n  MonthPickerView,\n  CalendarView,\n};\n","import { flatten, map, range } from 'underscore';\nimport Backbone from 'backbone';\nimport dayjs from 'dayjs';\n\nexport default Backbone.Model.extend({\n  initialize({ currentMonth, selectedDate, selectedMonth }) {\n    this.setCurrentMonth(currentMonth);\n    this.setSelectedDate(selectedDate);\n    this.setSelectedMonth(selectedMonth);\n  },\n  setCurrentMonth(date) {\n    // If date === null dayjs(date) will fail\n    const currentMonth = date ? dayjs(date) : dayjs();\n\n    this.set('currentMonth', currentMonth.startOf('month'));\n  },\n  setSelectedDate(date) {\n    if (!date) {\n      this.set({\n        selectedDate: null,\n      });\n      return;\n    }\n\n    date = dayjs(date);\n\n    this.set({\n      selectedDate: date.startOf('day'),\n      currentMonth: date.startOf('month'),\n      selectedMonth: null,\n    });\n  },\n  setSelectedMonth(date) {\n    if (!date) {\n      this.set({\n        selectedMonth: null,\n      });\n      return;\n    }\n\n    const selectedMonth = dayjs(date).startOf('month');\n\n    this.set({\n      selectedMonth,\n      currentMonth: selectedMonth,\n      selectedDate: null,\n    });\n  },\n  getCurrentMonth() {\n    return this.dayjs('currentMonth');\n  },\n  getNextMonth() {\n    return this.dayjs('currentMonth').add(1, 'months');\n  },\n  getPrevMonth() {\n    return this.dayjs('currentMonth').subtract(1, 'months');\n  },\n  getCalendar() {\n    const dates = flatten([\n      this._getPreDates(),\n      this._getDates(),\n      this._getPostDates(),\n    ]);\n\n    return new Backbone.Collection(dates);\n  },\n  _getPreDates() {\n    const startDay = this.getCurrentMonth().weekday();\n\n    // Bail if Sunday (0)\n    if (!startDay) return [];\n\n    const daysInPrev = this.getPrevMonth().daysInMonth();\n\n    return map(range(daysInPrev - (startDay - 1), daysInPrev + 1), day => ({\n      date: String(day),\n      isOtherMonth: true,\n    }));\n  },\n  _getPostDates() {\n    const endDay = this.getCurrentMonth().endOf('month').weekday();\n\n    // Bail if end\n    if (endDay === 6) return [];\n\n    return map(range(1, 7 - endDay), day => ({\n      date: String(day),\n      isOtherMonth: true,\n    }));\n  },\n  _getDates() {\n    const currentMonth = this.getCurrentMonth();\n    const todaysDate = currentMonth.isSame(dayjs(), 'month') && dayjs().date();\n\n    return map(range(1, currentMonth.daysInMonth() + 1), day => {\n      const isDisabled = this._isBeforeBeginDate(day) || this._isAfterEndDate(day);\n\n      return {\n        date: String(day),\n        isDisabled,\n        isSelected: !isDisabled && this._isSelectedDate(day),\n        isToday: todaysDate === day,\n      };\n    });\n  },\n  _isBeforeBeginDate(dateNum) {\n    const beginDate = this.dayjs('beginDate');\n\n    if (!beginDate) return false;\n\n    const date = this.getCurrentMonth().date(dateNum);\n\n    return date.isBefore(beginDate, 'day');\n  },\n  _isAfterEndDate(dateNum) {\n    const endDate = this.dayjs('endDate');\n\n    if (!endDate) return false;\n\n    const date = this.getCurrentMonth().date(dateNum);\n\n    return date.isAfter(endDate, 'day');\n  },\n  _isSelectedDate(dateNum) {\n    const selectedDate = this.dayjs('selectedDate');\n\n    if (!selectedDate || !this.getCurrentMonth().isSame(selectedDate, 'month')) return false;\n\n    return selectedDate.date() === dateNum;\n  },\n});\n","/*\n    Datepicker Component init API\n\n    uiView:                    // required - the view ui $('.selector') is in\n    ui: $('.selector')         // if not defined uiView will be used\n    position: {                // set by default to uiView.getBounds(ui)\n        top: 1,\n        left: 1,\n    }\n\n    state: {\n        beginDate dayjs(),    // No dates selectable before this date\n        endDate: dayjs(),     // No dates selectable after this date\n        currentMonth: dayjs(),\n        selectedDate: dayjs()\n    }\n*/\n\nimport { extend, result } from 'underscore';\n\nimport dayjs from 'dayjs';\n\nimport Component from 'js/base/component';\n\nimport { ActionsView, LayoutView, MonthPickerView, CalendarView } from './datepicker_views';\n\nimport StateModel from './datepicker_state.js';\n\nconst CLASS_OPTIONS = [\n  'position',\n  'uiView',\n  'ui',\n];\n\nexport default Component.extend({\n  StateModel,\n  stateEvents: {\n    'change': 'show',\n    'change:selectedDate': 'onChangeStateSelectedDate',\n    'change:selectedMonth': 'onChangeStateSelectedMonth',\n  },\n  onChangeStateSelectedDate(state, selectedDate) {\n    this.triggerMethod('change:selectedDate', selectedDate);\n  },\n  onChangeStateSelectedMonth(state, selectedMonth) {\n    this.triggerMethod('change:selectedMonth', selectedMonth);\n  },\n  constructor: function(options) {\n    this.mergeOptions(options, CLASS_OPTIONS);\n\n    this.listenTo(this.uiView, 'render destroy', this.destroy);\n\n    Component.apply(this, arguments);\n  },\n  ViewClass: LayoutView,\n  onSelectToday() {\n    const state = this.getState();\n    state.setSelectedDate(dayjs());\n  },\n  onSelectTomorrow() {\n    const state = this.getState();\n    state.setSelectedDate(dayjs().add(1, 'days'));\n  },\n  onSelectClear() {\n    const state = this.getState();\n    state.setSelectedDate(null);\n    state.setSelectedMonth(null);\n  },\n  onBeforeShow(datepicker, view) {\n    view.showChildView('monthPicker', this.getMonthPickerView());\n    view.showChildView('actions', this.getActionsView());\n    view.showChildView('calendar', this.getCalendarView());\n  },\n  getMonthPickerView() {\n    const model = this.getState();\n\n    const monthPickerView = new MonthPickerView({\n      model,\n      canSelectMonth: this.getOption('canSelectMonth'),\n    });\n\n    this.listenTo(monthPickerView, {\n      'click:nextMonth': this.onSelectNextMonth,\n      'click:prevMonth': this.onSelectPrevMonth,\n      'click:month': this.onSelectMonth,\n    });\n\n    return monthPickerView;\n  },\n  getActionsView() {\n    const actionsView = new ActionsView();\n\n    this.listenTo(actionsView, {\n      'click:today': this.onSelectToday,\n      'click:tomorrow': this.onSelectTomorrow,\n      'click:clear': this.onSelectClear,\n    });\n\n    return actionsView;\n  },\n  onSelectNextMonth() {\n    const state = this.getState();\n    state.setCurrentMonth(state.getNextMonth());\n  },\n  onSelectPrevMonth() {\n    const state = this.getState();\n    state.setCurrentMonth(state.getPrevMonth());\n  },\n  onSelectMonth() {\n    const state = this.getState();\n    state.setSelectedMonth(state.getCurrentMonth());\n  },\n  onSelectDate({ model }) {\n    const state = this.getState();\n    const date = model.get('date');\n    const currentMonth = this.getState().getCurrentMonth();\n\n    state.setSelectedDate(currentMonth.date(date));\n  },\n  getCalendarView() {\n    const model = this.getState();\n\n    const calView = new CalendarView({\n      model,\n      collection: model.getCalendar(),\n    });\n\n    this.listenTo(calView, {\n      'select:date': this.onSelectDate,\n    });\n\n    return calView;\n  },\n  position() {\n    return this.uiView.getBounds(this.ui);\n  },\n  regionOptions() {\n    return extend({ popWidth: 256 }, result(this, 'position'));\n  },\n});\n","import { every } from 'underscore';\n\nimport buildMatcher from 'js/utils/formatting/build-matcher';\nimport words from 'js/utils/formatting/words';\n\nexport default (text, query) => {\n  if (!text) return false;\n\n  return every(words(query), queryWord => {\n    const matcher = buildMatcher(queryWord);\n\n    return !!String(text).match(matcher);\n  });\n};\n","import { Behavior } from 'marionette';\n\nexport default Behavior.extend({\n  selector: 'input',\n\n  ui() {\n    return {\n      input: this.getOption('selector'),\n    };\n  },\n\n  onDomRefresh() {\n    const element = this.ui.input[0];\n    if (!element || !element.style) return;\n    element.style.transform = 'TranslateY(-10000px)';\n    element.focus();\n    setTimeout(function() {\n      /* istanbul ignore next: edge case destroy during timeout */\n      if (!element || !element.style) return;\n      element.style.transform = 'none';\n    }, 30);\n  },\n});\n","import { throttle } from 'underscore';\nimport { Behavior } from 'marionette';\n\nimport keyCodes from 'js/utils/formatting/key-codes';\n\nconst { ENTER_KEY } = keyCodes;\n\nexport default Behavior.extend({\n  events: {\n    'keydown @ui.input': 'watchKeyDown',\n    'keyup @ui.input': 'watchKeyUp',\n    'input @ui.input': 'watchInput',\n  },\n\n  ui: {\n    input: 'input',\n  },\n\n  onDomRefresh() {\n    this._currentText = this.getWatchText();\n  },\n\n  getWatchText() {\n    return this.ui.input.val();\n  },\n\n  watchKeyDown(evt) {\n    this.view.triggerMethod('watch:keydown', evt);\n    this._evt = evt;\n  },\n\n  watchInput() {\n    /* istanbul ignore next */\n    if (!this._evt) return;\n\n    /* istanbul ignore next */\n    if (this._evt.isDefaultPrevented()) return;\n\n    this.watchKeyUp(this._evt);\n  },\n\n  // Both inputInput and inputKeyUp occur for browsers that support both\n  // added throttle here to match contenteditable watchKeyUp implementation\n  // contenteditable doesn't have oninput for contenteditable for IE9+\n  watchKeyUp: throttle(function(evt) {\n    /* istanbul ignore next */\n    if (!this.view.isRendered()) return;\n\n    /* istanbul ignore next */\n    if (evt.which === ENTER_KEY) {\n      evt.preventDefault();\n      return;\n    }\n\n    this.view.triggerMethod('watch:keyup', evt);\n    this.triggerWatchChange();\n  }, 1),\n\n  triggerWatchChange() {\n    const watchText = this.getWatchText();\n\n    if (watchText === this._currentText) return;\n\n    this._currentText = watchText;\n\n    this.view.triggerMethod('watch:change', watchText);\n  },\n});\n","import { bind, isArray, some } from 'underscore';\nimport Radio from 'backbone.radio';\nimport { Behavior } from 'marionette';\n\nexport default Behavior.extend({\n  initialize() {\n    this.listenTo(Radio.channel('user-activity'), 'document:keydown', this.keydown);\n  },\n\n  keyEvents: {},\n\n  triggerEvent(event, domEvent, keyCode) {\n    if (domEvent.which === keyCode) {\n      this.view.triggerMethod(event, domEvent);\n\n      return true;\n    }\n  },\n\n  keydown(domEvent) {\n    some(this.getOption('keyEvents'), (keyCode, event) => {\n      if (!isArray(keyCode)) {\n        this.triggerEvent(event, domEvent, keyCode);\n        return;\n      }\n\n      return some(keyCode, bind(this.triggerEvent, this, event, domEvent));\n    });\n  },\n});\n","import { Behavior } from 'marionette';\n\nimport keyCodes from 'js/utils/formatting/key-codes';\n\nimport KeyListenerBehavior from './key-listener';\n\nconst { ENTER_KEY, ESCAPE_KEY, DOWN_KEY, TAB_KEY, UP_KEY } = keyCodes;\n\nexport default Behavior.extend({\n  behaviors: [\n    {\n      behaviorClass: KeyListenerBehavior,\n      keyEvents: {\n        'transport:down': DOWN_KEY,\n        'transport:up': UP_KEY,\n        'select': ENTER_KEY,\n        'close': [ESCAPE_KEY, TAB_KEY],\n      },\n    },\n  ],\n\n  options: {\n    items: '.js-picklist-item',\n    scroll: '.js-picklist-scroll',\n  },\n\n  events() {\n    const evts = {};\n\n    // by default 'mouseenter .js-picklist-item'\n    evts[`mouseenter ${ this.getOption('items') }`] = this.onHoverItem;\n\n    return evts;\n  },\n\n  // must be onAttach, so that the width of droplist is already set for scrolling calc\n  onAttach() {\n    const $items = this.getItems();\n    this.scrollTo($items, $items.filter('.is-selected'), 'middle');\n  },\n\n  onHoverItem(evt) {\n    this.updateTransport(this.getItems(), this.view.$(evt.currentTarget));\n  },\n\n  onTransportDown(evt) {\n    evt.preventDefault();\n\n    const $items = this.getItems();\n    const $highlighted = this._getNextHighlighted($items);\n\n    this.updateTransport($items, $highlighted);\n\n    this.scrollTo($items);\n  },\n\n  onTransportUp(evt) {\n    evt.preventDefault();\n\n    const $items = this.getItems();\n    const $highlighted = this._getPrevHighlighted($items);\n\n    this.updateTransport($items, $highlighted);\n\n    this.scrollTo($items);\n  },\n\n  getItems() {\n    return this.view.$(this.getOption('items'));\n  },\n\n  getHighlighted($items) {\n    return $items.filter('.is-highlighted');\n  },\n\n  updateTransport($items, $highlighted) {\n    $items.removeClass('is-highlighted');\n    $highlighted.addClass('is-highlighted');\n  },\n\n  // determines based on what is highlighted (or not)\n  // what the next highlighted item will be when arrow up is pushed\n  _getPrevHighlighted($items) {\n    const $highlighted = this.getHighlighted($items);\n\n    /* istanbul ignore if: complicated generic test, but simple code */\n    if (!$highlighted.length) {\n      return $items.last();\n    }\n\n    const nextIndex = $items.index($highlighted) - 1;\n\n    if (nextIndex < 0) {\n      return $highlighted;\n    }\n\n    return $items.eq(nextIndex);\n  },\n\n  // determines based on what is highlighted (or not)\n  // what the next highlighted item will be when arrow down is pushed\n  _getNextHighlighted($items) {\n    const $highlighted = this.getHighlighted($items);\n\n    /* istanbul ignore if: complicated generic test, but simple code */\n    if (!$highlighted.length) {\n      return $items.first();\n    }\n\n    const nextIndex = $items.index($highlighted) + 1;\n\n    if (nextIndex === $items.length) {\n      return $highlighted;\n    }\n\n    return $items.eq(nextIndex);\n  },\n\n  // looks for the highlighted items position and scrolls the list so that it is shown.\n  // pass 'middle' as the offsetDir to place the highlighted element in the middle\n  // of the scrollable window\n  /* istanbul ignore next: hard to test, but battle tested */\n  scrollTo($items, $scrollItem, offsetDir) {\n    if (!$items.length) return;\n\n    if (!$scrollItem || !$scrollItem.length) {\n      $scrollItem = this.getHighlighted($items);\n    }\n\n    if (!$scrollItem.length) return;\n\n    const $scrollEl = this.view.$(this.getOption('scroll'));\n\n    const picklistScrollTop = $scrollEl.scrollTop();\n    const picklistHeight = $scrollEl.outerHeight();\n    const childViewHeight = $scrollItem.outerHeight();\n    const childViewTop = $scrollItem.position().top;\n    const childViewBottom = childViewTop + childViewHeight - picklistHeight;\n    let offset = 0;\n\n    if (offsetDir === 'middle') {\n      offset = (picklistHeight / 2) - (childViewHeight / 2);\n    }\n\n    if (childViewTop < 0) {\n      $scrollEl.scrollTop(picklistScrollTop + childViewTop + offset);\n    }\n\n    if (childViewBottom > 0) {\n      $scrollEl.scrollTop(picklistScrollTop + childViewBottom + offset);\n    }\n  },\n\n\n  // Keylistener non-transport related events\n  // -----------------------------------------\n\n  // simulates the click trigger on the currently highlighted element\n  onSelect(evt) {\n    evt.preventDefault();\n\n    this.view.$('.is-highlighted').click();\n  },\n});\n","import { debounce, each, extend, noop, pick, result, size } from 'underscore';\nimport hbs from 'handlebars-inline-precompile';\nimport { View, CollectionView } from 'marionette';\n\nimport 'scss/modules/forms.scss';\n\nimport intl from 'js/i18n';\nimport hasAllText from 'js/utils/formatting/has-all-text';\n\nimport Component from 'js/base/component';\n\nimport './picklist.scss';\n\nimport InputFocusBehavior from 'js/behaviors/input-focus';\nimport InputWatcherBehavior from 'js/behaviors/input-watcher';\nimport PicklistBehavior from 'js/behaviors/picklist-transport';\n\nconst CLASS_OPTIONS = [\n  'attr',\n  'canClear',\n  'childView',\n  'childViewEventPrefix',\n  'className',\n  'clearText',\n  'emptyView',\n  'emptyViewOptions',\n  'headingText',\n  'infoText',\n  'isSelectlist',\n  'lists',\n  'noResultsText',\n  'placeholderText',\n  'template',\n];\n\nconst CLASS_OPTIONS_ITEM = [\n  'attr',\n  'getItemSearchText',\n  'isCheckable',\n  'itemClassName',\n  'itemTemplate',\n  'itemTemplateContext',\n];\n\nconst attr = 'text';\nconst canClear = false;\nconst isSelectList = false;\n\nconst PicklistEmpty = View.extend({\n  tagName: 'li',\n  className: 'picklist--no-results',\n  template: hbs`{{ noResultsText }}`,\n  serializeData() {\n    return this.options;\n  },\n});\n\nconst PicklistItem = View.extend({\n  tagName: 'li',\n  itemTemplate: hbs`\n    <div class=\"flex-grow\">{{#if icon}}{{fa icon.type icon.icon classes=icon.classes}}{{/if}}<span>{{matchText text query}}</span></div>\n    {{#if isChecked}}{{fas \"check\" classes=\"u-icon--12 u-margin--l-16\"}}{{/if}}\n  `,\n  itemClassName() {\n    const classNames = [];\n\n    if (this.model.get('isDisabled')) classNames.push('is-disabled');\n    if (this.model.get('hasDivider')) classNames.push('has-divider');\n\n    return classNames.join(' ');\n  },\n  className() {\n    const classNames = ['picklist__item', 'js-picklist-item', result(this, 'itemClassName', '')];\n\n    if (this.model === this.state.get('selected')) classNames.push('is-selected');\n\n    return classNames.join(' ');\n  },\n  triggers: {\n    'click': 'select',\n  },\n  preinitialize(options) {\n    this.mergeOptions(options, ['state', ...CLASS_OPTIONS_ITEM]);\n  },\n  onRender() {\n    this.searchText = this.getItemSearchText(this.model);\n  },\n  getItemSearchText(item) {\n    return this.$el.text();\n  },\n  itemTemplateContext: noop,\n  templateContext() {\n    const isCheckable = this.getOption('isCheckable');\n    const isSelected = this.model === this.state.get('selected');\n    return extend({\n      text: this.model.get(this.attr),\n      query: this.state.get('query'),\n      isChecked: isCheckable && isSelected,\n    }, result(this, 'itemTemplateContext'));\n  },\n  getTemplate() {\n    return this.itemTemplate;\n  },\n});\n\nconst Picklist = CollectionView.extend({\n  className: 'picklist__group',\n  tagName: 'li',\n  template: hbs`\n    {{#if headingText}}<div class=\"picklist__heading\">{{ headingText }}</div>{{/if}}\n    <ul></ul>\n    {{#if infoText}}<div class=\"picklist__info\">{{fas \"circle-info\"}}{{ infoText }}</div>{{/if}}\n  `,\n  serializeCollection: noop,\n  childViewContainer: 'ul',\n  childViewEventPrefix: 'item',\n  modelEvents: {\n    'change:query': 'filter',\n  },\n  viewFilter(view) {\n    view.render();\n    const query = this.model.get('query');\n    return !query || !view.searchText || hasAllText(view.searchText, query);\n  },\n  initialize(options) {\n    this.mergeOptions(options, CLASS_OPTIONS_ITEM);\n  },\n  childViewOptions() {\n    const opts = pick(this, ...CLASS_OPTIONS_ITEM);\n    return extend({ state: this.model }, opts);\n  },\n  templateContext() {\n    return {\n      headingText: this.getOption('headingText'),\n      infoText: this.getOption('infoText'),\n    };\n  },\n});\n\nconst Picklists = CollectionView.extend({\n  behaviors: [\n    {\n      behaviorClass: InputFocusBehavior,\n      selector: '.js-input',\n    },\n    InputWatcherBehavior,\n    PicklistBehavior,\n  ],\n  template: hbs`\n    <div>\n      {{#if headingText}}<div class=\"picklist__heading u-margin--b-8\">{{ headingText }}</div>{{/if}}\n      {{#if isSelectlist}}<input type=\"text\" class=\"js-input picklist__input input-primary--small\" placeholder=\"{{ placeholderText }}\" value=\"{{ query }}\">{{/if}}\n      {{#if canClear}}<div><a class=\"picklist__item js-picklist-item js-clear\">{{ clearText }}</a></div>{{/if}}\n    </div>\n    <ul class=\"flex-region picklist__scroll js-picklist-scroll\"></ul>\n    {{#if infoText}}<div class=\"picklist__info \">{{fas \"circle-info\"}}{{ infoText }}</div>{{/if}}\n  `,\n  triggers: {\n    'focus @ui.input': 'focus',\n    'click @ui.clear': 'clear',\n  },\n  ui: {\n    input: '.js-input',\n    clear: '.js-clear',\n  },\n  onClear() {\n    this.triggerMethod('picklist:item:select', { model: null });\n  },\n  serializeCollection: noop,\n  childViewContainer: 'ul',\n  emptyView: PicklistEmpty,\n  initialize(options) {\n    this.mergeOptions(options, CLASS_OPTIONS);\n    this.mergeOptions(options, CLASS_OPTIONS_ITEM);\n\n    this.debouncedFilter = debounce(this.filter, 1);\n\n    each(this.lists, this.addList, this);\n  },\n  addList(list) {\n    const options = extend({\n      model: this.model,\n      childView: this.childView,\n    }, pick(this, ...CLASS_OPTIONS_ITEM), list);\n\n    const picklist = new Picklist(options);\n\n    picklist.render();\n\n    this.addChildView(picklist);\n  },\n  viewFilter(childView) {\n    return !!size(childView.children) || childView.shouldShow;\n  },\n  childViewEvents: {\n    'before:render:children'() {\n      return this.debouncedFilter();\n    },\n  },\n  onRenderChildren() {\n    this.$('.js-picklist-item').removeClass('is-highlighted');\n\n    if (!this.model.get('query')) return;\n\n    this.$('.js-picklist-item').first().addClass('is-highlighted');\n  },\n  emptyViewOptions() {\n    return { noResultsText: this.noResultsText };\n  },\n  templateContext() {\n    return {\n      canClear: this.canClear,\n      clearText: this.clearText,\n      headingText: this.headingText,\n      infoText: this.infoText,\n      placeholderText: this.placeholderText,\n      isSelectlist: this.isSelectlist,\n    };\n  },\n});\n\nexport default Component.extend({\n  attr,\n  canClear,\n  isSelectList,\n  childView: PicklistItem,\n  className: 'picklist',\n  childViewEventPrefix: 'picklist',\n  clearText: intl.components.picklist.clearText,\n  headingText: '',\n  infoText: '',\n  noResultsText: intl.components.picklist.noResultsText,\n  constructor: function(options) {\n    this.mergeOptions(options, CLASS_OPTIONS);\n    this.mergeOptions(options, CLASS_OPTIONS_ITEM);\n\n    Component.apply(this, arguments);\n  },\n  viewOptions() {\n    const opts = pick(this, ...CLASS_OPTIONS, ...CLASS_OPTIONS_ITEM);\n    return extend({ model: this.getState() }, opts);\n  },\n  ViewClass: Picklists,\n  viewEvents: {\n    'watch:change': 'onWatchChange',\n  },\n  onWatchChange(query) {\n    this.setState('query', query);\n  },\n});\n","import { extend, result } from 'underscore';\nimport Backbone from 'backbone';\nimport hbs from 'handlebars-inline-precompile';\nimport { View } from 'marionette';\n\nimport 'scss/modules/buttons.scss';\n\nimport intl from 'js/i18n';\nimport Component from 'js/base/component';\n\nimport Picklist from 'js/components/picklist';\n\n// NOTE: Use this if you intend to keep the selected state\n\nconst CLASS_OPTIONS = [\n  'align',\n  'collection',\n  'lists',\n  'picklistEvents',\n  'picklistOptions',\n  'popRegion',\n  'popWidth',\n  'position',\n  'viewOptions',\n];\n\nconst picklistOptions = {\n  attr: 'text',\n  canClear: false,\n  headingText: null,\n  infoText: null,\n  isSelectlist: false,\n  placeholderText: null,\n};\n\nconst popWidth = null;\n\nconst viewOptions = {\n  className: 'button-secondary',\n  template: hbs`\n    {{~#if icon}}{{fa icon.type icon.icon classes=icon.classes}}{{/if}}\n    {{~#if (lookup this attr)}}<span>{{lookup this attr}}</span>{{else}}\n      {{~#if defaultText}}<span>{{ defaultText }}</span>{{/if~}}\n    {{/if}}`,\n  templateContext() {\n    return {\n      attr: 'text',\n      defaultText: intl.components.droplist.defaultText,\n    };\n  },\n};\n\nconst StateModel = Backbone.Model.extend({\n  defaults: {\n    isDisabled: false,\n    isActive: false,\n    selected: null,\n  },\n});\n\n\nconst ViewClass = View.extend({\n  initialize({ state }) {\n    this.model = state.selected;\n  },\n  attributes() {\n    return {\n      disabled: this.getOption('state').isDisabled,\n    };\n  },\n  tagName: 'button',\n  triggers: {\n    'click': 'click',\n    'focus': 'focus',\n  },\n});\n\nexport default Component.extend({\n  picklistOptions,\n  popWidth,\n  StateModel,\n  ViewClass,\n  constructor: function(options) {\n    this.mergeOptions(options, CLASS_OPTIONS);\n\n    this.once('show', () => {\n      if (!this.getState('isActive')) return;\n\n      this.showPicklist();\n    });\n\n    Component.apply(this, arguments);\n  },\n  mixinViewOptions(options) {\n    return extend({ state: this.getState().attributes }, viewOptions, result(this, 'viewOptions'), options);\n  },\n  viewEvents: {\n    'click': 'onClick',\n  },\n  onClick() {\n    this.toggleState('isActive');\n  },\n  stateEvents: {\n    'change:isDisabled': 'onChangeIsDisabled',\n    'change:isActive': 'onChangeIsActive',\n    'change:selected': 'onChangeStateSelected',\n  },\n  onChangeIsDisabled() {\n    this.show();\n  },\n  onChangeIsActive(state, isActive) {\n    const view = this.getView();\n    view.$el.toggleClass('is-active', isActive);\n\n    if (!isActive) return;\n\n    // blur off the button so enter won't trigger select repeatedly\n    view.$el.blur();\n\n    this.showPicklist();\n  },\n  onChangeStateSelected(state, selected) {\n    this.show();\n    this.triggerMethod('change:selected', selected);\n  },\n  showPicklist() {\n    const picklist = new Picklist(extend({\n      lists: this.lists || [{ collection: this.collection }],\n      state: { selected: this.getState('selected') },\n    }, result(this, 'picklistOptions')));\n\n    this.popRegion.show(picklist, this.popRegionOptions());\n\n    this.bindEvents(picklist.getView(), this._picklistEvents);\n    this.bindEvents(picklist.getView(), result(this, 'picklistEvents'));\n  },\n  position() {\n    return this.getView().getBounds();\n  },\n  popRegionOptions() {\n    return extend({\n      ignoreEl: this.getView().el,\n      popWidth: result(this, 'popWidth'),\n      align: this.align,\n    }, result(this, 'position'));\n  },\n  _picklistEvents: {\n    'close': 'onPicklistClose',\n    'picklist:item:select': 'onPicklistSelect',\n    'destroy': 'onPicklistDestroy',\n  },\n  onPicklistClose() {\n    this.popRegion.empty();\n  },\n  onPicklistSelect({ model }) {\n    this.popRegion.empty();\n    this.setState('selected', model);\n  },\n  onPicklistDestroy() {\n    this.toggleState('isActive', false);\n  },\n}, {\n  setPopRegion(region) {\n    this.prototype.popRegion = region;\n  },\n});\n","import { extend, result } from 'underscore';\n\nimport Picklist from 'js/components/picklist';\n\n// NOTE: Use this if you do not intend to keep the selected state\n\nconst CLASS_OPTIONS = [\n  'align',\n  'ignoreEl',\n  'popWidth',\n  'position',\n  'uiView',\n  'ui',\n];\n\nconst attr = 'text';\nconst align = 'left';\nconst popWidth = null;\n\nexport default Picklist.extend({\n  attr,\n  align,\n  popWidth,\n  constructor: function(options) {\n    this.mergeOptions(options, CLASS_OPTIONS);\n\n    this.listenTo(this.uiView, 'render destroy', this.destroy);\n\n    Picklist.apply(this, arguments);\n  },\n  viewTriggers: {\n    'close': 'close',\n    'picklist:item:select': 'select',\n  },\n  position() {\n    return this.uiView.getBounds(this.ui);\n  },\n  regionOptions() {\n    return extend({\n      ignoreEl: this.ignoreEl || this.ui[0],\n      popWidth: this.popWidth,\n      align: this.align,\n    }, result(this, 'position'));\n  },\n  onClose() {\n    this.destroy();\n  },\n  onSelect({ model }) {\n    if (model.get('isDisabled')) return;\n\n    const onSelect = model.get('onSelect');\n    onSelect.call(this, model);\n\n    this.destroy();\n  },\n});\n","import { bind, delay as _delay, extend, result } from 'underscore';\nimport hbs from 'handlebars-inline-precompile';\nimport anime from 'animejs';\nimport { View } from 'marionette';\n\nimport Component from 'js/base/component';\n\nimport './tooltip.scss';\n\nconst CLASS_OPTIONS = [\n  'className',\n  'delay',\n  'ignoreEl',\n  'message',\n  'messageHtml',\n  'orientation',\n  'position',\n  'uiView',\n  'ui',\n];\n\nconst TooltipView = View.extend({\n  template: hbs`{{ message }}{{{ messageHtml }}}`,\n  templateContext() {\n    return {\n      message: this.getOption('message'),\n      messageHtml: this.getOption('messageHtml'),\n    };\n  },\n});\n\nexport default Component.extend({\n  ViewClass: TooltipView,\n  className: 'tooltip',\n  delay: 0,\n  constructor: function(options) {\n    this.mergeOptions(options, CLASS_OPTIONS);\n\n    this.setListeners();\n\n    this.listenTo(this.uiView, 'render destroy', this.destroy);\n\n    Component.apply(this, arguments);\n  },\n  setListeners() {\n    if (!this.ui) return;\n\n    this.ui.on('pointerenter.tooltip', bind(this.showTooltip, this));\n\n    this.ui.on('mouseleave.tooltip', bind(this.hideTooltip, this));\n\n    this.ui.on('pointerdown.tooltip', bind(this.showTooltip, this));\n  },\n  showTooltip() {\n    clearTimeout(this.delayTimeout);\n\n    const delay = result(this, 'delay');\n\n    this.delayTimeout = _delay(bind(this.show, this), delay);\n  },\n  hideTooltip() {\n    clearTimeout(this.delayTimeout);\n\n    this.empty();\n  },\n  onBeforeDestroy() {\n    clearTimeout(this.delayTimeout);\n  },\n  onShow() {\n    anime({\n      targets: this.getView().el,\n      duration: 1500,\n      opacity: [0, 1],\n    });\n  },\n  viewOptions() {\n    return {\n      className: result(this, 'className'),\n      message: result(this, 'message'),\n      messageHtml: result(this, 'messageHtml'),\n    };\n  },\n  position() {\n    return this.uiView.getBounds(this.ui);\n  },\n  regionOptions() {\n    const orientation = result(this, 'orientation');\n    const ignoreEl = result(this, 'ignoreEl');\n    return extend({ orientation, ignoreEl }, result(this, 'position'));\n  },\n});\n","\n            import HandlebarsRuntime from 'handlebars/runtime';\n            export default HandlebarsRuntime.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" <button class=\\\"alert-box__link js-undo\\\" type=\\\"button\\\">\"\n    + container.escapeExpression(container.lambda(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"alertBox\"))) && lookupProperty(stack1,\"alertBoxTemplate\"))) && lookupProperty(stack1,\"undoBtn\")), depth0))\n    + \"</button>\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"alert-box__icon \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"alertType\") || (depth0 != null ? lookupProperty(depth0,\"alertType\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"alertType\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":28},\"end\":{\"line\":1,\"column\":43}}}) : helper)))\n    + \"\\\">\\n  \"\n    + alias4((lookupProperty(helpers,\"far\")||(depth0 && lookupProperty(depth0,\"far\"))||alias2).call(alias1,(depth0 != null ? lookupProperty(depth0,\"iconType\") : depth0),{\"name\":\"far\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":2},\"end\":{\"line\":2,\"column\":18}}}))\n    + \"\\n</div>\\n<div class=\\\"alert-box__body\\\">\\n  \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"text\") || (depth0 != null ? lookupProperty(depth0,\"text\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"text\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":2},\"end\":{\"line\":5,\"column\":12}}}) : helper)))\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"html\") || (depth0 != null ? lookupProperty(depth0,\"html\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"html\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":12},\"end\":{\"line\":5,\"column\":24}}}) : helper))) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"hasUndo\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":24},\"end\":{\"line\":5,\"column\":163}}})) != null ? stack1 : \"\")\n    + \"\\n</div>\\n<button class=\\\"alert-box__cancel js-dismiss\\\" type=\\\"button\\\">\"\n    + alias4(container.lambda(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"alertBox\"))) && lookupProperty(stack1,\"alertBoxTemplate\"))) && lookupProperty(stack1,\"dismissBtn\")), depth0))\n    + \"</button>\\n\";\n},\"useData\":true});\n          ","import { bind } from 'underscore';\nimport anime from 'animejs';\nimport { View, CollectionView } from 'marionette';\n\nimport AlertTemplate from './alert-box.hbs';\n\nimport './alert-box.scss';\n\nconst OPTIONS = ['alertType', 'text', 'html', 'hasUndo'];\n\nconst icons = {\n  success: 'circle-check',\n  info: 'circle-info',\n  error: 'circle-xmark',\n};\n\nconst AlertView = View.extend({\n  className: 'alert-box',\n  alertType: 'info',\n  template: AlertTemplate,\n  triggers: {\n    'click .js-dismiss': 'click:dismiss',\n    'click .js-undo': 'click:undo',\n  },\n  initialize(options) {\n    this.mergeOptions(options, OPTIONS);\n  },\n  onAttach() {\n    anime({\n      targets: this.el,\n      duration: 900,\n      translateY: [-10, 0],\n      opacity: [0, 1],\n      easing: 'easeInOutQuad',\n    });\n  },\n  onClickDismiss() {\n    this.dismiss();\n  },\n  onClickUndo() {\n    if (this.isDismissed) return;\n\n    this._dismiss();\n\n    this.triggerMethod('undo', this);\n  },\n  _dismiss() {\n    this.isDismissed = true;\n\n    anime({\n      targets: this.el,\n      opacity: [1, 0],\n      duration: 800,\n      easing: 'easeInSine',\n      complete: bind(this.destroy, this),\n    });\n  },\n  dismiss() {\n    if (this.isDismissed) return;\n\n    this._dismiss();\n\n    this.triggerMethod('dismiss', this);\n  },\n  templateContext() {\n    return {\n      alertType: this.alertType,\n      text: this.text,\n      html: this.html,\n      hasUndo: this.hasUndo,\n      iconType: icons[this.alertType],\n    };\n  },\n});\n\nconst AlertsView = CollectionView.extend({\n  className: 'alert-box__container',\n  onRemoveChild() {\n    if (this.children.length) return;\n\n    this.destroy();\n  },\n});\n\nexport { AlertView, AlertsView };\n","import { delay, each, extend, omit } from 'underscore';\n\nimport App from 'js/base/app';\n\nimport { AlertView, AlertsView } from 'js/views/globals/alert-box/alert-box_views';\n\n// in ms\nconst ALERT_TIMEOUT = 4000;\n\nexport default App.extend({\n  channelName: 'alert',\n  radioRequests: {\n    'show': 'showAlert',\n    'show:success': 'showSuccess',\n    'show:info': 'showInfo',\n    'show:error': 'showError',\n    'show:undo': 'showUndo',\n    'show:apiError': 'showApiError',\n  },\n  showAlert(options) {\n    const alertView = new AlertView(options);\n\n    delay(function() {\n      alertView.dismiss();\n    }, ALERT_TIMEOUT);\n\n    let alertsView = this.getView();\n\n    if (!alertsView) {\n      alertsView = this.showView(new AlertsView());\n    }\n\n    return alertsView.addChildView(alertView);\n  },\n  showSuccess(text) {\n    this.showAlert({ text, alertType: 'success' });\n  },\n  showInfo(text) {\n    this.showAlert({ text, alertType: 'info' });\n  },\n  showError(text) {\n    this.showAlert({ text, alertType: 'error' });\n  },\n  showUndo(options) {\n    options = extend({ hasUndo: true }, options);\n\n    const alertView = this.showAlert(omit(options, 'onUndo', 'onComplete'));\n\n    this.listenTo(alertView, {\n      'undo': options.onUndo,\n      'dismiss': options.onComplete,\n    });\n  },\n  showApiError(responseJson) {\n    const errors = responseJson.errors;\n\n    /* istanbul ignore if */\n    if (!errors.length) return;\n\n    each(errors, error => this.showAlert({ text: error.detail, alertType: 'error' }));\n  },\n});\n","var assign = make_assign()\nvar create = make_create()\nvar trim = make_trim()\nvar Global = (typeof window !== 'undefined' ? window : global)\n\nmodule.exports = {\n\tassign: assign,\n\tcreate: create,\n\ttrim: trim,\n\tbind: bind,\n\tslice: slice,\n\teach: each,\n\tmap: map,\n\tpluck: pluck,\n\tisList: isList,\n\tisFunction: isFunction,\n\tisObject: isObject,\n\tGlobal: Global\n}\n\nfunction make_assign() {\n\tif (Object.assign) {\n\t\treturn Object.assign\n\t} else {\n\t\treturn function shimAssign(obj, props1, props2, etc) {\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\n\t\t\t\teach(Object(arguments[i]), function(val, key) {\n\t\t\t\t\tobj[key] = val\n\t\t\t\t})\n\t\t\t}\t\t\t\n\t\t\treturn obj\n\t\t}\n\t}\n}\n\nfunction make_create() {\n\tif (Object.create) {\n\t\treturn function create(obj, assignProps1, assignProps2, etc) {\n\t\t\tvar assignArgsList = slice(arguments, 1)\n\t\t\treturn assign.apply(this, [Object.create(obj)].concat(assignArgsList))\n\t\t}\n\t} else {\n\t\tfunction F() {} // eslint-disable-line no-inner-declarations\n\t\treturn function create(obj, assignProps1, assignProps2, etc) {\n\t\t\tvar assignArgsList = slice(arguments, 1)\n\t\t\tF.prototype = obj\n\t\t\treturn assign.apply(this, [new F()].concat(assignArgsList))\n\t\t}\n\t}\n}\n\nfunction make_trim() {\n\tif (String.prototype.trim) {\n\t\treturn function trim(str) {\n\t\t\treturn String.prototype.trim.call(str)\n\t\t}\n\t} else {\n\t\treturn function trim(str) {\n\t\t\treturn str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n\t\t}\n\t}\n}\n\nfunction bind(obj, fn) {\n\treturn function() {\n\t\treturn fn.apply(obj, Array.prototype.slice.call(arguments, 0))\n\t}\n}\n\nfunction slice(arr, index) {\n\treturn Array.prototype.slice.call(arr, index || 0)\n}\n\nfunction each(obj, fn) {\n\tpluck(obj, function(val, key) {\n\t\tfn(val, key)\n\t\treturn false\n\t})\n}\n\nfunction map(obj, fn) {\n\tvar res = (isList(obj) ? [] : {})\n\tpluck(obj, function(v, k) {\n\t\tres[k] = fn(v, k)\n\t\treturn false\n\t})\n\treturn res\n}\n\nfunction pluck(obj, fn) {\n\tif (isList(obj)) {\n\t\tfor (var i=0; i<obj.length; i++) {\n\t\t\tif (fn(obj[i], i)) {\n\t\t\t\treturn obj[i]\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (var key in obj) {\n\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\tif (fn(obj[key], key)) {\n\t\t\t\t\treturn obj[key]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction isList(val) {\n\treturn (val != null && typeof val != 'function' && typeof val.length == 'number')\n}\n\nfunction isFunction(val) {\n\treturn val && {}.toString.call(val) === '[object Function]'\n}\n\nfunction isObject(val) {\n\treturn val && {}.toString.call(val) === '[object Object]'\n}\n","var util = require('./util')\nvar slice = util.slice\nvar pluck = util.pluck\nvar each = util.each\nvar bind = util.bind\nvar create = util.create\nvar isList = util.isList\nvar isFunction = util.isFunction\nvar isObject = util.isObject\n\nmodule.exports = {\n\tcreateStore: createStore\n}\n\nvar storeAPI = {\n\tversion: '2.0.12',\n\tenabled: false,\n\t\n\t// get returns the value of the given key. If that value\n\t// is undefined, it returns optionalDefaultValue instead.\n\tget: function(key, optionalDefaultValue) {\n\t\tvar data = this.storage.read(this._namespacePrefix + key)\n\t\treturn this._deserialize(data, optionalDefaultValue)\n\t},\n\n\t// set will store the given value at key and returns value.\n\t// Calling set with value === undefined is equivalent to calling remove.\n\tset: function(key, value) {\n\t\tif (value === undefined) {\n\t\t\treturn this.remove(key)\n\t\t}\n\t\tthis.storage.write(this._namespacePrefix + key, this._serialize(value))\n\t\treturn value\n\t},\n\n\t// remove deletes the key and value stored at the given key.\n\tremove: function(key) {\n\t\tthis.storage.remove(this._namespacePrefix + key)\n\t},\n\n\t// each will call the given callback once for each key-value pair\n\t// in this store.\n\teach: function(callback) {\n\t\tvar self = this\n\t\tthis.storage.each(function(val, namespacedKey) {\n\t\t\tcallback.call(self, self._deserialize(val), (namespacedKey || '').replace(self._namespaceRegexp, ''))\n\t\t})\n\t},\n\n\t// clearAll will remove all the stored key-value pairs in this store.\n\tclearAll: function() {\n\t\tthis.storage.clearAll()\n\t},\n\n\t// additional functionality that can't live in plugins\n\t// ---------------------------------------------------\n\n\t// hasNamespace returns true if this store instance has the given namespace.\n\thasNamespace: function(namespace) {\n\t\treturn (this._namespacePrefix == '__storejs_'+namespace+'_')\n\t},\n\n\t// createStore creates a store.js instance with the first\n\t// functioning storage in the list of storage candidates,\n\t// and applies the the given mixins to the instance.\n\tcreateStore: function() {\n\t\treturn createStore.apply(this, arguments)\n\t},\n\t\n\taddPlugin: function(plugin) {\n\t\tthis._addPlugin(plugin)\n\t},\n\t\n\tnamespace: function(namespace) {\n\t\treturn createStore(this.storage, this.plugins, namespace)\n\t}\n}\n\nfunction _warn() {\n\tvar _console = (typeof console == 'undefined' ? null : console)\n\tif (!_console) { return }\n\tvar fn = (_console.warn ? _console.warn : _console.log)\n\tfn.apply(_console, arguments)\n}\n\nfunction createStore(storages, plugins, namespace) {\n\tif (!namespace) {\n\t\tnamespace = ''\n\t}\n\tif (storages && !isList(storages)) {\n\t\tstorages = [storages]\n\t}\n\tif (plugins && !isList(plugins)) {\n\t\tplugins = [plugins]\n\t}\n\n\tvar namespacePrefix = (namespace ? '__storejs_'+namespace+'_' : '')\n\tvar namespaceRegexp = (namespace ? new RegExp('^'+namespacePrefix) : null)\n\tvar legalNamespaces = /^[a-zA-Z0-9_\\-]*$/ // alpha-numeric + underscore and dash\n\tif (!legalNamespaces.test(namespace)) {\n\t\tthrow new Error('store.js namespaces can only have alphanumerics + underscores and dashes')\n\t}\n\t\n\tvar _privateStoreProps = {\n\t\t_namespacePrefix: namespacePrefix,\n\t\t_namespaceRegexp: namespaceRegexp,\n\n\t\t_testStorage: function(storage) {\n\t\t\ttry {\n\t\t\t\tvar testStr = '__storejs__test__'\n\t\t\t\tstorage.write(testStr, testStr)\n\t\t\t\tvar ok = (storage.read(testStr) === testStr)\n\t\t\t\tstorage.remove(testStr)\n\t\t\t\treturn ok\n\t\t\t} catch(e) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\n\t\t_assignPluginFnProp: function(pluginFnProp, propName) {\n\t\t\tvar oldFn = this[propName]\n\t\t\tthis[propName] = function pluginFn() {\n\t\t\t\tvar args = slice(arguments, 0)\n\t\t\t\tvar self = this\n\n\t\t\t\t// super_fn calls the old function which was overwritten by\n\t\t\t\t// this mixin.\n\t\t\t\tfunction super_fn() {\n\t\t\t\t\tif (!oldFn) { return }\n\t\t\t\t\teach(arguments, function(arg, i) {\n\t\t\t\t\t\targs[i] = arg\n\t\t\t\t\t})\n\t\t\t\t\treturn oldFn.apply(self, args)\n\t\t\t\t}\n\n\t\t\t\t// Give mixing function access to super_fn by prefixing all mixin function\n\t\t\t\t// arguments with super_fn.\n\t\t\t\tvar newFnArgs = [super_fn].concat(args)\n\n\t\t\t\treturn pluginFnProp.apply(self, newFnArgs)\n\t\t\t}\n\t\t},\n\n\t\t_serialize: function(obj) {\n\t\t\treturn JSON.stringify(obj)\n\t\t},\n\n\t\t_deserialize: function(strVal, defaultVal) {\n\t\t\tif (!strVal) { return defaultVal }\n\t\t\t// It is possible that a raw string value has been previously stored\n\t\t\t// in a storage without using store.js, meaning it will be a raw\n\t\t\t// string value instead of a JSON serialized string. By defaulting\n\t\t\t// to the raw string value in case of a JSON parse error, we allow\n\t\t\t// for past stored values to be forwards-compatible with store.js\n\t\t\tvar val = ''\n\t\t\ttry { val = JSON.parse(strVal) }\n\t\t\tcatch(e) { val = strVal }\n\n\t\t\treturn (val !== undefined ? val : defaultVal)\n\t\t},\n\t\t\n\t\t_addStorage: function(storage) {\n\t\t\tif (this.enabled) { return }\n\t\t\tif (this._testStorage(storage)) {\n\t\t\t\tthis.storage = storage\n\t\t\t\tthis.enabled = true\n\t\t\t}\n\t\t},\n\n\t\t_addPlugin: function(plugin) {\n\t\t\tvar self = this\n\n\t\t\t// If the plugin is an array, then add all plugins in the array.\n\t\t\t// This allows for a plugin to depend on other plugins.\n\t\t\tif (isList(plugin)) {\n\t\t\t\teach(plugin, function(plugin) {\n\t\t\t\t\tself._addPlugin(plugin)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep track of all plugins we've seen so far, so that we\n\t\t\t// don't add any of them twice.\n\t\t\tvar seenPlugin = pluck(this.plugins, function(seenPlugin) {\n\t\t\t\treturn (plugin === seenPlugin)\n\t\t\t})\n\t\t\tif (seenPlugin) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.plugins.push(plugin)\n\n\t\t\t// Check that the plugin is properly formed\n\t\t\tif (!isFunction(plugin)) {\n\t\t\t\tthrow new Error('Plugins must be function values that return objects')\n\t\t\t}\n\n\t\t\tvar pluginProperties = plugin.call(this)\n\t\t\tif (!isObject(pluginProperties)) {\n\t\t\t\tthrow new Error('Plugins must return an object of function properties')\n\t\t\t}\n\n\t\t\t// Add the plugin function properties to this store instance.\n\t\t\teach(pluginProperties, function(pluginFnProp, propName) {\n\t\t\t\tif (!isFunction(pluginFnProp)) {\n\t\t\t\t\tthrow new Error('Bad plugin property: '+propName+' from plugin '+plugin.name+'. Plugins should only return functions.')\n\t\t\t\t}\n\t\t\t\tself._assignPluginFnProp(pluginFnProp, propName)\n\t\t\t})\n\t\t},\n\t\t\n\t\t// Put deprecated properties in the private API, so as to not expose it to accidential\n\t\t// discovery through inspection of the store object.\n\t\t\n\t\t// Deprecated: addStorage\n\t\taddStorage: function(storage) {\n\t\t\t_warn('store.addStorage(storage) is deprecated. Use createStore([storages])')\n\t\t\tthis._addStorage(storage)\n\t\t}\n\t}\n\n\tvar store = create(_privateStoreProps, storeAPI, {\n\t\tplugins: []\n\t})\n\tstore.raw = {}\n\teach(store, function(prop, propName) {\n\t\tif (isFunction(prop)) {\n\t\t\tstore.raw[propName] = bind(store, prop)\t\t\t\n\t\t}\n\t})\n\teach(storages, function(storage) {\n\t\tstore._addStorage(storage)\n\t})\n\teach(plugins, function(plugin) {\n\t\tstore._addPlugin(plugin)\n\t})\n\treturn store\n}\n","var util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'localStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nfunction localStorage() {\n\treturn Global.localStorage\n}\n\nfunction read(key) {\n\treturn localStorage().getItem(key)\n}\n\nfunction write(key, data) {\n\treturn localStorage().setItem(key, data)\n}\n\nfunction each(fn) {\n\tfor (var i = localStorage().length - 1; i >= 0; i--) {\n\t\tvar key = localStorage().key(i)\n\t\tfn(read(key), key)\n\t}\n}\n\nfunction remove(key) {\n\treturn localStorage().removeItem(key)\n}\n\nfunction clearAll() {\n\treturn localStorage().clear()\n}\n","// oldFF-globalStorage provides storage for Firefox\n// versions 6 and 7, where no localStorage, etc\n// is available.\n\nvar util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'oldFF-globalStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar globalStorage = Global.globalStorage\n\nfunction read(key) {\n\treturn globalStorage[key]\n}\n\nfunction write(key, data) {\n\tglobalStorage[key] = data\n}\n\nfunction each(fn) {\n\tfor (var i = globalStorage.length - 1; i >= 0; i--) {\n\t\tvar key = globalStorage.key(i)\n\t\tfn(globalStorage[key], key)\n\t}\n}\n\nfunction remove(key) {\n\treturn globalStorage.removeItem(key)\n}\n\nfunction clearAll() {\n\teach(function(key, _) {\n\t\tdelete globalStorage[key]\n\t})\n}\n","// oldIE-userDataStorage provides storage for Internet Explorer\n// versions 6 and 7, where no localStorage, sessionStorage, etc\n// is available.\n\nvar util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'oldIE-userDataStorage',\n\twrite: write,\n\tread: read,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar storageName = 'storejs'\nvar doc = Global.document\nvar _withStorageEl = _makeIEStorageElFunction()\nvar disable = (Global.navigator ? Global.navigator.userAgent : '').match(/ (MSIE 8|MSIE 9|MSIE 10)\\./) // MSIE 9.x, MSIE 10.x\n\nfunction write(unfixedKey, data) {\n\tif (disable) { return }\n\tvar fixedKey = fixKey(unfixedKey)\n\t_withStorageEl(function(storageEl) {\n\t\tstorageEl.setAttribute(fixedKey, data)\n\t\tstorageEl.save(storageName)\n\t})\n}\n\nfunction read(unfixedKey) {\n\tif (disable) { return }\n\tvar fixedKey = fixKey(unfixedKey)\n\tvar res = null\n\t_withStorageEl(function(storageEl) {\n\t\tres = storageEl.getAttribute(fixedKey)\n\t})\n\treturn res\n}\n\nfunction each(callback) {\n\t_withStorageEl(function(storageEl) {\n\t\tvar attributes = storageEl.XMLDocument.documentElement.attributes\n\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\tvar attr = attributes[i]\n\t\t\tcallback(storageEl.getAttribute(attr.name), attr.name)\n\t\t}\n\t})\n}\n\nfunction remove(unfixedKey) {\n\tvar fixedKey = fixKey(unfixedKey)\n\t_withStorageEl(function(storageEl) {\n\t\tstorageEl.removeAttribute(fixedKey)\n\t\tstorageEl.save(storageName)\n\t})\n}\n\nfunction clearAll() {\n\t_withStorageEl(function(storageEl) {\n\t\tvar attributes = storageEl.XMLDocument.documentElement.attributes\n\t\tstorageEl.load(storageName)\n\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\tstorageEl.removeAttribute(attributes[i].name)\n\t\t}\n\t\tstorageEl.save(storageName)\n\t})\n}\n\n// Helpers\n//////////\n\n// In IE7, keys cannot start with a digit or contain certain chars.\n// See https://github.com/marcuswestin/store.js/issues/40\n// See https://github.com/marcuswestin/store.js/issues/83\nvar forbiddenCharsRegex = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\")\nfunction fixKey(key) {\n\treturn key.replace(/^\\d/, '___$&').replace(forbiddenCharsRegex, '___')\n}\n\nfunction _makeIEStorageElFunction() {\n\tif (!doc || !doc.documentElement || !doc.documentElement.addBehavior) {\n\t\treturn null\n\t}\n\tvar scriptTag = 'script',\n\t\tstorageOwner,\n\t\tstorageContainer,\n\t\tstorageEl\n\n\t// Since #userData storage applies only to specific paths, we need to\n\t// somehow link our data to a specific path.  We choose /favicon.ico\n\t// as a pretty safe option, since all browsers already make a request to\n\t// this URL anyway and being a 404 will not hurt us here.  We wrap an\n\t// iframe pointing to the favicon in an ActiveXObject(htmlfile) object\n\t// (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)\n\t// since the iframe access rules appear to allow direct access and\n\t// manipulation of the document element, even for a 404 page.  This\n\t// document can be used instead of the current document (which would\n\t// have been limited to the current path) to perform #userData storage.\n\ttry {\n\t\t/* global ActiveXObject */\n\t\tstorageContainer = new ActiveXObject('htmlfile')\n\t\tstorageContainer.open()\n\t\tstorageContainer.write('<'+scriptTag+'>document.w=window</'+scriptTag+'><iframe src=\"/favicon.ico\"></iframe>')\n\t\tstorageContainer.close()\n\t\tstorageOwner = storageContainer.w.frames[0].document\n\t\tstorageEl = storageOwner.createElement('div')\n\t} catch(e) {\n\t\t// somehow ActiveXObject instantiation failed (perhaps some special\n\t\t// security settings or otherwse), fall back to per-path storage\n\t\tstorageEl = doc.createElement('div')\n\t\tstorageOwner = doc.body\n\t}\n\n\treturn function(storeFunction) {\n\t\tvar args = [].slice.call(arguments, 0)\n\t\targs.unshift(storageEl)\n\t\t// See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx\n\t\t// and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx\n\t\tstorageOwner.appendChild(storageEl)\n\t\tstorageEl.addBehavior('#default#userData')\n\t\tstorageEl.load(storageName)\n\t\tstoreFunction.apply(this, args)\n\t\tstorageOwner.removeChild(storageEl)\n\t\treturn\n\t}\n}\n","// cookieStorage is useful Safari private browser mode, where localStorage\n// doesn't work but cookies do. This implementation is adopted from\n// https://developer.mozilla.org/en-US/docs/Web/API/Storage/LocalStorage\n\nvar util = require('../src/util')\nvar Global = util.Global\nvar trim = util.trim\n\nmodule.exports = {\n\tname: 'cookieStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar doc = Global.document\n\nfunction read(key) {\n\tif (!key || !_has(key)) { return null }\n\tvar regexpStr = \"(?:^|.*;\\\\s*)\" +\n\t\tescape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") +\n\t\t\"\\\\s*\\\\=\\\\s*((?:[^;](?!;))*[^;]?).*\"\n\treturn unescape(doc.cookie.replace(new RegExp(regexpStr), \"$1\"))\n}\n\nfunction each(callback) {\n\tvar cookies = doc.cookie.split(/; ?/g)\n\tfor (var i = cookies.length - 1; i >= 0; i--) {\n\t\tif (!trim(cookies[i])) {\n\t\t\tcontinue\n\t\t}\n\t\tvar kvp = cookies[i].split('=')\n\t\tvar key = unescape(kvp[0])\n\t\tvar val = unescape(kvp[1])\n\t\tcallback(val, key)\n\t}\n}\n\nfunction write(key, data) {\n\tif(!key) { return }\n\tdoc.cookie = escape(key) + \"=\" + escape(data) + \"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/\"\n}\n\nfunction remove(key) {\n\tif (!key || !_has(key)) {\n\t\treturn\n\t}\n\tdoc.cookie = escape(key) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/\"\n}\n\nfunction clearAll() {\n\teach(function(_, key) {\n\t\tremove(key)\n\t})\n}\n\nfunction _has(key) {\n\treturn (new RegExp(\"(?:^|;\\\\s*)\" + escape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(doc.cookie)\n}\n","var util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'sessionStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll\n}\n\nfunction sessionStorage() {\n\treturn Global.sessionStorage\n}\n\nfunction read(key) {\n\treturn sessionStorage().getItem(key)\n}\n\nfunction write(key, data) {\n\treturn sessionStorage().setItem(key, data)\n}\n\nfunction each(fn) {\n\tfor (var i = sessionStorage().length - 1; i >= 0; i--) {\n\t\tvar key = sessionStorage().key(i)\n\t\tfn(read(key), key)\n\t}\n}\n\nfunction remove(key) {\n\treturn sessionStorage().removeItem(key)\n}\n\nfunction clearAll() {\n\treturn sessionStorage().clear()\n}\n","// memoryStorage is a useful last fallback to ensure that the store\n// is functions (meaning store.get(), store.set(), etc will all function).\n// However, stored values will not persist when the browser navigates to\n// a new page or reloads the current page.\n\nmodule.exports = {\n\tname: 'memoryStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar memoryStorage = {}\n\nfunction read(key) {\n\treturn memoryStorage[key]\n}\n\nfunction write(key, data) {\n\tmemoryStorage[key] = data\n}\n\nfunction each(callback) {\n\tfor (var key in memoryStorage) {\n\t\tif (memoryStorage.hasOwnProperty(key)) {\n\t\t\tcallback(memoryStorage[key], key)\n\t\t}\n\t}\n}\n\nfunction remove(key) {\n\tdelete memoryStorage[key]\n}\n\nfunction clearAll(key) {\n\tmemoryStorage = {}\n}\n","module.exports = [\n\t// Listed in order of usage preference\n\trequire('./localStorage'),\n\trequire('./oldFF-globalStorage'),\n\trequire('./oldIE-userDataStorage'),\n\trequire('./cookieStorage'),\n\trequire('./sessionStorage'),\n\trequire('./memoryStorage')\n]\n","/* eslint-disable */\n\n//  json2.js\n//  2016-10-28\n//  Public Domain.\n//  NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n//  See http://www.JSON.org/js.html\n//  This code should be minified before deployment.\n//  See http://javascript.crockford.com/jsmin.html\n\n//  USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO\n//  NOT CONTROL.\n\n//  This file creates a global JSON object containing two methods: stringify\n//  and parse. This file provides the ES5 JSON capability to ES3 systems.\n//  If a project might run on IE8 or earlier, then this file should be included.\n//  This file does nothing on ES5 systems.\n\n//      JSON.stringify(value, replacer, space)\n//          value       any JavaScript value, usually an object or array.\n//          replacer    an optional parameter that determines how object\n//                      values are stringified for objects. It can be a\n//                      function or an array of strings.\n//          space       an optional parameter that specifies the indentation\n//                      of nested structures. If it is omitted, the text will\n//                      be packed without extra whitespace. If it is a number,\n//                      it will specify the number of spaces to indent at each\n//                      level. If it is a string (such as \"\\t\" or \"&nbsp;\"),\n//                      it contains the characters used to indent at each level.\n//          This method produces a JSON text from a JavaScript value.\n//          When an object value is found, if the object contains a toJSON\n//          method, its toJSON method will be called and the result will be\n//          stringified. A toJSON method does not serialize: it returns the\n//          value represented by the name/value pair that should be serialized,\n//          or undefined if nothing should be serialized. The toJSON method\n//          will be passed the key associated with the value, and this will be\n//          bound to the value.\n\n//          For example, this would serialize Dates as ISO strings.\n\n//              Date.prototype.toJSON = function (key) {\n//                  function f(n) {\n//                      // Format integers to have at least two digits.\n//                      return (n < 10)\n//                          ? \"0\" + n\n//                          : n;\n//                  }\n//                  return this.getUTCFullYear()   + \"-\" +\n//                       f(this.getUTCMonth() + 1) + \"-\" +\n//                       f(this.getUTCDate())      + \"T\" +\n//                       f(this.getUTCHours())     + \":\" +\n//                       f(this.getUTCMinutes())   + \":\" +\n//                       f(this.getUTCSeconds())   + \"Z\";\n//              };\n\n//          You can provide an optional replacer method. It will be passed the\n//          key and value of each member, with this bound to the containing\n//          object. The value that is returned from your method will be\n//          serialized. If your method returns undefined, then the member will\n//          be excluded from the serialization.\n\n//          If the replacer parameter is an array of strings, then it will be\n//          used to select the members to be serialized. It filters the results\n//          such that only members with keys listed in the replacer array are\n//          stringified.\n\n//          Values that do not have JSON representations, such as undefined or\n//          functions, will not be serialized. Such values in objects will be\n//          dropped; in arrays they will be replaced with null. You can use\n//          a replacer function to replace those with JSON values.\n\n//          JSON.stringify(undefined) returns undefined.\n\n//          The optional space parameter produces a stringification of the\n//          value that is filled with line breaks and indentation to make it\n//          easier to read.\n\n//          If the space parameter is a non-empty string, then that string will\n//          be used for indentation. If the space parameter is a number, then\n//          the indentation will be that many spaces.\n\n//          Example:\n\n//          text = JSON.stringify([\"e\", {pluribus: \"unum\"}]);\n//          // text is '[\"e\",{\"pluribus\":\"unum\"}]'\n\n//          text = JSON.stringify([\"e\", {pluribus: \"unum\"}], null, \"\\t\");\n//          // text is '[\\n\\t\"e\",\\n\\t{\\n\\t\\t\"pluribus\": \"unum\"\\n\\t}\\n]'\n\n//          text = JSON.stringify([new Date()], function (key, value) {\n//              return this[key] instanceof Date\n//                  ? \"Date(\" + this[key] + \")\"\n//                  : value;\n//          });\n//          // text is '[\"Date(---current time---)\"]'\n\n//      JSON.parse(text, reviver)\n//          This method parses a JSON text to produce an object or array.\n//          It can throw a SyntaxError exception.\n\n//          The optional reviver parameter is a function that can filter and\n//          transform the results. It receives each of the keys and values,\n//          and its return value is used instead of the original value.\n//          If it returns what it received, then the structure is not modified.\n//          If it returns undefined then the member is deleted.\n\n//          Example:\n\n//          // Parse the text. Values that look like ISO date strings will\n//          // be converted to Date objects.\n\n//          myData = JSON.parse(text, function (key, value) {\n//              var a;\n//              if (typeof value === \"string\") {\n//                  a =\n//   /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/.exec(value);\n//                  if (a) {\n//                      return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],\n//                          +a[5], +a[6]));\n//                  }\n//              }\n//              return value;\n//          });\n\n//          myData = JSON.parse('[\"Date(09/09/2001)\"]', function (key, value) {\n//              var d;\n//              if (typeof value === \"string\" &&\n//                      value.slice(0, 5) === \"Date(\" &&\n//                      value.slice(-1) === \")\") {\n//                  d = new Date(value.slice(5, -1));\n//                  if (d) {\n//                      return d;\n//                  }\n//              }\n//              return value;\n//          });\n\n//  This is a reference implementation. You are free to copy, modify, or\n//  redistribute.\n\n/*jslint\n    eval, for, this\n*/\n\n/*property\n    JSON, apply, call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,\n    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,\n    lastIndex, length, parse, prototype, push, replace, slice, stringify,\n    test, toJSON, toString, valueOf\n*/\n\n\n// Create a JSON object only if one does not already exist. We create the\n// methods in a closure to avoid creating global variables.\n\nif (typeof JSON !== \"object\") {\n    JSON = {};\n}\n\n(function () {\n    \"use strict\";\n\n    var rx_one = /^[\\],:{}\\s]*$/;\n    var rx_two = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\n    var rx_three = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\n    var rx_four = /(?:^|:|,)(?:\\s*\\[)+/g;\n    var rx_escapable = /[\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n    var rx_dangerous = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\n    function f(n) {\n        // Format integers to have at least two digits.\n        return n < 10\n            ? \"0\" + n\n            : n;\n    }\n\n    function this_value() {\n        return this.valueOf();\n    }\n\n    if (typeof Date.prototype.toJSON !== \"function\") {\n\n        Date.prototype.toJSON = function () {\n\n            return isFinite(this.valueOf())\n                ? this.getUTCFullYear() + \"-\" +\n                        f(this.getUTCMonth() + 1) + \"-\" +\n                        f(this.getUTCDate()) + \"T\" +\n                        f(this.getUTCHours()) + \":\" +\n                        f(this.getUTCMinutes()) + \":\" +\n                        f(this.getUTCSeconds()) + \"Z\"\n                : null;\n        };\n\n        Boolean.prototype.toJSON = this_value;\n        Number.prototype.toJSON = this_value;\n        String.prototype.toJSON = this_value;\n    }\n\n    var gap;\n    var indent;\n    var meta;\n    var rep;\n\n\n    function quote(string) {\n\n// If the string contains no control characters, no quote characters, and no\n// backslash characters, then we can safely slap some quotes around it.\n// Otherwise we must also replace the offending characters with safe escape\n// sequences.\n\n        rx_escapable.lastIndex = 0;\n        return rx_escapable.test(string)\n            ? \"\\\"\" + string.replace(rx_escapable, function (a) {\n                var c = meta[a];\n                return typeof c === \"string\"\n                    ? c\n                    : \"\\\\u\" + (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\n            }) + \"\\\"\"\n            : \"\\\"\" + string + \"\\\"\";\n    }\n\n\n    function str(key, holder) {\n\n// Produce a string from holder[key].\n\n        var i;          // The loop counter.\n        var k;          // The member key.\n        var v;          // The member value.\n        var length;\n        var mind = gap;\n        var partial;\n        var value = holder[key];\n\n// If the value has a toJSON method, call it to obtain a replacement value.\n\n        if (value && typeof value === \"object\" &&\n                typeof value.toJSON === \"function\") {\n            value = value.toJSON(key);\n        }\n\n// If we were called with a replacer function, then call the replacer to\n// obtain a replacement value.\n\n        if (typeof rep === \"function\") {\n            value = rep.call(holder, key, value);\n        }\n\n// What happens next depends on the value's type.\n\n        switch (typeof value) {\n        case \"string\":\n            return quote(value);\n\n        case \"number\":\n\n// JSON numbers must be finite. Encode non-finite numbers as null.\n\n            return isFinite(value)\n                ? String(value)\n                : \"null\";\n\n        case \"boolean\":\n        case \"null\":\n\n// If the value is a boolean or null, convert it to a string. Note:\n// typeof null does not produce \"null\". The case is included here in\n// the remote chance that this gets fixed someday.\n\n            return String(value);\n\n// If the type is \"object\", we might be dealing with an object or an array or\n// null.\n\n        case \"object\":\n\n// Due to a specification blunder in ECMAScript, typeof null is \"object\",\n// so watch out for that case.\n\n            if (!value) {\n                return \"null\";\n            }\n\n// Make an array to hold the partial results of stringifying this object value.\n\n            gap += indent;\n            partial = [];\n\n// Is the value an array?\n\n            if (Object.prototype.toString.apply(value) === \"[object Array]\") {\n\n// The value is an array. Stringify every element. Use null as a placeholder\n// for non-JSON values.\n\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || \"null\";\n                }\n\n// Join all of the elements together, separated with commas, and wrap them in\n// brackets.\n\n                v = partial.length === 0\n                    ? \"[]\"\n                    : gap\n                        ? \"[\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"]\"\n                        : \"[\" + partial.join(\",\") + \"]\";\n                gap = mind;\n                return v;\n            }\n\n// If the replacer is an array, use it to select the members to be stringified.\n\n            if (rep && typeof rep === \"object\") {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    if (typeof rep[i] === \"string\") {\n                        k = rep[i];\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (\n                                gap\n                                    ? \": \"\n                                    : \":\"\n                            ) + v);\n                        }\n                    }\n                }\n            } else {\n\n// Otherwise, iterate through all of the keys in the object.\n\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (\n                                gap\n                                    ? \": \"\n                                    : \":\"\n                            ) + v);\n                        }\n                    }\n                }\n            }\n\n// Join all of the member texts together, separated with commas,\n// and wrap them in braces.\n\n            v = partial.length === 0\n                ? \"{}\"\n                : gap\n                    ? \"{\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"}\"\n                    : \"{\" + partial.join(\",\") + \"}\";\n            gap = mind;\n            return v;\n        }\n    }\n\n// If the JSON object does not yet have a stringify method, give it one.\n\n    if (typeof JSON.stringify !== \"function\") {\n        meta = {    // table of character substitutions\n            \"\\b\": \"\\\\b\",\n            \"\\t\": \"\\\\t\",\n            \"\\n\": \"\\\\n\",\n            \"\\f\": \"\\\\f\",\n            \"\\r\": \"\\\\r\",\n            \"\\\"\": \"\\\\\\\"\",\n            \"\\\\\": \"\\\\\\\\\"\n        };\n        JSON.stringify = function (value, replacer, space) {\n\n// The stringify method takes a value and an optional replacer, and an optional\n// space parameter, and returns a JSON text. The replacer can be a function\n// that can replace values, or an array of strings that will select the keys.\n// A default replacer method can be provided. Use of the space parameter can\n// produce text that is more easily readable.\n\n            var i;\n            gap = \"\";\n            indent = \"\";\n\n// If the space parameter is a number, make an indent string containing that\n// many spaces.\n\n            if (typeof space === \"number\") {\n                for (i = 0; i < space; i += 1) {\n                    indent += \" \";\n                }\n\n// If the space parameter is a string, it will be used as the indent string.\n\n            } else if (typeof space === \"string\") {\n                indent = space;\n            }\n\n// If there is a replacer, it must be a function or an array.\n// Otherwise, throw an error.\n\n            rep = replacer;\n            if (replacer && typeof replacer !== \"function\" &&\n                    (typeof replacer !== \"object\" ||\n                    typeof replacer.length !== \"number\")) {\n                throw new Error(\"JSON.stringify\");\n            }\n\n// Make a fake root object containing our value under the key of \"\".\n// Return the result of stringifying the value.\n\n            return str(\"\", {\"\": value});\n        };\n    }\n\n\n// If the JSON object does not yet have a parse method, give it one.\n\n    if (typeof JSON.parse !== \"function\") {\n        JSON.parse = function (text, reviver) {\n\n// The parse method takes a text and an optional reviver function, and returns\n// a JavaScript value if the text is a valid JSON text.\n\n            var j;\n\n            function walk(holder, key) {\n\n// The walk method is used to recursively walk the resulting structure so\n// that modifications can be made.\n\n                var k;\n                var v;\n                var value = holder[key];\n                if (value && typeof value === \"object\") {\n                    for (k in value) {\n                        if (Object.prototype.hasOwnProperty.call(value, k)) {\n                            v = walk(value, k);\n                            if (v !== undefined) {\n                                value[k] = v;\n                            } else {\n                                delete value[k];\n                            }\n                        }\n                    }\n                }\n                return reviver.call(holder, key, value);\n            }\n\n\n// Parsing happens in four stages. In the first stage, we replace certain\n// Unicode characters with escape sequences. JavaScript handles many characters\n// incorrectly, either silently deleting them, or treating them as line endings.\n\n            text = String(text);\n            rx_dangerous.lastIndex = 0;\n            if (rx_dangerous.test(text)) {\n                text = text.replace(rx_dangerous, function (a) {\n                    return \"\\\\u\" +\n                            (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\n                });\n            }\n\n// In the second stage, we run the text against regular expressions that look\n// for non-JSON patterns. We are especially concerned with \"()\" and \"new\"\n// because they can cause invocation, and \"=\" because it can cause mutation.\n// But just to be safe, we want to reject all unexpected forms.\n\n// We split the second stage into 4 regexp operations in order to work around\n// crippling inefficiencies in IE's and Safari's regexp engines. First we\n// replace the JSON backslash pairs with \"@\" (a non-JSON character). Second, we\n// replace all simple value tokens with \"]\" characters. Third, we delete all\n// open brackets that follow a colon or comma or that begin the text. Finally,\n// we look to see that the remaining characters are only whitespace or \"]\" or\n// \",\" or \":\" or \"{\" or \"}\". If that is so, then the text is safe for eval.\n\n            if (\n                rx_one.test(\n                    text\n                        .replace(rx_two, \"@\")\n                        .replace(rx_three, \"]\")\n                        .replace(rx_four, \"\")\n                )\n            ) {\n\n// In the third stage we use the eval function to compile the text into a\n// JavaScript structure. The \"{\" operator is subject to a syntactic ambiguity\n// in JavaScript: it can begin a block or an object literal. We wrap the text\n// in parens to eliminate the ambiguity.\n\n                j = eval(\"(\" + text + \")\");\n\n// In the optional fourth stage, we recursively walk the new structure, passing\n// each name/value pair to a reviver function for possible transformation.\n\n                return (typeof reviver === \"function\")\n                    ? walk({\"\": j}, \"\")\n                    : j;\n            }\n\n// If the text is not JSON parseable, then a SyntaxError is thrown.\n\n            throw new SyntaxError(\"JSON.parse\");\n        };\n    }\n}());","module.exports = json2Plugin\n\nfunction json2Plugin() {\n\trequire('./lib/json2')\n\treturn {}\n}\n","var engine = require('../src/store-engine')\n\nvar storages = require('../storages/all')\nvar plugins = [require('../plugins/json2')]\n\nmodule.exports = engine.createStore(storages, plugins)\n","import { get, includes, reject, invoke, map, compact } from 'underscore';\nimport Backbone from 'backbone';\nimport Radio from 'backbone.radio';\nimport store from 'store';\n\nimport getWorkspaceRoute from 'js/utils/root-route';\n\nimport App from 'js/base/app';\n\n// NOTE: Roles are set only at login so they can be cached\nlet activeRolesCache;\n\nfunction getActiveRoles(roles, canAdmin) {\n  const activeRoles = roles.reject({ name: 'patient' });\n\n  if (canAdmin) return activeRoles;\n\n  return reject(activeRoles, role => {\n    return includes(role.get('permissions'), 'clinicians:admin');\n  });\n}\n\nexport default App.extend({\n  channelName: 'bootstrap',\n  radioRequests: {\n    'currentUser': 'getCurrentUser',\n    'currentWorkspace': 'getCurrentWorkspace',\n    'setCurrentWorkspace': 'setCurrentWorkspace',\n    'workspaces': 'getWorkspaces',\n    'organization': 'getOrganization',\n    'directories': 'getDirectories',\n    'setDirectories': 'setDirectories',\n    'setting': 'getSetting',\n    'roles': 'getActiveRoles',\n    'teams': 'getTeams',\n    'sidebarWidgets': 'getSidebarWidgets',\n    'sidebarWidgets:fields': 'getSidebarWidgetFields',\n    'widgets': 'getWidgets',\n    'fetch': 'fetchBootstrap',\n  },\n  getCurrentUser() {\n    return this.currentUser;\n  },\n  _getWorkspace(slug) {\n    const workspaces = this.currentUser.getWorkspaces();\n\n    if (!workspaces.length) throw 'No workspaces found';\n\n    return workspaces.find({ slug })\n      || workspaces.find({ id: store.get('currentWorkspace') })\n      || workspaces.at(0);\n  },\n  getCurrentWorkspace() {\n    return this.currentWorkspace;\n  },\n  setCurrentWorkspace(route) {\n    const workspaceRoute = route || getWorkspaceRoute();\n\n    if (this.currentWorkspace && !workspaceRoute) {\n      return this.currentWorkspace;\n    }\n\n    const workspace = this._getWorkspace(workspaceRoute);\n\n    if (workspace.id !== get(this.currentWorkspace, 'id')) {\n      store.set('currentWorkspace', workspace.id);\n      this.currentWorkspace = workspace;\n      this.getChannel().trigger('change:workspace', workspace);\n    }\n\n    return workspace;\n  },\n  getOrganization() {\n    return this.organization;\n  },\n  getDirectories() {\n    return this.directories.clone();\n  },\n  setDirectories(directories) {\n    this.directories = directories;\n  },\n  getWorkspaces() {\n    return this.workspaces.clone();\n  },\n  getSetting(settingName) {\n    /* istanbul ignore if: difficult to test settings prior to bootstrap */\n    if (!this.isRunning()) return;\n    const workspaceSettings = this.currentWorkspace.get('settings');\n    const workspaceSetting = get(workspaceSettings, settingName);\n    if (workspaceSetting) return workspaceSetting;\n\n    const setting = this.settings.get(settingName);\n    if (!setting) return;\n\n    return setting.get('value');\n  },\n  // Returns roles that the current user can manage\n  getActiveRoles() {\n    if (activeRolesCache) return activeRolesCache;\n\n    const canAdmin = this.currentUser.can('clinicians:admin');\n    const activeRoles = getActiveRoles(this.roles, canAdmin);\n\n    activeRolesCache = Radio.request('entities', 'roles:collection', activeRoles);\n\n    return activeRolesCache;\n  },\n  getTeams() {\n    return this.teams.clone();\n  },\n  getWidgets() {\n    return this.widgets.clone();\n  },\n  getSidebarWidgets() {\n    const sidebarWidgets = get(this.getSetting('widgets_patient_sidebar'), 'widgets');\n\n    const widgets = map(sidebarWidgets, slug => {\n      return this.widgets.find({ slug });\n    });\n\n    return Radio.request('entities', 'widgets:collection', invoke(compact(widgets), 'omit', 'id'));\n  },\n  getSidebarWidgetFields() {\n    return get(this.getSetting('widgets_patient_sidebar'), 'fields');\n  },\n  initialize({ name }) {\n    this.bootstrapPromise = new Promise((resolvePromise, rejectPromise) => {\n      this.resolveBootstrap = resolvePromise;\n      this.rejectBootstrap = rejectPromise;\n    });\n    this.organization = new Backbone.Model({ name });\n  },\n  beforeStart() {\n    return [\n      Radio.request('entities', 'fetch:clinicians:current'),\n      Radio.request('entities', 'fetch:roles:collection'),\n      Radio.request('entities', 'fetch:teams:collection'),\n      Radio.request('entities', 'fetch:settings:collection'),\n      Radio.request('entities', 'fetch:workspaces:collection'),\n      Radio.request('entities', 'fetch:widgets:collection'),\n    ];\n  },\n  onStart(options, currentUser, roles, teams, settings, workspaces, widgets) {\n    this.currentUser = currentUser;\n    this.roles = roles;\n    this.teams = teams;\n    this.settings = settings;\n    this.workspaces = workspaces;\n    this.widgets = widgets;\n\n    this.setCurrentWorkspace();\n\n    this.resolveBootstrap(currentUser);\n  },\n  onFail(options, ...args) {\n    this.rejectBootstrap(...args);\n  },\n  fetchBootstrap() {\n    this.start();\n\n    return this.bootstrapPromise;\n  },\n});\n","import Backbone from 'backbone';\n\nimport App from 'js/base/app';\n\nexport default App.extend({\n  channelName: 'history',\n  radioRequests: {\n    'go:back': 'goBack',\n  },\n  initialize() {\n    const navigate = Backbone.history.navigate;\n    this._prevHistory = [Backbone.history.getFragment()];\n\n    // Patch Backbone history navigate to track history\n    Backbone.history.navigate = (route, options) => {\n      const navigated = navigate.call(Backbone.history, route, options);\n\n      /* istanbul ignore next: supports backbone.navigate api, but likely unused */\n      if (navigated === false) return false;\n\n      this.setPrevious(route, options);\n\n      this.triggerChange();\n\n      return navigated;\n    };\n\n    window.addEventListener('popstate', () => {\n      const fragment = Backbone.history.getFragment();\n\n      // If the current url will be at the top of the stack, assume back button\n      if (fragment === this._prevHistory.at(1)) {\n        this._prevHistory.shift();\n      } else {\n        this._prevHistory.unshift(fragment);\n      }\n\n      this.triggerChange();\n    });\n  },\n  setPrevious(route, { replace }) {\n    if (replace) {\n      this._prevHistory[0] = route;\n      return;\n    }\n\n    this._prevHistory.unshift(route);\n  },\n  triggerChange() {\n    this.getChannel().trigger('change:route', this._prevHistory[0]);\n  },\n  goBack(handleEmptyHistory) {\n    if (handleEmptyHistory && this._prevHistory.length < 2) {\n      handleEmptyHistory();\n      return;\n    }\n\n    // Remove the current route from the stack\n    this._prevHistory.shift();\n\n    // Navigate to the previous route\n    Backbone.history.navigate(this._prevHistory.shift(), { trigger: true });\n  },\n});\n","import Radio from 'backbone.radio';\n\nimport App from 'js/base/app';\n\nexport default App.extend({\n  channelName: 'history',\n\n  radioRequests: {\n    'set:latestList': 'setLatestList',\n    'has:latestList': 'hasLatestList',\n    'go:latestList': 'goLatestList',\n  },\n\n  setLatestList(event,\n    /* istanbul ignore next */\n    eventArgs = []) {\n    this._latestList = event;\n    this._latestListArgs = eventArgs;\n  },\n\n  hasLatestList() {\n    return !!this._latestList;\n  },\n\n  goLatestList() {\n    /* istanbul ignore if */\n    if (!this.hasLatestList()) return;\n    Radio.trigger('event-router', this._latestList, ...this._latestListArgs);\n  },\n});\n","import { map, get, debounce, omit } from 'underscore';\nimport dayjs from 'dayjs';\nimport store from 'store';\n\nimport Radio from 'backbone.radio';\n\nimport App from 'js/base/app';\n\nimport { FORM_RESPONSE_STATUS } from 'js/static';\n\nimport { versions } from 'js/config';\n\nfunction getClinicians(teamId) {\n  if (teamId) {\n    const team = Radio.request('entities', 'teams:model', teamId);\n    return team.getAssignableClinicians();\n  }\n\n  const currentWorkspace = Radio.request('bootstrap', 'currentWorkspace');\n  return currentWorkspace.getAssignableClinicians();\n}\n\nexport default App.extend({\n  startAfterInitialized: true,\n  channelName() {\n    return `form${ this.getOption('form').id }`;\n  },\n  channelRequest() {\n    if (this.isDestroyed()) return;\n\n    const channel = this.getChannel();\n\n    return channel.request(...arguments);\n  },\n  initialize(options) {\n    this.updateDraft = debounce(this.updateDraft, 15000);\n    this.refreshForm = debounce(this.refreshForm, 1800000);\n\n    this.mergeOptions(options, ['action', 'form', 'patient', 'responses', 'latestResponse']);\n\n    this.currentUser = Radio.request('bootstrap', 'currentUser');\n  },\n  onBeforeDestroy() {\n    this.updateDraft.cancel();\n    this.refreshForm.cancel();\n  },\n  radioRequests: {\n    'ready:form': 'readyForm',\n    'submit:form': 'submitForm',\n    'fetch:clinicians': 'fetchClinicians',\n    'fetch:directory': 'fetchDirectory',\n    'fetch:form': 'fetchForm',\n    'fetch:form:data': 'fetchFormPrefill',\n    'fetch:form:response': 'fetchFormResponse',\n    'update:storedSubmission': 'updateStoredSubmission',\n    'get:storedSubmission': 'getStoredSubmission',\n    'clear:storedSubmission': 'clearStoredSubmission',\n    'fetch:field': 'fetchField',\n    'update:field': 'updateField',\n    'fetch:icd': 'fetchIcd',\n    'version': 'checkVersion',\n  },\n  readyForm() {\n    this.trigger('ready');\n\n    this.refreshForm();\n  },\n  checkVersion(feVersion) {\n    /* istanbul ignore if: can't test reload */\n    if (feVersion !== versions.frontend) window.location.reload();\n  },\n  isReadOnly() {\n    const isLocked = this.action && this.action.isLocked();\n    const isSubmitRestricted = this.action && !this.action.canSubmit();\n\n    return this.form.isReadOnly() || isLocked || isSubmitRestricted;\n  },\n  getStoreId() {\n    const actionId = get(this.action, 'id');\n    const ids = [this.currentUser.id, this.patient.id, this.form.id];\n    if (actionId) ids.push(actionId);\n    return `form-subm-${ ids.join('-') }`;\n  },\n  getLatestDraft() {\n    if (this.responses) {\n      // NOTE: latestResponse is for the currentUser\n      // If the first response is not the latestResponse, the draft is invalidated\n      if (this.responses.first() !== this.latestResponse) return {};\n    }\n\n    return (this.latestResponse && this.latestResponse.getDraft()) || {};\n  },\n  getStoredSubmission() {\n    const draft = this.getLatestDraft();\n    const localDraft = store.get(this.getStoreId()) || {};\n\n    if (draft.updated && (!localDraft.updated || dayjs(draft.updated).isAfter(localDraft.updated))) {\n      this.trigger('update:submission', draft.updated);\n      return draft;\n    }\n\n    if (localDraft.updated) this.trigger('update:submission', localDraft.updated);\n    return localDraft;\n  },\n  updateStoredSubmission(submission) {\n    /* istanbul ignore if: difficult to test read only submission change */\n    if (this.isReadOnly()) return;\n\n    const updated = dayjs().format();\n\n    // Cache the draft for debounced updateDraft\n    this._draft = submission;\n\n    try {\n      store.set(this.getStoreId(), { submission, updated });\n      this.trigger('update:submission', updated);\n    } catch /* istanbul ignore next: Tested locally, test runner borks on CI */ {\n      store.each((value, key) => {\n        if (String(key).startsWith('form-subm-')) store.remove(key);\n      });\n      store.set(this.getStoreId(), { submission, updated });\n    }\n\n    this.updateDraft();\n    this.refreshForm();\n  },\n  clearStoredSubmission() {\n    this.latestResponse = null;\n    store.remove(this.getStoreId());\n    this.trigger('update:submission');\n  },\n  fetchField({ fieldName, requestId }) {\n    const field = Radio.request('entities', 'patientFields:model', {\n      name: fieldName,\n      _patient: this.patient.id,\n    });\n\n    return field.fetch()\n      .then(() => {\n        this.channelRequest('send', 'fetch:field', { value: field.getValue(), requestId });\n      })\n      .catch(({ responseData }) => {\n        this.channelRequest('send', 'fetch:field', { error: responseData, requestId });\n      });\n  },\n  updateField({ fieldName, value, requestId }) {\n    const field = Radio.request('entities', 'patientFields:model', {\n      name: fieldName,\n      value,\n      _patient: this.patient.id,\n    });\n\n    return field.saveAll()\n      .then(() => {\n        this.channelRequest('send', 'update:field', { value: field.getValue(), requestId });\n      })\n      .catch(({ responseData }) => {\n        this.channelRequest('send', 'update:field', { error: responseData, requestId });\n      });\n  },\n  fetchClinicians({ teamId, requestId }) {\n    const clinicians = getClinicians(teamId);\n\n    this.channelRequest('send', 'fetch:directory', { value: clinicians.toJSON(), requestId });\n  },\n  fetchDirectory({ directoryName, query, requestId }) {\n    return Promise.resolve(Radio.request('entities', 'fetch:directories:model', directoryName, query))\n      .then(directory => {\n        this.channelRequest('send', 'fetch:directory', { value: directory.get('value'), requestId });\n      })\n      .catch(({ responseData }) => {\n        this.channelRequest('send', 'fetch:directory', { error: responseData, requestId });\n      });\n  },\n  fetchIcd({ term, requestId }) {\n    return Promise.resolve(Radio.request('entities', 'fetch:icd:byTerm', term))\n      .then(icd => {\n        this.channelRequest('send', 'fetch:icd', { value: get(icd, ['data', 'icdCodes']), requestId });\n      })\n      .catch(({ responseData }) => {\n        this.channelRequest('send', 'fetch:icd', { error: responseData, requestId });\n      });\n  },\n  fetchForm() {\n    return Promise.resolve(Radio.request('entities', 'fetch:forms:definition', this.form.id))\n      .then(definition => {\n        this.channelRequest('send', 'fetch:form', {\n          definition,\n          contextScripts: this.form.getContextScripts(),\n        });\n      });\n  },\n  fetchFormStoreSubmission({ submission }) {\n    return Promise.all([\n      Radio.request('entities', 'fetch:forms:definition', this.form.id),\n    ]).then(([definition]) => {\n      this.channelRequest('send', 'fetch:form:data', {\n        definition,\n        storedSubmission: submission,\n        ...omit(this.form.getContext(), 'loaderReducers'),\n      });\n    });\n  },\n  _getPrefillFilters({ flowId, patientId }, form) {\n    const opts = {\n      status: FORM_RESPONSE_STATUS.SUBMITTED,\n      flow: flowId,\n      patient: patientId,\n    };\n\n    const isReport = form.isReport();\n\n    if (isReport) opts.created = `<=${ this.action.get('created_at') }`;\n\n    const prefillActionTag = form.getPrefillActionTag();\n\n    if (prefillActionTag) {\n      opts['action.tags'] = prefillActionTag;\n\n      return opts;\n    }\n\n    opts.form = form.getPrefillFormId();\n\n    return opts;\n  },\n  fetchLatestFormSubmission(flowId) {\n    const isReadOnly = this.isReadOnly();\n    const actionId = get(this.action, 'id');\n    const patientId = this.patient.id;\n\n    const filter = this._getPrefillFilters({ flowId, patientId }, this.form);\n\n    return Promise.all([\n      Radio.request('entities', 'fetch:forms:definition', this.form.id),\n      Radio.request('entities', 'fetch:forms:data', actionId, patientId, this.form.id),\n      Radio.request('entities', 'fetch:formResponses:latest', filter),\n    ]).then(([definition, data, response]) => {\n      this.channelRequest('send', 'fetch:form:data', {\n        definition,\n        isReadOnly,\n        formData: data.attributes,\n        responseData: response.getFormData(),\n        formSubmission: response.getResponse(),\n        ...this.form.getContext(),\n      });\n    });\n  },\n  fetchFormPrefill() {\n    const storedSubmission = this.getStoredSubmission();\n    const isReadOnly = this.isReadOnly();\n\n    if (!isReadOnly && storedSubmission.updated) {\n      return this.fetchFormStoreSubmission(storedSubmission);\n    }\n\n    const firstResponse = this.responses && this.responses.getFirstSubmission();\n\n    if (!firstResponse && this.action) {\n      if (this.action.hasTag('prefill-latest-response')) return this.fetchLatestFormSubmission();\n      if (this.action.hasTag('prefill-flow-response')) return this.fetchLatestFormSubmission(this.action.get('_flow'));\n    }\n\n    return Promise.all([\n      Radio.request('entities', 'fetch:forms:definition', this.form.id),\n      Radio.request('entities', 'fetch:forms:data', get(this.action, 'id'), this.patient.id, this.form.id),\n      Radio.request('entities', 'fetch:formResponses:model', get(firstResponse, 'id')),\n    ]).then(([definition, data, response]) => {\n      this.channelRequest('send', 'fetch:form:data', {\n        definition,\n        isReadOnly,\n        formData: data.attributes,\n        responseData: response.getFormData(),\n        formSubmission: response.getResponse(),\n        ...this.form.getContext(),\n      });\n    });\n  },\n  fetchFormResponse({ responseId }) {\n    return Promise.all([\n      Radio.request('entities', 'fetch:forms:definition', this.form.id),\n      Radio.request('entities', 'fetch:formResponses:model', responseId),\n    ]).then(([definition, response]) => {\n      this.channelRequest('send', 'fetch:form:response', {\n        definition,\n        responseData: response.getFormData(),\n        formSubmission: response.getResponse(),\n        contextScripts: this.form.getContextScripts(),\n      });\n    });\n  },\n  useLatestDraft(responseData) {\n    if (!this.latestResponse || this.latestResponse.get('status') !== FORM_RESPONSE_STATUS.DRAFT) return responseData;\n\n    return {\n      ...responseData,\n      id: this.latestResponse.id,\n    };\n  },\n  updateDraft() {\n    const data = this.useLatestDraft({\n      response: { data: this._draft },\n      status: FORM_RESPONSE_STATUS.DRAFT,\n      _form: this.form,\n      _patient: this.patient,\n      _action: this.action,\n    });\n\n    const formResponse = Radio.request('entities', 'formResponses:model', data);\n\n    this.latestResponse = formResponse;\n\n    return formResponse.saveAll()\n      .catch(({ responseData }) => {\n        /* istanbul ignore next: Don't handle non-API errors */\n        if (!responseData) return;\n\n        this.trigger('error', responseData.errors);\n      });\n  },\n  refreshForm() {\n    this.trigger('refresh');\n  },\n  submitForm({ response }) {\n    // Cancel any pending draft updates or stale form refreshes\n    this.updateDraft.cancel();\n    this.refreshForm.cancel();\n\n    const data = this.useLatestDraft({\n      response,\n      status: FORM_RESPONSE_STATUS.SUBMITTED,\n      _form: this.form,\n      _patient: this.patient,\n      _action: this.action,\n    });\n\n    const formResponse = Radio.request('entities', 'formResponses:model', data);\n\n    this.trigger('submit');\n\n    return formResponse.saveAll()\n      .then(() => {\n        // Cancel any draft updates or stale form refreshes that may have been queued while the form was submitting\n        this.updateDraft.cancel();\n        this.refreshForm.cancel();\n        this.clearStoredSubmission();\n        this.trigger('success', formResponse);\n      }).catch(({ responseData }) => {\n        /* istanbul ignore next: Don't handle non-API errors */\n        if (!responseData) return;\n\n        this.trigger('error', responseData.errors);\n\n        const errors = map(responseData.errors, 'detail');\n        this.channelRequest('send', 'form:errors', errors);\n      });\n  },\n});\n","import anime from 'animejs';\n\nfunction animSidebar(targets) {\n  return anime({\n    targets,\n    translateX: [{ value: 20, duration: 0 }, { value: 0, duration: 200 }],\n    opacity: [{ value: 0, duration: 0 }, { value: 1, duration: 300 }],\n    easing: 'easeInOutQuad',\n  });\n}\n\nexport {\n  animSidebar,\n};\n","\n            import HandlebarsRuntime from 'handlebars/runtime';\n            export default HandlebarsRuntime.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"modal__header-icon\\\">\"\n    + container.escapeExpression((lookupProperty(helpers,\"fa\")||(depth0 && lookupProperty(depth0,\"fa\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"headerIconType\") : depth0),(depth0 != null ? lookupProperty(depth0,\"headerIcon\") : depth0),{\"name\":\"fa\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":53},\"end\":{\"line\":2,\"column\":85}}}))\n    + \"</span>\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<button class=\\\"button--text js-close\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"cancelText\") || (depth0 != null ? lookupProperty(depth0,\"cancelText\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"cancelText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":14,\"column\":60},\"end\":{\"line\":14,\"column\":76}}}) : helper)))\n    + \"</button>\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"modal__header \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"headerClass\") || (depth0 != null ? lookupProperty(depth0,\"headerClass\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"headerClass\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":26},\"end\":{\"line\":1,\"column\":43}}}) : helper)))\n    + \"\\\" data-header-region>\\n  \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"headerIcon\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":2},\"end\":{\"line\":2,\"column\":99}}})) != null ? stack1 : \"\")\n    + \"\\n  <div class=\\\"flex-grow\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"headingText\") || (depth0 != null ? lookupProperty(depth0,\"headingText\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"headingText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":25},\"end\":{\"line\":3,\"column\":42}}}) : helper)))\n    + \"</div>\\n  <button class=\\\"button--icon js-close\\\">\"\n    + alias4((lookupProperty(helpers,\"far\")||(depth0 && lookupProperty(depth0,\"far\"))||alias2).call(alias1,\"xmark\",{\"name\":\"far\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":40},\"end\":{\"line\":4,\"column\":55}}}))\n    + \"</button>\\n</div>\\n\\n<div class=\\\"modal__body\\\" data-body-region>\\n  <div class=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bodyClass\") || (depth0 != null ? lookupProperty(depth0,\"bodyClass\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bodyClass\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":14},\"end\":{\"line\":8,\"column\":29}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bodyText\") || (depth0 != null ? lookupProperty(depth0,\"bodyText\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bodyText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":31},\"end\":{\"line\":8,\"column\":45}}}) : helper)))\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"bodyHTML\") || (depth0 != null ? lookupProperty(depth0,\"bodyHTML\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bodyHTML\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":45},\"end\":{\"line\":8,\"column\":61}}}) : helper))) != null ? stack1 : \"\")\n    + \"</div>\\n</div>\\n\\n<div class=\\\"modal__footer\\\" data-footer-region>\\n  <div class=\\\"modal__footer-actions\\\">\\n    <button type=\\\"submit\\\" class=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"buttonClass\") || (depth0 != null ? lookupProperty(depth0,\"buttonClass\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"buttonClass\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":33},\"end\":{\"line\":13,\"column\":50}}}) : helper)))\n    + \" js-submit\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"submitText\") || (depth0 != null ? lookupProperty(depth0,\"submitText\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"submitText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":62},\"end\":{\"line\":13,\"column\":78}}}) : helper)))\n    + \"</button>\\n    \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"cancelText\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":14,\"column\":4},\"end\":{\"line\":14,\"column\":92}}})) != null ? stack1 : \"\")\n    + \"\\n  </div>\\n  <div data-info-region class=\\\"modal__footer-info\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"infoText\") || (depth0 != null ? lookupProperty(depth0,\"infoText\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"infoText\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":51},\"end\":{\"line\":16,\"column\":65}}}) : helper)))\n    + \"</div>\\n</div>\\n\";\n},\"useData\":true});\n          ","\n            import HandlebarsRuntime from 'handlebars/runtime';\n            export default HandlebarsRuntime.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"loading-modal__content is-animated\\\">\\n  <div>\"\n    + container.escapeExpression(container.lambda(((stack1 = ((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"modal\"))) && lookupProperty(stack1,\"loading\"))) && lookupProperty(stack1,\"loadingModal\"))) && lookupProperty(stack1,\"headerText\")), depth0))\n    + \"</div>\\n  <div class=\\\"loading-modal__bar\\\">\\n    <div class=\\\"loading-modal__bar-progress\\\"></div>\\n  </div>\\n</div>\\n\";\n},\"useData\":true});\n          ","import { extend, delay } from 'underscore';\nimport hbs from 'handlebars-inline-precompile';\nimport { View, Region } from 'marionette';\n\nimport 'scss/modules/buttons.scss';\nimport 'scss/modules/modals.scss';\n\nimport './loading/loading_modal.scss';\n\nimport intl from 'js/i18n';\n\nimport { animSidebar } from 'js/anim';\n\nimport PreloadRegion from 'js/regions/preload_region';\n\nimport IframeFormBehavior from 'js/behaviors/iframe-form';\n\nimport ModalTemplate from './modal.hbs';\nimport LoadingModalTemplate from './loading/loading_modal.hbs';\n\nconst i18n = intl.globals.modal.modalViews;\n\nconst ReplaceElRegion = Region.extend({ replaceElement: true, timeout: 0 });\n\nconst ModalView = View.extend({\n  className: 'modal',\n  buttonClass: 'button--green',\n  bodyClass: 'modal__content',\n  headerIconType: 'far',\n  cancelText: i18n.modalView.cancelText,\n  submitText: i18n.modalView.submitText,\n  regionClass: ReplaceElRegion,\n  regions: {\n    header: '[data-header-region]',\n    body: {\n      el: '[data-body-region]',\n      regionClass: PreloadRegion.extend({ timeout: 0 }),\n    },\n    footer: '[data-footer-region]',\n    info: '[data-info-region]',\n  },\n  childViewTriggers: {\n    'cancel': 'cancel',\n    'submit': 'submit',\n  },\n  triggers: {\n    'click @ui.close': 'cancel',\n    'click @ui.submit': 'submit',\n  },\n  ui: {\n    close: '.js-close',\n    submit: '.js-submit',\n  },\n  serializeData() {\n    // Passes data on the view to the template\n    return extend({}, this);\n  },\n  template: ModalTemplate,\n  initialize() {\n    if (this.headerView) this.showChildView('header', this.headerView);\n    if (this.bodyView) this.showChildView('body', this.bodyView);\n    if (this.footerView) this.showChildView('footer', this.footerView);\n  },\n  onSubmit() {\n    this.destroy();\n  },\n  onCancel() {\n    this.destroy();\n  },\n  disableSubmit(disable = true) {\n    this.ui.submit.prop('disabled', disable);\n  },\n  startPreloader() {\n    this.getRegion('body').startPreloader();\n  },\n});\n\nconst SidebarModalView = ModalView.extend({\n  className: 'modal--sidebar',\n  bodyClass: 'modal__content--sidebar',\n  headerClass: 'modal__header--sidebar',\n  onAttach() {\n    animSidebar(this.el);\n  },\n});\n\nconst SmallModalView = ModalView.extend({\n  className: 'modal--small',\n  bodyClass: 'modal__content--small',\n  headerClass: 'modal__header--small',\n});\n\nconst IframeFormView = View.extend({\n  behaviors: [IframeFormBehavior],\n  className() {\n    const size = this.getOption('size');\n\n    if (size === 'small') return 'modal__form-iframe--small';\n    if (size === 'large') return 'modal__form-iframe--large';\n\n    return 'modal__form-iframe';\n  },\n  template: hbs`<iframe src=\"/formapp/\"></iframe>`,\n});\n\n\nconst LoadingModalView = View.extend({\n  className: 'pos--absolute',\n  template: LoadingModalTemplate,\n  onAttach() {\n    delay(() => {\n      this.destroy();\n    }, 5000);\n  },\n});\n\nexport {\n  ModalView,\n  SidebarModalView,\n  SmallModalView,\n  IframeFormView,\n  LoadingModalView,\n};\n","import Radio from 'backbone.radio';\nimport App from 'js/base/app';\n\nimport FormsService from 'js/services/forms';\n\nimport { ModalView, SidebarModalView, SmallModalView, IframeFormView, LoadingModalView } from 'js/views/globals/modal/modal_views';\n\nexport default App.extend({\n  channelName: 'modal',\n  radioRequests: {\n    'show': 'showModal',\n    'show:small': 'showSmall',\n    'show:custom': 'showCustom',\n    'show:sidebar': 'showSidebar',\n    'show:form': 'showForm',\n    'show:loading': 'showLoading',\n  },\n  initialize({ modalRegion, modalSmallRegion, modalSidebarRegion, modalLoadingRegion }) {\n    this.modalRegion = modalRegion;\n    this.modalSmallRegion = modalSmallRegion;\n    this.modalSidebarRegion = modalSidebarRegion;\n    this.modalLoadingRegion = modalLoadingRegion;\n  },\n  showModal(options) {\n    const ConfirmModal = ModalView.extend(options);\n    const view = new ConfirmModal();\n\n    this.modalRegion.show(view);\n\n    return view;\n  },\n  showSmall(options) {\n    const ConfirmModal = SmallModalView.extend(options);\n    const view = new ConfirmModal();\n\n    this.modalSmallRegion.show(view);\n\n    return view;\n  },\n  showCustom(view) {\n    this.modalRegion.show(view);\n    return view;\n  },\n  showSidebar(options) {\n    const SidebarModal = SidebarModalView.extend(options);\n    const view = new SidebarModal();\n\n    this.modalSidebarRegion.show(view);\n\n    return view;\n  },\n  showForm(patient, formName, form, size) {\n    const formService = new FormsService({ patient, form });\n\n    const modal = this.showModal({\n      headingText: formName,\n      headerIcon: 'square-poll-horizontal',\n      bodyView: new IframeFormView({ model: form, size }),\n      onBeforeDestroy() {\n        formService.destroy();\n      },\n      onSubmit() {\n        modal.disableSubmit();\n        Radio.request(`form${ form.id }`, 'send', 'form:submit');\n      },\n    });\n\n    modal.disableSubmit();\n\n    this.listenTo(formService, {\n      'success'() {\n        modal.destroy();\n      },\n      'ready'() {\n        modal.disableSubmit(false);\n      },\n      'error'() {\n        modal.disableSubmit(false);\n      },\n    });\n\n    return modal;\n  },\n  showLoading(options) {\n    const modal = new LoadingModalView(options);\n\n    this.modalLoadingRegion.show(modal);\n\n    return modal;\n  },\n});\n","\n            import HandlebarsRuntime from 'handlebars/runtime';\n            export default HandlebarsRuntime.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            \"\n    + alias2(alias1(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"error\"))) && lookupProperty(stack1,\"errorTemplate\"))) && lookupProperty(stack1,\"notFoundMessage\")), depth0))\n    + \"<br>\\n            \"\n    + alias2(alias1(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"error\"))) && lookupProperty(stack1,\"errorTemplate\"))) && lookupProperty(stack1,\"notFoundInfo\")), depth0))\n    + \"\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.escapeExpression, alias2=depth0 != null ? depth0 : (container.nullContext || {}), alias3=container.hooks.helperMissing, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            \"\n    + alias1(container.lambda(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"error\"))) && lookupProperty(stack1,\"errorTemplate\"))) && lookupProperty(stack1,\"errorMessage\")), depth0))\n    + \"<br>\\n            \"\n    + alias1((lookupProperty(helpers,\"formatMessage\")||(depth0 && lookupProperty(depth0,\"formatMessage\"))||alias3).call(alias2,(lookupProperty(helpers,\"intlGet\")||(depth0 && lookupProperty(depth0,\"intlGet\"))||alias3).call(alias2,\"globals.error.errorTemplate.errorInfo\",{\"name\":\"intlGet\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":28},\"end\":{\"line\":20,\"column\":77}}}),{\"name\":\"formatMessage\",\"hash\":{\"status\":(depth0 != null ? lookupProperty(depth0,\"status\") : depth0)},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":12},\"end\":{\"line\":20,\"column\":93}}}))\n    + \"\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"error-page__contains\\\">\\n  <div class=\\\"error-page__wrap\\\">\\n    <div class=\\\"error-page__dialog\\\">\\n      <div class=\\\"error-page__section\\\">\\n        <svg class=\\\"svg needs-attention u-margin--b-4\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"32\\\" height=\\\"32\\\" viewBox=\\\"0 0 32 32\\\">\\n          <g></g>\\n          <path d=\\\"M14.983 6.713c0.562-0.951 1.472-0.951 2.034 0l12.738 17.565c0.562 0.951 0.123 1.722-0.982 1.722h-25.548c-1.104 0-1.544-0.771-0.982-1.722l12.738-17.565z\\\" fill=\\\"#E65140\\\" />\\n        </svg>\\n\\n        <h2 class=\\\"error-page__heading\\\">\"\n    + alias2(alias1(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"error\"))) && lookupProperty(stack1,\"errorTemplate\"))) && lookupProperty(stack1,\"errorHeader\")), depth0))\n    + \"</h2>\\n      </div>\\n      <div class=\\\"error-page__section\\\">\\n        <p>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"is404\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":14,\"column\":10},\"end\":{\"line\":17,\"column\":17}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"status\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":18,\"column\":10},\"end\":{\"line\":21,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"        </p>\\n        <a class=\\\"js-back button--blue u-margin--t-16\\\">\"\n    + alias2(alias1(((stack1 = ((stack1 = ((stack1 = ((stack1 = (data && lookupProperty(data,\"intl\"))) && lookupProperty(stack1,\"globals\"))) && lookupProperty(stack1,\"error\"))) && lookupProperty(stack1,\"errorTemplate\"))) && lookupProperty(stack1,\"backBtn\")), depth0))\n    + \"</a>\\n      </div>\\n    </div>\\n    <svg class=\\\"svg roundingwell-logo u-margin--t-16\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"116\\\" height=\\\"21\\\" viewBox=\\\"0 0 185 32\\\">\\n      <g></g>\\n      <path d=\\\"M40.975 11.456c-1.339 0.082-2.624 0.683-3.499 1.995v8.501c0 0.547-0.465 1.011-1.039 1.011h-0.027c-0.547-0.027-0.984-0.465-0.984-1.011v-11.535c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v1.312c0.793-1.039 2.105-2.351 3.635-2.351 0.492 0 0.929 0.41 0.929 0.957 0 0.602-0.465 1.093-1.066 1.121z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M49.53 23.128c-4.018 0-6.533-3.116-6.533-6.943 0-3.827 2.515-6.916 6.533-6.916s6.533 3.089 6.533 6.916c0 3.826-2.514 6.943-6.533 6.943zM49.53 11.101c-2.815 0-4.401 2.406-4.401 5.084 0 2.706 1.585 5.111 4.401 5.111 2.815 0 4.373-2.406 4.373-5.111 0-2.679-1.558-5.084-4.373-5.084z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M68.636 22.964c-0.547 0-1.011-0.465-1.011-1.011v-1.011c-1.011 1.148-2.733 2.187-4.701 2.187-2.761 0-4.209-1.34-4.209-4.21v-8.501c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v7.872c0 2.323 1.175 3.007 2.952 3.007 1.613 0 3.143-0.929 3.909-1.995v-8.883c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v11.535c0 0.546-0.465 1.011-1.039 1.011z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M83.013 22.964c-0.547 0-1.011-0.465-1.011-1.011v-7.79c0-2.323-1.175-3.062-2.952-3.062-1.613 0-3.143 0.984-3.909 2.050v8.801c0 0.547-0.465 1.011-1.039 1.011-0.547 0-1.011-0.465-1.011-1.011v-11.535c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v1.093c0.929-1.093 2.733-2.242 4.701-2.242 2.761 0 4.21 1.394 4.21 4.264v8.419c-0 0.547-0.465 1.012-1.039 1.012z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M98.046 22.964c-0.547 0-1.011-0.465-1.011-1.011v-1.121c-0.984 1.34-2.597 2.296-4.455 2.296-3.444 0-5.877-2.624-5.877-6.915 0-4.21 2.405-6.943 5.877-6.943 1.777 0 3.389 0.875 4.455 2.324v-6.205c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v16.564c0 0.547-0.464 1.012-1.038 1.012zM97.035 13.233c-0.738-1.148-2.324-2.132-3.964-2.132-2.651 0-4.237 2.187-4.237 5.112 0 2.924 1.585 5.084 4.237 5.084 1.64 0 3.226-0.929 3.964-2.077v-5.986z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M103.512 22.964c-0.546 0-1.011-0.465-1.011-1.011v-11.535c0-0.519 0.465-0.984 1.066-0.984 0.52 0 0.984 0.465 0.984 0.984v11.535c0 0.547-0.465 1.012-1.039 1.012z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M117.89 22.964c-0.547 0-1.012-0.465-1.012-1.011v-7.79c0-2.323-1.175-3.062-2.952-3.062-1.613 0-3.143 0.984-3.909 2.050v8.801c0 0.547-0.464 1.011-1.038 1.011-0.547 0-1.011-0.465-1.011-1.011v-11.535c0-0.519 0.464-0.984 1.066-0.984 0.52 0 0.984 0.465 0.984 0.984v1.093c0.93-1.093 2.734-2.242 4.702-2.242 2.76 0 4.209 1.394 4.209 4.264v8.419c0 0.547-0.464 1.012-1.038 1.012z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M127.647 28.157c-1.941 0-3.499-0.355-4.947-1.585-0.191-0.164-0.301-0.41-0.301-0.684 0-0.465 0.41-0.875 0.902-0.875 0.218 0 0.41 0.055 0.574 0.191 1.039 0.929 2.214 1.257 3.772 1.257 2.187 0 4.237-1.066 4.237-3.964v-1.886c-0.957 1.34-2.57 2.351-4.428 2.351-3.444 0-5.876-2.569-5.876-6.833 0-4.237 2.405-6.861 5.876-6.861 1.777 0 3.362 0.875 4.428 2.324v-1.175c0-0.519 0.464-0.984 1.066-0.984 0.52 0 0.984 0.465 0.984 0.984v11.999c0 4.373-3.061 5.74-6.286 5.74zM131.884 13.233c-0.711-1.148-2.296-2.132-3.936-2.132-2.652 0-4.237 2.105-4.237 5.030 0 2.897 1.585 5.029 4.237 5.029 1.64 0 3.225-1.011 3.936-2.16v-5.767z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M155.309 11.237l-3.198 10.332c-0.246 0.82-1.039 1.394-1.886 1.394h-0.055c-0.875 0-1.64-0.574-1.886-1.394l-2.652-8.391-2.651 8.391c-0.246 0.82-1.039 1.394-1.913 1.394h-0.055c-0.848 0-1.613-0.574-1.859-1.394l-3.225-10.332c-0.027-0.137-0.055-0.273-0.055-0.41 0-0.684 0.574-1.394 1.449-1.394 0.629 0 1.23 0.41 1.394 1.011l2.515 8.665 2.788-8.528c0.219-0.683 0.848-1.148 1.64-1.148 0.711 0 1.34 0.465 1.585 1.148l2.788 8.528 2.514-8.665c0.164-0.601 0.766-1.011 1.395-1.011 0.847 0 1.449 0.656 1.449 1.394-0.001 0.137-0.028 0.273-0.083 0.41z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M168.073 17.141h-8.692c0.191 1.968 1.695 3.635 4.155 3.635 0.956 0 2.049-0.3 2.952-0.875 0.191-0.109 0.41-0.164 0.601-0.164 0.602 0 1.23 0.492 1.23 1.202 0 1.503-3.389 2.187-5.084 2.187-3.964 0-6.915-2.761-6.915-6.943 0-3.827 2.788-6.916 6.697-6.916 3.089 0 5.33 1.859 6.15 4.701 0.164 0.547 0.328 1.175 0.328 1.749 0 0.765-0.629 1.421-1.421 1.421zM163.017 11.62c-2.406 0-3.526 1.913-3.663 3.499h7.326c-0.055-1.53-1.094-3.499-3.663-3.499z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M173.129 22.964c-0.82 0-1.449-0.656-1.449-1.449v-15.689c0-0.765 0.629-1.421 1.503-1.421 0.766 0 1.422 0.656 1.422 1.421v15.689c-0 0.793-0.656 1.449-1.477 1.449z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M179.060 22.964c-0.82 0-1.449-0.656-1.449-1.449v-15.689c0-0.765 0.629-1.421 1.503-1.421 0.766 0 1.422 0.656 1.422 1.421v15.689c-0 0.793-0.656 1.449-1.477 1.449z\\\" fill=\\\"#cccccc\\\" />\\n      <path d=\\\"M28.781 14.834c-0.117-1.519-0.498-3.012-1.117-4.385-0.618-1.374-1.471-2.627-2.501-3.694-1.030-1.068-2.235-1.949-3.546-2.598-1.311-0.651-2.727-1.067-4.16-1.23-1.432-0.164-2.878-0.081-4.264 0.24-1.385 0.321-2.702 0.883-3.877 1.644-1.175 0.761-2.208 1.719-3.046 2.814-0.838 1.094-1.481 2.325-1.893 3.618-0.414 1.293-0.596 2.648-0.55 3.983l0.263 0.003c0.076-1.305 0.375-2.585 0.879-3.768 0.503-1.183 1.208-2.268 2.067-3.196 0.858-0.929 1.87-1.701 2.971-2.277 1.102-0.576 2.294-0.955 3.505-1.118 1.209-0.164 2.442-0.116 3.617 0.132 1.176 0.247 2.296 0.697 3.299 1.318 1.004 0.62 1.89 1.411 2.614 2.318 0.724 0.907 1.283 1.93 1.649 3.006 0.367 1.076 0.54 2.204 0.521 3.323-0.020 1.122-0.23 2.224-0.617 3.247-0.386 1.024-0.949 1.969-1.648 2.787-0.699 0.818-1.534 1.507-2.449 2.031-0.915 0.525-1.91 0.883-2.925 1.061-1.014 0.178-2.057 0.177-3.060 0.007-1.001-0.169-1.954-0.509-2.815-0.996-0.295-0.167-0.578-0.352-0.85-0.551l4.686-7.132-0.102-0.083-10.27 10.316 0.106 0.099c0.083 0.076 0.156 0.142 0.236 0.211 0.157 0.137 0.318 0.271 0.48 0.401 0.326 0.261 0.662 0.506 1.008 0.737 0.201 0.134 0.405 0.263 0.613 0.386 0.506 0.302 1.029 0.573 1.566 0.81 1.513 0.669 3.135 1.066 4.76 1.18 0.813 0.057 1.622 0.045 2.428-0.035 0.805-0.080 1.603-0.229 2.379-0.445 1.554-0.431 3.020-1.132 4.315-2.052 1.296-0.918 2.423-2.054 3.321-3.338 0.9-1.283 1.572-2.715 1.978-4.21 0.408-1.495 0.548-3.048 0.429-4.565z\\\" fill=\\\"#cccccc\\\" />\\n    </svg>\\n  </div>\\n</div>\\n\";\n},\"useData\":true});\n          ","import Radio from 'backbone.radio';\nimport { View } from 'marionette';\n\nimport 'scss/modules/buttons.scss';\n\nimport ErrorTemplate from './error.hbs';\n\nimport './error.scss';\n\nconst ErrorView = View.extend({\n  className: 'error-page',\n  template: ErrorTemplate,\n  triggers: {\n    'click .js-back': 'click:back',\n  },\n  onClickBack() {\n    Radio.trigger('event-router', 'default');\n  },\n  templateContext() {\n    return this.options;\n  },\n});\n\nexport {\n  ErrorView,\n};\n","import { bind, contains } from 'underscore';\nimport Radio from 'backbone.radio';\n\nimport RouterApp from 'js/base/routerapp';\n\nimport getRootRoute from 'js/utils/root-route';\n\nimport { ErrorView } from 'js/views/globals/error/error_views';\n\nconst legacyRoots = [\n  'worklist',\n  'patient',\n  'patient-action',\n  'flow',\n  'schedule',\n  'clinicians',\n  'dashboards',\n  'form',\n  'program',\n  'programs',\n  'program-flow',\n];\n\nexport default RouterApp.extend({\n  eventRoutes: {\n    'notFound': {\n      action: 'show404',\n      route: '404',\n      root: true,\n    },\n    'unknownError': {\n      action: 'showError',\n      route: 'unknown-error',\n      root: true,\n    },\n  },\n\n  initialize() {\n    this.router.route('*unknown', '404', bind(this.handleUnknown, this));\n  },\n\n  viewEvents: {\n    'click:back': 'stop',\n  },\n\n  onBeforeStop() {\n    this.getRegion().empty();\n  },\n\n  handleUnknown() {\n    const rootRoute = getRootRoute();\n    if (contains(legacyRoots, rootRoute)) {\n      const workspace = Radio.request('bootstrap', 'currentWorkspace');\n      this.replaceUrl(`/${ workspace.get('slug') }${ location.pathname }`);\n      return;\n    }\n\n    this.start();\n    this.show404();\n  },\n  show404() {\n    this.showView(new ErrorView({ is404: true }));\n  },\n  showError(status) {\n    this.showView(new ErrorView({ status }));\n  },\n});\n\n","export default num => {\n  return `${ parseFloat(num) }px`;\n};\n","import { bind } from 'underscore';\nimport Radio from 'backbone.radio';\nimport { Behavior } from 'marionette';\n\nimport 'scss/modules/fill-window.scss';\n\nconst userActivityCh = Radio.channel('user-activity');\nconst topRegionCh = Radio.channel('top-region');\n\nexport default Behavior.extend({\n  regionName: 'region',\n  className: 'fill-window',\n  initialize(options) {\n    this.mergeOptions(options, ['regionName', 'className']);\n  },\n  onInitialize() {\n    this.region = this.view.getRegion(this.regionName);\n    this.listenTo(this.region, {\n      'empty': bind(this.view.triggerMethod, this.view, 'region:empty'),\n      'show': bind(this.view.triggerMethod, this.view, 'region:show'),\n    });\n  },\n  onRegionShow() {\n    this.listenTo(userActivityCh, 'body:down', this.onBodyDown);\n    this.listenTo(userActivityCh, 'iframe:focus', this.onIframeFocus);\n    this.$el.addClass(this.className);\n  },\n  onRegionEmpty() {\n    this.stopListening(userActivityCh);\n    if (!this.region.isSwappingView()) this.$el.removeClass(this.className);\n  },\n  onBodyDown({ target }) {\n    this.emptyOnActvity(target);\n  },\n  onIframeFocus(iframeEl) {\n    this.emptyOnActvity(iframeEl);\n  },\n  emptyOnActvity(el) {\n    if (!this.region.hasView() || topRegionCh.request('contains', this.view, el)) return;\n\n    this.region.empty();\n  },\n});\n","import { extend, noop, partial } from 'underscore';\nimport Radio from 'backbone.radio';\nimport hbs from 'handlebars-inline-precompile';\nimport { View, CollectionView, Region } from 'marionette';\n\nimport px from 'js/utils/formatting/px';\n\nimport 'scss/modules/fill-window.scss';\n\nimport PreloadRegion from 'js/regions/preload_region';\nimport TopRegionBehavior from 'js/behaviors/top-region';\n\nimport { PreloaderView } from 'js/views/globals/prelogin/prelogin_views';\n\nimport './app-frame.scss';\nimport './tooltip.scss';\n\nconst userActivityCh = Radio.channel('user-activity');\nconst historyCh = Radio.channel('history');\n\nfunction preventRegionClose() {\n  return this.getRegion('region').hasView();\n}\n\nconst AppView = View.extend({\n  className: 'app-frame',\n  template: hbs`\n    <div class=\"app-frame__nav js-nav\" data-nav-region></div>\n    <div class=\"app-frame__content flex-region\" data-content-region></div>\n    <div class=\"app-frame__sidebar\" data-sidebar-region></div>\n  `,\n  ui: {\n    nav: '.js-nav',\n  },\n  regions: {\n    nav: '[data-nav-region]',\n    content: {\n      el: '[data-content-region]',\n      regionClass: PreloadRegion,\n    },\n    sidebar: '[data-sidebar-region]',\n  },\n  toggleNav(shouldShow) {\n    this.ui.nav.toggleClass('is-hidden', !shouldShow);\n  },\n});\n\nconst TopRegionView = View.extend({\n  behaviors: [TopRegionBehavior],\n  regionClass: Region.extend({ replaceElement: true }),\n  template: hbs`<div data-region></div>`,\n  regions: {\n    region: '[data-region]',\n  },\n  contains(target) {\n    const region = this.getRegion('region');\n    if (region.hasView() && (region.currentView.el === target || this.Dom.hasEl(region.currentView.el, target))) return true;\n    if (this.ignoreEl === target) return true;\n    if (this.ignoreEl && this.Dom.hasEl(this.ignoreEl, target)) return true;\n  },\n  empty() {\n    this.region.empty();\n  },\n});\n\nconst PreloaderRegionView = TopRegionView.extend({\n  // NOTE: ensures preload can't close on user click\n  contains: preventRegionClose,\n  onRender() {\n    this.showChildView('region', new PreloaderView());\n  },\n});\n\nconst ModalRegionView = TopRegionView.extend({\n  className: 'fill-window--dark',\n  behaviors: [{\n    behaviorClass: TopRegionBehavior,\n    className: 'is-shown',\n  }],\n  initialize(options) {\n    this.mergeOptions(options, ['$body', 'setLocation', 'contains']);\n    this.region = this.getRegion('region');\n\n    const hotkeyCh = Radio.channel('hotkey');\n    this.listenTo(hotkeyCh, 'close', this.empty);\n  },\n  onRegionShow() {\n    this.listenTo(historyCh, 'change:route', this.empty);\n    this.listenTo(userActivityCh, 'window:resize', this.setLocation);\n    this.setLocation();\n  },\n  onRegionEmpty() {\n    this.stopListening(userActivityCh);\n  },\n  setLocation() {\n    const view = this.region.currentView;\n    const width = view.$el.outerWidth();\n    const height = view.$el.outerHeight();\n    const bodyHeight = this.$body.height();\n    const bodyWidth = this.$body.width();\n\n    const left = bodyWidth / 2 - width / 2;\n    const top = bodyHeight / 3 - height / 3;\n\n    view.$el.css({\n      left: px(left),\n      top: px(top),\n    });\n  },\n  contains(target, testView) {\n    if (!this.region.hasView()) return false;\n\n    const el = this.region.currentView.el;\n\n    // testView prevents closing layers below\n    if (el === target || this.Dom.hasEl(el, target) || this !== testView) return true;\n  },\n});\n\nconst popDefaults = {\n  align: 'left',\n  direction: 'down',\n  left: 0,\n  outerHeight: 0,\n  outerWidth: 0,\n  popWidth: null,\n  top: 0,\n  windowPadding: 5,\n};\n\nconst PopRegionView = TopRegionView.extend({\n  initialize({ $body }) {\n    this.region = this.getRegion('region');\n    this.$body = $body;\n    const hotkeyCh = Radio.channel('hotkey');\n    this.listenTo(hotkeyCh, 'close', this.empty);\n  },\n  onRegionShow(region, view, options) {\n    view.$el.addClass('app-frame__pop-region');\n    const popOptions = extend({}, popDefaults, options);\n    this.ignoreEl = options.ignoreEl;\n    this.listenTo(userActivityCh, 'window:resize', this.empty);\n    this.listenTo(historyCh, 'change:route', this.empty);\n    this.listenTo(view, 'render render:children', partial(this.setLocation, popOptions));\n    this.setLocation(popOptions);\n  },\n  onRegionEmpty(region, view) {\n    view.$el.removeClass('app-frame__pop-region');\n    this.stopListening(userActivityCh);\n    this.stopListening(historyCh);\n    this.stopListening(view);\n  },\n  setLocation(popOptions) {\n    const view = this.region.currentView;\n\n    if (popOptions.popWidth) {\n      view.$el.css({\n        width: px(popOptions.popWidth),\n      });\n    }\n\n    const height = view.$el.outerHeight();\n    const top = this.setDirection(height, popOptions);\n    const width = popOptions.popWidth || view.$el.outerWidth();\n    const left = this.setAlign(width, popOptions);\n\n    view.$el.css({\n      top: px(top),\n      left: px(left),\n    });\n  },\n  setAlign(width, { left, align, windowPadding, outerWidth }) {\n    if (align === 'right') left += outerWidth - width;\n    if (left < windowPadding) return windowPadding;\n\n    const bodyWidth = this.$body.width();\n    if (left + width > bodyWidth - windowPadding) {\n      return bodyWidth - width - windowPadding;\n    }\n    return left;\n  },\n  /* istanbul ignore next: difficult to test in context */\n  setDirection(height, { top, direction, windowPadding, outerHeight }) {\n    const bodyHeight = this.$body.height();\n\n    if (direction === 'down') {\n      if (top + outerHeight + height + windowPadding > bodyHeight) {\n        direction = 'forceUp';\n        return this.setDirection(height, { top, direction, windowPadding, outerHeight });\n      }\n\n      return outerHeight + top;\n    }\n\n    top -= height;\n    if (top >= windowPadding) return top;\n\n    if (direction === 'forceUp') {\n      return bodyHeight - windowPadding - height;\n    }\n\n    direction = 'down';\n    return this.setDirection(height, { top, direction, windowPadding, outerHeight });\n  },\n});\n\nconst TooltipRegionView = TopRegionView.extend({\n  initialize({ $body }) {\n    this.region = this.getRegion('region');\n    this.$body = $body;\n  },\n  onRegionShow(region, view, options) {\n    this.listenTo(userActivityCh, 'window:resize', this.empty);\n\n    this.ignoreEl = options.ignoreEl;\n\n    if (options.orientation === 'horizontal') {\n      this.setHorizontalLocation(options);\n      return;\n    }\n\n    this.setVerticalLocation(options);\n  },\n  onRegionEmpty(options) {\n    this.stopListening(userActivityCh);\n  },\n  addClass(className) {\n    const view = this.region.currentView;\n    view.$el.addClass(className);\n  },\n  setTop(top) {\n    const view = this.region.currentView;\n    view.$el.css({ top: px(top) });\n  },\n  setLeft(left) {\n    const view = this.region.currentView;\n    view.$el.css({ left: px(left) });\n  },\n  setHorizontalLocation({ left, top, outerWidth, outerHeight }) {\n    const view = this.region.currentView;\n    const leftPer = (left + outerWidth) / this.$body.width();\n    const topPer = (top + outerHeight / 2) / this.$body.height();\n\n    // top 25% of screen\n    if (topPer < 0.25) {\n      this.addClass('is-top');\n      this.setTop(top + outerHeight / 2);\n    // bottom 25% of screen\n    } else if (topPer > 0.75) {\n      this.addClass('is-bottom');\n      this.setTop(top + outerHeight / 2 - view.$el.outerHeight());\n    } else {\n      this.setTop(top - view.$el.outerHeight() / 2 + outerHeight / 2);\n    }\n\n    // left 60% of screen\n    if (leftPer > 0.6) {\n      this.addClass('is-right-arrow');\n      this.setLeft(left - view.$el.outerWidth());\n    // right 40% of screen\n    } else {\n      this.addClass('is-left-arrow');\n      this.setLeft(left + outerWidth);\n    }\n  },\n  setVerticalLocation({ left, top, outerWidth, outerHeight }) {\n    const view = this.region.currentView;\n    const leftPer = (left + outerWidth / 2) / this.$body.width();\n    const topPer = (top + outerHeight) / this.$body.height();\n\n    // left 15% of screen\n    if (leftPer < 0.15) {\n      this.addClass('is-left');\n      this.setLeft(left + outerWidth / 2);\n    // right 15% of screen\n    } else if (leftPer > 0.85) {\n      this.addClass('is-right');\n      this.setLeft(left + outerWidth / 2 - view.$el.outerWidth());\n    } else {\n      this.setLeft(left - view.$el.outerWidth() / 2 + outerWidth / 2);\n    }\n\n    // bottom 40% of screen\n    if (topPer > 0.6) {\n      this.addClass('is-bottom-arrow');\n      this.setTop(top - view.$el.outerHeight());\n    // top 60% of screen\n    } else {\n      this.addClass('is-top-arrow');\n      this.setTop(top + outerHeight);\n    }\n  },\n});\n\nconst RootView = CollectionView.extend({\n  viewComparator: false,\n  el: '#root',\n  template: hbs``,\n  AppView: AppView,\n  initialize() {\n    // Render away any preexisting html\n    this.render();\n    this.regions = [];\n    const $body = this.$el;\n\n    Radio.reply('top-region', 'contains', this.contains, this);\n\n    this.appView = new this.AppView();\n\n    // Add lowest layer (z-index) to highest\n    this.addChildView(this.appView);\n    this.addRegionView('tooltip', new TooltipRegionView({ $body }));\n    this.addRegionView('modalSidebar', new ModalRegionView({ $body, setLocation: noop }));\n    this.addRegionView('modal', new ModalRegionView({ $body }));\n    this.addRegionView('modalSmall', new ModalRegionView({ $body }));\n    this.addRegionView('modalLoading', new ModalRegionView({ $body, contains: preventRegionClose }));\n    this.addRegionView('alert', new TopRegionView());\n    this.addRegionView('pop', new PopRegionView({ $body }));\n    this.addRegionView('preloader', new PreloaderRegionView());\n    this.addRegionView('error', new TopRegionView());\n  },\n  addRegionView(name, view) {\n    view.name = name;\n    this.addChildView(view);\n    this.regions[name] = view.getRegion('region');\n  },\n  getRegion(name) {\n    return this.regions[name];\n  },\n  contains(testView, target) {\n    const viewIndex = this.children.findIndexByView(testView);\n\n    // Tests to see if a click is registered on a higher layer\n    for (let i = this.children.length - 1; viewIndex <= i; i--) {\n      const view = this.children.findByIndex(i);\n      if (view.contains(target, testView)) return true;\n    }\n  },\n});\n\nexport {\n  RootView,\n};\n","import 'js/base/setup';\nimport 'js/i18n';\n\nimport $ from 'jquery';\nimport { get } from 'underscore';\nimport Backbone from 'backbone';\nimport Radio from 'backbone.radio';\nimport { addError } from 'js/datadog';\n\nimport 'scss/provider-core.scss';\nimport 'scss/app-root.scss';\n\nimport { appConfig } from './config';\nimport initPlatform from 'js/utils/platform';\n\nimport App from 'js/base/app';\n\nimport Datepicker from 'js/components/datepicker';\nimport Droplist from 'js/components/droplist';\nimport Optionlist from 'js/components/optionlist';\nimport Tooltip from 'js/components/tooltip';\n\nimport 'js/entities-service';\n\nimport AlertService from 'js/services/alert';\nimport BootstrapService from 'js/services/bootstrap';\nimport HistoryService from 'js/services/history';\nimport LastestListService from 'js/services/latest-list';\nimport ModalService from 'js/services/modal';\n\nimport ErrorApp from 'js/apps/globals/error_app';\n\nimport { RootView } from 'js/views/globals/root_views';\nimport { PreloaderView } from 'js/views/globals/prelogin/prelogin_views';\n\nconst $document = $(document);\n\nconst Application = App.extend({\n  channelName: 'app',\n  radioRequests: {\n    'show:pop': 'showPop',\n  },\n\n  initialize() {\n    initPlatform();\n  },\n\n  // Before the application starts make sure:\n  // - A root layout is attached\n  // - Global services are started\n  onBeforeStart() {\n    new BootstrapService({ name: appConfig.name });\n    this.setView(new RootView());\n    this.configComponents();\n    this.startServices();\n    this.setListeners();\n    // Ensure Error is the first app initialized\n    new ErrorApp({ region: this.getRegion('error') });\n  },\n\n  configComponents() {\n    Tooltip.setRegion(this.getRegion('tooltip'));\n    const popRegion = this.getRegion('pop');\n    Datepicker.setRegion(popRegion);\n    Droplist.setPopRegion(popRegion);\n    Optionlist.setRegion(popRegion);\n  },\n\n  showPop(view, opts) {\n    const popRegion = this.getRegion('pop');\n    return popRegion.show(view, opts);\n  },\n\n  startServices() {\n    new AlertService({ region: this.getRegion('alert') });\n    new LastestListService();\n    new ModalService({\n      modalRegion: this.getRegion('modal'),\n      modalSmallRegion: this.getRegion('modalSmall'),\n      modalSidebarRegion: this.getRegion('modalSidebar'),\n      modalLoadingRegion: this.getRegion('modalLoading'),\n    });\n  },\n\n  setListeners() {\n    $(window).on({\n      'resize.app'() {\n        Radio.trigger('user-activity', 'window:resize');\n      },\n      'beforeunload': /* istanbul ignore next: Unloading the window loses coverage reports */ () => {\n        this.stop();\n      },\n    });\n\n    $document.on('keydown.app', function(evt) {\n      Radio.trigger('user-activity', 'document:keydown', evt);\n    });\n\n    this.setMouseListeners();\n    this.setHotkeyListeners();\n  },\n\n  setMouseListeners() {\n    $document.on('mouseover.app', function(evt) {\n      Radio.trigger('user-activity', 'document:mouseover', evt);\n    });\n\n    /* istanbul ignore next: No need to test jquery functionality */\n    $document.on('mouseleave.app', function(evt) {\n      Radio.trigger('user-activity', 'document:mouseleave', evt);\n    });\n\n    $('body').on('pointerdown.app', function(evt) {\n      Radio.trigger('user-activity', 'body:down', evt);\n    });\n  },\n\n  setHotkeyListeners() {\n    // https://github.com/jeresig/jquery.hotkeys\n    $document.on('keydown.app', null, '/', function(evt) {\n      Radio.trigger('hotkey', 'search', evt);\n    });\n\n    $document.on('keydown.app', null, 'esc', function(evt) {\n      Radio.trigger('hotkey', 'close', evt);\n    });\n  },\n\n  beforeStart() {\n    return [\n      Radio.request('bootstrap', 'fetch'),\n      import('js/apps/globals/app-frame_app'),\n    ];\n  },\n\n  onFail(options, error) {\n    addError(get(error, 'responseData', error));\n\n    if (error === 'No workspaces found' || get(error, ['response', 'status']) === 401 && get(error, ['responseData', 'errors', 0, 'code']) === '5000') {\n      this.getRegion('preloader').show(new PreloaderView({ notSetup: true }));\n    }\n  },\n\n  onStart(options, currentUser, { default: AppFrameApp }) {\n    if (!currentUser.hasTeam() || !currentUser.get('enabled')) {\n      this.getRegion('preloader').show(new PreloaderView({ notSetup: true }));\n      return;\n    }\n\n    this.emptyRegion('preloader');\n    const appFrameApp = this.addChildApp('appFrame', AppFrameApp);\n\n    this.listenToOnce(appFrameApp, 'before:start', this.startHistory);\n\n    appFrameApp.start({ view: this.getView().appView });\n  },\n\n  startHistory() {\n    Backbone.history.start({ pushState: true });\n\n    new HistoryService();\n  },\n\n  emptyRegion(name) {\n    return this.getRegion(name).empty();\n  },\n});\n\nfunction startApp() {\n  const app = new Application();\n\n  app.start();\n}\n\nexport {\n  startApp,\n  Application,\n};\n"],"file":"20240621-app-DT5TAMbH.js"}