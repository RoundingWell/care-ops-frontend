(self.webpackChunkcare_ops_frontend=self.webpackChunkcare_ops_frontend||[]).push([[345],{2085:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Fr}});var a,i=n(7361),l=n(7739),o=n.n(l),s=n(7284),r=(n(8462),n(899),n(8088)),c=n.n(r),u=n(9203),d=n.n(u),m=n(9230),p=n.n(m),h=n(6718),f=n(6473),g=n(7188),w=(n(5063),n(9571),function(e){return e&&e.replace(/(\r\n|\n|\r)/gm," ")}),v=n(2014),b=n(6741),y=n(6958),_=n(7056),x=n(1665),k=n(7080),C=f.ZP.patients.shared.components.stateComponent,O=p().template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(l=null!=(l=o(n,"name")||(null!=t?o(t,"name"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:1,column:99},end:{line:1,column:109}}}):l)},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="action--'+o(e.lambda(null!=(l=null!=t?r(t,"options"):t)?r(l,"color"):l,t))+'">'+o((r(n,"fa")||t&&r(t,"fa")||e.hooks.helperMissing).call(s,null!=(l=null!=t?r(t,"options"):t)?r(l,"iconType"):l,null!=(l=null!=t?r(t,"options"):t)?r(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:78}}}))+(null!=(l=r(n,"unless").call(s,null!=t?r(t,"isCompact"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:78},end:{line:1,column:120}}}))?l:"")+"</span>"},useData:!0}),T=k.Z.extend({isCompact:!1,initialize:function(e){var t=e.stateId;this.collection=function(){if(a)return a;var e=o().request("bootstrap","currentOrg");return a=e.getStates()}(),this.setState({selected:this.collection.get(t)})},onChangeSelected:function(e){this.triggerMethod("change:state",e)},popWidth:function(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},viewOptions:function(){var e=this.getOption("isCompact");return{className:e?"button-secondary--compact is-icon-only":"button-secondary w-100",template:O,templateContext:{isCompact:e}}},picklistOptions:{headingText:C.headingText,itemTemplate:O}});function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n(1201);var D,P=f.ZP.patients.shared.components.ownerComponent,V=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((r(n,"matchText")||t&&r(t,"matchText")||o).call(l,null!=t?r(t,"name"):t,null!=t?r(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:24}}}))+' <span class="owner-component__role">'+s((r(n,"matchText")||t&&r(t,"matchText")||o).call(l,null!=t?r(t,"short"):t,null!=t?r(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:1,column:61},end:{line:1,column:86}}}))+"</span>"},useData:!0}),M=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||s).call(o,"user-circle",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+r("function"==typeof(l=null!=(l=c(n,"name")||(null!=t?c(t,"name"):t))?l:s)?l.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:21},end:{line:1,column:31}}}):l)},useData:!0}),E=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||s).call(o,"user-circle",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+r("function"==typeof(l=null!=(l=c(n,"short")||(null!=t?c(t,"short"):t))?l:s)?l.call(o,{name:"short",hash:{},data:i,loc:{start:{line:1,column:21},end:{line:1,column:32}}}):l)},useData:!0}),j=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||s).call(o,"user-circle",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+r("function"==typeof(l=null!=(l=c(n,"name")||(null!=t?c(t,"name"):t))?l:s)?l.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:21},end:{line:1,column:31}}}):l)+r((c(n,"far")||t&&c(t,"far")||s).call(o,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:31},end:{line:1,column:51}}}))},useData:!0});function A(){if(D)return D;var e=o().request("bootstrap","currentOrg");return D=e.getActiveRoles()}var N={};function F(e){return N[e.id]||(N[e.id]=e.getActiveClinicians()),N[e.id]}var I=k.Z.extend({isCompact:!1,isFilter:!1,headingText:P.headingText,placeholderText:P.placeholderText,hasRoles:!0,hasClinicians:!0,popWidth:function(){var e=this.getOption("isFilter"),t=this.getOption("isCompact");return e||t?null:this.getView().$el.outerWidth()},picklistOptions:function(){return{itemTemplate:V,itemTemplateContext:function(){if("roles"!==this.model.type)return{short:this.model.getRole().get("short")}},isSelectlist:!0,infoText:this.getOption("infoText"),headingText:this.getOption("headingText"),placeholderText:this.getOption("placeholderText")}},viewOptions:function(){var e=this.getOption("isCompact");return this.getOption("isFilter")?{className:"button-filter",template:j}:e?{className:"owner-component--compact button-secondary--compact w-100",template:"roles"===this.getState("selected").type?E:M}:{className:"button-secondary w-100",template:M}},initialize:function(e){var t,n=e.owner,a=e.groups;if(this.lists=[],this.getOption("hasClinicians")){var i,l=o().request("bootstrap","currentUser");this.lists.push({collection:new(c().Collection)([l])}),(i=this.lists).push.apply(i,function(e){if(Array.isArray(e))return S(e)}(t=a.map((function(e){return{collection:F(e),headingText:e.get("name")}})))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}this.getOption("hasRoles")&&this.lists.push({collection:A(),headingText:this.lists.length?P.rolesHeadingText:null}),this.setState({selected:n})},onDestroy:function(){N={}},onChangeSelected:function(e){this.triggerMethod("change:owner",e)}}),R=n(2894),G=n(1521),L=f.ZP.patients.shared.components.dueComponent,q=p().template({1:function(e,t,n,a,i){return' class="is-overdue"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  <span"+(null!=(l=c(n,"if").call(o,null!=t?c(t,"isOverdue"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:7},end:{line:2,column:50}}}))?l:"")+">\n    "+r((c(n,"far")||t&&c(t,"far")||s).call(o,"calendar-alt",{name:"far",hash:{},data:i,loc:{start:{line:3,column:4},end:{line:3,column:26}}}))+r((c(n,"formatDateTime")||t&&c(t,"formatDateTime")||s).call(o,null!=t?c(t,"date"):t,null!=t?c(t,"dateFormat"):t,{name:"formatDateTime",hash:{defaultHtml:null!=t?c(t,"defaultText"):t,inputFormat:"YYYY-MM-DD"},data:i,loc:{start:{line:3,column:26},end:{line:3,column:109}}}))+"\n  </span>\n"},useData:!0}),B=R.wA.extend({isCompact:!1,viewEvents:{click:"onClick"},onClick:function(){this.toggleState("isActive")},stateEvents:{"change:isActive":"onChangeIsActive","change:selected":"onChangeStateSelected"},onChangeIsActive:function(e,t){var n=this.getView();n.$el.toggleClass("is-active",t),t&&(n.$el.blur(),this.showDatepicker())},viewOptions:function(){var e=this.getOption("isCompact"),t=this.getState("selected"),n=this.getState("isDisabled");return{tagName:"button",attributes:{disabled:n},className:function(){return e&&t?"button-secondary--compact due-component":e&&!t?"button-secondary--compact due-component is-icon-only":"button-secondary w-100 due-component"},triggers:{click:"click"},template:q,templateContext:{defaultText:e?"":L.defaultText,dateFormat:e?"SHORT":"LONG",date:t,isOverdue:!n&&this.getOption("isOverdue")}}},initialize:function(e){var t=e.date;this.setState({selected:t})},showDatepicker:function(){var e=new G.Z({uiView:this.getView(),state:{selectedDate:this.getState("selected")}});this.listenTo(e,{"change:selectedDate":function(t){this.setState("selected",t),e.destroy()},destroy:this.onDatepickerDestroy}),e.show()},onDatepickerDestroy:function(){this.toggleState("isActive",!1)},onChangeStateSelected:function(e,t){this.show(),this.triggerMethod("change:due",t)}}),Z=f.ZP.patients.shared.components.timeComponent,H="HH:mm:ss",W=d()("07:00:00",H),Y=(0,i.times)(96,(function(e){return{id:W.add(15*e,"minutes").format(H)}})),U=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"clock",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))},useData:!0}),$=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((r(n,"far")||t&&r(t,"far")||o).call(l,"clock",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+" "+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"id"):t,"LT",{name:"formatDateTime",hash:{defaultHtml:(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.shared.components.timeComponent.placeholderText",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:76},end:{line:1,column:144}}}),inputFormat:"HH:mm:ss"},data:i,loc:{start:{line:1,column:16},end:{line:1,column:146}}}))},useData:!0}),z=k.Z.extend({collection:new(c().Collection)(Y),align:"right",popWidth:192,isCompact:!1,isSelectlist:!0,getClassName:function(e,t){if(!e&&t)return"button-secondary--compact time-component is-icon-only";var n=e&&this.getOption("isOverdue")?"is-overdue":"";return t?"button-secondary--compact time-component ".concat(n):"button-secondary time-component w-100 ".concat(n)},getTemplate:function(e,t){return!e&&t?U:$},viewOptions:function(){var e=this.getOption("isCompact"),t=this.getState("selected"),n=t?t.id:null;return{className:this.getClassName(n,e),template:this.getTemplate(n,e)}},picklistOptions:{canClear:!0,clearText:Z.clear,headingText:Z.headingText,placeholderText:Z.placeholderText,isSelectlist:!0,itemTemplateContext:function(){return{text:d()(this.model.id,H).format("LT")}}},initialize:function(e){var t=e.time,n=this.collection.get(t);this.setState({selected:n})},onChangeSelected:function(e){var t=e?e.id:null;this.triggerMethod("change:time",t)}}),Q=f.ZP.patients.shared.components.durationComponent,X=(0,i.map)((0,i.range)(99),(function(e){return{id:e+1}})),K=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+o(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"components"))&&s(l,"durationComponent"))&&s(l,"defaultText"),t))},useData:!0}),J=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((r(n,"far")||t&&r(t,"far")||o).call(l,"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+s((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.shared.components.durationComponent.mins",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:35},end:{line:1,column:96}}}),{name:"formatMessage",hash:{min:null!=t?r(t,"id"):t},data:i,loc:{start:{line:1,column:19},end:{line:1,column:105}}}))},useData:!0}),ee=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"formatMessage")||t&&s(t,"formatMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.shared.components.durationComponent.mins",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:77}}}),{name:"formatMessage",hash:{min:null!=t?s(t,"id"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:86}}}))},useData:!0}),te=k.Z.extend({collection:new(c().Collection)(X),getTemplate:function(){return this.getState("selected")?J:K},viewOptions:function(){return{className:"button-secondary w-100",template:this.getTemplate()}},picklistOptions:{canClear:!0,clearText:Q.clear,headingText:Q.headingText,placeholderText:Q.placeholderText,isSelectlist:!0,itemTemplate:ee},initialize:function(e){var t=e.duration,n=this.collection.get(t);this.setState({selected:n})},popWidth:function(){return this.getView().$el.outerWidth()},onChangeSelected:function(e){var t=e?e.id:0;this.triggerMethod("change:duration",t)}}),ne=h.View.extend({className:"button-secondary--compact is-icon-only",tagName:"button",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"poll-h",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))},useData:!0}),triggers:{click:"click"},onClick:function(){o().trigger("event-router","form:patientAction",this.model.id,this.model.getForm().id)}}),ae=n(3855),ie=n.n(ae),le=n(8862),oe=n.n(le),se=n(3948),re=n.n(se),ce=g.Z.ENTER_KEY,ue=h.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"actionSidebarViews"))&&o(l,"disabledSaveView"))&&o(l,"saveBtn"),t))+"</button>"},useData:!0})}),de=h.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),me=h.View.extend({className:"pos--relative",template:oe(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown:function(e){e.which!==ce||e.preventDefault()},onWatchChange:function(e){var t=w(e);this.ui.input.val(t),this.ui.spacer.text(t||" "),this.model.set("name",t)},templateContext:function(){return{isNew:this.model.isNew(),isDisabled:this.getOption("isDisabled")}},onDomRefresh:function(){this.model.isNew()&&this.ui.input.focus()}}),pe=h.View.extend({className:"pos--relative",template:re(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange:function(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("details",(0,v.Z)(e))},templateContext:function(){return{isDisabled:this.getOption("isDisabled")}}}),he=h.View.extend({attributes:function(){return{disabled:!!this.getOption("isShowingForm")}},tagName:"button",className:"button-secondary w-100 action-sidebar__form",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||s).call(o,"poll-h",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))+r("function"==typeof(l=null!=(l=c(n,"name")||(null!=t?c(t,"name"):t))?l:s)?l.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:26}}}):l)},useData:!0}),triggers:{click:"click"}}),fe=h.View.extend({childViewTriggers:{save:"save",cancel:"cancel"},className:"sidebar flex-region",template:ie(),regions:{name:"[data-name-region]",details:"[data-details-region]",state:"[data-state-region]",owner:"[data-owner-region]",dueDay:"[data-due-day-region]",dueTime:"[data-due-time-region]",duration:"[data-duration-region]",form:"[data-form-region]",save:"[data-save-region]",activity:{el:"[data-activity-region]",regionClass:y.Z},timestamps:"[data-timestamps-region]",comment:"[data-comment-region]"},triggers:{"click .js-close":"close","click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu:function(){var e=new(c().Collection)([{onSelect:(0,i.bind)(this.triggerMethod,this,"delete")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:f.ZP.patients.sidebar.action.layoutView.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="sidebar__delete-icon">'+o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-alt",{name:"far",hash:{},data:i,loc:{start:{line:1,column:35},end:{line:1,column:54}}}))+"</span>"+o(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"layoutView"))&&s(l,"menuOptions"))&&s(l,"delete"),t))},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()},templateContext:function(){return{isNew:this.action.isNew(),hasForm:!!this.action.getForm()}},initialize:function(e){var t=e.action;this.action=t,this.listenTo(this.action,{"change:_state":this.onChangeActionState,"change:_owner":this.onChangeOwner,"change:due_date":this.onChangeDueDate,"change:due_time":this.onChangeDueDate});var n=this.action.getFlow();this.listenTo(n,"change:_state",this.showAction)},isFlowDone:function(){var e=this.action.getFlow();return e&&e.isDone()},onChangeActionState:function(){var e=this.action.isDone(),t="done"===o().request("entities","states:model",this.action.previous("_state")).get("status");(e||t)&&this.showAction()},onChangeOwner:function(){this.showOwner()},onChangeDueDate:function(){this.showDueDay(),this.showDueTime()},onAttach:function(){(0,b.$)(this.el)},onRender:function(){this.showAction()},cloneAction:function(){this.clonedAction&&this.stopListening(this.clonedAction),this.clonedAction=this.action.clone()},showAction:function(){this.showEditForm(),this.showState(),this.showOwner(),this.showDueDay(),this.showDueTime(),this.showDuration(),this.showForm()},showEditForm:function(){this.cloneAction(),this.listenTo(this.clonedAction,"change:name change:details",this.showSave),this.action.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName:function(){var e=this.action.isDone()||this.isFlowDone();this.showChildView("name",new me({model:this.clonedAction,action:this.action,isDisabled:e}))},showDetails:function(){var e=this.action.isDone()||this.isFlowDone();this.showChildView("details",new pe({model:this.clonedAction,action:this.action,isDisabled:e}))},showState:function(){var e=this,t=this.action.isNew()||this.isFlowDone(),n=new T({stateId:this.action.get("_state"),state:{isDisabled:t}});this.listenTo(n,"change:state",(function(t){e.action.saveState(t)})),this.showChildView("state",n)},showOwner:function(){var e=this,t=this.action.isNew()||this.action.isDone()||this.isFlowDone(),n=new I({owner:this.action.getOwner(),groups:this.action.getPatient().getGroups(),state:{isDisabled:t}});this.listenTo(n,"change:owner",(function(t){e.action.saveOwner(t)})),this.showChildView("owner",n)},showDueDay:function(){var e=this,t=this.action.isNew()||this.action.isDone()||this.isFlowDone(),n=new B({date:this.action.get("due_date"),state:{isDisabled:t},isOverdue:this.action.isOverdue()});this.listenTo(n,"change:due",(function(t){e.action.saveDueDate(t)})),this.showChildView("dueDay",n)},showDueTime:function(){var e=this,t=this.action.isNew()||this.action.isDone()||this.isFlowDone()||!this.action.get("due_date"),n=new z({time:this.action.get("due_time"),isOverdue:this.action.isOverdue(),state:{isDisabled:t}});this.listenTo(n,"change:time",(function(t){e.action.saveDueTime(t)})),this.showChildView("dueTime",n)},showDuration:function(){var e=this,t=this.action.isNew()||this.action.isDone()||this.isFlowDone(),n=new te({duration:this.action.get("duration"),state:{isDisabled:t}});this.listenTo(n,"change:duration",(function(t){e.action.save({duration:t})})),this.showChildView("duration",n)},showForm:function(){var e=this,t=this.action.getForm();if(t&&!this.action.isNew()){var n=new he({model:t,isShowingForm:this.getOption("isShowingForm")});this.listenTo(n,"click",(function(){e.triggerMethod("click:form",t)})),this.showChildView("form",n)}},showSave:function(){if(!this.clonedAction.isValid())return this.showDisabledSave();this.showChildView("save",new de({model:this.clonedAction}))},showDisabledSave:function(){this.showChildView("save",new ue)},onSave:function(){this.getRegion("save").empty()},onCancel:function(){this.action.isNew()?this.triggerMethod("close",this):this.showEditForm()}});function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var we=h.View.extend({className:"comment__actions",template:p().template({1:function(e,t,n,a,i){return"disabled"},3:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"commentsViews"))&&o(l,"postCommentView"))&&o(l,"postBtn"),t))+"\n"},5:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"commentsViews"))&&o(l,"postCommentView"))&&o(l,"saveBtn"),t))+"\n"},7:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--text u-margin--r-4 js-cancel">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"commentsViews"))&&o(l,"postCommentView"))&&o(l,"cancelBtn"),t))+"</button>"},9:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--text u-float--left comment__delete js-delete"><span class="u-margin--r-4">'+o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-alt",{name:"far",hash:{},data:i,loc:{start:{line:10,column:118},end:{line:10,column:137}}}))+"</span>"+o(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"commentsViews"))&&s(l,"postCommentView"))&&s(l,"deleteBtn"),t))+"</button>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-post" '+(null!=(l=s(n,"if").call(o,null!=t?s(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:42},end:{line:2,column:75}}}))?l:"")+">\n"+(null!=(l=s(n,"if").call(o,null!=t?s(t,"isNew"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:3,column:6},end:{line:7,column:13}}}))?l:"")+"    </button>\n    "+(null!=(l=s(n,"unless").call(o,null!=t?s(t,"shouldHideCancel"):t,{name:"unless",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i,loc:{start:{line:9,column:4},end:{line:9,column:172}}}))?l:"")+"\n    "+(null!=(l=s(n,"unless").call(o,null!=t?s(t,"isNew"):t,{name:"unless",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i,loc:{start:{line:10,column:4},end:{line:10,column:231}}}))?l:"")+"\n  "},useData:!0}),templateContext:function(){return{shouldHideCancel:this.getOption("shouldHideCancel"),isDisabled:!this.model.isValid()||!this.model.hasChanged("message"),isNew:this.model.isNew()}},triggers:{"click .js-cancel":"cancel","click .js-post":"post","click .js-delete":"delete"}}),ve=h.View.extend({behaviors:[_.Z],modelEvents:{"change:message":"showPostView"},ui:{input:".js-input",spacer:".js-spacer"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex comment__form">\n      <span class="comment__author-label">'+u(ge(o=null!=(o=d(n,"initials")||(null!=t?d(t,"initials"):t))?o:r)===c?o.call(s,{name:"initials",hash:{},data:i,loc:{start:{line:3,column:42},end:{line:3,column:56}}}):o)+'</span>\n      <div class="flex-grow pos--relative">\n        <textarea class="input-secondary textarea-flex__input js-input" placeholder="'+u(e.lambda((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"shared"))&&d(l,"commentsViews"))&&d(l,"commentFormView"))&&d(l,"placeholder"),t))+'">'+u(ge(o=null!=(o=d(n,"message")||(null!=t?d(t,"message"):t))?o:r)===c?o.call(s,{name:"message",hash:{},data:i,loc:{start:{line:5,column:156},end:{line:5,column:169}}}):o)+'</textarea>\n        <div class="textarea-flex__container input-secondary comment__input js-spacer">'+u(ge(o=null!=(o=d(n,"message")||(null!=t?d(t,"message"):t))?o:r)===c?o.call(s,{name:"message",hash:{},data:i,loc:{start:{line:6,column:87},end:{line:6,column:100}}}):o)+"</div>\n      </div>\n    </div>\n    <div data-post-region></div>\n  "},useData:!0}),regions:{post:"[data-post-region]"},childViewTriggers:{post:"post:comment",cancel:"cancel:comment",delete:"confirm:delete"},templateContext:function(){return{initials:this.model.getClinician().getInitials()}},onRender:function(){this.showPostView()},onWatchChange:function(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("message",(0,v.Z)(e))},showPostView:function(){var e=this.model.isNew()&&!this.model.get("message");this.showChildView("post",new we({model:this.model,shouldHideCancel:e}))},onConfirmDelete:function(){var e=this,t=o().request("modal","show:small",{bodyText:f.ZP.patients.shared.commentsViews.commentFormView.deleteModal.bodyText,headingText:f.ZP.patients.shared.commentsViews.commentFormView.deleteModal.headingText,submitText:f.ZP.patients.shared.commentsViews.commentFormView.deleteModal.submitText,buttonClass:"button--red",onSubmit:function(){t.destroy(),e.triggerMethod("delete:comment",e.model)}})}}),be=n(6429),ye=n(288);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xe=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.created",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:79}}}),{name:"formatHTMLMessage",hash:{role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:105}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),ke=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.clinicianAssigned",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:89}}}),{name:"formatHTMLMessage",hash:{to_name:null!=t?r(t,"to_clinician"):t,role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:138}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Ce=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.actionCopiedFromProgram",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:95}}}),{name:"formatHTMLMessage",hash:{program:null!=t?r(t,"program"):t,role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:139}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Oe=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.detailsUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:86}}}),{name:"formatHTMLMessage",hash:{role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:112}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Te=p().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((s(n,"formatHTMLMessage")||t&&s(t,"formatHTMLMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.dueDateCleared",{name:"intlGet",hash:{},data:i,loc:{start:{line:3,column:22},end:{line:3,column:86}}}),{name:"formatHTMLMessage",hash:{role:null!=t?s(t,"role"):t,name:null!=t?s(t,"name"):t},data:i,loc:{start:{line:3,column:2},end:{line:3,column:113}}}))+"\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((s(n,"formatHTMLMessage")||t&&s(t,"formatHTMLMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.dueDateUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:86}}}),{name:"formatHTMLMessage",hash:{date:(s(n,"formatDateTime")||t&&s(t,"formatDateTime")||o).call(l,null!=t?s(t,"value"):t,"LONG",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:5,column:118},end:{line:5,column:147}}}),role:null!=t?s(t,"role"):t,name:null!=t?s(t,"name"):t},data:i,loc:{start:{line:5,column:2},end:{line:5,column:149}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=s(n,"unless").call(o,null!=t?s(t,"value"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:2},end:{line:6,column:13}}}))?l:"")+"  <div>"+e.escapeExpression((s(n,"formatDateTime")||t&&s(t,"formatDateTime")||e.hooks.helperMissing).call(o,null!=t?s(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+"</div>\n"},useData:!0}),Se=p().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((s(n,"formatHTMLMessage")||t&&s(t,"formatHTMLMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.dueTimeCleared",{name:"intlGet",hash:{},data:i,loc:{start:{line:3,column:22},end:{line:3,column:86}}}),{name:"formatHTMLMessage",hash:{role:null!=t?s(t,"role"):t,name:null!=t?s(t,"name"):t},data:i,loc:{start:{line:3,column:2},end:{line:3,column:113}}}))+"\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((s(n,"formatHTMLMessage")||t&&s(t,"formatHTMLMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.dueTimeUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:86}}}),{name:"formatHTMLMessage",hash:{time:(s(n,"formatDateTime")||t&&s(t,"formatDateTime")||o).call(l,null!=t?s(t,"value"):t,"LT",{name:"formatDateTime",hash:{inputFormat:"HH:mm:ss"},data:i,loc:{start:{line:5,column:118},end:{line:5,column:168}}}),role:null!=t?s(t,"role"):t,name:null!=t?s(t,"name"):t},data:i,loc:{start:{line:5,column:2},end:{line:5,column:170}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=s(n,"unless").call(o,null!=t?s(t,"value"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:2},end:{line:6,column:13}}}))?l:"")+"  <div>"+e.escapeExpression((s(n,"formatDateTime")||t&&s(t,"formatDateTime")||e.hooks.helperMissing).call(o,null!=t?s(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+"</div>\n"},useData:!0}),De=p().template({1:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((s(n,"formatHTMLMessage")||t&&s(t,"formatHTMLMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.durationCleared",{name:"intlGet",hash:{},data:i,loc:{start:{line:3,column:22},end:{line:3,column:87}}}),{name:"formatHTMLMessage",hash:{role:null!=t?s(t,"role"):t,name:null!=t?s(t,"name"):t},data:i,loc:{start:{line:3,column:2},end:{line:3,column:113}}}))+"\n"},3:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+e.escapeExpression((s(n,"formatHTMLMessage")||t&&s(t,"formatHTMLMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.durationUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:87}}}),{name:"formatHTMLMessage",hash:{duration:null!=t?s(t,"value"):t,role:null!=t?s(t,"role"):t,name:null!=t?s(t,"name"):t},data:i,loc:{start:{line:5,column:2},end:{line:5,column:130}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=s(n,"unless").call(o,null!=t?s(t,"value"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:2},end:{line:6,column:13}}}))?l:"")+"  <div>"+e.escapeExpression((s(n,"formatDateTime")||t&&s(t,"formatDateTime")||e.hooks.helperMissing).call(o,null!=t?s(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:7},end:{line:7,column:40}}}))+"</div>\n"},useData:!0}),Pe=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.formUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:83}}}),{name:"formatHTMLMessage",hash:{form:null!=t?r(t,"form"):t,role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:121}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Ve=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.formResponded",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:85}}}),{name:"formatHTMLMessage",hash:{form:null!=t?r(t,"form"):t,role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:123}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Me=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.formRemoved",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:83}}}),{name:"formatHTMLMessage",hash:{form:null!=t?r(t,"form"):t,role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:121}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Ee=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.nameUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:83}}}),{name:"formatHTMLMessage",hash:{from_name:null!=t?r(t,"previous"):t,to_name:null!=t?r(t,"value"):t,role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:146}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),je=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.roleAssigned",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:84}}}),{name:"formatHTMLMessage",hash:{to_role:null!=t?r(t,"to_role"):t,role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:128}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Ae=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.stateUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:84}}}),{name:"formatHTMLMessage",hash:{to_state:null!=t?r(t,"to_state"):t,role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:130}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Ne=h.View.extend({className:"u-margin--b-16",ui:{edit:".js-edit"},triggers:{"click @ui.edit":"click:edit"},childViewTriggers:{"cancel:comment":"cancel:edit","post:comment":"save:comment","delete:comment":"delete:comment"},regions:{comment:"[data-comment-activity-region]"},template:p().template({1:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="js-edit comment__edit">'+o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"pen",{name:"far",hash:{},data:i,loc:{start:{line:8,column:61},end:{line:8,column:74}}}))+" "+o(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"activityViews"))&&s(l,"commentView"))&&s(l,"edit"),t))+"</span>"},3:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="comment__edited"> '+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"activityViews"))&&o(l,"commentView"))&&o(l,"edited"),t))+" </span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div data-comment-activity-region>\n      <div class="comment__item">\n        <div class="comment__author-label">'+u(_e(o=null!=(o=d(n,"initials")||(null!=t?d(t,"initials"):t))?o:r)===c?o.call(s,{name:"initials",hash:{},data:i,loc:{start:{line:4,column:43},end:{line:4,column:57}}}):o)+'</div>\n        <div class="comment__title">\n          <span class="comment__author-name">'+u(_e(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===c?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:6,column:45},end:{line:6,column:55}}}):o)+'</span>\n          <span class="comment__timestamp">'+u((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||r).call(s,null!=t?d(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:43},end:{line:7,column:84}}}))+"</span>\n          "+(null!=(l=d(n,"if").call(s,null!=t?d(t,"canEdit"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:8,column:10},end:{line:8,column:155}}}))?l:"")+'\n        </div>\n        <div class="comment__message">'+u(_e(o=null!=(o=d(n,"message")||(null!=t?d(t,"message"):t))?o:r)===c?o.call(s,{name:"message",hash:{},data:i,loc:{start:{line:10,column:38},end:{line:10,column:51}}}):o)+(null!=(l=d(n,"if").call(s,null!=t?d(t,"edited_at"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:10,column:51},end:{line:10,column:182}}}))?l:"")+"</div>\n      </div>\n    </div>\n  "},useData:!0}),templateContext:function(){var e=this.model.getClinician(),t=o().request("bootstrap","currentUser");return{canEdit:e.id===t.id,name:e.get("name"),initials:e.getInitials()}},onRender:function(){var e=this.model.get("edited_at");if(e){var t=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"formatHTMLMessage")||t&&s(t,"formatHTMLMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.sidebar.action.activityViews.commentView.editTooltip",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:20},end:{line:1,column:93}}}),{name:"formatHTMLMessage",hash:{edited:(s(n,"formatDateTime")||t&&s(t,"formatDateTime")||o).call(l,null!=t?s(t,"edited"):t,"TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:104},end:{line:1,column:134}}})},data:i,loc:{start:{line:1,column:0},end:{line:1,column:137}}}))},useData:!0});new ye.Z({messageHtml:(0,f.SM)(t,{edited:e}),uiView:this,ui:this.ui.edit})}},onClickEdit:function(){this.showChildView("comment",new ve({model:this.model.clone()}))},onSaveComment:function(e){var t=e.model;this.model.save({message:t.get("message"),edited_at:d().utc().format()}),this.render()},onCancelEdit:function(){this.render()},onDeleteComment:function(){this.model.destroy()}}),Fe=h.View.extend({className:"action-sidebar__activity-item",getTemplate:function(){var e=this.model.get("type"),t={ActionClinicianAssigned:ke,ActionCreated:xe,ActionDetailsUpdated:Oe,ActionDueDateUpdated:Te,ActionDueTimeUpdated:Se,ActionDurationUpdated:De,ActionFormUpdated:Pe,ActionFormResponded:Ve,ActionFormRemoved:Me,ActionNameUpdated:Ee,ActionCopiedFromProgramAction:Ce,ActionRoleAssigned:je,ActionStateUpdated:Ae};return t[e]?t[e]:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return""},useData:!0})},templateContext:function(){var e=this.model.getEditor(),t=this.model.getClinician(),n=this.model.getProgram(),a=this.model.getForm();return{name:e.get("name"),role:e.getRole().get("name"),to_clinician:t.get("name"),to_role:this.model.getRole().get("name"),to_state:this.model.getState().get("name"),program:n?n.get("name"):null,form:a?a.get("name"):null}}}),Ie=h.CollectionView.extend({childView:function(e){return"events"===e.type?Fe:Ne},viewFilter:function(e){return"ActionCreated"!==e.model.get("type")||!this.model.get("_program_action")},viewComparator:function(e,t){return(0,be.XQ)("asc",this._getSortDate(e.model),this._getSortDate(t.model))},_getSortDate:function(e){return e.get("date")?e.get("date"):e.get("created_at")}}),Re=h.View.extend({className:"sidebar__footer flex",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+s(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"activityViews"))&&u(l,"createdAt"),t))+"</h4><div>"+s((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||c).call(r,null!=t?u(t,"createdAt"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:134},end:{line:2,column:172}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+s(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"activityViews"))&&u(l,"updatedAt"),t))+"</h4><div>"+s((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||c).call(r,null!=t?u(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:105},end:{line:3,column:144}}}))+"</div></div>\n  "},useData:!0}),templateContext:function(){return{createdAt:this.getOption("createdEvent").get("date")}}});function Ge(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return n}}(e,t)||qe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){if(e){if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ze=s.Z.extend({onBeforeStart:function(e){var t=e.action,n=e.isShowingForm;this.action=t,this.showView(new fe({action:this.action,isShowingForm:n})),this.action.isNew()||this.getRegion("activity").startPreloader()},beforeStart:function(){if(!this.action.isNew())return[o().request("entities","fetch:actionEvents:collection",this.action.id),o().request("entities","fetch:comments:collection:byAction",this.action.id),o().request("entities","fetch:program:model:byAction",this.action.id)]},onStart:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Le(t,1),a=n[0],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=Le(i,1),o=l[0];this.action.isNew()||(this.activityCollection=new(c().Collection)([].concat(Ge(a.models),Ge(o.models))),this.showActivity(),this.showNewCommentForm())},showActivity:function(){this.showChildView("activity",new Ie({collection:this.activityCollection,model:this.action}));var e=this.activityCollection.find({type:"ActionCreated"});this.showChildView("timestamps",new Re({model:this.action,createdEvent:e}))},showNewCommentForm:function(){var e=o().request("bootstrap","currentUser"),t=this.showChildView("comment",new ve({model:o().request("entities","comments:model",{_action:this.action.id,_clinician:e.id})}));this.listenTo(t,{"post:comment":this.onPostNewComment,"cancel:comment":this.onCancelNewComment})},viewEvents:{save:"onSave",close:"stop",delete:"onDelete","click:form":"onClickForm"},onSave:function(e){var t=this,n=e.model;n.isNew()?this.action.saveAll(n.attributes).done((function(){o().trigger("event-router","patient:action",t.action.get("_patient"),t.action.id)})):this.action.save(n.pick("name","details"))},onDelete:function(){var e=this;this.action.destroy({wait:!0}).done((function(){e.stop()})).fail((function(e){var t=e.responseJSON;o().request("alert","show:apiError",t)}))},onStop:function(){this.action.trigger("editing",!1),this.action&&this.action.isNew()&&this.action.destroy(),o().request("sidebar","close")},onClickForm:function(e){o().trigger("event-router","form:patientAction",this.action.id,e.id)},onPostNewComment:function(e){var t=e.model;t.set({created_at:d().utc().format()}).save(),this.activityCollection.add(t),this.showNewCommentForm()},onCancelNewComment:function(){this.showNewCommentForm()}}),He=f.ZP.patients.shared.flowsViews,We=T.extend({onPicklistSelect:function(e){var t=e.model;"done"===t.get("status")&&this.getOption("flow")?this.shouldSelectDone(t):this.setSelectedStatus(t)},shouldSelectDone:function(e){var t=this;if(this.getOption("flow").isAllDone())this.setSelectedStatus(e);else{this.popRegion.empty();var n=o().request("modal","show:small",{bodyText:He.doneModal.bodyText,headingText:He.doneModal.headingText,submitText:He.doneModal.submitText,buttonClass:"button--green",onSubmit:function(){t.setSelectedStatus(e),n.destroy()}})}},setSelectedStatus:function(e){this.setState("selected",e),this.popRegion.empty()}}),Ye=n(2888),Ue=n.n(Ye),$e=h.View.extend({className:"sidebar__footer flex",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+s(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"flow"))&&u(l,"flowSidebarViews"))&&u(l,"timestampsView"))&&u(l,"createdAt"),t))+"</h4><div>"+s((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||c).call(r,null!=t?u(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:150},end:{line:2,column:189}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+s(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"patients"))&&u(l,"sidebar"))&&u(l,"flow"))&&u(l,"flowSidebarViews"))&&u(l,"timestampsView"))&&u(l,"updatedAt"),t))+"</h4><div>"+s((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||c).call(r,null!=t?u(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:121},end:{line:3,column:160}}}))+"</div></div>\n  "},useData:!0})}),ze=h.View.extend({childViewTriggers:{save:"save",cancel:"cancel"},className:"sidebar flex-region",template:Ue(),regions:{state:"[data-state-region]",owner:"[data-owner-region]",activity:{el:"[data-activity-region]",regionClass:y.Z},timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close","click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu:function(){var e=new(c().Collection)([{onSelect:(0,i.bind)(this.triggerMethod,this,"delete")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:f.ZP.patients.sidebar.flow.layoutView.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="sidebar__delete-icon">'+o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-alt",{name:"far",hash:{},data:i,loc:{start:{line:1,column:35},end:{line:1,column:54}}}))+"</span>"+o(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"flow"))&&s(l,"layoutView"))&&s(l,"menuOptions"))&&s(l,"delete"),t))},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()},modelEvents:{"change:_state":function(){this.showState(),this.showOwner()},"change:_owner":"showOwner"},onAttach:function(){(0,b.$)(this.el)},onRender:function(){this.showState(),this.showOwner(),this.showTimestamps()},showState:function(){var e=this,t=new We({flow:this.model,stateId:this.model.get("_state")});this.listenTo(t,"change:state",(function(t){e.model.saveState(t)})),this.showChildView("state",t)},showOwner:function(){var e=this,t=this.model.isDone(),n=new I({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),state:{isDisabled:t}});this.listenTo(n,"change:owner",(function(t){e.model.saveOwner(t)})),this.showChildView("owner",n)},showTimestamps:function(){this.showChildView("timestamps",new $e({model:this.model}))}}),Qe=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.flow.activityViews.programStarted",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:84}}}),{name:"formatHTMLMessage",hash:{program:null!=t?r(t,"program"):t,role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:128}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Xe=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.flow.activityViews.clinicianAssigned",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:87}}}),{name:"formatHTMLMessage",hash:{to_name:null!=t?r(t,"to_clinician"):t,role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:136}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Ke=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.flow.activityViews.detailsUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:84}}}),{name:"formatHTMLMessage",hash:{role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:110}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),Je=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.flow.activityViews.nameUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:81}}}),{name:"formatHTMLMessage",hash:{from_name:null!=t?r(t,"previous"):t,to_name:null!=t?r(t,"value"):t,role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:144}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),et=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.flow.activityViews.roleAssigned",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:82}}}),{name:"formatHTMLMessage",hash:{to_role:null!=t?r(t,"to_role"):t,role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:126}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),tt=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n  "+s((r(n,"formatHTMLMessage")||t&&r(t,"formatHTMLMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.sidebar.flow.activityViews.stateUpdated",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:22},end:{line:2,column:82}}}),{name:"formatHTMLMessage",hash:{to_state:null!=t?r(t,"to_state"):t,role:null!=t?r(t,"role"):t,name:null!=t?r(t,"name"):t},data:i,loc:{start:{line:2,column:2},end:{line:2,column:128}}}))+"\n  <div>"+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"date"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:7},end:{line:3,column:40}}}))+"</div>\n"},useData:!0}),nt=h.View.extend({className:"patient-flow-sidebar__activity-item",getTemplate:function(){var e=this.model.get("type"),t={FlowProgramStarted:Qe,FlowClinicianAssigned:Xe,FlowDetailsUpdated:Ke,FlowNameUpdated:Je,FlowRoleAssigned:et,FlowStateUpdated:tt};return t[e]?t[e]:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return""},useData:!0})},templateContext:function(){var e=this.model.getEditor(),t=this.model.getClinician(),n=this.model.getProgram();return{name:e.get("name"),role:e.getRole().get("name"),program:n?n.get("name"):null,to_clinician:t.get("name"),to_role:this.model.getRole().get("name"),to_state:this.model.getState().get("name")}}}),at=h.CollectionView.extend({childView:nt});function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ot=f.ZP.patients.sidebar.flow.flowSidebarApp,st=s.Z.extend({onBeforeStart:function(e){var t=e.flow;this.flow=t,this.flow.trigger("editing",!0),this.showView(new ze({model:this.flow})),this.getRegion("activity").startPreloader()},beforeStart:function(){return[o().request("entities","fetch:flowEvents:collection",this.flow.id),o().request("entities","fetch:programs:model:byFlow",this.flow.id)]},onStart:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=it(t,1),a=n[0];this.showChildView("activity",new at({collection:a,model:this.flow}))},viewEvents:{close:"stop",delete:"onDelete"},onDelete:function(){var e=this,t=o().request("modal","show:small",{bodyText:ot.deleteModal.bodyText,headingText:ot.deleteModal.headingText,submitText:ot.deleteModal.submitText,buttonClass:"button--red",onSubmit:function(){e.flow.destroy({wait:!0}).done((function(){o().trigger("event-router","patient:dashboard",e.flow.get("_patient"))})).fail((function(e){var t=e.responseJSON;o().request("alert","show:apiError",t)})),t.destroy()}})},onStop:function(){this.flow.trigger("editing",!1),o().request("sidebar","close")}}),rt=n(4320),ct=n.n(rt),ut=h.View.extend({template:ct(),templateContext:function(){return{smsEnabled:"email_text"===this.model.get("engagement").deliveryPref}}}),dt=h.View.extend({className:"sidebar flex-region",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex u-margin--b-16">\n      <div class="flex-grow">\n        <h3 class="engagement-sidebar__title">'+o(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"sidebar"))&&s(l,"engagement"))&&s(l,"engagementSidebarViews"))&&s(l,"layoutView"))&&s(l,"heading"),t))+'</h3>\n      </div>\n      <div>\n        <button class="button--icon js-close">'+o((s(n,"fas")||t&&s(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"times",{name:"fas",hash:{},data:i,loc:{start:{line:7,column:46},end:{line:7,column:61}}}))+'</button>\n      </div>\n    </div>\n    <div class="flex-grow" data-content-region></div>\n  '},useData:!0}),regions:{content:{el:"[data-content-region]",regionClass:y.Z}},triggers:{"click .js-close":"close"},onAttach:function(){(0,b.$)(this.el)}}),mt=s.Z.extend({onBeforeStart:function(){this.showView(new dt),this.getRegion("content").startPreloader()},beforeStart:function(e){var t=e.patient;return o().request("entities","fetch:patient:engagementSettings",t.id)},onStart:function(e){var t=e.patient;this.showChildView("content",new ut({model:t}))},viewEvents:{close:"stop"},onFail:function(){o().request("alert","show:error",f.ZP.patients.sidebar.engagement.engagementApp.notFound),this.stop()},onStop:function(){o().request("sidebar","close")}}),pt=(n(4676),n(1163)),ht=n.n(pt),ft=n(6947),gt=n.n(ft),wt=n(3494),vt=n.n(wt),bt=n(4935),yt=n.n(bt),_t=g.Z.ENTER_KEY,xt=h.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"sidebar"))&&o(l,"program"))&&o(l,"programsSidebarViews"))&&o(l,"disabledSaveView"))&&o(l,"saveBtn"),t))+"</button>"},useData:!0})}),kt=h.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"sidebar"))&&r(l,"program"))&&r(l,"programsSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"sidebar"))&&r(l,"program"))&&r(l,"programsSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),Ct=h.View.extend({template:gt(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown:function(e){e.which!==_t||e.preventDefault()},onWatchChange:function(e){var t=w(e);this.ui.input.val(t),this.ui.spacer.text(t||" "),this.model.set("name",t)},templateContext:function(){return{error:this.getOption("error"),isNew:this.model.isNew()}},onDomRefresh:function(){this.model.isNew()&&this.ui.input.focus()}}),Ot=h.View.extend({className:"pos--relative",template:ht(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange:function(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("details",(0,v.Z)(e))}}),Tt=h.View.extend({template:yt(),triggers:{"click .js-state-toggle":"click:toggle"},modelEvents:{"change:published":"render"}}),St=h.View.extend({className:"sidebar__footer flex",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+s(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"program"))&&u(l,"programsSidebarViews"))&&u(l,"timestampsView"))&&u(l,"createdAt"),t))+"</h4><div>"+s((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||c).call(r,null!=t?u(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:154},end:{line:2,column:193}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+s(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"program"))&&u(l,"programsSidebarViews"))&&u(l,"timestampsView"))&&u(l,"updatedAt"),t))+"</h4><div>"+s((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||c).call(r,null!=t?u(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:125},end:{line:3,column:164}}}))+"</div></div>\n  "},useData:!0})}),Dt=h.View.extend({childViewTriggers:{save:"save",cancel:"cancel",toggle:"toggle"},className:"sidebar flex-region",template:vt(),regions:{name:"[data-name-region]",details:"[data-details-region]",state:"[data-state-region]",save:"[data-save-region]",timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close"},initialize:function(e){var t=e.program;this.program=t,this.model=this.program.clone()},onAttach:function(){(0,b.$)(this.el)},onRender:function(){this.showForm(),this.showState(),this.showTimestamps()},showForm:function(){this.stopListening(this.model),this.model=this.program.clone(),this.listenTo(this.model,"change:name change:details",this.showSave),this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName:function(e){this.showChildView("name",new Ct({model:this.model,program:this.program,error:e}))},showDetails:function(){this.showChildView("details",new Ot({model:this.model,program:this.program}))},showSave:function(){if(!this.model.isValid())return this.showDisabledSave();this.showChildView("save",new kt({model:this.model}))},showState:function(){var e=this;if(!this.program.isNew()){var t=new Tt({model:this.program,program:this.program});this.listenTo(t,"click:toggle",(function(){e.program.save({published:!e.program.get("published")})})),this.showChildView("state",t)}},showTimestamps:function(){this.program.isNew()||this.showChildView("timestamps",new St({model:this.program}))},showDisabledSave:function(){this.showChildView("save",new xt)},onSave:function(){this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty()},showErrors:function(e){var t=e.name;this.showName(t),this.showDisabledSave()},onCancel:function(){this.model.isNew()?this.triggerMethod("close",this):this.showForm()}}),Pt=s.Z.extend({onBeforeStart:function(e){var t=e.program;this.program=t,this.showView(new Dt({program:this.program}))},viewEvents:{save:"onSave",close:"stop"},onSave:function(e){var t=this,n=e.model,a=this.program.isNew();this.program.save(n.pick("name","details")).then((function(){a&&o().request("sidebar","close")}),(function(e){var n=e.responseJSON,a=t.program.parseErrors(n);t.getView().showErrors(a)}))},onStop:function(){this.program&&this.program.isNew()&&this.program.destroy(),o().request("sidebar","close")}});function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(2779);var Mt,Et,jt,At,Nt=f.ZP.admin.shared.components.publishedComponent,Ft=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="'+r("function"==typeof(l=null!=(l=c(n,"className")||(null!=t?c(t,"className"):t))?l:s)?l.call(o,{name:"className",hash:{},data:i,loc:{start:{line:1,column:13},end:{line:1,column:28}}}):l)+'">'+r((c(n,"far")||t&&c(t,"far")||s).call(o,null!=t?c(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:1,column:30},end:{line:1,column:42}}}))+"</span>"},useData:!0}),It=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="'+c(Vt(l=null!=(l=u(n,"className")||(null!=t?u(t,"className"):t))?l:s)===r?l.call(o,{name:"className",hash:{},data:i,loc:{start:{line:1,column:13},end:{line:1,column:28}}}):l)+'">'+c((u(n,"far")||t&&u(t,"far")||s).call(o,null!=t?u(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:1,column:30},end:{line:1,column:42}}}))+c(Vt(l=null!=(l=u(n,"name")||(null!=t?u(t,"name"):t))?l:s)===r?l.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:52}}}):l)+"</span>"},useData:!0}),Rt=k.Z.extend({collection:new(c().Collection)([{id:"draft",icon:"edit",className:"program-action--draft",name:Nt.draftText},{id:"published",icon:"play-circle",className:"program-action--published",name:Nt.publishedText}]),isCompact:!1,initialize:function(e){var t=e.status;this.setState({selected:this.collection.get(t)})},isPublishDisabled:function(){return!1},onChangeSelected:function(e){this.triggerMethod("change:status",e.id)},popWidth:function(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},viewOptions:function(){var e=this.getOption("isCompact");return{className:e?"button-secondary--compact is-icon-only":"button-secondary w-100",template:e?Ft:It}},picklistOptions:function(){var e=this.isPublishDisabled();return{headingText:Nt.headingText,itemClassName:function(){return e&&"published"===this.model.id?"is-disabled":""},itemTemplate:It,infoText:e?Nt.flowStatusInfoText:null}}}),Gt=f.ZP.admin.shared.components.roleComponent,Lt=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((r(n,"matchText")||t&&r(t,"matchText")||o).call(l,null!=t?r(t,"name"):t,null!=t?r(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:24}}}))+' <span class="role-component__role">'+s((r(n,"matchText")||t&&r(t,"matchText")||o).call(l,null!=t?r(t,"short"):t,null!=t?r(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:1,column:60},end:{line:1,column:85}}}))+"</span>"},useData:!0}),qt=p().template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"shared"))&&o(l,"components"))&&o(l,"roleComponent"))&&o(l,"defaultText"),t))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return c((u(n,"far")||t&&u(t,"far")||r).call(s,"user-circle",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+c("function"==typeof(o=null!=(o=u(n,"name")||(null!=t?u(t,"name"):t))?o:r)?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:21},end:{line:1,column:31}}}):o)+(null!=(l=u(n,"unless").call(s,null!=t?u(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:31},end:{line:1,column:119}}}))?l:"")},useData:!0}),Bt=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||s).call(o,"user-circle",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+r("function"==typeof(l=null!=(l=c(n,"short")||(null!=t?c(t,"short"):t))?l:s)?l.call(o,{name:"short",hash:{},data:i,loc:{start:{line:1,column:21},end:{line:1,column:32}}}):l)},useData:!0}),Zt=k.Z.extend({isCompact:!1,popWidth:function(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},getClassName:function(e){return!this.getState("selected")&&e?"button-secondary--compact is-icon-only":e?"button-secondary--compact":"button-secondary w-100"},canClear:!1,picklistOptions:function(){return{canClear:this.getOption("canClear"),itemTemplate:Lt,isSelectlist:!0,headingText:Gt.headingText,placeholderText:Gt.placeholderText}},viewOptions:function(){var e=this.getOption("isCompact");return{className:this.getClassName(e),template:e?Bt:qt}},initialize:function(e){var t=e.role;this.collection=function(){if(Mt)return Mt;var e=o().request("bootstrap","currentOrg");return Mt=e.getRoles()}(),this.setState({selected:this.collection.get(t)})},onChangeSelected:function(e){this.triggerMethod("change:role",e)}}),Ht=Rt.extend({isPublishDisabled:function(){return!this.getOption("flow").getActions().some({status:"published"})},onPicklistSelect:function(e){var t=e.model;"published"===t.id&&this.isPublishDisabled()||(this.setState("selected",t),this.popRegion.empty())}}),Wt=Zt.extend({canClear:!0,initialize:function(e){var t=e.owner;this.collection=function(){if(Et)return Et;var e=o().request("bootstrap","currentOrg");return Et=e.getRoles()}(),this.setState({selected:t})},onChangeSelected:function(e){this.triggerMethod("change:owner",e)}}),Yt=n(204),Ut=n.n(Yt),$t=n(4792),zt=n.n($t),Qt=n(2633),Xt=n.n(Qt),Kt=g.Z.ENTER_KEY,Jt=h.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"sidebar"))&&o(l,"flow"))&&o(l,"flowSidebarViews"))&&o(l,"disabledSaveView"))&&o(l,"saveBtn"),t))+"</button>"},useData:!0})}),en=h.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"sidebar"))&&r(l,"flow"))&&r(l,"flowSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"sidebar"))&&r(l,"flow"))&&r(l,"flowSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),tn=h.View.extend({className:"pos--relative",template:zt(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown:function(e){e.which!==Kt||e.preventDefault()},onWatchChange:function(e){var t=w(e);this.ui.input.val(t),this.ui.spacer.text(t||" "),this.model.set("name",t)},templateContext:function(){return{isNew:this.model.isNew()}},onDomRefresh:function(){this.model.isNew()&&this.ui.input.focus()}}),nn=h.View.extend({className:"pos--relative",template:Xt(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange:function(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("details",(0,v.Z)(e))}}),an=h.View.extend({className:function(){return this.model.isNew()?"button-secondary w-100 is-disabled":"button-secondary w-100"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="action--'+s(o(null!=(l=null!=t?r(t,"stateOptions"):t)?r(l,"color"):l,t))+'">'+s((r(n,"fa")||t&&r(t,"fa")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=t?r(t,"stateOptions"):t)?r(l,"iconType"):l,null!=(l=null!=t?r(t,"stateOptions"):t)?r(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:47},end:{line:1,column:93}}}))+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"sidebar"))&&r(l,"flow"))&&r(l,"flowSidebarViews"))&&r(l,"stateView"))&&r(l,"label"),t))+"</span>"},useData:!0}),templateContext:function(){return{stateOptions:o().request("bootstrap","currentOrg").getStates().at(0).get("options")}},onRender:function(){this.model.isNew()||new ye.Z({message:f.ZP.admin.sidebar.flow.flowSidebarViews.stateView.tooltip,uiView:this,ui:this.$el})}}),ln=h.View.extend({className:"sidebar__footer flex",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+s(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"flow"))&&u(l,"flowSidebarViews"))&&u(l,"timestampsView"))&&u(l,"createdAt"),t))+"</h4><div>"+s((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||c).call(r,null!=t?u(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:147},end:{line:2,column:186}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+s(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"flow"))&&u(l,"flowSidebarViews"))&&u(l,"timestampsView"))&&u(l,"updatedAt"),t))+"</h4><div>"+s((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||c).call(r,null!=t?u(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:118},end:{line:3,column:157}}}))+"</div></div>\n  "},useData:!0})}),on=h.View.extend({childViewTriggers:{save:"save",cancel:"cancel"},className:"sidebar flex-region",template:Ut(),regions:{name:"[data-name-region]",details:"[data-details-region]",published:"[data-published-region]",state:"[data-state-region]",owner:"[data-owner-region]",save:"[data-save-region]",timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close","click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu:function(){var e=new(c().Collection)([{onSelect:(0,i.bind)(this.triggerMethod,this,"delete")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:f.ZP.admin.sidebar.flow.layoutView.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="sidebar__delete-icon">'+o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-alt",{name:"far",hash:{},data:i,loc:{start:{line:1,column:35},end:{line:1,column:54}}}))+"</span>"+o(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"admin"))&&s(l,"sidebar"))&&s(l,"flow"))&&s(l,"layoutView"))&&s(l,"menuOptions"))&&s(l,"delete"),t))},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()},templateContext:function(){return{isNew:this.model.isNew()}},initialize:function(e){var t=e.flow;this.flow=t,this.model=this.flow.clone(),this.listenTo(this.flow,{"change:status":this.onChangeFlowStatus,"change:_owner":this.onChangeOwner})},onChangeFlowStatus:function(){this.showPublished()},onChangeOwner:function(){this.showOwner()},onAttach:function(){(0,b.$)(this.el)},onRender:function(){this.showFlow(),this.showTimestamps()},showFlow:function(){this.showForm(),this.showPublished(),this.showState(),this.showOwner()},showForm:function(){this.stopListening(this.model),this.model=this.flow.clone(),this.listenTo(this.model,"change:name change:details",this.showSave),this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName:function(){this.showChildView("name",new tn({model:this.model,flow:this.flow}))},showDetails:function(){this.showChildView("details",new nn({model:this.model,flow:this.flow}))},showPublished:function(){var e=this,t=this.flow.isNew(),n=new Ht({flow:this.flow,status:this.flow.get("status"),state:{isDisabled:t}});this.listenTo(n,"change:status",(function(t){e.flow.save({status:t})})),this.showChildView("published",n)},showState:function(){this.showChildView("state",new an({model:this.flow}))},showOwner:function(){var e=this,t=this.flow.isNew(),n=new Wt({owner:this.flow.getOwner(),state:{isDisabled:t}});this.listenTo(n,"change:owner",(function(t){e.flow.saveOwner(t)})),this.showChildView("owner",n)},showTimestamps:function(){this.flow.isNew()||this.showChildView("timestamps",new ln({model:this.flow}))},showSave:function(){if(!this.model.isValid())return this.showDisabledSave();this.showChildView("save",new en({model:this.model}))},showDisabledSave:function(){this.showChildView("save",new Jt)},onSave:function(){this.getRegion("save").empty()},onCancel:function(){this.model.isNew()?this.triggerMethod("close",this):this.showForm()}}),sn=f.ZP.admin.sidebar.flow.flowSidebarApp,rn=s.Z.extend({onBeforeStart:function(e){var t=e.flow;this.flow=t,this.flow.trigger("editing",!0),this.showView(new on({flow:this.flow}))},viewEvents:{save:"onSave",close:"stop",delete:"onDelete"},onSave:function(e){var t=this,n=e.model;n.isNew()?this.flow.saveAll(n.attributes).done((function(){o().trigger("event-router","programFlow",t.flow.id)})):this.flow.save(n.pick("name","details"))},onDelete:function(){var e=this,t=o().request("modal","show:small",{bodyText:sn.deleteModal.bodyText,headingText:sn.deleteModal.headingText,submitText:sn.deleteModal.submitText,buttonClass:"button--red",onSubmit:function(){e.flow.destroy({wait:!0}).done((function(){o().trigger("event-router","program:details",e.flow.get("_program"))})).fail((function(e){var t=e.responseJSON;o().request("alert","show:apiError",t)})),t.destroy()}})},onStop:function(){this.flow&&this.flow.isNew()&&this.flow.destroy(),this.flow.trigger("editing",!1),o().request("sidebar","close")}}),cn=f.ZP.admin.shared.components.formComponent,un=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((r(n,"far")||t&&r(t,"far")||o).call(l,"poll-h",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))+" "+s((r(n,"matchText")||t&&r(t,"matchText")||o).call(l,null!=t?r(t,"text"):t,null!=t?r(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:41}}}))},useData:!0}),dn=p().template({1:function(e,t,n,a,i){return"disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <button class="js-button button-secondary button__group flex-grow" '+(null!=(l=u(n,"if").call(s,null!=t?u(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:69},end:{line:2,column:102}}}))?l:"")+">\n    "+c((u(n,"far")||t&&u(t,"far")||r).call(s,"poll-h",{name:"far",hash:{},data:i,loc:{start:{line:3,column:4},end:{line:3,column:20}}}))+c("function"==typeof(o=null!=(o=u(n,"name")||(null!=t?u(t,"name"):t))?o:r)?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:3,column:20},end:{line:3,column:30}}}):o)+'\n  </button><button class="js-click-form button button__group form-component__form-button" '+(null!=(l=u(n,"if").call(s,null!=t?u(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:90},end:{line:4,column:123}}}))?l:"")+">"+c((u(n,"far")||t&&u(t,"far")||r).call(s,"expand-alt",{name:"far",hash:{},data:i,loc:{start:{line:4,column:124},end:{line:4,column:144}}}))+"</button>\n"},useData:!0}),mn=p().template({1:function(e,t,n,a,i){return"disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <button class="js-button button-secondary w-100" '+(null!=(l=r(n,"if").call(o,null!=t?r(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:51},end:{line:2,column:84}}}))?l:"")+">\n    "+s((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(o,"poll-h",{name:"far",hash:{},data:i,loc:{start:{line:3,column:4},end:{line:3,column:20}}}))+s(e.lambda((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"shared"))&&r(l,"components"))&&r(l,"formComponent"))&&r(l,"defaultText"),t))+"\n  </button>\n"},useData:!0}),pn=k.Z.extend({viewOptions:function(){return{className:"flex",template:this.getState("selected")?dn:mn,templateContext:function(){return{isDisabled:this.getOption("state").isDisabled}},tagName:"div",triggers:{"click .js-button":"click","focus .js-button":"focus","click .js-click-form":"click:form"}}},viewEvents:{click:"onClick","click:form":"onViewClickForm"},onViewClickForm:function(){this.triggerMethod("click:form",this.getState("selected"))},picklistOptions:{canClear:!0,headingText:cn.headingText,placeholderText:cn.placeholderText,noResultsText:cn.noResultsText,isSelectlist:!0,itemTemplate:un,attr:"name"},initialize:function(e){var t=e.form;this.collection=function(){if(jt)return jt;var e=o().request("bootstrap","currentOrg");return jt=e.getForms()}(),this.setState({selected:t})},popWidth:function(){return this.getView().$el.outerWidth()},onChangeSelected:function(e){this.triggerMethod("change:form",e)}}),hn=f.ZP.admin.shared.components.dueDayComponent,fn=(0,i.map)((0,i.range)(366),(function(e){return{id:e}})),gn=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+o(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"admin"))&&s(l,"shared"))&&s(l,"components"))&&s(l,"dueDayComponent"))&&s(l,"sameDay"),t))},useData:!0}),wn=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))},useData:!0}),vn=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+o(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"admin"))&&s(l,"shared"))&&s(l,"components"))&&s(l,"dueDayComponent"))&&s(l,"defaultText"),t))},useData:!0}),bn=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((r(n,"far")||t&&r(t,"far")||o).call(l,"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+s((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"admin.shared.components.dueDayComponent.days",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:36},end:{line:1,column:92}}}),{name:"formatMessage",hash:{day:null!=t?r(t,"id"):t},data:i,loc:{start:{line:1,column:19},end:{line:1,column:101}}}))},useData:!0}),yn=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"formatMessage")||t&&s(t,"formatMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"admin.shared.components.dueDayComponent.days",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:73}}}),{name:"formatMessage",hash:{day:null!=t?s(t,"id"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:82}}}))},useData:!0}),_n=k.Z.extend({collection:new(c().Collection)(fn),isCompact:!1,getClassName:function(e,t){return null===e&&t?"button-secondary--compact is-icon-only":t?"button-secondary--compact":"button-secondary w-100"},getTemplate:function(e,t){return 0===e?gn:!e&&t?wn:e?bn:vn},viewOptions:function(){var e=this.getOption("isCompact"),t=this.getState("selected"),n=t?t.id:null;return{className:this.getClassName(n,e),template:this.getTemplate(n,e)}},picklistOptions:{canClear:!0,headingText:hn.headingText,placeholderText:hn.placeholderText,isSelectlist:!0,itemTemplate:yn},initialize:function(e){var t=e.day,n=this.collection.get(t);this.setState({selected:n})},popWidth:function(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},onChangeSelected:function(e){var t=e?e.id:null;this.triggerMethod("change:day",t)}}),xn=Zt.extend({canClear:!0,initialize:function(e){var t=e.owner;this.collection=function(){if(At)return At;var e=o().request("bootstrap","currentOrg");return At=e.getRoles()}(),this.setState({selected:t})},onChangeSelected:function(e){this.triggerMethod("change:owner",e)}}),kn=n(8408),Cn=n.n(kn),On=n(3676),Tn=n.n(On),Sn=n(4722),Dn=n.n(Sn),Pn=g.Z.ENTER_KEY,Vn=h.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"actionSidebarViews"))&&o(l,"disabledSaveView"))&&o(l,"saveBtn"),t))+"</button>"},useData:!0})}),Mn=h.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),En=h.View.extend({className:"pos--relative",template:Tn(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchKeydown:function(e){e.which!==Pn||e.preventDefault()},onWatchChange:function(e){var t=w(e);this.ui.input.val(t),this.ui.spacer.text(t||" "),this.model.set("name",t)},templateContext:function(){return{isNew:this.model.isNew()}},onDomRefresh:function(){this.model.isNew()&&this.ui.input.focus()}}),jn=h.View.extend({className:"pos--relative",template:Dn(),behaviors:[_.Z],ui:{input:".js-input",spacer:".js-spacer"},onWatchChange:function(e){this.ui.input.val(e),this.ui.spacer.text(e||" "),this.model.set("details",(0,v.Z)(e))}}),An=h.View.extend({className:function(){return this.model.isNew()?"button-secondary w-100 is-disabled":"button-secondary w-100"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="action--'+s(o(null!=(l=null!=t?r(t,"stateOptions"):t)?r(l,"color"):l,t))+'">'+s((r(n,"fa")||t&&r(t,"fa")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(l=null!=t?r(t,"stateOptions"):t)?r(l,"iconType"):l,null!=(l=null!=t?r(t,"stateOptions"):t)?r(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:47},end:{line:1,column:93}}}))+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"sidebar"))&&r(l,"action"))&&r(l,"actionSidebarViews"))&&r(l,"stateView"))&&r(l,"label"),t))+"</span>"},useData:!0}),templateContext:function(){return{stateOptions:o().request("bootstrap","currentOrg").getStates().at(0).get("options")}},onRender:function(){this.model.isNew()||new ye.Z({message:f.ZP.admin.sidebar.action.actionSidebarViews.stateView.tooltip,uiView:this,ui:this.$el})}}),Nn=h.View.extend({className:"sidebar__footer flex",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="sidebar__footer-left"><h4 class="sidebar__label">'+s(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarViews"))&&u(l,"timestampsView"))&&u(l,"createdAt"),t))+"</h4><div>"+s((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||c).call(r,null!=t?u(t,"created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:2,column:151},end:{line:2,column:190}}}))+'</div></div>\n    <div><h4 class="sidebar__label">'+s(o((l=(l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarViews"))&&u(l,"timestampsView"))&&u(l,"updatedAt"),t))+"</h4><div>"+s((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||c).call(r,null!=t?u(t,"updated_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:122},end:{line:3,column:161}}}))+"</div></div>\n  "},useData:!0})}),Fn=h.View.extend({childViewTriggers:{save:"save",cancel:"cancel"},className:"sidebar flex-region",template:Cn(),regions:{name:"[data-name-region]",details:"[data-details-region]",published:"[data-published-region]",state:"[data-state-region]",owner:"[data-owner-region]",due:"[data-due-region]",form:"[data-form-region]",save:"[data-save-region]",timestamps:"[data-timestamps-region]"},triggers:{"click .js-close":"close","click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu:function(){var e=new(c().Collection)([{onSelect:(0,i.bind)(this.triggerMethod,this,"delete")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:f.ZP.admin.sidebar.action.layoutView.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="sidebar__delete-icon">'+o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-alt",{name:"far",hash:{},data:i,loc:{start:{line:1,column:35},end:{line:1,column:54}}}))+"</span>"+o(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"admin"))&&s(l,"sidebar"))&&s(l,"action"))&&s(l,"layoutView"))&&s(l,"menuOptions"))&&s(l,"delete"),t))},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()},templateContext:function(){return{isNew:this.model.isNew()}},initialize:function(e){var t=e.action;this.action=t,this.model=this.action.clone(),this.listenTo(this.action,{"change:status":this.onChangeActionStatus,"change:_owner":this.onChangeOwner,"change:days_until_due":this.onChangeDueDay})},onChangeActionStatus:function(){this.showPublished()},onChangeOwner:function(){this.showOwner()},onChangeDueDay:function(){this.showDueDay()},onAttach:function(){(0,b.$)(this.el)},onRender:function(){this.showAction(),this.showTimestamps()},showAction:function(){this.showEditForm(),this.showPublished(),this.showState(),this.showOwner(),this.showDueDay(),this.showForm()},showEditForm:function(){this.stopListening(this.model),this.model=this.action.clone(),this.listenTo(this.model,"change:name change:details",this.showSave),this.model.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showDetails()},showName:function(){this.showChildView("name",new En({model:this.model,action:this.action}))},showDetails:function(){this.showChildView("details",new jn({model:this.model,action:this.action}))},showPublished:function(){var e=this,t=this.action.isNew(),n=new Rt({status:this.action.get("status"),state:{isDisabled:t}});this.listenTo(n,"change:status",(function(t){e.action.save({status:t})})),this.showChildView("published",n)},showState:function(){this.showChildView("state",new An({model:this.action}))},showOwner:function(){var e=this,t=this.action.isNew(),n=new xn({owner:this.action.getOwner(),state:{isDisabled:t}});this.listenTo(n,"change:owner",(function(t){e.action.saveOwner(t)})),this.showChildView("owner",n)},showDueDay:function(){var e=this,t=this.action.isNew(),n=new _n({day:this.action.get("days_until_due"),state:{isDisabled:t}});this.listenTo(n,"change:day",(function(t){e.action.save({days_until_due:t})})),this.showChildView("due",n)},showForm:function(){var e=this.action.isNew(),t=new pn({form:this.action.getForm(),state:{isDisabled:e}});this.listenTo(t,{"change:form":function(e){this.action.saveForm(e)},"click:form":function(e){this.triggerMethod("click:form",e)}}),this.showChildView("form",t)},showTimestamps:function(){this.action.isNew()||this.showChildView("timestamps",new Nn({model:this.action}))},showSave:function(){if(!this.model.isValid())return this.showDisabledSave();this.showChildView("save",new Mn({model:this.model}))},showDisabledSave:function(){this.showChildView("save",new Vn)},onSave:function(){this.getRegion("save").empty()},onCancel:function(){this.model.isNew()?this.triggerMethod("close",this):this.showEditForm()}}),In=s.Z.extend({onBeforeStart:function(e){var t=e.action;this.action=t,this.showView(new Fn({action:this.action}))},viewEvents:{save:"onSave",close:"stop",delete:"onDelete","click:form":"onClickForm"},onSave:function(e){var t=this,n=e.model;n.isNew()?this.action.saveAll(n.attributes).done((function(){var e=t.action.get("_program_flow");e?o().trigger("event-router","programFlow:action",e,t.action.id):o().trigger("event-router","program:action",t.action.get("_program"),t.action.id)})):this.action.save(n.pick("name","details"))},onDelete:function(){var e=this;this.action.destroy({wait:!0}).done((function(){e.stop()})).fail((function(e){var t=e.responseJSON;o().request("alert","show:apiError",t)}))},onStop:function(){this.action.trigger("editing",!1),this.action&&this.action.isNew()&&this.action.destroy(),o().request("sidebar","close")},onClickForm:function(e){o().trigger("event-router","form:preview",e.id)}});function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Gn=f.ZP.admin.shared.components.accessComponent,Ln=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||s).call(o,"shield",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))+" "+r("function"==typeof(l=null!=(l=c(n,"name")||(null!=t?c(t,"name"):t))?l:s)?l.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:27}}}):l)},useData:!0}),qn=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div>"+c(Rn(l=null!=(l=u(n,"name")||(null!=t?u(t,"name"):t))?l:s)===r?l.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:5},end:{line:1,column:15}}}):l)+'</div><div class="access-component__details">'+c(Rn(l=null!=(l=u(n,"details")||(null!=t?u(t,"details"):t))?l:s)===r?l.call(o,{name:"details",hash:{},data:i,loc:{start:{line:1,column:60},end:{line:1,column:73}}}):l)+"</div>"},useData:!0}),Bn=k.Z.extend({collection:new(c().Collection)([{id:"employee",name:"Employee",details:"can access Workspace but not Admin"},{id:"manager",name:"Manager",details:"can access Workspace and Admin"}]),isCompact:!1,popWidth:function(){return this.getOption("isCompact")?null:this.getView().$el.outerWidth()},picklistOptions:{headingText:Gn.headingText,itemTemplate:qn},viewOptions:function(){return{className:this.getOption("isCompact")?"button-secondary":"button-secondary w-100",template:Ln}},initialize:function(e){var t=e.access;this.setState({selected:this.collection.get(t)})},onChangeSelected:function(e){this.triggerMethod("change:access",e.id)}});function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wn=h.View.extend({tagName:"li",className:"groups-manager__item",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="groups-manager__item-icon">'+r((c(n,"far")||t&&c(t,"far")||s).call(o,"users",{name:"far",hash:{},data:i,loc:{start:{line:1,column:40},end:{line:1,column:55}}}))+"</span>"+r("function"==typeof(l=null!=(l=c(n,"name")||(null!=t?c(t,"name"):t))?l:s)?l.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:62},end:{line:1,column:70}}}):l)+'<button class="button--icon groups-manager__remove js-remove">'+r((c(n,"far")||t&&c(t,"far")||s).call(o,"trash-alt",{name:"far",hash:{},data:i,loc:{start:{line:1,column:132},end:{line:1,column:151}}}))+"</button>"},useData:!0}),triggers:{"click .js-remove":"remove"}}),Yn=h.CollectionView.extend({tagName:"ul",childView:Wn,childViewTriggers:{remove:"remove"},onRemove:function(e){this.triggerMethod("remove:member",e.model)}}),Un=k.Z.extend({initialize:function(){this.listenTo(this.collection,"update",this.show)},viewOptions:{className:"button-secondary groups-manager__droplist",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"users",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+o(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"components"))&&s(l,"groupsManager"))&&s(l,"groupsDroplist"))&&s(l,"addGroup"),t))},useData:!0})},picklistOptions:{attr:"name"},onShow:function(){var e=this.getOption("isDisabled");this.setState({isDisabled:e||0===this.collection.length})},onPicklistSelect:function(e){var t=e.model;this.triggerMethod("add:member",t),this.popRegion.empty()}}),$n=h.View.extend({className:"groups-manager__wrapper",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return"\n    <div data-groups-region></div>\n    <div data-droplist-region></div>\n  "},useData:!0}),regions:{groups:"[data-groups-region]",droplist:"[data-droplist-region]"},initialize:function(e){var t=e.member;this.currentClinician=o().request("bootstrap","currentUser"),this.member=t,this.memberGroups=this.member.getGroups(),this.groups=this.currentClinician.getGroups(),this.groups.remove(this.memberGroups.models)},onRender:function(){this.showGroups(),this.showDroplist()},showGroups:function(){var e=this.showChildView("groups",new Yn({collection:this.memberGroups}));this.listenTo(e,"remove:member",this.removeMemberGroup)},showDroplist:function(){var e=this.showChildView("droplist",new Un(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({collection:this.groups},this.getOption("droplistOptions"))));this.listenTo(e,"add:member",this.addMemberGroup)},addMemberGroup:function(e){this.memberGroups.add(e),this.groups.remove(e),this.triggerMethod("add:member",this.member,e)},removeMemberGroup:function(e){this.memberGroups.remove(e),this.groups.add(e),this.triggerMethod("remove:member",this.member,e)}}),zn=f.ZP.admin.shared.cliniciansComponents,Qn=$n.extend({removeMemberGroup:function(e){var t=this,n=o().request("modal","show:small",{bodyText:(0,f.SM)(p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"formatMessage")||t&&s(t,"formatMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"admin.shared.cliniciansComponents.groupsComponent.removeModal.bodyText",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:98}}}),{name:"formatMessage",hash:{role:null!=t?s(t,"role"):t,group:null!=t?s(t,"group"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:122}}}))},useData:!0}),{group:e.get("name"),role:this.member.getRole().get("name")}),headingText:zn.groupsComponent.removeModal.headingText,submitText:zn.groupsComponent.removeModal.submitText,buttonClass:"button--red",onSubmit:function(){n.destroy(),t.memberGroups.remove(e),t.groups.add(e),t.triggerMethod("remove:member",t.member,e)}})}}),Xn=h.View.extend({className:function(){return this.model.isActive()?"clinician-state--active":"clinician-state--pending"},getTemplate:function(){return this.model.isActive()?p().template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="clinician-state__label">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"shared"))&&o(l,"cliniciansComponents"))&&o(l,"stateComponent"))&&o(l,"active"),t))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"fas")||t&&s(t,"fas")||e.hooks.helperMissing).call(o,"check-circle",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))+(null!=(l=s(n,"unless").call(o,null!=t?s(t,"isCompact"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:22},end:{line:1,column:165}}}))?l:"")},useData:!0}):p().template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="clinician-state__label">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"shared"))&&o(l,"cliniciansComponents"))&&o(l,"stateComponent"))&&o(l,"pending"),t))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"fas")||t&&s(t,"fas")||e.hooks.helperMissing).call(o,"adjust",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))+(null!=(l=s(n,"unless").call(o,null!=t?s(t,"isCompact"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:16},end:{line:1,column:160}}}))?l:"")},useData:!0})},templateContext:function(){return{isCompact:this.getOption("isCompact")}}}),Kn=n(2056),Jn=n.n(Kn);function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ta=f.ZP.admin.sidebar.clinician.clinicianSidebarViews,na=h.View.extend({className:"pos--relative",template:p().template({1:function(e,t,n,a,i){return" has-error"},3:function(e,t,n,a,i){return"disabled"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="clinician-sidebar__locked-icon">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"lock",{name:"far",hash:{},data:i,loc:{start:{line:3,column:68},end:{line:3,column:82}}}))+"</span>"},7:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form-error u-margin--b-4">'+e.escapeExpression("function"==typeof(l=null!=(l=o(n,"error")||(null!=t?o(t,"error"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"error",hash:{},data:i,loc:{start:{line:4,column:55},end:{line:4,column:66}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.escapeExpression,c=e.hooks.helperMissing,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <input class="input-primary w-100 js-input'+(null!=(l=d(n,"if").call(s,null!=t?d(t,"error"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:46},end:{line:2,column:76}}}))?l:"")+'" placeholder="'+r(e.lambda((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"admin"))&&d(l,"sidebar"))&&d(l,"clinician"))&&d(l,"clinicianSidebarViews"))&&d(l,"nameView"))&&d(l,"placeholder"),t))+'" value="'+r(ea(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:c)===u?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:2,column:178},end:{line:2,column:188}}}):o)+'" '+(null!=(l=d(n,"unless").call(s,null!=t?d(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:190},end:{line:2,column:228}}}))?l:"")+" />"+r(ea(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:c)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:231},end:{line:2,column:256}}}):o)+(null!=(l=d(n,"unless").call(s,null!=t?d(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:4},end:{line:3,column:100}}}))?l:"")+"\n    "+(null!=(l=d(n,"if").call(s,null!=t?d(t,"error"):t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:4},end:{line:4,column:79}}}))?l:"")+"\n  "},useData:!0}),templateContext:function(){return{canEdit:this.model.isEditable(),error:this.getOption("error")}},ui:{input:".js-input"},events:{"input @ui.input":"onInput"},onInput:function(e){this.model.set("name",e.target.value)},onDomRefresh:function(){this.model.isNew()&&this.ui.input.focus()}}),aa=h.View.extend({className:"pos--relative",template:p().template({1:function(e,t,n,a,i){return" has-error"},3:function(e,t,n,a,i){return"disabled"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="clinician-sidebar__locked-icon">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"lock",{name:"far",hash:{},data:i,loc:{start:{line:3,column:68},end:{line:3,column:82}}}))+"</span>"},7:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form-error u-margin--b-4">'+e.escapeExpression("function"==typeof(l=null!=(l=o(n,"error")||(null!=t?o(t,"error"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"error",hash:{},data:i,loc:{start:{line:4,column:55},end:{line:4,column:66}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.escapeExpression,c=e.hooks.helperMissing,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <input class="input-primary w-100 js-input'+(null!=(l=d(n,"if").call(s,null!=t?d(t,"error"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:46},end:{line:2,column:76}}}))?l:"")+'" placeholder="'+r(e.lambda((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"admin"))&&d(l,"sidebar"))&&d(l,"clinician"))&&d(l,"clinicianSidebarViews"))&&d(l,"emailView"))&&d(l,"placeholder"),t))+'" value="'+r(ea(o=null!=(o=d(n,"email")||(null!=t?d(t,"email"):t))?o:c)===u?o.call(s,{name:"email",hash:{},data:i,loc:{start:{line:2,column:179},end:{line:2,column:190}}}):o)+'" '+(null!=(l=d(n,"unless").call(s,null!=t?d(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:192},end:{line:2,column:230}}}))?l:"")+" />"+r(ea(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:c)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:233},end:{line:2,column:258}}}):o)+(null!=(l=d(n,"unless").call(s,null!=t?d(t,"canEdit"):t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:4},end:{line:3,column:100}}}))?l:"")+"\n    "+(null!=(l=d(n,"if").call(s,null!=t?d(t,"error"):t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:4},end:{line:4,column:79}}}))?l:"")+"\n  "},useData:!0}),templateContext:function(){return{canEdit:this.model.isEditable(),error:this.getOption("error")}},ui:{input:".js-input"},events:{"input @ui.input":"onInput"},onInput:function(e){this.model.set("email",e.target.value)}}),ia=h.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"sidebar"))&&r(l,"clinician"))&&r(l,"clinicianSidebarViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"sidebar"))&&r(l,"clinician"))&&r(l,"clinicianSidebarViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"save"}}),la=h.View.extend({className:"u-margin--t-8 sidebar__save",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--green" disabled>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"sidebar"))&&o(l,"clinician"))&&o(l,"clinicianSidebarViews"))&&o(l,"disabledSaveView"))&&o(l,"saveBtn"),t))+"</button>"},useData:!0})}),oa=h.View.extend({className:"sidebar__info",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    "+o((s(n,"fas")||t&&s(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"info-circle",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:4},end:{line:2,column:25}}}))+o(e.lambda((l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"admin"))&&s(l,"sidebar"))&&s(l,"clinician"))&&s(l,"clinicianSidebarViews"))&&s(l,"infoView"))&&s(l,"groupsRoleInfo"),t))+"\n  "},useData:!0})}),sa=h.View.extend({className:"sidebar flex-region",template:Jn(),templateContext:function(){return{showDelete:this.clinician.isEditable()}},triggers:{"click .js-close":"close","click @ui.menu":"click:menu"},ui:{menu:".js-menu"},childViewTriggers:{save:"save",cancel:"cancel"},regions:{name:"[data-name-region]",email:"[data-email-region]",save:"[data-save-region]",role:"[data-role-region]",groups:"[data-groups-region]",info:"[data-info-region]",access:"[data-access-region]",state:"[data-state-region]"},initialize:function(e){var t=e.clinician;this.clinician=t,this.listenTo(this.clinician,{"change:_role":this.showInfo,"change:_groups":this.showInfo})},onAttach:function(){(0,b.$)(this.el)},onRender:function(){this.showForm(),this.showState(),this.showAccess(),this.showRole(),this.showGroups(),this.showInfo()},onClickMenu:function(){var e=new(c().Collection)([{onSelect:(0,i.bind)(this.triggerMethod,this,"confirm:delete")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:ta.sidebarView.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="sidebar__delete-icon">'+o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"trash-alt",{name:"far",hash:{},data:i,loc:{start:{line:1,column:35},end:{line:1,column:54}}}))+"</span>"+o(e.lambda((l=(l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"admin"))&&s(l,"sidebar"))&&s(l,"clinician"))&&s(l,"clinicianSidebarViews"))&&s(l,"sidebarView"))&&s(l,"menuOptions"))&&s(l,"delete"),t))},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()},cloneClinician:function(){this.clonedClinician&&this.stopListening(this.clonedClinician),this.clonedClinician=this.clinician.clone()},showName:function(e){this.showChildView("name",new na({model:this.clonedClinician,error:e}))},showEmail:function(e){this.showChildView("email",new aa({model:this.clonedClinician,error:e}))},showState:function(){this.showChildView("state",new Xn({model:this.clinician}))},showAccess:function(){var e=this,t=this.clinician.isNew(),n=new Bn({access:this.clinician.get("access"),state:{isDisabled:t}});this.listenTo(n,"change:access",(function(t){e.clinician.save({access:t})})),this.showChildView("access",n)},showRole:function(){var e=this,t=this.clinician.isNew(),n=new Zt({role:this.clinician.get("_role"),state:{isDisabled:t}});this.listenTo(n,"change:role",(function(t){e.clinician.saveRole(t)})),this.showChildView("role",n)},showGroups:function(){var e=this.showChildView("groups",new Qn({member:this.clinician,droplistOptions:{isDisabled:this.clinician.isNew()}}));this.listenTo(e,{"add:member":function(e,t){t.addClinician(this.clinician)},"remove:member":function(e,t){t.removeClinician(this.clinician)}})},showSave:function(){this.clonedClinician.isValid()?this.showChildView("save",new ia({model:this.clonedClinician})):this.showDisabledSave()},showDisabledSave:function(){this.showChildView("save",new la)},showForm:function(){this.cloneClinician(),this.listenTo(this.clonedClinician,"change:name change:email",this.showSave),this.clinician.isNew()?this.showDisabledSave():this.getRegion("save").empty(),this.showName(),this.showEmail()},showInfo:function(){this.clinician.isNew()||(this.clinician.get("_role")&&0!==this.clinician.getGroups().length?this.getRegion("info").empty():this.showChildView("info",new oa))},showErrors:function(e){var t=e.name,n=e.email;this.showName(t),this.showEmail(n),this.showDisabledSave()},onSave:function(){this.clinician.isNew()?this.showDisabledSave():this.getRegion("save").empty()},onCancel:function(){this.clinician.isNew()?this.triggerMethod("close",this):this.showForm()},onConfirmDelete:function(){var e=this,t=o().request("modal","show:small",{bodyText:ta.sidebarView.deleteModal.bodyText,headingText:ta.sidebarView.deleteModal.headingText,submitText:ta.sidebarView.deleteModal.submitText,buttonClass:"button--red",onSubmit:function(){t.destroy(),e.triggerMethod("delete",e.clinician)}})}}),ra=s.Z.extend({onBeforeStart:function(e){var t=e.clinician;this.clinician=t,this.showView(new sa({clinician:t}))},viewEvents:{save:"onSave",close:"stop",delete:"onDelete"},onSave:function(e){var t=this,n=e.model;this.clinician.save(n.attributes).then((function(){o().trigger("event-router","clinician",t.clinician.id)}),(function(e){var n=e.responseJSON,a=t.clinician.parseErrors(n);t.getView().showErrors(a)}))},onDelete:function(){this.clinician.destroy(),this.stop()},onStop:function(){this.clinician.trigger("editing",!1),this.clinician.isNew()&&this.clinician.destroy(),o().request("sidebar","close"),o().trigger("event-router","clinicians:all")}}),ca=s.Z.extend({channelName:"sidebar",radioRequests:{close:"closeSidebar",start:"startSidebarApp"},childApps:{action:Ze,flow:st,engagement:mt,program:Pt,programFlow:rn,programAction:In,clinician:ra},startSidebarApp:function(e,t){if(!this.isStarting){this.isStarting=!0,this.stopSidebarApp();var n=(0,i.extend)({region:this.getRegion()},t);return this.currentApp=this.startChildApp(e,n),this.isStarting=!1,this.getChannel().trigger("show",this.currentApp),this.currentApp}},closeSidebar:function(){var e=this.currentApp;this.stopSidebarApp(),this.getRegion().empty(),this.getChannel().trigger("close",e)},stopSidebarApp:function(){this.currentApp&&(this.currentApp.stop(),delete this.currentApp)}});function ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function da(e){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(4400);var ma=k.Z.extend({popWidth:"248px",viewOptions:{tagName:"div",className:"app-nav__header",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n      <div>\n        <h2 class="app-nav__header-title u-text--overflow">'+c(da(l=null!=(l=u(n,"orgName")||(null!=t?u(t,"orgName"):t))?l:s)===r?l.call(o,{name:"orgName",hash:{},data:i,loc:{start:{line:3,column:59},end:{line:3,column:72}}}):l)+'</h2>\n        <span class="app-nav__header-arrow">'+c((u(n,"far")||t&&u(t,"far")||s).call(o,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:4,column:44},end:{line:4,column:64}}}))+'</span>\n      </div>\n      <div class="u-text--overflow">'+c(da(l=null!=(l=u(n,"userName")||(null!=t?u(t,"userName"):t))?l:s)===r?l.call(o,{name:"userName",hash:{},data:i,loc:{start:{line:6,column:36},end:{line:6,column:50}}}):l)+"</div>\n    "},useData:!0}),templateContext:function(){var e=o().request("bootstrap","currentUser"),t=o().request("bootstrap","currentOrg");return{userName:e.get("name"),orgName:t.get("name")}}},picklistOptions:function(){return{className:"picklist app-nav__picklist",headingText:o().request("bootstrap","currentOrg").get("name"),lists:[{collection:this.collection,itemTemplate:p().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+e.escapeExpression((l(n,"fa")||t&&l(t,"fa")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"far","external-link",{name:"fa",hash:{},data:i,loc:{start:{line:5,column:12},end:{line:5,column:40}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n          "+r((c(n,"fa")||t&&c(t,"fa")||s).call(o,null!=t?c(t,"iconType"):t,null!=t?c(t,"icon"):t,{name:"fa",hash:{},data:i,loc:{start:{line:2,column:10},end:{line:2,column:30}}}))+"\n          "+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||s).call(o,null!=t?c(t,"text"):t,{name:"formatMessage",hash:{},data:i,loc:{start:{line:3,column:10},end:{line:3,column:32}}}))+"\n"+(null!=(l=c(n,"if").call(o,null!=t?c(t,"isExternalLink"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:10},end:{line:6,column:17}}}))?l:"")+"        "},useData:!0})}]}},picklistEvents:{"picklist:item:select":"onSelect"},onSelect:function(e){e.model.get("onSelect")()}}),pa=h.View.extend({className:"app-nav",regions:{navMain:{el:"[data-nav-main-region]",replaceElement:!0},navContent:"[data-nav-content-region]"},triggers:{"click .js-add-patient":"click:addPatient"},template:p().template({1:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="app-nav__bottom-button app-nav__link js-add-patient">'+o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"plus-circle",{name:"far",hash:{},data:i,loc:{start:{line:4,column:99},end:{line:4,column:120}}}))+o(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"globals"))&&s(l,"appNavViews"))&&s(l,"appNavView"))&&s(l,"addPatient"),t))+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div data-nav-main-region></div>\n    <div class="overflow-y" data-nav-content-region></div>\n    '+(null!=(l=o(n,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"hasManualPatientCreate"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:4},end:{line:4,column:186}}}))?l:"")+"\n  "},useData:!0}),templateContext:function(){return{hasManualPatientCreate:o().request("bootstrap","currentOrg").getSetting("manual_patient_creation")}},removeSelected:function(){this.$(".is-selected").removeClass("is-selected")}}),ha=h.View.extend({className:function(){var e="app-nav__link";return this.model.get("className")?"".concat(e," ").concat(this.model.get("className")):e},tagName:"a",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"formatMessage")||t&&l(t,"formatMessage")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"text"):t,{name:"formatMessage",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0}),triggers:{click:"click"},modelEvents:{selected:"onSelected"},onClick:function(){var e;o().trigger.apply(o(),["event-router",this.model.get("event")].concat(function(e){if(Array.isArray(e))return ua(e)}(e=this.model.get("eventArgs"))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ua(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ua(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))},onSelected:function(){this.$el.addClass("is-selected")}}),fa=h.CollectionView.extend({childView:ha}),ga=h.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lambda,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <h3 class="app-nav__search app-nav__link js-search">'+o((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"search",{name:"far",hash:{},data:i,loc:{start:{line:2,column:56},end:{line:2,column:72}}}))+o(s((l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"appNavViews"))&&r(l,"searchTitle"),t))+'</h3>\n    <h3 class="app-nav__title">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"appNavViews"))&&r(l,"patientsNav"))&&r(l,"worklistsTitle"),t))+"</h3>\n    <div data-worklists-region></div>\n  "},useData:!0}),regions:{worklists:"[data-worklists-region]"},triggers:{"click @ui.search":"search"},ui:{search:".js-search"},onSearchActive:function(e){this.ui.search.toggleClass("is-active",e)}}),wa=h.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <h3 class="app-nav__title">'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"globals"))&&o(l,"appNavViews"))&&o(l,"adminNav"))&&o(l,"adminTitle"),t))+"</h3>\n    <div data-admin-region></div>\n  "},useData:!0}),regions:{admin:"[data-admin-region]"}}),va=n(3557);function ba(e){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ya=h.View.extend({collectionEvents:{search:"render"},tagName:"li",className:"patient-search--no-results",getTemplate:function(){return this.collection.isSearching?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"globals"))&&o(l,"search"))&&o(l,"patientSearchViews"))&&o(l,"picklistEmptyView"))&&o(l,"searching"),t))},useData:!0}):p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"globals"))&&o(l,"search"))&&o(l,"patientSearchViews"))&&o(l,"picklistEmptyView"))&&o(l,"noResults"),t))},useData:!0})}}),_a=h.View.extend({tagName:"li",className:"patient-search--no-results",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    <div>"+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"search"))&&r(l,"patientSearchViews"))&&r(l,"picklistEmptyView"))&&r(l,"searchTip"),t))+"</div>\n    <div>"+s((r(n,"fas")||t&&r(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"keyboard",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:9},end:{line:3,column:27}}}))+'<strong class="u-margin--l-8">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"search"))&&r(l,"patientSearchViews"))&&r(l,"picklistEmptyView"))&&r(l,"shortcut"),t))+"</strong></div>\n  "},useData:!0})}),xa=va.Z.extend({className:"picklist patient-search__picklist",isSelectlist:!0,placeholderText:f.ZP.globals.search.patientSearchViews.patientSearchPicklist.placeholderText,getItemSearchText:function(){return"".concat(this.model.get("first_name")," ").concat(this.model.get("last_name"))},itemClassName:"patient-search__picklist-item",itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    "+r((c(n,"matchText")||t&&c(t,"matchText")||s).call(o,null!=t?c(t,"text"):t,null!=t?c(t,"query"):t,{name:"matchText",hash:{},data:i,loc:{start:{line:2,column:4},end:{line:2,column:28}}}))+r("function"==typeof(l=null!=(l=c(n,"remove_whitespace")||(null!=t?c(t,"remove_whitespace"):t))?l:s)?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:28},end:{line:2,column:53}}}):l)+'<span class="picklist-item__birthdate">'+r((c(n,"formatDateTime")||t&&c(t,"formatDateTime")||s).call(o,null!=t?c(t,"birth_date"):t,"MM/DD/YYYY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:3,column:43},end:{line:3,column:85}}}))+"</span>\n  "},useData:!0}),itemTemplateContext:function(){return{text:this.getItemSearchText()}}}),ka=h.View.extend({className:"modal patient-search__modal",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="modal-body patient-search__modal-body">\n      <a href="#" class="modal-close patient-search__modal-close js-close">'+e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"times",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:75},end:{line:3,column:90}}}))+"</a>\n      <div data-picklist-region></div>\n    </div>\n  "},useData:!0}),triggers:{"click .js-close":"close"},regions:{picklist:{el:"[data-picklist-region]",replaceElement:!0}},childViewTriggers:{"picklist:item:select":"item:select"},serializeCollection:i.noop,onRender:function(){var e=this.collection,t=this.getOption("prefillText"),n=new xa({lists:[{collection:e}],state:{query:t}});this.listenTo(n.getState(),"change:query",this.onChangeQuery),n.showIn(this.getRegion("picklist"),{emptyView:function(){var e=this.model.get("query");return!e||e.length<3?_a:ya},emptyViewOptions:{collection:e},template:p().template({1:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<input type="text" class="js-input patient-search__input" placeholder="'+c(ba(l=null!=(l=u(n,"placeholderText")||(null!=t?u(t,"placeholderText"):t))?l:s)===r?l.call(o,{name:"placeholderText",hash:{},data:i,loc:{start:{line:4,column:101},end:{line:4,column:122}}}):l)+'" value="'+c(ba(l=null!=(l=u(n,"query")||(null!=t?u(t,"query"):t))?l:s)===r?l.call(o,{name:"query",hash:{},data:i,loc:{start:{line:4,column:131},end:{line:4,column:142}}}):l)+'">'},3:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="picklist__info">'+r((c(n,"fas")||t&&c(t,"fas")||s).call(o,"info-circle",{name:"fas",hash:{},data:i,loc:{start:{line:7,column:52},end:{line:7,column:73}}}))+r("function"==typeof(l=null!=(l=c(n,"infoText")||(null!=t?c(t,"infoText"):t))?l:s)?l.call(o,{name:"infoText",hash:{},data:i,loc:{start:{line:7,column:73},end:{line:7,column:87}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n        <div class="picklist__fixed-heading patient-search__heading">\n          <span class="patient-search__search-icon">'+e.escapeExpression((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(o,"search",{name:"far",hash:{},data:i,loc:{start:{line:3,column:52},end:{line:3,column:68}}}))+"</span>\n          "+(null!=(l=s(n,"if").call(o,null!=t?s(t,"isSelectlist"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:10},end:{line:4,column:151}}}))?l:"")+'\n        </div>\n        <ul class="flex-region picklist__scroll js-picklist-scroll"></ul>\n        '+(null!=(l=s(n,"if").call(o,null!=t?s(t,"infoText"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:7,column:8},end:{line:7,column:100}}}))?l:"")+"\n      "},useData:!0})}),t&&this.collection.search(t),this.listenTo(n.getView(),"close",this.destroy)},onChangeQuery:function(e,t){this.collection.search(t)},onClose:function(){this.destroy()}}),Ca=n(2434),Oa=n(6105),Ta=n.n(Oa),Sa=f.ZP.globals.addPatient.addPatientViews,Da=h.View.extend({template:p().template({1:function(e,t,n,a,i){return"has-error"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<input class="input-primary w-100 js-input '+(null!=(l=r(n,"if").call(s,null!=t?r(t,"hasError"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:43},end:{line:1,column:75}}}))?l:"")+'" value="'+e.escapeExpression("function"==typeof(o=null!=(o=r(n,"value")||(null!=t?r(t,"value"):t))?o:e.hooks.helperMissing)?o.call(s,{name:"value",hash:{},data:i,loc:{start:{line:1,column:84},end:{line:1,column:95}}}):o)+'" />'},useData:!0}),templateContext:function(){var e=this.getOption("state").get("backend_errors");return{hasError:e&&e[this.getOption("errorField")],value:this.model.get(this.getOption("attr"))}},behaviors:[_.Z],ui:{input:".js-input"},initialize:function(e){var t=e.state,n=e.errorField;this.listenTo(t,{"change:backend_errors":function(e,t){t&&t[n]?this.render():this.ui.input.removeClass("has-error")}})},onWatchChange:function(e){var t=e;this.ui.input.val(t),this.model.set(this.getOption("attr"),(0,v.Z)(t))},onDomRefresh:function(){this.getOption("shouldFocus")&&this.ui.input.focus()}}),Pa=h.View.extend({className:"add-patient__save",template:p().template({1:function(e,t,n,a,i){return"disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button--green js-save" '+(null!=(l=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:42},end:{line:2,column:75}}}))?l:"")+">"+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"addPatient"))&&r(l,"addPatientViews"))&&r(l,"saveView"))&&r(l,"saveBtn"),t))+'</button>\n    <button class="button--text u-margin--r-4 js-cancel">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"addPatient"))&&r(l,"addPatientViews"))&&r(l,"saveView"))&&r(l,"cancelBtn"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-cancel":"cancel","click .js-save":"click:save"},templateContext:function(){return{isDisabled:this.getOption("state").get("errors")||this.isDisabled}},onClickSave:function(){this.isDisabled=!0,this.render()}}),Va=k.Z.extend({initialize:function(){var e=this.getOption("patient").get("sex");this.collection=new(c().Collection)([{text:"Male",value:"m"},{text:"Female",value:"f"},{text:"Other",value:"u"}]),this.setState("selected",this.collection.find({value:e}))},viewOptions:{className:"button-secondary",template:p().template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"globals"))&&o(l,"addPatient"))&&o(l,"addPatientViews"))&&o(l,"sexDroplist"))&&o(l,"defaultText"),t))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return c((u(n,"far")||t&&u(t,"far")||r).call(s,"user",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:14}}}))+c("function"==typeof(o=null!=(o=u(n,"text")||(null!=t?u(t,"text"):t))?o:r)?o.call(s,{name:"text",hash:{},data:i,loc:{start:{line:1,column:14},end:{line:1,column:24}}}):o)+(null!=(l=u(n,"unless").call(s,null!=t?u(t,"text"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:24},end:{line:1,column:121}}}))?l:"")},useData:!0})}}),Ma=h.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return"<div data-date-select-region></div>"},useData:!0}),regions:{dateSelect:"[data-date-select-region]"},onRender:function(){var e=this,t=this.showChildView("dateSelect",new Ca.Z({state:{selectedDate:this.model.get("birth_date")}}));this.listenTo(t,"change:date",(function(t,n){e.model.set("birth_date",n?n.format("YYYY-MM-DD"):null)})),this.listenTo(this.getOption("state"),{"change:errors":function(e,n){if(!n||n.birth_date){var a=!!n&&"invalidDate"===n.birth_date;t.setState({hasError:a})}}})}}),Ea=h.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s("function"==typeof(o=null!=(o=r(n,"error")||(null!=t?r(t,"error"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"error",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:11}}}):o)+'<span class="add-patient__search js-search">'+s(e.lambda((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"addPatient"))&&r(l,"addPatientViews"))&&r(l,"errorView"))&&r(l,"searchBtn"),t))+"</span>"},useData:!0}),templateContext:function(){return{error:this.getOption("error")}},triggers:{"click .js-search":"click:search"}}),ja=h.View.extend({className:"modal add-patient__modal",regions:{firstName:"[data-first-name-region]",lastName:"[data-last-name-region]",dob:"[data-dob-region]",sex:"[data-sex-region]",groups:"[data-groups-region]",save:{el:"[data-save-region]",replaceElement:!0},error:"[data-error-region]"},triggers:{"click .js-close":"close"},childViewTriggers:{"click:save":"click:save",cancel:"close","click:search":"click:search"},modelEvents:{change:"onChange",invalid:"onInvalid"},stateEvents:{"change:errors change:backend_errors":"showError"},template:Ta(),initialize:function(e){this.initState(e)},onRender:function(){this.showFirstNameView(),this.showLastNameView(),this.showSexDroplist(),this.showBirthDatePicker(),this.showGroupsComponent(),this.showError(),this.showSave()},onClose:function(){this.destroy()},showFirstNameView:function(){this.showChildView("firstName",new Da({model:this.model,state:this.getState(),attr:"first_name",errorField:"name",shouldFocus:!0}))},showLastNameView:function(){this.showChildView("lastName",new Da({model:this.model,state:this.getState(),attr:"last_name",errorField:"name"}))},showSave:function(){var e=new Pa({model:this.model,state:this.getState()});this.showChildView("save",e)},showSexDroplist:function(){var e=this.showChildView("sex",new Va({patient:this.model}));this.listenTo(e,{"change:selected":function(e){this.model.set("sex",e.get("value"))}})},showBirthDatePicker:function(){this.showChildView("dob",new Ma({model:this.model,state:this.getState()}))},showGroupsComponent:function(){var e=this.showChildView("groups",new $n({member:this.model}));this.listenTo(e,{"add:member":function(e,t){this.model.addGroup(t)},"remove:member":function(e,t){this.model.removeGroup(t)}})},showError:function(){var e=this.getState("errors"),t=this.getState("backend_errors");if(e){var n=(0,i.keys)(e)[0],a=e[n];if("required"===a)return;this.showChildView("error",Sa.errorView[n][a])}else if(t){var l=(0,i.keys)(t)[0];this.showChildView("error",new Ea({error:t[l]}))}else this.getRegion("error").empty()},onClickSearch:function(){this.triggerMethod("search",this.model)},onClickSave:function(){this.model.isValid({preSave:!0}),(0,i.isEmpty)(this.model.validationError)?this.triggerMethod("save",this):this.setState("errors",this.model.validationError)},onChange:function(e){this.setState({errors:null,backend_errors:null}),this.model.isValid(),this.showSave()},onInvalid:function(e,t){this.setState({errors:t})}});(0,R.j_)(ja);var Aa=f.ZP.globals.nav,Na=new(c().Collection)([{onSelect:function(){o().trigger("event-router","default")},id:"PatientsApp",iconType:"far",icon:"window",text:Aa.app.patients},{onSelect:function(){o().trigger("event-router","programs:all")},id:"AdminApp",iconType:"fas",icon:"tools",text:Aa.app.admin},{onSelect:function(){window.open("https://help.roundingwell.com/")},iconType:"fas",icon:"life-ring",text:Aa.app.help,isExternalLink:!0},{onSelect:function(){o().request("auth","logout")},iconType:"fas",icon:"sign-out-alt",text:Aa.app.signOut}]),Fa=new(c().Collection)([{text:Aa.adminApp.programs,event:"programs:all",eventArgs:[]},{text:Aa.adminApp.clinicians,event:"clinicians:all",eventArgs:[]}]),Ia=new(c().Collection)([{text:Aa.patientsApp.worklists.ownedBy,event:"worklist",eventArgs:["owned-by"]},{text:Aa.patientsApp.worklists.schedule,event:"schedule",eventArgs:[],className:"app-nav__spacer"},{text:Aa.patientsApp.worklists.sharedByRole,event:"worklist",eventArgs:["shared-by"],className:"app-nav__spacer"},{text:Aa.patientsApp.worklists.newPastDay,event:"worklist",eventArgs:["new-past-day"]},{text:Aa.patientsApp.worklists.updatedPastThree,event:"worklist",eventArgs:["updated-past-three-days"]},{text:Aa.patientsApp.worklists.doneLastThirty,event:"worklist",eventArgs:["done-last-thirty-days"]}]),Ra=s.Z.extend({startAfterInitialized:!0,channelName:"nav",radioRequests:{search:"showSearchModal",select:"selectNav"},stateEvents:{"change:currentApp":"onChangeCurrentApp"},viewEvents:{"click:addPatient":"showAddPatientModal"},selectNav:function(e,t,n){this.setState("currentApp",e);var a=this.getNavMatch(e,t,(0,i.compact)(n));a&&(this.getView().removeSelected(),a.trigger("selected"))},onChangeCurrentApp:function(e,t){this.setMainNav(t),this.showNav(t)},getNavMatch:function(e,t,n){return"PatientsApp"===e?this._navMatch(Ia,t,n):"AdminApp"===e?this._navMatch(Fa,t,n):void 0},_navMatch:function(e,t,n){return e.find((function(e){return e.get("event")===t&&(0,i.isEqual)(e.get("eventArgs"),n)}))},onStart:function(){o().request("bootstrap","currentUser").can("admin")||(Na.remove("AdminApp"),Na.remove("PatientsApp")),this.showView(new pa),this.mainNav=new ma({collection:Na}),this.showChildView("navMain",this.mainNav)},setMainNav:function(e){var t=Na.get(e);t&&this.mainNav.setState("selected",t)},showNav:function(e){"PatientsApp"!==e?"AdminApp"!==e?this.getRegion("navContent").empty():this.showChildView("navContent",this.getAdminAppNav()):this.showChildView("navContent",this.getPatientsAppNav())},getPatientsAppNav:function(){var e=this,t=new ga,n=new fa({collection:Ia});t.showChildView("worklists",n),this.listenTo(t,"search",(function(){e.showSearchModal()}));var a=o().channel("hotkey");return t.listenTo(a,"search",(function(t){t.preventDefault(),e.showSearchModal()})),t},getAdminAppNav:function(){var e=new wa,t=new fa({collection:Fa});return e.showChildView("admin",t),e},showSearchModal:function(e){var t=this.getChildView("navContent"),n=new ka({collection:o().request("entities","searchPatients:collection"),prefillText:e});this.listenTo(n,{"item:select":function(e){var t=e.model;o().trigger("event-router","patient:dashboard",t.get("_patient")),n.destroy()},destroy:function(){t.triggerMethod("search:active",!1)}}),o().request("modal","show:custom",n),t.triggerMethod("search:active",!0)},showAddPatientModal:function(){var e=new ja({model:o().request("entities","patients:model",{})}),t=o().request("modal","show:custom",e);this.listenTo(t,{save:function(n){n.model.saveAll().then((function(e){var n=e.data;o().trigger("event-router","patient:dashboard",n.id),t.destroy()})).fail((function(t){var n=t.responseJSON;e.setState({backend_errors:{name:n.errors[0].detail}})}))},search:function(e){var t="".concat(e.get("first_name")," ").concat(e.get("last_name"));this.showSearchModal(t)}})}}),Ga=n(4878),La=function(e,t){return(0,i.map)(e,(function(e){return(0,i.object)([t],[e])}))},qa=(n(2755),n(2681)),Ba=n(8626),Za=h.Behavior.extend({modelEvents:{change:function(e){if(!this.view.isDestroyed()){var t=this.options.changeAttributes;if(!t)throw new Error("changeAttributes must be defined.");var n=(0,i.keys)(e.changed);(0,i.intersection)(n,t).length&&this.view.render()}}}}),Ha=(n(65),n(7082),n(5013),n(2344),{propertyOf:i.propertyOf,escape:i.escape}),Wa=/{{\s*fields.([\w-.]+?)\s*}}/g,Ya=/{{\s*patient.([\w-.]+?)\s*}}/g,Ua=/{{\s*widget.([\w-.]+?)\s*}}/g,$a={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},za=/\\|'|\r|\n|\u2028|\u2029/g;function Qa(e){return"\\".concat($a[e])}function Xa(e,t){var n="";return(0,i.each)(t.split("."),(function(e){n+="'".concat(e,"',")})),"'+\n((__t=(propertyOf(data.".concat(e,")([").concat(n,"])))==null?'':escape(__t))+\n'")}function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ja(e,t,n,a){return(0,i.isFunction)(e)?new e((0,i.extend)({model:t},a,n.get("definition"))):(0,i.extend)({model:t},a,n.get("definition"),e)}var ei={dob:{template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"formatHTMLMessage")||t&&s(t,"formatHTMLMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.patient.sidebar.sidebarViews.sidebarWidgets.dob",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:20},end:{line:1,column:88}}}),{name:"formatHTMLMessage",hash:{age:null!=t?s(t,"age"):t,dob:(s(n,"formatDateTime")||t&&s(t,"formatDateTime")||o).call(l,null!=t?s(t,"dob"):t,"LONG",{name:"formatDateTime",hash:{inputFormat:"YYYY-MM-DD"},data:i,loc:{start:{line:1,column:93},end:{line:1,column:145}}})},data:i,loc:{start:{line:1,column:0},end:{line:1,column:155}}}))},useData:!0}),templateContext:function(){var e=this.model.get("birth_date");return{dob:e,age:d()().diff(d()(e,"YYYY-MM-DD"),"years")}}},sex:{template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"formatMessage")||t&&s(t,"formatMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.patient.sidebar.sidebarViews.sidebarWidgets.sex",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:84}}}),{name:"formatMessage",hash:{sex:null!=t?s(t,"sex"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:94}}}))},useData:!0})},status:{template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="patient-sidebar__status-'+r("function"==typeof(l=null!=(l=c(n,"status")||(null!=t?c(t,"status"):t))?l:s)?l.call(o,{name:"status",hash:{},data:i,loc:{start:{line:1,column:37},end:{line:1,column:49}}}):l)+'">'+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||s).call(o,(c(n,"intlGet")||t&&c(t,"intlGet")||s).call(o,"patients.patient.sidebar.sidebarViews.sidebarWidgets.status",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:67},end:{line:1,column:138}}}),{name:"formatMessage",hash:{status:null!=t?c(t,"status"):t},data:i,loc:{start:{line:1,column:51},end:{line:1,column:154}}}))+"</span>"},useData:!0})},divider:{template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<div class="patient-sidebar__divider"></div>'},useData:!0})},groups:{behaviors:[{behaviorClass:Za,changeAttributes:["_groups"]}],template:p().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div>"+e.escapeExpression(e.lambda(null!=t?l(t,"name"):t,t))+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l=o(n,"each").call(null!=t?t:e.nullContext||{},null!=t?o(t,"groups"):t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:0},end:{line:1,column:51}}}))?l:""},useData:!0}),templateContext:function(){return{groups:(0,i.map)(this.model.getGroups().models,"attributes")}}},engagement:h.View.extend({modelEvents:{"change:engagement":"render","status:notAvailable":"onStatusNotAvailable"},getTemplate:function(){return this.isNotAvailable?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="patient-sidebar__no-engagement">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"patient"))&&o(l,"sidebar"))&&o(l,"sidebarViews"))&&o(l,"sidebarWidgets"))&&o(l,"engagement"))&&o(l,"notAvailable"),t))+"</span>"},useData:!0}):this.model.get("engagement")?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="engagement-status__icon '+o(e.lambda(null!=(l=null!=t?c(t,"engagement"):t)?c(l,"status"):l,t))+' u-margin--r-4">'+o((c(n,"fas")||t&&c(t,"fas")||r).call(s,"circle",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:76},end:{line:1,column:92}}}))+"</span>"+o((c(n,"formatMessage")||t&&c(t,"formatMessage")||r).call(s,(c(n,"intlGet")||t&&c(t,"intlGet")||r).call(s,"patients.patient.sidebar.sidebarViews.sidebarWidgets.engagement.status",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:115},end:{line:1,column:197}}}),{name:"formatMessage",hash:{status:null!=(l=null!=t?c(t,"engagement"):t)?c(l,"status"):l},data:i,loc:{start:{line:1,column:99},end:{line:1,column:224}}}))},useData:!0}):p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="js-loading">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"patient"))&&o(l,"sidebar"))&&o(l,"sidebarViews"))&&o(l,"sidebarWidgets"))&&o(l,"engagement"))&&o(l,"loading"),t))+"</span>"},useData:!0})},ui:{loading:".js-loading"},triggers:{click:"click"},initialize:function(){var e=this.model;o().request("entities","fetch:patient:engagementStatus",e.id).fail((function(){e.trigger("status:notAvailable",!0)}))},onRender:function(){this.model.get("engagement")||(0,qa.Z)({targets:this.ui.loading[0],opacity:.5,loop:!0,easing:"easeInOutSine",duration:400,direction:"alternate"})},onClick:function(){!this.isNotAvailable&&this.model.get("engagement")&&o().request("sidebar","start","engagement",{patient:this.model})},onStatusNotAvailable:function(e){this.isNotAvailable=e,this.render()}}),optionsWidget:{className:"widgets-value",template:p().template({1:function(e,t,n,a,i){var l,o,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l="function"==typeof(o=null!=(o=s(n,"defaultHtml")||(null!=t?s(t,"defaultHtml"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"defaultHtml",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:61}}}):o)?l:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(o=null!=(o=r(n,"displayValue")||(null!=t?r(t,"displayValue"):t))?o:e.hooks.helperMissing)?o.call(s,{name:"displayValue",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}):o)+(null!=(l=r(n,"unless").call(s,null!=t?r(t,"displayValue"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:18},end:{line:1,column:72}}}))?l:"")},useData:!0}),templateContext:function(){var e=this.model.getFields().find({name:this.getOption("field_name")}),t=this.getOption("default_html");if(!e)return{defaultHtml:t};var n=e.get("value"),a=this.getOption("key"),l=this.getOption("display_options"),o=a?(0,i.propertyOf)(n)(a.split(".")):n;return{displayValue:l[o]||o,defaultHtml:t}}},phoneWidget:{className:"widgets-value",template:p().template({1:function(e,t,n,a,i){var l,o,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l="function"==typeof(o=null!=(o=s(n,"defaultHtml")||(null!=t?s(t,"defaultHtml"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"defaultHtml",hash:{},data:i,loc:{start:{line:1,column:42},end:{line:1,column:61}}}):o)?l:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(o=null!=(o=r(n,"displayValue")||(null!=t?r(t,"displayValue"):t))?o:e.hooks.helperMissing)?o.call(s,{name:"displayValue",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}):o)+(null!=(l=r(n,"unless").call(s,null!=t?r(t,"displayValue"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:18},end:{line:1,column:72}}}))?l:"")},useData:!0}),templateContext:function(){var e=this.model.getFields().find({name:this.getOption("field_name")}),t=this.getOption("default_html");if(!e)return{defaultHtml:t};var n=e.get("value"),a=this.getOption("key"),l=a?(0,i.propertyOf)(n)(a):n,o=(0,Ba._)(l,"US");return{displayValue:o?o.formatNational():null,defaultHtml:t}}},templateWidget:h.View.extend({className:"widgets-value",initialize:function(){this.template=function(e){var t=0,n="",a=[],l=[],o=RegExp("".concat([Wa.source,Ya.source,Ua.source].join("|"),"|$"),"g");e.replace(o,(function(o,s,r,c,u){return n+=e.slice(t,u).replace(za,Qa),t=u+o.length,s&&(a.push((0,i.first)(s.split("."))),n+=Xa("fields",s)),r&&(n+=Xa("patient",r)),c&&(l.push(c),n+="<span data-".concat(c,"-region></span>")),o})),n="var __t;\nreturn '".concat(n,"';\n");var s=new Function("data","{ propertyOf, escape }",n),r=function(e){var t=e.getFields(),n=(0,i.reduce)(a,(function(e,n){var a=t.find({name:n});return a?(e[n]=a.get("value"),e):e}),{}),l={patient:e.attributes,fields:n};return s.call(this,l,Ha)};return r.widgetNames=l,r}(this.template),this.nestedWidgets=this.template.widgetNames;var e=(0,i.reduce)(this.nestedWidgets,(function(e,t){return e[t]="[data-".concat(t,"-region]"),e}),{});this.addRegions(e)},serializeData:function(){return this.model},onRender:function(){var e=this;(0,i.each)(this.nestedWidgets,(function(t){var n=o().request("entities","widgets:model",t),a=ei[n.get("widget_type")];e.showChildView(t,Ja(a,e.model,n,{tagName:"span"}))}))}}),formWidget:h.View.extend({className:"button-primary patient-sidebar__form-widget",tagName:"button",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||s).call(o,"poll-h",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))+" "+r("function"==typeof(l=null!=(l=c(n,"formName")||(null!=t?c(t,"formName"):t))?l:s)?l.call(o,{name:"formName",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:29}}}):l)+" "+r((c(n,"far")||t&&c(t,"far")||s).call(o,"expand-alt",{name:"far",hash:{},data:i,loc:{start:{line:1,column:30},end:{line:1,column:50}}}))},useData:!0}),templateContext:function(){return{formName:this.getOption("form_name")}},triggers:{click:"click"},onClick:function(){o().trigger("event-router","form:patient",this.model.id,this.getOption("form_id"))}})},ti=h.View.extend({className:"patient-sidebar__section",template:p().template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="patient-sidebar__heading">'+e.escapeExpression(e.lambda(null!=(l=null!=t?o(t,"definition"):t)?o(l,"display_name"):l,t))+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(l=o(n,"if").call(null!=t?t:e.nullContext||{},null!=(l=null!=t?o(t,"definition"):t)?o(l,"display_name"):l,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:0},end:{line:1,column:111}}}))?l:"")+'<div class="patient-sidebar__item" data-content-region></div>'},useData:!0}),regions:{content:"[data-content-region]"},onRender:function(){var e=this.getOption("widget"),t=this.getOption("patient");this.showChildView("content",Ja(e,t,this.model))}}),ni=h.CollectionView.extend({className:"patient-sidebar flex-region",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <h1 class="patient-sidebar__name">'+c(Ka(l=null!=(l=u(n,"first_name")||(null!=t?u(t,"first_name"):t))?l:s)===r?l.call(o,{name:"first_name",hash:{},data:i,loc:{start:{line:2,column:38},end:{line:2,column:54}}}):l)+" "+c(Ka(l=null!=(l=u(n,"last_name")||(null!=t?u(t,"last_name"):t))?l:s)===r?l.call(o,{name:"last_name",hash:{},data:i,loc:{start:{line:2,column:55},end:{line:2,column:70}}}):l)+"</h1>\n    <div data-widgets-region></div>\n  "},useData:!0}),childView:ti,childViewContainer:"[data-widgets-region]",childViewOptions:function(e){return{widget:ei[e.get("widget_type")],model:e,patient:this.model}},viewFilter:function(e){return e.model.get("widget_type")},viewComparator:!1}),ai=s.Z.extend({onBeforeStart:function(e){var t=e.patient,n=o().request("bootstrap","currentOrg"),a=o().request("entities","widgets:collection",La(n.getSetting("widget_sidebar"),"id"));this.patient=t,this.showView(new ni({model:t,collection:a}))}}),ii=k.Z.extend({popWidth:224,viewOptions:{className:"button-filter form__response-droplist",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((r(n,"far")||t&&r(t,"far")||o).call(l,"history",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:17}}}))+s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"_created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:57}}}))+s((r(n,"far")||t&&r(t,"far")||o).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:57},end:{line:1,column:77}}}))},useData:!0})},picklistOptions:{itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"formatDateTime")||t&&l(t,"formatDateTime")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"_created_at"):t,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:40}}}))},useData:!0})}}),li=h.View.extend({className:"form__action-bar flex",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div data-versions-region></div>\n    <button class="button--blue form__action-button js-current">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"forms"))&&o(l,"form"))&&o(l,"formHistoryViews"))&&o(l,"historyBarView"))&&o(l,"currentVersionButton"),t))+"</button>\n  "},useData:!0}),regions:{versions:"[data-versions-region]"},ui:{currentBtn:".js-current"},triggers:{"click @ui.currentBtn":"click:current"},initialize:function(){var e=this.showChildView("versions",new ii({collection:this.getOption("formResponses"),state:this.getOption("state")}));this.listenTo(e,{"change:selected":function(e){this.triggerMethod("select:response",e)}})}}),oi=h.View.extend({className:"flex-region",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<iframe src="/formapp/'+s(e.lambda(null!=(l=null!=t?r(t,"form"):t)?r(l,"id"):l,t))+"/response/"+s("function"==typeof(o=null!=(o=r(n,"id")||(null!=t?r(t,"id"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:i,loc:{start:{line:1,column:45},end:{line:1,column:53}}}):o)+'"></iframe>'},useData:!0}),templateContext:function(){return{form:this.getOption("form")}},ui:{iframe:"iframe"},print:function(){this.ui.iframe[0].contentWindow.print()}}),si=h.View.extend({className:"form__history-region flex-region",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div data-history-region></div>\n    <div class="form__iframe--has-bar" data-iframe-region></div>\n  '},useData:!0}),regions:{iframe:{el:"[data-iframe-region]",regionClass:y.Z},history:"[data-history-region]"},childViewTriggers:{"click:current":"click:current","select:response":"select:response"}}),ri=s.Z.extend({viewEvents:{"select:response":"onSelectResponse"},stateEvents:{"change:response":"showIframeView"},onBeforeStart:function(){this.showView(new si),this.getRegion("iframe").startPreloader()},beforeStart:function(e){return e.action.fetch()},onStart:function(e,t){var n=e.form;this.form=n;var a=t.getFormResponses(),i=this.showChildView("history",new li({formResponses:a,state:{selected:a.first()}}));this.listenTo(i,"click:current",this.onClickCurrent),this.setState("response",a.first());var l=this.getChildView("iframe");o().reply("form".concat(this.form.id),"print:form",(function(){l.print()}))},onStop:function(){o().stopReplying("form".concat(this.form.id))},onClickCurrent:function(){this.stop()},onSelectResponse:function(e){this.setState("response",e)},showIframeView:function(){this.showChildView("iframe",new oi({form:this.form,model:this.getState("response")}))}}),ci=h.View.extend({className:"form__update-region flex-region",template:p().template({1:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="form__action-bar flex">\n        <div class="u-margin--t-8">'+c((d(n,"fas")||t&&d(t,"fas")||r).call(s,"info-circle",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:35},end:{line:4,column:56}}}))+" "+c((d(n,"formatHTMLMessage")||t&&d(t,"formatHTMLMessage")||r).call(s,(d(n,"intlGet")||t&&d(t,"intlGet")||r).call(s,"forms.form.formUpdateViews.layoutView.updateLabel",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:77},end:{line:4,column:138}}}),{name:"formatHTMLMessage",hash:{date:(d(n,"formatDateTime")||t&&d(t,"formatDateTime")||r).call(s,null!=(l=null!=(l=null!=t?d(t,"response"):t)?d(l,"attributes"):l)?d(l,"_created_at"):l,"AT_TIME",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:4,column:144},end:{line:4,column:202}}})},data:i,loc:{start:{line:4,column:57},end:{line:4,column:204}}}))+'</div>\n        <button class="button--blue form__action-button js-update">'+c(u((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"forms"))&&d(l,"form"))&&d(l,"formUpdateViews"))&&d(l,"layoutView"))&&d(l,"updateButton"),t))+'</button>\n      </div>\n      <div class="form__iframe--has-bar"><iframe src="/formapp/'+c("function"==typeof(o=null!=(o=d(n,"id")||(null!=t?d(t,"id"):t))?o:r)?o.call(s,{name:"id",hash:{},data:i,loc:{start:{line:7,column:63},end:{line:7,column:71}}}):o)+"/response/"+c(u(null!=(l=null!=t?d(t,"response"):t)?d(l,"id"):l,t))+'"></iframe></div>\n'},3:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l=o(n,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"response"):t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i,loc:{start:{line:9,column:6},end:{line:13,column:13}}}))?l:""},4:function(e,t,n,a,i){var l,o,s=e.escapeExpression,r=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <iframe src="/formapp/'+s("function"==typeof(o=null!=(o=c(n,"id")||(null!=t?c(t,"id"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:i,loc:{start:{line:10,column:30},end:{line:10,column:38}}}):o)+"/new/"+s(r(null!=(l=null!=t?c(t,"patient"):t)?c(l,"id"):l,t))+"/"+s(r(null!=(l=null!=t?c(t,"action"):t)?c(l,"id"):l,t))+"/"+s(r(null!=(l=null!=t?c(t,"response"):t)?c(l,"id"):l,t))+'"></iframe>\n'},6:function(e,t,n,a,i){var l,o,s=e.escapeExpression,r=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <iframe src="/formapp/'+s("function"==typeof(o=null!=(o=c(n,"id")||(null!=t?c(t,"id"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:i,loc:{start:{line:12,column:30},end:{line:12,column:38}}}):o)+"/new/"+s(r(null!=(l=null!=t?c(t,"patient"):t)?c(l,"id"):l,t))+"/"+s(r(null!=(l=null!=t?c(t,"action"):t)?c(l,"id"):l,t))+'"></iframe>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=o(n,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"shouldShowResponse"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:4},end:{line:14,column:11}}}))?l:"")+"  "},useData:!0}),templateContext:function(){var e=this.getOption("response"),t=this.getOption("state"),n=this.getOption("action");return{response:this.getOption("response"),patient:n.getPatient(),action:n,shouldShowResponse:!!e&&!t.get("shouldUpdate")}},ui:{update:".js-update",iframe:"iframe"},triggers:{"click @ui.update":"click:update"},print:function(){this.ui.iframe[0].contentWindow.print()}}),ui=s.Z.extend({viewEvents:{"click:update":"onClickUpdate"},stateEvents:{"change:shouldUpdate":"showLayout"},onStart:function(e){var t=e.form,n=e.response,a=e.action;this.form=t,this.response=n,this.action=a,this.setState("shouldUpdate",!1),this.showLayout();var i=this.getView();o().reply("form".concat(this.form.id),"print:form",(function(){i.print()}))},onStop:function(){o().stopReplying("form".concat(this.form.id))},onClickUpdate:function(){this.setState({shouldUpdate:!0})},showLayout:function(){this.showView(new ci({model:this.form,response:this.response,state:this.getState(),action:this.action}))}});function di(e){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var mi=h.View.extend({className:"form__context-trail",template:p().template({1:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-back form__context-link">\n        '+o((s(n,"fas")||t&&s(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:30}}}))+o(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"forms"))&&s(l,"form"))&&s(l,"formViews"))&&s(l,"contextBackBtn"),t))+"\n      </a>\n"},3:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-dashboard form__context-link">\n        '+o((s(n,"fas")||t&&s(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:8},end:{line:8,column:30}}}))+o(e.lambda((l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"forms"))&&s(l,"form"))&&s(l,"formViews"))&&s(l,"contextBackDashboard"),t))+"\n      </a>\n"},5:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="js-history-button form__actions--button'+(null!=(l=s(n,"if").call(o,null!=t?s(t,"historyResponseId"):t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i,loc:{start:{line:13,column:77},end:{line:13,column:121}}}))?l:"")+'">'+e.escapeExpression((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(o,"history",{name:"far",hash:{},data:i,loc:{start:{line:13,column:123},end:{line:13,column:140}}}))+"</span>"},6:function(e,t,n,a,i){return" is-selected"},8:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"expand-alt",{name:"far",hash:{},data:i,loc:{start:{line:14,column:79},end:{line:14,column:99}}}))},10:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"compress-alt",{name:"far",hash:{},data:i,loc:{start:{line:14,column:107},end:{line:14,column:129}}}))},12:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="js-sidebar-button form__actions--button'+(null!=(l=s(n,"if").call(o,null!=t?s(t,"isActionShown"):t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i,loc:{start:{line:16,column:78},end:{line:16,column:118}}}))?l:"")+'">'+e.escapeExpression((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(o,"file-alt",{name:"far",hash:{},data:i,loc:{start:{line:16,column:120},end:{line:16,column:138}}}))+"</button>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=u(n,"if").call(o,null!=t?u(t,"showAction"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:2,column:4},end:{line:10,column:11}}}))?l:"")+"    "+r((u(n,"fas")||t&&u(t,"fas")||s).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:11,column:4},end:{line:11,column:27}}}))+r(c(null!=(l=null!=t?u(t,"patient"):t)?u(l,"first_name"):l,t))+" "+r(c(null!=(l=null!=t?u(t,"patient"):t)?u(l,"last_name"):l,t))+" - "+r(c(null!=(l=null!=t?u(t,"form"):t)?u(l,"name"):l,t))+'\n    <div class="form__actions">\n      '+(null!=(l=u(n,"if").call(o,null!=t?u(t,"showHistory"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:13,column:6},end:{line:13,column:154}}}))?l:"")+'\n      <button class="js-expand-button form__actions--button">'+(null!=(l=u(n,"if").call(o,null!=t?u(t,"isExpanded"):t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i,loc:{start:{line:14,column:61},end:{line:14,column:136}}}))?l:"")+'</button>\n      <button class="js-print-button form__actions--button">'+r((u(n,"far")||t&&u(t,"far")||s).call(o,"print",{name:"far",hash:{},data:i,loc:{start:{line:15,column:60},end:{line:15,column:75}}}))+"</button>\n      "+(null!=(l=u(n,"if").call(o,null!=t?u(t,"showAction"):t,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i,loc:{start:{line:16,column:6},end:{line:16,column:154}}}))?l:"")+"\n    </div>\n  "},useData:!0}),initialize:function(e){var t=e.patient,n=e.action,a=e.form;this.patient=t,this.action=n,this.form=a},modelEvents:{"change:isExpanded":"render","change:isActionSidebar":"render","change:historyResponseId":"render"},ui:{sidebarButton:".js-sidebar-button",printButton:".js-print-button",expandButton:".js-expand-button",historyButton:".js-history-button"},triggers:{"click .js-back":"click:back","click .js-dashboard":"click:dashboard","click @ui.sidebarButton":"click:sidebarButton","click @ui.printButton":"click:printButton","click @ui.expandButton":"click:expandButton","click @ui.historyButton":"click:historyButton"},onClickBack:function(){o().request("history","go:back")},onClickDashboard:function(){o().trigger("event-router","patient:dashboard",this.patient.id)},templateContext:function(){var e=!this.model.get("isExpanded");return{isActionShown:e&&this.model.get("isActionSidebar"),isExpanded:e,patient:this.patient.pick("first_name","last_name"),showHistory:!!this.action&&!!this.action.getFormResponses().length,showAction:!!this.action,form:this.getOption("form").pick("name")}},onRender:function(){this.renderSidebarTooltip(),this.renderPrintTooltip(),this.renderExpandTooltip(),this.renderHistoryTooltip()},renderSidebarTooltip:function(){var e=this.model.get("isExpanded"),t=this.model.get("isActionSidebar"),n=!e&&t?f.ZP.forms.form.formViews.hideActionSidebar:f.ZP.forms.form.formViews.showActionSidebar;new ye.Z({message:n,uiView:this,ui:this.ui.sidebarButton})},renderPrintTooltip:function(){new ye.Z({message:f.ZP.forms.form.formViews.printForm,uiView:this,ui:this.ui.printButton})},renderExpandTooltip:function(){var e=this.model.get("isExpanded")?f.ZP.forms.form.formViews.decreaseWidth:f.ZP.forms.form.formViews.increaseWidth;new ye.Z({message:e,uiView:this,ui:this.ui.expandButton})},renderHistoryTooltip:function(){var e=this.model.get("historyResponseId")?f.ZP.forms.form.formViews.currentVersion:f.ZP.forms.form.formViews.responseHistory;new ye.Z({message:e,uiView:this,ui:this.ui.historyButton})}}),pi=h.View.extend({className:"form__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="form__layout">\n      <div data-context-trail-region></div>\n      <div class="form__iframe js-iframe">\n        <div class="flex-region" data-form-region></div>\n      </div>\n    </div>\n    <div class="form__sidebar" data-sidebar-region></div>\n  '},useData:!0}),childViewTriggers:{"click:sidebarButton":"click:sidebarButton","click:printButton":"click:printButton","click:expandButton":"click:expandButton","click:historyButton":"click:historyButton"},regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},sidebar:"[data-sidebar-region]",form:"[data-form-region]"},ui:{iframe:".js-iframe iframe"},onRender:function(){this.showChildView("contextTrail",new mi({model:this.model,patient:this.getOption("patient"),action:this.getOption("action"),form:this.getOption("form")}))}}),hi=h.View.extend({className:"flex-region",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<iframe class="js-iframe" src="/formapp/'+s("function"==typeof(o=null!=(o=r(n,"id")||(null!=t?r(t,"id"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:i,loc:{start:{line:1,column:40},end:{line:1,column:48}}}):o)+"/new/"+s(e.lambda(null!=(l=null!=t?r(t,"patient"):t)?r(l,"id"):l,t))+'"></iframe>'},useData:!0}),templateContext:function(){return{patient:this.getOption("patient")}},ui:{iframe:".js-iframe"},print:function(){this.ui.iframe[0].contentWindow.print()}}),fi=h.View.extend({className:"form__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u=e.lambda,d="function",m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="form__layout">\n      <div class="form__context-trail">\n        <a class="js-back form__context-link">\n          '+c((m(n,"fas")||t&&m(t,"fas")||r).call(s,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:5,column:10},end:{line:5,column:32}}}))+c(u((l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"forms"))&&m(l,"form"))&&m(l,"formViews"))&&m(l,"previewView"))&&m(l,"backBtn"),t))+"\n        </a>\n        "+c((m(n,"fas")||t&&m(t,"fas")||r).call(s,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:7,column:8},end:{line:7,column:31}}}))+c(u((l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"forms"))&&m(l,"form"))&&m(l,"formViews"))&&m(l,"previewView"))&&m(l,"title"),t))+" &ndash; "+c(di(o=null!=(o=m(n,"name")||(null!=t?m(t,"name"):t))?o:r)===d?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:7,column:90},end:{line:7,column:100}}}):o)+'\n      </div>\n      <div class="form__iframe">\n        <iframe src="/formapp/'+c(di(o=null!=(o=m(n,"id")||(null!=t?m(t,"id"):t))?o:r)===d?o.call(s,{name:"id",hash:{},data:i,loc:{start:{line:10,column:30},end:{line:10,column:38}}}):o)+'/preview"></iframe>\n      </div>\n    </div>\n  '},useData:!0}),triggers:{"click .js-back":"click:back"},onClickBack:function(){o().request("history","go:back")}});function gi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var vi=s.Z.extend({childApps:{patient:ai,history:ri,update:ui},onBeforeStart:function(){this.getRegion().startPreloader()},beforeStart:function(e){var t=e.patientActionId;return[o().request("entities","fetch:actions:model",t),o().request("entities","fetch:patients:model:byAction",t)]},onFail:function(){o().request("alert","show:error",f.ZP.forms.form.formApp.notFound),o().trigger("event-router","default")},onStart:function(e,t,n){var a=gi(t,1)[0],i=gi(n,1)[0];this.patient=i,this.action=a,this.formResponses=a.getFormResponses(),this.form=this.action.getForm(),this.listenTo(a,{destroy:function(){o().request("alert","show:success",f.ZP.forms.form.formApp.deleteSuccess),o().trigger("event-router","default")},"change:_form_responses":function(){this.formResponses=a.getFormResponses()}}),this.showView(new pi({model:this.getState(),action:a,patient:i,form:this.form})),this.setState({isActionSidebar:!0,isExpanded:!1,historyResponseId:null})},stateEvents:{change:"onChangeState","change:historyResponseId":"onChangeHistoryResponseId"},viewEvents:{"click:sidebarButton":"onClickSidebarButton","click:expandButton":"onClickExpandButton","click:historyButton":"onClickHistoryButton","click:printButton":"onClickPrintButton"},onClickSidebarButton:function(){var e=this.getState("isActionSidebar");this.getState("isExpanded")?this.setState({isActionSidebar:!0,isExpanded:!1}):this.setState({isActionSidebar:!e,isExpanded:!1})},onClickExpandButton:function(){this.toggleState("isExpanded")},onClickHistoryButton:function(){this.getChildApp("history").isRunning()?this.setState("historyResponseId",null):this.setState("historyResponseId",this.formResponses.first().id)},onClickPrintButton:function(){o().request("form".concat(this.form.id),"print:form")},onChangeState:function(e){if(e.hasChanged("isExpanded")||e.hasChanged("isActionSidebar")){var t=e.get("isActionSidebar"),n=e.get("isExpanded");if(t&&!n||o().request("sidebar","close"),n)return this.stopChildApp("patient"),void this.getRegion("sidebar").empty();t&&this.showActionSidebar(),this.startChildApp("patient",{region:this.getRegion("sidebar"),patient:this.patient})}},onChangeHistoryResponseId:function(){this.getState("historyResponseId")?this.startHistoryApp():this.startUpdateApp()},showActionSidebar:function(){var e=this,t=o().request("sidebar","start","action",{action:this.action,isShowingForm:!0});this.listenTo(t,"stop",(function(){e.getState("isExpanded")||e.setState("isActionSidebar",!1)}))},startUpdateApp:function(){this.stopChildApp("history"),this.startChildApp("update",{region:this.getRegion("form"),form:this.action.getForm(),response:this.formResponses.first(),action:this.action})},startHistoryApp:function(){this.stopChildApp("update");var e=this.startChildApp("history",{region:this.getRegion("form"),action:this.action,form:this.form});this.listenTo(e,{stop:function(){this.setState("historyResponseId",null)}})}});function bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var yi=s.Z.extend({childApps:{patient:ai},onBeforeStart:function(){this.getRegion().startPreloader()},beforeStart:function(e){var t=e.formId,n=e.patientId;return[o().request("entities","fetch:patients:model",n),o().request("entities","forms:model",t)]},onFail:function(){o().request("alert","show:error",f.ZP.forms.form.formApp.notFound),o().trigger("event-router","default")},onStart:function(e,t,n){var a,i,l=(a=t,i=1,function(e){if(Array.isArray(e))return e}(a)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return n}}(a,i)||function(e,t){if(e){if("string"==typeof e)return bi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bi(e,t):void 0}}(a,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];this.patient=l,this.form=n,this.showView(new pi({model:this.getState(),patient:l,form:n}));var s=this.showChildView("form",new hi({model:n,patient:l}));o().reply("form".concat(this.form.id),"print:form",(function(){s.print()})),this.setState("isExpanded",!1)},stateEvents:{"change:isExpanded":"onChangeIsExpanded"},viewEvents:{"click:expandButton":"onClickExpandButton","click:printButton":"onClickPrintButton"},onClickExpandButton:function(){this.toggleState("isExpanded")},onChangeIsExpanded:function(){if(this.getState("isExpanded"))return this.stopChildApp("patient"),void this.getRegion("sidebar").empty();this.startChildApp("patient",{region:this.getRegion("sidebar"),patient:this.patient})},onClickPrintButton:function(){o().request("form".concat(this.form.id),"print:form")}}),_i=s.Z.extend({beforeStart:function(e){var t=e.formId;return o().request("entities","forms:model",t)},onStart:function(e,t){this.showView(new fi({model:t}))}}),xi=Ga.Z.extend({routerAppName:"FormsApp",childApps:{form:vi,formPreview:_i,patientForm:yi},eventRoutes:{"form:patient":{action:"showFormPatient",route:"patient/:id/form/:id"},"form:patientAction":{action:"showFormAction",route:"patient-action/:id/form/:id"},"form:preview":{action:"showFormPreview",route:"form/:id/preview"}},showFormAction:function(e,t){this.startCurrent("form",{formId:t,patientActionId:e})},showFormPatient:function(e,t){this.startCurrent("patientForm",{formId:t,patientId:e})},showFormPreview:function(e){this.startCurrent("formPreview",{formId:e})}}),ki=n(3016),Ci=n.n(ki);function Oi(e){return(Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ti=h.View.extend({className:"check-in__context-trail",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <a class="js-back check-in__context-link">\n    '+r((u(n,"fas")||t&&u(t,"fas")||s).call(o,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:4},end:{line:3,column:26}}}))+r(c((l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"checkIns"))&&u(l,"checkInViews"))&&u(l,"contextTrailView"))&&u(l,"backBtn"),t))+"\n  </a>\n  "+r((u(n,"fas")||t&&u(t,"fas")||s).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:5,column:2},end:{line:5,column:25}}}))+r(c(null!=(l=null!=t?u(t,"patient"):t)?u(l,"first_name"):l,t))+" "+r(c(null!=(l=null!=t?u(t,"patient"):t)?u(l,"last_name"):l,t))+" - "+r((u(n,"formatHTMLMessage")||t&&u(t,"formatHTMLMessage")||s).call(o,(u(n,"intlGet")||t&&u(t,"intlGet")||s).call(o,"checkIns.checkInViews.contextTrailView.checkInCompleted",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:96},end:{line:5,column:163}}}),{name:"formatHTMLMessage",hash:{date:(u(n,"formatDateTime")||t&&u(t,"formatDateTime")||s).call(o,null!=t?u(t,"finishedTs"):t,"LONG",{name:"formatDateTime",hash:{utc:!0},data:i,loc:{start:{line:5,column:169},end:{line:5,column:212}}})},data:i,loc:{start:{line:5,column:76},end:{line:5,column:215}}}))+"\n  "},useData:!0}),templateContext:function(){return{patient:this.patient.pick("first_name","last_name")}},triggers:{"click .js-back":"click:back"},initialize:function(e){var t=e.patient;this.patient=t},onClickBack:function(){o().request("history","go:back")}}),Si=(h.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return"Patient Engagement sidebar will go here"},useData:!0})}),h.View.extend({className:"check-in__item check-in__message-item",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    <strong>"+(null!=(l=Oi(o=null!=(o=u(n,"label_html")||(null!=t?u(t,"label_html"):t))?o:r)===c?o.call(s,{name:"label_html",hash:{},data:i,loc:{start:{line:2,column:12},end:{line:2,column:30}}}):o)?l:"")+"</strong>\n    <div>"+(null!=(l=Oi(o=null!=(o=u(n,"body_html")||(null!=t?u(t,"body_html"):t))?o:r)===c?o.call(s,{name:"body_html",hash:{},data:i,loc:{start:{line:3,column:9},end:{line:3,column:26}}}):o)?l:"")+"</div>\n  "},useData:!0}),templateContext:{label_html:function(){return this.content.label},body_html:function(){return this.content.body}}})),Di=h.View.extend({className:"check-in__item",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    <div>"+(null!=(l=Oi(o=null!=(o=u(n,"question_html")||(null!=t?u(t,"question_html"):t))?o:r)===c?o.call(s,{name:"question_html",hash:{},data:i,loc:{start:{line:2,column:9},end:{line:2,column:30}}}):o)?l:"")+'</div>\n    <strong class="check-in__patient-answer">'+(null!=(l=Oi(o=null!=(o=u(n,"answer_html")||(null!=t?u(t,"answer_html"):t))?o:r)===c?o.call(s,{name:"answer_html",hash:{},data:i,loc:{start:{line:3,column:45},end:{line:3,column:64}}}):o)?l:"")+"</strong>\n  "},useData:!0}),templateContext:{question_html:function(){return this.content.label},answer_html:function(){return this._answer}}}),Pi=h.CollectionView.extend({childView:function(e){return"message"===e.get("type")||"copy"===e.get("type")?Si:Di}}),Vi=h.View.extend({className:"check-in__frame",template:Ci(),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},checkIn:"[data-check-in-region]",sidebar:"[data-sidebar-region]"},initialize:function(e){var t=e.patient;this.patient=t},onRender:function(){this.showContextTrail(),this.showCheckInContent()},showContextTrail:function(){this.showChildView("contextTrail",new Ti({model:this.model,patient:this.patient}))},showCheckInContent:function(){this.showChildView("checkIn",new Pi({collection:this.model.getContent()}))}});function Mi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ei(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ei(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ji=s.Z.extend({childApps:{patient:ai},onBeforeStart:function(){this.getRegion().startPreloader()},beforeStart:function(e){var t=e.checkInId,n=e.patientId;return[o().request("entities","fetch:checkIns:model",{checkInId:t,patientId:n}),o().request("entities","fetch:patients:model",n)]},onFail:function(){o().request("alert","show:error",f.ZP.checkIns.checkInApp.notFound),o().trigger("event-router","default")},onStart:function(e,t,n){var a=Mi(t,1)[0],i=Mi(n,1)[0];this.patient=i,this.checkIn=a,this.showView(new Vi({model:a,patient:i})),this.showPatientSidebar()},showPatientSidebar:function(){this.startChildApp("patient",{region:this.getRegion("sidebar"),patient:this.patient})}}),Ai=Ga.Z.extend({routerAppName:"CheckInsApp",childApps:{checkIn:ji},eventRoutes:{checkin:{action:"showCheckIn",route:"patient/:id/check-in/:id"}},showCheckIn:function(e,t){this.startCurrent("checkIn",{checkInId:t,patientId:e})}}),Ni=s.Z.extend({constructor:function(){this._current=null,this.initRouter(),this.on("before:stop",this.stopCurrent),s.Z.apply(this,arguments)},initRouter:function(){var e=(0,i.result)(this,"eventRoutes",{});this._eventRoutes=(0,h.normalizeMethods)(this,e)},startRoute:function(e){var t=e.event,n=e.eventArgs,a=this._eventRoutes[t];a&&a.apply(this,n)},mixinOptions:function(e){var t=(0,i.result)(this,"currentAppOptions");return(0,i.extend)({},t,e)},startCurrent:function(e,t){this.stopCurrent();var n=this.startChildApp(e,this.mixinOptions(t));return this._current=n,n},getCurrent:function(){return this._current},stopCurrent:function(){this._current&&(this._current.stop(),this._current=null)}}),Fi=s.Z.extend({beforeStart:function(e){var t=e.actionId,n=e.patientId;if(!t){var a=o().request("bootstrap","currentUser"),i=o().request("bootstrap","currentOrg").getStates();return o().request("entities","actions:model",{_patient:n,_state:i.at(0).id,_owner:{type:"clinicians",id:a.id},duration:0,due_date:null,due_time:null})}return o().request("entities","fetch:actions:model",t)},onFail:function(){o().request("alert","show:error",f.ZP.patients.patient.actionApp.notFound),this.stop()},onStart:function(e,t){var n=o().request("sidebar","start","action",{action:t});this.listenTo(n,"stop",this.stop)}}),Ii=n(4486),Ri=n.n(Ii),Gi=n(3754),Li=n.n(Gi);function qi(e){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Bi=h.View.extend({initialize:function(){this.patient=this.model.getPatient()},className:"patient-flow__context-trail",template:p().template({1:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-back patient-flow__context-link">\n        '+r((c(n,"fas")||t&&c(t,"fas")||s).call(o,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:30}}}))+r(e.lambda((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"patient"))&&c(l,"flowViews"))&&c(l,"contextBackBtn"),t))+"\n      </a>\n      "+r((c(n,"fas")||t&&c(t,"fas")||s).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:29}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=d(n,"if").call(s,null!=t?d(t,"hasLatestList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:7,column:11}}}))?l:"")+'    <a class="js-patient patient-flow__context-link">'+u(qi(o=null!=(o=d(n,"firstName")||(null!=t?d(t,"firstName"):t))?o:r)===c?o.call(s,{name:"firstName",hash:{},data:i,loc:{start:{line:8,column:53},end:{line:8,column:68}}}):o)+" "+u(qi(o=null!=(o=d(n,"lastName")||(null!=t?d(t,"lastName"):t))?o:r)===c?o.call(s,{name:"lastName",hash:{},data:i,loc:{start:{line:8,column:69},end:{line:8,column:83}}}):o)+"</a>"+u((d(n,"fas")||t&&d(t,"fas")||r).call(s,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:87},end:{line:8,column:110}}}))+u(qi(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===c?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:8,column:110},end:{line:8,column:120}}}):o)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back","click .js-patient":"click:patient"},onClickBack:function(){o().request("history","go:latestList")},onClickPatient:function(){o().trigger("event-router","patient:dashboard",this.patient.id)},templateContext:function(){return{hasLatestList:o().request("history","has:latestList"),firstName:this.patient.get("first_name"),lastName:this.patient.get("last_name")}}}),Zi=h.View.extend({className:"patient-flow__header",modelEvents:{editing:"onEditing",change:"render","change:_progress":"onChangeFlowProgress"},onEditing:function(e){this.$el.toggleClass("is-selected",e)},template:Ri(),regions:{state:"[data-state-region]",owner:"[data-owner-region]"},triggers:{click:"edit"},ui:{progress:".js-progress"},onRender:function(){this.showState(),this.showOwner()},showState:function(){var e=this,t=new We({flow:this.model,stateId:this.model.get("_state"),isCompact:!0});this.listenTo(t,"change:state",(function(t){e.model.saveState(t)})),this.showChildView("state",t)},showOwner:function(){var e=this,t=this.model.isDone(),n=new I({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:owner",(function(t){e.model.saveOwner(t)})),this.showChildView("owner",n)},onChangeFlowProgress:function(){var e=this.model.get("_progress");this.ui.progress.attr({value:e.complete,max:e.total})}}),Hi=h.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="patient-flow__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"patient"))&&o(l,"flowViews"))&&o(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Wi=h.View.extend({className:"table-list__item",modelEvents:{change:"render",editing:"onEditing"},initialize:function(){this.flow=this.model.getFlow(),this.listenTo(this.flow,{"change:_state":this.render})},template:Li(),templateContext:function(){return{hasForm:this.model.getForm()}},tagName:"tr",regions:{state:"[data-state-region]",owner:"[data-owner-region]",dueDay:"[data-due-day-region]",dueTime:"[data-due-time-region]",form:"[data-form-region]"},triggers:{click:"click"},onClick:function(){o().trigger("event-router","flow:action",this.model.get("_flow"),this.model.id)},onEditing:function(e){this.$el.toggleClass("is-selected",e)},onRender:function(){this.showState(),this.showOwner(),this.showDueDay(),this.showDueTime(),this.showForm()},showState:function(){var e=this,t=this.flow.isDone(),n=new T({stateId:this.model.get("_state"),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:state",(function(t){e.model.saveState(t)})),this.showChildView("state",n)},showOwner:function(){var e=this,t=this.model.isDone()||this.flow.isDone(),n=new I({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:owner",(function(t){e.model.saveOwner(t)})),this.showChildView("owner",n)},showDueDay:function(){var e=this,t=this.model.isDone()||this.flow.isDone(),n=new B({date:this.model.get("due_date"),isCompact:!0,state:{isDisabled:t},isOverdue:this.model.isOverdue()});this.listenTo(n,"change:due",(function(t){e.model.saveDueDate(t)})),this.showChildView("dueDay",n)},showDueTime:function(){var e=this,t=this.model.isDone()||this.flow.isDone()||!this.model.get("due_date"),n=new z({time:this.model.get("due_time"),isCompact:!0,state:{isDisabled:t},isOverdue:this.model.isOverdue()});this.listenTo(n,"change:time",(function(t){e.model.saveDueTime(t)})),this.showChildView("dueTime",n)},showForm:function(){this.model.getForm()&&this.showChildView("form",new ne({model:this.model}))}}),Yi=h.CollectionView.extend({className:"table-list patient-flow__list",tagName:"table",childView:Wi,emptyView:Hi,viewComparator:function(e){return e.model.get("sequence")}}),Ui=h.View.extend({className:"patient-flow__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="patient-flow__layout">\n      <div data-context-trail-region></div>\n      <div data-header-region></div>\n      <div data-action-list-region></div>\n    </div>\n    <div class="patient-flow__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},header:"[data-header-region]",sidebar:"[data-sidebar-region]",actionList:{el:"[data-action-list-region]",regionClass:y.Z,replaceElement:!0}}});function $i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Qi=Ni.extend({routerAppName:"FlowApp",childApps:{action:Fi,patient:ai},eventRoutes:{"flow:action":"showActionSidebar"},onBeforeStart:function(){this.showView(new Ui)},beforeStart:function(e){var t=e.flowId;return[o().request("entities","fetch:flows:model",t),o().request("entities","fetch:actions:collection:byFlow",t)]},onFail:function(){o().trigger("event-router","notFound"),this.stop()},onStart:function(e,t,n){var a=e.currentRoute,i=$i(t,1)[0],l=$i(n,1)[0];this.flow=i,this.actions=l,this.showChildView("contextTrail",new Bi({model:this.flow})),this.showHeader(),this.showActionList(),this.showSidebar(),this.listenTo(this.actions,{"change:_state":this.onActionChangeState,destroy:this.onActionDestroy}),this.listenTo(this.flow,"change:_owner",this.onFlowChangeOwner),this.startRoute(a)},onActionChangeState:function(e){var t=this.flow.get("_progress"),n=t.complete,a=t.total,i=e.isDone();("done"===o().request("entities","states:model",e.previous("_state")).get("status")||i)&&this.flow.set({_progress:{complete:n+(i?1:-1),total:a}})},onActionDestroy:function(e){var t=this.flow.get("_progress"),n=t.complete,a=t.total,i=e.isDone();this.flow.set({_progress:{complete:n-(i?1:0),total:a-1}})},onFlowChangeOwner:function(e,t){if("roles"!==t.type){var n=e.getOwner().getRole();this.actions.each((function(e){e.isDone()||e.getOwner()!==n||e.set({_owner:t})}))}},showHeader:function(){var e=new Zi({model:this.flow});this.listenTo(e,{edit:this.onEditFlow}),this.showChildView("header",e)},showActionList:function(){this.showChildView("actionList",new Yi({collection:this.actions}))},showSidebar:function(){this.startChildApp("patient",{region:this.getRegion("sidebar"),patient:this.flow.getPatient()})},showActionSidebar:function(e,t){var n=this.getChildApp("action");this.listenToOnce(n,{start:function(e,t){t.trigger("editing",!0)}}),this.startChildApp("action",{actionId:t})},onEditFlow:function(){o().request("sidebar","start","flow",{flow:this.flow})}}),Xi=(n(6987),f.ZP.patients.patient.dashboard.addWorkflowViews),Ki=x.Z.extend({popWidth:248,className:"picklist add-workflow__picklist",headingText:Xi.addWorkflowOptlist.headingText,isSelectlist:!0,placeholderText:Xi.addWorkflowOptlist.placeholderText,itemClassName:"picklist__item--icon",itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"fa")||t&&c(t,"fa")||s).call(o,null!=t?c(t,"iconType"):t,null!=t?c(t,"icon"):t,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:20}}}))+" "+r("function"==typeof(l=null!=(l=c(n,"text")||(null!=t?c(t,"text"):t))?l:s)?l.call(o,{name:"text",hash:{},data:i,loc:{start:{line:1,column:21},end:{line:1,column:31}}}):l)},useData:!0}),itemTemplateContext:function(){var e="program-actions"===this.model.get("type");return{icon:e?"file-alt":"folder",iconType:e?"far":"fas"}}}),Ji=h.View.extend({className:"button-primary",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||s).call(o,"plus-circle",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+r(e.lambda((l=(l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"patient"))&&c(l,"dashboard"))&&c(l,"addWorkflowViews"))&&c(l,"addButtonView"))&&c(l,"label"),t))+r((c(n,"far")||t&&c(t,"far")||s).call(o,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:96},end:{line:1,column:116}}}))},useData:!0}),triggers:{click:"click"},onClick:function(){new Ki({ui:this.$el,uiView:this,lists:this.getOption("lists"),onNew:this.getOption("onNew")}).show()}});function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var tl={"program-actions":"add:programAction","program-flows":"add:programFlow",new:"add:newAction"},nl=s.Z.extend({beforeStart:function(){return[o().request("entities","fetch:programs:collection"),o().request("entities","fetch:programActions:collection"),o().request("entities","fetch:programFlows:collection")]},onStart:function(e,t){var n,a,i=(n=t,a=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return n}}(n,a)||function(e,t){if(e){if("string"==typeof e)return el(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?el(e,t):void 0}}(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];i.comparator="name",i.reset(i.filter({published:!0})),this.showView(new Ji({lists:this.getLists(i)}))},getLists:function(e){var t=this.getProgramsOpts(e),n={type:"program-actions",text:Xi.newActionText,onSelect:(0,i.bind)(this.triggerMethod,this,tl.new)};return t.unshift({collection:new(c().Collection)([n]),itemClassName:"add-workflow__add-new"}),t},getProgramsOpts:function(e){var t=this;return e.map((function(e){var n=e.get("name"),a=e.getPublished(),l={type:"program-actions",text:Xi.noResultsText};if(!a.length)return{itemClassName:"picklist--no-results add-workflow__no-results",headingText:n,collection:new(c().Collection)([l]),getItemSearchText:i.noop};var o=t.getProgramItemsOpts(a);return{headingText:n,collection:new(c().Collection)(o)}}))},getProgramItemsOpts:function(e){var t=this;return e.map((function(e){return{text:e.get("name"),type:e.type,onSelect:(0,i.bind)(t.triggerMethod,t,tl[e.type],e)}}))}}),al=n(947),il=n.n(al),ll=n(7405),ol=n.n(ll),sl=n(1412),rl=n.n(sl),cl=h.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="patient__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"patient"))&&o(l,"dashboard"))&&o(l,"dashboardViews"))&&o(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),ul=h.Behavior.extend({modelEvents:{editing:"onEditing",change:"onChange"},onChange:function(){this.view.render()},onEditing:function(e){this.$el.toggleClass("is-selected",e)},onInitialize:function(){this.view.model.isNew()&&this.$el.addClass("is-selected")}}),dl=h.Behavior.extend({modelEvents:{"change:_state":"onChangeState"},onChangeState:function(){var e=this;this.view.model.isDone()?(0,qa.Z)({targets:this.el,delay:300,duration:500,opacity:[1,0],easing:"easeOutQuad",complete:function(){e.view.triggerMethod("change:visible")}}):(this.$el.css({opacity:1}),this.view.triggerMethod("change:visible"))}}),ml=h.View.extend({className:"table-list__item",tagName:"tr",behaviors:[ul,dl],regions:{state:"[data-state-region]",owner:"[data-owner-region]",dueDay:"[data-due-day-region]",dueTime:"[data-due-time-region]",form:"[data-form-region]"},template:il(),triggers:{click:"click"},onClick:function(){o().trigger("event-router","patient:action",this.model.get("_patient"),this.model.id)},onRender:function(){this.showState(),this.showOwner(),this.showDueDay(),this.showDueTime(),this.showForm()},showState:function(){var e=this,t=this.model.isNew(),n=new T({stateId:this.model.get("_state"),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:state",(function(t){e.model.saveState(t)})),this.showChildView("state",n)},showOwner:function(){var e=this,t=this.model.isNew(),n=new I({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:owner",(function(t){e.model.saveOwner(t)})),this.showChildView("owner",n)},showDueDay:function(){var e=this,t=this.model.isNew(),n=new B({date:this.model.get("due_date"),isCompact:!0,state:{isDisabled:t},isOverdue:this.model.isOverdue()});this.listenTo(n,"change:due",(function(t){e.model.saveDueDate(t)})),this.showChildView("dueDay",n)},showDueTime:function(){var e=this,t=this.model.isNew()||!this.model.get("due_date"),n=new z({time:this.model.get("due_time"),isCompact:!0,state:{isDisabled:t},isOverdue:this.model.isOverdue()});this.listenTo(n,"change:time",(function(t){e.model.saveDueTime(t)})),this.showChildView("dueTime",n)},showForm:function(){this.model.getForm()&&this.showChildView("form",new ne({model:this.model}))}}),pl=h.View.extend({className:"table-list__item",tagName:"tr",behaviors:[ul],regions:{owner:"[data-owner-region]"},template:ol(),templateContext:function(){return{stateOptions:this.model.getState().get("options")}},triggers:{click:"click"},onClick:function(){o().trigger("event-router","flow",this.model.id)},onRender:function(){this.showOwner()},showOwner:function(){var e=this,t=this.model.isNew(),n=new I({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:owner",(function(t){e.model.saveOwner(t)})),this.showChildView("owner",n)}}),hl=h.CollectionView.extend({childViewEvents:{"change:visible":"filter"},className:"table-list patient__list",tagName:"table",childView:function(e){return"flows"===e.type?pl:ml},emptyView:cl,viewComparator:function(e,t){return(0,be.XQ)("desc",e.model.get("updated_at"),t.model.get("updated_at"))},viewFilter:function(e){return!e.model.isDone()}}),fl=h.View.extend({className:"flex-region patient__content",regions:{content:{el:"[data-content-region]",regionClass:y.Z,replaceElement:!0},addWorkflow:"[data-add-workflow-region]"},ui:{loading:".js-loading"},template:rl(),triggers:{"click .js-data-events":"click:dataEvents"},onClickDataEvents:function(){o().trigger("event-router","patient:dataEvents",this.model.id)},onRender:function(){(0,qa.Z)({targets:this.ui.loading[0],opacity:.5,loop:!0,easing:"easeInOutSine",duration:400,direction:"alternate"})}});function gl(e){return function(e){if(Array.isArray(e))return bl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||vl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return n}}(e,t)||vl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vl(e,t){if(e){if("string"==typeof e)return bl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bl(e,t):void 0}}function bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var yl=s.Z.extend({childApps:{addWorkflow:nl},onBeforeStart:function(e){var t=e.patient;this.patient=t,this.showView(new fl({model:t})),this.getRegion("content").startPreloader()},beforeStart:function(e){var t=e.patient,n={status:"queued,started"};return[o().request("entities","fetch:actions:collection:byPatient",{patientId:t.id,filter:n}),o().request("entities","fetch:flows:collection:byPatient",{patientId:t.id,filter:n})]},onStart:function(e,t,n){var a=e.patient,i=wl(t,1)[0],l=wl(n,1)[0];this.collection=new(c().Collection)([].concat(gl(i.models),gl(l.models))),this.showChildView("content",new hl({collection:this.collection}));var o=this.startChildApp("addWorkflow",{region:this.getRegion("addWorkflow"),patient:a});this.listenTo(o,{"add:newAction":this.onAddNewAction,"add:programAction":this.onAddProgramAction,"add:programFlow":this.onAddProgramFlow})},onAddNewAction:function(){o().trigger("event-router","patient:action:new",this.patient.id)},onAddProgramAction:function(e){var t=this,n=e.getAction(this.patient.id);n.saveAll().done((function(){t.collection.unshift(n),o().trigger("event-router","patient:action",t.patient.id,n.id)}))},onAddProgramFlow:function(e){var t=e.getFlow(this.patient.id);t.saveAll().done((function(){o().trigger("event-router","flow",t.id)}))},onEditAction:function(e){e.isNew()?this.collection.unshift(e):e.trigger("editing",!0)}}),_l=n(3817),xl=n.n(_l),kl=n(3874),Cl=n.n(kl);function Ol(e){return(Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Tl=h.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="patient__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"patient"))&&o(l,"dataEvents"))&&o(l,"dataEventsViews"))&&o(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Sl=h.Behavior.extend({modelEvents:{editing:"onEditing",change:"onChange"},onChange:function(){this.view.render()},onEditing:function(e){this.$el.toggleClass("is-selected",e)}}),Dl=h.Behavior.extend({modelEvents:{"change:_state":"onChangeState"},onChangeState:function(){var e=this;this.view.model.isDone()?(this.$el.css({opacity:1}),this.view.triggerMethod("change:visible")):(0,qa.Z)({targets:this.el,delay:300,duration:500,opacity:[1,0],easing:"easeOutQuad",complete:function(){e.view.triggerMethod("change:visible")}})}}),Pl=h.View.extend({className:"table-list__item",tagName:"tr",behaviors:[Sl,Dl],regions:{state:"[data-state-region]",owner:"[data-owner-region]",dueDay:"[data-due-day-region]",dueTime:"[data-due-time-region]",form:"[data-form-region]"},template:xl(),triggers:{click:"click"},onClick:function(){o().trigger("event-router","patient:action",this.model.get("_patient"),this.model.id)},onRender:function(){this.showState(),this.showOwner(),this.showDueDay(),this.showDueTime(),this.showForm()},showState:function(){var e=this,t=new T({stateId:this.model.get("_state"),isCompact:!0});this.listenTo(t,"change:state",(function(t){e.model.saveState(t)})),this.showChildView("state",t)},showOwner:function(){var e=new I({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:!0}});this.showChildView("owner",e)},showDueDay:function(){var e=new B({date:this.model.get("due_date"),isCompact:!0,state:{isDisabled:!0},isOverdue:this.model.isOverdue()});this.showChildView("dueDay",e)},showDueTime:function(){var e=new z({time:this.model.get("due_time"),isCompact:!0,state:{isDisabled:!0},isOverdue:this.model.isOverdue()});this.showChildView("dueTime",e)},showForm:function(){this.model.getForm()&&this.showChildView("form",new ne({model:this.model}))}}),Vl=h.View.extend({className:"table-list__item",tagName:"tr",behaviors:[Sl,Dl],regions:{state:"[data-state-region]",owner:"[data-owner-region]"},template:Cl(),triggers:{click:"click"},onClick:function(){o().trigger("event-router","flow",this.model.id)},onRender:function(){this.showState(),this.showOwner()},showState:function(){var e=this,t=new T({stateId:this.model.get("_state"),isCompact:!0});this.listenTo(t,"change:state",(function(t){e.model.saveState(t)})),this.showChildView("state",t)},showOwner:function(){var e=new I({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:!0}});this.showChildView("owner",e)}}),Ml=h.View.extend({className:"table-list__item",tagName:"tr",behaviors:[Sl],template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-list__cell">\n      <span class="patient__event-icon">'+c((d(n,"far")||t&&d(t,"far")||r).call(s,"paper-plane",{name:"far",hash:{},data:i,loc:{start:{line:3,column:40},end:{line:3,column:61}}}))+"</span>"+c(Ol(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:3,column:68},end:{line:3,column:93}}}):o)+'<span class="patient__event-name">'+c(e.lambda((l=(l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"patient"))&&d(l,"dataEvents"))&&d(l,"dataEventsViews"))&&d(l,"patientEventItemView"))&&d(l,"checkInCompleted"),t))+'</span>\n    </td>\n    <td class="table-list__cell patient__list-meta">\n      <span class="patient__event-ts">'+c((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||r).call(s,null!=t?d(t,"date"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:38},end:{line:7,column:75}}}))+"</span>"+c(Ol(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:82},end:{line:7,column:107}}}):o)+"</td>\n  "},useData:!0}),triggers:{click:"click"},onClick:function(){o().trigger("event-router","checkin",this.model.get("_patient"),this.model.get("checkin_id"))}}),El=h.CollectionView.extend({childViewEvents:{"change:visible":"filter"},className:"table-list patient__list",tagName:"table",childView:function(e){return"PatientCheckInCompleted"===e.get("event_type")?Ml:"flows"===e.type?Vl:Pl},emptyView:Tl,viewComparator:function(e,t){var n=e.model,a=t.model,i=n.get("updated_at")||n.get("date"),l=a.get("updated_at")||a.get("date");return-i.localeCompare(l)},viewFilter:function(e){var t=e.model;return"patient-events"===t.type||t.isDone()}}),jl=h.View.extend({className:"flex-region patient__content",regions:{content:{el:"[data-content-region]",regionClass:y.Z,replaceElement:!0}},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div>\n      <button class="patient__tab js-dashboard">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"dataEvents"))&&r(l,"dataEventsViews"))&&r(l,"dashboardBtn"),t))+'</button>\n      <span class="patient__tab--selected">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"dataEvents"))&&r(l,"dataEventsViews"))&&r(l,"dataEventsBtn"),t))+"</span>\n    </div>\n    <div data-content-region></div>\n  "},useData:!0}),triggers:{"click .js-dashboard":"click:dashboard"},onClickDashboard:function(){o().trigger("event-router","patient:dashboard",this.model.id)}});function Al(e){return function(e){if(Array.isArray(e))return Il(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Fl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return n}}(e,t)||Fl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fl(e,t){if(e){if("string"==typeof e)return Il(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Il(e,t):void 0}}function Il(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Rl=s.Z.extend({onBeforeStart:function(e){var t=e.patient;this.showView(new jl({model:t})),this.getRegion("content").startPreloader()},beforeStart:function(e){var t=e.patient,n={status:"done"};return[o().request("entities","fetch:actions:collection:byPatient",{patientId:t.id,filter:n}),o().request("entities","fetch:flows:collection:byPatient",{patientId:t.id,filter:n}),o().request("entities","fetch:patientEvents:collection",{patientId:t.id,filter:{type:"PatientCheckInCompleted"}})]},onStart:function(e,t,n,a){e.patient;var i=Nl(t,1)[0],l=Nl(n,1)[0],o=Nl(a,1)[0];this.collection=new(c().Collection)([].concat(Al(i.models),Al(l.models),Al(o.models))),this.showChildView("content",new El({collection:this.collection}))},onEditAction:function(e){e.trigger("editing",!0)}});function Gl(e){return(Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ll=h.View.extend({className:"patient__context-trail",template:p().template({1:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-back patient__context-link">\n        '+r((c(n,"fas")||t&&c(t,"fas")||s).call(o,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:30}}}))+r(e.lambda((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"patient"))&&c(l,"patientViews"))&&c(l,"contextBackBtn"),t))+"\n      </a>\n      "+r((c(n,"fas")||t&&c(t,"fas")||s).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:29}}}))+"\n    "},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=d(n,"if").call(s,null!=t?d(t,"hasLatestList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:7,column:11}}}))?l:"")+u(Gl(o=null!=(o=d(n,"first_name")||(null!=t?d(t,"first_name"):t))?o:r)===c?o.call(s,{name:"first_name",hash:{},data:i,loc:{start:{line:7,column:11},end:{line:7,column:27}}}):o)+" "+u(Gl(o=null!=(o=d(n,"last_name")||(null!=t?d(t,"last_name"):t))?o:r)===c?o.call(s,{name:"last_name",hash:{},data:i,loc:{start:{line:7,column:28},end:{line:7,column:43}}}):o)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back"},onClickBack:function(){o().request("history","go:latestList")},templateContext:function(){return{hasLatestList:o().request("history","has:latestList")}}}),ql=h.View.extend({className:"patient__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="patient__layout">\n        <div data-context-trail-region></div>\n        <div data-content-region></div>\n    </div>\n    <div class="patient__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},sidebar:"[data-sidebar-region]",content:{el:"[data-content-region]",regionClass:y.Z,replaceElement:!0}},onRender:function(){this.showChildView("contextTrail",new Ll({model:this.model}))}});function Bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Zl=Ni.extend({eventRoutes:function(){return{"patient:dashboard":(0,i.partial)(this.startCurrent,"dashboard"),"patient:dataEvents":(0,i.partial)(this.startCurrent,"dataEvents"),"patient:action":this.startPatientAction,"patient:action:new":this.startPatientAction}},childApps:{dashboard:yl,dataEvents:Rl,action:Fi,patient:ai},currentAppOptions:function(){return{region:this.getRegion("content"),patient:this.getOption("patient")}},onBeforeStart:function(){this.getRegion().startPreloader()},beforeStart:function(e){var t=e.patientId;return[o().request("entities","fetch:patients:model",t),o().request("entities","fetch:patientFields:collection",t)]},onStart:function(e,t){var n,a,i=e.currentRoute,l=(n=t,a=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return n}}(n,a)||function(e,t){if(e){if("string"==typeof e)return Bl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bl(e,t):void 0}}(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];this.patient=l,this.setView(new ql({model:l})),this.showSidebar(),this.startRoute(i),this.showView()},startPatientAction:function(e,t){var n=this.getChildApp("action");this.listenToOnce(n,{start:function(e,t){this.editActionList(t)},fail:function(){this.startCurrent("dashboard")}}),this.startChildApp("action",{actionId:t,patientId:e})},startActionList:function(e){return e.isDone()?this.startCurrent("dataEvents"):this.startCurrent("dashboard")},editActionList:function(e){var t=this.getCurrent()||this.startActionList(e);t.isRunning()?t.triggerMethod("edit:action",e):this.listenToOnce(t,"start",(function(){t.triggerMethod("edit:action",e)}))},showSidebar:function(){this.startChildApp("patient",{region:this.getRegion("sidebar"),patient:this.patient})}}),Hl=n(7529),Wl=n.n(Hl);function Yl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(7985);var Ul=c().Model.extend({defaults:function(){return{actionsSortId:"sortCreatedDesc",flowsSortId:"sortCreatedDesc",actionsDateFilters:{dateType:"created_at",selectedDate:null,selectedMonth:null,relativeDate:null},flowsDateFilters:{dateType:"created_at",selectedDate:null,selectedMonth:null,relativeDate:null},filters:{groupId:null,clinicianId:this.currentClinician.id,roleId:this.currentClinician.getRole().id},selectedActions:{},selectedFlows:{},searchQuery:"",type:"flows"}},preinitialize:function(){this.currentClinician=o().request("bootstrap","currentUser"),this.groups=this.currentClinician.getGroups()},initialize:function(){this.on("change",this.onChange)},onChange:function(){Wl().set("".concat(this.id,"_").concat(this.currentClinician.id),(0,i.omit)(this.attributes,"searchQuery"))},setDateFilters:function(e){return this.set("".concat(this.getType(),"DateFilters"),(0,i.clone)(e))},getDateFilters:function(){return(0,i.clone)(this.get("".concat(this.getType(),"DateFilters")))},getFilters:function(){return(0,i.clone)(this.get("filters"))},getType:function(){return this.get("type")},isFlowType:function(){return"flows"===this.getType()},getSort:function(){return this.get("".concat(this.getType(),"SortId"))},setSort:function(e){this.set("".concat(this.getType(),"SortId"),e)},formatDateRange:function(e,t,n){return"".concat(d()(e).startOf(t).format(n),",").concat(d()(e).endOf(t).format(n))},getEntityDateFilter:function(){var e=this.getDateFilters(),t=e.dateType,n=e.selectedDate,a=e.selectedMonth,i=e.relativeDate,l="due_date"===t?"YYYY-MM-DD":"";if(n)return Yl({},t,this.formatDateRange(n,"day",l));if(a)return Yl({},t,this.formatDateRange(a,"month",l));if("today"===i)return Yl({},t,this.formatDateRange(d()(),"day",l));if("yesterday"===i){var o=d()().subtract(1,"days");return Yl({},t,this.formatDateRange(o,"day",l))}return Yl({},t,this.formatDateRange(d()(),"month",l))},getEntityFilter:function(){var e=this.getFilters(),t=e.groupId,n=e.clinicianId,a=e.roleId,l=t||this.groups.pluck("id").join(","),o="queued,started",s=this.getEntityDateFilter(),r={"owned-by":(0,i.extend)({status:o,group:l},s),"shared-by":(0,i.extend)({status:o,group:l},s),"new-past-day":{created_at:d()().subtract(24,"hours").format(),status:o,group:l},"updated-past-three-days":{updated_at:d()().startOf("day").subtract(3,"days").format(),status:o,group:l},"done-last-thirty-days":{updated_at:d()().startOf("day").subtract(30,"days").format(),status:"done",group:l}};return"shared-by"!==this.id&&n?r[this.id].clinician=n:r[this.id].role=a,r[this.id]},getSelectedList:function(){return this.isFlowType()?this.get("selectedFlows"):this.get("selectedActions")},toggleSelected:function(e,t){var n=this.isFlowType()?"selectedFlows":"selectedActions",a=(0,i.clone)(this.get(n));this.set(n,(0,i.extend)(a,Yl({},e.id,t)))},isSelected:function(e){return this.getSelectedList()[e.id]},getSelected:function(e){var t=this.getSelectedList(),n=(0,i.reduce)((0,i.keys)(t),(function(n,a){return t[a]&&e.get(a)&&n.push({id:a}),n}),[]);return o().request("entities","".concat(this.getType(),":collection"),n)},clearSelected:function(){var e=this.isFlowType()?"selectedFlows":"selectedActions";this.set(e,{}),this.trigger("select:none")},selectAll:function(e){var t=this.isFlowType()?"selectedFlows":"selectedActions",n=e.reduce((function(e,t){return e[t.id]=!0,e}),{});this.set(t,n),this.trigger("select:all")}}),$l=h.View.extend({className:"worklist-list__filters",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="worklist-list__filter" data-group-filter-region></div>\n    <div class="worklist-list__filter" data-owner-filter-region></div>\n  '},useData:!0}),regions:{group:"[data-group-filter-region]",owner:"[data-owner-filter-region]"}}),zl=k.Z.extend({viewOptions:{className:"button-filter",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r("function"==typeof(l=null!=(l=c(n,"name")||(null!=t?c(t,"name"):t))?l:s)?l.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:10}}}):l)+r((c(n,"far")||t&&c(t,"far")||s).call(o,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:10},end:{line:1,column:30}}}))},useData:!0})},picklistOptions:{attr:"name"}}),Ql=s.Z.extend({onStart:function(e){var t=e.shouldShowClinician,n=e.shouldShowRole;this.shouldShowClinician=t,this.shouldShowRole=n,this.currentClinician=o().request("bootstrap","currentUser"),this.groups=this.currentClinician.getGroups(),this.showView(new $l),this.showFilters()},showFilters:function(){this.showGroupsFilterView(),this.showOwnerFilterView()},showGroupsFilterView:function(){var e=this;if(!(this.groups.length<2)){var t=this._getGroups(),n=t.get(this.getState("groupId"))||t.at(0),a=new zl({collection:t,state:{selected:n}});this.listenTo(a.getState(),"change:selected",(function(t,n){var a=n.id;e.setState("groupId",a)})),this.showChildView("group",a)}},showOwnerFilterView:function(){var e=this,t=this.shouldShowClinician&&this.getState("clinicianId")?o().request("entities","clinicians:model",this.getState("clinicianId")):o().request("entities","roles:model",this.getState("roleId")),n=new I({owner:t,groups:this.shouldShowClinician?this.groups:null,isFilter:!0,headingText:f.ZP.patients.worklist.filtersApp.ownerFilterHeadingText,hasRoles:this.shouldShowRole,hasClinicians:this.shouldShowClinician});this.listenTo(n,"change:owner",(function(t){var n=t.id;"roles"===t.type?e.setState({roleId:n,clinicianId:null}):e.setState({clinicianId:n,roleId:null})})),this.showChildView("owner",n)},_getGroups:function(){var e=this.groups.clone();return e.unshift({id:null,name:f.ZP.patients.worklist.filtersApp.allGroupsName}),e}}),Xl=n(9584),Kl=n.n(Xl),Jl=n(330),eo=n.n(Jl),to=f.ZP.patients.shared.bulkEdit.bulkEditViews;function no(e,t){if(!e)return!1;var n=d()("".concat(e," ").concat(t));return n.isBefore(d()(),"day")||n.isBefore(d()(),"minute")}var ao=T.extend({onPicklistSelect:function(e){var t=e.model;"done"===t.get("status")&&this.getOption("flows")?this.shouldSelectDone(t):this.setSelectedStatus(t)},shouldSelectDone:function(e){var t=this,n=this.getOption("flows");if((0,i.some)(n.invoke("isAllDone"),(function(e){return!e}))){this.popRegion.empty();var a=o().request("modal","show:small",{bodyText:to.flowsStateComponent.doneModal.bodyText,headingText:to.flowsStateComponent.doneModal.headingText,submitText:to.flowsStateComponent.doneModal.submitText,buttonClass:"button--green",onSubmit:function(){t.setSelectedStatus(e),a.destroy()}})}else this.setSelectedStatus(e)},setSelectedStatus:function(e){this.setState("selected",e),this.popRegion.empty()}}),io=h.View.extend({template:p().template({1:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(o,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(o,"patients.shared.bulkEdit.bulkEditViews.bulkEditButtonView.editFlows",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:25},end:{line:4,column:104}}}),{name:"formatMessage",hash:{itemCount:null!=(l=null!=t?r(t,"items"):t)?r(l,"length"):l},data:i,loc:{start:{line:4,column:8},end:{line:4,column:129}}}))+"\n"},3:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(o,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(o,"patients.shared.bulkEdit.bulkEditViews.bulkEditButtonView.editActions",{name:"intlGet",hash:{},data:i,loc:{start:{line:6,column:25},end:{line:6,column:106}}}),{name:"formatMessage",hash:{itemCount:null!=(l=null!=t?r(t,"items"):t)?r(l,"length"):l},data:i,loc:{start:{line:6,column:8},end:{line:6,column:131}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n   <button class="button--blue js-bulk-edit">\n'+(null!=(l=o(n,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"isFlowList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:3,column:6},end:{line:7,column:13}}}))?l:"")+'    </button>\n    <span class="bulk-edit__cancel-button js-cancel">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"shared"))&&o(l,"bulkEdit"))&&o(l,"bulkEditViews"))&&o(l,"bulkEditButtonView"))&&o(l,"cancel"),t))+"</span>\n  "},useData:!0}),templateContext:function(){return{isFlowList:this.getOption("isFlowType")}},triggers:{"click .js-cancel":"click:cancel","click .js-bulk-edit":"click:edit"}}),lo=h.View.extend({template:p().template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div>\n          <button class="button--icon u-margin--r-8 js-menu">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"ellipsis-h",{name:"far",hash:{},data:i,loc:{start:{line:8,column:61},end:{line:8,column:81}}}))+"</button>\n        </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex">\n      <div class="flex-grow">\n      <h3 class="sidebar__heading">'+e.escapeExpression((r(n,"formatMessage")||t&&r(t,"formatMessage")||s).call(o,(r(n,"intlGet")||t&&r(t,"intlGet")||s).call(o,"patients.shared.bulkEdit.bulkEditViews.bulkEditActionsHeaderView.headingText",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:52},end:{line:4,column:140}}}),{name:"formatMessage",hash:{itemCount:null!=(l=null!=t?r(t,"items"):t)?r(l,"length"):l},data:i,loc:{start:{line:4,column:35},end:{line:4,column:165}}}))+"</h3>\n      </div>\n"+(null!=(l=r(n,"if").call(o,null!=t?r(t,"isDevelop"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:6,column:6},end:{line:10,column:13}}}))?l:"")+"    </div>\n  "},useData:!0}),templateContext:function(){return{isDevelop:!1}},triggers:{"click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu:function(){var e=this.collection.length,t=new(c().Collection)([{onSelect:(0,i.bind)(this.triggerMethod,this,"confirm:delete")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:to.bulkEditActionsHeaderView.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="sidebar__delete-icon">'+s((r(n,"far")||t&&r(t,"far")||o).call(l,"trash-alt",{name:"far",hash:{},data:i,loc:{start:{line:1,column:35},end:{line:1,column:54}}}))+"</span>"+s((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkEditActionsHeaderView.menuOptions.delete",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:78},end:{line:1,column:173}}}),{name:"formatMessage",hash:{itemCount:null!=t?r(t,"itemCount"):t},data:i,loc:{start:{line:1,column:61},end:{line:1,column:195}}}))},useData:!0}),itemTemplateContext:{itemCount:e},lists:[{collection:t}],align:"right",popWidth:248}).show()},onConfirmDelete:function(){var e=this,t=o().request("modal","show:small",{bodyText:to.confirmDeleteActionsModal.bodyText,headingText:to.confirmDeleteActionsModal.headingText,submitText:to.confirmDeleteActionsModal.submitText,buttonClass:"button--red",onSubmit:function(){t.destroy(),e.triggerMethod("delete",e.collection)}})}}),oo=h.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex">\n      <div class="flex-grow">\n        <h3 class="sidebar__heading">'+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||s).call(o,(c(n,"intlGet")||t&&c(t,"intlGet")||s).call(o,"patients.shared.bulkEdit.bulkEditViews.bulkEditFlowsHeaderView.headingText",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:54},end:{line:4,column:140}}}),{name:"formatMessage",hash:{itemCount:null!=(l=null!=t?c(t,"items"):t)?c(l,"length"):l},data:i,loc:{start:{line:4,column:37},end:{line:4,column:165}}}))+'</h3>\n      </div>\n      <div>\n        <button class="button--icon u-margin--r-8 js-menu">'+r((c(n,"far")||t&&c(t,"far")||s).call(o,"ellipsis-h",{name:"far",hash:{},data:i,loc:{start:{line:7,column:59},end:{line:7,column:79}}}))+"</button>\n      </div>\n    </div>\n  "},useData:!0}),triggers:{"click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu:function(){var e=this.collection.length,t=new(c().Collection)([{onSelect:(0,i.bind)(this.triggerMethod,this,"confirm:delete")}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:to.bulkEditFlowsHeaderView.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="sidebar__delete-icon">'+s((r(n,"far")||t&&r(t,"far")||o).call(l,"trash-alt",{name:"far",hash:{},data:i,loc:{start:{line:1,column:35},end:{line:1,column:54}}}))+"</span>"+s((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkEditFlowsHeaderView.menuOptions.delete",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:78},end:{line:1,column:171}}}),{name:"formatMessage",hash:{itemCount:null!=t?r(t,"itemCount"):t},data:i,loc:{start:{line:1,column:61},end:{line:1,column:193}}}))},useData:!0}),itemTemplateContext:{itemCount:e},lists:[{collection:t}],align:"right",popWidth:248}).show()},onConfirmDelete:function(){var e=this,t=o().request("modal","show:small",{bodyText:to.confirmDeleteFlowsModal.bodyText,headingText:to.confirmDeleteFlowsModal.headingText,submitText:to.confirmDeleteFlowsModal.submitText,buttonClass:"button--red",onSubmit:function(){t.destroy(),e.triggerMethod("delete",e.collection)}})}}),so=h.View.extend({modelEvents:{"change:stateMulti":"showState","change:ownerMulti":"showOwner","change:dateMulti":"showDueDateTime","change:date":"showDueDateTime","change:timeMulti":"showDueTime","change:durationMulti":"showDuration"},className:"bulk-edit__body",template:Kl(),regions:{state:"[data-state-region]",owner:"[data-owner-region]",dueDate:"[data-due-date-region]",dueTime:"[data-due-time-region]",duration:"[data-duration-region]"},onRender:function(){this.showState(),this.showOwner(),this.showDueDateTime(),this.showDuration()},getStateComponent:function(){return this.model.get("stateMulti")?new T({viewOptions:{className:"button-secondary w-100",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((s(n,"fas")||t&&s(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"dot-circle",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:20}}}))+'<span class="action--gray">'+o(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"bulkEdit"))&&s(l,"bulkEditViews"))&&s(l,"bulkStateDefaultText"),t))+"</span>"},useData:!0})}}):new T({stateId:this.model.get("stateId")})},getOwnerComponent:function(){var e=this.model.getGroups(),t=e.length?null:to.bulkOwnerInfoText;return this.model.get("ownerMulti")?new I({groups:e,viewOptions:{className:"button-secondary w-100",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"user-circle",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+'<span class="action--gray">'+o(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"bulkEdit"))&&s(l,"bulkEditViews"))&&s(l,"bulkOwnerDefaultText"),t))+"</span>"},useData:!0})},infoText:t}):new I({owner:this.model.get("owner"),groups:e,infoText:t})},getDueDateComponent:function(){if(this.model.get("dateMulti"))return new B({viewOptions:{tagName:"button",className:"button-secondary w-100 due-component",triggers:{click:"click"},template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"calendar-alt",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))+'<span class="action--gray">'+o(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"bulkEdit"))&&s(l,"bulkEditViews"))&&s(l,"bulkDueDateDefaultText"),t))+"</span>"},useData:!0})}});var e=no(this.model.get("date"));return new B({date:this.model.get("date"),isOverdue:e})},getDueTimeComponent:function(){if(this.model.get("timeMulti"))return new z({viewOptions:{attributes:{disabled:this.model.get("dateMulti")},className:"button-secondary time-component w-100",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"clock",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:15}}}))+' <span class="action--gray">'+o(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"bulkEdit"))&&s(l,"bulkEditViews"))&&s(l,"bulkDueTimeDefaultText"),t))+"</span>"},useData:!0})}});var e=this.model.get("time"),t=this.model.get("dateMulti")&&!e||!this.model.get("date"),n=no(this.model.get("date"),e);return new z({time:e,state:{isDisabled:t},isOverdue:n})},getDurationComponent:function(){return this.model.get("durationMulti")?new te({viewOptions:{className:"button-secondary w-100",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"stopwatch",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:19}}}))+'<span class="action--gray">'+o(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"bulkEdit"))&&s(l,"bulkEditViews"))&&s(l,"bulkDurationDefaultText"),t))+"</span>"},useData:!0})}}):new te({duration:this.model.get("duration")})},showState:function(){var e=this,t=this.getStateComponent();this.listenTo(t,"change:state",(function(t){e.model.setState(t)})),this.showChildView("state",t)},showOwner:function(){var e=this,t=this.getOwnerComponent();this.listenTo(t,"change:owner",(function(t){e.model.setOwner(t)})),this.showChildView("owner",t)},showDueDateTime:function(){this.showDueDate(),this.showDueTime()},showDueDate:function(){var e=this,t=this.getDueDateComponent();this.listenTo(t,"change:due",(function(t){e.model.setDueDate(t)})),this.showChildView("dueDate",t)},showDueTime:function(){var e=this,t=this.getDueTimeComponent();this.listenTo(t,"change:time",(function(t){e.model.setDueTime(t)})),this.showChildView("dueTime",t)},showDuration:function(){var e=this,t=this.getDurationComponent();this.listenTo(t,"change:duration",(function(t){e.model.setDuration(t)})),this.showChildView("duration",t)}}),ro=h.View.extend({modelEvents:{"change:stateMulti":"showState","change:ownerMulti":"showOwner"},className:"bulk-edit__body",template:eo(),regions:{state:"[data-state-region]",owner:"[data-owner-region]"},onRender:function(){this.showState(),this.showOwner()},getStateComponent:function(){return this.model.get("stateMulti")?new ao({flows:this.collection,viewOptions:{className:"button-secondary w-100",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((s(n,"fas")||t&&s(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"dot-circle",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:20}}}))+'<span class="action--gray">'+o(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"bulkEdit"))&&s(l,"bulkEditViews"))&&s(l,"bulkStateDefaultText"),t))+"</span>"},useData:!0})}}):new ao({flows:this.collection,stateId:this.model.get("stateId")})},getOwnerComponent:function(){var e=this.model.getGroups(),t=e.length?null:to.bulkOwnerInfoText;return this.model.get("ownerMulti")?new I({groups:e,viewOptions:{className:"button-secondary w-100",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"user-circle",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+'<span class="action--gray">'+o(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"bulkEdit"))&&s(l,"bulkEditViews"))&&s(l,"bulkOwnerDefaultText"),t))+"</span>"},useData:!0})},infoText:t}):new I({owner:this.model.get("owner"),groups:e,infoText:t})},showState:function(){var e=this,t=this.getStateComponent();this.listenTo(t,"change:state",(function(t){e.model.setState(t)})),this.showChildView("state",t)},showOwner:function(){var e=this,t=this.getOwnerComponent();this.listenTo(t,"change:owner",(function(t){e.model.setOwner(t)})),this.showChildView("owner",t)}}),co=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"formatMessage")||t&&s(t,"formatMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkEditFlowsSuccess",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:88}}}),{name:"formatMessage",hash:{itemCount:null!=t?s(t,"itemCount"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:110}}}))},useData:!0}),uo=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"formatMessage")||t&&s(t,"formatMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkEditActionsSuccess",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:90}}}),{name:"formatMessage",hash:{itemCount:null!=t?s(t,"itemCount"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:112}}}))},useData:!0}),mo=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"formatMessage")||t&&s(t,"formatMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkDeleteFlowsSuccess",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:90}}}),{name:"formatMessage",hash:{itemCount:null!=t?s(t,"itemCount"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:112}}}))},useData:!0}),po=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"formatMessage")||t&&s(t,"formatMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.shared.bulkEdit.bulkEditViews.bulkDeleteActionsSuccess",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:17},end:{line:1,column:92}}}),{name:"formatMessage",hash:{itemCount:null!=t?s(t,"itemCount"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:114}}}))},useData:!0}),ho=c().Model.extend({initialize:function(e){var t=e.collection,n=t.at(0);this.initBulkState(t,n),this.initBulkOwner(t,n),this.initBulkDueDate(t,n),this.initBulkDueTime(t,n),this.initBulkDuration(t,n)},initBulkState:function(e,t){var n=t.getState().id,a=e.some((function(e){return e.getState().id!==n}));this.set({stateMulti:a,stateId:a?null:n})},initBulkOwner:function(e,t){var n=t.getOwner(),a=e.some((function(e){return e.getOwner().id!==n.id}));this.set({ownerMulti:a,owner:a?null:n})},initBulkDueDate:function(e,t){var n=t.get("due_date"),a=e.some((function(e){return e.get("due_date")!==n}));this.set({dateMulti:a,date:a?null:n})},initBulkDueTime:function(e,t){var n=t.get("due_time"),a=e.some((function(e){return e.get("due_time")!==n}));this.set({timeMulti:a,time:a?null:n})},initBulkDuration:function(e,t){var n=t.get("duration"),a=e.some((function(e){return e.get("duration")!==n}));this.set({durationMulti:a,duration:a?null:n})},setState:function(e){return this.set({stateId:e.id,stateMulti:!1,stateChanged:!0})},setOwner:function(e){return this.set({owner:e,ownerMulti:!1,ownerChanged:!0})},setDueDate:function(e){return e?this.set({date:e.format("YYYY-MM-DD"),dateMulti:!1,dateChanged:!0}):this.set({date:null,time:null,dateMulti:!1,timeMulti:!1})},setDueTime:function(e){return this.set({time:e||null,timeMulti:!1,timeChanged:!0})},setDuration:function(e){return this.set({duration:e,durationMulti:!1,durationChanged:!0})},getGroups:function(){return this.get("collection").getPatients().getSharedGroups()},getData:function(){var e=this.attributes,t=e.stateChanged,n=e.stateId,a=e.ownerChanged,l=e.owner,o=e.dateChanged,s=e.date,r=e.timeChanged,c=e.time,u=e.durationChanged,d=e.duration,m={};return t&&(m._state=n),a&&(m._owner=(0,i.pick)(l,"id","type")),o&&(m.due_date=s),r&&(m.due_time=c),u&&(m.duration=d),m}}),fo=s.Z.extend({StateModel:ho,onStart:function(){var e=new lo({collection:this.getState("collection")}),t=new so({model:this.getState(),collection:this.getState("collection")});this.modal=o().request("modal","show:sidebar",{className:"modal--sidebar bulk-edit",headerView:e,bodyView:t,onSubmit:this.onSubmit.bind(this)}),this.listenTo(e,{delete:(0,i.partial)(this.triggerMethod,"delete")}),this.listenTo(this.modal,{destroy:this.stop})},onSubmit:function(){this.triggerMethod("save",this.getState().getData())},onStop:function(){this.modal.destroy()}}),go=c().Model.extend({initialize:function(e){var t=e.collection,n=t.at(0);this.initBulkState(t,n),this.initBulkOwner(t,n)},initBulkState:function(e,t){var n=t.getState().id,a=e.some((function(e){return e.getState().id!==n}));this.set({stateMulti:a,stateId:a?null:n})},initBulkOwner:function(e,t){var n=t.getOwner(),a=e.some((function(e){return e.getOwner().id!==n.id}));this.set({ownerMulti:a,owner:a?null:n})},setState:function(e){return this.set({stateId:e.id,stateMulti:!1,stateChanged:!0})},setOwner:function(e){return this.set({owner:e,ownerMulti:!1,ownerChanged:!0})},getGroups:function(){return this.get("collection").getPatients().getSharedGroups()},getData:function(){var e=this.attributes,t=e.stateChanged,n=e.stateId,a=e.ownerChanged,l=e.owner,o={};return t&&(o._state=n),a&&(o._owner=(0,i.pick)(l,"id","type")),o}}),wo=s.Z.extend({StateModel:go,onStart:function(){var e=new oo({collection:this.getState("collection")}),t=new ro({model:this.getState(),collection:this.getState("collection")});this.modal=o().request("modal","show:sidebar",{className:"modal--sidebar bulk-edit",headerView:e,bodyView:t,onSubmit:this.onSubmit.bind(this)}),this.listenTo(e,{delete:(0,i.partial)(this.triggerMethod,"delete")}),this.listenTo(this.modal,{destroy:this.stop})},onSubmit:function(){this.triggerMethod("save",this.getState().getData())},onStop:function(){this.modal.destroy()}}),vo=n(1961);function bo(e){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yo=h.View.extend({tagName:"span",className:"datepicker__filter-button",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"formatMessage")||t&&s(t,"formatMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.shared.components.dateFilterComponent.dateTypes",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:84}}}),{name:"formatMessage",hash:{type:null!=t?s(t,"id"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:95}}}))},useData:!0}),onRender:function(){this.$el.toggleClass("is-active",this.getOption("selected")===this.model.id)},triggers:{click:"click"}}),_o=h.CollectionView.extend({className:"datepicker__type-filter",childViewContainer:".js-types",childView:yo,template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <span class="datepicker__filter-label">'+s(e.lambda((l=(l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"shared"))&&r(l,"components"))&&r(l,"dateFilterComponent"))&&r(l,"dateFilterViews"))&&r(l,"filterTypeView"))&&r(l,"filterByDate"),t))+"</span>"+s("function"==typeof(o=null!=(o=r(n,"remove_whitespace")||(null!=t?r(t,"remove_whitespace"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:152},end:{line:2,column:177}}}):o)+'<span class="js-types"></span>\n  '},useData:!0}),childViewTriggers:{click:"click"},childViewOptions:function(){return{selected:this.model.get("dateType")}}}),xo=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"selectedDate"):t,"MM/DD/YYYY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:44}}}))+s((r(n,"far")||t&&r(t,"far")||o).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:44},end:{line:1,column:64}}}))},useData:!0}),ko=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((r(n,"formatDateTime")||t&&r(t,"formatDateTime")||o).call(l,null!=t?r(t,"selectedMonth"):t,"MMM YYYY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:43}}}))+s((r(n,"far")||t&&r(t,"far")||o).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:43},end:{line:1,column:63}}}))},useData:!0}),Co=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return s((r(n,"formatMessage")||t&&r(t,"formatMessage")||o).call(l,(r(n,"intlGet")||t&&r(t,"intlGet")||o).call(l,"patients.shared.components.dateFilterComponent.dateFilterViews.relativeTemplate.relative",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:116}}}),{name:"formatMessage",hash:{relativeTo:null!=t?r(t,"relativeDate"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:143}}}))+s((r(n,"far")||t&&r(t,"far")||o).call(l,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:143},end:{line:1,column:163}}}))},useData:!0}),Oo=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o(e.lambda((l=(l=(l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"patients"))&&s(l,"shared"))&&s(l,"components"))&&s(l,"dateFilterComponent"))&&s(l,"dateFilterViews"))&&s(l,"defaultTemplate"))&&s(l,"thisMonth"),t))+o((s(n,"far")||t&&s(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:100},end:{line:1,column:120}}}))},useData:!0}),To=h.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button-secondary--compact is-icon-only u-margin--r-8 js-prev">'+r((u(n,"far")||t&&u(t,"far")||s).call(o,"angle-left",{name:"far",hash:{},data:i,loc:{start:{line:2,column:81},end:{line:2,column:101}}}))+"</button>"+r(bo(l=null!=(l=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?l:s)===c?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:110},end:{line:2,column:135}}}):l)+'<button class="button-filter js-date">\n      '+r((u(n,"far")||t&&u(t,"far")||s).call(o,"calendar-alt",{name:"far",hash:{},data:i,loc:{start:{line:4,column:6},end:{line:4,column:28}}}))+r(bo(l=null!=(l=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?l:s)===c?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:28},end:{line:4,column:53}}}):l)+r((u(n,"formatMessage")||t&&u(t,"formatMessage")||s).call(o,(u(n,"intlGet")||t&&u(t,"intlGet")||s).call(o,"patients.shared.components.dateFilterComponent.dateTypes",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:90}}}),{name:"formatMessage",hash:{type:null!=t?u(t,"dateType"):t},data:i,loc:{start:{line:5,column:6},end:{line:5,column:107}}}))+r(bo(l=null!=(l=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?l:s)===c?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:5,column:107},end:{line:5,column:132}}}):l)+":\n      <span data-date-picker-label-region></span>\n    </button>"+r(bo(l=null!=(l=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?l:s)===c?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:13},end:{line:7,column:38}}}):l)+'<button class="button-secondary--compact is-icon-only u-margin--l-8 js-next">'+r((u(n,"far")||t&&u(t,"far")||s).call(o,"angle-right",{name:"far",hash:{},data:i,loc:{start:{line:8,column:81},end:{line:8,column:102}}}))+"</button>\n  "},useData:!0}),regions:{datepicker:{el:"[data-date-picker-label-region]",replaceElement:!0}},ui:{next:".js-next",prev:".js-prev",date:".js-date"},triggers:{"click @ui.prev":"click:prev","click @ui.next":"click:next","click @ui.date":"click:date"},getLabelTemplate:function(){return this.model.get("selectedDate")?xo:this.model.get("selectedMonth")?ko:this.model.get("relativeDate")?Co:Oo},onRender:function(){this.showChildView("datepicker",{tagName:"span",model:this.model,template:this.getLabelTemplate()}),this.getTooltips()},getTooltips:function(){var e=this.getTooltipMessages();new ye.Z({message:e.prevMessage,uiView:this,ui:this.ui.prev}),new ye.Z({message:e.nextMessage,uiView:this,ui:this.ui.next})},getTooltipMessages:function(){return this.model.get("selectedDate")?this._getTooltipMessage(this.model.dayjs("selectedDate"),"day","MM/DD/YYYY"):this.model.get("selectedMonth")?this._getTooltipMessage(this.model.dayjs("selectedMonth"),"month","MMM YYYY"):"today"===this.model.get("relativeDate")?this._getTooltipMessage(d()(),"day","MM/DD/YYYY"):"yesterday"===this.model.get("relativeDate")?this._getTooltipMessage(d()().subtract(1,"day"),"day","MM/DD/YYYY"):this._getTooltipMessage(d()(),"month","MMM YYYY")},_getTooltipMessage:function(e,t,n){return{prevMessage:d()(e).subtract(1,t).format(n),nextMessage:d()(e).add(1,t).format(n)}}}),So=h.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=e.lambda,r=e.escapeExpression,c=null!=t?t:e.nullContext||{},u=e.hooks.helperMissing,d="function",m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="datepicker__button js-yesterday">'+r(s((l=(l=(l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"shared"))&&m(l,"components"))&&m(l,"dateFilterComponent"))&&m(l,"dateFilterViews"))&&m(l,"actionViews"))&&m(l,"yesterday"),t))+"</button>"+r(bo(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:157},end:{line:2,column:182}}}):o)+'<button class="datepicker__button js-today">'+r(s((l=(l=(l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"shared"))&&m(l,"components"))&&m(l,"dateFilterComponent"))&&m(l,"dateFilterViews"))&&m(l,"actionViews"))&&m(l,"today"),t))+"</button>"+r(bo(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:3,column:149},end:{line:3,column:174}}}):o)+'<button class="datepicker__button js-current-month">'+r(s((l=(l=(l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"shared"))&&m(l,"components"))&&m(l,"dateFilterComponent"))&&m(l,"dateFilterViews"))&&m(l,"actionViews"))&&m(l,"month"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-yesterday":"click:yesterday","click .js-today":"click:today","click .js-current-month":"click:currentMonth"}}),Do=c().Model.extend({setRelativeDate:function(e,t){this.set({relativeDate:e,selectedDate:null,selectedMonth:null,dateType:t})},setMonth:function(e,t){this.set({relativeDate:null,selectedDate:null,selectedMonth:e,dateType:t||this.get("dateType")})},setDate:function(e,t){this.set({relativeDate:null,selectedDate:e,selectedMonth:null,dateType:t||this.get("dateType")})},incrementBackward:function(){if(this.dayjs("selectedDate"))this.setDate(this.dayjs("selectedDate").subtract(1,"day"));else if(this.dayjs("selectedMonth"))this.setMonth(this.dayjs("selectedMonth").subtract(1,"month").startOf("month"));else{var e=this.get("relativeDate");"today"!==e?"yesterday"!==e?this.setMonth(d()().subtract(1,"month").startOf("month")):this.setDate(d()().subtract(2,"days")):this.setDate(d()().subtract(1,"day"))}},incrementForward:function(){if(this.dayjs("selectedDate"))this.setDate(this.dayjs("selectedDate").add(1,"day"));else if(this.dayjs("selectedMonth"))this.setMonth(this.dayjs("selectedMonth").add(1,"month").startOf("month"));else{var e=this.get("relativeDate");"today"!==e?"yesterday"!==e?this.setMonth(d()().add(1,"month").startOf("month")):this.setDate(d()()):this.setDate(d()().add(1,"day"))}}}),Po=G.Z.extend({stateEvents:{change:"show","change:selectedDate":"onChangeStateSelectedDate","change:selectedMonth":"onChangeStateSelectedMonth","change:dateType":"onChangeDateType"},onBeforeShow:function(e,t){t.showChildView("header",this.getFilterTypeView()),t.showChildView("monthPicker",this.getMonthPickerView()),t.showChildView("actions",this.getActionsView()),t.showChildView("calendar",this.getCalendarView())},getFilterTypeView:function(){var e=new _o({model:this.getState(),collection:this.getOption("collection")});return this.listenTo(e,"click",this.onClickType),e},getActionsView:function(){var e=new So;return this.listenTo(e,{"click:yesterday":this.onClickYesterday,"click:today":this.onClickToday,"click:currentMonth":this.onClickCurrentMonth}),e},onChangeDateType:function(){this.getView().showChildView("header",this.getFilterTypeView())},onClickYesterday:function(){this.triggerMethod("select:yesterday",this.getState("dateType"))},onClickToday:function(){this.triggerMethod("select:today",this.getState("dateType"))},onClickCurrentMonth:function(){this.triggerMethod("select:currentMonth",this.getState("dateType"))},onClickType:function(e){var t=e.model;this.setState("dateType",t.id)},onSelectToday:i.noop}),Vo=vo.Z.extend({dateTypes:["create_at","updated_at","due_date"],StateModel:Do,stateEvents:{change:"show"},ViewClass:To,viewOptions:function(){return{model:this.getState()}},viewEvents:{"click:date":function(){this.showDatePicker(this.getState().pick("selectedDate","selectedMonth","dateType"))},"click:prev":function(){this.getState().incrementBackward()},"click:next":function(){this.getState().incrementForward()}},initialize:function(){this.dateTypes=new(c().Collection)(La(this.getOption("dateTypes"),"id"))},showDatePicker:function(e){var t=this,n=this.getState(),a=new Po({ui:this.getView().$el,uiView:this.getView(),state:e,canSelectMonth:!0,collection:this.dateTypes});this.listenTo(a,{"select:yesterday":function(){n.setRelativeDate("yesterday",e.dateType),a.destroy()},"select:today":function(){n.setRelativeDate("today",e.dateType),a.destroy()},"select:currentMonth":function(){n.setRelativeDate(null,e.dateType),a.destroy()},"change:selectedDate":function(t){n.setDate(t,e.dateType),a.destroy()},"change:selectedMonth":function(t){n.setMonth(t,e.dateType),a.destroy()}}),this.listenTo(a.getState(),"change:dateType",(function(e,n){t.showDatePicker({dateType:n})})),a.show()}}),Mo=p().template({1:function(e,t,n,a,i){return"disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <span class="list-search__search-icon">'+r((c(n,"far")||t&&c(t,"far")||s).call(o,"search",{name:"far",hash:{},data:i,loc:{start:{line:2,column:41},end:{line:2,column:57}}}))+'</span>\n  <input class="list-search__input input-primary--small js-input w-100" type="text" '+(null!=(l=c(n,"if").call(o,null!=t?c(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:84},end:{line:3,column:117}}}))?l:"")+' placeholder="'+r(e.lambda((l=(l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"shared"))&&c(l,"components"))&&c(l,"listSearch"))&&c(l,"listSearchViews"))&&c(l,"placeholder"),t))+'"/>\n  <span class="list-search__clear-icon js-clear is-hidden">'+r((c(n,"fas")||t&&c(t,"fas")||s).call(o,"times-circle",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:59},end:{line:4,column:81}}}))+"</span>\n"},useData:!0}),Eo=h.View.extend({behaviors:{InputWatcherBehavior:_.Z},className:"list-search__container",template:Mo,templateContext:function(){return{isDisabled:this.getOption("state").isDisabled,query:this.getOption("state").query}},ui:{input:".js-input",clear:".js-clear"},triggers:{"click @ui.clear":"clear"},onWatchChange:function(e){this.ui.clear.toggleClass("is-hidden",!e.length)},onClear:function(){this.ui.input.val("")},onRender:function(){this.$el.toggleClass("is-disabled",this.getOption("state").isDisabled)}}),jo=c().Model.extend({defaults:{query:""}}),Ao=vo.Z.extend({StateModel:jo,ViewClass:Eo,viewEvents:{"watch:change":"onViewWatchChange",clear:"onViewClear"},onViewClear:function(){this.setState("query","")},onViewWatchChange:function(e){this.setState("query",e)}}),No=n(9363),Fo=n(566),Io=n(9565),Ro=n.n(Io),Go=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"formatMessage")||t&&s(t,"formatMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.worklist.actionViews.actionListTooltips",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:76}}}),{name:"formatMessage",hash:{role:null!=t?s(t,"role"):t,title:null!=t?s(t,"worklistId"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:105}}}))},useData:!0}),Lo=h.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"worklist"))&&o(l,"actionViews"))&&o(l,"actionEmptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),qo=h.View.extend({className:function(){var e="table-list__item work-list__item";return this.getOption("state").isSelected(this.model)?"".concat(e," is-selected"):e},tagName:"tr",template:Ro(),regions:{state:"[data-state-region]",owner:"[data-owner-region]",dueDate:"[data-due-date-region]",dueTime:"[data-due-time-region]",form:"[data-form-region]"},templateContext:function(){return{flowName:this.flow&&this.flow.get("name"),patient:this.model.getPatient().attributes,isSelected:this.state.isSelected(this.model),owner:this.model.getOwner().get("name"),state:this.model.getState().get("name")}},initialize:function(e){var t=e.state;this.state=t,this.flow=this.model.getFlow()},modelEvents:{"change:due_date":"onChangeDueDateTime","change:due_time":"onChangeDueDateTime"},triggers:{click:"click","click .js-patient":"click:patient","click .js-select":"click:select","click .js-no-click":"prevent-row-click"},onClick:function(){this.flow?o().trigger("event-router","flow:action",this.flow.id,this.model.id):o().trigger("event-router","patient:action",this.model.get("_patient"),this.model.id)},onClickPatient:function(){o().trigger("event-router","patient:dashboard",this.model.get("_patient"))},onClickSelect:function(){var e=this.state.isSelected(this.model);this.$el.toggleClass("is-selected",!e),this.state.toggleSelected(this.model,!e),this.render()},onChangeDueDateTime:function(){this.showDueDate(),this.showDueTime()},onRender:function(){this.showState(),this.showOwner(),this.showDueDate(),this.showDueTime(),this.showForm()},showState:function(){var e=this,t=new T({stateId:this.model.get("_state"),isCompact:!0});this.listenTo(t,"change:state",(function(t){e.model.saveState(t)})),this.showChildView("state",t)},showOwner:function(){var e=this,t=this.model.isDone(),n=new I({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:owner",(function(t){e.model.saveOwner(t)})),this.showChildView("owner",n)},showDueDate:function(){var e=this,t=this.model.isDone(),n=new B({date:this.model.get("due_date"),isCompact:!0,state:{isDisabled:t},isOverdue:this.model.isOverdue()});this.listenTo(n,"change:due",(function(t){e.model.saveDueDate(t)})),this.showChildView("dueDate",n)},showDueTime:function(){var e=this,t=this.model.isDone()||!this.model.get("due_date"),n=new z({time:this.model.get("due_time"),isCompact:!0,state:{isDisabled:t},isOverdue:this.model.isOverdue()});this.listenTo(n,"change:time",(function(t){e.model.saveDueTime(t)})),this.showChildView("dueTime",n)},showForm:function(){this.model.getForm()&&this.showChildView("form",new ne({model:this.model}))}}),Bo=n(178),Zo=n.n(Bo),Ho=p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s(n,"formatMessage")||t&&s(t,"formatMessage")||o).call(l,(s(n,"intlGet")||t&&s(t,"intlGet")||o).call(l,"patients.worklist.flowViews.flowListTooltips",{name:"intlGet",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:72}}}),{name:"formatMessage",hash:{role:null!=t?s(t,"role"):t,title:null!=t?s(t,"worklistId"):t},data:i,loc:{start:{line:1,column:0},end:{line:1,column:101}}}))},useData:!0}),Wo=h.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"worklist"))&&o(l,"flowViews"))&&o(l,"flowEmptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Yo=h.View.extend({tagName:"span",className:"worklist-list__flow-status",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="action--'+s(e.lambda(null!=(l=null!=t?u(t,"stateOptions"):t)?u(l,"color"):l,t))+'">'+s((u(n,"fa")||t&&u(t,"fa")||c).call(r,null!=(l=null!=t?u(t,"stateOptions"):t)?u(l,"iconType"):l,null!=(l=null!=t?u(t,"stateOptions"):t)?u(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:1,column:47},end:{line:1,column:93}}}))+"</span>"+s("function"==typeof(o=null!=(o=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?o:c)?o.call(r,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:1,column:100},end:{line:1,column:125}}}):o)},useData:!0}),templateContext:function(){return{stateOptions:this.model.getState().get("options")}}}),Uo=h.View.extend({className:function(){var e="table-list__item work-list__item";return this.getOption("state").isSelected(this.model)?"".concat(e," is-selected"):e},tagName:"tr",template:Zo(),regions:{state:"[data-state-region]",owner:"[data-owner-region]"},templateContext:function(){return{patient:this.model.getPatient().attributes,isSelected:this.state.isSelected(this.model),owner:this.model.getOwner().get("name"),state:this.model.getState().get("name")}},triggers:{click:"click","click .js-patient":"click:patient","click .js-select":"click:select","click .js-no-click":"prevent-row-click"},initialize:function(e){var t=e.state;this.state=t},onClick:function(){o().trigger("event-router","flow",this.model.id)},onClickPatient:function(){o().trigger("event-router","patient:dashboard",this.model.get("_patient"))},onClickSelect:function(){var e=this.state.isSelected(this.model);this.$el.toggleClass("is-selected",!e),this.state.toggleSelected(this.model,!e),this.render()},onRender:function(){this.showState(),this.showOwner()},showState:function(){var e=this;if(this.model.isDone()){var t=new We({stateId:this.model.get("_state"),isCompact:!0});this.listenTo(t,"change:state",(function(t){e.model.saveState(t)})),this.showChildView("state",t)}else{var n=new Yo({model:this.model});this.showChildView("state",n)}},showOwner:function(){var e=this,t=this.model.isDone(),n=new I({owner:this.model.getOwner(),groups:this.model.getPatient().getGroups(),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:owner",(function(t){e.model.saveOwner(t)})),this.showChildView("owner",n)}}),$o=n(2855),zo=n.n($o),Qo=n(2016),Xo=n.n(Qo),Ko=f.ZP.patients.worklist.worklistViews,Jo=h.View.extend({className:"flex-region",template:zo(),regions:{dateFilter:"[data-date-filter-region]",filters:"[data-filters-region]",toggle:"[data-toggle-region]",sort:"[data-sort-region]",table:"[data-table-region]",list:{el:"[data-list-region]",regionClass:y.Z},selectAll:"[data-select-all-region]",title:"[data-title-region]",search:"[data-search-region]"},childViewEvents:{"update:listDom":"fixWidth"},triggers:{"click @ui.select":"click:select"},ui:{listHeader:".js-list-header",list:".js-list",select:".js-select"},initialize:function(){var e=o().channel("user-activity");this.listenTo(e,"window:resize",this.fixWidth)},fixWidth:function(){if(this.isRendered()){var e=this.ui.listHeader.width(),t=this.ui.list.contents().width(),n=parseInt(this.ui.list.css("paddingRight"),10),a=e-t;this.ui.list.css({paddingRight:"".concat(n-a,"px")})}}}),es=h.View.extend({tagName:"button",className:"button--checkbox",attributes:function(){if(this.getOption("isDisabled"))return{disabled:"disabled"}},triggers:{click:"click"},getTemplate:function(){return this.getOption("isSelectAll")?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"check-square",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0}):p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))},useData:!0})}}),ts=h.View.extend({template:p().template({1:function(e,t,n,a,i){return"button--blue"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="button-secondary '+(null!=(l=d(n,"unless").call(s,null!=t?d(t,"isFlowList"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:36},end:{line:2,column:81}}}))?l:"")+' worklist-list__toggle-actions js-toggle-actions">'+c((d(n,"far")||t&&d(t,"far")||r).call(s,"file-alt",{name:"far",hash:{},data:i,loc:{start:{line:2,column:131},end:{line:2,column:149}}}))+c(u((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"worklist"))&&d(l,"worklistViews"))&&d(l,"typeToggleView"))&&d(l,"actionsButton"),t))+"</button>"+c("function"==typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:230},end:{line:2,column:255}}}):o)+'<button class="button-secondary '+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isFlowList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:36},end:{line:3,column:73}}}))?l:"")+' worklist-list__toggle-flows js-toggle-flows">'+c((d(n,"fas")||t&&d(t,"fas")||r).call(s,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:119},end:{line:3,column:135}}}))+c(u((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"worklist"))&&d(l,"worklistViews"))&&d(l,"typeToggleView"))&&d(l,"flowsButton"),t))+"</button>\n  "},useData:!0}),templateContext:function(){return{isFlowList:this.getOption("isFlowList")}},triggers:{"click .js-toggle-actions":"click:toggleActions","click .js-toggle-flows":"click:toggleFlows"},ui:{buttons:"button"},onClickToggleActions:function(){this.triggerMethod("toggle:listType","actions")},onClickToggleFlows:function(){this.triggerMethod("toggle:listType","flows")}}),ns=h.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <span class="worklist__title-icon">'+r((c(n,"far")||t&&c(t,"far")||s).call(o,"list",{name:"far",hash:{},data:i,loc:{start:{line:2,column:39},end:{line:2,column:53}}}))+"</span>"+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||s).call(o,(c(n,"intlGet")||t&&c(t,"intlGet")||s).call(o,"patients.worklist.worklistViews.listTitleView.listTitles",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:76},end:{line:2,column:144}}}),{name:"formatMessage",hash:{owner:null!=t?c(t,"owner"):t,role:null!=t?c(t,"role"):t,title:null!=t?c(t,"worklistId"):t},data:i,loc:{start:{line:2,column:60},end:{line:2,column:185}}}))+r("function"==typeof(l=null!=(l=c(n,"remove_whitespace")||(null!=t?c(t,"remove_whitespace"):t))?l:s)?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:185},end:{line:2,column:210}}}):l)+'<span class="list-page__header-icon js-title-info">'+r((c(n,"fas")||t&&c(t,"fas")||s).call(o,"info-circle",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:55},end:{line:3,column:76}}}))+"</span>\n  "},useData:!0}),ui:{tooltip:".js-title-info"},templateContext:function(){return{role:this.getOption("role").get("name"),owner:this.getOption("owner").get("name"),worklistId:(0,Fo.Z)(this.getOption("worklistId")),isFlowList:this.getOption("isFlowList")}},onRender:function(){var e=this.getOption("isFlowList")?Ho:Go;new ye.Z({message:(0,f.SM)(e,this.templateContext()),uiView:this,ui:this.ui.tooltip,orientation:"vertical"})}}),as=h.View.extend({template:Xo(),tagName:"tr",templateContext:function(){return{isFlowList:this.getOption("isFlowList")}}}),is=h.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"worklist"))&&o(l,"worklistViews"))&&o(l,"emptyFindInListView"))&&o(l,"noResults"),t))+"</h2>\n    </td>\n  "},useData:!0})}),ls=h.CollectionView.extend({className:"table-list",tagName:"table",childView:function(){return this.isFlowList?Uo:qo},emptyView:function(){return this.state.get("searchQuery")?is:this.isFlowList?Wo:Lo},childViewOptions:function(){return{state:this.state}},childViewTriggers:{render:"listItem:render"},onListItemRender:function(e){e.searchString=e.$el.text()},initialize:function(e){var t=e.state;this.state=t,this.isFlowList=t.isFlowType(),this.listenTo(t,{"select:all":this.render,"select:none":this.render,"change:searchQuery":this.searchList})},onAttach:function(){this.triggerMethod("update:listDom",this)},onRenderChildren:function(){this.isAttached()&&this.triggerMethod("update:listDom",this)},searchList:function(e,t){if(t){var n=this._buildMatchers(t);this.setFilter((function(e){var t=e.searchString;return(0,i.every)(n,(function(e){return e.test(t)}))}))}else this.removeFilter()},_buildMatchers:function(e){var t=(0,No.Z)(e);return(0,i.map)(t,(function(e){return e=RegExp.escape(e),new RegExp("\\b".concat(e),"i")}))}}),os=[{id:"sortDueAsc",text:Ko.sortDueOptions.asc,comparator:function(e,t){var n=e.model.get("due_date"),a=t.model.get("due_date");return n===a?(0,be.XQ)("asc",e.model.get("due_time"),t.model.get("due_time")):(0,be.XQ)("asc",n,a)}},{id:"sortDueDesc",text:Ko.sortDueOptions.desc,comparator:function(e,t){var n=e.model.get("due_date"),a=t.model.get("due_date");return n===a?(0,be.XQ)("desc",e.model.get("due_time"),t.model.get("due_time")):(0,be.XQ)("desc",n,a)}}],ss=[{id:"sortUpdateAsc",text:Ko.sortUpdateOptions.asc,comparator:function(e,t){return(0,be.XQ)("asc",e.model.get("updated_at"),t.model.get("updated_at"))}},{id:"sortUpdateDesc",text:Ko.sortUpdateOptions.desc,comparator:function(e,t){return(0,be.XQ)("desc",e.model.get("updated_at"),t.model.get("updated_at"))}}],rs=[{id:"sortCreatedAsc",text:Ko.sortCreatedOptions.asc,comparator:function(e,t){return(0,be.XQ)("asc",e.model.get("created_at"),t.model.get("created_at"))}},{id:"sortCreatedDesc",text:Ko.sortCreatedOptions.desc,comparator:function(e,t){return(0,be.XQ)("desc",e.model.get("created_at"),t.model.get("created_at"))}}],cs=k.Z.extend({align:"right",popWidth:248,picklistOptions:{headingText:Ko.sortDroplist.headingText},viewOptions:{className:"button-filter",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||s).call(o,"sort-alt",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:18}}}))+r("function"==typeof(l=null!=(l=c(n,"text")||(null!=t?c(t,"text"):t))?l:s)?l.call(o,{name:"text",hash:{},data:i,loc:{start:{line:1,column:18},end:{line:1,column:26}}}):l)+r((c(n,"far")||t&&c(t,"far")||s).call(o,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:26},end:{line:1,column:46}}}))},useData:!0})}}),us=s.Z.extend({StateModel:Ul,childApps:{filters:{AppClass:Ql,regionName:"filters",restartWithParent:!1,getOptions:["currentClinician"]},bulkEditActions:fo,bulkEditFlows:wo},stateEvents:{"change:type change:filters change:actionsDateFilters change:flowsDateFilters":"restart","change:actionsSortId":"onChangeStateSort","change:flowsSortId":"onChangeStateSort","change:selectedFlows":"onChangeSelected","change:selectedActions":"onChangeSelected"},onChangeStateSort:function(){this.getChildView("list").setComparator(this.getComparator())},onChangeSelected:function(){this.toggleBulkSelect()},initListState:function(){var e=o().request("bootstrap","currentUser"),t=Wl().get("".concat(this.worklistId,"_").concat(e.id)),n=this.getState("filters");t&&(t.filters=(0,i.extend)({},n,t.filters)),this.setState((0,i.extend)({id:this.worklistId},t))},onBeforeStart:function(e){var t=e.worklistId;if(this.isRestarting())return this.showListTitle(),this.showTypeToggleView(),this.showSortDroplist(),this.showTableHeaders(),this.showDateFilter(),void this.getRegion("list").startPreloader();this.worklistId=t,this.initListState(),this.showView(new Jo({worklistId:this.worklistId,state:this.getState()})),this.getRegion("list").startPreloader(),this.showDisabledSelectAll(),this.showSortDroplist(),this.showTableHeaders(),this.showListTitle(),this.showTypeToggleView(),this.showSearchView(),this.showDateFilter(),this.startFiltersApp()},beforeStart:function(){var e=this.getState().getEntityFilter();return o().request("entities","fetch:".concat(this.getState().getType(),":collection"),{filter:e})},onStart:function(e,t){this.collection=t;var n=new ls({collection:this.collection,state:this.getState(),viewComparator:this.getComparator()});this.showChildView("list",n),this.showSearchView(),this.toggleBulkSelect()},startFiltersApp:function(){var e=this,t=this.startChildApp("filters",{state:this.getState().getFilters(),shouldShowClinician:"shared-by"!==this.getState().id,shouldShowRole:"owned-by"!==this.getState().id});this.listenTo(t.getState(),"change",(function(t){var n=t.attributes;e.setState({filters:(0,i.clone)(n)})}))},toggleBulkSelect:function(){if(this.selected=this.getState().getSelected(this.collection),this.showSelectAll(),this.selected.length)return this.getChildApp("filters").stop(),void this.showBulkEditButtonView();this.startFiltersApp()},onClickBulkCancel:function(){this.getState().clearSelected()},onClickBulkEdit:function(){var e=this.getState().isFlowType()?"bulkEditFlows":"bulkEditActions",t=this.startChildApp(e,{state:{collection:this.selected}});this.listenTo(t,{save:function(e){var n=this;this.selected.save(e).done((function(){n.showUpdateSuccess(n.selected.length),t.stop(),n.getState().clearSelected()})).fail((function(){o().request("alert","show:error",f.ZP.patients.worklist.worklistApp.bulkEditFailure),n.getState().clearSelected(),n.restart()}))},delete:function(){var e=this,n=this.selected.length;this.selected.destroy().then((function(){e.showDeleteSuccess(n),t.stop(),e.getState().clearSelected()}))}})},showDisabledSelectAll:function(){this.showChildView("selectAll",new es({isDisabled:!0}))},showSelectAll:function(){if(this.collection.length){var e=this.selected.length===this.collection.length,t=new es({isSelectAll:e});this.listenTo(t,"click",this.onClickBulkSelect),this.showChildView("selectAll",t)}else this.showDisabledSelectAll()},onClickBulkSelect:function(){this.selected.length!==this.collection.length?this.getState().selectAll(this.collection):this.getState().clearSelected()},getComparator:function(){var e=this.getState().getSort();return this.sortOptions.get(e).get("comparator")},getSortOptions:function(){return this.getState().isFlowType()?(0,i.union)(rs,ss):(0,i.union)(os,rs,ss)},showDeleteSuccess:function(e){this.getState().isFlowType()?o().request("alert","show:success",(0,f.SM)(mo,{itemCount:e})):o().request("alert","show:success",(0,f.SM)(po,{itemCount:e}))},showUpdateSuccess:function(e){this.getState().isFlowType()?o().request("alert","show:success",(0,f.SM)(co,{itemCount:e})):o().request("alert","show:success",(0,f.SM)(uo,{itemCount:e}))},showDateFilter:function(){if("shared-by"===this.getState().id||"owned-by"===this.getState().id){var e=this.getState(),t=e.isFlowType()?["created_at","updated_at"]:["created_at","updated_at","due_date"],n=new Vo({dateTypes:t,state:e.getDateFilters(),region:this.getRegion("dateFilter")});this.listenTo(n.getState(),{change:function(t){var n=t.attributes;e.setDateFilters(n)}}),n.show()}},showSortDroplist:function(){var e=this;this.sortOptions=new(c().Collection)(this.getSortOptions());var t=new cs({collection:this.sortOptions,state:{selected:this.sortOptions.get(this.getState().getSort())}});this.listenTo(t.getState(),"change:selected",(function(t,n){e.getState().setSort(n.id)})),this.showChildView("sort",t)},showTableHeaders:function(){var e=new as({isFlowList:this.getState().isFlowType()});this.showChildView("table",e)},showListTitle:function(){var e=this.getState().getFilters(),t=o().request("entities","clinicians:model",e.clinicianId),n=o().request("entities","roles:model",e.roleId);this.showChildView("title",new ns({owner:t,role:n,worklistId:this.worklistId,isFlowList:this.getState().isFlowType()}))},showTypeToggleView:function(){var e=this,t=new ts({isFlowList:"flows"===this.getState("type")});this.listenTo(t,"toggle:listType",(function(t){e.setState("type",t)})),this.showChildView("toggle",t)},showSearchView:function(){var e=this.showChildView("search",new Ao({state:{query:this.getState("searchQuery"),isDisabled:!this.collection||!this.collection.length}}));this.listenTo(e.getState(),"change:query",this.setSearchState)},showBulkEditButtonView:function(){var e=this.showChildView("filters",new io({isFlowType:this.getState().isFlowType(),collection:this.selected}));this.listenTo(e,{"click:cancel":this.onClickBulkCancel,"click:edit":this.onClickBulkEdit})},setSearchState:function(e,t){this.setState({searchQuery:t.length>2?t:""})}}),ds=c().Model.extend({defaults:function(){return{filters:{groupId:null,clinicianId:this.currentClinician.id},dateFilters:{dateType:"due_date",selectedDate:null,selectedMonth:null,relativeDate:null},selectedActions:{}}},preinitialize:function(){this.currentClinician=o().request("bootstrap","currentUser"),this.groups=this.currentClinician.getGroups()},initialize:function(){this.on("change",this.onChange)},onChange:function(){Wl().set("schedule_".concat(this.currentClinician.id),this.attributes)},getFilters:function(){return(0,i.clone)(this.get("filters"))},getDateFilters:function(){return(0,i.clone)(this.get("dateFilters"))},getEntityDateFilter:function(){var e=this.getDateFilters(),t=e.selectedDate,n=e.selectedMonth,a=e.relativeDate;if(t)return{due_date:this.formatDateRange(t,"day")};if(n)return{due_date:this.formatDateRange(n,"month")};if("today"===a)return{due_date:this.formatDateRange(d()(),"day")};if("yesterday"===a){var i=d()().subtract(1,"days");return{due_date:this.formatDateRange(i,"day")}}return{due_date:this.formatDateRange(d()(),"month")}},getEntityFilter:function(){var e=this.getFilters(),t=e.groupId,n=e.clinicianId,a=t||this.groups.pluck("id").join(","),l=this.getEntityDateFilter();return(0,i.extend)({clinician:n,status:"queued,started",group:a},l)},formatDateRange:function(e,t){var n="YYYY-MM-DD";return"".concat(d()(e).startOf(t).format(n),",").concat(d()(e).endOf(t).format(n))},toggleSelected:function(e,t){var n,a,l,o=(0,i.clone)(this.get("selectedActions"));this.set("selectedActions",(0,i.extend)(o,(n={},l=t,(a=e.id)in n?Object.defineProperty(n,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[a]=l,n)))},isSelected:function(e){return this.get("selectedActions")[e.id]},getSelected:function(e){var t=this.get("selectedActions"),n=(0,i.reduce)((0,i.keys)(t),(function(n,a){return t[a]&&e.get(a)&&n.push({id:a}),n}),[]);return o().request("entities","actions:collection",n)},clearSelected:function(){this.set("selectedActions",{}),this.trigger("select:none")},selectAll:function(e){var t=e.reduce((function(e,t){return e[t.id]=!0,e}),{});this.set("selectedActions",t),this.trigger("select:all")}}),ms=h.View.extend({className:"schedule__filters",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="schedule__filter" data-group-filter-region></div>\n    <div class="schedule__filter" data-owner-filter-region></div>\n  '},useData:!0}),regions:{group:"[data-group-filter-region]",owner:"[data-owner-filter-region]"}}),ps=k.Z.extend({viewOptions:{className:"button-filter",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r("function"==typeof(l=null!=(l=c(n,"name")||(null!=t?c(t,"name"):t))?l:s)?l.call(o,{name:"name",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:10}}}):l)+r((c(n,"far")||t&&c(t,"far")||s).call(o,"angle-down",{name:"far",hash:{},data:i,loc:{start:{line:1,column:10},end:{line:1,column:30}}}))},useData:!0})},picklistOptions:{attr:"name"}}),hs=s.Z.extend({onStart:function(){this.currentClinician=o().request("bootstrap","currentUser"),this.groups=this.currentClinician.getGroups(),this.showView(new ms),this.showFilters()},showFilters:function(){this.showGroupsFilterView(),this.showOwnerFilterView()},showGroupsFilterView:function(){var e=this;if(!(this.groups.length<2)){var t=this._getGroups(),n=t.get(this.getState("groupId"))||t.at(0),a=new ps({collection:t,state:{selected:n}});this.listenTo(a.getState(),"change:selected",(function(t,n){var a=n.id;e.setState("groupId",a)})),this.showChildView("group",a)}},showOwnerFilterView:function(){var e=this,t=o().request("entities","clinicians:model",this.getState("clinicianId")),n=new I({owner:t,groups:this.groups,isFilter:!0,headingText:f.ZP.patients.schedule.filtersApp.ownerFilterHeadingText});this.listenTo(n,"change:owner",(function(t){var n=t.id;e.setState({clinicianId:n})})),this.showChildView("owner",n)},_getGroups:function(){var e=this.groups.clone();return e.unshift({id:null,name:f.ZP.patients.schedule.filtersApp.allGroupsName}),e}}),fs=n(3538),gs=n.n(fs);function ws(e){return(ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var vs=h.View.extend({className:"flex-region",template:gs(),regions:{filters:"[data-filters-region]",table:"[data-table-region]",list:{el:"[data-list-region]",regionClass:y.Z},selectAll:"[data-select-all-region]",title:"[data-title-region]",dateFilter:"[data-date-filter-region]"}}),bs=h.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <span class="schedule__title-icon">'+r((c(n,"far")||t&&c(t,"far")||s).call(o,"calendar-star",{name:"far",hash:{},data:i,loc:{start:{line:2,column:39},end:{line:2,column:62}}}))+"</span>"+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||s).call(o,(c(n,"intlGet")||t&&c(t,"intlGet")||s).call(o,"patients.schedule.scheduleViews.scheduleTitleView.title",{name:"intlGet",hash:{},data:i,loc:{start:{line:2,column:85},end:{line:2,column:152}}}),{name:"formatMessage",hash:{owner:null!=t?c(t,"name"):t},data:i,loc:{start:{line:2,column:69},end:{line:2,column:165}}}))+r("function"==typeof(l=null!=(l=c(n,"remove_whitespace")||(null!=t?c(t,"remove_whitespace"):t))?l:s)?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:165},end:{line:2,column:190}}}):l)+'<span class="list-page__header-icon js-title-info">'+r((c(n,"fas")||t&&c(t,"fas")||s).call(o,"info-circle",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:55},end:{line:3,column:76}}}))+"</span>\n  "},useData:!0}),ui:{tooltip:".js-title-info"},onRender:function(){new ye.Z({message:f.ZP.patients.schedule.scheduleViews.scheduleTitleView.tooltip,uiView:this,ui:this.ui.tooltip,orientation:"vertical"})}}),ys=h.View.extend({tagName:"button",className:"button--checkbox",attributes:function(){if(this.getOption("isDisabled"))return{disabled:"disabled"}},triggers:{click:"click"},getTemplate:function(){return this.getOption("isSelectAll")?p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"check-square",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:22}}}))},useData:!0}):p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:16}}}))},useData:!0})}}),_s=h.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="schedule-list__header schedule-list__header-due-date">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"scheduleViews"))&&r(l,"tableHeaderView"))&&r(l,"dueDateHeader"),t))+'</td>\n    <td class="schedule-list__header schedule-list__header-state-patient">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"scheduleViews"))&&r(l,"tableHeaderView"))&&r(l,"statePatientHeader"),t))+'</td>\n    <td class="schedule-list__header schedule-list__header-action">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"scheduleViews"))&&r(l,"tableHeaderView"))&&r(l,"actionHeader"),t))+'</td>\n    <td class="schedule-list__header schedule-list__header-form">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"schedule"))&&r(l,"scheduleViews"))&&r(l,"tableHeaderView"))&&r(l,"formheader"),t))+"</td>\n  "},useData:!0}),tagName:"tr"}),xs=h.View.extend({tagName:"tr",className:function(){var e="schedule-list__day-list-row";return this.getOption("state").isSelected(this.model)?"is-selected ".concat(e):e},template:p().template({1:function(e,t,n,a,i){return"is-overdue"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"check-square",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:81},end:{line:3,column:103}}}))},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:3,column:111},end:{line:3,column:127}}}))},7:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+e.escapeExpression((l(n,"formatDateTime")||t&&l(t,"formatDateTime")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"due_time"):t,"TIME",{name:"formatDateTime",hash:{inputFormat:"HH:mm:ss"},data:i,loc:{start:{line:5,column:8},end:{line:5,column:65}}}))+"\n"},9:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span class="schedule-list__no-time">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"schedule"))&&o(l,"scheduleViews"))&&o(l,"dayItemView"))&&o(l,"noTime"),t))+"</span>\n"},11:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="js-form schedule-list__action-form-icon">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"poll-h",{name:"far",hash:{},data:i,loc:{start:{line:20,column:72},end:{line:20,column:88}}}))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.lambda,c=e.escapeExpression,u=e.hooks.helperMissing,d="function",m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="schedule-list__action-list-cell schedule-list__due-time '+(null!=(l=m(n,"if").call(s,null!=t?m(t,"isOverdue"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:71},end:{line:2,column:105}}}))?l:"")+'">\n      <button class="button--checkbox u-margin--r-8 js-select">'+(null!=(l=m(n,"if").call(s,null!=t?m(t,"isSelected"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:3,column:63},end:{line:3,column:134}}}))?l:"")+"</button>\n"+(null!=(l=m(n,"if").call(s,null!=t?m(t,"due_time"):t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i,loc:{start:{line:4,column:6},end:{line:8,column:13}}}))?l:"")+'    </td>\n    <td class="schedule-list__action-list-cell schedule-list__patient">\n      <div class="schedule-list__state-patient">\n        <span class="schedule-list__action-state action--'+c(r(null!=(l=null!=t?m(t,"stateOptions"):t)?m(l,"color"):l,t))+'">'+c((m(n,"fa")||t&&m(t,"fa")||u).call(s,null!=(l=null!=t?m(t,"stateOptions"):t)?m(l,"iconType"):l,null!=(l=null!=t?m(t,"stateOptions"):t)?m(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:12,column:83},end:{line:12,column:129}}}))+"</span>"+c(ws(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:136},end:{line:12,column:161}}}):o)+'<span class="schedule-list__patient-name js-patient">'+c(r(null!=(l=null!=t?m(t,"patient"):t)?m(l,"first_name"):l,t))+" "+c(r(null!=(l=null!=t?m(t,"patient"):t)?m(l,"last_name"):l,t))+'</span>\n      </div>\n    </td>\n    <td class="schedule-list__action-list-cell schedule-list__action">\n      <span class="schedule-list__action-name js-action">'+c(ws(o=null!=(o=m(n,"name")||(null!=t?m(t,"name"):t))?o:u)===d?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:17,column:57},end:{line:17,column:67}}}):o)+'</span>\n    </td>\n    <td class="schedule-list__action-list-cell schedule-list__action-form">\n      '+(null!=(l=m(n,"if").call(s,null!=t?m(t,"form"):t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i,loc:{start:{line:20,column:6},end:{line:20,column:102}}}))?l:"")+"\n    </td>\n  "},useData:!0}),templateContext:function(){return{isOverdue:this.model.isOverdue(),stateOptions:this.model.getState().get("options"),patient:this.model.getPatient().attributes,form:this.model.getForm(),owner:this.model.getOwner().attributes,isSelected:this.state.isSelected(this.model)}},ui:{actionName:".js-action"},triggers:{"click .js-form":"click:form","click .js-patient":"click:patient",click:"click","click .js-select":"click:select"},initialize:function(e){var t=e.state;this.state=t,this.flow=this.model.getFlow()},onRender:function(){var e=p().template({1:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="action-tooltip__flow"><span class="action-tooltip__flow-icon">'+r((c(n,"fas")||t&&c(t,"fas")||s).call(o,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:94},end:{line:2,column:110}}}))+"</span>"+r("function"==typeof(l=null!=(l=c(n,"flowName")||(null!=t?c(t,"flowName"):t))?l:s)?l.call(o,{name:"flowName",hash:{},data:i,loc:{start:{line:2,column:117},end:{line:2,column:131}}}):l)+"</p>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n      "+(null!=(l=u(n,"if").call(s,null!=t?u(t,"flowName"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:6},end:{line:2,column:142}}}))?l:"")+'\n      <p><span class="action-tooltip__action-icon">'+c((u(n,"far")||t&&u(t,"far")||r).call(s,"file-alt",{name:"far",hash:{},data:i,loc:{start:{line:3,column:51},end:{line:3,column:69}}}))+'</span><span class="action-tooltip__action-name">'+c("function"==typeof(o=null!=(o=u(n,"name")||(null!=t?u(t,"name"):t))?o:r)?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:3,column:118},end:{line:3,column:128}}}):o)+"</span></p>\n    "},useData:!0});new ye.Z({className:"tooltip tooltip--wide",messageHtml:(0,f.SM)(e,{name:this.model.get("name"),flowName:this.flow?this.flow.get("name"):null}),uiView:this,ui:this.ui.actionName})},onClickSelect:function(){var e=this.state.isSelected(this.model);this.$el.toggleClass("is-selected",!e),this.state.toggleSelected(this.model,!e),this.render()},onClickPatient:function(){o().trigger("event-router","patient:dashboard",this.model.get("_patient"))},onClickForm:function(){o().trigger("event-router","form:patientAction",this.model.id,this.model.getForm().id)},onClick:function(){this.flow?o().trigger("event-router","flow:action",this.flow.id,this.model.id):o().trigger("event-router","patient:action",this.model.get("_patient"),this.model.id)}}),ks=h.CollectionView.extend({childView:xs,childViewOptions:function(){return{state:this.state}},tagName:"tr",className:"schedule-list__list-row",template:p().template({1:function(e,t,n,a,i){return"is-today"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="schedule-list__list-cell">\n      <div class="schedule-list__row-header">\n        <span class="schedule-list__date '+(null!=(l=c(n,"if").call(o,null!=t?c(t,"isToday"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:41},end:{line:4,column:71}}}))?l:"")+'">'+r((c(n,"formatDateTime")||t&&c(t,"formatDateTime")||s).call(o,null!=t?c(t,"date"):t,"D",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:4,column:73},end:{line:4,column:100}}}))+'</span>\n        <span class="schedule-list__month-day">'+r((c(n,"formatDateTime")||t&&c(t,"formatDateTime")||s).call(o,null!=t?c(t,"date"):t,"MMM, ddd",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:5,column:47},end:{line:5,column:81}}}))+'</span>\n      </div>\n      <div class="schedule-list__day-list">\n        <table class="schedule-list__day-list-table w-100" data-actions-region></table>\n      </div>\n    </td>\n  '},useData:!0}),templateContext:function(){var e=d()(this.model.get("date")),t=d()();return{isToday:e.isSame(t,"day")}},childViewContainer:"[data-actions-region]",viewComparator:function(e,t){return(0,be.XQ)("asc",e.model.get("due_time"),t.model.get("due_time"),"24")},initialize:function(e){var t=e.state;this.state=t}}),Cs=h.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"schedule"))&&o(l,"scheduleViews"))&&o(l,"emptyView"))&&o(l,"noScheduledActions"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Os=h.CollectionView.extend({tagName:"table",className:"schedule-list__table",childView:ks,childViewOptions:function(e){if(e)return{collection:e.get("actions"),state:this.state}},emptyView:Cs,viewComparator:function(e,t){return(0,be.XQ)("asc",e.model.get("date"),t.model.get("date"))},initialize:function(e){var t=e.state;this.state=t,this.listenTo(t,{"select:all":this.render,"select:none":this.render})}}),Ts=s.Z.extend({StateModel:ds,childApps:{filters:{AppClass:hs,regionName:"filters",restartWithParent:!1,getOptions:["currentClinician"]},bulkEditActions:fo},stateEvents:{"change:filters change:dateFilters":"restart","change:selectedActions":"onChangeSelected"},initListState:function(){var e=o().request("bootstrap","currentUser"),t=Wl().get("schedule_".concat(e.id)),n=this.getState("filters");t&&(t.filters=(0,i.extend)({},n,t.filters)),this.setState((0,i.extend)({id:"schedule_".concat(e.id)},t))},onBeforeStart:function(){if(this.isRestarting())return this.showScheduleTitle(),void this.getRegion("list").startPreloader();this.initListState(),this.showView(new vs({state:this.getState()})),this.getRegion("list").startPreloader(),this.showScheduleTitle(),this.showDisabledSelectAll(),this.startFiltersApp(),this.showDateFilter(),this.showTableHeaders()},beforeStart:function(){var e=this.getState().getEntityFilter();return o().request("entities","fetch:actions:collection",{filter:e})},onStart:function(e,t){this.collection=t,this.selected=this.getState().getSelected(this.collection),this.showScheduleList(),this.showSelectAll(),this.toggleBulkSelect()},onChangeSelected:function(){this.toggleBulkSelect()},onClickBulkSelect:function(){this.selected.length!==this.collection.length?this.getState().selectAll(this.collection):this.getState().clearSelected()},onClickBulkEdit:function(){var e=this.startChildApp("bulkEditActions",{state:{collection:this.selected}});this.listenTo(e,{save:function(t){var n=this;this.selected.save(t).done((function(){if(o().request("alert","show:success",(0,f.SM)(uo,{itemCount:n.selected.length})),e.stop(),t.due_date&&n.selected.some((function(e){return e.changed.due_date})))return n.getState().clearSelected(),void n.restart();n.getState().clearSelected()})).fail((function(){o().request("alert","show:error",f.ZP.patients.schedule.scheduleApp.bulkEditFailure),n.getState().clearSelected(),n.restart()}))},delete:function(){var t=this,n=this.selected.length;this.selected.destroy().then((function(){o().request("alert","show:success",(0,f.SM)(po,{itemCount:n})),e.stop(),t.getState().clearSelected(),t.showScheduleList()}))}})},onClickBulkCancel:function(){this.getState().clearSelected()},showScheduleList:function(){var e=new Os({collection:this.collection.groupByDate(),state:this.getState()});this.showChildView("list",e)},showScheduleTitle:function(){var e=this.getState().get("filters"),t=o().request("entities","clinicians:model",e.clinicianId);this.showChildView("title",new bs({model:t}))},startFiltersApp:function(){var e=this,t=this.startChildApp("filters",{state:this.getState().getFilters()});this.listenTo(t.getState(),"change",(function(t){var n=t.attributes;e.setState({filters:(0,i.clone)(n)})}))},showDateFilter:function(){var e=new Vo({dateTypes:["due_date"],state:this.getState().getDateFilters(),region:this.getRegion("dateFilter")});this.listenTo(e.getState(),{change:function(e){var t=e.attributes;this.setState({dateFilters:(0,i.clone)(t)})}}),e.show()},showTableHeaders:function(){var e=new _s;this.showChildView("table",e)},showSelectAll:function(){if(this.collection.length){var e=this.selected.length===this.collection.length,t=new ys({isSelectAll:e});this.listenTo(t,"click",this.onClickBulkSelect),this.showChildView("selectAll",t)}else this.showDisabledSelectAll()},showDisabledSelectAll:function(){this.showChildView("selectAll",new ys({isDisabled:!0}))},showBulkEditButtonView:function(){var e=this.showChildView("filters",new io({collection:this.selected}));this.listenTo(e,{"click:cancel":this.onClickBulkCancel,"click:edit":this.onClickBulkEdit})},toggleBulkSelect:function(){if(this.selected=this.getState().getSelected(this.collection),this.showSelectAll(),this.selected.length)return this.getChildApp("filters").stop(),void this.showBulkEditButtonView();this.startFiltersApp()}}),Ss=Ga.Z.extend({routerAppName:"PatientsApp",childApps:function(){return{flow:Qi,patient:Zl,ownedBy:us,forRole:us,newPastDay:us,pastThree:us,lastThirty:us,schedule:Ts}},defaultRoute:function(){var e=this,t="worklist",n="owned-by";this.routeAction(t,(function(){(0,i.defer)((function(){e.replaceRoute(t,n),o().request("nav","select",e.routerAppName,t,[n]),e.setLatestList(t,[n]),e.showPatientsWorklist(n)}))}))},eventRoutes:function(){return{default:{action:"defaultRoute",route:""},worklist:{action:"showPatientsWorklist",route:"worklist/:id",isList:!0},"patient:dashboard":{action:"showPatient",route:"patient/dashboard/:id"},"patient:dataEvents":{action:"showPatient",route:"patient/data-events/:id"},"patient:action":{action:"showPatient",route:"patient/:id/action/:id"},"patient:action:new":{action:"showPatient",route:"patient/:id/action"},flow:{action:"showFlow",route:"flow/:id"},"flow:action":{action:"showFlow",route:"flow/:id/action/:id"},schedule:{action:"showSchedule",route:"schedule",isList:!0}}},showPatient:function(e){this.startRoute("patient",{patientId:e})},showPatientsWorklist:function(e){var t={"owned-by":"ownedBy","shared-by":"forRole","new-past-day":"newPastDay","updated-past-three-days":"pastThree","done-last-thirty-days":"lastThirty"};t[e]?this.startCurrent(t[e],{worklistId:e}):o().trigger("event-router","notFound")},showFlow:function(e){this.startRoute("flow",{flowId:e})},showSchedule:function(){this.startCurrent("schedule")}}),Ds=h.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"list"))&&o(l,"programsAllViews"))&&o(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Ps=h.View.extend({className:"table-list__item",tagName:"tr",template:p().template({1:function(e,t,n,a,i){return" is-published"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-on",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:23},end:{line:4,column:42}}}))},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-off",{name:"far",hash:{},data:i,loc:{start:{line:4,column:50},end:{line:4,column:70}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-list__cell w-60">'+c("function"==typeof(o=null!=(o=u(n,"name")||(null!=t?u(t,"name"):t))?o:r)?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:2,column:38},end:{line:2,column:48}}}):o)+'</td>\n    <td class="table-list__cell w-20 programs-list__published'+(null!=(l=u(n,"if").call(s,null!=t?u(t,"published"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:61},end:{line:3,column:98}}}))?l:"")+'">\n      '+(null!=(l=u(n,"if").call(s,null!=t?u(t,"published"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:4,column:6},end:{line:4,column:77}}}))?l:"")+"\n      "+c((u(n,"formatMessage")||t&&u(t,"formatMessage")||r).call(s,(u(n,"intlGet")||t&&u(t,"intlGet")||r).call(s,"admin.list.programsAllViews.itemView.published",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:80}}}),{name:"formatMessage",hash:{published:null!=t?u(t,"published"):t},data:i,loc:{start:{line:5,column:6},end:{line:5,column:102}}}))+'\n    </td>\n    <td class="table-list__cell w-20 programs-list__updated-ts">'+c((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(s,null!=t?u(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:7,column:64},end:{line:7,column:107}}}))+"</td>\n  "},useData:!0}),triggers:{click:"click"},onClick:function(){o().trigger("event-router","program:details",this.model.id)}}),Vs=h.View.extend({className:"flex-region",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="list-page__header">\n      <div class="list-page__title">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"list"))&&r(l,"programsAllViews"))&&r(l,"layoutView"))&&r(l,"title"),t))+'</div>\n      <div class="u-margin--b-16">\n        <button class="button-primary js-add">'+s((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"plus-circle",{name:"far",hash:{},data:i,loc:{start:{line:5,column:46},end:{line:5,column:67}}}))+s(o((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"list"))&&r(l,"programsAllViews"))&&r(l,"addProgramBtn"),t))+'</button>\n      </div>\n    </div>\n    <div class="flex-region list-page__list">\n      <table class="w-100"><tr>\n        <td class="table-list__header w-60">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"list"))&&r(l,"programsAllViews"))&&r(l,"layoutView"))&&r(l,"programHeader"),t))+'</td>\n        <td class="table-list__header w-20">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"list"))&&r(l,"programsAllViews"))&&r(l,"layoutView"))&&r(l,"stateHeader"),t))+'</td>\n        <td class="table-list__header w-20">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"list"))&&r(l,"programsAllViews"))&&r(l,"layoutView"))&&r(l,"updatedHeader"),t))+'</td>\n      </tr></table>\n      <div class="flex-region" data-list-region></div>\n    </div>\n  '},useData:!0}),regions:{list:{el:"[data-list-region]",regionClass:y.Z}},triggers:{"click .js-add":"click:add"}}),Ms=h.CollectionView.extend({className:"table-list",tagName:"table",childView:Ps,viewComparator:function(e,t){return(0,be.XQ)("desc",e.model.get("updated_at"),t.model.get("updated_at"))},emptyView:Ds}),Es=s.Z.extend({viewTriggers:{"click:add":"click:add"},onBeforeStart:function(){this.showView(new Vs),this.getRegion("list").startPreloader()},beforeStart:function(){return o().request("entities","fetch:programs:collection")},onStart:function(e,t){this.programs=t,this.showChildView("list",new Ms({collection:t}))},onClickAdd:function(){var e=this,t=o().request("entities","programs:model",{}),n=o().request("sidebar","start","program",{program:t});this.listenTo(n,"stop",(function(){t.isNew()||e.programs.add(t)}))}}),js=n(6060),As=n.n(js),Ns=n(7479),Fs=n.n(Ns),Is=n(4012),Rs=n.n(Is),Gs=h.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="workflows__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"program"))&&o(l,"workflows"))&&o(l,"workflowsViews"))&&o(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Ls=h.Behavior.extend({modelEvents:{editing:"onEditing",change:"onChange"},onChange:function(){this.view.render()},onEditing:function(e){this.$el.toggleClass("is-selected",e)},onInitialize:function(){this.view.model.isNew()&&this.$el.addClass("is-selected")}}),qs=h.View.extend({className:"table-list__item",tagName:"tr",behaviors:[Ls],regions:{published:"[data-published-region]",owner:"[data-owner-region]",due:"[data-due-region]"},template:As(),templateContext:function(){return{hasForm:this.model.getForm()}},ui:{form:".js-form"},triggers:{click:"click","click @ui.form":"click:form"},onClick:function(){this.model.isNew()?o().trigger("event-router","program:action:new",this.model.get("_program")):o().trigger("event-router","program:action",this.model.get("_program"),this.model.id)},onClickForm:function(){var e=this.model.getForm();o().trigger("event-router","form:preview",e.id)},onRender:function(){this.showPublished(),this.showOwner(),this.showDue()},showPublished:function(){var e=this,t=this.model.isNew(),n=new Rt({status:this.model.get("status"),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:status",(function(t){e.model.save({status:t})})),this.showChildView("published",n)},showOwner:function(){var e=this,t=this.model.isNew(),n=new xn({owner:this.model.getOwner(),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:owner",(function(t){e.model.saveOwner(t)})),this.showChildView("owner",n)},showDue:function(){var e=this,t=this.model.isNew(),n=new _n({day:this.model.get("days_until_due"),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:day",(function(t){e.model.save({days_until_due:t})})),this.showChildView("due",n)}}),Bs=h.View.extend({className:"table-list__item",tagName:"tr",behaviors:[Ls],regions:{owner:"[data-owner-region]"},template:Fs(),templateContext:function(){return{isPublished:"published"===this.model.get("status")}},triggers:{click:"click"},onClick:function(){this.model.isNew()?o().trigger("event-router","programFlow:new",this.model.get("_program")):o().trigger("event-router","programFlow",this.model.id)},onRender:function(){this.showOwner()},showOwner:function(){var e=this,t=this.model.isNew(),n=new Wt({owner:this.model.getOwner(),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:owner",(function(t){e.model.saveOwner(t)})),this.showChildView("owner",n)}}),Zs=h.CollectionView.extend({className:"table-list workflows__list",tagName:"table",childView:function(e){return"program-flows"===e.type?Bs:qs},emptyView:Gs,viewComparator:function(e,t){return(0,be.XQ)("desc",e.model.get("updated_at"),t.model.get("updated_at"))}}),Hs=h.View.extend({className:"flex-region workflows__content",regions:{content:{el:"[data-content-region]",regionClass:y.Z,replaceElement:!0},add:"[data-add-region]"},template:Rs()}),Ws=k.Z.extend({popWidth:248,picklistOptions:function(){return{className:"picklist",headingText:f.ZP.admin.program.workflows.workflowsViews.addActionHeading,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n        <span class="'+r("function"==typeof(l=null!=(l=c(n,"iconClassName")||(null!=t?c(t,"iconClassName"):t))?l:s)?l.call(o,{name:"iconClassName",hash:{},data:i,loc:{start:{line:2,column:21},end:{line:2,column:40}}}):l)+'">'+r((c(n,"fa")||t&&c(t,"fa")||s).call(o,null!=t?c(t,"iconType"):t,null!=t?c(t,"icon"):t,{name:"fa",hash:{},data:i,loc:{start:{line:2,column:42},end:{line:2,column:62}}}))+'</span>\n        <a class="workflows__add">'+r((c(n,"formatMessage")||t&&c(t,"formatMessage")||s).call(o,null!=t?c(t,"text"):t,{name:"formatMessage",hash:{},data:i,loc:{start:{line:3,column:34},end:{line:3,column:56}}}))+"</a>"},useData:!0})}},viewOptions:{className:"button-primary",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return r((c(n,"far")||t&&c(t,"far")||s).call(o,"plus-circle",{name:"far",hash:{},data:i,loc:{start:{line:1,column:0},end:{line:1,column:21}}}))+" "+r(e.lambda((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"admin"))&&c(l,"program"))&&c(l,"workflows"))&&c(l,"add"),t))+r((c(n,"far")||t&&c(t,"far")||s).call(o,"angle-down",{name:"far",hash:{classes:"workflows__arrow"},data:i,loc:{start:{line:1,column:61},end:{line:1,column:108}}}))},useData:!0})},picklistEvents:{"picklist:item:select":"onSelect"},onSelect:function(e){e.model.get("onSelect")()}});function Ys(e){return function(e){if(Array.isArray(e))return zs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||$s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Us(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return n}}(e,t)||$s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $s(e,t){if(e){if("string"==typeof e)return zs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zs(e,t):void 0}}function zs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Qs=s.Z.extend({viewTriggers:{"click:add":"click:add"},onBeforeStart:function(e){var t=e.program;this.program=t,this.showView(new Hs({model:t})),this.getRegion("content").startPreloader()},beforeStart:function(e){var t=e.program;return[o().request("entities","fetch:programActions:collection:byProgram",{programId:t.id}),o().request("entities","fetch:programFlows:collection:byProgram",{programId:t.id})]},onStart:function(e,t,n){var a=this,i=(e.program,Us(t,1)[0]),l=Us(n,1)[0];this.collection=new(c().Collection)([].concat(Ys(i.models),Ys(l.models))),this.showChildView("content",new Zs({collection:this.collection}));var s=new(c().Collection)([{onSelect:function(){o().trigger("event-router","program:action:new",a.program.id)},iconType:"far",icon:"file-alt",iconClassName:"workflows--add-action",text:f.ZP.admin.program.workflows.newAction},{onSelect:function(){o().trigger("event-router","programFlow:new",a.program.id)},iconType:"fas",icon:"folder",iconClassName:"workflows--add-flow",text:f.ZP.admin.program.workflows.newFlow}]);this.showChildView("add",new Ws({collection:s}))},onEditItem:function(e){e.isNew()?this.collection.unshift(e):e.trigger("editing",!0)}}),Xs=s.Z.extend({beforeStart:function(e){var t=e.actionId,n=e.programId,a=e.flowId;return t?o().request("entities","fetch:programActions:model",t):o().request("entities","programActions:model",{_program:n,_program_flow:a,_owner:null,days_until_due:null,status:"draft"})},onFail:function(){o().request("alert","show:error",f.ZP.admin.program.actionApp.notFound),this.stop()},onStart:function(e,t){var n=o().request("sidebar","start","programAction",{action:t});this.listenTo(n,"stop",this.stop)}}),Ks=h.View.extend({modelEvents:{"change:name":"render"},className:"program__context-trail",template:p().template({1:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-back program__context-link">\n        '+r((c(n,"fas")||t&&c(t,"fas")||s).call(o,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:30}}}))+r(e.lambda((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"admin"))&&c(l,"program"))&&c(l,"programViews"))&&c(l,"contextBackBtn"),t))+"\n      </a>\n      "+r((c(n,"fas")||t&&c(t,"fas")||s).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:29}}}))+"\n    "},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=r(n,"if").call(s,null!=t?r(t,"hasLatestList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:7,column:11}}}))?l:"")+e.escapeExpression("function"==typeof(o=null!=(o=r(n,"name")||(null!=t?r(t,"name"):t))?o:e.hooks.helperMissing)?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:7,column:11},end:{line:7,column:21}}}):o)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back"},onClickBack:function(){o().request("history","go:latestList")},templateContext:function(){return{hasLatestList:o().request("history","has:latestList")}}}),Js=h.View.extend({className:"program__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="program__layout">\n        <div data-context-trail-region></div>\n        <div data-content-region></div>\n    </div>\n    <div class="program__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},sidebar:"[data-sidebar-region]",content:{el:"[data-content-region]",regionClass:y.Z,replaceElement:!0}},onRender:function(){this.showChildView("contextTrail",new Ks({model:this.model}))}}),er=n(8055),tr=n.n(er);function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ar=f.ZP.admin.program.sidebar.sidebarViews,ir=h.View.extend({className:"program-sidebar",template:tr(),regionClass:h.Region.extend({replaceElement:!0}),triggers:{"click @ui.menu":"click:menu"},ui:{menu:".js-menu"},onClickMenu:function(){var e=new(c().Collection)([{onSelect:(0,i.bind)(this.triggerMethod,this,"edit"),icon:"edit",class:"program-sidebar__edit",text:ar.menuOptions.edit}]);new x.Z({ui:this.ui.menu,uiView:this,headingText:ar.menuOptions.headingText,itemTemplate:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r="function",c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span class="+c(nr(l=null!=(l=u(n,"class")||(null!=t?u(t,"class"):t))?l:s)===r?l.call(o,{name:"class",hash:{},data:i,loc:{start:{line:1,column:12},end:{line:1,column:21}}}):l)+">"+c((u(n,"far")||t&&u(t,"far")||s).call(o,null!=t?u(t,"icon"):t,{name:"far",hash:{},data:i,loc:{start:{line:1,column:22},end:{line:1,column:34}}}))+" "+c(nr(l=null!=(l=u(n,"text")||(null!=t?u(t,"text"):t))?l:s)===r?l.call(o,{name:"text",hash:{},data:i,loc:{start:{line:1,column:35},end:{line:1,column:45}}}):l)+"</span>"},useData:!0}),lists:[{collection:e}],align:"right",popWidth:248}).show()}}),lr=Ni.extend({eventRoutes:function(){return{"program:details":(0,i.partial)(this.startCurrent,"workflows"),"program:action":this.startProgramAction,"program:action:new":this.startProgramAction,"programFlow:new":this.startFlowSidebar}},childApps:{workflows:Qs,action:Xs},currentAppOptions:function(){return{region:this.getRegion("content"),program:this.getOption("program")}},onBeforeStart:function(){this.getRegion().startPreloader()},beforeStart:function(e){var t=e.programId;return o().request("entities","fetch:programs:model",t)},onStart:function(e,t){var n=e.currentRoute;this.program=t,this.setView(new Js({model:t})),this.showSidebar(),this.listenTo(o().channel("sidebar"),{show:this.emptySidebar,close:this.showSidebar}),this.startRoute(n),this.showView()},startProgramAction:function(e,t){var n=this.getChildApp("action");this.listenToOnce(n,{start:function(e,t){this.editList(t)},fail:function(){this.startCurrent("workflows")}}),this.startChildApp("action",{actionId:t,programId:e})},editList:function(e){var t=this.getCurrent()||this.startCurrent("workflows");t.isRunning()?t.triggerMethod("edit:item",e):this.listenToOnce(t,"start",(function(){t.triggerMethod("edit:item",e)}))},startFlowSidebar:function(e){var t=o().request("entities","programFlows:model",{_program:e,_owner:null,status:"draft"});o().request("sidebar","start","programFlow",{flow:t}),this.editList(t)},showSidebar:function(){var e=new ir({model:this.program});this.listenTo(e,{edit:this.onEdit}),this.showChildView("sidebar",e)},emptySidebar:function(){this.getRegion("sidebar").empty()},onEdit:function(){o().request("sidebar","start","program",{program:this.program})}}),or=(n(7688),n(6675)),sr=h.Behavior.extend({options:{handle:".js-sort",item:".js-draggable"},initialize:function(){this.shouldDisable=this.getOption("shouldDisable")},shouldDisable:function(){return this.view.collection.length<2},collectionEvents:{"update change:id":"updateDisabled"},updateDisabled:function(){var e=this.shouldDisable();this.view.$el.toggleClass("is-draggable",!e),this.sortable.option("disabled",e)},onRender:function(){this.sortable&&this.sortable.destroy(),this.sortable=or.ZP.create(this.el,{handle:this.getOption("handle"),item:this.getOption("item"),direction:"vertical",onEnd:this.onEnd.bind(this),onStart:this.onStart.bind(this)}),this.updateDisabled()},onBeforeDestroy:function(){this.sortable.destroy()},onEnd:function(e){var t=e.oldIndex,n=e.newIndex,a=this.view.collection.models[t];this.view.$el.removeClass("is-dragging"),this.view.collection.models.splice(t,1),this.view.collection.models.splice(n,0,a),this.view.triggerMethod("drag:end",a)},onStart:function(e){var t=e.oldIndex,n=this.view.collection.models[t];this.view.$el.addClass("is-dragging"),this.view.triggerMethod("drag:start",n)}}),rr=n(2886),cr=n.n(rr),ur=n(2269),dr=n.n(ur);function mr(e){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var pr=h.View.extend({modelEvents:{"change:name":"render"},initialize:function(e){var t=e.program;this.program=t,this.listenTo(this.program,"change:name",this.render)},className:"program-flow__context-trail",template:p().template({1:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="js-back program-flow__context-link">\n        '+r((c(n,"fas")||t&&c(t,"fas")||s).call(o,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:8},end:{line:4,column:30}}}))+r(e.lambda((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"admin"))&&c(l,"program"))&&c(l,"flowViews"))&&c(l,"contextBackBtn"),t))+"\n      </a>\n      "+r((c(n,"fas")||t&&c(t,"fas")||s).call(o,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:29}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+(null!=(l=d(n,"if").call(s,null!=t?d(t,"hasLatestList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:4},end:{line:7,column:11}}}))?l:"")+'    <a class="js-program program-flow__context-link">'+u(mr(o=null!=(o=d(n,"programName")||(null!=t?d(t,"programName"):t))?o:r)===c?o.call(s,{name:"programName",hash:{},data:i,loc:{start:{line:8,column:53},end:{line:8,column:70}}}):o)+"</a>"+u((d(n,"fas")||t&&d(t,"fas")||r).call(s,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:74},end:{line:8,column:97}}}))+u(mr(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===c?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:8,column:97},end:{line:8,column:107}}}):o)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back","click .js-program":"click:program"},onClickBack:function(){o().request("history","go:latestList")},onClickProgram:function(){o().trigger("event-router","program:details",this.program.id)},templateContext:function(){return{hasLatestList:o().request("history","has:latestList"),programName:this.program.get("name")}}}),hr=h.View.extend({modelEvents:{editing:"onEditing",change:"render"},onEditing:function(e){this.ui.flow.toggleClass("is-selected",e)},template:dr(),regions:{published:"[data-published-region]",owner:"[data-owner-region]"},triggers:{"click @ui.flow":"edit","click .js-add-action":"click:addAction"},ui:{flow:".js-flow"},onRender:function(){this.showPublished(),this.showOwner()},showPublished:function(){var e=this,t=new Ht({flow:this.model,status:this.model.get("status"),isCompact:!0});this.listenTo(t,"change:status",(function(t){e.model.save({status:t})})),this.showChildView("published",t)},showOwner:function(){var e=this,t=new Wt({owner:this.model.getOwner(),isCompact:!0});this.listenTo(t,"change:owner",(function(t){e.model.saveOwner(t)})),this.showChildView("owner",t)}}),fr=h.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="program-flow__empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"program"))&&o(l,"flowViews"))&&o(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),gr=h.View.extend({modelEvents:{change:"render",editing:"onEditing"},className:function(){var e="table-list__item program-flow__action-item js-draggable";return this.model.isNew()?"".concat(e," is-selected"):e},template:cr(),templateContext:function(){return{hasForm:this.model.getForm()}},tagName:"tr",regions:{published:"[data-published-region]",owner:"[data-owner-region]",due:"[data-due-region]"},ui:{form:".js-form"},triggers:{click:"click","click @ui.form":"click:form"},onClick:function(){this.model.isNew()?o().trigger("event-router","programFlow:action:new",this.model.get("_program_flow")):o().trigger("event-router","programFlow:action",this.model.get("_program_flow"),this.model.id)},onClickForm:function(){var e=this.model.getForm();o().trigger("event-router","form:preview",e.id)},onEditing:function(e){this.$el.toggleClass("is-selected",e)},onRender:function(){this.showPublished(),this.showOwner(),this.showDue()},showDue:function(){var e=this,t=this.model.isNew(),n=new _n({day:this.model.get("days_until_due"),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:day",(function(t){e.model.save({days_until_due:t})})),this.showChildView("due",n)},showPublished:function(){var e=this,t=this.model.isNew(),n=new Rt({status:this.model.get("status"),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:status",(function(t){e.model.save({status:t})})),this.showChildView("published",n)},showOwner:function(){var e=this,t=this.model.isNew(),n=new xn({owner:this.model.getOwner(),isCompact:!0,state:{isDisabled:t}});this.listenTo(n,"change:owner",(function(t){e.model.saveOwner(t)})),this.showChildView("owner",n)}}),wr=h.CollectionView.extend({behaviors:[{behaviorClass:sr,shouldDisable:function(){return this.view.collection.length<2||this.view.collection.last().isNew()}}],collectionEvents:{"change:id":"onChangeId"},className:"table-list program-flow__list",tagName:"table",childView:gr,emptyView:fr,onDragEnd:function(){this.collection.updateSequences()},onChangeId:function(){this.collection.updateSequences()}}),vr=h.View.extend({className:"program-flow__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n    <div class="program-flow__layout">\n      <div data-context-trail-region></div>\n      <div data-header-region></div>\n      <div data-action-list-region></div>\n    </div>\n    <div class="program-flow__sidebar" data-sidebar-region></div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},header:"[data-header-region]",sidebar:"[data-sidebar-region]",actionList:{el:"[data-action-list-region]",regionClass:y.Z,replaceElement:!0}}});function br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var _r=Ni.extend({routerAppName:"ProgramFlowApp",childApps:{action:Xs},eventRoutes:{"programFlow:action":"showActionSidebar","programFlow:action:new":"showActionSidebar"},onBeforeStart:function(){this.showView(new vr)},beforeStart:function(e){var t=e.flowId;return[o().request("entities","fetch:programs:model:byProgramFlow",t),o().request("entities","fetch:programFlows:model",t),o().request("entities","fetch:programActions:collection:byProgramFlow",t)]},onFail:function(){o().trigger("event-router","notFound"),this.stop()},onStart:function(e,t,n,a){e.currentRoute;var i=br(t,1)[0],l=br(n,1)[0],o=br(a,1)[0];this.program=i,this.flow=l,this.actions=o,this.maintainFlowActions(),this.showChildView("contextTrail",new pr({model:this.flow,program:this.program})),this.showHeader(),this.showActionList(),this.showProgramSidebar()},maintainFlowActions:function(){var e=this;this.listenTo(this.actions,"change:id destroy",(function(){var t=e.actions.map((function(e){return{id:e.id}}));e.flow.set("_program_actions",t)}))},showHeader:function(){var e=this,t=new hr({model:this.flow});this.listenTo(t,{edit:this.onEditFlow,"click:addAction":function(){o().trigger("event-router","programFlow:action:new",e.flow.id)}}),this.showChildView("header",t)},showActionList:function(){this.showChildView("actionList",new wr({collection:this.actions}))},showProgramSidebar:function(){var e=new ir({model:this.program});this.listenTo(e,{edit:this.onEditProgram}),this.showChildView("sidebar",e)},showActionSidebar:function(e,t){var n=this.getChildApp("action");this.listenToOnce(n,{start:function(e,t){this.editAction(t)}}),this.startChildApp("action",{actionId:t,flowId:e})},editAction:function(e){if(e.isNew())return e.set({sequence:this.actions.length}),void this.actions.add(e);e.trigger("editing",!0)},onEditProgram:function(){o().request("sidebar","start","program",{program:this.program})},onEditFlow:function(){o().request("sidebar","start","programFlow",{flow:this.flow})}}),xr=h.Behavior.extend({modelEvents:{editing:"onEditing",change:"onChange"},onChange:function(){this.view.render()},onEditing:function(e){this.$el.toggleClass("is-selected",e)},onInitialize:function(){this.view.model.isNew()&&this.$el.addClass("is-selected")}}),kr=h.View.extend({tagName:"tr",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-empty-list">\n      <h2>'+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"list"))&&o(l,"cliniciansAllViews"))&&o(l,"emptyView"),t))+"</h2>\n    </td>\n  "},useData:!0})}),Cr=h.View.extend({className:"table-list__item",behaviors:[xr],tagName:"tr",regions:{role:"[data-role-region]",access:"[data-access-region]",state:"[data-state-region]"},triggers:{click:"click"},template:p().template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"list"))&&o(l,"cliniciansAllViews"))&&o(l,"itemView"))&&o(l,"newClinician"),t))},3:function(e,t,n,a,i){return"table-list__cell--empty"},5:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(l=o(n,"unless").call(null!=t?t:e.nullContext||{},i&&o(i,"first"),{name:"unless",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:107},end:{line:3,column:138}}}))?l:"")+e.escapeExpression(e.lambda(null!=t?o(t,"name"):t,t))},6:function(e,t,n,a,i){return", "},8:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"list"))&&o(l,"cliniciansAllViews"))&&o(l,"itemView"))&&o(l,"noGroups"),t))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-list__cell w-20">'+(null!=(l=u(n,"unless").call(s,null!=t?u(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:38},end:{line:2,column:128}}}))?l:"")+c("function"==typeof(o=null!=(o=u(n,"name")||(null!=t?u(t,"name"):t))?o:r)?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:2,column:128},end:{line:2,column:138}}}):o)+'</td>\n    <td class="table-list__cell w-30 '+(null!=(l=u(n,"unless").call(s,null!=t?u(t,"groups"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:37},end:{line:3,column:89}}}))?l:"")+'">'+(null!=(l=u(n,"each").call(s,null!=t?u(t,"groups"):t,{name:"each",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:91},end:{line:3,column:162}}}))?l:"")+(null!=(l=u(n,"unless").call(s,null!=t?u(t,"groups"):t,{name:"unless",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:162},end:{line:3,column:250}}}))?l:"")+'</td>\n    <td class="table-list__cell w-30"><div class="clinician-state" data-state-region></div><span class="u-margin--r-8" data-access-region></span><span data-role-region></span></td>\n    <td class="table-list__cell w-20 '+(null!=(l=u(n,"unless").call(s,null!=t?u(t,"last_active_at"):t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:37},end:{line:5,column:97}}}))?l:"")+'">'+c((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||r).call(s,null!=t?u(t,"last_active_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{defaultHtml:(u(n,"intlGet")||t&&u(t,"intlGet")||r).call(s,"admin.list.cliniciansAllViews.itemView.noLastActive",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:157},end:{line:5,column:220}}})},data:i,loc:{start:{line:5,column:99},end:{line:5,column:222}}}))+"</td>\n  "},useData:!0}),templateContext:function(){return{groups:(0,i.sortBy)((0,i.map)(this.model.getGroups().models,"attributes"),"name")}},onRender:function(){this.showRole(),this.showAccess(),this.showState()},onClick:function(){this.model.isNew()||o().trigger("event-router","clinician",this.model.id)},showState:function(){this.showChildView("state",new Xn({model:this.model,isCompact:!0}))},showAccess:function(){var e=this,t=new Bn({access:this.model.get("access"),isCompact:!0});this.listenTo(t,"change:access",(function(t){e.model.save({access:t})})),this.showChildView("access",t)},showRole:function(){var e=this,t=new Zt({role:this.model.getRole(),isCompact:!0});this.listenTo(t,"change:role",(function(t){e.model.saveRole(t)})),this.showChildView("role",t)}}),Or=h.View.extend({className:"flex-region",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="list-page__header">\n      <div class="list-page__title">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"list"))&&r(l,"cliniciansAllViews"))&&r(l,"layoutView"))&&r(l,"title"),t))+'</div>\n      <button class="button-primary js-add-clinician">'+s((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"plus-circle",{name:"far",hash:{},data:i,loc:{start:{line:4,column:54},end:{line:4,column:75}}}))+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"list"))&&r(l,"cliniciansAllViews"))&&r(l,"layoutView"))&&r(l,"addClinicianButton"),t))+'</button>\n    </div>\n    <div class="flex-region list-page__list">\n      <table class="w-100"><tr>\n        <td class="table-list__header w-20">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"list"))&&r(l,"cliniciansAllViews"))&&r(l,"layoutView"))&&r(l,"clinicianHeader"),t))+'</td>\n        <td class="table-list__header w-30">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"list"))&&r(l,"cliniciansAllViews"))&&r(l,"layoutView"))&&r(l,"groupsHeader"),t))+'</td>\n        <td class="table-list__header w-30">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"list"))&&r(l,"cliniciansAllViews"))&&r(l,"layoutView"))&&r(l,"attributesHeader"),t))+'</td>\n        <td class="table-list__header w-20">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"list"))&&r(l,"cliniciansAllViews"))&&r(l,"layoutView"))&&r(l,"lastActiveHeader"),t))+'</td>\n      </tr></table>\n      <div class="flex-region" data-list-region></div>\n    </div>\n  '},useData:!0}),regions:{list:{el:"[data-list-region]",regionClass:y.Z},sidebar:"[data-sidebar-region]",addClinician:{el:"[data-add-region]",replaceElement:!0}},triggers:{"click .js-add-clinician":"click:addClinician"}}),Tr=h.CollectionView.extend({className:"table-list",tagName:"table",childView:Cr,emptyView:kr,collectionEvents:{"change:name":"sort"},viewComparator:function(e){var t=e.model;return String(t.get("name")).toLowerCase()}}),Sr=Ni.extend({routerAppName:"CliniciansApp",eventRoutes:{clinician:"showClinicianSidebar","clinician:new":"showClinicianSidebar"},viewEvents:{"click:addClinician":"onClickAddClinician"},onBeforeStart:function(){this.showView(new Or),this.getRegion("list").startPreloader(),this.clinicians=o().request("entities","clinicians:collection")},beforeStart:function(){return o().request("entities","fetch:clinicians:collection")},onStart:function(e,t){var n=e.currentRoute;this.clinicians.add(t.models),this.showChildView("list",new Tr({collection:this.clinicians})),this.startRoute(n)},_getClinician:function(e){return e?this.clinicians.get(e):o().request("entities","clinicians:model",{access:"employee"})},showClinicianSidebar:function(e){var t=this._getClinician(e);if(!t)return o().request("alert","show:error",f.ZP.admin.list.cliniciansAllApp.notFound),void o().trigger("event-router","clinicians:all");o().request("sidebar","start","clinician",{clinician:t}),this.editClinician(t)},editClinician:function(e){e.isNew()?this.clinicians.unshift(e):e.trigger("editing",!0)},onClickAddClinician:function(){o().trigger("event-router","clinician:new")}}),Dr=h.View.extend({template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <td class="table-list__cell w-100">'+e.escapeExpression("function"==typeof(l=null!=(l=o(n,"name")||(null!=t?o(t,"name"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:i,loc:{start:{line:2,column:39},end:{line:2,column:49}}}):l)+"</td>\n  "},useData:!0}),className:"table-list__item",tagName:"tr",triggers:{click:"click"},onClick:function(){o().trigger("event-router","report",this.model.id)}}),Pr=h.CollectionView.extend({childView:Dr,className:"table-list",tagName:"table"}),Vr=h.View.extend({className:"flex-region",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <div class="list-page__header">\n    <div class="list-page__title">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"list"))&&r(l,"reportsAllViews"))&&r(l,"layoutView"))&&r(l,"title"),t))+'</div>\n  </div>\n  <div class="flex-region list-page__list">\n    <table class="w-100"><tr>\n      <td class="table-list__header w-100">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"admin"))&&r(l,"list"))&&r(l,"reportsAllViews"))&&r(l,"layoutView"))&&r(l,"nameHeader"),t))+'</td>\n    </tr></table>\n    <div class="flex-region" data-list-region></div>\n  </div>\n  '},useData:!0}),regions:{list:{el:"[data-list-region]",regionClass:y.Z}}}),Mr=s.Z.extend({onBeforeStart:function(){this.showView(new Vr),this.getRegion("list").startPreloader()},beforeStart:function(){return o().request("entities","fetch:reports:collection")},onStart:function(e,t){this.programs=t,this.showChildView("list",new Pr({collection:t}))}}),Er=h.View.extend({className:"report__context-trail",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <a class="js-back report__context-link">\n      '+c((u(n,"fas")||t&&u(t,"fas")||r).call(s,"chevron-left",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:6},end:{line:3,column:28}}}))+c(e.lambda((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"report"))&&u(l,"reportViews"))&&u(l,"contextTrailView"))&&u(l,"contextBackBtn"),t))+"\n    </a>\n    "+c((u(n,"fas")||t&&u(t,"fas")||r).call(s,"chevron-right",{name:"fas",hash:{},data:i,loc:{start:{line:5,column:4},end:{line:5,column:27}}}))+c("function"==typeof(o=null!=(o=u(n,"name")||(null!=t?u(t,"name"):t))?o:r)?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:5,column:27},end:{line:5,column:37}}}):o)+"\n  "},useData:!0}),triggers:{"click .js-back":"click:back"},onClickBack:function(){o().trigger("event-router","reports:all")}}),jr=h.View.extend({className:"report__frame",template:p().template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'\n  <div class="report__layout">\n    <div data-context-trail-region></div>\n    <div class="report__iframe" data-report-region>\n      <iframe src=""></iframe>\n    </div>\n  </div>\n  '},useData:!0}),regions:{contextTrail:{el:"[data-context-trail-region]",replaceElement:!0},report:{el:"[data-report-region]",regionClass:y.Z}}}),Ar=s.Z.extend({onBeforeStart:function(){this.showView(new jr),this.getRegion("report").startPreloader()},beforeStart:function(e){var t=e.reportId;return o().request("entities","fetch:reports:model",t)},onStart:function(e,t){this.report=t,this.showChildView("contextTrail",new Er({model:this.report}))},onFail:function(){o().request("alert","show:error",f.ZP.admin.report.reportApp.notFound),o().trigger("event-router","reports:all"),this.stop()}}),Nr=Ga.Z.extend({routerAppName:"AdminApp",childApps:{cliniciansAll:Sr,programsAll:Es,program:lr,programflow:_r,reportsAll:Mr,report:Ar},eventRoutes:{"programs:all":{action:"showProgramsAll",route:"programs",isList:!0},"program:details":{action:"showProgram",route:"program/:id"},"program:action":{action:"showProgram",route:"program/:id/action/:id"},"program:action:new":{action:"showProgram",route:"program/:id/action"},"programFlow:new":{action:"showProgram",route:"program/:id/flow"},programFlow:{action:"showProgramFlow",route:"program-flow/:id"},"programFlow:action":{action:"showProgramFlow",route:"program-flow/:id/action/:id"},"programFlow:action:new":{action:"showProgramFlow",route:"program-flow/:id/action"},"clinicians:all":{action:"showCliniciansAll",route:"clinicians",isList:!0},clinician:{action:"showCliniciansAll",route:"clinicians/:id"},"clinician:new":{action:"showCliniciansAll",route:"clinicians/new"},"reports:all":{action:"showReportsAll",route:"reports",isList:!0},report:{action:"showReport",route:"reports/:id"}},showProgramsAll:function(){this.startCurrent("programsAll")},showProgram:function(e){this.startRoute("program",{programId:e})},showProgramFlow:function(e){this.startRoute("programflow",{flowId:e})},showCliniciansAll:function(){this.startRoute("cliniciansAll")},showReportsAll:function(){this.startRoute("reportsAll")},showReport:function(e){this.startRoute("report",{reportId:e})}}),Fr=s.Z.extend({onStart:function(){var e=o().request("bootstrap","currentUser");new ca({region:this.getRegion("sidebar")}),new Ra({region:this.getRegion("nav")}),new Ss({region:this.getRegion("content")}),e.can("admin")&&new Nr({region:this.getRegion("content")}),this.initFormsApp(),this.initCheckInsApp()},initFormsApp:function(){var e=new xi({region:this.getRegion("content")});this.listenTo(e,{start:(0,i.partial)(this.toggleNav,!1),stop:(0,i.partial)(this.toggleNav,!0)})},initCheckInsApp:function(){var e=new Ai({region:this.getRegion("content")});this.listenTo(e,{start:(0,i.partial)(this.toggleNav,!1),stop:(0,i.partial)(this.toggleNav,!0)})},toggleNav:function(e){this.getView().toggleNav(!!e)}})},2886:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"program"))&&o(l,"flow"))&&o(l,"actionItemTemplate"))&&o(l,"newProgramFlowAction"),t))+"</em>"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <button class="js-form button-secondary--compact is-icon-only">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"poll-h",{name:"far",hash:{},data:i,loc:{start:{line:15,column:71},end:{line:15,column:87}}}))+"</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell w-40">\n  <span class="program-flow__action-icon">'+c((d(n,"far")||t&&d(t,"far")||r).call(s,"file-alt",{name:"far",hash:{},data:i,loc:{start:{line:2,column:42},end:{line:2,column:60}}}))+"</span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:67},end:{line:2,column:92}}}):o)+'<span class="program-flow__action-name">\n    '+c(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===u?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:14}}}):o)+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:39}}}):o)+(null!=(l=d(n,"unless").call(s,null!=t?d(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:5,column:112}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell w-60">\n  <div class="pos--relative">\n    <span class="table-list__meta" data-published-region></span>'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:64},end:{line:10,column:89}}}):o)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:60},end:{line:11,column:85}}}):o)+'<span class="table-list__meta" data-due-region></span>'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:58},end:{line:12,column:83}}}):o)+'<span class="table-list__meta">\n'+(null!=(l=d(n,"if").call(s,null!=t?d(t,"hasForm"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:14,column:6},end:{line:16,column:14}}}))?l:"")+"    </span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:17,column:11},end:{line:17,column:36}}}):o)+'<span class="program-flow__action-ts">'+c((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||r).call(s,null!=t?d(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:18,column:42},end:{line:18,column:85}}}))+'</span>\n    <span class="program-flow__sort-handle js-sort">'+c((d(n,"fas")||t&&d(t,"fas")||r).call(s,"grip-vertical",{name:"fas",hash:{},data:i,loc:{start:{line:19,column:52},end:{line:19,column:75}}}))+"</span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:19,column:82},end:{line:19,column:107}}}):o)+"</div>\n</td>\n"},useData:!0})},2269:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"      "+e.escapeExpression("function"==typeof(l=null!=(l=o(n,"details")||(null!=t?o(t,"details"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"details",hash:{},data:i,loc:{start:{line:6,column:6},end:{line:6,column:19}}}):l)+"\n"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button class="program-flow__meta button-secondary">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"edit",{name:"far",hash:{},data:i,loc:{start:{line:8,column:58},end:{line:8,column:72}}}))+" Add Details</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="program-flow__header js-flow">\n  <h1 class="program-flow__name">'+c((d(n,"fas")||t&&d(t,"fas")||r).call(s,"folder-open",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:33},end:{line:2,column:54}}}))+" "+c(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===u?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:2,column:55},end:{line:2,column:65}}}):o)+'</h1>\n  <div>\n    <p class="program-flow__details">\n'+(null!=(l=d(n,"if").call(s,null!=t?d(t,"details"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:5,column:4},end:{line:9,column:11}}}))?l:"")+"    </p>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:8},end:{line:10,column:33}}}):o)+'<span class="program-flow__meta" data-published-region></span>\n    <span class="program-flow__meta" data-owner-region></span>\n  </div>\n</div>\n<div class="program-flow__actions">\n  <button class="button-primary js-add-action">'+c((d(n,"far")||t&&d(t,"far")||r).call(s,"plus-circle",{name:"far",hash:{},data:i,loc:{start:{line:16,column:47},end:{line:16,column:68}}}))+c(e.lambda((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"admin"))&&d(l,"program"))&&d(l,"flow"))&&d(l,"headerTemplate"))&&d(l,"action"),t))+"</button>\n</div>\n"},useData:!0})},8055:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(l=null!=(l=o(n,"details")||(null!=t?o(t,"details"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"details",hash:{},data:i,loc:{start:{line:5,column:22},end:{line:5,column:35}}}):l)},3:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="program-sidebar--no-results">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"program"))&&o(l,"sidebar"))&&o(l,"sidebarLayoutTemplate"))&&o(l,"noDetails"),t))+"</span>"},5:function(e,t,n,a,i){return" is-published"},7:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-on",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:21},end:{line:8,column:40}}}))},9:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-off",{name:"far",hash:{},data:i,loc:{start:{line:8,column:48},end:{line:8,column:68}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h1 class="program-sidebar__name">'+c("function"==typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:34},end:{line:1,column:44}}}):o)+'</h1>\n<button class="button--icon program-sidebar__context-menu js-menu">'+c((d(n,"far")||t&&d(t,"far")||r).call(s,"ellipsis-h",{name:"far",hash:{},data:i,loc:{start:{line:2,column:67},end:{line:2,column:87}}}))+'</button>\n<div class="u-margin--t-16">\n  <div class="program-sidebar__heading">'+c(u((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"admin"))&&d(l,"program"))&&d(l,"sidebar"))&&d(l,"sidebarLayoutTemplate"))&&d(l,"description"),t))+"</div>\n  <div>"+(null!=(l=d(n,"if").call(s,null!=t?d(t,"details"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:5,column:7},end:{line:5,column:164}}}))?l:"")+'</div>\n  <div class="program-sidebar__heading">'+c(u((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"admin"))&&d(l,"program"))&&d(l,"sidebar"))&&d(l,"sidebarLayoutTemplate"))&&d(l,"state"),t))+'</div>\n  <div class="program-sidebar__published'+(null!=(l=d(n,"if").call(s,null!=t?d(t,"published"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:7,column:40},end:{line:7,column:77}}}))?l:"")+'">\n    '+(null!=(l=d(n,"if").call(s,null!=t?d(t,"published"):t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i,loc:{start:{line:8,column:4},end:{line:8,column:75}}}))?l:"")+"\n    "+c((d(n,"formatMessage")||t&&d(t,"formatMessage")||r).call(s,(d(n,"intlGet")||t&&d(t,"intlGet")||r).call(s,"admin.program.sidebar.sidebarLayoutTemplate.published",{name:"intlGet",hash:{},data:i,loc:{start:{line:9,column:20},end:{line:9,column:85}}}),{name:"formatMessage",hash:{published:null!=t?d(t,"published"):t},data:i,loc:{start:{line:9,column:4},end:{line:9,column:107}}}))+"\n  </div>\n</div>\n"},useData:!0})},6060:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"program"))&&o(l,"workflows"))&&o(l,"actionItemTemplate"))&&o(l,"newProgramAction"),t))+"</em>"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button class="js-form button-secondary--compact is-icon-only">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"poll-h",{name:"far",hash:{},data:i,loc:{start:{line:14,column:69},end:{line:14,column:85}}}))+"</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell w-40">\n  <span class="workflows__action-icon">'+c((d(n,"far")||t&&d(t,"far")||r).call(s,"file-alt",{name:"far",hash:{},data:i,loc:{start:{line:2,column:39},end:{line:2,column:57}}}))+"</span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:64},end:{line:2,column:89}}}):o)+'<span class="workflows__action-name">\n    '+c(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===u?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:14}}}):o)+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:39}}}):o)+(null!=(l=d(n,"unless").call(s,null!=t?d(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:5,column:113}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell w-60">\n  <span class="table-list__meta" data-published-region></span>'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:62},end:{line:9,column:87}}}):o)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:58},end:{line:10,column:83}}}):o)+'<span class="table-list__meta" data-due-region></span>'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:56},end:{line:11,column:81}}}):o)+'<span class="table-list__meta">\n'+(null!=(l=d(n,"if").call(s,null!=t?d(t,"hasForm"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:13,column:4},end:{line:15,column:12}}}))?l:"")+"  </span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:9},end:{line:16,column:34}}}):o)+'<span class="workflows__item-ts">'+c((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||r).call(s,null!=t?d(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:17,column:35},end:{line:17,column:78}}}))+"</span>\n</td>\n"},useData:!0})},7479:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"program"))&&o(l,"workflows"))&&o(l,"flowItemTemplate"))&&o(l,"newProgramFlow"),t))+"</em>"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="workflows-action--published">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"play-circle",{name:"far",hash:{},data:i,loc:{start:{line:11,column:48},end:{line:11,column:69}}}))+"</span>\n"},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="workflows-action--draft">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"edit",{name:"far",hash:{},data:i,loc:{start:{line:13,column:44},end:{line:13,column:58}}}))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell w-40">\n  <span class="workflows__flow-icon">'+c((d(n,"fas")||t&&d(t,"fas")||r).call(s,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:37},end:{line:2,column:53}}}))+"</span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:60},end:{line:2,column:85}}}):o)+'<span class="workflows__flow-name">\n    '+c(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===u?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:14}}}):o)+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:39}}}):o)+(null!=(l=d(n,"unless").call(s,null!=t?d(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:5,column:109}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell w-60">\n  <span class="table-list__meta workflows__flow-status">\n'+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isPublished"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:10,column:4},end:{line:14,column:11}}}))?l:"")+"  </span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:15,column:9},end:{line:15,column:34}}}):o)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:58},end:{line:16,column:83}}}):o)+'<span class="workflows__item-ts">'+c((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||r).call(s,null!=t?d(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:17,column:35},end:{line:17,column:78}}}))+"</span>\n</td>\n"},useData:!0})},4012:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div>\n  <span class="workflows__tab--selected">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"program"))&&o(l,"workflows"))&&o(l,"layoutTemplate"))&&o(l,"workflowsLabel"),t))+'</span>\n</div>\n<div class="workflows__actions" data-add-region></div>\n<div data-content-region></div>\n'},useData:!0})},4722:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+s(e.lambda((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"admin"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionDetailsTemplate"))&&d(l,"placeholder"),t))+'">'+s(typeof(o=null!=(o=d(n,"details")||(null!=t?d(t,"details"):t))?o:c)===u?o.call(r,{name:"details",hash:{},data:i,loc:{start:{line:1,column:145},end:{line:1,column:158}}}):o)+'</textarea>\n<div class="textarea-flex__container input-secondary sidebar__details js-spacer">'+s(typeof(o=null!=(o=d(n,"details")||(null!=t?d(t,"details"):t))?o:c)===u?o.call(r,{name:"details",hash:{},data:i,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):o)+" </div>\n"},useData:!0})},3676:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' placeholder="'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"actionNameTemplate"))&&o(l,"placeholder"),t))+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-primary textarea-flex__input js-input"'+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isNew"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:61},end:{line:1,column:159}}}))?l:"")+">"+u(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===c?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:160},end:{line:1,column:170}}}):o)+'</textarea>\n<div class="textarea-flex__container input-primary js-spacer">'+u(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===c?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:2,column:62},end:{line:2,column:72}}}):o)+" </div>\n"},useData:!0})},8408:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">'+s(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarTemplate"))&&u(l,"headingText"),t))+'</h3>\n    </div>\n    <div>\n      <button class="button--icon u-margin--r-8 js-menu">'+s((u(n,"far")||t&&u(t,"far")||c).call(r,"ellipsis-h",{name:"far",hash:{},data:i,loc:{start:{line:7,column:57},end:{line:7,column:77}}}))+'</button>\n      <button class="button--icon js-close">'+s((u(n,"fas")||t&&u(t,"fas")||c).call(r,"times",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-details-region></div>\n    <div data-save-region></div>\n\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarTemplate"))&&u(l,"publishedLabel"),t))+'</h4><div class="flex-grow" data-published-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarTemplate"))&&u(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarTemplate"))&&u(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarTemplate"))&&u(l,"dueDayLabel"),t))+'</h4><div class="flex-grow" data-due-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"action"))&&u(l,"actionSidebarTemplate"))&&u(l,"formLabel"),t))+'</h4><div class="flex-grow" data-form-region></div></div>\n  </div>\n</div>\n<div data-timestamps-region></div>\n'},useData:!0})},2056:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <button class="button--icon u-margin--r-8 js-menu">'+e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"ellipsis-h",{name:"far",hash:{},data:i,loc:{start:{line:8,column:59},end:{line:8,column:79}}}))+"</button>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.escapeExpression,r=e.lambda,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">Clinician</h3>\n    </div>\n    <div>\n'+(null!=(l=c(n,"if").call(o,null!=t?c(t,"showDelete"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:7,column:6},end:{line:9,column:13}}}))?l:"")+'      <button class="button--icon js-close">'+s((c(n,"fas")||t&&c(t,"fas")||e.hooks.helperMissing).call(o,"times",{name:"fas",hash:{},data:i,loc:{start:{line:10,column:44},end:{line:10,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-email-region></div>\n    <div data-save-region></div>\n\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+s(r((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"admin"))&&c(l,"sidebar"))&&c(l,"clinician"))&&c(l,"clinicianSidebarTemplate"))&&c(l,"state"),t))+'</h4><div class="flex-grow u-margin--t-8 clinician-state" data-state-region></div></div>\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+s(r((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"admin"))&&c(l,"sidebar"))&&c(l,"clinician"))&&c(l,"clinicianSidebarTemplate"))&&c(l,"accessType"),t))+'</h4><div class="flex-grow" data-access-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(r((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"admin"))&&c(l,"sidebar"))&&c(l,"clinician"))&&c(l,"clinicianSidebarTemplate"))&&c(l,"role"),t))+'</h4><div class="flex-grow" data-role-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(r((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"admin"))&&c(l,"sidebar"))&&c(l,"clinician"))&&c(l,"clinicianSidebarTemplate"))&&c(l,"groups"),t))+'</h4><div class="flex-grow clinician-sidebar__groups" data-groups-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8"></h4><div class="flex-grow" data-info-region></div></div>\n  </div>\n</div>\n<div data-timestamps-region></div>\n'},useData:!0})},2633:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+s(e.lambda((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"admin"))&&d(l,"sidebar"))&&d(l,"flow"))&&d(l,"flowDetailsTemplate"))&&d(l,"placeholder"),t))+'">'+s(typeof(o=null!=(o=d(n,"details")||(null!=t?d(t,"details"):t))?o:c)===u?o.call(r,{name:"details",hash:{},data:i,loc:{start:{line:1,column:141},end:{line:1,column:154}}}):o)+'</textarea>\n<div class="textarea-flex__container input-secondary sidebar__details js-spacer">'+s(typeof(o=null!=(o=d(n,"details")||(null!=t?d(t,"details"):t))?o:c)===u?o.call(r,{name:"details",hash:{},data:i,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):o)+" </div>\n"},useData:!0})},4792:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' placeholder="'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"sidebar"))&&o(l,"flow"))&&o(l,"flowNameTemplate"))&&o(l,"placeholder"),t))+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-primary textarea-flex__input js-input"'+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isNew"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:61},end:{line:1,column:155}}}))?l:"")+">"+u(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===c?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:156},end:{line:1,column:166}}}):o)+'</textarea>\n<div class="textarea-flex__container input-primary js-spacer">'+u(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===c?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:2,column:62},end:{line:2,column:72}}}):o)+" </div>\n"},useData:!0})},204:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">'+s(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"flow"))&&u(l,"flowSidebarTemplate"))&&u(l,"headingText"),t))+'</h3>\n    </div>\n    <div>\n      <button class="button--icon u-margin--r-8 js-menu">'+s((u(n,"far")||t&&u(t,"far")||c).call(r,"ellipsis-h",{name:"far",hash:{},data:i,loc:{start:{line:7,column:57},end:{line:7,column:77}}}))+'</button>\n      <button class="button--icon js-close">'+s((u(n,"fas")||t&&u(t,"fas")||c).call(r,"times",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-details-region></div>\n    <div data-save-region></div>\n\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"flow"))&&u(l,"flowSidebarTemplate"))&&u(l,"publishedLabel"),t))+'</h4><div class="flex-grow" data-published-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"flow"))&&u(l,"flowSidebarTemplate"))&&u(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=(l=i&&u(i,"intl"))&&u(l,"admin"))&&u(l,"sidebar"))&&u(l,"flow"))&&u(l,"flowSidebarTemplate"))&&u(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n  </div>\n</div>\n<div data-timestamps-region></div>\n'},useData:!0})},1163:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-secondary textarea-flex__input js-input" placeholder="'+s(e.lambda((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"admin"))&&d(l,"sidebar"))&&d(l,"program"))&&d(l,"programDetailsTemplate"))&&d(l,"placeholder"),t))+'">'+s(typeof(o=null!=(o=d(n,"details")||(null!=t?d(t,"details"):t))?o:c)===u?o.call(r,{name:"details",hash:{},data:i,loc:{start:{line:1,column:147},end:{line:1,column:160}}}):o)+'</textarea>\n<div class="textarea-flex__container input-secondary sidebar__details js-spacer">'+s(typeof(o=null!=(o=d(n,"details")||(null!=t?d(t,"details"):t))?o:c)===u?o.call(r,{name:"details",hash:{},data:i,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):o)+" </div>\n"},useData:!0})},6947:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){return" has-error"},3:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' placeholder="'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"admin"))&&o(l,"sidebar"))&&o(l,"program"))&&o(l,"programNameTemplate"))&&o(l,"placeholder"),t))+'"'},5:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="form-error u-margin--b-4">'+e.escapeExpression("function"==typeof(l=null!=(l=o(n,"error")||(null!=t?o(t,"error"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"error",hash:{},data:i,loc:{start:{line:5,column:51},end:{line:5,column:62}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="pos--relative">\n  <textarea class="input-primary textarea-flex__input js-input'+(null!=(l=d(n,"if").call(s,null!=t?d(t,"error"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:62},end:{line:2,column:92}}}))?l:"")+'"'+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isNew"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:2,column:93},end:{line:2,column:193}}}))?l:"")+">"+u(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===c?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:2,column:194},end:{line:2,column:204}}}):o)+'</textarea>\n  <div class="textarea-flex__container input-primary js-spacer">'+u(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===c?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:3,column:64},end:{line:3,column:74}}}):o)+" </div>\n</div>\n"+(null!=(l=d(n,"if").call(s,null!=t?d(t,"error"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:0},end:{line:5,column:75}}}))?l:"")+"\n"},useData:!0})},3494:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">'+o(e.lambda((l=(l=(l=(l=(l=i&&s(i,"intl"))&&s(l,"admin"))&&s(l,"sidebar"))&&s(l,"program"))&&s(l,"programSidebarTemplate"))&&s(l,"headingText"),t))+'</h3>\n    </div>\n    <div>\n      <button class="button--icon js-close">'+o((s(n,"fas")||t&&s(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"times",{name:"fas",hash:{},data:i,loc:{start:{line:7,column:44},end:{line:7,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-details-region></div>\n    <div data-save-region></div>\n    <div class="u-margin--t-16" data-state-region></div>\n  </div>\n</div>\n<div data-timestamps-region></div>\n'},useData:!0})},4935:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){return" is-published"},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-on",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:21},end:{line:4,column:40}}}))},5:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"far")||t&&l(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"toggle-off",{name:"far",hash:{},data:i,loc:{start:{line:4,column:48},end:{line:4,column:68}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="u-margin--t-4 u-float--left">\n  <div class="programs-sidebar__label">'+o(e.lambda((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"admin"))&&c(l,"sidebar"))&&c(l,"program"))&&c(l,"programStateTemplate"))&&c(l,"stateLabel"),t))+'</div>\n  <div class="programs-sidebar__published'+(null!=(l=c(n,"if").call(s,null!=t?c(t,"published"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:3,column:41},end:{line:3,column:78}}}))?l:"")+'">\n    '+(null!=(l=c(n,"if").call(s,null!=t?c(t,"published"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i,loc:{start:{line:4,column:4},end:{line:4,column:75}}}))?l:"")+"\n    "+o((c(n,"formatMessage")||t&&c(t,"formatMessage")||r).call(s,(c(n,"intlGet")||t&&c(t,"intlGet")||r).call(s,"admin.sidebar.program.programStateTemplate.published",{name:"intlGet",hash:{},data:i,loc:{start:{line:5,column:20},end:{line:5,column:84}}}),{name:"formatMessage",hash:{published:null!=t?c(t,"published"):t},data:i,loc:{start:{line:5,column:4},end:{line:5,column:106}}}))+'\n  </div>\n</div>\n<button class="js-state-toggle button-secondary programs-sidebar__state-toggle '+(null!=(l=c(n,"unless").call(s,null!=t?c(t,"published"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:8,column:79},end:{line:8,column:124}}}))?l:"")+'">\n  '+(null!=(l=c(n,"if").call(s,null!=t?c(t,"published"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:9,column:2},end:{line:9,column:73}}}))?l:"")+"\n  "+o((c(n,"formatMessage")||t&&c(t,"formatMessage")||r).call(s,(c(n,"intlGet")||t&&c(t,"intlGet")||r).call(s,"admin.sidebar.program.programStateTemplate.toggle",{name:"intlGet",hash:{},data:i,loc:{start:{line:10,column:18},end:{line:10,column:79}}}),{name:"formatMessage",hash:{published:null!=t?c(t,"published"):t},data:i,loc:{start:{line:10,column:2},end:{line:10,column:101}}}))+"\n</button>\n"},useData:!0})},3016:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'  <div class="check-in__layout">\n    <div data-context-trail-region></div>\n    <div class="check-in__content" data-check-in-region></div>\n  </div>\n  <div class="check-in__sidebar" data-sidebar-region></div>\n'},useData:!0})},6105:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.escapeExpression,s=e.lambda,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal-body">\n  <div class="add-patient__heading">\n    <a href="#" class="modal-close add-patient__modal-close js-close">'+o((r(n,"fas")||t&&r(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"times",{name:"fas",hash:{},data:i,loc:{start:{line:3,column:70},end:{line:3,column:85}}}))+'</a>\n    <h2 class="add-patient__title">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"addPatient"))&&r(l,"addPatientTemplate"))&&r(l,"addPatient"),t))+'</h2>\n  </div>\n\n  <div class="add-patient__form-section flex"><div class="add-patient__label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"addPatient"))&&r(l,"addPatientTemplate"))&&r(l,"firstName"),t))+'</div><div class="flex-grow" data-first-name-region></div></div>\n  <div class="add-patient__form-section flex"><div class="add-patient__label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"addPatient"))&&r(l,"addPatientTemplate"))&&r(l,"lastName"),t))+'</div><div class="flex-grow" data-last-name-region></div></div>\n  <div class="add-patient__form-section flex"><div class="add-patient__label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"addPatient"))&&r(l,"addPatientTemplate"))&&r(l,"dateOfBirth"),t))+'</div><div data-dob-region></div></div>\n  <div class="add-patient__form-section flex"><div class="add-patient__label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"addPatient"))&&r(l,"addPatientTemplate"))&&r(l,"sex"),t))+'</div><div data-sex-region></div></div>\n  <div class="add-patient__form-section flex"><div class="add-patient__label">'+o(s((l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"globals"))&&r(l,"addPatient"))&&r(l,"addPatientTemplate"))&&r(l,"groups"),t))+'</div><div class="add-patient__groups" data-groups-region></div></div>\n\n  <div class="add-patient__footer flex">\n    <div data-save-region></div>\n    <div data-error-region class="add-patient__error"></div>\n  </div>\n</div>\n'},useData:!0})},947:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"patient"))&&o(l,"dashboard"))&&o(l,"dashboardViews"))&&o(l,"newAction"),t))+"</em>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell">\n  <span class="patient__action-icon">'+c((d(n,"far")||t&&d(t,"far")||r).call(s,"file-alt",{name:"far",hash:{},data:i,loc:{start:{line:2,column:37},end:{line:2,column:55}}}))+"</span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:62},end:{line:2,column:87}}}):o)+'<span class="patient__action-name">\n    '+c(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===u?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:14}}}):o)+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:39}}}):o)+(null!=(l=d(n,"unless").call(s,null!=t?d(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:5,column:105}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell patient__list-meta">\n  <span class="table-list__meta" data-state-region></span>'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:58},end:{line:9,column:83}}}):o)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:58},end:{line:10,column:83}}}):o)+'<span class="table-list__meta">'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:33},end:{line:11,column:58}}}):o)+"<span data-due-day-region></span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:37},end:{line:12,column:62}}}):o)+"<span data-due-time-region></span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:38},end:{line:13,column:63}}}):o)+"</span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:14,column:9},end:{line:14,column:34}}}):o)+'<span class="table-list__meta" data-form-region></span>'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:15,column:57},end:{line:15,column:82}}}):o)+'<span class="patient__action-ts">'+c((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||r).call(s,null!=t?d(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:16,column:35},end:{line:16,column:78}}}))+"</span>\n</td>\n"},useData:!0})},7405:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u="function",d=e.lambda,m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell">\n  <span class="patient__flow-icon">'+c((m(n,"fas")||t&&m(t,"fas")||r).call(s,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:35},end:{line:2,column:51}}}))+"</span>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:58},end:{line:2,column:83}}}):o)+'<span class="patient__action-name">'+c(typeof(o=null!=(o=m(n,"name")||(null!=t?m(t,"name"):t))?o:r)===u?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:3,column:37},end:{line:3,column:47}}}):o)+'</span>\n</td>\n<td class="table-list__cell patient__list-meta">\n  <span class="table-list__meta">'+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:33},end:{line:6,column:58}}}):o)+'<span class="patient__flow-status action--'+c(d(null!=(l=null!=t?m(t,"stateOptions"):t)?m(l,"color"):l,t))+'">'+c((m(n,"fa")||t&&m(t,"fa")||r).call(s,null!=(l=null!=t?m(t,"stateOptions"):t)?m(l,"iconType"):l,null!=(l=null!=t?m(t,"stateOptions"):t)?m(l,"icon"):l,{name:"fa",hash:{},data:i,loc:{start:{line:7,column:72},end:{line:7,column:118}}}))+"</span>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:125},end:{line:7,column:150}}}):o)+"</span>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:8,column:9},end:{line:8,column:34}}}):o)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:58},end:{line:9,column:83}}}):o)+'<progress class="progress-bar patient__flow-progress" value='+c(d(null!=(l=null!=t?m(t,"_progress"):t)?m(l,"complete"):l,t))+" max="+c(d(null!=(l=null!=t?m(t,"_progress"):t)?m(l,"total"):l,t))+"></progress>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:124},end:{line:10,column:149}}}):o)+'<span class="patient__action-ts">'+c((m(n,"formatDateTime")||t&&m(t,"formatDateTime")||r).call(s,null!=t?m(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:11,column:35},end:{line:11,column:78}}}))+"</span>\n</td>\n"},useData:!0})},1412:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div>\n  <span class="patient__tab--selected">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"dashboard"))&&r(l,"dashboardViews"))&&r(l,"dashboardBtn"),t))+'</span>\n  <button class="patient__tab js-data-events">'+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"dashboard"))&&r(l,"dashboardViews"))&&r(l,"dataEventsBtn"),t))+'</button>\n</div>\n<div class="patient__actions" data-add-workflow-region>\n  <span class="button-primary">\n    <span class="js-loading">'+s((r(n,"far")||t&&r(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"plus-circle",{name:"far",hash:{},data:i,loc:{start:{line:11,column:29},end:{line:11,column:50}}}))+s(o((l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"patient"))&&r(l,"dashboard"))&&r(l,"dashboardViews"))&&r(l,"actionLoading"),t))+"</span>\n  </span>\n</div>\n<div data-content-region></div>\n"},useData:!0})},3817:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,r=e.escapeExpression,c="function",u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell">\n  <span class="patient__action-icon">'+r((u(n,"far")||t&&u(t,"far")||s).call(o,"file-alt",{name:"far",hash:{},data:i,loc:{start:{line:2,column:37},end:{line:2,column:55}}}))+"</span>"+r(typeof(l=null!=(l=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?l:s)===c?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:62},end:{line:2,column:87}}}):l)+'<span class="patient__action-name">'+r(typeof(l=null!=(l=u(n,"name")||(null!=t?u(t,"name"):t))?l:s)===c?l.call(o,{name:"name",hash:{},data:i,loc:{start:{line:3,column:37},end:{line:3,column:47}}}):l)+'</span>\n</td>\n<td class="table-list__cell patient__list-meta">\n  <span class="table-list__meta" data-state-region></span>'+r(typeof(l=null!=(l=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?l:s)===c?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:58},end:{line:6,column:83}}}):l)+'<span class="table-list__meta" data-owner-region></span>'+r(typeof(l=null!=(l=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?l:s)===c?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:58},end:{line:7,column:83}}}):l)+'<span class="table-list__meta">'+r(typeof(l=null!=(l=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?l:s)===c?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:8,column:33},end:{line:8,column:58}}}):l)+"<span data-due-day-region></span>"+r(typeof(l=null!=(l=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?l:s)===c?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:37},end:{line:9,column:62}}}):l)+"<span data-due-time-region></span>"+r(typeof(l=null!=(l=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?l:s)===c?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:38},end:{line:10,column:63}}}):l)+"</span>"+r(typeof(l=null!=(l=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?l:s)===c?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:9},end:{line:11,column:34}}}):l)+'<span class="table-list__meta" data-form-region></span>'+r(typeof(l=null!=(l=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?l:s)===c?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:57},end:{line:12,column:82}}}):l)+'<span class="patient__action-ts">'+r((u(n,"formatDateTime")||t&&u(t,"formatDateTime")||s).call(o,null!=t?u(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:13,column:35},end:{line:13,column:78}}}))+"</span>"+r(typeof(l=null!=(l=u(n,"remove_whitespace")||(null!=t?u(t,"remove_whitespace"):t))?l:s)===c?l.call(o,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:85},end:{line:13,column:110}}}):l)+"</td>\n"},useData:!0})},3874:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u="function",d=e.lambda,m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <td class="table-list__cell">\n      <span class="patient__flow-icon">'+c((m(n,"fas")||t&&m(t,"fas")||r).call(s,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:2,column:39},end:{line:2,column:55}}}))+"</span>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:62},end:{line:2,column:87}}}):o)+'<span class="patient__action-name">'+c(typeof(o=null!=(o=m(n,"name")||(null!=t?m(t,"name"):t))?o:r)===u?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:3,column:41},end:{line:3,column:51}}}):o)+'</span>\n    </td>\n    <td class="table-list__cell patient__list-meta">\n      <span class="table-list__meta" data-state-region></span>'+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:62},end:{line:6,column:87}}}):o)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:62},end:{line:7,column:87}}}):o)+'<progress class="progress-bar patient__flow-progress" value='+c(d(null!=(l=null!=t?m(t,"_progress"):t)?m(l,"complete"):l,t))+" max="+c(d(null!=(l=null!=t?m(t,"_progress"):t)?m(l,"total"):l,t))+"></progress>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:8,column:128},end:{line:8,column:153}}}):o)+'<span class="patient__action-ts">'+c((m(n,"formatDateTime")||t&&m(t,"formatDateTime")||r).call(s,null!=t?m(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:9,column:39},end:{line:9,column:82}}}))+"</span>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:89},end:{line:9,column:114}}}):o)+"</td>\n"},useData:!0})},3754:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<em>"+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"patient"))&&o(l,"dashboard"))&&o(l,"dashboardViews"))&&o(l,"newAction"),t))+"</em>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell">\n  <span class="patient__action-icon">'+c((d(n,"far")||t&&d(t,"far")||r).call(s,"file-alt",{name:"far",hash:{},data:i,loc:{start:{line:2,column:37},end:{line:2,column:55}}}))+"</span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:2,column:62},end:{line:2,column:87}}}):o)+'<span class="patient__action-name">\n    '+c(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===u?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:4,column:4},end:{line:4,column:14}}}):o)+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:39}}}):o)+(null!=(l=d(n,"unless").call(s,null!=t?d(t,"name"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:5,column:4},end:{line:5,column:105}}}))?l:"")+'</span>\n</td>\n<td class="table-list__cell patient__list-meta">\n  <span class="table-list__meta" data-state-region></span>'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:9,column:58},end:{line:9,column:83}}}):o)+'<span class="table-list__meta" data-owner-region></span>'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:10,column:58},end:{line:10,column:83}}}):o)+'<span class="table-list__meta">'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:33},end:{line:11,column:58}}}):o)+"<span data-due-day-region></span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:37},end:{line:12,column:62}}}):o)+"<span data-due-time-region></span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:38},end:{line:13,column:63}}}):o)+"</span>"+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:14,column:9},end:{line:14,column:34}}}):o)+'<span class="table-list__meta" data-form-region></span>'+c(typeof(o=null!=(o=d(n,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:15,column:57},end:{line:15,column:82}}}):o)+'<span class="patient__action-ts">'+c((d(n,"formatDateTime")||t&&d(t,"formatDateTime")||r).call(s,null!=t?d(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:16,column:35},end:{line:16,column:78}}}))+"</span>\n</td>\n"},useData:!0})},4486:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.escapeExpression,u="function",d=e.lambda,m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h1 class="patient-flow__name">'+c((m(n,"fas")||t&&m(t,"fas")||r).call(s,"folder-open",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:31},end:{line:1,column:52}}}))+" "+c(typeof(o=null!=(o=m(n,"name")||(null!=t?m(t,"name"):t))?o:r)===u?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:53},end:{line:1,column:63}}}):o)+'</h1>\n<table class="table-list">\n  <td class="patient-flow__details">'+c(typeof(o=null!=(o=m(n,"details")||(null!=t?m(t,"details"):t))?o:r)===u?o.call(s,{name:"details",hash:{},data:i,loc:{start:{line:3,column:36},end:{line:3,column:49}}}):o)+"</td>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:3,column:54},end:{line:3,column:79}}}):o)+'<td class="patient-flow__meta">\n    <span class="table-list__meta" data-state-region></span>\n    <span class="table-list__meta" data-owner-region></span>\n    <progress class="js-progress progress-bar patient-flow__header__progress" value='+c(d(null!=(l=null!=t?m(t,"_progress"):t)?m(l,"complete"):l,t))+" max="+c(d(null!=(l=null!=t?m(t,"_progress"):t)?m(l,"total"):l,t))+"></progress>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:r)===u?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:146},end:{line:7,column:171}}}):o)+"</td>\n</table>\n"},useData:!0})},3538:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<div class="list-page__header">\n  <div class="list-page__title"><span data-title-region></span><span data-tooltip-region></span></div>\n  <div class="list-page__filters flex">\n    <div class="flex u-margin--r-16" data-select-all-region></div>\n    <div class="w-100" data-filters-region></div>\n    <div class="flex u-margin--r-16 u-text--nowrap" data-date-filter-region></div>\n  </div>\n  <table class="w-100" data-table-region></table>\n</div>\n<div class="flex-region list-page__list" data-list-region></div>\n'},useData:!0})},9584:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=e.lambda,r=e.escapeExpression,c=null!=t?t:e.nullContext||{},u=e.hooks.helperMissing,d="function",m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+r(s((l=(l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"shared"))&&m(l,"bulkEdit"))&&m(l,"bulkEditViews"))&&m(l,"bulkEditActionBodyTemplate"))&&m(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n<div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(s((l=(l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"shared"))&&m(l,"bulkEdit"))&&m(l,"bulkEditViews"))&&m(l,"bulkEditActionBodyTemplate"))&&m(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n<div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(s((l=(l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"shared"))&&m(l,"bulkEdit"))&&m(l,"bulkEditViews"))&&m(l,"bulkEditActionBodyTemplate"))&&m(l,"dueDateLabel"),t))+'</h4>\n  <div class="flex flex-grow">'+r(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:30},end:{line:4,column:55}}}):o)+'<div class="flex-grow" data-due-date-region></div>'+r(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:5,column:54},end:{line:5,column:79}}}):o)+'<div class="flex-grow" data-due-time-region></div>'+r(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:54},end:{line:6,column:79}}}):o)+'</div>\n</div>\n<div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(s((l=(l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"shared"))&&m(l,"bulkEdit"))&&m(l,"bulkEditViews"))&&m(l,"bulkEditActionBodyTemplate"))&&m(l,"durationLabel"),t))+'</h4><div class="flex-grow" data-duration-region></div></div>\n'},useData:!0})},330:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"shared"))&&r(l,"bulkEdit"))&&r(l,"bulkEditViews"))&&r(l,"bulkEditFlowBodyTemplate"))&&r(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n<div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+s(o((l=(l=(l=(l=(l=(l=i&&r(i,"intl"))&&r(l,"patients"))&&r(l,"shared"))&&r(l,"bulkEdit"))&&r(l,"bulkEditViews"))&&r(l,"bulkEditFlowBodyTemplate"))&&r(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n'},useData:!0})},3948:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){return" disabled"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.escapeExpression,c=e.hooks.helperMissing,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-secondary textarea-flex__input js-input"'+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:63},end:{line:1,column:97}}}))?l:"")+' placeholder="'+r(e.lambda((l=(l=(l=(l=(l=i&&d(i,"intl"))&&d(l,"patients"))&&d(l,"sidebar"))&&d(l,"action"))&&d(l,"actionDetailsTemplate"))&&d(l,"placeholder"),t))+'">'+r(typeof(o=null!=(o=d(n,"details")||(null!=t?d(t,"details"):t))?o:c)===u?o.call(s,{name:"details",hash:{},data:i,loc:{start:{line:1,column:182},end:{line:1,column:195}}}):o)+'</textarea>\n<div class="textarea-flex__container input-secondary sidebar__details js-spacer">'+r(typeof(o=null!=(o=d(n,"details")||(null!=t?d(t,"details"):t))?o:c)===u?o.call(s,{name:"details",hash:{},data:i,loc:{start:{line:2,column:81},end:{line:2,column:94}}}):o)+" </div>\n"},useData:!0})},8862:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){return" disabled"},3:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' placeholder="'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"actionNameTemplate"))&&o(l,"placeholder"),t))+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<textarea class="input-primary textarea-flex__input js-input"'+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isDisabled"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:61},end:{line:1,column:95}}}))?l:"")+(null!=(l=d(n,"if").call(s,null!=t?d(t,"isNew"):t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:95},end:{line:1,column:196}}}))?l:"")+">"+u(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===c?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:1,column:197},end:{line:1,column:207}}}):o)+'</textarea>\n<div class="textarea-flex__container input-primary js-spacer">'+u(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:r)===c?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:2,column:62},end:{line:2,column:72}}}):o)+" </div>\n"},useData:!0})},3855:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"actionSidebarTemplate"))&&o(l,"formLabel"),t))+'</h4><div class="flex-grow" data-form-region></div></div>\n'},3:function(e,t,n,a,i){return"    <div data-form-region></div>\n"},5:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="u-margin--t-24">\n    <h3 class="sidebar__heading">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"action"))&&o(l,"actionSidebarTemplate"))&&o(l,"activityHeadingText"),t))+'</h3>\n    <div class="u-margin--t-8 sidebar__activity" data-activity-region></div>\n  </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=e.lambda,r=e.escapeExpression,c=null!=t?t:e.nullContext||{},u=e.hooks.helperMissing,d="function",m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">'+r(s((l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"sidebar"))&&m(l,"action"))&&m(l,"actionSidebarTemplate"))&&m(l,"headingText"),t))+'</h3>\n    </div>\n    <div>\n      <button class="button--icon u-margin--r-8 js-menu">'+r((m(n,"far")||t&&m(t,"far")||u).call(c,"ellipsis-h",{name:"far",hash:{},data:i,loc:{start:{line:7,column:57},end:{line:7,column:77}}}))+'</button>\n      <button class="button--icon js-close">'+r((m(n,"fas")||t&&m(t,"fas")||u).call(c,"times",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div data-name-region></div>\n    <div class="u-margin--t-8" data-details-region></div>\n    <div data-save-region></div>\n\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+r(s((l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"sidebar"))&&m(l,"action"))&&m(l,"actionSidebarTemplate"))&&m(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(s((l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"sidebar"))&&m(l,"action"))&&m(l,"actionSidebarTemplate"))&&m(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(s((l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"sidebar"))&&m(l,"action"))&&m(l,"actionSidebarTemplate"))&&m(l,"dueDayLabel"),t))+'</h4>\n      <div class="flex flex-grow">'+r(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:19,column:34},end:{line:19,column:59}}}):o)+'<div class="flex-grow" data-due-day-region></div>'+r(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:20,column:57},end:{line:20,column:82}}}):o)+'<div class="flex-grow" data-due-time-region></div>'+r(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(c,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:21,column:58},end:{line:21,column:83}}}):o)+'</div>\n    </div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(s((l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"sidebar"))&&m(l,"action"))&&m(l,"actionSidebarTemplate"))&&m(l,"durationLabel"),t))+'</h4><div class="flex-grow" data-duration-region></div></div>\n'+(null!=(l=m(n,"if").call(c,null!=t?m(t,"hasForm"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:25,column:4},end:{line:29,column:11}}}))?l:"")+"  </div>\n"+(null!=(l=m(n,"unless").call(c,null!=t?m(t,"isNew"):t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:31,column:2},end:{line:36,column:13}}}))?l:"")+'</div>\n<div class="u-margin--t-16" data-comment-region></div>\n<div data-timestamps-region></div>\n'},useData:!0})},4320:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.escapeExpression,s=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="engagement-status__icon '+o(e.lambda(null!=(l=null!=t?c(t,"engagement"):t)?c(l,"status"):l,t))+' u-margin--r-4">'+o((c(n,"fas")||t&&c(t,"fas")||r).call(s,"circle",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:80},end:{line:4,column:96}}}))+"</span>"+o((c(n,"formatMessage")||t&&c(t,"formatMessage")||r).call(s,(c(n,"intlGet")||t&&c(t,"intlGet")||r).call(s,"patients.sidebar.engagement.engagementContentTemplate.status",{name:"intlGet",hash:{},data:i,loc:{start:{line:4,column:119},end:{line:4,column:191}}}),{name:"formatMessage",hash:{status:null!=(l=null!=t?c(t,"engagement"):t)?c(l,"status"):l},data:i,loc:{start:{line:4,column:103},end:{line:4,column:218}}}))+"\n"},3:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="engagement-sidebar__no-engagement">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"engagement"))&&o(l,"engagementContentTemplate"))&&o(l,"notAvailable"),t))+"</span>\n"},5:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"engagement"))&&o(l,"engagementContentTemplate"))&&o(l,"enabled"),t))+"\n"},7:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"engagement"))&&o(l,"engagementContentTemplate"))&&o(l,"disabled"),t))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="engagement-sidebar__heading">'+s(o((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"sidebar"))&&c(l,"engagement"))&&c(l,"engagementContentTemplate"))&&c(l,"statusHeading"),t))+'</div>\n<div class="engagement-sidebar__item">\n'+(null!=(l=c(n,"if").call(r,null!=(l=null!=t?c(t,"engagement"):t)?c(l,"status"):l,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:3,column:2},end:{line:7,column:9}}}))?l:"")+'</div>\n<div class="engagement-sidebar__heading">'+s(o((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"sidebar"))&&c(l,"engagement"))&&c(l,"engagementContentTemplate"))&&c(l,"responderEmail"),t))+'</div>\n<div class="engagement-sidebar__item">'+s(o(null!=(l=null!=t?c(t,"responder"):t)?c(l,"email"):l,t))+'</div>\n<div class="engagement-sidebar__heading">'+s(o((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"sidebar"))&&c(l,"engagement"))&&c(l,"engagementContentTemplate"))&&c(l,"responderSms"),t))+'</div>\n<div class="engagement-sidebar__item">'+s(o(null!=(l=null!=t?c(t,"responder"):t)?c(l,"sms"):l,t))+'</div>\n<div class="engagement-sidebar__heading">'+s(o((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"sidebar"))&&c(l,"engagement"))&&c(l,"engagementContentTemplate"))&&c(l,"smsNotifications"),t))+'</div>\n<div class="engagement-sidebar__item">\n'+(null!=(l=c(n,"if").call(r,null!=t?c(t,"smsEnabled"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i,loc:{start:{line:15,column:2},end:{line:19,column:9}}}))?l:"")+'</div>\n<div class="engagement-sidebar__heading">'+s(o((l=(l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"sidebar"))&&c(l,"engagement"))&&c(l,"engagementContentTemplate"))&&c(l,"program"),t))+'</div>\n<div class="engagement-sidebar__item">'+s(o(null!=(l=null!=t?c(t,"plan"):t)?c(l,"name"):l,t))+"</div>\n"},useData:!0})},2888:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="sidebar--no-results">'+e.escapeExpression(e.lambda((l=(l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"sidebar"))&&o(l,"flow"))&&o(l,"flowSidebarTemplate"))&&o(l,"noDescription"),t))+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=e.lambda,r=e.escapeExpression,c=null!=t?t:e.nullContext||{},u=e.hooks.helperMissing,d="function",m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="flex-grow">\n  <div class="flex">\n    <div class="flex-grow">\n      <h3 class="sidebar__heading">'+r(s((l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"sidebar"))&&m(l,"flow"))&&m(l,"flowSidebarTemplate"))&&m(l,"headingText"),t))+'</h3>\n    </div>\n    <div>\n      <button class="button--icon u-margin--r-8 js-menu">'+r((m(n,"far")||t&&m(t,"far")||u).call(c,"ellipsis-h",{name:"far",hash:{},data:i,loc:{start:{line:7,column:57},end:{line:7,column:77}}}))+'</button>\n      <button class="button--icon js-close">'+r((m(n,"fas")||t&&m(t,"fas")||u).call(c,"times",{name:"fas",hash:{},data:i,loc:{start:{line:8,column:44},end:{line:8,column:59}}}))+'</button>\n    </div>\n  </div>\n  <div class="u-margin--t-16">\n    <div class="patient-flow-sidebar__name">'+r(typeof(o=null!=(o=m(n,"name")||(null!=t?m(t,"name"):t))?o:u)===d?o.call(c,{name:"name",hash:{},data:i,loc:{start:{line:12,column:44},end:{line:12,column:54}}}):o)+'</div>\n    <div class="sidebar__details">'+r(typeof(o=null!=(o=m(n,"details")||(null!=t?m(t,"details"):t))?o:u)===d?o.call(c,{name:"details",hash:{},data:i,loc:{start:{line:13,column:34},end:{line:13,column:47}}}):o)+(null!=(l=m(n,"unless").call(c,null!=t?m(t,"details"):t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:13,column:47},end:{line:13,column:185}}}))?l:"")+'</div>\n    <div class="flex u-margin--t-16"><h4 class="sidebar__label u-margin--t-8">'+r(s((l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"sidebar"))&&m(l,"flow"))&&m(l,"flowSidebarTemplate"))&&m(l,"stateLabel"),t))+'</h4><div class="flex-grow" data-state-region></div></div>\n    <div class="flex u-margin--t-8"><h4 class="sidebar__label u-margin--t-8">'+r(s((l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"sidebar"))&&m(l,"flow"))&&m(l,"flowSidebarTemplate"))&&m(l,"ownerLabel"),t))+'</h4><div class="flex-grow" data-owner-region></div></div>\n  </div>\n  <div class="u-margin--t-24">\n    <h3 class="sidebar__heading">'+r(s((l=(l=(l=(l=(l=i&&m(i,"intl"))&&m(l,"patients"))&&m(l,"sidebar"))&&m(l,"flow"))&&m(l,"flowSidebarTemplate"))&&m(l,"activityHeadingText"),t))+'</h3>\n    <div class="u-margin--t-8 sidebar__activity" data-activity-region></div>\n  </div>\n</div>\n<div data-timestamps-region></div>\n'},useData:!0})},9565:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"check-square",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:128},end:{line:1,column:150}}}))},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:1,column:158},end:{line:1,column:174}}}))},5:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="worklist-list__flow-name">'+e.escapeExpression("function"==typeof(l=null!=(l=o(n,"flowName")||(null!=t?o(t,"flowName"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"flowName",hash:{},data:i,loc:{start:{line:6,column:58},end:{line:6,column:72}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.lambda,c=e.escapeExpression,u=e.hooks.helperMissing,d="function",m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell worklist-list__item-check js-no-click"><button class="button--checkbox js-select">'+(null!=(l=m(n,"if").call(s,null!=t?m(t,"isSelected"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:1,column:110},end:{line:1,column:181}}}))?l:"")+'</button></td>\n<td class="table-list__cell w-15 worklist-list__patient-name js-patient">'+c(r(null!=(l=null!=t?m(t,"patient"):t)?m(l,"first_name"):l,t))+" "+c(r(null!=(l=null!=t?m(t,"patient"):t)?m(l,"last_name"):l,t))+'&#8203;</td>\n<td class="table-list__cell w-30">\n  <span class="worklist-list__action-icon">'+c((m(n,"far")||t&&m(t,"far")||u).call(s,"file-alt",{name:"far",hash:{},data:i,loc:{start:{line:4,column:43},end:{line:4,column:61}}}))+"</span>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:68},end:{line:4,column:93}}}):o)+'<div class="worklist-list__name">\n    '+(null!=(l=m(n,"if").call(s,null!=t?m(t,"flowName"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:6,column:4},end:{line:6,column:85}}}))?l:"")+"&#8203;"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:92},end:{line:6,column:117}}}):o)+c(typeof(o=null!=(o=m(n,"name")||(null!=t?m(t,"name"):t))?o:u)===d?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:7,column:4},end:{line:7,column:14}}}):o)+"&#8203;"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:21},end:{line:7,column:46}}}):o)+'</div>\n</td>\n<td class="table-list__cell worklist-list__meta w-40">\n  <span class="table-list__meta" data-state-region></span>&#8203;<span class="worklist-list__search-helper">'+c(typeof(o=null!=(o=m(n,"state")||(null!=t?m(t,"state"):t))?o:u)===d?o.call(s,{name:"state",hash:{},data:i,loc:{start:{line:11,column:108},end:{line:11,column:119}}}):o)+"</span>&#8203;"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:133},end:{line:11,column:158}}}):o)+'<span class="table-list__meta" data-owner-region></span>&#8203;<span class="worklist-list__search-helper">'+c(typeof(o=null!=(o=m(n,"owner")||(null!=t?m(t,"owner"):t))?o:u)===d?o.call(s,{name:"owner",hash:{},data:i,loc:{start:{line:12,column:108},end:{line:12,column:119}}}):o)+"</span>&#8203;"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:133},end:{line:12,column:158}}}):o)+'<span class="table-list__meta">'+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:33},end:{line:13,column:58}}}):o)+"<span data-due-date-region></span>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:14,column:38},end:{line:14,column:63}}}):o)+"<span data-due-time-region></span>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:15,column:38},end:{line:15,column:63}}}):o)+"</span>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:16,column:9},end:{line:16,column:34}}}):o)+'<span class="table-list__meta" data-form-region></span>'+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:17,column:57},end:{line:17,column:82}}}):o)+'&#8203;\n</td>\n<td class="table-list__cell worklist-list__action-ts w-7_5">'+c((m(n,"formatDateTime")||t&&m(t,"formatDateTime")||u).call(s,null!=t?m(t,"created_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:19,column:60},end:{line:19,column:103}}}))+'&#8203;</td>\n<td class="table-list__cell worklist-list__action-ts w-7_5">'+c((m(n,"formatDateTime")||t&&m(t,"formatDateTime")||u).call(s,null!=t?m(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:20,column:60},end:{line:20,column:103}}}))+"&#8203;</td>\n"},useData:!0})},178:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fas")||t&&l(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"check-square",{name:"fas",hash:{},data:i,loc:{start:{line:1,column:128},end:{line:1,column:150}}}))},3:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((l(n,"fal")||t&&l(t,"fal")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"square",{name:"fal",hash:{},data:i,loc:{start:{line:1,column:158},end:{line:1,column:174}}}))},5:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="worklist-list__flow-name">'+e.escapeExpression("function"==typeof(l=null!=(l=o(n,"flowName")||(null!=t?o(t,"flowName"):t))?l:e.hooks.helperMissing)?l.call(null!=t?t:e.nullContext||{},{name:"flowName",hash:{},data:i,loc:{start:{line:6,column:58},end:{line:6,column:72}}}):l)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o,s=null!=t?t:e.nullContext||{},r=e.lambda,c=e.escapeExpression,u=e.hooks.helperMissing,d="function",m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__cell worklist-list__item-check js-no-click"><button class="button--checkbox js-select">'+(null!=(l=m(n,"if").call(s,null!=t?m(t,"isSelected"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:1,column:110},end:{line:1,column:181}}}))?l:"")+'</button></td>\n<td class="table-list__cell w-15 worklist-list__patient-name js-patient">'+c(r(null!=(l=null!=t?m(t,"patient"):t)?m(l,"first_name"):l,t))+" "+c(r(null!=(l=null!=t?m(t,"patient"):t)?m(l,"last_name"):l,t))+'&#8203;</td>\n<td class="table-list__cell w-30">\n  <span class="worklist-list__flow-icon">'+c((m(n,"fas")||t&&m(t,"fas")||u).call(s,"folder",{name:"fas",hash:{},data:i,loc:{start:{line:4,column:41},end:{line:4,column:57}}}))+"</span>"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:4,column:64},end:{line:4,column:89}}}):o)+'<div class="worklist-list__name">\n    '+(null!=(l=m(n,"if").call(s,null!=t?m(t,"flowName"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i,loc:{start:{line:6,column:4},end:{line:6,column:85}}}))?l:"")+"&#8203;"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:6,column:92},end:{line:6,column:117}}}):o)+c(typeof(o=null!=(o=m(n,"name")||(null!=t?m(t,"name"):t))?o:u)===d?o.call(s,{name:"name",hash:{},data:i,loc:{start:{line:7,column:4},end:{line:7,column:14}}}):o)+"&#8203;"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:7,column:21},end:{line:7,column:46}}}):o)+'</div>\n</td>\n<td class="table-list__cell w-40">\n  <span class="table-list__meta" data-state-region></span>&#8203;<span class="worklist-list__search-helper">'+c(typeof(o=null!=(o=m(n,"state")||(null!=t?m(t,"state"):t))?o:u)===d?o.call(s,{name:"state",hash:{},data:i,loc:{start:{line:11,column:108},end:{line:11,column:119}}}):o)+"</span>&#8203;"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:11,column:133},end:{line:11,column:158}}}):o)+'<span class="table-list__meta" data-owner-region></span>&#8203;<span class="worklist-list__search-helper">'+c(typeof(o=null!=(o=m(n,"owner")||(null!=t?m(t,"owner"):t))?o:u)===d?o.call(s,{name:"owner",hash:{},data:i,loc:{start:{line:12,column:108},end:{line:12,column:119}}}):o)+"</span>&#8203;"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:12,column:133},end:{line:12,column:158}}}):o)+'<progress class="progress-bar worklist-list__flow-progress" value='+c(r(null!=(l=null!=t?m(t,"_progress"):t)?m(l,"complete"):l,t))+" max="+c(r(null!=(l=null!=t?m(t,"_progress"):t)?m(l,"total"):l,t))+"></progress>&#8203;"+c(typeof(o=null!=(o=m(n,"remove_whitespace")||(null!=t?m(t,"remove_whitespace"):t))?o:u)===d?o.call(s,{name:"remove_whitespace",hash:{},data:i,loc:{start:{line:13,column:137},end:{line:13,column:162}}}):o)+'</td>\n<td class="table-list__cell worklist-list__action-ts w-7_5">'+c((m(n,"formatDateTime")||t&&m(t,"formatDateTime")||u).call(s,null!=t?m(t,"created_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:15,column:60},end:{line:15,column:103}}}))+'&#8203;</td>\n<td class="table-list__cell worklist-list__action-ts w-7_5">'+c((m(n,"formatDateTime")||t&&m(t,"formatDateTime")||u).call(s,null!=t?m(t,"updated_at"):t,"TIME_OR_DAY",{name:"formatDateTime",hash:{},data:i,loc:{start:{line:16,column:60},end:{line:16,column:103}}}))+"&#8203;</td>\n"},useData:!0})},2855:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){return'<div class="list-page__header">\n  <div class="flex list-page__title">\n    <div data-title-region></div>\n    <div class="worklist-list__toggle" data-toggle-region></div>\n    <div class="u-margin--l-16" data-search-region></div>\n  </div>\n  <div class="list-page__filters flex">\n    <div class="worklist-list__select-all" data-select-all-region></div>\n    <div class="worklist-list__filter-region" data-filters-region></div>\n    <div class="flex">\n      <span class="u-margin--r-16 u-text--nowrap" data-date-filter-region></span>\n      <span class="worklist-list__filter-sort" data-sort-region></span>\n    </div>\n  </div>\n  <table class="worklist__header w-100 js-list-header" data-table-region></table>\n</div>\n<div class="flex-region list-page__list js-list" data-list-region></div>\n'},useData:!0})},2016:function(e,t,n){var a=n(944);e.exports=(a.default||a).template({1:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"worklist"))&&o(l,"tableHeaderTemplate"))&&o(l,"flowHeader"),t))+"\n"},3:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"worklist"))&&o(l,"tableHeaderTemplate"))&&o(l,"actionHeader"),t))+"\n"},5:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"worklist"))&&o(l,"tableHeaderTemplate"))&&o(l,"flowAttrHeader"),t))+"\n"},7:function(e,t,n,a,i){var l,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression(e.lambda((l=(l=(l=(l=i&&o(i,"intl"))&&o(l,"patients"))&&o(l,"worklist"))&&o(l,"tableHeaderTemplate"))&&o(l,"actionAttrHeader"),t))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l,o=e.lambda,s=e.escapeExpression,r=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="table-list__header worklist-list__item-check"></td>\n<td class="table-list__header w-15">'+s(o((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"worklist"))&&c(l,"tableHeaderTemplate"))&&c(l,"patientHeader"),t))+'</td>\n<td class="table-list__header w-30">\n'+(null!=(l=c(n,"if").call(r,null!=t?c(t,"isFlowList"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i,loc:{start:{line:4,column:2},end:{line:8,column:9}}}))?l:"")+'</td>\n<td class="table-list__header w-40">\n'+(null!=(l=c(n,"if").call(r,null!=t?c(t,"isFlowList"):t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i,loc:{start:{line:11,column:2},end:{line:15,column:9}}}))?l:"")+'</td>\n<td class="table-list__header w-7_5">'+s(o((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"worklist"))&&c(l,"tableHeaderTemplate"))&&c(l,"createdHeader"),t))+'</td>\n<td class="table-list__header w-7_5">'+s(o((l=(l=(l=(l=i&&c(i,"intl"))&&c(l,"patients"))&&c(l,"worklist"))&&c(l,"tableHeaderTemplate"))&&c(l,"updatedHeader"),t))+"</td>\n"},useData:!0})}}]);