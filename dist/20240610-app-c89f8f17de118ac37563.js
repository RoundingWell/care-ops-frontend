(globalThis.webpackChunkcare_ops_frontend=globalThis.webpackChunkcare_ops_frontend||[]).push([[524],{3021:(e,t,i)=>{"use strict";i.d(t,{_:()=>s});var n=i(9737);function s(e){return(0,n.A)({targets:e,translateX:[{value:20,duration:0},{value:0,duration:200}],opacity:[{value:0,duration:0},{value:1,duration:300}],easing:"easeInOutQuad"})}},3223:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Application:()=>be,startApp:()=>ke}),i(3011);var n=i(7028),s=i(4641),o=i.n(s),r=i(1359),a=i(7084),l=i.n(a),c=i(6447),h=i.n(c),u=i(5730),d=i(5073),p=i(5087),m=i(3232),g=i(1176),f=i(7904),w=i(3484),v=(i(44),i(9737)),y=i(4697),x=i(1336),b=i.n(x);const k=["alertType","text","html","hasUndo"],T={success:"circle-check",info:"circle-info",error:"circle-xmark"},_=y.View.extend({className:"alert-box",alertType:"info",template:b(),triggers:{"click .js-dismiss":"click:dismiss","click .js-undo":"click:undo"},initialize(e){this.mergeOptions(e,k)},onAttach(){(0,v.A)({targets:this.el,duration:900,translateY:[-10,0],opacity:[0,1],easing:"easeInOutQuad"})},onClickDismiss(){this.dismiss()},onClickUndo(){this.isDismissed||(this._dismiss(),this.triggerMethod("undo",this))},_dismiss(){this.isDismissed=!0,(0,v.A)({targets:this.el,opacity:[1,0],duration:800,easing:"easeInSine",complete:(0,r.bind)(this.destroy,this)})},dismiss(){this.isDismissed||(this._dismiss(),this.triggerMethod("dismiss",this))},templateContext(){return{alertType:this.alertType,text:this.text,html:this.html,hasUndo:this.hasUndo,iconType:T[this.alertType]}}}),C=y.CollectionView.extend({className:"alert-box__container",onRemoveChild(){this.children.length||this.destroy()}}),S=p.A.extend({channelName:"alert",radioRequests:{show:"showAlert","show:success":"showSuccess","show:info":"showInfo","show:error":"showError","show:undo":"showUndo","show:apiError":"showApiError"},showAlert(e){const t=new _(e);(0,r.delay)((function(){t.dismiss()}),4e3);let i=this.getView();return i||(i=this.showView(new C)),i.addChildView(t)},showSuccess(e){this.showAlert({text:e,alertType:"success"})},showInfo(e){this.showAlert({text:e,alertType:"info"})},showError(e){this.showAlert({text:e,alertType:"error"})},showUndo(e){e=(0,r.extend)({hasUndo:!0},e);const t=this.showAlert((0,r.omit)(e,"onUndo","onComplete"));this.listenTo(t,{undo:e.onUndo,dismiss:e.onComplete})},showApiError(e){const t=e.errors;t.length&&(0,r.each)(t,(e=>this.showAlert({text:e.detail,alertType:"error"})))}});var R=i(7786),M=i.n(R),O=i(1721);let D;const A=p.A.extend({channelName:"bootstrap",radioRequests:{currentUser:"getCurrentUser",currentWorkspace:"getCurrentWorkspace",setCurrentWorkspace:"setCurrentWorkspace",workspaces:"getWorkspaces",organization:"getOrganization",directories:"getDirectories",setDirectories:"setDirectories",setting:"getSetting",roles:"getActiveRoles",teams:"getTeams",sidebarWidgets:"getSidebarWidgets","sidebarWidgets:fields":"getSidebarWidgetFields",widgets:"getWidgets",fetch:"fetchBootstrap"},getCurrentUser(){return this.currentUser},_getWorkspace(e){const t=this.currentUser.getWorkspaces();if(!t.length)throw"No workspaces found";return t.find({slug:e})||t.find({id:M().get("currentWorkspace")})||t.at(0)},getCurrentWorkspace(){return this.currentWorkspace},setCurrentWorkspace(e){const t=e||(0,O.A)();if(this.currentWorkspace&&!t)return this.currentWorkspace;const i=this._getWorkspace(t);return i.id!==(0,r.get)(this.currentWorkspace,"id")&&(M().set("currentWorkspace",i.id),this.currentWorkspace=i,this.getChannel().trigger("change:workspace",i)),i},getOrganization(){return this.organization},getDirectories(){return this.directories.clone()},setDirectories(e){this.directories=e},getWorkspaces(){return this.workspaces.clone()},getSetting(e){if(!this.isRunning())return;const t=this.currentWorkspace.get("settings"),i=(0,r.get)(t,e);if(i)return i;const n=this.settings.get(e);return n?n.get("value"):void 0},getActiveRoles(){if(D)return D;const e=this.currentUser.can("clinicians:admin"),t=function(e,t){const i=e.reject({name:"patient"});return t?i:(0,r.reject)(i,(e=>(0,r.includes)(e.get("permissions"),"clinicians:admin")))}(this.roles,e);return D=h().request("entities","roles:collection",t),D},getTeams(){return this.teams.clone()},getWidgets(){return this.widgets.clone()},getSidebarWidgets(){const e=(0,r.get)(this.getSetting("widgets_patient_sidebar"),"widgets"),t=(0,r.map)(e,(e=>this.widgets.find({slug:e})));return h().request("entities","widgets:collection",(0,r.invoke)((0,r.compact)(t),"omit","id"))},getSidebarWidgetFields(){return(0,r.get)(this.getSetting("widgets_patient_sidebar"),"fields")},initialize({name:e}){this.bootstrapPromise=new Promise(((e,t)=>{this.resolveBootstrap=e,this.rejectBootstrap=t})),this.organization=new(l().Model)({name:e})},beforeStart:()=>[h().request("entities","fetch:clinicians:current"),h().request("entities","fetch:roles:collection"),h().request("entities","fetch:teams:collection"),h().request("entities","fetch:settings:collection"),h().request("entities","fetch:workspaces:collection"),h().request("entities","fetch:widgets:collection")],onStart(e,t,i,n,s,o,r){this.currentUser=t,this.roles=i,this.teams=n,this.settings=s,this.workspaces=o,this.widgets=r,this.setCurrentWorkspace(),this.resolveBootstrap(t)},onFail(e,...t){this.rejectBootstrap(...t)},fetchBootstrap(){return this.start(),this.bootstrapPromise}}),P=p.A.extend({channelName:"history",radioRequests:{"go:back":"goBack"},initialize(){const e=l().history.navigate;this._prevHistory=[l().history.getFragment()],l().history.navigate=(t,i)=>{const n=e.call(l().history,t,i);return!1!==n&&(this.setPrevious(t,i),this.triggerChange(),n)},window.addEventListener("popstate",(()=>{const e=l().history.getFragment();e===this._prevHistory.at(1)?this._prevHistory.shift():this._prevHistory.unshift(e),this.triggerChange()}))},setPrevious(e,{replace:t}){t?this._prevHistory[0]=e:this._prevHistory.unshift(e)},triggerChange(){this.getChannel().trigger("change:route",this._prevHistory[0])},goBack(e){e&&this._prevHistory.length<2?e():(this._prevHistory.shift(),l().history.navigate(this._prevHistory.shift(),{trigger:!0}))}}),V=p.A.extend({channelName:"history",radioRequests:{"set:latestList":"setLatestList","has:latestList":"hasLatestList","go:latestList":"goLatestList"},setLatestList(e,t=[]){this._latestList=e,this._latestListArgs=t},hasLatestList(){return!!this._latestList},goLatestList(){this.hasLatestList()&&h().trigger("event-router",this._latestList,...this._latestListArgs)}});var E=i(4667),j=i(6232),L=i.n(j),q=i(3021),z=i(8131),I=i(5818),N=i(5456),W=i.n(N),F=i(3716),$=i.n(F);const H=n.Ay.globals.modal.modalViews,B=y.Region.extend({replaceElement:!0,timeout:0}),U=y.View.extend({className:"modal",buttonClass:"button--green",bodyClass:"modal__content",headerIconType:"far",cancelText:H.modalView.cancelText,submitText:H.modalView.submitText,regionClass:B,regions:{header:"[data-header-region]",body:{el:"[data-body-region]",regionClass:z.A.extend({timeout:0})},footer:"[data-footer-region]",info:"[data-info-region]"},childViewTriggers:{cancel:"cancel",submit:"submit"},triggers:{"click @ui.close":"cancel","click @ui.submit":"submit"},ui:{close:".js-close",submit:".js-submit"},serializeData(){return(0,r.extend)({},this)},template:W(),initialize(){this.headerView&&this.showChildView("header",this.headerView),this.bodyView&&this.showChildView("body",this.bodyView),this.footerView&&this.showChildView("footer",this.footerView)},onSubmit(){this.destroy()},onCancel(){this.destroy()},disableSubmit(e=!0){this.ui.submit.prop("disabled",e)},startPreloader(){this.getRegion("body").startPreloader()}}),K=U.extend({className:"modal--sidebar",bodyClass:"modal__content--sidebar",headerClass:"modal__header--sidebar",onAttach(){(0,q._)(this.el)}}),Y=U.extend({className:"modal--small",bodyClass:"modal__content--small",headerClass:"modal__header--small"}),G=y.View.extend({behaviors:[I.A],className(){const e=this.getOption("size");return"small"===e?"modal__form-iframe--small":"large"===e?"modal__form-iframe--large":"modal__form-iframe"},template:L().template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){return'<iframe src="/formapp/"></iframe>'},useData:!0})}),Q=y.View.extend({className:"pos--absolute",template:$(),onAttach(){(0,r.delay)((()=>{this.destroy()}),5e3)}}),X=p.A.extend({channelName:"modal",radioRequests:{show:"showModal","show:small":"showSmall","show:custom":"showCustom","show:sidebar":"showSidebar","show:form":"showForm","show:loading":"showLoading"},initialize({modalRegion:e,modalSmallRegion:t,modalSidebarRegion:i,modalLoadingRegion:n}){this.modalRegion=e,this.modalSmallRegion=t,this.modalSidebarRegion=i,this.modalLoadingRegion=n},showModal(e){const t=new(U.extend(e));return this.modalRegion.show(t),t},showSmall(e){const t=new(Y.extend(e));return this.modalSmallRegion.show(t),t},showCustom(e){return this.modalRegion.show(e),e},showSidebar(e){const t=new(K.extend(e));return this.modalSidebarRegion.show(t),t},showForm(e,t,i,n){const s=new E.A({patient:e,form:i}),o=this.showModal({headingText:t,headerIcon:"square-poll-horizontal",bodyView:new G({model:i,size:n}),onBeforeDestroy(){s.destroy()},onSubmit(){o.disableSubmit(),h().request(`form${i.id}`,"send","form:submit")}});return o.disableSubmit(),this.listenTo(s,{success(){o.destroy()},ready(){o.disableSubmit(!1)},error(){o.disableSubmit(!1)}}),o},showLoading(e){const t=new Q(e);return this.modalLoadingRegion.show(t),t}});var J=i(3157),Z=i(5864),ee=i.n(Z);const te=y.View.extend({className:"error-page",template:ee(),triggers:{"click .js-back":"click:back"},onClickBack(){h().trigger("event-router","default")},templateContext(){return this.options}}),ie=["worklist","patient","patient-action","flow","schedule","clinicians","dashboards","form","program","programs","program-flow"],ne=J.A.extend({eventRoutes:{notFound:{action:"show404",route:"404",root:!0},unknownError:{action:"showError",route:"unknown-error",root:!0}},initialize(){this.router.route("*unknown","404",(0,r.bind)(this.handleUnknown,this))},viewEvents:{"click:back":"stop"},onBeforeStop(){this.getRegion().empty()},handleUnknown(){const e=(0,O.A)();if((0,r.contains)(ie,e)){const e=h().request("bootstrap","currentWorkspace");this.replaceUrl(`/${e.get("slug")}${location.pathname}`)}else this.start(),this.show404()},show404(){this.showView(new te({is404:!0}))},showError(e){this.showView(new te({status:e}))}}),se=e=>`${parseFloat(e)}px`,oe=h().channel("user-activity"),re=h().channel("top-region"),ae=y.Behavior.extend({regionName:"region",className:"fill-window",initialize(e){this.mergeOptions(e,["regionName","className"])},onInitialize(){this.region=this.view.getRegion(this.regionName),this.listenTo(this.region,{empty:(0,r.bind)(this.view.triggerMethod,this.view,"region:empty"),show:(0,r.bind)(this.view.triggerMethod,this.view,"region:show")})},onRegionShow(){this.listenTo(oe,"body:down",this.onBodyDown),this.listenTo(oe,"iframe:focus",this.onIframeFocus),this.$el.addClass(this.className)},onRegionEmpty(){this.stopListening(oe),this.region.isSwappingView()||this.$el.removeClass(this.className)},onBodyDown({target:e}){this.emptyOnActvity(e)},onIframeFocus(e){this.emptyOnActvity(e)},emptyOnActvity(e){this.region.hasView()&&!re.request("contains",this.view,e)&&this.region.empty()}});var le=i(2925);const ce=h().channel("user-activity"),he=h().channel("history");function ue(){return this.getRegion("region").hasView()}const de=y.View.extend({className:"app-frame",template:L().template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){return'\n    <div class="app-frame__nav js-nav" data-nav-region></div>\n    <div class="app-frame__content flex-region" data-content-region></div>\n    <div class="app-frame__sidebar" data-sidebar-region></div>\n  '},useData:!0}),ui:{nav:".js-nav"},regions:{nav:"[data-nav-region]",content:{el:"[data-content-region]",regionClass:z.A},sidebar:"[data-sidebar-region]"},toggleNav(e){this.ui.nav.toggleClass("is-hidden",!e)}}),pe=y.View.extend({behaviors:[ae],regionClass:y.Region.extend({replaceElement:!0}),template:L().template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){return"<div data-region></div>"},useData:!0}),regions:{region:"[data-region]"},contains(e){const t=this.getRegion("region");return!(!t.hasView()||t.currentView.el!==e&&!this.Dom.hasEl(t.currentView.el,e))||this.ignoreEl===e||!(!this.ignoreEl||!this.Dom.hasEl(this.ignoreEl,e))||void 0},empty(){this.region.empty()}}),me=pe.extend({contains:ue,onRender(){this.showChildView("region",new le.w)}}),ge=pe.extend({className:"fill-window--dark",behaviors:[{behaviorClass:ae,className:"is-shown"}],initialize(e){this.mergeOptions(e,["$body","setLocation","contains"]),this.region=this.getRegion("region");const t=h().channel("hotkey");this.listenTo(t,"close",this.empty)},onRegionShow(){this.listenTo(he,"change:route",this.empty),this.listenTo(ce,"window:resize",this.setLocation),this.setLocation()},onRegionEmpty(){this.stopListening(ce)},setLocation(){const e=this.region.currentView,t=e.$el.outerWidth(),i=e.$el.outerHeight(),n=this.$body.height(),s=this.$body.width()/2-t/2,o=n/3-i/3;e.$el.css({left:se(s),top:se(o)})},contains(e,t){if(!this.region.hasView())return!1;const i=this.region.currentView.el;return!(i!==e&&!this.Dom.hasEl(i,e)&&this===t)||void 0}}),fe={align:"left",direction:"down",left:0,outerHeight:0,outerWidth:0,popWidth:null,top:0,windowPadding:5},we=pe.extend({initialize({$body:e}){this.region=this.getRegion("region"),this.$body=e;const t=h().channel("hotkey");this.listenTo(t,"close",this.empty)},onRegionShow(e,t,i){t.$el.addClass("app-frame__pop-region");const n=(0,r.extend)({},fe,i);this.ignoreEl=i.ignoreEl,this.listenTo(ce,"window:resize",this.empty),this.listenTo(he,"change:route",this.empty),this.listenTo(t,"render render:children",(0,r.partial)(this.setLocation,n)),this.setLocation(n)},onRegionEmpty(e,t){t.$el.removeClass("app-frame__pop-region"),this.stopListening(ce),this.stopListening(he),this.stopListening(t)},setLocation(e){const t=this.region.currentView;e.popWidth&&t.$el.css({width:se(e.popWidth)});const i=t.$el.outerHeight(),n=this.setDirection(i,e),s=e.popWidth||t.$el.outerWidth(),o=this.setAlign(s,e);t.$el.css({top:se(n),left:se(o)})},setAlign(e,{left:t,align:i,windowPadding:n,outerWidth:s}){if("right"===i&&(t+=s-e),t<n)return n;const o=this.$body.width();return t+e>o-n?o-e-n:t},setDirection(e,{top:t,direction:i,windowPadding:n,outerHeight:s}){const o=this.$body.height();return"down"===i?t+s+e+n>o?(i="forceUp",this.setDirection(e,{top:t,direction:i,windowPadding:n,outerHeight:s})):s+t:(t-=e)>=n?t:"forceUp"===i?o-n-e:(i="down",this.setDirection(e,{top:t,direction:i,windowPadding:n,outerHeight:s}))}}),ve=pe.extend({initialize({$body:e}){this.region=this.getRegion("region"),this.$body=e},onRegionShow(e,t,i){this.listenTo(ce,"window:resize",this.empty),this.ignoreEl=i.ignoreEl,"horizontal"!==i.orientation?this.setVerticalLocation(i):this.setHorizontalLocation(i)},onRegionEmpty(e){this.stopListening(ce)},addClass(e){this.region.currentView.$el.addClass(e)},setTop(e){this.region.currentView.$el.css({top:se(e)})},setLeft(e){this.region.currentView.$el.css({left:se(e)})},setHorizontalLocation({left:e,top:t,outerWidth:i,outerHeight:n}){const s=this.region.currentView,o=(e+i)/this.$body.width(),r=(t+n/2)/this.$body.height();r<.25?(this.addClass("is-top"),this.setTop(t+n/2)):r>.75?(this.addClass("is-bottom"),this.setTop(t+n/2-s.$el.outerHeight())):this.setTop(t-s.$el.outerHeight()/2+n/2),o>.6?(this.addClass("is-right-arrow"),this.setLeft(e-s.$el.outerWidth())):(this.addClass("is-left-arrow"),this.setLeft(e+i))},setVerticalLocation({left:e,top:t,outerWidth:i,outerHeight:n}){const s=this.region.currentView,o=(e+i/2)/this.$body.width(),r=(t+n)/this.$body.height();o<.15?(this.addClass("is-left"),this.setLeft(e+i/2)):o>.85?(this.addClass("is-right"),this.setLeft(e+i/2-s.$el.outerWidth())):this.setLeft(e-s.$el.outerWidth()/2+i/2),r>.6?(this.addClass("is-bottom-arrow"),this.setTop(t-s.$el.outerHeight())):(this.addClass("is-top-arrow"),this.setTop(t+n))}}),ye=y.CollectionView.extend({viewComparator:!1,el:"#root",template:L().template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){return""},useData:!0}),AppView:de,initialize(){this.render(),this.regions=[];const e=this.$el;h().reply("top-region","contains",this.contains,this),this.appView=new this.AppView,this.addChildView(this.appView),this.addRegionView("tooltip",new ve({$body:e})),this.addRegionView("modalSidebar",new ge({$body:e,setLocation:r.noop})),this.addRegionView("modal",new ge({$body:e})),this.addRegionView("modalSmall",new ge({$body:e})),this.addRegionView("modalLoading",new ge({$body:e,contains:ue})),this.addRegionView("alert",new pe),this.addRegionView("pop",new we({$body:e})),this.addRegionView("preloader",new me),this.addRegionView("error",new pe)},addRegionView(e,t){t.name=e,this.addChildView(t),this.regions[e]=t.getRegion("region")},getRegion(e){return this.regions[e]},contains(e,t){const i=this.children.findIndexByView(e);for(let n=this.children.length-1;i<=n;n--)if(this.children.findByIndex(n).contains(t,e))return!0}}),xe=o()(document),be=p.A.extend({channelName:"app",radioRequests:{"show:pop":"showPop"},initialize(){!function(){const e=document.documentElement;e.setAttribute("data-useragent",navigator.userAgent),e.setAttribute("data-platform",navigator.platform)}()},onBeforeStart(){new A({name:d.UO.name}),this.setView(new ye),this.configComponents(),this.startServices(),this.setListeners(),new ne({region:this.getRegion("error")})},configComponents(){w.A.setRegion(this.getRegion("tooltip"));const e=this.getRegion("pop");m.A.setRegion(e),g.A.setPopRegion(e),f.A.setRegion(e)},showPop(e,t){return this.getRegion("pop").show(e,t)},startServices(){new S({region:this.getRegion("alert")}),new V,new X({modalRegion:this.getRegion("modal"),modalSmallRegion:this.getRegion("modalSmall"),modalSidebarRegion:this.getRegion("modalSidebar"),modalLoadingRegion:this.getRegion("modalLoading")})},setListeners(){o()(window).on({"resize.app"(){h().trigger("user-activity","window:resize")},beforeunload:()=>{this.stop()}}),xe.on("keydown.app",(function(e){h().trigger("user-activity","document:keydown",e)})),this.setMouseListeners(),this.setHotkeyListeners()},setMouseListeners(){xe.on("mouseover.app",(function(e){h().trigger("user-activity","document:mouseover",e)})),xe.on("mouseleave.app",(function(e){h().trigger("user-activity","document:mouseleave",e)})),o()("body").on("pointerdown.app",(function(e){h().trigger("user-activity","body:down",e)}))},setHotkeyListeners(){xe.on("keydown.app",null,"/",(function(e){h().trigger("hotkey","search",e)})),xe.on("keydown.app",null,"esc",(function(e){h().trigger("hotkey","close",e)}))},beforeStart:()=>[h().request("bootstrap","fetch"),Promise.all([i.e(921),i.e(304)]).then(i.bind(i,1397))],onFail(e,t){(0,u.CN)((0,r.get)(t,"responseData",t)),("No workspaces found"===t||401===(0,r.get)(t,["response","status"])&&"5000"===(0,r.get)(t,["responseData","errors",0,"code"]))&&this.getRegion("preloader").show(new le.w({notSetup:!0}))},onStart(e,t,{default:i}){if(!t.hasTeam()||!t.get("enabled"))return void this.getRegion("preloader").show(new le.w({notSetup:!0}));this.emptyRegion("preloader");const n=this.addChildApp("appFrame",i);this.listenToOnce(n,"before:start",this.startHistory),n.start({view:this.getView().appView})},startHistory(){l().history.start({pushState:!0}),new P},emptyRegion(e){return this.getRegion(e).empty()}});function ke(){(new be).start()}},7278:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=i(6492).uA},3157:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var n=i(1359),s=i(7084),o=i.n(s),r=i(6447),a=i.n(r),l=i(6001),c=i.n(l),h=i(5087);const u=c().extend({initialize(){this.cid=(0,n.uniqueId)("bber")},route(){const e=c().prototype.route.apply(this,arguments);return o().history.handlers[0].cid=this.cid,e},destroy(){return o().history.handlers=(0,n.reject)(o().history.handlers,{cid:this.cid}),this.stopListening(),this.trigger("destroy",this),this},_isTriggeredFromRoute(){const e=this._getCurrentRouteTrigger();return arguments.length===e.length&&arguments.length===(0,n.union)(arguments,e).length}}),d=h.A.extend({routerAppName:"",constructor:function(){this.initRouter(),this.listenTo(this.router,"noMatch",this.onNoMatch),this.on("before:stop",this.stopCurrent),h.A.apply(this,arguments)},initRouter(){this._routes=(0,n.result)(this,"eventRoutes");const e=this.getRouteTriggers();this.router=new u({routeTriggers:e}),this.on("before:destroy",(()=>this.router.destroy())),this.bindRouteEvents()},onNoMatch(){this.stop(),this._currentRoute=null},getRouteTriggers(){const e=a().request("bootstrap","currentWorkspace");return(0,n.reduce)(this._routes,(function(t,{route:i,root:n},s){if(n)return t[s]=i,t;const o=e.get("slug");return t[s]=i?`${o}/${i}`:o,t}),{})},getEventActions:(e,t)=>(0,n.reduce)(e,(function(e,{action:i},s){return e[s]=(0,n.partial)(t,s,i),e}),{}),bindRouteEvents(){const e=this.getEventActions(this._routes,this.routeAction);this.listenTo(this.router.getChannel(),e)},routeAction(e,t,...i){this.isRunning()||this.start(),this.triggerMethod("before:appRoute",e,...i),a().request("nav","select",this.routerAppName,e,i),a().request("sidebar","close"),this.setLatestList(e,i),this._currentRoute={event:e,eventArgs:i},(0,n.isFunction)(t)||(t=this[t]),t.apply(this,i),this.triggerMethod("appRoute",e,...i)},setLatestList(e,t){this._routes[e].isList?a().request("history","set:latestList",e,t):this._routes[e].clearLatestList&&a().request("history","set:latestList",!1)},startCurrent(e,t){this.stopCurrent(),this._currentAppName=e,this._currentAppOptions=t,t=(0,n.extend)({currentRoute:this._currentRoute},t);const i=this.startChildApp(e,t);return this._current=i,i},startRoute(e,t){return this.isCurrent(e,t)?this.getCurrent().startRoute(this.getCurrentRoute()):this.startCurrent(e,t)},getCurrent(){return this._current},isCurrent(e,t){return e===this._currentAppName&&(0,n.isEqual)(t,this._currentAppOptions)},getCurrentRoute(){return this._currentRoute},stopCurrent(){this._current&&(this._current.stop(),this._current=null,this._currentAppName=null,this._currentAppOptions=null)},translateEvent(e){const t=this.router.getDefaultRoute(e);return this.router.translateRoute(t,(0,n.rest)(arguments))},replaceRoute(){const e=this.translateEvent.apply(this,arguments);this.replaceUrl(e)},navigateRoute(){const e=this.translateEvent.apply(this,arguments);o().history.navigate(e,{trigger:!1})},replaceUrl(e){o().history.navigate(e,{trigger:!1,replace:!0})}})},5818:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var n=i(4641),s=i.n(n),o=i(1359),r=i(6447),a=i.n(r);const l=i(4697).Behavior.extend({ui:{iframe:"iframe"},onInitialize(){this.channel=a().channel(`form${this.view.model.id}`)},replies:{send(e,t={}){this.ui.iframe[0].contentWindow.postMessage({message:e,args:t},window.origin)},focus(){a().trigger("user-activity","iframe:focus",this.ui.iframe[0])}},onAttach(){this.channel.reply(this.replies,this),s()(window).on("message",(({originalEvent:e})=>{const{data:t,origin:i}=e;i===window.origin&&t&&t.message&&this.channel.request(t.message,t.args)}))},onBeforeDetach(){s()(window).off("message"),this.channel.stopReplying((0,o.keys)(this.replies).join(" "))}})},4890:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n=i(4697).Behavior.extend({selector:"input",ui(){return{input:this.getOption("selector")}},onDomRefresh(){const e=this.ui.input[0];e&&e.style&&(e.style.transform="TranslateY(-10000px)",e.focus(),setTimeout((function(){e&&e.style&&(e.style.transform="none")}),30))}})},1546:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(1359),s=i(4697),o=i(7213);const{ENTER_KEY:r}=o.A,a=s.Behavior.extend({events:{"keydown @ui.input":"watchKeyDown","keyup @ui.input":"watchKeyUp","input @ui.input":"watchInput"},ui:{input:"input"},onDomRefresh(){this._currentText=this.getWatchText()},getWatchText(){return this.ui.input.val()},watchKeyDown(e){this.view.triggerMethod("watch:keydown",e),this._evt=e},watchInput(){this._evt&&(this._evt.isDefaultPrevented()||this.watchKeyUp(this._evt))},watchKeyUp:(0,n.throttle)((function(e){this.view.isRendered()&&(e.which!==r?(this.view.triggerMethod("watch:keyup",e),this.triggerWatchChange()):e.preventDefault())}),1),triggerWatchChange(){const e=this.getWatchText();e!==this._currentText&&(this._currentText=e,this.view.triggerMethod("watch:change",e))}})},655:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});var n=i(4697),s=i(7213),o=i(1359),r=i(6447),a=i.n(r);const l=n.Behavior.extend({initialize(){this.listenTo(a().channel("user-activity"),"document:keydown",this.keydown)},keyEvents:{},triggerEvent(e,t,i){if(t.which===i)return this.view.triggerMethod(e,t),!0},keydown(e){(0,o.some)(this.getOption("keyEvents"),((t,i)=>{if((0,o.isArray)(t))return(0,o.some)(t,(0,o.bind)(this.triggerEvent,this,i,e));this.triggerEvent(i,e,t)}))}}),{ENTER_KEY:c,ESCAPE_KEY:h,DOWN_KEY:u,TAB_KEY:d,UP_KEY:p}=s.A,m=n.Behavior.extend({behaviors:[{behaviorClass:l,keyEvents:{"transport:down":u,"transport:up":p,select:c,close:[h,d]}}],options:{items:".js-picklist-item",scroll:".js-picklist-scroll"},events(){const e={};return e[`mouseenter ${this.getOption("items")}`]=this.onHoverItem,e},onAttach(){const e=this.getItems();this.scrollTo(e,e.filter(".is-selected"),"middle")},onHoverItem(e){this.updateTransport(this.getItems(),this.view.$(e.currentTarget))},onTransportDown(e){e.preventDefault();const t=this.getItems(),i=this._getNextHighlighted(t);this.updateTransport(t,i),this.scrollTo(t)},onTransportUp(e){e.preventDefault();const t=this.getItems(),i=this._getPrevHighlighted(t);this.updateTransport(t,i),this.scrollTo(t)},getItems(){return this.view.$(this.getOption("items"))},getHighlighted:e=>e.filter(".is-highlighted"),updateTransport(e,t){e.removeClass("is-highlighted"),t.addClass("is-highlighted")},_getPrevHighlighted(e){const t=this.getHighlighted(e);if(!t.length)return e.last();const i=e.index(t)-1;return i<0?t:e.eq(i)},_getNextHighlighted(e){const t=this.getHighlighted(e);if(!t.length)return e.first();const i=e.index(t)+1;return i===e.length?t:e.eq(i)},scrollTo(e,t,i){if(!e.length)return;if(t&&t.length||(t=this.getHighlighted(e)),!t.length)return;const n=this.view.$(this.getOption("scroll")),s=n.scrollTop(),o=n.outerHeight(),r=t.outerHeight(),a=t.position().top,l=a+r-o;let c=0;"middle"===i&&(c=o/2-r/2),a<0&&n.scrollTop(s+a+c),l>0&&n.scrollTop(s+l+c)},onSelect(e){e.preventDefault(),this.view.$(".is-highlighted").click()}})},3232:(e,t,i)=>{"use strict";i.d(t,{A:()=>y});var n=i(1359),s=i(2866),o=i.n(s),r=i(7278),a=i(6232),l=i.n(a),c=i(4697);const h=c.View.extend({className:"datepicker",regionClass:c.Region.extend({replaceElement:!0}),regions:{calendar:"[data-calendar-region]",monthPicker:"[data-month-picker-region]",actions:"[data-actions-region]"},template:l().template({1:function(e,t,i,n,s){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="datepicker__day">'+e.escapeExpression((o(i,"formatDateTime")||t&&o(t,"formatDateTime")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},t,"dd",{name:"formatDateTime",hash:{},data:s,loc:{start:{line:4,column:54},end:{line:4,column:82}}}))+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div data-month-picker-region></div>\n    <div class="datepicker__body">\n      '+(null!=(o=r(i,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"dayOfWeek"):t,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s,loc:{start:{line:4,column:6},end:{line:4,column:97}}}))?o:"")+"\n      <div data-calendar-region></div>\n    </div>\n    <div data-actions-region></div>\n  "},useData:!0}),templateContext:()=>({dayOfWeek:(0,n.times)(7,(e=>o()().weekday(e)))})}),u=c.View.extend({template:l().template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r,a=e.lambda,l=e.escapeExpression,c=null!=t?t:e.nullContext||{},h=e.hooks.helperMissing,u="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <button class="datepicker__button js-today">'+l(a((o=(o=(o=s&&d(s,"intl"))&&d(o,"components"))&&d(o,"datepicker"))&&d(o,"today"),t))+"</button>"+l(typeof(r=null!=(r=d(i,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?r:h)===u?r.call(c,{name:"remove_whitespace",hash:{},data:s,loc:{start:{line:2,column:96},end:{line:2,column:121}}}):r)+'<button class="datepicker__button js-tomorrow">'+l(a((o=(o=(o=s&&d(s,"intl"))&&d(o,"components"))&&d(o,"datepicker"))&&d(o,"tomorrow"),t))+"</button>"+l(typeof(r=null!=(r=d(i,"remove_whitespace")||(null!=t?d(t,"remove_whitespace"):t))?r:h)===u?r.call(c,{name:"remove_whitespace",hash:{},data:s,loc:{start:{line:3,column:102},end:{line:3,column:127}}}):r)+'<button class="datepicker__button js-clear">'+l(a((o=(o=(o=s&&d(s,"intl"))&&d(o,"components"))&&d(o,"datepicker"))&&d(o,"clear"),t))+"</button>\n  "},useData:!0}),triggers:{"click .js-today":"click:today","click .js-tomorrow":"click:tomorrow","click .js-clear":"click:clear"}}),d=c.View.extend({className:"datepicker__header",triggers:{"click .js-next":"click:nextMonth","click .js-prev":"click:prevMonth","click .js-month":"click:month"},template:l().template({1:function(e,t,i,n,s){return'class="datepicker__month js-month"'},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="datepicker__nav flex">\n      <button class="js-prev">'+l((c(i,"fas")||t&&c(t,"fas")||a).call(r,"caret-left",{name:"fas",hash:{},data:s,loc:{start:{line:3,column:30},end:{line:3,column:50}}}))+" "+l((c(i,"formatDateTime")||t&&c(t,"formatDateTime")||a).call(r,null!=t?c(t,"prevMonth"):t,"MMM",{name:"formatDateTime",hash:{},data:s,loc:{start:{line:3,column:51},end:{line:3,column:85}}}))+"</button>\n      <span "+(null!=(o=c(i,"if").call(r,null!=t?c(t,"canSelectMonth"):t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s,loc:{start:{line:4,column:12},end:{line:4,column:75}}}))?o:"")+">"+l((c(i,"formatDateTime")||t&&c(t,"formatDateTime")||a).call(r,null!=t?c(t,"currentMonth"):t,"MMM YYYY",{name:"formatDateTime",hash:{},data:s,loc:{start:{line:4,column:76},end:{line:4,column:118}}}))+'</span>\n      <button class="js-next">'+l((c(i,"formatDateTime")||t&&c(t,"formatDateTime")||a).call(r,null!=t?c(t,"nextMonth"):t,"MMM",{name:"formatDateTime",hash:{},data:s,loc:{start:{line:5,column:30},end:{line:5,column:64}}}))+" "+l((c(i,"fas")||t&&c(t,"fas")||a).call(r,"caret-right",{name:"fas",hash:{},data:s,loc:{start:{line:5,column:65},end:{line:5,column:86}}}))+"</button>\n    </div>\n  "},useData:!0}),templateContext(){return{nextMonth:this.model.getNextMonth(),prevMonth:this.model.getPrevMonth(),canSelectMonth:this.getOption("canSelectMonth")}}}),p=c.View.extend({className(){return this.model.get("isOtherMonth")?"is-other-month":this.model.get("isDisabled")?"is-disabled":void 0},tagName:"li",getTemplate(){return this.model.get("isOtherMonth")||this.model.get("isDisabled")?l().template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(o=null!=(o=r(i,"date")||(null!=t?r(t,"date"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"date",hash:{},data:s,loc:{start:{line:1,column:0},end:{line:1,column:10}}}):o)},useData:!0}):l().template({1:function(e,t,i,n,s){return"is-selected"},3:function(e,t,i,n,s){return" is-today"},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r,a=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="'+(null!=(o=l(i,"if").call(a,null!=t?l(t,"isSelected"):t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s,loc:{start:{line:1,column:10},end:{line:1,column:46}}}))?o:"")+(null!=(o=l(i,"if").call(a,null!=t?l(t,"isToday"):t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s,loc:{start:{line:1,column:46},end:{line:1,column:77}}}))?o:"")+'">'+e.escapeExpression("function"==typeof(r=null!=(r=l(i,"date")||(null!=t?l(t,"date"):t))?r:e.hooks.helperMissing)?r.call(a,{name:"date",hash:{},data:s,loc:{start:{line:1,column:79},end:{line:1,column:89}}}):r)+"</a>"},useData:!0})},triggers:{"click a":"select"}}),m=c.CollectionView.extend({className:"datepicker__days",tagName:"ul",childView:p,childViewTriggers:{select:"select:date"}});var g=i(7084),f=i.n(g);const w=f().Model.extend({initialize({currentMonth:e,selectedDate:t,selectedMonth:i}){this.setCurrentMonth(e),this.setSelectedDate(t),this.setSelectedMonth(i)},setCurrentMonth(e){const t=e?o()(e):o()();this.set("currentMonth",t.startOf("month"))},setSelectedDate(e){e?(e=o()(e),this.set({selectedDate:e.startOf("day"),currentMonth:e.startOf("month"),selectedMonth:null})):this.set({selectedDate:null})},setSelectedMonth(e){if(!e)return void this.set({selectedMonth:null});const t=o()(e).startOf("month");this.set({selectedMonth:t,currentMonth:t,selectedDate:null})},getCurrentMonth(){return this.dayjs("currentMonth")},getNextMonth(){return this.dayjs("currentMonth").add(1,"months")},getPrevMonth(){return this.dayjs("currentMonth").subtract(1,"months")},getCalendar(){const e=(0,n.flatten)([this._getPreDates(),this._getDates(),this._getPostDates()]);return new(f().Collection)(e)},_getPreDates(){const e=this.getCurrentMonth().weekday();if(!e)return[];const t=this.getPrevMonth().daysInMonth();return(0,n.map)((0,n.range)(t-(e-1),t+1),(e=>({date:String(e),isOtherMonth:!0})))},_getPostDates(){const e=this.getCurrentMonth().endOf("month").weekday();return 6===e?[]:(0,n.map)((0,n.range)(1,7-e),(e=>({date:String(e),isOtherMonth:!0})))},_getDates(){const e=this.getCurrentMonth(),t=e.isSame(o()(),"month")&&o()().date();return(0,n.map)((0,n.range)(1,e.daysInMonth()+1),(e=>{const i=this._isBeforeBeginDate(e)||this._isAfterEndDate(e);return{date:String(e),isDisabled:i,isSelected:!i&&this._isSelectedDate(e),isToday:t===e}}))},_isBeforeBeginDate(e){const t=this.dayjs("beginDate");return!!t&&this.getCurrentMonth().date(e).isBefore(t,"day")},_isAfterEndDate(e){const t=this.dayjs("endDate");return!!t&&this.getCurrentMonth().date(e).isAfter(t,"day")},_isSelectedDate(e){const t=this.dayjs("selectedDate");return!(!t||!this.getCurrentMonth().isSame(t,"month"))&&t.date()===e}}),v=["position","uiView","ui"],y=r.A.extend({StateModel:w,stateEvents:{change:"show","change:selectedDate":"onChangeStateSelectedDate","change:selectedMonth":"onChangeStateSelectedMonth"},onChangeStateSelectedDate(e,t){this.triggerMethod("change:selectedDate",t)},onChangeStateSelectedMonth(e,t){this.triggerMethod("change:selectedMonth",t)},constructor:function(e){this.mergeOptions(e,v),this.listenTo(this.uiView,"render destroy",this.destroy),r.A.apply(this,arguments)},ViewClass:h,onSelectToday(){this.getState().setSelectedDate(o()())},onSelectTomorrow(){this.getState().setSelectedDate(o()().add(1,"days"))},onSelectClear(){const e=this.getState();e.setSelectedDate(null),e.setSelectedMonth(null)},onBeforeShow(e,t){t.showChildView("monthPicker",this.getMonthPickerView()),t.showChildView("actions",this.getActionsView()),t.showChildView("calendar",this.getCalendarView())},getMonthPickerView(){const e=this.getState(),t=new d({model:e,canSelectMonth:this.getOption("canSelectMonth")});return this.listenTo(t,{"click:nextMonth":this.onSelectNextMonth,"click:prevMonth":this.onSelectPrevMonth,"click:month":this.onSelectMonth}),t},getActionsView(){const e=new u;return this.listenTo(e,{"click:today":this.onSelectToday,"click:tomorrow":this.onSelectTomorrow,"click:clear":this.onSelectClear}),e},onSelectNextMonth(){const e=this.getState();e.setCurrentMonth(e.getNextMonth())},onSelectPrevMonth(){const e=this.getState();e.setCurrentMonth(e.getPrevMonth())},onSelectMonth(){const e=this.getState();e.setSelectedMonth(e.getCurrentMonth())},onSelectDate({model:e}){const t=this.getState(),i=e.get("date"),n=this.getState().getCurrentMonth();t.setSelectedDate(n.date(i))},getCalendarView(){const e=this.getState(),t=new m({model:e,collection:e.getCalendar()});return this.listenTo(t,{"select:date":this.onSelectDate}),t},position(){return this.uiView.getBounds(this.ui)},regionOptions(){return(0,n.extend)({popWidth:256},(0,n.result)(this,"position"))}})},1176:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var n=i(6232),s=i.n(n),o=i(1359),r=i(7084),a=i.n(r),l=i(4697),c=i(7028),h=i(7278),u=i(3089);const d=["align","collection","lists","picklistEvents","picklistOptions","popRegion","popWidth","position","viewOptions"],p={className:"button-secondary",template:s().template({1:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((r(i,"fa")||t&&r(t,"fa")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(o=null!=t?r(t,"icon"):t)?r(o,"type"):o,null!=(o=null!=t?r(t,"icon"):t)?r(o,"icon"):o,{name:"fa",hash:{classes:null!=(o=null!=t?r(t,"icon"):t)?r(o,"classes"):o},data:s,loc:{start:{line:2,column:17},end:{line:2,column:64}}}))},3:function(e,t,i,n,s){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span>"+e.escapeExpression(o(i,"lookup").call(null!=t?t:e.nullContext||{},t,null!=t?o(t,"attr"):t,{name:"lookup",hash:{},data:s,loc:{start:{line:3,column:37},end:{line:3,column:57}}}))+"</span>"},5:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"defaultText"):t,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s,loc:{start:{line:4,column:6},end:{line:4,column:64}}}))?o:""},6:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span>"+e.escapeExpression("function"==typeof(o=null!=(o=r(i,"defaultText")||(null!=t?r(t,"defaultText"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"defaultText",hash:{},data:s,loc:{start:{line:4,column:32},end:{line:4,column:49}}}):o)+"</span>"},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(o=a(i,"if").call(r,null!=t?a(t,"icon"):t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s,loc:{start:{line:2,column:4},end:{line:2,column:71}}}))?o:"")+(null!=(o=a(i,"if").call(r,a(i,"lookup").call(r,t,null!=t?a(t,"attr"):t,{name:"lookup",hash:{},data:s,loc:{start:{line:3,column:11},end:{line:3,column:29}}}),{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.program(5,s,0),data:s,loc:{start:{line:3,column:4},end:{line:5,column:11}}}))?o:"")},useData:!0}),templateContext:()=>({attr:"text",defaultText:c.Ay.components.droplist.defaultText})},m=a().Model.extend({defaults:{isDisabled:!1,isActive:!1,selected:null}}),g=l.View.extend({initialize({state:e}){this.model=e.selected},attributes(){return{disabled:this.getOption("state").isDisabled}},tagName:"button",triggers:{click:"click",focus:"focus"}}),f=h.A.extend({picklistOptions:{attr:"text",canClear:!1,headingText:null,infoText:null,isSelectlist:!1,placeholderText:null},popWidth:null,StateModel:m,ViewClass:g,constructor:function(e){this.mergeOptions(e,d),this.once("show",(()=>{this.getState("isActive")&&this.showPicklist()})),h.A.apply(this,arguments)},mixinViewOptions(e){return(0,o.extend)({state:this.getState().attributes},p,(0,o.result)(this,"viewOptions"),e)},viewEvents:{click:"onClick"},onClick(){this.toggleState("isActive")},stateEvents:{"change:isDisabled":"onChangeIsDisabled","change:isActive":"onChangeIsActive","change:selected":"onChangeStateSelected"},onChangeIsDisabled(){this.show()},onChangeIsActive(e,t){const i=this.getView();i.$el.toggleClass("is-active",t),t&&(i.$el.blur(),this.showPicklist())},onChangeStateSelected(e,t){this.show(),this.triggerMethod("change:selected",t)},showPicklist(){const e=new u.A((0,o.extend)({lists:this.lists||[{collection:this.collection}],state:{selected:this.getState("selected")}},(0,o.result)(this,"picklistOptions")));this.popRegion.show(e,this.popRegionOptions()),this.bindEvents(e.getView(),this._picklistEvents),this.bindEvents(e.getView(),(0,o.result)(this,"picklistEvents"))},position(){return this.getView().getBounds()},popRegionOptions(){return(0,o.extend)({ignoreEl:this.getView().el,popWidth:(0,o.result)(this,"popWidth"),align:this.align},(0,o.result)(this,"position"))},_picklistEvents:{close:"onPicklistClose","picklist:item:select":"onPicklistSelect",destroy:"onPicklistDestroy"},onPicklistClose(){this.popRegion.empty()},onPicklistSelect({model:e}){this.popRegion.empty(),this.setState("selected",e)},onPicklistDestroy(){this.toggleState("isActive",!1)}},{setPopRegion(e){this.prototype.popRegion=e}})},7904:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(1359),s=i(3089);const o=["align","ignoreEl","popWidth","position","uiView","ui"],r=s.A.extend({attr:"text",align:"left",popWidth:null,constructor:function(e){this.mergeOptions(e,o),this.listenTo(this.uiView,"render destroy",this.destroy),s.A.apply(this,arguments)},viewTriggers:{close:"close","picklist:item:select":"select"},position(){return this.uiView.getBounds(this.ui)},regionOptions(){return(0,n.extend)({ignoreEl:this.ignoreEl||this.ui[0],popWidth:this.popWidth,align:this.align},(0,n.result)(this,"position"))},onClose(){this.destroy()},onSelect({model:e}){e.get("isDisabled")||(e.get("onSelect").call(this,e),this.destroy())}})},3089:(e,t,i)=>{"use strict";i.d(t,{A:()=>x});var n=i(6232),s=i.n(n),o=i(1359),r=i(4697),a=i(7028),l=i(9238),c=i(7920),h=i(7278),u=i(4890),d=i(1546),p=i(655);const m=["attr","canClear","childView","childViewEventPrefix","className","clearText","emptyView","emptyViewOptions","headingText","infoText","isSelectlist","lists","noResultsText","placeholderText","template"],g=["attr","getItemSearchText","isCheckable","itemClassName","itemTemplate","itemTemplateContext"],f=r.View.extend({tagName:"li",className:"picklist--no-results",template:s().template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(o=null!=(o=r(i,"noResultsText")||(null!=t?r(t,"noResultsText"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"noResultsText",hash:{},data:s,loc:{start:{line:1,column:0},end:{line:1,column:19}}}):o)},useData:!0}),serializeData(){return this.options}}),w=r.View.extend({tagName:"li",itemTemplate:s().template({1:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((r(i,"fa")||t&&r(t,"fa")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=(o=null!=t?r(t,"icon"):t)?r(o,"type"):o,null!=(o=null!=t?r(t,"icon"):t)?r(o,"icon"):o,{name:"fa",hash:{classes:null!=(o=null!=t?r(t,"icon"):t)?r(o,"classes"):o},data:s,loc:{start:{line:2,column:39},end:{line:2,column:86}}}))},3:function(e,t,i,n,s){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(i,"fas")||t&&o(t,"fas")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"check",{name:"fas",hash:{classes:"u-icon--12 u-margin--l-16"},data:s,loc:{start:{line:3,column:21},end:{line:3,column:72}}}))},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n    <div class="flex-grow">'+(null!=(o=a(i,"if").call(r,null!=t?a(t,"icon"):t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s,loc:{start:{line:2,column:27},end:{line:2,column:93}}}))?o:"")+"<span>"+e.escapeExpression((a(i,"matchText")||t&&a(t,"matchText")||e.hooks.helperMissing).call(r,null!=t?a(t,"text"):t,null!=t?a(t,"query"):t,{name:"matchText",hash:{},data:s,loc:{start:{line:2,column:99},end:{line:2,column:123}}}))+"</span></div>\n    "+(null!=(o=a(i,"if").call(r,null!=t?a(t,"isChecked"):t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s,loc:{start:{line:3,column:4},end:{line:3,column:79}}}))?o:"")+"\n  "},useData:!0}),itemClassName(){const e=[];return this.model.get("isDisabled")&&e.push("is-disabled"),this.model.get("hasDivider")&&e.push("has-divider"),e.join(" ")},className(){const e=["picklist__item","js-picklist-item",(0,o.result)(this,"itemClassName","")];return this.model===this.state.get("selected")&&e.push("is-selected"),e.join(" ")},triggers:{click:"select"},preinitialize(e){this.mergeOptions(e,["state",...g])},onRender(){this.searchText=this.getItemSearchText(this.model)},getItemSearchText(e){return this.$el.text()},itemTemplateContext:o.noop,templateContext(){const e=this.getOption("isCheckable"),t=this.model===this.state.get("selected");return(0,o.extend)({text:this.model.get(this.attr),query:this.state.get("query"),isChecked:e&&t},(0,o.result)(this,"itemTemplateContext"))},getTemplate(){return this.itemTemplate}}),v=r.CollectionView.extend({className:"picklist__group",tagName:"li",template:s().template({1:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="picklist__heading">'+e.escapeExpression("function"==typeof(o=null!=(o=r(i,"headingText")||(null!=t?r(t,"headingText"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"headingText",hash:{},data:s,loc:{start:{line:2,column:54},end:{line:2,column:71}}}):o)+"</div>"},3:function(e,t,i,n,s){var o,r=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="picklist__info">'+l((c(i,"fas")||t&&c(t,"fas")||a).call(r,"circle-info",{name:"fas",hash:{},data:s,loc:{start:{line:4,column:48},end:{line:4,column:69}}}))+l("function"==typeof(o=null!=(o=c(i,"infoText")||(null!=t?c(t,"infoText"):t))?o:a)?o.call(r,{name:"infoText",hash:{},data:s,loc:{start:{line:4,column:69},end:{line:4,column:83}}}):o)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    "+(null!=(o=a(i,"if").call(r,null!=t?a(t,"headingText"):t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s,loc:{start:{line:2,column:4},end:{line:2,column:84}}}))?o:"")+"\n    <ul></ul>\n    "+(null!=(o=a(i,"if").call(r,null!=t?a(t,"infoText"):t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s,loc:{start:{line:4,column:4},end:{line:4,column:96}}}))?o:"")+"\n  "},useData:!0}),serializeCollection:o.noop,childViewContainer:"ul",childViewEventPrefix:"item",modelEvents:{"change:query":"filter"},viewFilter(e){e.render();const t=this.model.get("query");return!t||!e.searchText||((e,t)=>!!e&&(0,o.every)((0,c.A)(t),(t=>{const i=(0,l.A)(t);return!!String(e).match(i)})))(e.searchText,t)},initialize(e){this.mergeOptions(e,g)},childViewOptions(){const e=(0,o.pick)(this,...g);return(0,o.extend)({state:this.model},e)},templateContext(){return{headingText:this.getOption("headingText"),infoText:this.getOption("infoText")}}}),y=r.CollectionView.extend({behaviors:[{behaviorClass:u.A,selector:".js-input"},d.A,p.A],template:s().template({1:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="picklist__heading u-margin--b-8">'+e.escapeExpression("function"==typeof(o=null!=(o=r(i,"headingText")||(null!=t?r(t,"headingText"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"headingText",hash:{},data:s,loc:{start:{line:3,column:70},end:{line:3,column:87}}}):o)+"</div>"},3:function(e,t,i,n,s){var o,r=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l="function",c=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<input type="text" class="js-input picklist__input input-primary--small" placeholder="'+c(typeof(o=null!=(o=h(i,"placeholderText")||(null!=t?h(t,"placeholderText"):t))?o:a)===l?o.call(r,{name:"placeholderText",hash:{},data:s,loc:{start:{line:4,column:112},end:{line:4,column:133}}}):o)+'" value="'+c(typeof(o=null!=(o=h(i,"query")||(null!=t?h(t,"query"):t))?o:a)===l?o.call(r,{name:"query",hash:{},data:s,loc:{start:{line:4,column:142},end:{line:4,column:153}}}):o)+'">'},5:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div><a class="picklist__item js-picklist-item js-clear">'+e.escapeExpression("function"==typeof(o=null!=(o=r(i,"clearText")||(null!=t?r(t,"clearText"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"clearText",hash:{},data:s,loc:{start:{line:5,column:79},end:{line:5,column:94}}}):o)+"</a></div>"},7:function(e,t,i,n,s){var o,r=null!=t?t:e.nullContext||{},a=e.hooks.helperMissing,l=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="picklist__info ">'+l((c(i,"fas")||t&&c(t,"fas")||a).call(r,"circle-info",{name:"fas",hash:{},data:s,loc:{start:{line:8,column:49},end:{line:8,column:70}}}))+l("function"==typeof(o=null!=(o=c(i,"infoText")||(null!=t?c(t,"infoText"):t))?o:a)?o.call(r,{name:"infoText",hash:{},data:s,loc:{start:{line:8,column:70},end:{line:8,column:84}}}):o)+"</div>"},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r=null!=t?t:e.nullContext||{},a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    <div>\n      "+(null!=(o=a(i,"if").call(r,null!=t?a(t,"headingText"):t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s,loc:{start:{line:3,column:6},end:{line:3,column:100}}}))?o:"")+"\n      "+(null!=(o=a(i,"if").call(r,null!=t?a(t,"isSelectlist"):t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s,loc:{start:{line:4,column:6},end:{line:4,column:162}}}))?o:"")+"\n      "+(null!=(o=a(i,"if").call(r,null!=t?a(t,"canClear"):t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.noop,data:s,loc:{start:{line:5,column:6},end:{line:5,column:111}}}))?o:"")+'\n    </div>\n    <ul class="flex-region picklist__scroll js-picklist-scroll"></ul>\n    '+(null!=(o=a(i,"if").call(r,null!=t?a(t,"infoText"):t,{name:"if",hash:{},fn:e.program(7,s,0),inverse:e.noop,data:s,loc:{start:{line:8,column:4},end:{line:8,column:97}}}))?o:"")+"\n  "},useData:!0}),triggers:{"focus @ui.input":"focus","click @ui.clear":"clear"},ui:{input:".js-input",clear:".js-clear"},onClear(){this.triggerMethod("picklist:item:select",{model:null})},serializeCollection:o.noop,childViewContainer:"ul",emptyView:f,initialize(e){this.mergeOptions(e,m),this.mergeOptions(e,g),this.debouncedFilter=(0,o.debounce)(this.filter,1),(0,o.each)(this.lists,this.addList,this)},addList(e){const t=(0,o.extend)({model:this.model,childView:this.childView},(0,o.pick)(this,...g),e),i=new v(t);i.render(),this.addChildView(i)},viewFilter:e=>!!(0,o.size)(e.children)||e.shouldShow,childViewEvents:{"before:render:children"(){return this.debouncedFilter()}},onRenderChildren(){this.$(".js-picklist-item").removeClass("is-highlighted"),this.model.get("query")&&this.$(".js-picklist-item").first().addClass("is-highlighted")},emptyViewOptions(){return{noResultsText:this.noResultsText}},templateContext(){return{canClear:this.canClear,clearText:this.clearText,headingText:this.headingText,infoText:this.infoText,placeholderText:this.placeholderText,isSelectlist:this.isSelectlist}}}),x=h.A.extend({attr:"text",canClear:!1,isSelectList:!1,childView:w,className:"picklist",childViewEventPrefix:"picklist",clearText:a.Ay.components.picklist.clearText,headingText:"",infoText:"",noResultsText:a.Ay.components.picklist.noResultsText,constructor:function(e){this.mergeOptions(e,m),this.mergeOptions(e,g),h.A.apply(this,arguments)},viewOptions(){const e=(0,o.pick)(this,...m,...g);return(0,o.extend)({model:this.getState()},e)},ViewClass:y,viewEvents:{"watch:change":"onWatchChange"},onWatchChange(e){this.setState("query",e)}})},3484:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var n=i(6232),s=i.n(n),o=i(1359),r=i(9737),a=i(4697),l=i(7278);const c=["className","delay","ignoreEl","message","messageHtml","orientation","position","uiView","ui"],h=a.View.extend({template:s().template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(typeof(r=null!=(r=h(i,"message")||(null!=t?h(t,"message"):t))?r:l)===c?r.call(a,{name:"message",hash:{},data:s,loc:{start:{line:1,column:0},end:{line:1,column:13}}}):r)+(null!=(o=typeof(r=null!=(r=h(i,"messageHtml")||(null!=t?h(t,"messageHtml"):t))?r:l)===c?r.call(a,{name:"messageHtml",hash:{},data:s,loc:{start:{line:1,column:13},end:{line:1,column:32}}}):r)?o:"")},useData:!0}),templateContext(){return{message:this.getOption("message"),messageHtml:this.getOption("messageHtml")}}}),u=l.A.extend({ViewClass:h,className:"tooltip",delay:0,constructor:function(e){this.mergeOptions(e,c),this.setListeners(),this.listenTo(this.uiView,"render destroy",this.destroy),l.A.apply(this,arguments)},setListeners(){this.ui&&(this.ui.on("pointerenter.tooltip",(0,o.bind)(this.showTooltip,this)),this.ui.on("mouseleave.tooltip",(0,o.bind)(this.hideTooltip,this)),this.ui.on("pointerdown.tooltip",(0,o.bind)(this.showTooltip,this)))},showTooltip(){clearTimeout(this.delayTimeout);const e=(0,o.result)(this,"delay");this.delayTimeout=(0,o.delay)((0,o.bind)(this.show,this),e)},hideTooltip(){clearTimeout(this.delayTimeout),this.empty()},onBeforeDestroy(){clearTimeout(this.delayTimeout)},onShow(){(0,r.A)({targets:this.getView().el,duration:1500,opacity:[0,1]})},viewOptions(){return{className:(0,o.result)(this,"className"),message:(0,o.result)(this,"message"),messageHtml:(0,o.result)(this,"messageHtml")}},position(){return this.uiView.getBounds(this.ui)},regionOptions(){const e=(0,o.result)(this,"orientation"),t=(0,o.result)(this,"ignoreEl");return(0,o.extend)({orientation:e,ignoreEl:t},(0,o.result)(this,"position"))}})},8131:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var n=i(6232),s=i.n(n),o=i(9737),r=i(4697);const a=s().template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n  <div class="loader__bar js-progress-bar">\n    <div class="loader__bar-progress--loop"></div>\n  </div>\n  <div class="loader__text js-loading">'+e.escapeExpression(e.lambda((o=(o=(o=s&&r(s,"intl"))&&r(o,"regions"))&&r(o,"preload"))&&r(o,"loading"),t))+"</div>\n"},useData:!0}),l=r.View.extend({className:"loader",template:a,ui:{progressBar:".js-progress-bar",loading:".js-loading"},onRender(){const e=this.getOption("timeout");e?this.showLoader(e/2,e/2+200):this.showLoader(0,300)},showLoader(e,t){o.A.timeline({easing:"easeInQuad",delay:e}).add({opacity:[0,1],targets:this.ui.progressBar[0],duration:t}).add({opacity:[0,1],targets:this.ui.loading[0],duration:t-100},100)}}),c=r.Region.extend({timeout:500,startPreloader(){this.show(new l({timeout:this.getOption("timeout")}))}})},4667:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var n=i(1359),s=i(2866),o=i.n(s),r=i(7786),a=i.n(r),l=i(6447),c=i.n(l),h=i(5087),u=i(7273),d=i(5073);const p=h.A.extend({startAfterInitialized:!0,channelName(){return`form${this.getOption("form").id}`},channelRequest(){if(!this.isDestroyed())return this.getChannel().request(...arguments)},initialize(e){this.updateDraft=(0,n.debounce)(this.updateDraft,15e3),this.refreshForm=(0,n.debounce)(this.refreshForm,18e5),this.mergeOptions(e,["action","form","patient","responses","latestResponse"]),this.currentUser=c().request("bootstrap","currentUser")},onBeforeDestroy(){this.updateDraft.cancel(),this.refreshForm.cancel()},radioRequests:{"ready:form":"readyForm","submit:form":"submitForm","fetch:clinicians":"fetchClinicians","fetch:directory":"fetchDirectory","fetch:form":"fetchForm","fetch:form:data":"fetchFormPrefill","fetch:form:response":"fetchFormResponse","update:storedSubmission":"updateStoredSubmission","get:storedSubmission":"getStoredSubmission","clear:storedSubmission":"clearStoredSubmission","fetch:field":"fetchField","update:field":"updateField","fetch:icd":"fetchIcd",version:"checkVersion"},readyForm(){this.trigger("ready"),this.refreshForm()},checkVersion(e){e!==d.e4.frontend&&window.location.reload()},isReadOnly(){const e=this.action&&this.action.isLocked(),t=this.action&&!this.action.canSubmit();return this.form.isReadOnly()||e||t},getStoreId(){const e=(0,n.get)(this.action,"id"),t=[this.currentUser.id,this.patient.id,this.form.id];return e&&t.push(e),`form-subm-${t.join("-")}`},getLatestDraft(){return this.responses&&this.responses.first()!==this.latestResponse?{}:this.latestResponse&&this.latestResponse.getDraft()||{}},getStoredSubmission(){const e=this.getLatestDraft(),t=a().get(this.getStoreId())||{};return!e.updated||t.updated&&!o()(e.updated).isAfter(t.updated)?(t.updated&&this.trigger("update:submission",t.updated),t):(this.trigger("update:submission",e.updated),e)},updateStoredSubmission(e){if(this.isReadOnly())return;const t=o()().format();this._draft=e;try{a().set(this.getStoreId(),{submission:e,updated:t}),this.trigger("update:submission",t)}catch{a().each(((e,t)=>{String(t).startsWith("form-subm-")&&a().remove(t)})),a().set(this.getStoreId(),{submission:e,updated:t})}this.updateDraft(),this.refreshForm()},clearStoredSubmission(){this.latestResponse=null,a().remove(this.getStoreId()),this.trigger("update:submission")},fetchField({fieldName:e,requestId:t}){const i=c().request("entities","patientFields:model",{name:e,_patient:this.patient.id});return i.fetch().then((()=>{this.channelRequest("send","fetch:field",{value:i.getValue(),requestId:t})})).catch((({responseData:e})=>{this.channelRequest("send","fetch:field",{error:e,requestId:t})}))},updateField({fieldName:e,value:t,requestId:i}){const n=c().request("entities","patientFields:model",{name:e,value:t,_patient:this.patient.id});return n.saveAll().then((()=>{this.channelRequest("send","update:field",{value:n.getValue(),requestId:i})})).catch((({responseData:e})=>{this.channelRequest("send","update:field",{error:e,requestId:i})}))},fetchClinicians({teamId:e,requestId:t}){const i=function(e){return e?c().request("entities","teams:model",e).getAssignableClinicians():c().request("bootstrap","currentWorkspace").getAssignableClinicians()}(e);this.channelRequest("send","fetch:directory",{value:i.toJSON(),requestId:t})},fetchDirectory({directoryName:e,query:t,requestId:i}){return Promise.resolve(c().request("entities","fetch:directories:model",e,t)).then((e=>{this.channelRequest("send","fetch:directory",{value:e.get("value"),requestId:i})})).catch((({responseData:e})=>{this.channelRequest("send","fetch:directory",{error:e,requestId:i})}))},fetchIcd({term:e,requestId:t}){return Promise.resolve(c().request("entities","fetch:icd:byTerm",e)).then((e=>{this.channelRequest("send","fetch:icd",{value:(0,n.get)(e,["data","icdCodes"]),requestId:t})})).catch((({responseData:e})=>{this.channelRequest("send","fetch:icd",{error:e,requestId:t})}))},fetchForm(){return Promise.resolve(c().request("entities","fetch:forms:definition",this.form.id)).then((e=>{this.channelRequest("send","fetch:form",{definition:e,contextScripts:this.form.getContextScripts()})}))},fetchFormStoreSubmission({submission:e}){return Promise.all([c().request("entities","fetch:forms:definition",this.form.id)]).then((([t])=>{this.channelRequest("send","fetch:form:data",{definition:t,storedSubmission:e,...(0,n.omit)(this.form.getContext(),"loaderReducers")})}))},_getPrefillFilters({flowId:e,patientId:t},i){const n={status:u.II.SUBMITTED,flow:e,patient:t};i.isReport()&&(n.created=`<=${this.action.get("created_at")}`);const s=i.getPrefillActionTag();return s?(n["action.tags"]=s,n):(n.form=i.getPrefillFormId(),n)},fetchLatestFormSubmission(e){const t=this.isReadOnly(),i=(0,n.get)(this.action,"id"),s=this.patient.id,o=this._getPrefillFilters({flowId:e,patientId:s},this.form);return Promise.all([c().request("entities","fetch:forms:definition",this.form.id),c().request("entities","fetch:forms:data",i,s,this.form.id),c().request("entities","fetch:formResponses:latest",o)]).then((([e,i,n])=>{this.channelRequest("send","fetch:form:data",{definition:e,isReadOnly:t,formData:i.attributes,responseData:n.getFormData(),formSubmission:n.getResponse(),...this.form.getContext()})}))},fetchFormPrefill(){const e=this.getStoredSubmission(),t=this.isReadOnly();if(!t&&e.updated)return this.fetchFormStoreSubmission(e);const i=this.responses&&this.responses.getFirstSubmission();if(!i&&this.action){if(this.action.hasTag("prefill-latest-response"))return this.fetchLatestFormSubmission();if(this.action.hasTag("prefill-flow-response"))return this.fetchLatestFormSubmission(this.action.get("_flow"))}return Promise.all([c().request("entities","fetch:forms:definition",this.form.id),c().request("entities","fetch:forms:data",(0,n.get)(this.action,"id"),this.patient.id,this.form.id),c().request("entities","fetch:formResponses:model",(0,n.get)(i,"id"))]).then((([e,i,n])=>{this.channelRequest("send","fetch:form:data",{definition:e,isReadOnly:t,formData:i.attributes,responseData:n.getFormData(),formSubmission:n.getResponse(),...this.form.getContext()})}))},fetchFormResponse({responseId:e}){return Promise.all([c().request("entities","fetch:forms:definition",this.form.id),c().request("entities","fetch:formResponses:model",e)]).then((([e,t])=>{this.channelRequest("send","fetch:form:response",{definition:e,responseData:t.getFormData(),formSubmission:t.getResponse(),contextScripts:this.form.getContextScripts()})}))},useLatestDraft(e){return this.latestResponse&&this.latestResponse.get("status")===u.II.DRAFT?{...e,id:this.latestResponse.id}:e},updateDraft(){const e=this.useLatestDraft({response:{data:this._draft},status:u.II.DRAFT,_form:this.form,_patient:this.patient,_action:this.action}),t=c().request("entities","formResponses:model",e);return this.latestResponse=t,t.saveAll().catch((({responseData:e})=>{e&&this.trigger("error",e.errors)}))},refreshForm(){this.trigger("refresh")},submitForm({response:e}){this.updateDraft.cancel(),this.refreshForm.cancel();const t=this.useLatestDraft({response:e,status:u.II.SUBMITTED,_form:this.form,_patient:this.patient,_action:this.action}),i=c().request("entities","formResponses:model",t);return this.trigger("submit"),i.saveAll().then((()=>{this.updateDraft.cancel(),this.refreshForm.cancel(),this.clearStoredSubmission(),this.trigger("success",i)})).catch((({responseData:e})=>{if(!e)return;this.trigger("error",e.errors);const t=(0,n.map)(e.errors,"detail");this.channelRequest("send","form:errors",t)}))}})},7213:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n={BACKSPACE_KEY:8,TAB_KEY:9,ENTER_KEY:13,SHIFT_KEY:16,ESCAPE_KEY:27,LEFT_KEY:37,UP_KEY:38,RIGHT_KEY:39,DOWN_KEY:40,AT_KEY_SHIFT:50}},2925:(e,t,i)=>{"use strict";i.d(t,{X:()=>d,w:()=>m});var n=i(4697),s=i(8131),o=i(8510),r=i.n(o),a=i(3294),l=i.n(a),c=i(2461),h=i.n(c);const u=n.View.extend({triggers:{"click .js-login":"click:login"},template:l(),templateContext:{url:location.host}}),d=n.View.extend({el:"#root",onRender(){this.showChildView("content",new u)},regions:{content:{el:"[data-content-region]",regionClass:s.A}},template:r(),childViewTriggers:{"click:login":"click:login"}}),p=n.View.extend({className:"prelogin__message",template:h()}),m=n.View.extend({className:"fill-window",regions:{content:{el:"[data-content-region]",regionClass:s.A}},template:r(),onRender(){this.getOption("notSetup")?this.showChildView("content",new p):this.getRegion("content").startPreloader()}})},1336:(e,t,i)=>{var n=i(6232);e.exports=(n.default||n).template({1:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' <button class="alert-box__link js-undo" type="button">'+e.escapeExpression(e.lambda((o=(o=(o=(o=s&&r(s,"intl"))&&r(o,"globals"))&&r(o,"alertBox"))&&r(o,"alertBoxTemplate"))&&r(o,"undoBtn"),t))+"</button>"},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",h=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="alert-box__icon '+h(typeof(r=null!=(r=u(i,"alertType")||(null!=t?u(t,"alertType"):t))?r:l)===c?r.call(a,{name:"alertType",hash:{},data:s,loc:{start:{line:1,column:28},end:{line:1,column:43}}}):r)+'">\n  '+h((u(i,"far")||t&&u(t,"far")||l).call(a,null!=t?u(t,"iconType"):t,{name:"far",hash:{},data:s,loc:{start:{line:2,column:2},end:{line:2,column:18}}}))+'\n</div>\n<div class="alert-box__body">\n  '+h(typeof(r=null!=(r=u(i,"text")||(null!=t?u(t,"text"):t))?r:l)===c?r.call(a,{name:"text",hash:{},data:s,loc:{start:{line:5,column:2},end:{line:5,column:12}}}):r)+(null!=(o=typeof(r=null!=(r=u(i,"html")||(null!=t?u(t,"html"):t))?r:l)===c?r.call(a,{name:"html",hash:{},data:s,loc:{start:{line:5,column:12},end:{line:5,column:24}}}):r)?o:"")+(null!=(o=u(i,"if").call(a,null!=t?u(t,"hasUndo"):t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s,loc:{start:{line:5,column:24},end:{line:5,column:163}}}))?o:"")+'\n</div>\n<button class="alert-box__cancel js-dismiss" type="button">'+h(e.lambda((o=(o=(o=(o=s&&u(s,"intl"))&&u(o,"globals"))&&u(o,"alertBox"))&&u(o,"alertBoxTemplate"))&&u(o,"dismissBtn"),t))+"</button>\n"},useData:!0})},5864:(e,t,i)=>{var n=i(6232);e.exports=(n.default||n).template({1:function(e,t,i,n,s){var o,r=e.lambda,a=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+a(r((o=(o=(o=(o=s&&l(s,"intl"))&&l(o,"globals"))&&l(o,"error"))&&l(o,"errorTemplate"))&&l(o,"notFoundMessage"),t))+"<br>\n            "+a(r((o=(o=(o=(o=s&&l(s,"intl"))&&l(o,"globals"))&&l(o,"error"))&&l(o,"errorTemplate"))&&l(o,"notFoundInfo"),t))+"\n"},3:function(e,t,i,n,s){var o,r=e.escapeExpression,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+r(e.lambda((o=(o=(o=(o=s&&c(s,"intl"))&&c(o,"globals"))&&c(o,"error"))&&c(o,"errorTemplate"))&&c(o,"errorMessage"),t))+"<br>\n            "+r((c(i,"formatMessage")||t&&c(t,"formatMessage")||l).call(a,(c(i,"intlGet")||t&&c(t,"intlGet")||l).call(a,"globals.error.errorTemplate.errorInfo",{name:"intlGet",hash:{},data:s,loc:{start:{line:20,column:28},end:{line:20,column:77}}}),{name:"formatMessage",hash:{status:null!=t?c(t,"status"):t},data:s,loc:{start:{line:20,column:12},end:{line:20,column:93}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r=e.lambda,a=e.escapeExpression,l=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="error-page__contains">\n  <div class="error-page__wrap">\n    <div class="error-page__dialog">\n      <div class="error-page__section">\n        <svg class="svg needs-attention u-margin--b-4" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32">\n          <g></g>\n          <path d="M14.983 6.713c0.562-0.951 1.472-0.951 2.034 0l12.738 17.565c0.562 0.951 0.123 1.722-0.982 1.722h-25.548c-1.104 0-1.544-0.771-0.982-1.722l12.738-17.565z" fill="#E65140" />\n        </svg>\n\n        <h2 class="error-page__heading">'+a(r((o=(o=(o=(o=s&&c(s,"intl"))&&c(o,"globals"))&&c(o,"error"))&&c(o,"errorTemplate"))&&c(o,"errorHeader"),t))+'</h2>\n      </div>\n      <div class="error-page__section">\n        <p>\n'+(null!=(o=c(i,"if").call(l,null!=t?c(t,"is404"):t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s,loc:{start:{line:14,column:10},end:{line:17,column:17}}}))?o:"")+(null!=(o=c(i,"if").call(l,null!=t?c(t,"status"):t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s,loc:{start:{line:18,column:10},end:{line:21,column:17}}}))?o:"")+'        </p>\n        <a class="js-back button--blue u-margin--t-16">'+a(r((o=(o=(o=(o=s&&c(s,"intl"))&&c(o,"globals"))&&c(o,"error"))&&c(o,"errorTemplate"))&&c(o,"backBtn"),t))+'</a>\n      </div>\n    </div>\n    <svg class="svg roundingwell-logo u-margin--t-16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="116" height="21" viewBox="0 0 185 32">\n      <g></g>\n      <path d="M40.975 11.456c-1.339 0.082-2.624 0.683-3.499 1.995v8.501c0 0.547-0.465 1.011-1.039 1.011h-0.027c-0.547-0.027-0.984-0.465-0.984-1.011v-11.535c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v1.312c0.793-1.039 2.105-2.351 3.635-2.351 0.492 0 0.929 0.41 0.929 0.957 0 0.602-0.465 1.093-1.066 1.121z" fill="#cccccc" />\n      <path d="M49.53 23.128c-4.018 0-6.533-3.116-6.533-6.943 0-3.827 2.515-6.916 6.533-6.916s6.533 3.089 6.533 6.916c0 3.826-2.514 6.943-6.533 6.943zM49.53 11.101c-2.815 0-4.401 2.406-4.401 5.084 0 2.706 1.585 5.111 4.401 5.111 2.815 0 4.373-2.406 4.373-5.111 0-2.679-1.558-5.084-4.373-5.084z" fill="#cccccc" />\n      <path d="M68.636 22.964c-0.547 0-1.011-0.465-1.011-1.011v-1.011c-1.011 1.148-2.733 2.187-4.701 2.187-2.761 0-4.209-1.34-4.209-4.21v-8.501c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v7.872c0 2.323 1.175 3.007 2.952 3.007 1.613 0 3.143-0.929 3.909-1.995v-8.883c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v11.535c0 0.546-0.465 1.011-1.039 1.011z" fill="#cccccc" />\n      <path d="M83.013 22.964c-0.547 0-1.011-0.465-1.011-1.011v-7.79c0-2.323-1.175-3.062-2.952-3.062-1.613 0-3.143 0.984-3.909 2.050v8.801c0 0.547-0.465 1.011-1.039 1.011-0.547 0-1.011-0.465-1.011-1.011v-11.535c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v1.093c0.929-1.093 2.733-2.242 4.701-2.242 2.761 0 4.21 1.394 4.21 4.264v8.419c-0 0.547-0.465 1.012-1.039 1.012z" fill="#cccccc" />\n      <path d="M98.046 22.964c-0.547 0-1.011-0.465-1.011-1.011v-1.121c-0.984 1.34-2.597 2.296-4.455 2.296-3.444 0-5.877-2.624-5.877-6.915 0-4.21 2.405-6.943 5.877-6.943 1.777 0 3.389 0.875 4.455 2.324v-6.205c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v16.564c0 0.547-0.464 1.012-1.038 1.012zM97.035 13.233c-0.738-1.148-2.324-2.132-3.964-2.132-2.651 0-4.237 2.187-4.237 5.112 0 2.924 1.585 5.084 4.237 5.084 1.64 0 3.226-0.929 3.964-2.077v-5.986z" fill="#cccccc" />\n      <path d="M103.512 22.964c-0.546 0-1.011-0.465-1.011-1.011v-11.535c0-0.519 0.465-0.984 1.066-0.984 0.52 0 0.984 0.465 0.984 0.984v11.535c0 0.547-0.465 1.012-1.039 1.012z" fill="#cccccc" />\n      <path d="M117.89 22.964c-0.547 0-1.012-0.465-1.012-1.011v-7.79c0-2.323-1.175-3.062-2.952-3.062-1.613 0-3.143 0.984-3.909 2.050v8.801c0 0.547-0.464 1.011-1.038 1.011-0.547 0-1.011-0.465-1.011-1.011v-11.535c0-0.519 0.464-0.984 1.066-0.984 0.52 0 0.984 0.465 0.984 0.984v1.093c0.93-1.093 2.734-2.242 4.702-2.242 2.76 0 4.209 1.394 4.209 4.264v8.419c0 0.547-0.464 1.012-1.038 1.012z" fill="#cccccc" />\n      <path d="M127.647 28.157c-1.941 0-3.499-0.355-4.947-1.585-0.191-0.164-0.301-0.41-0.301-0.684 0-0.465 0.41-0.875 0.902-0.875 0.218 0 0.41 0.055 0.574 0.191 1.039 0.929 2.214 1.257 3.772 1.257 2.187 0 4.237-1.066 4.237-3.964v-1.886c-0.957 1.34-2.57 2.351-4.428 2.351-3.444 0-5.876-2.569-5.876-6.833 0-4.237 2.405-6.861 5.876-6.861 1.777 0 3.362 0.875 4.428 2.324v-1.175c0-0.519 0.464-0.984 1.066-0.984 0.52 0 0.984 0.465 0.984 0.984v11.999c0 4.373-3.061 5.74-6.286 5.74zM131.884 13.233c-0.711-1.148-2.296-2.132-3.936-2.132-2.652 0-4.237 2.105-4.237 5.030 0 2.897 1.585 5.029 4.237 5.029 1.64 0 3.225-1.011 3.936-2.16v-5.767z" fill="#cccccc" />\n      <path d="M155.309 11.237l-3.198 10.332c-0.246 0.82-1.039 1.394-1.886 1.394h-0.055c-0.875 0-1.64-0.574-1.886-1.394l-2.652-8.391-2.651 8.391c-0.246 0.82-1.039 1.394-1.913 1.394h-0.055c-0.848 0-1.613-0.574-1.859-1.394l-3.225-10.332c-0.027-0.137-0.055-0.273-0.055-0.41 0-0.684 0.574-1.394 1.449-1.394 0.629 0 1.23 0.41 1.394 1.011l2.515 8.665 2.788-8.528c0.219-0.683 0.848-1.148 1.64-1.148 0.711 0 1.34 0.465 1.585 1.148l2.788 8.528 2.514-8.665c0.164-0.601 0.766-1.011 1.395-1.011 0.847 0 1.449 0.656 1.449 1.394-0.001 0.137-0.028 0.273-0.083 0.41z" fill="#cccccc" />\n      <path d="M168.073 17.141h-8.692c0.191 1.968 1.695 3.635 4.155 3.635 0.956 0 2.049-0.3 2.952-0.875 0.191-0.109 0.41-0.164 0.601-0.164 0.602 0 1.23 0.492 1.23 1.202 0 1.503-3.389 2.187-5.084 2.187-3.964 0-6.915-2.761-6.915-6.943 0-3.827 2.788-6.916 6.697-6.916 3.089 0 5.33 1.859 6.15 4.701 0.164 0.547 0.328 1.175 0.328 1.749 0 0.765-0.629 1.421-1.421 1.421zM163.017 11.62c-2.406 0-3.526 1.913-3.663 3.499h7.326c-0.055-1.53-1.094-3.499-3.663-3.499z" fill="#cccccc" />\n      <path d="M173.129 22.964c-0.82 0-1.449-0.656-1.449-1.449v-15.689c0-0.765 0.629-1.421 1.503-1.421 0.766 0 1.422 0.656 1.422 1.421v15.689c-0 0.793-0.656 1.449-1.477 1.449z" fill="#cccccc" />\n      <path d="M179.060 22.964c-0.82 0-1.449-0.656-1.449-1.449v-15.689c0-0.765 0.629-1.421 1.503-1.421 0.766 0 1.422 0.656 1.422 1.421v15.689c-0 0.793-0.656 1.449-1.477 1.449z" fill="#cccccc" />\n      <path d="M28.781 14.834c-0.117-1.519-0.498-3.012-1.117-4.385-0.618-1.374-1.471-2.627-2.501-3.694-1.030-1.068-2.235-1.949-3.546-2.598-1.311-0.651-2.727-1.067-4.16-1.23-1.432-0.164-2.878-0.081-4.264 0.24-1.385 0.321-2.702 0.883-3.877 1.644-1.175 0.761-2.208 1.719-3.046 2.814-0.838 1.094-1.481 2.325-1.893 3.618-0.414 1.293-0.596 2.648-0.55 3.983l0.263 0.003c0.076-1.305 0.375-2.585 0.879-3.768 0.503-1.183 1.208-2.268 2.067-3.196 0.858-0.929 1.87-1.701 2.971-2.277 1.102-0.576 2.294-0.955 3.505-1.118 1.209-0.164 2.442-0.116 3.617 0.132 1.176 0.247 2.296 0.697 3.299 1.318 1.004 0.62 1.89 1.411 2.614 2.318 0.724 0.907 1.283 1.93 1.649 3.006 0.367 1.076 0.54 2.204 0.521 3.323-0.020 1.122-0.23 2.224-0.617 3.247-0.386 1.024-0.949 1.969-1.648 2.787-0.699 0.818-1.534 1.507-2.449 2.031-0.915 0.525-1.91 0.883-2.925 1.061-1.014 0.178-2.057 0.177-3.060 0.007-1.001-0.169-1.954-0.509-2.815-0.996-0.295-0.167-0.578-0.352-0.85-0.551l4.686-7.132-0.102-0.083-10.27 10.316 0.106 0.099c0.083 0.076 0.156 0.142 0.236 0.211 0.157 0.137 0.318 0.271 0.48 0.401 0.326 0.261 0.662 0.506 1.008 0.737 0.201 0.134 0.405 0.263 0.613 0.386 0.506 0.302 1.029 0.573 1.566 0.81 1.513 0.669 3.135 1.066 4.76 1.18 0.813 0.057 1.622 0.045 2.428-0.035 0.805-0.080 1.603-0.229 2.379-0.445 1.554-0.431 3.020-1.132 4.315-2.052 1.296-0.918 2.423-2.054 3.321-3.338 0.9-1.283 1.572-2.715 1.978-4.21 0.408-1.495 0.548-3.048 0.429-4.565z" fill="#cccccc" />\n    </svg>\n  </div>\n</div>\n'},useData:!0})},3716:(e,t,i)=>{var n=i(6232);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="loading-modal__content is-animated">\n  <div>'+e.escapeExpression(e.lambda((o=(o=(o=(o=(o=s&&r(s,"intl"))&&r(o,"globals"))&&r(o,"modal"))&&r(o,"loading"))&&r(o,"loadingModal"))&&r(o,"headerText"),t))+'</div>\n  <div class="loading-modal__bar">\n    <div class="loading-modal__bar-progress"></div>\n  </div>\n</div>\n'},useData:!0})},5456:(e,t,i)=>{var n=i(6232);e.exports=(n.default||n).template({1:function(e,t,i,n,s){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="modal__header-icon">'+e.escapeExpression((o(i,"fa")||t&&o(t,"fa")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?o(t,"headerIconType"):t,null!=t?o(t,"headerIcon"):t,{name:"fa",hash:{},data:s,loc:{start:{line:2,column:53},end:{line:2,column:85}}}))+"</span>"},3:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="button--text js-close">'+e.escapeExpression("function"==typeof(o=null!=(o=r(i,"cancelText")||(null!=t?r(t,"cancelText"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"cancelText",hash:{},data:s,loc:{start:{line:14,column:60},end:{line:14,column:76}}}):o)+"</button>"},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r,a=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",h=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="modal__header '+h(typeof(r=null!=(r=u(i,"headerClass")||(null!=t?u(t,"headerClass"):t))?r:l)===c?r.call(a,{name:"headerClass",hash:{},data:s,loc:{start:{line:1,column:26},end:{line:1,column:43}}}):r)+'" data-header-region>\n  '+(null!=(o=u(i,"if").call(a,null!=t?u(t,"headerIcon"):t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s,loc:{start:{line:2,column:2},end:{line:2,column:99}}}))?o:"")+'\n  <div class="flex-grow">'+h(typeof(r=null!=(r=u(i,"headingText")||(null!=t?u(t,"headingText"):t))?r:l)===c?r.call(a,{name:"headingText",hash:{},data:s,loc:{start:{line:3,column:25},end:{line:3,column:42}}}):r)+'</div>\n  <button class="button--icon js-close">'+h((u(i,"far")||t&&u(t,"far")||l).call(a,"xmark",{name:"far",hash:{},data:s,loc:{start:{line:4,column:40},end:{line:4,column:55}}}))+'</button>\n</div>\n\n<div class="modal__body" data-body-region>\n  <div class="'+h(typeof(r=null!=(r=u(i,"bodyClass")||(null!=t?u(t,"bodyClass"):t))?r:l)===c?r.call(a,{name:"bodyClass",hash:{},data:s,loc:{start:{line:8,column:14},end:{line:8,column:29}}}):r)+'">'+h(typeof(r=null!=(r=u(i,"bodyText")||(null!=t?u(t,"bodyText"):t))?r:l)===c?r.call(a,{name:"bodyText",hash:{},data:s,loc:{start:{line:8,column:31},end:{line:8,column:45}}}):r)+(null!=(o=typeof(r=null!=(r=u(i,"bodyHTML")||(null!=t?u(t,"bodyHTML"):t))?r:l)===c?r.call(a,{name:"bodyHTML",hash:{},data:s,loc:{start:{line:8,column:45},end:{line:8,column:61}}}):r)?o:"")+'</div>\n</div>\n\n<div class="modal__footer" data-footer-region>\n  <div class="modal__footer-actions">\n    <button type="submit" class="'+h(typeof(r=null!=(r=u(i,"buttonClass")||(null!=t?u(t,"buttonClass"):t))?r:l)===c?r.call(a,{name:"buttonClass",hash:{},data:s,loc:{start:{line:13,column:33},end:{line:13,column:50}}}):r)+' js-submit">'+h(typeof(r=null!=(r=u(i,"submitText")||(null!=t?u(t,"submitText"):t))?r:l)===c?r.call(a,{name:"submitText",hash:{},data:s,loc:{start:{line:13,column:62},end:{line:13,column:78}}}):r)+"</button>\n    "+(null!=(o=u(i,"if").call(a,null!=t?u(t,"cancelText"):t,{name:"if",hash:{},fn:e.program(3,s,0),inverse:e.noop,data:s,loc:{start:{line:14,column:4},end:{line:14,column:92}}}))?o:"")+'\n  </div>\n  <div data-info-region class="modal__footer-info">'+h(typeof(r=null!=(r=u(i,"infoText")||(null!=t?u(t,"infoText"):t))?r:l)===c?r.call(a,{name:"infoText",hash:{},data:s,loc:{start:{line:16,column:51},end:{line:16,column:65}}}):r)+"</div>\n</div>\n"},useData:!0})},3294:(e,t,i)=>{var n=i(6232);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h1 class="prelogin__header">Sign in to your organization</h1>\n\n<h2 class="prelogin__host">'+e.escapeExpression("function"==typeof(o=null!=(o=r(i,"url")||(null!=t?r(t,"url"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"url",hash:{},data:s,loc:{start:{line:3,column:27},end:{line:3,column:36}}}):o)+'</h2>\n\n<button class="prelogin__continue-button button--green js-login">\n  Continue to sign in\n  <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="right-to-bracket" role="img" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 512 512" class="svg-inline--fa fa-right-to-bracket">\n    <path fill="currentColor" d="M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"></path>\n  </svg>\n</button>\n\n<p class="prelogin__contact-info">Having trouble signing in? <a href="https://roundingwell.com/contact/">Contact Us</a></p>\n'},useData:!0})},2461:(e,t,i)=>{var n=i(6232);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="prelogin__message-header">\n  '+e.escapeExpression((o(i,"far")||t&&o(t,"far")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"circle-exclamation",{name:"far",hash:{},data:s,loc:{start:{line:2,column:2},end:{line:2,column:30}}}))+"\n</div>\n<div>\nHold up, your account is not\nset up yet. Please notify your manager\nor administrator to correct this issue.\n</div>\n"},useData:!0})},8510:(e,t,i)=>{var n=i(6232);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,s){return'<div class="prelogin">\n  <div class="prelogin__roundingwell-logo">\n    <svg class="svg roundingwell-logo" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="174" height="30" viewBox="0 0 185 32">\n      <g></g>\n      <path d="M40.975 11.456c-1.339 0.082-2.624 0.683-3.499 1.995v8.501c0 0.547-0.465 1.011-1.039 1.011h-0.027c-0.547-0.027-0.984-0.465-0.984-1.011v-11.535c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v1.312c0.793-1.039 2.105-2.351 3.635-2.351 0.492 0 0.929 0.41 0.929 0.957 0 0.602-0.465 1.093-1.066 1.121z" fill="#ffffff" />\n      <path d="M49.53 23.128c-4.018 0-6.533-3.116-6.533-6.943 0-3.827 2.515-6.916 6.533-6.916s6.533 3.089 6.533 6.916c0 3.826-2.514 6.943-6.533 6.943zM49.53 11.101c-2.815 0-4.401 2.406-4.401 5.084 0 2.706 1.585 5.111 4.401 5.111 2.815 0 4.373-2.406 4.373-5.111 0-2.679-1.558-5.084-4.373-5.084z" fill="#ffffff" />\n      <path d="M68.636 22.964c-0.547 0-1.011-0.465-1.011-1.011v-1.011c-1.011 1.148-2.733 2.187-4.701 2.187-2.761 0-4.209-1.34-4.209-4.21v-8.501c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v7.872c0 2.323 1.175 3.007 2.952 3.007 1.613 0 3.143-0.929 3.909-1.995v-8.883c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v11.535c0 0.546-0.465 1.011-1.039 1.011z" fill="#ffffff" />\n      <path d="M83.013 22.964c-0.547 0-1.011-0.465-1.011-1.011v-7.79c0-2.323-1.175-3.062-2.952-3.062-1.613 0-3.143 0.984-3.909 2.050v8.801c0 0.547-0.465 1.011-1.039 1.011-0.547 0-1.011-0.465-1.011-1.011v-11.535c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v1.093c0.929-1.093 2.733-2.242 4.701-2.242 2.761 0 4.21 1.394 4.21 4.264v8.419c-0 0.547-0.465 1.012-1.039 1.012z" fill="#ffffff" />\n      <path d="M98.046 22.964c-0.547 0-1.011-0.465-1.011-1.011v-1.121c-0.984 1.34-2.597 2.296-4.455 2.296-3.444 0-5.877-2.624-5.877-6.915 0-4.21 2.405-6.943 5.877-6.943 1.777 0 3.389 0.875 4.455 2.324v-6.205c0-0.519 0.465-0.984 1.066-0.984 0.519 0 0.984 0.465 0.984 0.984v16.564c0 0.547-0.464 1.012-1.038 1.012zM97.035 13.233c-0.738-1.148-2.324-2.132-3.964-2.132-2.651 0-4.237 2.187-4.237 5.112 0 2.924 1.585 5.084 4.237 5.084 1.64 0 3.226-0.929 3.964-2.077v-5.986z" fill="#ffffff" />\n      <path d="M103.512 22.964c-0.546 0-1.011-0.465-1.011-1.011v-11.535c0-0.519 0.465-0.984 1.066-0.984 0.52 0 0.984 0.465 0.984 0.984v11.535c0 0.547-0.465 1.012-1.039 1.012z" fill="#ffffff" />\n      <path d="M117.89 22.964c-0.547 0-1.012-0.465-1.012-1.011v-7.79c0-2.323-1.175-3.062-2.952-3.062-1.613 0-3.143 0.984-3.909 2.050v8.801c0 0.547-0.464 1.011-1.038 1.011-0.547 0-1.011-0.465-1.011-1.011v-11.535c0-0.519 0.464-0.984 1.066-0.984 0.52 0 0.984 0.465 0.984 0.984v1.093c0.93-1.093 2.734-2.242 4.702-2.242 2.76 0 4.209 1.394 4.209 4.264v8.419c0 0.547-0.464 1.012-1.038 1.012z" fill="#ffffff" />\n      <path d="M127.647 28.157c-1.941 0-3.499-0.355-4.947-1.585-0.191-0.164-0.301-0.41-0.301-0.684 0-0.465 0.41-0.875 0.902-0.875 0.218 0 0.41 0.055 0.574 0.191 1.039 0.929 2.214 1.257 3.772 1.257 2.187 0 4.237-1.066 4.237-3.964v-1.886c-0.957 1.34-2.57 2.351-4.428 2.351-3.444 0-5.876-2.569-5.876-6.833 0-4.237 2.405-6.861 5.876-6.861 1.777 0 3.362 0.875 4.428 2.324v-1.175c0-0.519 0.464-0.984 1.066-0.984 0.52 0 0.984 0.465 0.984 0.984v11.999c0 4.373-3.061 5.74-6.286 5.74zM131.884 13.233c-0.711-1.148-2.296-2.132-3.936-2.132-2.652 0-4.237 2.105-4.237 5.030 0 2.897 1.585 5.029 4.237 5.029 1.64 0 3.225-1.011 3.936-2.16v-5.767z" fill="#ffffff" />\n      <path d="M155.309 11.237l-3.198 10.332c-0.246 0.82-1.039 1.394-1.886 1.394h-0.055c-0.875 0-1.64-0.574-1.886-1.394l-2.652-8.391-2.651 8.391c-0.246 0.82-1.039 1.394-1.913 1.394h-0.055c-0.848 0-1.613-0.574-1.859-1.394l-3.225-10.332c-0.027-0.137-0.055-0.273-0.055-0.41 0-0.684 0.574-1.394 1.449-1.394 0.629 0 1.23 0.41 1.394 1.011l2.515 8.665 2.788-8.528c0.219-0.683 0.848-1.148 1.64-1.148 0.711 0 1.34 0.465 1.585 1.148l2.788 8.528 2.514-8.665c0.164-0.601 0.766-1.011 1.395-1.011 0.847 0 1.449 0.656 1.449 1.394-0.001 0.137-0.028 0.273-0.083 0.41z" fill="#ffffff" />\n      <path d="M168.073 17.141h-8.692c0.191 1.968 1.695 3.635 4.155 3.635 0.956 0 2.049-0.3 2.952-0.875 0.191-0.109 0.41-0.164 0.601-0.164 0.602 0 1.23 0.492 1.23 1.202 0 1.503-3.389 2.187-5.084 2.187-3.964 0-6.915-2.761-6.915-6.943 0-3.827 2.788-6.916 6.697-6.916 3.089 0 5.33 1.859 6.15 4.701 0.164 0.547 0.328 1.175 0.328 1.749 0 0.765-0.629 1.421-1.421 1.421zM163.017 11.62c-2.406 0-3.526 1.913-3.663 3.499h7.326c-0.055-1.53-1.094-3.499-3.663-3.499z" fill="#ffffff" />\n      <path d="M173.129 22.964c-0.82 0-1.449-0.656-1.449-1.449v-15.689c0-0.765 0.629-1.421 1.503-1.421 0.766 0 1.422 0.656 1.422 1.421v15.689c-0 0.793-0.656 1.449-1.477 1.449z" fill="#ffffff" />\n      <path d="M179.060 22.964c-0.82 0-1.449-0.656-1.449-1.449v-15.689c0-0.765 0.629-1.421 1.503-1.421 0.766 0 1.422 0.656 1.422 1.421v15.689c-0 0.793-0.656 1.449-1.477 1.449z" fill="#ffffff" />\n      <path d="M28.781 14.834c-0.117-1.519-0.498-3.012-1.117-4.385-0.618-1.374-1.471-2.627-2.501-3.694-1.030-1.068-2.235-1.949-3.546-2.598-1.311-0.651-2.727-1.067-4.16-1.23-1.432-0.164-2.878-0.081-4.264 0.24-1.385 0.321-2.702 0.883-3.877 1.644-1.175 0.761-2.208 1.719-3.046 2.814-0.838 1.094-1.481 2.325-1.893 3.618-0.414 1.293-0.596 2.648-0.55 3.983l0.263 0.003c0.076-1.305 0.375-2.585 0.879-3.768 0.503-1.183 1.208-2.268 2.067-3.196 0.858-0.929 1.87-1.701 2.971-2.277 1.102-0.576 2.294-0.955 3.505-1.118 1.209-0.164 2.442-0.116 3.617 0.132 1.176 0.247 2.296 0.697 3.299 1.318 1.004 0.62 1.89 1.411 2.614 2.318 0.724 0.907 1.283 1.93 1.649 3.006 0.367 1.076 0.54 2.204 0.521 3.323-0.020 1.122-0.23 2.224-0.617 3.247-0.386 1.024-0.949 1.969-1.648 2.787-0.699 0.818-1.534 1.507-2.449 2.031-0.915 0.525-1.91 0.883-2.925 1.061-1.014 0.178-2.057 0.177-3.060 0.007-1.001-0.169-1.954-0.509-2.815-0.996-0.295-0.167-0.578-0.352-0.85-0.551l4.686-7.132-0.102-0.083-10.27 10.316 0.106 0.099c0.083 0.076 0.156 0.142 0.236 0.211 0.157 0.137 0.318 0.271 0.48 0.401 0.326 0.261 0.662 0.506 1.008 0.737 0.201 0.134 0.405 0.263 0.613 0.386 0.506 0.302 1.029 0.573 1.566 0.81 1.513 0.669 3.135 1.066 4.76 1.18 0.813 0.057 1.622 0.045 2.428-0.035 0.805-0.080 1.603-0.229 2.379-0.445 1.554-0.431 3.020-1.132 4.315-2.052 1.296-0.918 2.423-2.054 3.321-3.338 0.9-1.283 1.572-2.715 1.978-4.21 0.408-1.495 0.548-3.048 0.429-4.565z" fill="#ffffff" />\n    </svg>\n  </div>\n  <div class="prelogin__content" data-content-region></div>\n</div>\n'},useData:!0})}}]);