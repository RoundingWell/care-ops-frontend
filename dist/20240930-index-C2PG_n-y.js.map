{"version":3,"mappings":"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","names":["check","it","globalThis_1","global","this","fails","exec","require$$0","descriptors","functionBindNative","test","NATIVE_BIND","call","functionCall","$propertyIsEnumerable","getOwnPropertyDescriptor","NASHORN_BUG","objectPropertyIsEnumerable","V","descriptor","createPropertyDescriptor","bitmap","value","FunctionPrototype","uncurryThisWithBind","functionUncurryThis","fn","uncurryThis","toString","stringSlice","classofRaw","require$$1","classof","require$$2","$Object","split","indexedObject","isNullOrUndefined","$TypeError","requireObjectCoercible","IndexedObject","toIndexedObject","documentAll","isCallable","argument","isObject","globalThis","aFunction","getBuiltIn","namespace","method","objectIsPrototypeOf","navigator","userAgent","environmentUserAgent","process","Deno","versions","v8","match","version","environmentV8Version","V8_VERSION","$String","symbolConstructorDetection","symbol","NATIVE_SYMBOL","useSymbolAsUid","isPrototypeOf","USE_SYMBOL_AS_UID","require$$3","isSymbol","$Symbol","tryToString","aCallable","getMethod","P","func","ordinaryToPrimitive","input","pref","val","defineProperty","defineGlobalProperty","key","SHARED","store","sharedStoreModule","shared","toObject","hasOwnProperty","hasOwnProperty_1","id","postfix","uid","hasOwn","require$$4","require$$5","Symbol","WellKnownSymbolsStore","createWellKnownSymbol","wellKnownSymbol","name","TO_PRIMITIVE","toPrimitive","exoticToPrim","result","toPropertyKey","document","EXISTS","documentCreateElement","DESCRIPTORS","createElement","ie8DomDefine","propertyIsEnumerableModule","require$$6","IE8_DOM_DEFINE","require$$7","$getOwnPropertyDescriptor","objectGetOwnPropertyDescriptor","O","v8PrototypeDefineBug","anObject","V8_PROTOTYPE_DEFINE_BUG","$defineProperty","ENUMERABLE","CONFIGURABLE","WRITABLE","objectDefineProperty","Attributes","current","definePropertyModule","createNonEnumerableProperty","object","getDescriptor","PROPER","functionName","functionToString","inspectSource","WeakMap","weakMapBasicDetection","keys","sharedKey","hiddenKeys","NATIVE_WEAK_MAP","OBJECT_ALREADY_INITIALIZED","TypeError","set","get","has","enforce","getterFor","TYPE","state","metadata","STATE","internalState","CONFIGURABLE_FUNCTION_NAME","InternalStateModule","enforceInternalState","getInternalState","replace","join","CONFIGURABLE_LENGTH","TEMPLATE","makeBuiltIn","makeBuiltInModule","options","defineBuiltIn","simple","ceil","floor","mathTrunc","x","n","trunc","toIntegerOrInfinity","number","max","min","toAbsoluteIndex","index","length","integer","toLength","len","lengthOfArrayLike","obj","createMethod","IS_INCLUDES","$this","el","fromIndex","arrayIncludes","indexOf","push","objectKeysInternal","names","i","enumBugKeys","internalObjectKeys","objectGetOwnPropertyNames","objectGetOwnPropertySymbols","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","concat","ownKeys","getOwnPropertySymbols","getOwnPropertyDescriptorModule","copyConstructorProperties","target","source","exceptions","replacement","isForced","feature","detection","data","normalize","POLYFILL","NATIVE","string","isForced_1","_export","TARGET","GLOBAL","STATIC","FORCED","targetProperty","sourceProperty","anInstance","Prototype","functionUncurryThisAccessor","isPossiblePrototype","aPossiblePrototype","uncurryThisAccessor","objectSetPrototypeOf","CORRECT_SETTER","setter","proto","setPrototypeOf","inheritIfRequired","dummy","Wrapper","NewTarget","NewTargetPrototype","TO_STRING_TAG","toStringTagSupport","TO_STRING_TAG_SUPPORT","CORRECT_ARGUMENTS","tryGet","tag","normalizeStringArgument","$default","domExceptionConstants","$Error","TEST","arg","V8_OR_CHAKRA_STACK_ENTRY","IS_V8_OR_CHAKRA_STACK","errorStackClear","stack","dropEntries","$","require$$8","DOMExceptionConstants","require$$9","clearErrorStack","require$$10","require$$11","DOM_EXCEPTION","Error","NativeDOMException","$DOMException","DOMExceptionPrototype","argumentsLength","message","that","error","ERROR_HAS_STACK","DOM_EXCEPTION_HAS_STACK","BUGGY_DESCRIPTOR","FORCED_CONSTRUCTOR","PolyfilledDOMException","PolyfilledDOMExceptionPrototype","constant","constantName","noop","construct","constructorRegExp","INCORRECT_TO_STRING","isConstructorModern","isConstructorLegacy","isConstructor","called","functionUncurryThisClause","bind","functionBindContext","iterators","Iterators","ITERATOR","ArrayPrototype","isArrayIteratorMethod","getIteratorMethod","getIterator","usingIterator","iteratorMethod","iteratorClose","iterator","kind","innerResult","innerError","Result","stopped","ResultPrototype","iterate","iterable","unboundFunction","AS_ENTRIES","IS_RECORD","IS_ITERATOR","INTERRUPTED","iterFn","next","step","stop","condition","callFn","createProperty","validateArgumentsLength","passed","required","regexpFlags","regExpFlags","RegExpPrototype","regexpGetFlags","R","flags","MapPrototype","mapHelpers","SetPrototype","setHelpers","iterateSimple","record","ITERATOR_INSTEAD_OF_RECORD","SetHelpers","Set","forEach","setIterate","interruptible","userAgentStartsWith","environment","ENVIRONMENT","environmentIsNode","IS_NODE","getBuiltInNodeModule","V8","structuredClone","structuredCloneProperTransfer","buffer","clone","PROPER_STRUCTURED_CLONE_TRANSFER","$ArrayBuffer","$MessageChannel","detach","WorkerThreads","channel","$detach","transferable","detachTransferable","errorStackInstallable","require$$12","require$$13","require$$14","require$$15","require$$16","require$$17","require$$18","require$$19","getRegExpFlags","require$$20","MapHelpers","require$$21","require$$22","require$$23","require$$24","ERROR_STACK_INSTALLABLE","require$$25","require$$26","Object","Array","Date","PerformanceMark","DOMException","Map","mapHas","mapGet","mapSet","setAdd","setHas","objectKeys","thisBooleanValue","thisNumberValue","thisStringValue","thisTimeValue","PERFORMANCE_MARK","DATA_CLONE_ERROR","TRANSFERRING","checkBasicSemantic","structuredCloneImplementation","set1","set2","checkErrorsCloning","checkNewErrorsCloningSemantic","nativeStructuredClone","FORCED_REPLACEMENT","structuredCloneFromMark","nativeRestrictedStructuredClone","throwUncloneable","type","throwUnpolyfillable","action","tryNativeRestrictedStructuredClone","createDataTransfer","dataTransfer","cloneBuffer","map","$type","DataView","cloneView","offset","C","structuredCloneInternal","cloned","v","k","tryToTransfer","rawTransfer","transfer","buffers","transferred","canvas","context","detachBuffers","t","e","r","o","u","a","c","f","s","h","l","m","y","VERSION","root","ArrayProto","ObjProto","SymbolProto","slice","supportsArrayBuffer","supportsDataView","nativeIsArray","nativeKeys","nativeCreate","nativeIsView","_isNaN","_isFinite","hasEnumBug","nonEnumerableProps","MAX_ARRAY_INDEX","restArguments","startIndex","rest","args","isNull","isUndefined","isBoolean","isElement","tagTester","isString$1","isNumber$1","isDate","isRegExp","isError","isArrayBuffer","isFunction","nodelist","isFunction$1","hasObjectTag","hasDataViewBug","isIE11","isDataView","alternateIsDataView","isDataView$1","isArray","isArguments","isArguments$1","isFinite","isNaN","isNumber","createSizePropertyCheck","getSizeProperty","collection","sizeProperty","shallowProperty","getByteLength","isBufferLike","typedArrayPattern","isTypedArray","isTypedArray$1","getLength","emulatedSet","hash","collectNonEnumProps","nonEnumIdx","constructor","prop","isEmpty","isString","isMatch","attrs","_keys","_","toBufferView","bufferSource","tagDataView","eq","b","aStack","bStack","deepEq","className","areArrays","byteLength","aCtor","bCtor","isEqual","allKeys","ie11fingerprint","methods","weakMapMethods","forEachName","hasName","commonInit","mapTail","mapMethods","setMethods","isMap","isWeakMap","isSet","isWeakSet","values","pairs","invert","functions","createAssigner","keysFunc","defaults","extend","extendOwn","ctor","baseCreate","prototype","Ctor","create","props","tap","interceptor","toPath","path","deepGet","defaultValue","_has","identity","matcher","property","optimizeCb","argCount","accumulator","baseIteratee","iteratee","cb","mapObject","results","currentKey","propertyOf","times","accum","random","now","createEscaper","escaper","testRegexp","replaceRegexp","escapeMap","escape","unescapeMap","unescape","noMatch","escapes","escapeRegExp","escapeChar","bareIdentifier","template","text","settings","oldSettings","interpolate","evaluate","render","fallback","idCounter","uniqueId","prefix","chain","instance","executeBound","sourceFunc","boundFunc","callingContext","self","partial","boundArgs","placeholder","bound","position","callArgs","isArrayLike","flatten","depth","strict","output","idx","j","bindAll","memoize","hasher","cache","address","delay","wait","defer","throttle","timeout","previous","later","throttled","_now","remaining","debounce","immediate","debounced","_args","wrap","wrapper","negate","predicate","compose","start","after","before","memo","once","findKey","createPredicateIndexFinder","dir","array","findIndex","findLastIndex","sortedIndex","low","high","mid","createIndexFinder","predicateFind","item","lastIndexOf","find","keyFinder","findWhere","each","createReduce","reducer","initial","reduce","reduceRight","filter","list","reject","every","some","contains","guard","invoke","contextPath","pluck","where","lastComputed","computed","reStrSymbol","toArray","sample","last","rand","temp","shuffle","sortBy","left","right","group","behavior","partition","groupBy","indexBy","countBy","pass","size","keyInObj","pick","omit","first","compact","_flatten","difference","without","otherArrays","uniq","isSorted","seen","union","arrays","intersection","argsLength","unzip","zip","range","chunk","count","chainResult","mixin","allExports","auth0Config","kindeConfig","datadogConfig","appConfig","fetchConfig","success","response","config","ConsoleApiName","globalConsole","originalConsoleMethods","PREFIX","display","DOCS_ORIGIN","DOCS_TROUBLESHOOTING","MORE_DETAILS","catchUserErrors","errorMsg","_i","err","performDraw","threshold","round","num","decimals","isPercentage","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","ONE_YEAR","relativeToClocks","relative","getCorrectedTimeStamp","timeStampToClocks","timeStamp","getRelativeTime","relativeTime","correctedOrigin","dateNow","getNavigationStart","addDuration","getTimeStamp","currentDrift","toServerDuration","duration","timeStampNow","relativeNow","clocksNow","clocksOrigin","elapsed","end","timestamp","looksLikeRelativeTime","time","navigationStart","ONE_KIBI_BYTE","ONE_MEBI_BYTE","HAS_MULTI_BYTES_CHARACTERS","computeBytesCount","candidate","concatBuffers","total","buffers_1","includes","search","arrayFrom","arrayLike","findLast","callback","objectValues","objectEntries","startsWith","endsWith","assign","toAssign","shallowClone","objectHasValue","isEmptyObject","mapValues","newObject","_a","getGlobalObject","globalObject","getZoneJsOriginalValue","browserWindow","original","__spreadArray","to","from","pack","ar","onMonitorErrorCollected","debugMode","startMonitorErrorCollection","newOnMonitorErrorCollected","setDebugMode","newDebugMode","monitored","__","originalMethod","decorated","monitor","callMonitored","displayIfDebugEnabled","setTimeout","clearTimeout","timeoutId","setInterval","clearInterval","Observable","onFirstSubscribe","_this","other","observer","mergeObservables","observables","globalObservable","subscriptions","observable","subscription","needLeadingExecution","needTrailingExecution","inWaitPeriod","pendingExecutionWithParameters","pendingTimeoutId","parameters","generateUUID","COMMA_SEPARATED_KEY_VALUE","findCommaSeparatedValue","rawString","findCommaSeparatedValues","safeTruncate","suffix","lastChar","isLastCharSurrogatePair","correctedLength","isIE","detectBrowserCached","isChromium","isSafari","browserCache","detectBrowser","setCookie","expireDelay","date","expires","sameSite","domain","secure","partitioned","getCookie","initCookieParsed","getInitCookie","deleteCookie","areCookiesAuthorized","testCookieName","testCookieValue","isCookieCorrectlySet","getCurrentSiteCache","getCurrentSite","domainLevels","candidateDomain","SESSION_STORE_KEY","SESSION_TIME_OUT_DELAY","SESSION_EXPIRATION_DELAY","SESSION_ENTRY_REGEXP","SESSION_ENTRY_SEPARATOR","EXPIRED","getExpiredSessionState","isSessionInNotStartedState","session","isSessionStarted","isSessionInExpiredState","isActiveSession","sessionState","expandSessionState","toSessionString","toSessionState","sessionString","isValidSessionString","entry","matches","OLD_SESSION_COOKIE_NAME","OLD_RUM_COOKIE_NAME","OLD_LOGS_COOKIE_NAME","RUM_SESSION_KEY","LOGS_SESSION_KEY","tryOldCookiesMigration","cookieStoreStrategy","oldSessionId","oldRumType","oldLogsType","selectCookieStrategy","initConfiguration","cookieOptions","buildCookieOptions","initCookieStrategy","cookieStore","persistSessionCookie","retrieveSessionCookie","expireSessionCookie","LOCAL_STORAGE_TEST_KEY","selectLocalStorageStrategy","testKey","retrievedId","initLocalStorageStrategy","persistInLocalStorage","retrieveSessionFromLocalStorage","expireSessionFromLocalStorage","LOCK_RETRY_DELAY","LOCK_MAX_TRIES","bufferedOperations","ongoingOperations","processSessionStoreOperations","operations","sessionStoreStrategy","numberOfRetries","isLockEnabled","persistSession","expireSession","persistWithLock","currentLock","retrieveStore","lock","currentStore","retryLater","processedSession","sessionStore","currentNumberOfRetries","nextOperations","STORAGE_POLL_DELAY","selectSessionStoreStrategyType","sessionStoreStrategyType","startSessionStore","productKey","computeSessionState","renewObservable","expireObservable","sessionStateUpdateObservable","watchSessionTimeoutId","watchSession","sessionCache","startSession","synchronizedSession","synchronizeSession","expandOrRenewSessionState","hasSessionInCache","renewSessionInCache","throttledExpandOrRenewSession","cancelExpandOrRenewSession","expandSession","isSessionInCacheOutdated","expireSessionInCache","trackingType","isTracked","updateSessionState","partialSessionState","TrackingConsent","createTrackingConsentState","currentConsent","trackingConsent","jsonStringify","replacer","space","restoreObjectPrototypeToJson","detachToJsonMethod","restoreArrayPrototypeToJson","restoreValuePrototypeToJson","restoreValueToJson","objectToJson","normalizeUrl","url","buildUrl","isValidUrl","getPathName","pathname","base","supportedURL","getSupportedUrl","doc","anchorElement","baseElement","originalURL","isURLSupported","INTAKE_SITE_STAGING","INTAKE_SITE_FED_STAGING","INTAKE_SITE_US1","INTAKE_SITE_EU1","INTAKE_SITE_US1_FED","PCI_INTAKE_HOST_US1","createEndpointBuilder","trackType","configurationTags","buildUrlWithParameters","createEndpointUrlWithParametersBuilder","api","payload","buildEndpointParameters","proxy","normalizedProxyUrl_1","host","buildEndpointHost","site","internalAnalyticsSubdomain","domainParts","extension","_b","clientToken","retry","encoding","tags","TAG_SIZE_LIMIT","buildTags","configuration","env","service","datacenter","buildTag","FORBIDDEN_CHARACTERS","rawValue","valueSizeLimit","sanitizedValue","computeTransportConfiguration","endpointBuilders","computeEndpointBuilders","intakeUrlPrefixes","computeIntakeUrlPrefixes","replicaConfiguration","computeReplicaConfiguration","intakeEndpoint","replicaEndpointBuilders","builder","DefaultPrivacyLevel","TraceContextInjection","tagName","isDatadogSite","isSampleRate","sampleRate","validateAndBuildConfiguration","_c","_d","_e","serializeConfiguration","ExperimentalFeature","enabledExperimentalFeatures","initFeatureFlags","enableExperimentalFeatures","addExperimentalFeatures","flag","enabledFeatures","isExperimentalFeatureEnabled","featureName","getExperimentalFeatures","UNKNOWN_FUNCTION","computeStackTrace","ex","stackProperty","tryToGetString","exString","line","stackFrame","parseChromeLine","parseChromeAnonymousLine","parseWinLine","parseGeckoLine","fileUrl","filePosition","CHROME_LINE_RE","CHROME_EVAL_RE","parts","isNative","isEval","submatch","CHROME_ANONYMOUS_FUNCTION_RE","WINJS_LINE_RE","GECKO_LINE_RE","GECKO_EVAL_RE","computeStackTraceFromOnErrorMessage","messageObj","column","tryToParseMessage","ERROR_TYPES_RE","createHandlingStack","internalFramesToSkip","formattedStack","stackTrace","toStackTraceString","formatErrorMessage","frame","instrumentMethod","targetPrototype","onPreCall","computeHandlingStack","instrumentation","postCallCallback","instrumentSetter","originalDescriptor","stoppedInstrumentation","instrumentationWrapper","SANITIZE_DEFAULT_MAX_CHARACTER_COUNT","JSON_PATH_ROOT_ELEMENT","KEY_DECORATION_LENGTH","sanitize","maxCharacterCount","containerQueue","visitedObjectsWithPath","sanitizedData","sanitizeProcessor","serializedSanitizedData","accumulatedCharacterCount","warnOverCharacterLimit","containerToProcess","separatorLength","targetData","parentPath","queue","sourceToSanitize","tryToApplyToJSON","sanitizePrimitivesAndFunctions","sanitizedSource","sanitizeObjects","sourceAsObject","currentPath","changeType","NO_ERROR_STACK_PRESENT_MESSAGE","computeRawError","originalError","handlingStack","startClocks","nonErrorPrefix","handling","isErrorInstance","computeMessage","hasUsableStack","causes","flattenErrorCauses","fingerprint","tryToGetFingerprint","getFileFromStackTraceString","parentSource","currentError","ErrorSource","trackRuntimeError","errorObservable","handleRuntimeError","rawError","stopInstrumentingOnError","instrumentOnError","stopInstrumentingOnUnhandledRejection","instrumentUnhandledRejection","errorObj","reason","makePublicApi","stub","publicApi","defineGlobal","existingGlobalVariable","displayAlreadyInitializedError","sdkName","addEventListener","eventTarget","eventName","listener","addEventListeners","eventNames","capture","passive","listenerWithMonitor","event","add","remove","RawReportType","initReportObservable","apis","createCspViolationReportObservable","reportTypes","createReportObservable","handleReports","reports","report","buildRawReportFromReport","buildRawReportFromCspViolation","body","buildStack","sourceFile","lineNumber","columnNumber","sendToExtension","getType","mergeInto","destination","circularReferenceChecker","createCircularReferenceChecker","merged_1","merged","deepClone","combine","sources","sources_1","set_1","getConnectivity","removeDuplicates","removeItem","BUFFER_LIMIT","createBoundedBuffer","drain","TelemetryType","ALLOWED_FRAME_URLS","TELEMETRY_EXCLUDED_SITES","preStartTelemetryBuffer","onRawTelemetryEventCollected","startTelemetry","telemetryService","contextProvider","alreadySentEvents","telemetryEnabled","telemetryEnabledPerType","runtimeEnvInfo","getRuntimeEnvInfo","rawEvent","stringifiedEvent","event_1","toTelemetryEvent","addTelemetryError","provider","drainPreStartTelemetry","isTelemetryReplicationAllowed","addTelemetryDebug","formatError","addTelemetryConfiguration","addTelemetryUsage","usage","scrubCustomerFrames","allowedFrameUrl","END_OF_TIMES","CLEAR_OLD_VALUES_INTERVAL","createValueHistory","maxEntries","entries","clearOldValuesInterval","clearOldValues","oldTimeThreshold","startTime","endTime","entries_1","closeActive","latestEntry","findAll","reset","VISIBILITY_CHECK_DELAY","SESSION_CONTEXT_TIMEOUT_DELAY","startSessionManager","trackingConsentState","sessionContextHistory","buildSessionContext","trackActivity","trackVisibility","trackResume","expandOrRenewSession","expandSessionWhenVisible","isServerError","status","tryToClone","MAX_ONGOING_BYTES_COUNT","MAX_ONGOING_REQUESTS","MAX_QUEUE_BYTES_COUNT","MAX_BACKOFF_TIME","INITIAL_BACKOFF_TIME","sendWithRetryStrategy","sendStrategy","reportError","send","retryQueuedPayloads","scheduleRetry","onSuccess","onFailure","shouldRetryRequest","previousQueue","newPayloadQueue","newRetryState","newBandwidthMonitor","createHttpRequest","endpointBuilder","bytesLimit","retryState","sendStrategyForRetry","onResponse","fetchKeepAliveStrategy","sendBeaconStrategy","canUseBeacon","beaconUrl","isQueued","reportBeaconError","xhrUrl","sendXHR","hasReportedBeaconError","canUseKeepAlive","isKeepAliveSupported","fetchUrl","request","getEventBridge","eventBridgeGlobal","getEventBridgeGlobal","eventType","viewId","view","bridgeSupports","capability","bridge","canUseEventBridge","currentHost","allowedHost","PageExitReason","createPageExitObservable","stopListeners","stopBeforeUnloadListener","isPageExitReason","createBatch","encoder","flushController","messageBytesLimit","upsertBuffer","flushSubscription","flush","serializedMessage","estimatedMessageBytesCount","realMessageBytesCount","hasMessageFor","removedMessage","messageBytesCount","addOrUpdate","upsertMessages","isPageExit","encoderResult","formatPayloadFromEncoder","pendingMessages","createFlushController","messagesLimit","durationLimit","pageExitObservable","sessionExpireObservable","pageExitSubscription","sessionExpireSubscription","flushObservable","currentBytesCount","currentMessagesCount","flushReason","messagesCount","bytesCount","cancelDurationLimitTimeout","durationLimitTimeoutId","scheduleDurationLimitTimeout","messageBytesCountDiff","startBatchWithReplica","primary","replica","batchFactoryImp","primaryBatch","createBatchFromConfig","replicaBatch","endpoint","replicated","createIdentityEncoder","outputBytesCount","additionalEncodedBytesCount","AbstractLifeCycle","eventCallbacks","createEventRateLimiter","limit","onLimitReached","eventCount","allowNextEvent","runOnReadyState","expectedReadyState","xhrObservable","xhrContexts","initXhrObservable","createXhrObservable","stopInstrumentingStart","openXhr","stopInstrumentingSend","sendXhr","stopInstrumentingAbort","abortXhr","xhr","startContext","hasBeenReported","stopInstrumentingOnReadyStateChange","onEnd","unsubscribeLoadEndListener","completeContext","fetchObservable","initFetchObservable","createFetchObservable","beforeSend","onPostCall","init","methodFromParams","responsePromise","afterSend","reportFetch","partialContext","consoleObservablesByApi","initConsoleObservable","consoleObservables","createConsoleObservable","originalConsoleApi","params","buildConsoleLog","param","formatConsoleParameters","firstErrorParam","createContextManager","customerDataTracker","changeObservable","contextManager","newContext","CONTEXT_STORE_KEY_PREFIX","storageListeners","storeContextManager","customerDataType","storageKey","buildStorageKey","synchronizeWithStorage","dumpToStorage","getFromStorage","rawContext","CUSTOMER_DATA_BYTES_LIMIT","CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT","BYTES_COMPUTATION_THROTTLING_DELAY","createCustomerDataTrackerManager","compressionStatus","customerDataTrackers","alreadyWarned","checkCustomerDataLimit","initialBytesCount","bytesCountLimit","tracker","displayCustomerDataLimitReachedWarning","createCustomerDataTracker","newCompressionStatus","bytesCountCache","computeBytesCountThrottled","cancelComputeBytesCount","resetBytesCount","readBytesFromStream","stream","reader","chunks","readBytesCount","readMore","onDone","bytes","limitExceeded","completeBuffer_1","offset_1","SYNTHETICS_TEST_ID_COOKIE_NAME","SYNTHETICS_RESULT_ID_COOKIE_NAME","SYNTHETICS_INJECTS_RUM_COOKIE_NAME","willSyntheticsInjectRum","getSyntheticsTestId","getSyntheticsResultId","sanitizeUser","newUser","user","checkUser","isValid","isMatchOption","itemType","matchList","useStartsWith","buildCommonContext","globalContextManager","userContextManager","recorderApi","isTracingOption","expectedItem","clearTracingIfNeeded","startTracer","sessionManager","injectHeadersIfTracingAllowed","tracingHeaders","headers_1","header","inject","isTracingSupported","tracingOption","createTraceIdentifier","makeTracingHeaders","getCrypto","traceId","spanId","traceSampled","propagatorTypes","propagatorType","readInt32","radix","str","mod","toDecimalString","toPaddedHexadecimalString","DEFAULT_PROPAGATOR_TYPES","validateAndBuildRumConfiguration","allowedTracingUrls","validateAndBuildTracingOptions","baseConfiguration","tracingOptions","option","getSelectedTracingPropagators","usedTracingPropagators","serializeRumConfiguration","baseSerializedConfiguration","plugin","REMOTE_CONFIGURATION_URL","fetchAndApplyRemoteConfiguration","fetchRemoteConfiguration","remoteInitConfiguration","applyRemoteConfiguration","displayRemoteConfigurationFetchingError","startVitalCollection","lifeCycle","pageStateHistory","vital","addDurationVital","processVital","startVital","createVitalInstance","stopCallback","vitalStart","stopClocks","vitalStop","buildDurationVital","valueComputedBySdk","rawRumEvent","callPluginsMethod","plugins","methodName","parameter","plugins_1","createPreStartStrategy","getCommonContext","doStartRum","ignoreInitIfSyntheticsWillInjectRum","startDeflateWorker","bufferApiCalls","firstStartViewCall","deflateWorker","cachedInitConfiguration","cachedConfiguration","trackingConsentStateSubscription","tryStartRum","initialViewOptions","startRumResult","doInit","eventBridgeAvailable","overrideInitConfigurationForBridge","commonContext","providedError","RUM_STORAGE_KEY","makeRumPublicApi","startRumImpl","customerDataTrackerManager","strategy","rumPublicApi","streamId","createPostStartStrategy","startView","sanitizedOptions","sanitizedProperty","preStartStrategy","createDOMMutationObservable","MutationObserver","getMutationObserverConstructor","patchedInstance","originalInstance","FAKE_INITIAL_DOCUMENT","RESOURCE_TYPES","initiatorType","computeResourceKind","timing","RESOURCE_TYPES_1","isType","areInOrder","numbers","isRequestKind","computePerformanceResourceDuration","responseEnd","computePerformanceResourceDetails","isValidEntry","fetchStart","redirectStart","redirectEnd","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","details","formatTiming","areCommonTimingsInOrder","areRedirectionTimingsInOrder","hasRedirection","origin","computeSize","encodedBodySize","decodedBodySize","transferSize","isAllowedRequestUrl","DATA_URL_REGEX","MAX_ATTRIBUTE_VALUE_CHAR_LENGTH","isLongDataUrl","sanitizeDataUrl","RumPerformanceEntryType","createPerformanceObservable","handlePerformanceEntries","rumPerformanceEntries","filterRumPerformanceEntries","isObserverInitializing","fallbackSupportedEntryTypes","manageResourceTimingBufferFull","resourceTimingBufferFullListener","supportPerformanceObject","supportPerformanceTimingEvent","entryType","isForbiddenResource","startPerformanceCollection","cleanupTasks","performanceEntries_1","handleRumPerformanceEntries","handlePerformanceEntryList_1","mainEntries","experimentalEntries","mainObserver_1","removePerformanceListener","stopFirstInputTiming","retrieveFirstInputTiming","task","startTimeStamp","timingSent","removeEventListeners","evt","sendTimingIfPointerIsNotCancelled","sendTiming","getSyntheticsContext","testId","resultId","limitModification","modifiableFieldPaths","modifier","fieldPath","fieldType","newValue","newType","field","isValidObjectContaining","fields","isValidObject","VIEW_MODIFIABLE_FIELD_PATHS","USER_CUSTOMIZABLE_FIELD_PATHS","ROOT_MODIFIABLE_FIELD_PATHS","modifiableFieldPathsByEvent","startRumAssembly","viewContexts","urlContexts","actionContexts","displayContext","ciVisibilityContext","eventRateLimiters","syntheticsContext","domainContext","savedCommonContext","customerContext","viewContext","urlContext","actionId","rumContext","needToAssembleWithAction","serverRumEvent","shouldSend","rateLimitReached","startInternalContext","applicationId","LifeCycle","VIEW_CONTEXT_TIME_OUT_DELAY","startViewContexts","viewContextHistory","buildViewContext","endClocks","viewUpdate","currentView","nextRequestIndex","startRequestCollection","tracer","trackXhr","trackFetch","getNextRequestIndex","waitForResponseToComplete","clonedResponse","discardNegativeDuration","trackEventCounts","isChildEvent","eventCounts","PAGE_ACTIVITY_VALIDATION_DELAY","PAGE_ACTIVITY_END_DELAY","waitPageActivityEnd","domMutationObservable","pageActivityEndCallback","maxDuration","pageActivityObservable","createPageActivityObservable","doWaitPageActivityEnd","pageActivityEndTimeoutId","hasCompleted","validationTimeoutId","complete","maxDurationTimeoutId","pageActivitySubscription","isBusy","lastChangeTime","firstRequestIndex","pendingRequestsCount","notifyPageActivity","isExcludedUrl","startEvent","stopTrackingWindowOpen","trackWindowOpen","requestUrl","cssEscape","ch","asCodePoint","elementMatches","element","selector","getParentElement","node","getClassList","classes","PLACEHOLDER","WeakSet","initialValues","isTextNode","isCommentNode","isElementNode","isNodeShadowHost","isNodeShadowRoot","shadowRoot","hasChildNodes","forEachChildNodes","child","getParentNode","NodePrivacyLevel","PRIVACY_ATTR_NAME","PRIVACY_ATTR_VALUE_HIDDEN","PRIVACY_CLASS_PREFIX","CENSORED_STRING_MARK","CENSORED_IMG_MARK","FORM_PRIVATE_TAG_NAMES","TEXT_MASKING_CHAR","getNodePrivacyLevel","defaultPrivacyLevel","parentNode","parentNodePrivacyLevel","selfNodePrivacyLevel","getNodeSelfPrivacyLevel","nodePrivacyLevel","reducePrivacyLevel","childPrivacyLevel","inputElement","autocomplete","getPrivacySelector","shouldIgnoreElement","shouldMaskNode","privacyLevel","isFormElement","censorText","getTextContent","textNode","ignoreWhiteSpace","parentTagName","textContent","isScript","relAttribute","getLowerCaseAttribute","nameAttribute","propertyAttribute","DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE","ACTION_NAME_PLACEHOLDER","getActionNameFromElement","enablePrivacyForActionName","userProgrammaticAttribute","defaultActionName","getActionNameFromElementProgrammatically","getActionNameFromElementForStrategies","priorityStrategies","fallbackStrategies","targetElement","programmaticAttribute","elementWithAttribute","supportsElementClosest","truncate","normalizeWhitespace","privacy","supportsLabelProperty","getTextualContent","label","privacyEnabledActionName","labelledByAttribute","getElementById","MAX_PARENTS_TO_CONSIDER","strategies","recursionCounter","strategies_1","name_1","trimmedName","refElement","text_1","removeTextFromElements","query","element_1","textToReplace","supportsInnerTextScriptAndStyleRemoval","supportsLabelPropertyResult","supportsElementClosestResult","STABLE_ATTRIBUTES","GLOBALLY_UNIQUE_SELECTOR_GETTERS","getStableAttributeSelector","getIDSelector","UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS","getClassSelector","getTagNameSelector","getSelectorFromElement","actionNameAttribute","isConnected","targetElementSelector","currentElement","globallyUniqueSelector","findSelector","isSelectorUniqueGlobally","uniqueSelectorAmongChildren","isSelectorUniqueAmongSiblings","combineSelector","getPositionSelector","isGeneratedValue","classList","getAttributeSelector","STABLE_ATTRIBUTES_1","attributeName","sibling","elementIndex","selectorGetters","childSelector","selectorGetters_1","selectorGetter","elementSelector","currentElementSelector","isSiblingMatching","scopedSelector_1","supportScopeSelector","parent","supportScopeSelectorCache","MAX_DURATION_BETWEEN_CLICKS","MAX_DISTANCE_BETWEEN_CLICKS","createClickChain","firstClick","onFinalize","bufferedClicks","maxDurationBetweenClicksTimeoutId","appendClick","click","tryFinalize","dontAcceptMoreClick","areEventsSimilar","second","mouseEventDistance","listenActionEvents","onPointerDown","onPointerUp","selectionEmptyAtPointerDown","userActivity","clickContext","listeners","isValidPointerEvent","isSelectionEmpty","localUserActivity_1","selection","MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE","computeFrustration","clicks","rageClick","isRage","isDead","hasSelectionChanged","DEAD_CLICK_EXCLUDE_SELECTOR","CLICK_ACTION_MAX_DURATION","ACTION_CONTEXT_TIME_OUT_DELAY","trackClickActions","history","stopObservable","currentClickChain","stopClickChain","stopActionEventsListener","pointerDownEvent","processPointerDown","getUserActivity","clickActionBase","hadActivityOnPointerDown","startClickAction","appendClickToClickChain","rageClick_1","finalizeClicks","computeClickActionBase","pageActivityEndEvent","newClick","stopWaitPageActivityEnd","viewEndedSubscription","stopSubscription","rect","historyEntry","eventCountsSubscription","activityEndTime","frustrationTypes","newActivityEndTime","frustrationType","domEvents","resourceCount","errorCount","longTaskCount","clickAction","startActionCollection","processAction","autoActionProperties","isAutoAction","actionEvent","trackConsoleError","consoleError","trackReportError","startErrorCollection","featureFlagContexts","doStartErrorCollection","processError","featureFlagContext","startLongTaskCollection","alreadyMatchedEntries","matchRequestTiming","sameNameEntries","candidates","isBetween","errorMargin","INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD","getDocumentTraceId","getDocumentTraceDataFromMeta","getDocumentTraceDataFromComment","traceIdMeta","traceTimeMeta","createDocumentTraceData","comment","findTraceComment","rawTraceTime","traceTime","getTraceCommentFromNode","computeRelativePerformanceTiming","numberKey","timingElement","retrieveInitialDocumentResourceTiming","forcedAttributes","navigationEntry","relativePerformanceTiming","startResourceCollection","retrieveInitialDocumentResourceTimingImpl","processRequest","performanceResourceSubscription","processResourceEntry","matchingTiming","tracingInfo","computeRequestTracingInfo","correspondingTimingOverrides","computePerformanceEntryMetrics","computeRequestDuration","resourceEvent","computeEntryTracingInfo","entryMetrics","discardZeroStatus","renderBlockingStatus","hasBeenTraced","getRulePsr","statusCode","trackViewEventCounts","onChange","FCP_MAXIMUM_DELAY","trackFirstContentfulPaint","firstHidden","unsubscribeLifeCycle","fcpEntry","trackFirstInput","firstInputEntry","firstInputDelay","firstInputTargetSelector","trackNavigationTimings","processEntry","isIncompleteNavigation","processNavigationEntry","retrieveNavigationTiming","LCP_MAXIMUM_DELAY","trackLargestContentfulPaint","firstInteractionTimestamp","stopEventListener","biggestLcpSize","lcpEntry","lcpTargetSelector","trackFirstHidden","trackInitialViewMetrics","setLoadEvent","scheduleViewUpdate","initialViewMetrics","stopNavigationTracking","navigationTimings","stopFCPTracking","firstContentfulPaint","stopLCPTracking","largestContentfulPaint","stopFIDTracking","firstInput","trackCumulativeLayoutShift","viewStart","isLayoutShiftSupported","maxClsValue","maxClsTarget","maxClsStartTime","window","slidingSessionWindow","cumulatedValue","isMaxValue","getTargetFromSource","MAX_WINDOW_DURATION","MAX_UPDATE_GAP","maxValue","shouldCreateNewWindow","interactionCountEstimate","minKnownInteractionId","maxKnownInteractionId","initInteractionCountPolyfill","getInteractionCount","MAX_INTERACTION_ENTRIES","MAX_INP_VALUE","trackInteractionToNextPaint","viewLoadingType","isInteractionToNextPaintSupported","trackViewInteractionCount","getViewInteractionCount","stopViewInteractionCount","viewEnd","longestInteractions","trackLongestInteractions","interactionToNextPaint","interactionToNextPaintTargetSelector","interactionToNextPaintStartTime","newInteraction","viewEndTime","sortAndTrimLongestInteractions","interactionIndex","interaction","minLongestInteraction","previousInteractionCount","computeViewInteractionCount","trackLoadingTime","loadType","isWaitingForLoadEvent","isWaitingForActivityLoadingTime","loadingTimeCandidates","invokeCallbackIfAllCandidatesAreReceived","loadEvent","getScrollX","scrollX","visual","getScrollY","scrollY","viewportObservable","initViewportObservable","createViewportObservable","updateDimension","getViewportDimension","THROTTLE_SCROLL_DURATION","trackScrollMetrics","scrollValues","createScrollValuesObservable","maxScrollDepth","maxScrollHeight","maxScrollHeightTime","scrollDepth","scrollTop","scrollHeight","shouldUpdate","computeScrollValues","height","throttleDuration","notify","throttledNotify_1","observerTarget_1","resizeObserver_1","eventListener_1","trackCommonViewMetrics","loadingType","commonViewMetrics","newLoadingTime","stopLoadingTimeTracking","stopScrollMetricsTracking","newScrollMetrics","stopCLSTracking","cumulativeLayoutShift","stopINPTracking","getInteractionToNextPaint","setViewEnd","THROTTLE_VIEW_UPDATE_PERIOD","SESSION_KEEP_ALIVE_INTERVAL","KEEP_TRACKING_AFTER_VIEW_DELAY","trackViews","location","locationChangeObservable","areViewsTrackedAutomatically","activeViews","startNewView","startViewLifeCycle","locationChangeSubscription","renewViewOnLocationChange","viewOptions","newlyCreatedView","newView","pageExitEvent","oldLocation","newLocation","areDifferentLocation","initialLocation","customTimings","documentVersion","sessionIsActive","viewCreatedEvent","triggerViewUpdate","cancelScheduleViewUpdate","stopCommonViewMetricsTracking","getCommonViewMetrics","stopInitialViewMetricsTracking","stopEventCountsTracking","keepAliveIntervalId","currentEnd","sanitizeTiming","updatedName","sanitized","currentLocation","otherLocation","isHashAnAnchor","getPathFromHash","correspondingId","startViewCollection","processViewUpdate","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","replayStats","pageStates","viewEvent","startRumSessionManager","rawTrackingType","previousState","newState","sessionEntity","isTypeTracked","startRumSessionManagerStub","hasValidRumSession","rumSessionType","startRumBatch","telemetryEventObservable","createEncoder","batch","startRumEventBridge","URL_CONTEXT_TIME_OUT_DELAY","startUrlContexts","urlContextHistory","previousViewUrl","viewUrl","buildUrlContext","changeTime","referrer","createLocationChangeObservable","stopHistoryTracking","trackHistory","onLocationChange","stopHashTracking","trackHash","onHistoryChange","stopInstrumentingPushState","stopInstrumentingReplaceState","removeListener","onHashChange","FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY","startFeatureFlagContexts","currentContext","MEASURES_PERIOD_DURATION","currentPeriodMeasures","currentBatchMeasures","batchHasRumEvent","startCustomerDataTelemetry","telemetry","batchFlushObservable","customerDataTelemetryEnabled","initCurrentPeriodMeasures","initCurrentBatchMeasures","updateMeasure","mergeMeasure","sendCurrentPeriodMeasures","createMeasure","measure","MAX_PAGE_STATE_ENTRIES","MAX_PAGE_STATE_ENTRIES_SELECTABLE","PAGE_STATE_CONTEXT_TIME_OUT_DELAY","startPageStateHistory","maxPageStateEntriesSelectable","pageStateEntryHistory","currentPageState","addPageState","getPageState","stopEventListeners","computePageState","nextPageState","eventStartTime","pageStateEntries","pageStateServerEntries","pageState","relativeStartTime","startDisplayContext","viewport","unsubscribeViewport","viewportDimension","createCookieObservable","cookieName","detectCookieChangeStrategy","listenToCookieStoreChange","watchCookieFallback","changeEvent","WATCH_COOKIE_INTERVAL_DELAY","previousCookieValue","watchCookieIntervalId","cookieValue","CI_VISIBILITY_TEST_ID_COOKIE_NAME","startCiVisibilityContext","cookieObservable","testExecutionId","cookieObservableSubscription","startRum","startRumTelemetry","batch_1","startRumEventCollection","addAction","stopRumEventCollection","addTiming","updateViewName","stopViewCollection","stopResourceCollection","addError","stopPerformanceCollection","vitalCollection","internalContext","bridge_1","getSessionReplayUrl","errorType","sessionId","getDatadogSiteUrl","rumConfiguration","subdomain","getSiteDefaultSubdomain","MAX_STATS_HISTORY","statsPerView","getSegmentsCount","getOrCreateReplayStats","addSegment","addRecord","addWroteData","additionalBytesCount","getReplayStats","deleteOldestStats","isFirst_1","_value","serializedNodeIds","hasSerializedNode","nodeAndAncestorsHaveSerializedNode","getSerializedNodeId","setSerializedNodeId","serializeNodeId","getElementInputValue","URL_IN_CSS_REF","ABSOLUTE_URL","DATA_URI","switchToAbsoluteUrl","cssText","cssHref","matchingSubstring","singleQuote","urlWrappedInSingleQuotes","doubleQuote","urlWrappedInDoubleQuotes","urlNotWrappedInQuotes","quote","makeUrlAbsolute","baseUrl","TAG_NAME_REGEX","getValidTagName","processedTagName","censoredImageForSize","width","RecordType","NodeType","IncrementalSource","MouseInteractionType","MediaInteractionType","serializeStyleSheets","cssStyleSheets","cssStyleSheet","rules","cssRules","cssRule","styleSheet","serializeAttribute","attributeValue","image","serializeAttributes","safeAttrs","attribute","formValue","optionElement","stylesheet","getCssRulesString","mediaElement","scrollLeft","serializationContext","styleSheetCssText","getCssRuleStringForSafari","getCssRuleString","rule","isCSSStyleRule","escapeColon","isCSSImportRule","serializeNodeWithId","serializedNode","serializeNode","generateNextId","serializedNodeWithId","_nextId","serializeChildNodes","childNode","serializedChildNode","serializeDocumentNode","serializeDocumentFragmentNode","serializeDocumentTypeNode","serializeElementNode","serializeTextNode","serializeCDataNode","isShadowRoot","documentType","isSVG","isSVGElement","attributes","childNodes","childNodesSerializationOptions","serializeDocument","isTouchEvent","getEventTarget","TOLERANCE","isVisualViewportFactoredIn","visualViewport","convertMouseEventToLayoutCoordinates","clientX","clientY","normalized","getVisualViewport","assembleIncrementalSnapshot","MOUSE_MOVE_OBSERVER_THRESHOLD","trackMove","moveCb","coordinates","tryToComputeCoordinates","updatePosition","cancelThrottle","visualViewportX","visualViewportY","eventTypeToMouseInteraction","trackMouseInteraction","mouseInteractionCb","recordIds","handler","SCROLL_OBSERVER_THRESHOLD","trackScroll","scrollCb","elementsScrollPositions","scrollPositions","VISUAL_VIEWPORT_OBSERVER_THRESHOLD","trackViewportResize","viewportResizeCb","viewportResizeSubscription","trackVisualViewportResize","visualViewportResizeCb","trackMediaInteraction","mediaInteractionCb","trackStyleSheet","styleSheetCb","checkStyleSheetAndCallback","instrumentationStoppers","instrumentGroupingCSSRuleClass","cls","getPathToNestedCSSRule","stopper","currentRule","rules_1","index_1","trackFocus","focusCb","trackFrustration","frustrationCb","frustrationSubscription","trackViewEnd","viewEndCb","viewEndSubscription","trackInput","inputCb","lastInputStateMap","onElementChange","stopPropertySetterInstrumentation","instrumentationStoppers_1","inputState","cbWithDedup","lastInputState","MUTATION_PROCESS_MAX_DELAY","MUTATION_PROCESS_MIN_DELAY","createMutationBatch","processMutationBatch","cancelScheduledFlush","pendingMutations","throttledFlush","mutations","requestIdleCallback","opts","id_1","trackMutation","mutationCallback","shadowRootsController","mutationBatch","processMutations","nodePrivacyLevelCache","mutation","removedNode","traverseRemovedShadowDom","filteredMutations","processChildListMutations","adds","removes","hasBeenSerialized","texts","processCharacterDataMutations","processAttributesMutations","addedAndMovedNodes","removedNodes","_loop_1","mutations_1","sortedAddedAndMovedNodes","sortAddedAndMovedNodes","addedNodeMutations","sortedAddedAndMovedNodes_1","getNextSibling","removedNodeMutations","nextSibling","textMutations","handledNodes","filteredMutations_1","attributeMutations","handledElements","handledAttributes","emittedMutations","filteredMutations_2","uncensoredValue","transformedValue","inputValue","emittedMutation","nodes","shadowDomRemovedCallback","createElementsScrollPositions","scrollPositionsByElement","initShadowRootsController","controllerByShadowRoot","mutationTracker","inputTracker","scrollTracker","startFullSnapshots","flushMutations","fullSnapshotCallback","takeFullSnapshot","records","unsubscribe","initRecordIds","nextId","emit","emitAndComputeStats","replayStats.addRecord","stopFullSnapshots","trackers","viewEndRecord","buildReplayPayload","rawSegmentBytesCount","formData","metadataAndSegmentSizes","serializedMetadataAndSegmentSizes","createSegment","creationReason","encodedBytesCount","replayStats.getSegmentsCount","replayStats.addSegment","replayStats.addWroteData","SEGMENT_DURATION_LIMIT","SEGMENT_BYTES_LIMIT","startSegmentCollection","httpRequest","doStartSegmentCollection","computeSegmentContext","getSegmentContext","unsubscribeViewCreated","flushSegment","unsubscribePageExited","startRecordBridge","startRecording","replayRequest","segmentCollection","stopRecording","isBrowserSupported","getSessionReplayLink","isRecordingStarted","getErrorType","createDeflateEncoder","worker","rawBytesCount","compressedData","compressedDataTrailer","nextWriteActionId","pendingWriteActions","removeMessageListener","workerResponse","nextPendingAction","consumeResult","sendResetIfNeeded","pendingWriteAction","pendingData","INITIALIZATION_TIME_OUT_DELAY","createDeflateWorker","onInitializationFailure","createDeflateWorkerImpl","doStartDeflateWorker","getDeflateWorkerStatus","removeErrorListener_1","onError","removeMessageListener_1","onInitialized","onTimeout","stop_1","isMessageCspRelated","baseMessage","makeRecorderApi","startRecordingImpl","startStrategy","stopStrategy","getSessionReplayLinkStrategy","cachedDeflateEncoder","getOrCreateDeflateEncoder","deflateEncoder","getReplayStatsImpl","datadogRum","isAuthorized","handlerType","logger","loggerHandler","sanitizedHandlerType","STATUS_PRIORITIES","StatusType","__decorate","decorators","desc","d","HandlerType","STATUSES","Logger","handleLogStrategy","level","loggerContext","messageContext","errorContext","sanitizedMessageContext","createLoggerMethod","DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT","validateAndBuildLogsConfiguration","forwardConsoleLogs","validateAndBuildForwardOption","forwardReports","allowedValues","serializeLogsConfiguration","baseSerializedInitConfiguration","doStartLogs","tryStartLogs","startLogsResult","statusType","LOGS_STORAGE_KEY","makeLogsPublicApi","startLogsImpl","customLoggers","mainLogger","conf","startLogsSessionManager","startLogsSessionManagerStub","computeTrackingType","rawSessionType","hasValidLoggerSession","logsSentBeforeRumInjectionTelemetryAdded","getRUMInternalContext","getInternalContextFromRumGlobal","rumGlobal","startLogsAssembly","statusWithCustom","logRateLimiters","rawLogsEvent","log","LogStatusForApi","startConsoleCollection","consoleSubscription","collectedData","LogStatusForReport","startReportCollection","reportSubscription","startNetworkErrorCollection","xhrSubscription","handleResponse","fetchSubscription","isRejected","computeXhrResponseData","onResponseDataAvailable","computeFetchResponseText","computeFetchErrorText","responseData","format","truncateResponseText","truncateResponseStream","responseText","startRuntimeErrorCollection","rawErrorObservable","stopRuntimeErrorTracking","rawErrorSubscription","startLoggerCollection","handleLog","logsMessage","savedDate","displayInConsole","rawLogEventData","loggerToConsoleApiName","startLogsBatch","serverLogsEvent","startLogsBridge","trackedSession","startReportError","startLogsTelemetry","telemetrySubscription_1","telemetryBatch_1","telemetrySubscription_2","startLogs","stopLogsTelemetry","stopLogsBatch_1","datadogLogs","ddInitialized","getEnv","isPdfPrinter","urlPaths","initLogs","isForm","initRum","setUser","logResponse","contentType","responseHeaders","responseBody","initDataDog","getRootRoute","Workbox","startOutreach","__vitePreload","startOutreachApp","startForm","startFormApp","startApp","startFormService","startFormServiceApp","startAuth","auth","startApps","isOutreach","rootRoute"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469],"sources":["../node_modules/core-js/internals/global-this.js","../node_modules/core-js/internals/fails.js","../node_modules/core-js/internals/descriptors.js","../node_modules/core-js/internals/function-bind-native.js","../node_modules/core-js/internals/function-call.js","../node_modules/core-js/internals/object-property-is-enumerable.js","../node_modules/core-js/internals/create-property-descriptor.js","../node_modules/core-js/internals/function-uncurry-this.js","../node_modules/core-js/internals/classof-raw.js","../node_modules/core-js/internals/indexed-object.js","../node_modules/core-js/internals/is-null-or-undefined.js","../node_modules/core-js/internals/require-object-coercible.js","../node_modules/core-js/internals/to-indexed-object.js","../node_modules/core-js/internals/is-callable.js","../node_modules/core-js/internals/is-object.js","../node_modules/core-js/internals/get-built-in.js","../node_modules/core-js/internals/object-is-prototype-of.js","../node_modules/core-js/internals/environment-user-agent.js","../node_modules/core-js/internals/environment-v8-version.js","../node_modules/core-js/internals/symbol-constructor-detection.js","../node_modules/core-js/internals/use-symbol-as-uid.js","../node_modules/core-js/internals/is-symbol.js","../node_modules/core-js/internals/try-to-string.js","../node_modules/core-js/internals/a-callable.js","../node_modules/core-js/internals/get-method.js","../node_modules/core-js/internals/ordinary-to-primitive.js","../node_modules/core-js/internals/define-global-property.js","../node_modules/core-js/internals/shared-store.js","../node_modules/core-js/internals/shared.js","../node_modules/core-js/internals/to-object.js","../node_modules/core-js/internals/has-own-property.js","../node_modules/core-js/internals/uid.js","../node_modules/core-js/internals/well-known-symbol.js","../node_modules/core-js/internals/to-primitive.js","../node_modules/core-js/internals/to-property-key.js","../node_modules/core-js/internals/document-create-element.js","../node_modules/core-js/internals/ie8-dom-define.js","../node_modules/core-js/internals/object-get-own-property-descriptor.js","../node_modules/core-js/internals/v8-prototype-define-bug.js","../node_modules/core-js/internals/an-object.js","../node_modules/core-js/internals/object-define-property.js","../node_modules/core-js/internals/create-non-enumerable-property.js","../node_modules/core-js/internals/function-name.js","../node_modules/core-js/internals/inspect-source.js","../node_modules/core-js/internals/weak-map-basic-detection.js","../node_modules/core-js/internals/shared-key.js","../node_modules/core-js/internals/hidden-keys.js","../node_modules/core-js/internals/internal-state.js","../node_modules/core-js/internals/make-built-in.js","../node_modules/core-js/internals/define-built-in.js","../node_modules/core-js/internals/math-trunc.js","../node_modules/core-js/internals/to-integer-or-infinity.js","../node_modules/core-js/internals/to-absolute-index.js","../node_modules/core-js/internals/to-length.js","../node_modules/core-js/internals/length-of-array-like.js","../node_modules/core-js/internals/array-includes.js","../node_modules/core-js/internals/object-keys-internal.js","../node_modules/core-js/internals/enum-bug-keys.js","../node_modules/core-js/internals/object-get-own-property-names.js","../node_modules/core-js/internals/object-get-own-property-symbols.js","../node_modules/core-js/internals/own-keys.js","../node_modules/core-js/internals/copy-constructor-properties.js","../node_modules/core-js/internals/is-forced.js","../node_modules/core-js/internals/export.js","../node_modules/core-js/internals/an-instance.js","../node_modules/core-js/internals/function-uncurry-this-accessor.js","../node_modules/core-js/internals/is-possible-prototype.js","../node_modules/core-js/internals/a-possible-prototype.js","../node_modules/core-js/internals/object-set-prototype-of.js","../node_modules/core-js/internals/inherit-if-required.js","../node_modules/core-js/internals/to-string-tag-support.js","../node_modules/core-js/internals/classof.js","../node_modules/core-js/internals/to-string.js","../node_modules/core-js/internals/normalize-string-argument.js","../node_modules/core-js/internals/dom-exception-constants.js","../node_modules/core-js/internals/error-stack-clear.js","../node_modules/core-js/modules/web.dom-exception.stack.js","../node_modules/core-js/internals/is-constructor.js","../node_modules/core-js/internals/function-uncurry-this-clause.js","../node_modules/core-js/internals/function-bind-context.js","../node_modules/core-js/internals/iterators.js","../node_modules/core-js/internals/is-array-iterator-method.js","../node_modules/core-js/internals/get-iterator-method.js","../node_modules/core-js/internals/get-iterator.js","../node_modules/core-js/internals/iterator-close.js","../node_modules/core-js/internals/iterate.js","../node_modules/core-js/internals/create-property.js","../node_modules/core-js/internals/validate-arguments-length.js","../node_modules/core-js/internals/regexp-flags.js","../node_modules/core-js/internals/regexp-get-flags.js","../node_modules/core-js/internals/map-helpers.js","../node_modules/core-js/internals/set-helpers.js","../node_modules/core-js/internals/iterate-simple.js","../node_modules/core-js/internals/set-iterate.js","../node_modules/core-js/internals/environment.js","../node_modules/core-js/internals/environment-is-node.js","../node_modules/core-js/internals/get-built-in-node-module.js","../node_modules/core-js/internals/structured-clone-proper-transfer.js","../node_modules/core-js/internals/detach-transferable.js","../node_modules/core-js/internals/error-stack-installable.js","../node_modules/core-js/modules/web.structured-clone.js","../node_modules/workbox-window/build/workbox-window.prod.es5.mjs","../node_modules/underscore/modules/_setup.js","../node_modules/underscore/modules/restArguments.js","../node_modules/underscore/modules/isObject.js","../node_modules/underscore/modules/isNull.js","../node_modules/underscore/modules/isUndefined.js","../node_modules/underscore/modules/isBoolean.js","../node_modules/underscore/modules/isElement.js","../node_modules/underscore/modules/_tagTester.js","../node_modules/underscore/modules/isString.js","../node_modules/underscore/modules/isNumber.js","../node_modules/underscore/modules/isDate.js","../node_modules/underscore/modules/isRegExp.js","../node_modules/underscore/modules/isError.js","../node_modules/underscore/modules/isSymbol.js","../node_modules/underscore/modules/isArrayBuffer.js","../node_modules/underscore/modules/isFunction.js","../node_modules/underscore/modules/_hasObjectTag.js","../node_modules/underscore/modules/_stringTagBug.js","../node_modules/underscore/modules/isDataView.js","../node_modules/underscore/modules/isArray.js","../node_modules/underscore/modules/_has.js","../node_modules/underscore/modules/isArguments.js","../node_modules/underscore/modules/isFinite.js","../node_modules/underscore/modules/isNaN.js","../node_modules/underscore/modules/constant.js","../node_modules/underscore/modules/_createSizePropertyCheck.js","../node_modules/underscore/modules/_shallowProperty.js","../node_modules/underscore/modules/_getByteLength.js","../node_modules/underscore/modules/_isBufferLike.js","../node_modules/underscore/modules/isTypedArray.js","../node_modules/underscore/modules/_getLength.js","../node_modules/underscore/modules/_collectNonEnumProps.js","../node_modules/underscore/modules/keys.js","../node_modules/underscore/modules/isEmpty.js","../node_modules/underscore/modules/isMatch.js","../node_modules/underscore/modules/underscore.js","../node_modules/underscore/modules/_toBufferView.js","../node_modules/underscore/modules/isEqual.js","../node_modules/underscore/modules/allKeys.js","../node_modules/underscore/modules/_methodFingerprint.js","../node_modules/underscore/modules/isMap.js","../node_modules/underscore/modules/isWeakMap.js","../node_modules/underscore/modules/isSet.js","../node_modules/underscore/modules/isWeakSet.js","../node_modules/underscore/modules/values.js","../node_modules/underscore/modules/pairs.js","../node_modules/underscore/modules/invert.js","../node_modules/underscore/modules/functions.js","../node_modules/underscore/modules/_createAssigner.js","../node_modules/underscore/modules/extend.js","../node_modules/underscore/modules/extendOwn.js","../node_modules/underscore/modules/defaults.js","../node_modules/underscore/modules/_baseCreate.js","../node_modules/underscore/modules/create.js","../node_modules/underscore/modules/clone.js","../node_modules/underscore/modules/tap.js","../node_modules/underscore/modules/toPath.js","../node_modules/underscore/modules/_toPath.js","../node_modules/underscore/modules/_deepGet.js","../node_modules/underscore/modules/get.js","../node_modules/underscore/modules/has.js","../node_modules/underscore/modules/identity.js","../node_modules/underscore/modules/matcher.js","../node_modules/underscore/modules/property.js","../node_modules/underscore/modules/_optimizeCb.js","../node_modules/underscore/modules/_baseIteratee.js","../node_modules/underscore/modules/iteratee.js","../node_modules/underscore/modules/_cb.js","../node_modules/underscore/modules/mapObject.js","../node_modules/underscore/modules/noop.js","../node_modules/underscore/modules/propertyOf.js","../node_modules/underscore/modules/times.js","../node_modules/underscore/modules/random.js","../node_modules/underscore/modules/now.js","../node_modules/underscore/modules/_createEscaper.js","../node_modules/underscore/modules/_escapeMap.js","../node_modules/underscore/modules/escape.js","../node_modules/underscore/modules/_unescapeMap.js","../node_modules/underscore/modules/unescape.js","../node_modules/underscore/modules/templateSettings.js","../node_modules/underscore/modules/template.js","../node_modules/underscore/modules/result.js","../node_modules/underscore/modules/uniqueId.js","../node_modules/underscore/modules/chain.js","../node_modules/underscore/modules/_executeBound.js","../node_modules/underscore/modules/partial.js","../node_modules/underscore/modules/bind.js","../node_modules/underscore/modules/_isArrayLike.js","../node_modules/underscore/modules/_flatten.js","../node_modules/underscore/modules/bindAll.js","../node_modules/underscore/modules/memoize.js","../node_modules/underscore/modules/delay.js","../node_modules/underscore/modules/defer.js","../node_modules/underscore/modules/throttle.js","../node_modules/underscore/modules/debounce.js","../node_modules/underscore/modules/wrap.js","../node_modules/underscore/modules/negate.js","../node_modules/underscore/modules/compose.js","../node_modules/underscore/modules/after.js","../node_modules/underscore/modules/before.js","../node_modules/underscore/modules/once.js","../node_modules/underscore/modules/findKey.js","../node_modules/underscore/modules/_createPredicateIndexFinder.js","../node_modules/underscore/modules/findIndex.js","../node_modules/underscore/modules/findLastIndex.js","../node_modules/underscore/modules/sortedIndex.js","../node_modules/underscore/modules/_createIndexFinder.js","../node_modules/underscore/modules/indexOf.js","../node_modules/underscore/modules/lastIndexOf.js","../node_modules/underscore/modules/find.js","../node_modules/underscore/modules/findWhere.js","../node_modules/underscore/modules/each.js","../node_modules/underscore/modules/map.js","../node_modules/underscore/modules/_createReduce.js","../node_modules/underscore/modules/reduce.js","../node_modules/underscore/modules/reduceRight.js","../node_modules/underscore/modules/filter.js","../node_modules/underscore/modules/reject.js","../node_modules/underscore/modules/every.js","../node_modules/underscore/modules/some.js","../node_modules/underscore/modules/contains.js","../node_modules/underscore/modules/invoke.js","../node_modules/underscore/modules/pluck.js","../node_modules/underscore/modules/where.js","../node_modules/underscore/modules/max.js","../node_modules/underscore/modules/min.js","../node_modules/underscore/modules/toArray.js","../node_modules/underscore/modules/sample.js","../node_modules/underscore/modules/shuffle.js","../node_modules/underscore/modules/sortBy.js","../node_modules/underscore/modules/_group.js","../node_modules/underscore/modules/groupBy.js","../node_modules/underscore/modules/indexBy.js","../node_modules/underscore/modules/countBy.js","../node_modules/underscore/modules/partition.js","../node_modules/underscore/modules/size.js","../node_modules/underscore/modules/_keyInObj.js","../node_modules/underscore/modules/pick.js","../node_modules/underscore/modules/omit.js","../node_modules/underscore/modules/initial.js","../node_modules/underscore/modules/first.js","../node_modules/underscore/modules/rest.js","../node_modules/underscore/modules/last.js","../node_modules/underscore/modules/compact.js","../node_modules/underscore/modules/flatten.js","../node_modules/underscore/modules/difference.js","../node_modules/underscore/modules/without.js","../node_modules/underscore/modules/uniq.js","../node_modules/underscore/modules/union.js","../node_modules/underscore/modules/intersection.js","../node_modules/underscore/modules/unzip.js","../node_modules/underscore/modules/zip.js","../node_modules/underscore/modules/object.js","../node_modules/underscore/modules/range.js","../node_modules/underscore/modules/chunk.js","../node_modules/underscore/modules/_chainResult.js","../node_modules/underscore/modules/mixin.js","../node_modules/underscore/modules/underscore-array-methods.js","../node_modules/underscore/modules/index-default.js","../src/js/config.js","../node_modules/@datadog/browser-core/esm/tools/display.js","../node_modules/@datadog/browser-core/esm/tools/catchUserErrors.js","../node_modules/@datadog/browser-core/esm/tools/utils/numberUtils.js","../node_modules/@datadog/browser-core/esm/tools/utils/timeUtils.js","../node_modules/@datadog/browser-core/esm/tools/utils/byteUtils.js","../node_modules/@datadog/browser-core/esm/tools/utils/polyfills.js","../node_modules/@datadog/browser-core/esm/tools/utils/objectUtils.js","../node_modules/@datadog/browser-core/esm/tools/getGlobalObject.js","../node_modules/@datadog/browser-core/esm/tools/getZoneJsOriginalValue.js","../node_modules/@datadog/browser-core/esm/tools/monitor.js","../node_modules/@datadog/browser-core/esm/tools/timer.js","../node_modules/@datadog/browser-core/esm/tools/observable.js","../node_modules/@datadog/browser-core/esm/tools/utils/functionUtils.js","../node_modules/@datadog/browser-core/esm/tools/utils/stringUtils.js","../node_modules/@datadog/browser-core/esm/tools/utils/browserDetection.js","../node_modules/@datadog/browser-core/esm/browser/cookie.js","../node_modules/@datadog/browser-core/esm/domain/session/storeStrategies/sessionStoreStrategy.js","../node_modules/@datadog/browser-core/esm/domain/session/sessionConstants.js","../node_modules/@datadog/browser-core/esm/domain/session/sessionState.js","../node_modules/@datadog/browser-core/esm/domain/session/oldCookiesMigration.js","../node_modules/@datadog/browser-core/esm/domain/session/storeStrategies/sessionInCookie.js","../node_modules/@datadog/browser-core/esm/domain/session/storeStrategies/sessionInLocalStorage.js","../node_modules/@datadog/browser-core/esm/domain/session/sessionStoreOperations.js","../node_modules/@datadog/browser-core/esm/domain/session/sessionStore.js","../node_modules/@datadog/browser-core/esm/domain/trackingConsent.js","../node_modules/@datadog/browser-core/esm/tools/serialisation/jsonStringify.js","../node_modules/@datadog/browser-core/esm/tools/utils/urlPolyfill.js","../node_modules/@datadog/browser-core/esm/domain/configuration/intakeSites.js","../node_modules/@datadog/browser-core/esm/domain/configuration/endpointBuilder.js","../node_modules/@datadog/browser-core/esm/domain/configuration/tags.js","../node_modules/@datadog/browser-core/esm/domain/configuration/transportConfiguration.js","../node_modules/@datadog/browser-core/esm/domain/configuration/configuration.js","../node_modules/@datadog/browser-core/esm/tools/experimentalFeatures.js","../node_modules/@datadog/browser-core/esm/tools/stackTrace/computeStackTrace.js","../node_modules/@datadog/browser-core/esm/tools/stackTrace/handlingStack.js","../node_modules/@datadog/browser-core/esm/tools/instrumentMethod.js","../node_modules/@datadog/browser-core/esm/tools/serialisation/sanitize.js","../node_modules/@datadog/browser-core/esm/domain/error/error.js","../node_modules/@datadog/browser-core/esm/domain/error/error.types.js","../node_modules/@datadog/browser-core/esm/domain/error/trackRuntimeError.js","../node_modules/@datadog/browser-core/esm/boot/init.js","../node_modules/@datadog/browser-core/esm/boot/displayAlreadyInitializedError.js","../node_modules/@datadog/browser-core/esm/browser/addEventListener.js","../node_modules/@datadog/browser-core/esm/domain/report/reportObservable.js","../node_modules/@datadog/browser-core/esm/tools/sendToExtension.js","../node_modules/@datadog/browser-core/esm/tools/utils/typeUtils.js","../node_modules/@datadog/browser-core/esm/tools/mergeInto.js","../node_modules/@datadog/browser-core/esm/domain/connectivity/connectivity.js","../node_modules/@datadog/browser-core/esm/tools/utils/arrayUtils.js","../node_modules/@datadog/browser-core/esm/tools/boundedBuffer.js","../node_modules/@datadog/browser-core/esm/domain/telemetry/rawTelemetryEvent.types.js","../node_modules/@datadog/browser-core/esm/domain/telemetry/telemetry.js","../node_modules/@datadog/browser-core/esm/tools/valueHistory.js","../node_modules/@datadog/browser-core/esm/domain/session/sessionManager.js","../node_modules/@datadog/browser-core/esm/tools/utils/responseUtils.js","../node_modules/@datadog/browser-core/esm/transport/sendWithRetryStrategy.js","../node_modules/@datadog/browser-core/esm/transport/httpRequest.js","../node_modules/@datadog/browser-core/esm/transport/eventBridge.js","../node_modules/@datadog/browser-core/esm/browser/pageExitObservable.js","../node_modules/@datadog/browser-core/esm/transport/batch.js","../node_modules/@datadog/browser-core/esm/transport/flushController.js","../node_modules/@datadog/browser-core/esm/transport/startBatchWithReplica.js","../node_modules/@datadog/browser-core/esm/tools/encoder.js","../node_modules/@datadog/browser-core/esm/tools/abstractLifeCycle.js","../node_modules/@datadog/browser-core/esm/domain/eventRateLimiter/createEventRateLimiter.js","../node_modules/@datadog/browser-core/esm/browser/runOnReadyState.js","../node_modules/@datadog/browser-core/esm/browser/xhrObservable.js","../node_modules/@datadog/browser-core/esm/browser/fetchObservable.js","../node_modules/@datadog/browser-core/esm/domain/console/consoleObservable.js","../node_modules/@datadog/browser-core/esm/domain/context/contextManager.js","../node_modules/@datadog/browser-core/esm/domain/context/storeContextManager.js","../node_modules/@datadog/browser-core/esm/domain/context/customerDataTracker.js","../node_modules/@datadog/browser-core/esm/tools/readBytesFromStream.js","../node_modules/@datadog/browser-core/esm/domain/synthetics/syntheticsWorkerValues.js","../node_modules/@datadog/browser-core/esm/domain/user/user.js","../node_modules/@datadog/browser-core/esm/tools/matchOption.js","../node_modules/@datadog/browser-rum-core/esm/domain/contexts/commonContext.js","../node_modules/@datadog/browser-rum-core/esm/domain/tracing/tracer.js","../node_modules/@datadog/browser-rum-core/esm/domain/configuration/configuration.js","../node_modules/@datadog/browser-rum-core/esm/domain/configuration/remoteConfiguration.js","../node_modules/@datadog/browser-rum-core/esm/domain/vital/vitalCollection.js","../node_modules/@datadog/browser-rum-core/esm/domain/plugins.js","../node_modules/@datadog/browser-rum-core/esm/boot/preStartRum.js","../node_modules/@datadog/browser-rum-core/esm/boot/rumPublicApi.js","../node_modules/@datadog/browser-rum-core/esm/browser/domMutationObservable.js","../node_modules/@datadog/browser-rum-core/esm/domain/resource/resourceUtils.js","../node_modules/@datadog/browser-rum-core/esm/browser/performanceObservable.js","../node_modules/@datadog/browser-rum-core/esm/browser/performanceCollection.js","../node_modules/@datadog/browser-rum-core/esm/domain/contexts/syntheticsContext.js","../node_modules/@datadog/browser-rum-core/esm/domain/limitModification.js","../node_modules/@datadog/browser-rum-core/esm/domain/assembly.js","../node_modules/@datadog/browser-rum-core/esm/domain/contexts/internalContext.js","../node_modules/@datadog/browser-rum-core/esm/domain/lifeCycle.js","../node_modules/@datadog/browser-rum-core/esm/domain/contexts/viewContexts.js","../node_modules/@datadog/browser-rum-core/esm/domain/requestCollection.js","../node_modules/@datadog/browser-rum-core/esm/domain/discardNegativeDuration.js","../node_modules/@datadog/browser-rum-core/esm/domain/trackEventCounts.js","../node_modules/@datadog/browser-rum-core/esm/domain/waitPageActivityEnd.js","../node_modules/@datadog/browser-rum-core/esm/browser/polyfills.js","../node_modules/@datadog/browser-rum-core/esm/browser/htmlDomUtils.js","../node_modules/@datadog/browser-rum-core/esm/domain/privacy.js","../node_modules/@datadog/browser-rum-core/esm/domain/action/getActionNameFromElement.js","../node_modules/@datadog/browser-rum-core/esm/domain/getSelectorFromElement.js","../node_modules/@datadog/browser-rum-core/esm/domain/action/clickChain.js","../node_modules/@datadog/browser-rum-core/esm/domain/action/listenActionEvents.js","../node_modules/@datadog/browser-rum-core/esm/domain/action/computeFrustration.js","../node_modules/@datadog/browser-rum-core/esm/domain/action/trackClickActions.js","../node_modules/@datadog/browser-rum-core/esm/domain/action/actionCollection.js","../node_modules/@datadog/browser-rum-core/esm/domain/error/trackConsoleError.js","../node_modules/@datadog/browser-rum-core/esm/domain/error/trackReportError.js","../node_modules/@datadog/browser-rum-core/esm/domain/error/errorCollection.js","../node_modules/@datadog/browser-rum-core/esm/domain/longTask/longTaskCollection.js","../node_modules/@datadog/browser-rum-core/esm/domain/resource/matchRequestTiming.js","../node_modules/@datadog/browser-rum-core/esm/domain/tracing/getDocumentTraceId.js","../node_modules/@datadog/browser-rum-core/esm/browser/performanceUtils.js","../node_modules/@datadog/browser-rum-core/esm/domain/resource/retrieveInitialDocumentResourceTiming.js","../node_modules/@datadog/browser-rum-core/esm/domain/resource/resourceCollection.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/trackViewEventCounts.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackFirstContentfulPaint.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackFirstInput.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackNavigationTimings.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackLargestContentfulPaint.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackFirstHidden.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackInitialViewMetrics.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackCumulativeLayoutShift.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/interactionCountPolyfill.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackInteractionToNextPaint.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackLoadingTime.js","../node_modules/@datadog/browser-rum-core/esm/browser/scroll.js","../node_modules/@datadog/browser-rum-core/esm/browser/viewportObservable.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackScrollMetrics.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/viewMetrics/trackCommonViewMetrics.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/trackViews.js","../node_modules/@datadog/browser-rum-core/esm/domain/view/viewCollection.js","../node_modules/@datadog/browser-rum-core/esm/domain/rumSessionManager.js","../node_modules/@datadog/browser-rum-core/esm/transport/startRumBatch.js","../node_modules/@datadog/browser-rum-core/esm/transport/startRumEventBridge.js","../node_modules/@datadog/browser-rum-core/esm/domain/contexts/urlContexts.js","../node_modules/@datadog/browser-rum-core/esm/browser/locationChangeObservable.js","../node_modules/@datadog/browser-rum-core/esm/domain/contexts/featureFlagContext.js","../node_modules/@datadog/browser-rum-core/esm/domain/startCustomerDataTelemetry.js","../node_modules/@datadog/browser-rum-core/esm/domain/contexts/pageStateHistory.js","../node_modules/@datadog/browser-rum-core/esm/domain/contexts/displayContext.js","../node_modules/@datadog/browser-rum-core/esm/browser/cookieObservable.js","../node_modules/@datadog/browser-rum-core/esm/domain/contexts/ciVisibilityContext.js","../node_modules/@datadog/browser-rum-core/esm/boot/startRum.js","../node_modules/@datadog/browser-rum-core/esm/domain/getSessionReplayUrl.js","../node_modules/@datadog/browser-rum/esm/domain/replayStats.js","../node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializationUtils.js","../node_modules/@datadog/browser-rum/esm/types/sessionReplayConstants.js","../node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeStyleSheets.js","../node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeAttribute.js","../node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeAttributes.js","../node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeNode.js","../node_modules/@datadog/browser-rum/esm/domain/record/serialization/serializeDocument.js","../node_modules/@datadog/browser-rum/esm/domain/record/eventsUtils.js","../node_modules/@datadog/browser-rum/esm/domain/record/viewports.js","../node_modules/@datadog/browser-rum/esm/domain/record/assembly.js","../node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackMove.js","../node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackMouseInteraction.js","../node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackScroll.js","../node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackViewportResize.js","../node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackMediaInteraction.js","../node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackStyleSheet.js","../node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackFocus.js","../node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackFrustration.js","../node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackViewEnd.js","../node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackInput.js","../node_modules/@datadog/browser-rum/esm/domain/record/mutationBatch.js","../node_modules/@datadog/browser-rum/esm/domain/record/trackers/trackMutation.js","../node_modules/@datadog/browser-rum/esm/domain/record/elementsScrollPositions.js","../node_modules/@datadog/browser-rum/esm/domain/record/shadowRootsController.js","../node_modules/@datadog/browser-rum/esm/domain/record/startFullSnapshots.js","../node_modules/@datadog/browser-rum/esm/domain/record/recordIds.js","../node_modules/@datadog/browser-rum/esm/domain/record/record.js","../node_modules/@datadog/browser-rum/esm/domain/segmentCollection/buildReplayPayload.js","../node_modules/@datadog/browser-rum/esm/domain/segmentCollection/segment.js","../node_modules/@datadog/browser-rum/esm/domain/segmentCollection/segmentCollection.js","../node_modules/@datadog/browser-rum/esm/domain/startRecordBridge.js","../node_modules/@datadog/browser-rum/esm/boot/startRecording.js","../node_modules/@datadog/browser-rum/esm/boot/isBrowserSupported.js","../node_modules/@datadog/browser-rum/esm/domain/getSessionReplayLink.js","../node_modules/@datadog/browser-rum/esm/domain/deflate/deflateEncoder.js","../node_modules/@datadog/browser-rum/esm/domain/deflate/deflateWorker.js","../node_modules/@datadog/browser-rum/esm/boot/recorderApi.js","../node_modules/@datadog/browser-rum/esm/entries/main.js","../node_modules/@datadog/browser-logs/esm/domain/logger/isAuthorized.js","../node_modules/@datadog/browser-logs/esm/domain/logger.js","../node_modules/@datadog/browser-logs/esm/domain/contexts/commonContext.js","../node_modules/@datadog/browser-logs/esm/domain/configuration.js","../node_modules/@datadog/browser-logs/esm/boot/preStartLogs.js","../node_modules/@datadog/browser-logs/esm/boot/logsPublicApi.js","../node_modules/@datadog/browser-logs/esm/domain/logsSessionManager.js","../node_modules/@datadog/browser-logs/esm/domain/contexts/rumInternalContext.js","../node_modules/@datadog/browser-logs/esm/domain/assembly.js","../node_modules/@datadog/browser-logs/esm/domain/console/consoleCollection.js","../node_modules/@datadog/browser-logs/esm/domain/report/reportCollection.js","../node_modules/@datadog/browser-logs/esm/domain/networkError/networkErrorCollection.js","../node_modules/@datadog/browser-logs/esm/domain/runtimeError/runtimeErrorCollection.js","../node_modules/@datadog/browser-logs/esm/domain/lifeCycle.js","../node_modules/@datadog/browser-logs/esm/domain/logger/loggerCollection.js","../node_modules/@datadog/browser-logs/esm/transport/startLogsBatch.js","../node_modules/@datadog/browser-logs/esm/transport/startLogsBridge.js","../node_modules/@datadog/browser-logs/esm/domain/contexts/internalContext.js","../node_modules/@datadog/browser-logs/esm/domain/reportError.js","../node_modules/@datadog/browser-logs/esm/domain/logsTelemetry.js","../node_modules/@datadog/browser-logs/esm/boot/startLogs.js","../node_modules/@datadog/browser-logs/esm/entries/main.js","../src/js/datadog.js","../src/js/utils/root-route.js","../src/js/index.js"],"sourcesContent":["'use strict';\nvar check = function (it) {\n  return it && it.Math === Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  check(typeof this == 'object' && this) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","'use strict';\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] !== 7;\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","'use strict';\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call.apply(fn, arguments);\n  };\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) === 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","'use strict';\n// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","'use strict';\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw new $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","'use strict';\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","'use strict';\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar documentAll = typeof document == 'object' && document.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nmodule.exports = typeof documentAll == 'undefined' && documentAll !== undefined ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","'use strict';\nvar isCallable = require('../internals/is-callable');\n\nmodule.exports = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(globalThis[namespace]) : globalThis[namespace] && globalThis[namespace][method];\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","'use strict';\nvar globalThis = require('../internals/global-this');\n\nvar navigator = globalThis.navigator;\nvar userAgent = navigator && navigator.userAgent;\n\nmodule.exports = userAgent ? String(userAgent) : '';\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar userAgent = require('../internals/environment-user-agent');\n\nvar process = globalThis.process;\nvar Deno = globalThis.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/environment-v8-version');\nvar fails = require('../internals/fails');\nvar globalThis = require('../internals/global-this');\n\nvar $String = globalThis.String;\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol('symbol detection');\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,\n  // of course, fail.\n  return !$String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","'use strict';\nvar $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw new $TypeError(tryToString(argument) + ' is not a function');\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw new $TypeError(\"Can't convert object to primitive value\");\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(globalThis, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    globalThis[key] = value;\n  } return value;\n};\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar globalThis = require('../internals/global-this');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = module.exports = globalThis[SHARED] || defineGlobalProperty(SHARED, {});\n\n(store.versions || (store.versions = [])).push({\n  version: '3.38.0',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: ' 2014-2024 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.38.0/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","'use strict';\nvar store = require('../internals/shared-store');\n\nmodule.exports = function (key, value) {\n  return store[key] || (store[key] = value || {});\n};\n","'use strict';\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar Symbol = globalThis.Symbol;\nvar WellKnownSymbolsStore = shared('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)\n      ? Symbol[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw new $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isObject = require('../internals/is-object');\n\nvar document = globalThis.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a !== 7;\n});\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype !== 42;\n});\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw new $TypeError($String(argument) + ' is not an object');\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw new $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = globalThis.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","'use strict';\nvar shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","'use strict';\nmodule.exports = {};\n","'use strict';\nvar NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar globalThis = require('../internals/global-this');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = globalThis.TypeError;\nvar WeakMap = globalThis.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw new TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar $String = String;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\nvar stringSlice = uncurryThis(''.slice);\nvar replace = uncurryThis(''.replace);\nvar join = uncurryThis([].join);\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (stringSlice($String(name), 0, 7) === 'Symbol(') {\n    name = '[' + replace($String(name), /^Symbol\\(([^)]*)\\).*$/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","'use strict';\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","'use strict';\nvar trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  var len = toIntegerOrInfinity(argument);\n  return len > 0 ? min(len, 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","'use strict';\nvar toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    if (length === 0) return !IS_INCLUDES && -1;\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el !== el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value !== value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","'use strict';\n// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","'use strict';\nvar internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","'use strict';\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","'use strict';\nvar hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value === POLYFILL ? true\n    : value === NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = globalThis;\n  } else if (STATIC) {\n    target = globalThis[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = globalThis[TARGET] && globalThis[TARGET].prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","'use strict';\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw new $TypeError('Incorrect invocation');\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\n\nmodule.exports = function (object, key, method) {\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));\n  } catch (error) { /* empty */ }\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nmodule.exports = function (argument) {\n  return isObject(argument) || argument === null;\n};\n","'use strict';\nvar isPossiblePrototype = require('../internals/is-possible-prototype');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (isPossiblePrototype(argument)) return argument;\n  throw new $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n","'use strict';\n/* eslint-disable no-proto -- safe */\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar isObject = require('../internals/is-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    requireObjectCoercible(O);\n    aPossiblePrototype(proto);\n    if (!isObject(O)) return O;\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","'use strict';\nvar classof = require('../internals/classof');\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n","'use strict';\nvar toString = require('../internals/to-string');\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n","'use strict';\nmodule.exports = {\n  IndexSizeError: { s: 'INDEX_SIZE_ERR', c: 1, m: 1 },\n  DOMStringSizeError: { s: 'DOMSTRING_SIZE_ERR', c: 2, m: 0 },\n  HierarchyRequestError: { s: 'HIERARCHY_REQUEST_ERR', c: 3, m: 1 },\n  WrongDocumentError: { s: 'WRONG_DOCUMENT_ERR', c: 4, m: 1 },\n  InvalidCharacterError: { s: 'INVALID_CHARACTER_ERR', c: 5, m: 1 },\n  NoDataAllowedError: { s: 'NO_DATA_ALLOWED_ERR', c: 6, m: 0 },\n  NoModificationAllowedError: { s: 'NO_MODIFICATION_ALLOWED_ERR', c: 7, m: 1 },\n  NotFoundError: { s: 'NOT_FOUND_ERR', c: 8, m: 1 },\n  NotSupportedError: { s: 'NOT_SUPPORTED_ERR', c: 9, m: 1 },\n  InUseAttributeError: { s: 'INUSE_ATTRIBUTE_ERR', c: 10, m: 1 },\n  InvalidStateError: { s: 'INVALID_STATE_ERR', c: 11, m: 1 },\n  SyntaxError: { s: 'SYNTAX_ERR', c: 12, m: 1 },\n  InvalidModificationError: { s: 'INVALID_MODIFICATION_ERR', c: 13, m: 1 },\n  NamespaceError: { s: 'NAMESPACE_ERR', c: 14, m: 1 },\n  InvalidAccessError: { s: 'INVALID_ACCESS_ERR', c: 15, m: 1 },\n  ValidationError: { s: 'VALIDATION_ERR', c: 16, m: 0 },\n  TypeMismatchError: { s: 'TYPE_MISMATCH_ERR', c: 17, m: 1 },\n  SecurityError: { s: 'SECURITY_ERR', c: 18, m: 1 },\n  NetworkError: { s: 'NETWORK_ERR', c: 19, m: 1 },\n  AbortError: { s: 'ABORT_ERR', c: 20, m: 1 },\n  URLMismatchError: { s: 'URL_MISMATCH_ERR', c: 21, m: 1 },\n  QuotaExceededError: { s: 'QUOTA_EXCEEDED_ERR', c: 22, m: 1 },\n  TimeoutError: { s: 'TIMEOUT_ERR', c: 23, m: 1 },\n  InvalidNodeTypeError: { s: 'INVALID_NODE_TYPE_ERR', c: 24, m: 1 },\n  DataCloneError: { s: 'DATA_CLONE_ERR', c: 25, m: 1 }\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String(new $Error(arg).stack); })('zxcasd');\n// eslint-disable-next-line redos/no-vulnerable -- safe\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar getBuiltIn = require('../internals/get-built-in');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar defineProperty = require('../internals/object-define-property').f;\nvar hasOwn = require('../internals/has-own-property');\nvar anInstance = require('../internals/an-instance');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar DOMExceptionConstants = require('../internals/dom-exception-constants');\nvar clearErrorStack = require('../internals/error-stack-clear');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nvar DOM_EXCEPTION = 'DOMException';\nvar Error = getBuiltIn('Error');\nvar NativeDOMException = getBuiltIn(DOM_EXCEPTION);\n\nvar $DOMException = function DOMException() {\n  anInstance(this, DOMExceptionPrototype);\n  var argumentsLength = arguments.length;\n  var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);\n  var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');\n  var that = new NativeDOMException(message, name);\n  var error = new Error(message);\n  error.name = DOM_EXCEPTION;\n  defineProperty(that, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));\n  inheritIfRequired(that, this, $DOMException);\n  return that;\n};\n\nvar DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;\n\nvar ERROR_HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);\nvar DOM_EXCEPTION_HAS_STACK = 'stack' in new NativeDOMException(1, 2);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(globalThis, DOM_EXCEPTION);\n\n// Bun ~ 0.1.1 DOMException have incorrect descriptor and we can't redefine it\n// https://github.com/Jarred-Sumner/bun/issues/399\nvar BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);\n\nvar FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;\n\n// `DOMException` constructor patch for `.stack` where it's required\n// https://webidl.spec.whatwg.org/#es-DOMException-specialness\n$({ global: true, constructor: true, forced: IS_PURE || FORCED_CONSTRUCTOR }, { // TODO: fix export logic\n  DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException\n});\n\nvar PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);\nvar PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;\n\nif (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {\n  if (!IS_PURE) {\n    defineProperty(PolyfilledDOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, PolyfilledDOMException));\n  }\n\n  for (var key in DOMExceptionConstants) if (hasOwn(DOMExceptionConstants, key)) {\n    var constant = DOMExceptionConstants[key];\n    var constantName = constant.s;\n    if (!hasOwn(PolyfilledDOMException, constantName)) {\n      defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));\n    }\n  }\n}\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.test(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, [], argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","'use strict';\nvar classofRaw = require('../internals/classof-raw');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThis(fn);\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","'use strict';\nmodule.exports = {};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","'use strict';\nvar classof = require('../internals/classof');\nvar getMethod = require('../internals/get-method');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (!isNullOrUndefined(it)) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw new $TypeError(tryToString(argument) + ' is not iterable');\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getMethod = require('../internals/get-method');\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar $TypeError = TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_RECORD = !!(options && options.IS_RECORD);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal', condition);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_RECORD) {\n    iterator = iterable.iterator;\n  } else if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw new $TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = IS_RECORD ? iterable.next : iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  if (DESCRIPTORS) definePropertyModule.f(object, key, createPropertyDescriptor(0, value));\n  else object[key] = value;\n};\n","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.hasIndices) result += 'd';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.unicodeSets) result += 'v';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar hasOwn = require('../internals/has-own-property');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar regExpFlags = require('../internals/regexp-flags');\n\nvar RegExpPrototype = RegExp.prototype;\n\nmodule.exports = function (R) {\n  var flags = R.flags;\n  return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R)\n    ? call(regExpFlags, R) : flags;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\n// eslint-disable-next-line es/no-map -- safe\nvar MapPrototype = Map.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-map -- safe\n  Map: Map,\n  set: uncurryThis(MapPrototype.set),\n  get: uncurryThis(MapPrototype.get),\n  has: uncurryThis(MapPrototype.has),\n  remove: uncurryThis(MapPrototype['delete']),\n  proto: MapPrototype\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\n// eslint-disable-next-line es/no-set -- safe\nvar SetPrototype = Set.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-set -- safe\n  Set: Set,\n  add: uncurryThis(SetPrototype.add),\n  has: uncurryThis(SetPrototype.has),\n  remove: uncurryThis(SetPrototype['delete']),\n  proto: SetPrototype\n};\n","'use strict';\nvar call = require('../internals/function-call');\n\nmodule.exports = function (record, fn, ITERATOR_INSTEAD_OF_RECORD) {\n  var iterator = ITERATOR_INSTEAD_OF_RECORD ? record : record.iterator;\n  var next = record.next;\n  var step, result;\n  while (!(step = call(next, iterator)).done) {\n    result = fn(step.value);\n    if (result !== undefined) return result;\n  }\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar iterateSimple = require('../internals/iterate-simple');\nvar SetHelpers = require('../internals/set-helpers');\n\nvar Set = SetHelpers.Set;\nvar SetPrototype = SetHelpers.proto;\nvar forEach = uncurryThis(SetPrototype.forEach);\nvar keys = uncurryThis(SetPrototype.keys);\nvar next = keys(new Set()).next;\n\nmodule.exports = function (set, fn, interruptible) {\n  return interruptible ? iterateSimple({ iterator: keys(set), next: next }, fn) : forEach(set, fn);\n};\n","'use strict';\n/* global Bun, Deno -- detection */\nvar globalThis = require('../internals/global-this');\nvar userAgent = require('../internals/environment-user-agent');\nvar classof = require('../internals/classof-raw');\n\nvar userAgentStartsWith = function (string) {\n  return userAgent.slice(0, string.length) === string;\n};\n\nmodule.exports = (function () {\n  if (userAgentStartsWith('Bun/')) return 'BUN';\n  if (userAgentStartsWith('Cloudflare-Workers')) return 'CLOUDFLARE';\n  if (userAgentStartsWith('Deno/')) return 'DENO';\n  if (userAgentStartsWith('Node.js/')) return 'NODE';\n  if (globalThis.Bun && typeof Bun.version == 'string') return 'BUN';\n  if (globalThis.Deno && typeof Deno.version == 'object') return 'DENO';\n  if (classof(globalThis.process) === 'process') return 'NODE';\n  if (globalThis.window && globalThis.document) return 'BROWSER';\n  return 'REST';\n})();\n","'use strict';\nvar ENVIRONMENT = require('../internals/environment');\n\nmodule.exports = ENVIRONMENT === 'NODE';\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar IS_NODE = require('../internals/environment-is-node');\n\nmodule.exports = function (name) {\n  if (IS_NODE) {\n    try {\n      return globalThis.process.getBuiltinModule(name);\n    } catch (error) { /* empty */ }\n    try {\n      // eslint-disable-next-line no-new-func -- safe\n      return Function('return require(\"' + name + '\")')();\n    } catch (error) { /* empty */ }\n  }\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar fails = require('../internals/fails');\nvar V8 = require('../internals/environment-v8-version');\nvar ENVIRONMENT = require('../internals/environment');\n\nvar structuredClone = globalThis.structuredClone;\n\nmodule.exports = !!structuredClone && !fails(function () {\n  // prevent V8 ArrayBufferDetaching protector cell invalidation and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if ((ENVIRONMENT === 'DENO' && V8 > 92) || (ENVIRONMENT === 'NODE' && V8 > 94) || (ENVIRONMENT === 'BROWSER' && V8 > 97)) return false;\n  var buffer = new ArrayBuffer(8);\n  var clone = structuredClone(buffer, { transfer: [buffer] });\n  return buffer.byteLength !== 0 || clone.byteLength !== 8;\n});\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar getBuiltInNodeModule = require('../internals/get-built-in-node-module');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = globalThis.structuredClone;\nvar $ArrayBuffer = globalThis.ArrayBuffer;\nvar $MessageChannel = globalThis.MessageChannel;\nvar detach = false;\nvar WorkerThreads, channel, buffer, $detach;\n\nif (PROPER_STRUCTURED_CLONE_TRANSFER) {\n  detach = function (transferable) {\n    structuredClone(transferable, { transfer: [transferable] });\n  };\n} else if ($ArrayBuffer) try {\n  if (!$MessageChannel) {\n    WorkerThreads = getBuiltInNodeModule('worker_threads');\n    if (WorkerThreads) $MessageChannel = WorkerThreads.MessageChannel;\n  }\n\n  if ($MessageChannel) {\n    channel = new $MessageChannel();\n    buffer = new $ArrayBuffer(2);\n\n    $detach = function (transferable) {\n      channel.port1.postMessage(null, [transferable]);\n    };\n\n    if (buffer.byteLength === 2) {\n      $detach(buffer);\n      if (buffer.byteLength === 0) detach = $detach;\n    }\n  }\n} catch (error) { /* empty */ }\n\nmodule.exports = detach;\n","'use strict';\nvar fails = require('../internals/fails');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = !fails(function () {\n  var error = new Error('a');\n  if (!('stack' in error)) return true;\n  // eslint-disable-next-line es/no-object-defineproperty -- safe\n  Object.defineProperty(error, 'stack', createPropertyDescriptor(1, 7));\n  return error.stack !== 7;\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar uid = require('../internals/uid');\nvar isCallable = require('../internals/is-callable');\nvar isConstructor = require('../internals/is-constructor');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar iterate = require('../internals/iterate');\nvar anObject = require('../internals/an-object');\nvar classof = require('../internals/classof');\nvar hasOwn = require('../internals/has-own-property');\nvar createProperty = require('../internals/create-property');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\nvar getRegExpFlags = require('../internals/regexp-get-flags');\nvar MapHelpers = require('../internals/map-helpers');\nvar SetHelpers = require('../internals/set-helpers');\nvar setIterate = require('../internals/set-iterate');\nvar detachTransferable = require('../internals/detach-transferable');\nvar ERROR_STACK_INSTALLABLE = require('../internals/error-stack-installable');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar Object = globalThis.Object;\nvar Array = globalThis.Array;\nvar Date = globalThis.Date;\nvar Error = globalThis.Error;\nvar TypeError = globalThis.TypeError;\nvar PerformanceMark = globalThis.PerformanceMark;\nvar DOMException = getBuiltIn('DOMException');\nvar Map = MapHelpers.Map;\nvar mapHas = MapHelpers.has;\nvar mapGet = MapHelpers.get;\nvar mapSet = MapHelpers.set;\nvar Set = SetHelpers.Set;\nvar setAdd = SetHelpers.add;\nvar setHas = SetHelpers.has;\nvar objectKeys = getBuiltIn('Object', 'keys');\nvar push = uncurryThis([].push);\nvar thisBooleanValue = uncurryThis(true.valueOf);\nvar thisNumberValue = uncurryThis(1.0.valueOf);\nvar thisStringValue = uncurryThis(''.valueOf);\nvar thisTimeValue = uncurryThis(Date.prototype.getTime);\nvar PERFORMANCE_MARK = uid('structuredClone');\nvar DATA_CLONE_ERROR = 'DataCloneError';\nvar TRANSFERRING = 'Transferring';\n\nvar checkBasicSemantic = function (structuredCloneImplementation) {\n  return !fails(function () {\n    var set1 = new globalThis.Set([7]);\n    var set2 = structuredCloneImplementation(set1);\n    var number = structuredCloneImplementation(Object(7));\n    return set2 === set1 || !set2.has(7) || !isObject(number) || +number !== 7;\n  }) && structuredCloneImplementation;\n};\n\nvar checkErrorsCloning = function (structuredCloneImplementation, $Error) {\n  return !fails(function () {\n    var error = new $Error();\n    var test = structuredCloneImplementation({ a: error, b: error });\n    return !(test && test.a === test.b && test.a instanceof $Error && test.a.stack === error.stack);\n  });\n};\n\n// https://github.com/whatwg/html/pull/5749\nvar checkNewErrorsCloningSemantic = function (structuredCloneImplementation) {\n  return !fails(function () {\n    var test = structuredCloneImplementation(new globalThis.AggregateError([1], PERFORMANCE_MARK, { cause: 3 }));\n    return test.name !== 'AggregateError' || test.errors[0] !== 1 || test.message !== PERFORMANCE_MARK || test.cause !== 3;\n  });\n};\n\n// FF94+, Safari 15.4+, Chrome 98+, NodeJS 17.0+, Deno 1.13+\n// FF<103 and Safari implementations can't clone errors\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1556604\n// FF103 can clone errors, but `.stack` of clone is an empty string\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1778762\n// FF104+ fixed it on usual errors, but not on DOMExceptions\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1777321\n// Chrome <102 returns `null` if cloned object contains multiple references to one error\n// https://bugs.chromium.org/p/v8/issues/detail?id=12542\n// NodeJS implementation can't clone DOMExceptions\n// https://github.com/nodejs/node/issues/41038\n// only FF103+ supports new (html/5749) error cloning semantic\nvar nativeStructuredClone = globalThis.structuredClone;\n\nvar FORCED_REPLACEMENT = IS_PURE\n  || !checkErrorsCloning(nativeStructuredClone, Error)\n  || !checkErrorsCloning(nativeStructuredClone, DOMException)\n  || !checkNewErrorsCloningSemantic(nativeStructuredClone);\n\n// Chrome 82+, Safari 14.1+, Deno 1.11+\n// Chrome 78-81 implementation swaps `.name` and `.message` of cloned `DOMException`\n// Chrome returns `null` if cloned object contains multiple references to one error\n// Safari 14.1 implementation doesn't clone some `RegExp` flags, so requires a workaround\n// Safari implementation can't clone errors\n// Deno 1.2-1.10 implementations too naive\n// NodeJS 16.0+ does not have `PerformanceMark` constructor\n// NodeJS <17.2 structured cloning implementation from `performance.mark` is too naive\n// and can't clone, for example, `RegExp` or some boxed primitives\n// https://github.com/nodejs/node/issues/40840\n// no one of those implementations supports new (html/5749) error cloning semantic\nvar structuredCloneFromMark = !nativeStructuredClone && checkBasicSemantic(function (value) {\n  return new PerformanceMark(PERFORMANCE_MARK, { detail: value }).detail;\n});\n\nvar nativeRestrictedStructuredClone = checkBasicSemantic(nativeStructuredClone) || structuredCloneFromMark;\n\nvar throwUncloneable = function (type) {\n  throw new DOMException('Uncloneable type: ' + type, DATA_CLONE_ERROR);\n};\n\nvar throwUnpolyfillable = function (type, action) {\n  throw new DOMException((action || 'Cloning') + ' of ' + type + ' cannot be properly polyfilled in this engine', DATA_CLONE_ERROR);\n};\n\nvar tryNativeRestrictedStructuredClone = function (value, type) {\n  if (!nativeRestrictedStructuredClone) throwUnpolyfillable(type);\n  return nativeRestrictedStructuredClone(value);\n};\n\nvar createDataTransfer = function () {\n  var dataTransfer;\n  try {\n    dataTransfer = new globalThis.DataTransfer();\n  } catch (error) {\n    try {\n      dataTransfer = new globalThis.ClipboardEvent('').clipboardData;\n    } catch (error2) { /* empty */ }\n  }\n  return dataTransfer && dataTransfer.items && dataTransfer.files ? dataTransfer : null;\n};\n\nvar cloneBuffer = function (value, map, $type) {\n  if (mapHas(map, value)) return mapGet(map, value);\n\n  var type = $type || classof(value);\n  var clone, length, options, source, target, i;\n\n  if (type === 'SharedArrayBuffer') {\n    if (nativeRestrictedStructuredClone) clone = nativeRestrictedStructuredClone(value);\n    // SharedArrayBuffer should use shared memory, we can't polyfill it, so return the original\n    else clone = value;\n  } else {\n    var DataView = globalThis.DataView;\n\n    // `ArrayBuffer#slice` is not available in IE10\n    // `ArrayBuffer#slice` and `DataView` are not available in old FF\n    if (!DataView && !isCallable(value.slice)) throwUnpolyfillable('ArrayBuffer');\n    // detached buffers throws in `DataView` and `.slice`\n    try {\n      if (isCallable(value.slice) && !value.resizable) {\n        clone = value.slice(0);\n      } else {\n        length = value.byteLength;\n        options = 'maxByteLength' in value ? { maxByteLength: value.maxByteLength } : undefined;\n        // eslint-disable-next-line es/no-resizable-and-growable-arraybuffers -- safe\n        clone = new ArrayBuffer(length, options);\n        source = new DataView(value);\n        target = new DataView(clone);\n        for (i = 0; i < length; i++) {\n          target.setUint8(i, source.getUint8(i));\n        }\n      }\n    } catch (error) {\n      throw new DOMException('ArrayBuffer is detached', DATA_CLONE_ERROR);\n    }\n  }\n\n  mapSet(map, value, clone);\n\n  return clone;\n};\n\nvar cloneView = function (value, type, offset, length, map) {\n  var C = globalThis[type];\n  // in some old engines like Safari 9, typeof C is 'object'\n  // on Uint8ClampedArray or some other constructors\n  if (!isObject(C)) throwUnpolyfillable(type);\n  return new C(cloneBuffer(value.buffer, map), offset, length);\n};\n\nvar structuredCloneInternal = function (value, map) {\n  if (isSymbol(value)) throwUncloneable('Symbol');\n  if (!isObject(value)) return value;\n  // effectively preserves circular references\n  if (map) {\n    if (mapHas(map, value)) return mapGet(map, value);\n  } else map = new Map();\n\n  var type = classof(value);\n  var C, name, cloned, dataTransfer, i, length, keys, key;\n\n  switch (type) {\n    case 'Array':\n      cloned = Array(lengthOfArrayLike(value));\n      break;\n    case 'Object':\n      cloned = {};\n      break;\n    case 'Map':\n      cloned = new Map();\n      break;\n    case 'Set':\n      cloned = new Set();\n      break;\n    case 'RegExp':\n      // in this block because of a Safari 14.1 bug\n      // old FF does not clone regexes passed to the constructor, so get the source and flags directly\n      cloned = new RegExp(value.source, getRegExpFlags(value));\n      break;\n    case 'Error':\n      name = value.name;\n      switch (name) {\n        case 'AggregateError':\n          cloned = new (getBuiltIn(name))([]);\n          break;\n        case 'EvalError':\n        case 'RangeError':\n        case 'ReferenceError':\n        case 'SuppressedError':\n        case 'SyntaxError':\n        case 'TypeError':\n        case 'URIError':\n          cloned = new (getBuiltIn(name))();\n          break;\n        case 'CompileError':\n        case 'LinkError':\n        case 'RuntimeError':\n          cloned = new (getBuiltIn('WebAssembly', name))();\n          break;\n        default:\n          cloned = new Error();\n      }\n      break;\n    case 'DOMException':\n      cloned = new DOMException(value.message, value.name);\n      break;\n    case 'ArrayBuffer':\n    case 'SharedArrayBuffer':\n      cloned = cloneBuffer(value, map, type);\n      break;\n    case 'DataView':\n    case 'Int8Array':\n    case 'Uint8Array':\n    case 'Uint8ClampedArray':\n    case 'Int16Array':\n    case 'Uint16Array':\n    case 'Int32Array':\n    case 'Uint32Array':\n    case 'Float16Array':\n    case 'Float32Array':\n    case 'Float64Array':\n    case 'BigInt64Array':\n    case 'BigUint64Array':\n      length = type === 'DataView' ? value.byteLength : value.length;\n      cloned = cloneView(value, type, value.byteOffset, length, map);\n      break;\n    case 'DOMQuad':\n      try {\n        cloned = new DOMQuad(\n          structuredCloneInternal(value.p1, map),\n          structuredCloneInternal(value.p2, map),\n          structuredCloneInternal(value.p3, map),\n          structuredCloneInternal(value.p4, map)\n        );\n      } catch (error) {\n        cloned = tryNativeRestrictedStructuredClone(value, type);\n      }\n      break;\n    case 'File':\n      if (nativeRestrictedStructuredClone) try {\n        cloned = nativeRestrictedStructuredClone(value);\n        // NodeJS 20.0.0 bug, https://github.com/nodejs/node/issues/47612\n        if (classof(cloned) !== type) cloned = undefined;\n      } catch (error) { /* empty */ }\n      if (!cloned) try {\n        cloned = new File([value], value.name, value);\n      } catch (error) { /* empty */ }\n      if (!cloned) throwUnpolyfillable(type);\n      break;\n    case 'FileList':\n      dataTransfer = createDataTransfer();\n      if (dataTransfer) {\n        for (i = 0, length = lengthOfArrayLike(value); i < length; i++) {\n          dataTransfer.items.add(structuredCloneInternal(value[i], map));\n        }\n        cloned = dataTransfer.files;\n      } else cloned = tryNativeRestrictedStructuredClone(value, type);\n      break;\n    case 'ImageData':\n      // Safari 9 ImageData is a constructor, but typeof ImageData is 'object'\n      try {\n        cloned = new ImageData(\n          structuredCloneInternal(value.data, map),\n          value.width,\n          value.height,\n          { colorSpace: value.colorSpace }\n        );\n      } catch (error) {\n        cloned = tryNativeRestrictedStructuredClone(value, type);\n      } break;\n    default:\n      if (nativeRestrictedStructuredClone) {\n        cloned = nativeRestrictedStructuredClone(value);\n      } else switch (type) {\n        case 'BigInt':\n          // can be a 3rd party polyfill\n          cloned = Object(value.valueOf());\n          break;\n        case 'Boolean':\n          cloned = Object(thisBooleanValue(value));\n          break;\n        case 'Number':\n          cloned = Object(thisNumberValue(value));\n          break;\n        case 'String':\n          cloned = Object(thisStringValue(value));\n          break;\n        case 'Date':\n          cloned = new Date(thisTimeValue(value));\n          break;\n        case 'Blob':\n          try {\n            cloned = value.slice(0, value.size, value.type);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'DOMPoint':\n        case 'DOMPointReadOnly':\n          C = globalThis[type];\n          try {\n            cloned = C.fromPoint\n              ? C.fromPoint(value)\n              : new C(value.x, value.y, value.z, value.w);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'DOMRect':\n        case 'DOMRectReadOnly':\n          C = globalThis[type];\n          try {\n            cloned = C.fromRect\n              ? C.fromRect(value)\n              : new C(value.x, value.y, value.width, value.height);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'DOMMatrix':\n        case 'DOMMatrixReadOnly':\n          C = globalThis[type];\n          try {\n            cloned = C.fromMatrix\n              ? C.fromMatrix(value)\n              : new C(value);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'AudioData':\n        case 'VideoFrame':\n          if (!isCallable(value.clone)) throwUnpolyfillable(type);\n          try {\n            cloned = value.clone();\n          } catch (error) {\n            throwUncloneable(type);\n          } break;\n        case 'CropTarget':\n        case 'CryptoKey':\n        case 'FileSystemDirectoryHandle':\n        case 'FileSystemFileHandle':\n        case 'FileSystemHandle':\n        case 'GPUCompilationInfo':\n        case 'GPUCompilationMessage':\n        case 'ImageBitmap':\n        case 'RTCCertificate':\n        case 'WebAssembly.Module':\n          throwUnpolyfillable(type);\n          // break omitted\n        default:\n          throwUncloneable(type);\n      }\n  }\n\n  mapSet(map, value, cloned);\n\n  switch (type) {\n    case 'Array':\n    case 'Object':\n      keys = objectKeys(value);\n      for (i = 0, length = lengthOfArrayLike(keys); i < length; i++) {\n        key = keys[i];\n        createProperty(cloned, key, structuredCloneInternal(value[key], map));\n      } break;\n    case 'Map':\n      value.forEach(function (v, k) {\n        mapSet(cloned, structuredCloneInternal(k, map), structuredCloneInternal(v, map));\n      });\n      break;\n    case 'Set':\n      value.forEach(function (v) {\n        setAdd(cloned, structuredCloneInternal(v, map));\n      });\n      break;\n    case 'Error':\n      createNonEnumerableProperty(cloned, 'message', structuredCloneInternal(value.message, map));\n      if (hasOwn(value, 'cause')) {\n        createNonEnumerableProperty(cloned, 'cause', structuredCloneInternal(value.cause, map));\n      }\n      if (name === 'AggregateError') {\n        cloned.errors = structuredCloneInternal(value.errors, map);\n      } else if (name === 'SuppressedError') {\n        cloned.error = structuredCloneInternal(value.error, map);\n        cloned.suppressed = structuredCloneInternal(value.suppressed, map);\n      } // break omitted\n    case 'DOMException':\n      if (ERROR_STACK_INSTALLABLE) {\n        createNonEnumerableProperty(cloned, 'stack', structuredCloneInternal(value.stack, map));\n      }\n  }\n\n  return cloned;\n};\n\nvar tryToTransfer = function (rawTransfer, map) {\n  if (!isObject(rawTransfer)) throw new TypeError('Transfer option cannot be converted to a sequence');\n\n  var transfer = [];\n\n  iterate(rawTransfer, function (value) {\n    push(transfer, anObject(value));\n  });\n\n  var i = 0;\n  var length = lengthOfArrayLike(transfer);\n  var buffers = new Set();\n  var value, type, C, transferred, canvas, context;\n\n  while (i < length) {\n    value = transfer[i++];\n\n    type = classof(value);\n\n    if (type === 'ArrayBuffer' ? setHas(buffers, value) : mapHas(map, value)) {\n      throw new DOMException('Duplicate transferable', DATA_CLONE_ERROR);\n    }\n\n    if (type === 'ArrayBuffer') {\n      setAdd(buffers, value);\n      continue;\n    }\n\n    if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n      transferred = nativeStructuredClone(value, { transfer: [value] });\n    } else switch (type) {\n      case 'ImageBitmap':\n        C = globalThis.OffscreenCanvas;\n        if (!isConstructor(C)) throwUnpolyfillable(type, TRANSFERRING);\n        try {\n          canvas = new C(value.width, value.height);\n          context = canvas.getContext('bitmaprenderer');\n          context.transferFromImageBitmap(value);\n          transferred = canvas.transferToImageBitmap();\n        } catch (error) { /* empty */ }\n        break;\n      case 'AudioData':\n      case 'VideoFrame':\n        if (!isCallable(value.clone) || !isCallable(value.close)) throwUnpolyfillable(type, TRANSFERRING);\n        try {\n          transferred = value.clone();\n          value.close();\n        } catch (error) { /* empty */ }\n        break;\n      case 'MediaSourceHandle':\n      case 'MessagePort':\n      case 'OffscreenCanvas':\n      case 'ReadableStream':\n      case 'TransformStream':\n      case 'WritableStream':\n        throwUnpolyfillable(type, TRANSFERRING);\n    }\n\n    if (transferred === undefined) throw new DOMException('This object cannot be transferred: ' + type, DATA_CLONE_ERROR);\n\n    mapSet(map, value, transferred);\n  }\n\n  return buffers;\n};\n\nvar detachBuffers = function (buffers) {\n  setIterate(buffers, function (buffer) {\n    if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n      nativeRestrictedStructuredClone(buffer, { transfer: [buffer] });\n    } else if (isCallable(buffer.transfer)) {\n      buffer.transfer();\n    } else if (detachTransferable) {\n      detachTransferable(buffer);\n    } else {\n      throwUnpolyfillable('ArrayBuffer', TRANSFERRING);\n    }\n  });\n};\n\n// `structuredClone` method\n// https://html.spec.whatwg.org/multipage/structured-data.html#dom-structuredclone\n$({ global: true, enumerable: true, sham: !PROPER_STRUCTURED_CLONE_TRANSFER, forced: FORCED_REPLACEMENT }, {\n  structuredClone: function structuredClone(value /* , { transfer } */) {\n    var options = validateArgumentsLength(arguments.length, 1) > 1 && !isNullOrUndefined(arguments[1]) ? anObject(arguments[1]) : undefined;\n    var transfer = options ? options.transfer : undefined;\n    var map, buffers;\n\n    if (transfer !== undefined) {\n      map = new Map();\n      buffers = tryToTransfer(transfer, map);\n    }\n\n    var clone = structuredCloneInternal(value, map);\n\n    // since of an issue with cloning views of transferred buffers, we a forced to detach them later\n    // https://github.com/zloirock/core-js/issues/1265\n    if (buffers) detachBuffers(buffers);\n\n    return clone;\n  }\n});\n","try{self[\"workbox:window:7.0.0\"]&&_()}catch(n){}function n(n,t){return new Promise((function(r){var e=new MessageChannel;e.port1.onmessage=function(n){r(n.data)},n.postMessage(t,[e.port2])}))}function t(n){var t=function(n,t){if(\"object\"!=typeof n||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var e=r.call(n,t||\"default\");if(\"object\"!=typeof e)return e;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(n)}(n,\"string\");return\"symbol\"==typeof t?t:t+\"\"}function r(n,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(n,t(i.key),i)}}function e(n,t){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},e(n,t)}function i(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function o(n,t){var r=\"undefined\"!=typeof Symbol&&n[Symbol.iterator]||n[\"@@iterator\"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=function(n,t){if(n){if(\"string\"==typeof n)return i(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return\"Object\"===r&&n.constructor&&(r=n.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(n):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(n,t):void 0}}(n))||t&&n&&\"number\"==typeof n.length){r&&(n=r);var e=0;return function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}try{self[\"workbox:core:7.0.0\"]&&_()}catch(n){}var u=function(){var n=this;this.promise=new Promise((function(t,r){n.resolve=t,n.reject=r}))};function a(n,t){var r=location.href;return new URL(n,r).href===new URL(t,r).href}var c=function(n,t){this.type=n,Object.assign(this,t)};function f(n,t,r){return r?t?t(n):n:(n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n)}function s(){}var v={type:\"SKIP_WAITING\"};function h(n,t){if(!t)return n&&n.then?n.then(s):Promise.resolve()}var l=function(t){function i(n,r){var e,i;return void 0===r&&(r={}),(e=t.call(this)||this).nn={},e.tn=0,e.rn=new u,e.en=new u,e.on=new u,e.un=0,e.an=new Set,e.cn=function(){var n=e.fn,t=n.installing;e.tn>0||!a(t.scriptURL,e.sn.toString())||performance.now()>e.un+6e4?(e.vn=t,n.removeEventListener(\"updatefound\",e.cn)):(e.hn=t,e.an.add(t),e.rn.resolve(t)),++e.tn,t.addEventListener(\"statechange\",e.ln)},e.ln=function(n){var t=e.fn,r=n.target,i=r.state,o=r===e.vn,u={sw:r,isExternal:o,originalEvent:n};!o&&e.mn&&(u.isUpdate=!0),e.dispatchEvent(new c(i,u)),\"installed\"===i?e.wn=self.setTimeout((function(){\"installed\"===i&&t.waiting===r&&e.dispatchEvent(new c(\"waiting\",u))}),200):\"activating\"===i&&(clearTimeout(e.wn),o||e.en.resolve(r))},e.yn=function(n){var t=e.hn,r=t!==navigator.serviceWorker.controller;e.dispatchEvent(new c(\"controlling\",{isExternal:r,originalEvent:n,sw:t,isUpdate:e.mn})),r||e.on.resolve(t)},e.gn=(i=function(n){var t=n.data,r=n.ports,i=n.source;return f(e.getSW(),(function(){e.an.has(i)&&e.dispatchEvent(new c(\"message\",{data:t,originalEvent:n,ports:r,sw:i}))}))},function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];try{return Promise.resolve(i.apply(this,n))}catch(n){return Promise.reject(n)}}),e.sn=n,e.nn=r,navigator.serviceWorker.addEventListener(\"message\",e.gn),e}var o,s;s=t,(o=i).prototype=Object.create(s.prototype),o.prototype.constructor=o,e(o,s);var l,m,w,y=i.prototype;return y.register=function(n){var t=(void 0===n?{}:n).immediate,r=void 0!==t&&t;try{var e=this;return f(function(n,t){var r=n();if(r&&r.then)return r.then(t);return t(r)}((function(){if(!r&&\"complete\"!==document.readyState)return h(new Promise((function(n){return window.addEventListener(\"load\",n)})))}),(function(){return e.mn=Boolean(navigator.serviceWorker.controller),e.dn=e.pn(),f(e.bn(),(function(n){e.fn=n,e.dn&&(e.hn=e.dn,e.en.resolve(e.dn),e.on.resolve(e.dn),e.dn.addEventListener(\"statechange\",e.ln,{once:!0}));var t=e.fn.waiting;return t&&a(t.scriptURL,e.sn.toString())&&(e.hn=t,Promise.resolve().then((function(){e.dispatchEvent(new c(\"waiting\",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),e.hn&&(e.rn.resolve(e.hn),e.an.add(e.hn)),e.fn.addEventListener(\"updatefound\",e.cn),navigator.serviceWorker.addEventListener(\"controllerchange\",e.yn),e.fn}))})))}catch(n){return Promise.reject(n)}},y.update=function(){try{return this.fn?f(h(this.fn.update())):f()}catch(n){return Promise.reject(n)}},y.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},y.messageSW=function(t){try{return f(this.getSW(),(function(r){return n(r,t)}))}catch(n){return Promise.reject(n)}},y.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&n(this.fn.waiting,v)},y.pn=function(){var n=navigator.serviceWorker.controller;return n&&a(n.scriptURL,this.sn.toString())?n:void 0},y.bn=function(){try{var n=this;return f(function(n,t){try{var r=n()}catch(n){return t(n)}if(r&&r.then)return r.then(void 0,t);return r}((function(){return f(navigator.serviceWorker.register(n.sn,n.nn),(function(t){return n.un=performance.now(),t}))}),(function(n){throw n})))}catch(n){return Promise.reject(n)}},l=i,(m=[{key:\"active\",get:function(){return this.en.promise}},{key:\"controlling\",get:function(){return this.on.promise}}])&&r(l.prototype,m),w&&r(l,w),Object.defineProperty(l,\"prototype\",{writable:!1}),l}(function(){function n(){this.Pn=new Map}var t=n.prototype;return t.addEventListener=function(n,t){this.jn(n).add(t)},t.removeEventListener=function(n,t){this.jn(n).delete(t)},t.dispatchEvent=function(n){n.target=this;for(var t,r=o(this.jn(n.type));!(t=r()).done;){(0,t.value)(n)}},t.jn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},n}());export{l as Workbox,c as WorkboxEvent,n as messageSW};\n//# sourceMappingURL=workbox-window.prod.es5.mjs.map\n","// Current version.\nexport var VERSION = '1.13.7';\n\n// Establish the root object, `window` (`self`) in the browser, `global`\n// on the server, or `this` in some virtual machines. We use `self`\n// instead of `window` for `WebWorker` support.\nexport var root = (typeof self == 'object' && self.self === self && self) ||\n          (typeof global == 'object' && global.global === global && global) ||\n          Function('return this')() ||\n          {};\n\n// Save bytes in the minified (but not gzipped) version:\nexport var ArrayProto = Array.prototype, ObjProto = Object.prototype;\nexport var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport var push = ArrayProto.push,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty;\n\n// Modern feature detection.\nexport var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined',\n    supportsDataView = typeof DataView !== 'undefined';\n\n// All **ECMAScript 5+** native function implementations that we hope to use\n// are declared here.\nexport var nativeIsArray = Array.isArray,\n    nativeKeys = Object.keys,\n    nativeCreate = Object.create,\n    nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\n\n// Create references to these builtin functions because we override them.\nexport var _isNaN = isNaN,\n    _isFinite = isFinite;\n\n// Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\nexport var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\nexport var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n  'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n// The largest integer that can be represented exactly.\nexport var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n","// Some functions take a variable number of arguments, or a few expected\n// arguments at the beginning and then a variable number of values to operate\n// on. This helper accumulates all remaining arguments past the functions\n// argument length (or an explicit `startIndex`), into an array that becomes\n// the last argument. Similar to ES6s \"rest parameter\".\nexport default function restArguments(func, startIndex) {\n  startIndex = startIndex == null ? func.length - 1 : +startIndex;\n  return function() {\n    var length = Math.max(arguments.length - startIndex, 0),\n        rest = Array(length),\n        index = 0;\n    for (; index < length; index++) {\n      rest[index] = arguments[index + startIndex];\n    }\n    switch (startIndex) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, arguments[0], rest);\n      case 2: return func.call(this, arguments[0], arguments[1], rest);\n    }\n    var args = Array(startIndex + 1);\n    for (index = 0; index < startIndex; index++) {\n      args[index] = arguments[index];\n    }\n    args[startIndex] = rest;\n    return func.apply(this, args);\n  };\n}\n","// Is a given variable an object?\nexport default function isObject(obj) {\n  var type = typeof obj;\n  return type === 'function' || (type === 'object' && !!obj);\n}\n","// Is a given value equal to null?\nexport default function isNull(obj) {\n  return obj === null;\n}\n","// Is a given variable undefined?\nexport default function isUndefined(obj) {\n  return obj === void 0;\n}\n","import { toString } from './_setup.js';\n\n// Is a given value a boolean?\nexport default function isBoolean(obj) {\n  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n}\n","// Is a given value a DOM element?\nexport default function isElement(obj) {\n  return !!(obj && obj.nodeType === 1);\n}\n","import { toString } from './_setup.js';\n\n// Internal function for creating a `toString`-based type tester.\nexport default function tagTester(name) {\n  var tag = '[object ' + name + ']';\n  return function(obj) {\n    return toString.call(obj) === tag;\n  };\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('String');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Number');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Date');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('RegExp');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Error');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Symbol');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('ArrayBuffer');\n","import tagTester from './_tagTester.js';\nimport { root } from './_setup.js';\n\nvar isFunction = tagTester('Function');\n\n// Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\n// v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\nvar nodelist = root.document && root.document.childNodes;\nif (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n  isFunction = function(obj) {\n    return typeof obj == 'function' || false;\n  };\n}\n\nexport default isFunction;\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Object');\n","import { supportsDataView } from './_setup.js';\nimport hasObjectTag from './_hasObjectTag.js';\n\n// In IE 10 - Edge 13, `DataView` has string tag `'[object Object]'`.\n// In IE 11, the most common among them, this problem also applies to\n// `Map`, `WeakMap` and `Set`.\n// Also, there are cases where an application can override the native\n// `DataView` object, in cases like that we can't use the constructor\n// safely and should just rely on alternate `DataView` checks\nexport var hasDataViewBug = (\n      supportsDataView && (!/\\[native code\\]/.test(String(DataView)) || hasObjectTag(new DataView(new ArrayBuffer(8))))\n    ),\n    isIE11 = (typeof Map !== 'undefined' && hasObjectTag(new Map));\n","import tagTester from './_tagTester.js';\nimport isFunction from './isFunction.js';\nimport isArrayBuffer from './isArrayBuffer.js';\nimport { hasDataViewBug } from './_stringTagBug.js';\n\nvar isDataView = tagTester('DataView');\n\n// In IE 10 - Edge 13, we need a different heuristic\n// to determine whether an object is a `DataView`.\n// Also, in cases where the native `DataView` is\n// overridden we can't rely on the tag itself.\nfunction alternateIsDataView(obj) {\n  return obj != null && isFunction(obj.getInt8) && isArrayBuffer(obj.buffer);\n}\n\nexport default (hasDataViewBug ? alternateIsDataView : isDataView);\n","import { nativeIsArray } from './_setup.js';\nimport tagTester from './_tagTester.js';\n\n// Is a given value an array?\n// Delegates to ECMA5's native `Array.isArray`.\nexport default nativeIsArray || tagTester('Array');\n","import { hasOwnProperty } from './_setup.js';\n\n// Internal function to check whether `key` is an own property name of `obj`.\nexport default function has(obj, key) {\n  return obj != null && hasOwnProperty.call(obj, key);\n}\n","import tagTester from './_tagTester.js';\nimport has from './_has.js';\n\nvar isArguments = tagTester('Arguments');\n\n// Define a fallback version of the method in browsers (ahem, IE < 9), where\n// there isn't any inspectable \"Arguments\" type.\n(function() {\n  if (!isArguments(arguments)) {\n    isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n}());\n\nexport default isArguments;\n","import { _isFinite } from './_setup.js';\nimport isSymbol from './isSymbol.js';\n\n// Is a given object a finite number?\nexport default function isFinite(obj) {\n  return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\n}\n","import { _isNaN } from './_setup.js';\nimport isNumber from './isNumber.js';\n\n// Is the given value `NaN`?\nexport default function isNaN(obj) {\n  return isNumber(obj) && _isNaN(obj);\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function constant(value) {\n  return function() {\n    return value;\n  };\n}\n","import { MAX_ARRAY_INDEX } from './_setup.js';\n\n// Common internal logic for `isArrayLike` and `isBufferLike`.\nexport default function createSizePropertyCheck(getSizeProperty) {\n  return function(collection) {\n    var sizeProperty = getSizeProperty(collection);\n    return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\n  }\n}\n","// Internal helper to generate a function to obtain property `key` from `obj`.\nexport default function shallowProperty(key) {\n  return function(obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n}\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `byteLength` property of an object.\nexport default shallowProperty('byteLength');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getByteLength from './_getByteLength.js';\n\n// Internal helper to determine whether we should spend extensive checks against\n// `ArrayBuffer` et al.\nexport default createSizePropertyCheck(getByteLength);\n","import { supportsArrayBuffer, nativeIsView, toString } from './_setup.js';\nimport isDataView from './isDataView.js';\nimport constant from './constant.js';\nimport isBufferLike from './_isBufferLike.js';\n\n// Is a given value a typed array?\nvar typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\nfunction isTypedArray(obj) {\n  // `ArrayBuffer.isView` is the most future-proof, so use it when available.\n  // Otherwise, fall back on the above regular expression.\n  return nativeIsView ? (nativeIsView(obj) && !isDataView(obj)) :\n                isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\n}\n\nexport default supportsArrayBuffer ? isTypedArray : constant(false);\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `length` property of an object.\nexport default shallowProperty('length');\n","import { nonEnumerableProps, ObjProto } from './_setup.js';\nimport isFunction from './isFunction.js';\nimport has from './_has.js';\n\n// Internal helper to create a simple lookup structure.\n// `collectNonEnumProps` used to depend on `_.contains`, but this led to\n// circular imports. `emulatedSet` is a one-off solution that only works for\n// arrays of strings.\nfunction emulatedSet(keys) {\n  var hash = {};\n  for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\n  return {\n    contains: function(key) { return hash[key] === true; },\n    push: function(key) {\n      hash[key] = true;\n      return keys.push(key);\n    }\n  };\n}\n\n// Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\n// be iterated by `for key in ...` and thus missed. Extends `keys` in place if\n// needed.\nexport default function collectNonEnumProps(obj, keys) {\n  keys = emulatedSet(keys);\n  var nonEnumIdx = nonEnumerableProps.length;\n  var constructor = obj.constructor;\n  var proto = (isFunction(constructor) && constructor.prototype) || ObjProto;\n\n  // Constructor is a special case.\n  var prop = 'constructor';\n  if (has(obj, prop) && !keys.contains(prop)) keys.push(prop);\n\n  while (nonEnumIdx--) {\n    prop = nonEnumerableProps[nonEnumIdx];\n    if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\n      keys.push(prop);\n    }\n  }\n}\n","import isObject from './isObject.js';\nimport { nativeKeys, hasEnumBug } from './_setup.js';\nimport has from './_has.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve the names of an object's own properties.\n// Delegates to **ECMAScript 5**'s native `Object.keys`.\nexport default function keys(obj) {\n  if (!isObject(obj)) return [];\n  if (nativeKeys) return nativeKeys(obj);\n  var keys = [];\n  for (var key in obj) if (has(obj, key)) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isArray from './isArray.js';\nimport isString from './isString.js';\nimport isArguments from './isArguments.js';\nimport keys from './keys.js';\n\n// Is a given array, string, or object empty?\n// An \"empty\" object has no enumerable own-properties.\nexport default function isEmpty(obj) {\n  if (obj == null) return true;\n  // Skip the more expensive `toString`-based type checks if `obj` has no\n  // `.length`.\n  var length = getLength(obj);\n  if (typeof length == 'number' && (\n    isArray(obj) || isString(obj) || isArguments(obj)\n  )) return length === 0;\n  return getLength(keys(obj)) === 0;\n}\n","import keys from './keys.js';\n\n// Returns whether an object has a given set of `key:value` pairs.\nexport default function isMatch(object, attrs) {\n  var _keys = keys(attrs), length = _keys.length;\n  if (object == null) return !length;\n  var obj = Object(object);\n  for (var i = 0; i < length; i++) {\n    var key = _keys[i];\n    if (attrs[key] !== obj[key] || !(key in obj)) return false;\n  }\n  return true;\n}\n","import { VERSION } from './_setup.js';\n\n// If Underscore is called as a function, it returns a wrapped object that can\n// be used OO-style. This wrapper holds altered versions of all functions added\n// through `_.mixin`. Wrapped objects may be chained.\nexport default function _(obj) {\n  if (obj instanceof _) return obj;\n  if (!(this instanceof _)) return new _(obj);\n  this._wrapped = obj;\n}\n\n_.VERSION = VERSION;\n\n// Extracts the result from a wrapped and chained object.\n_.prototype.value = function() {\n  return this._wrapped;\n};\n\n// Provide unwrapping proxies for some methods used in engine operations\n// such as arithmetic and JSON stringification.\n_.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n_.prototype.toString = function() {\n  return String(this._wrapped);\n};\n","import getByteLength from './_getByteLength.js';\n\n// Internal function to wrap or shallow-copy an ArrayBuffer,\n// typed array or DataView to a new view, reusing the buffer.\nexport default function toBufferView(bufferSource) {\n  return new Uint8Array(\n    bufferSource.buffer || bufferSource,\n    bufferSource.byteOffset || 0,\n    getByteLength(bufferSource)\n  );\n}\n","import _ from './underscore.js';\nimport { toString, SymbolProto } from './_setup.js';\nimport getByteLength from './_getByteLength.js';\nimport isTypedArray from './isTypedArray.js';\nimport isFunction from './isFunction.js';\nimport { hasDataViewBug }  from './_stringTagBug.js';\nimport isDataView from './isDataView.js';\nimport keys from './keys.js';\nimport has from './_has.js';\nimport toBufferView from './_toBufferView.js';\n\n// We use this string twice, so give it a name for minification.\nvar tagDataView = '[object DataView]';\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction eq(a, b, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) return a !== 0 || 1 / a === 1 / b;\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) return false;\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) return b !== b;\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n  return deepEq(a, b, aStack, bStack);\n}\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction deepEq(a, b, aStack, bStack) {\n  // Unwrap any wrapped objects.\n  if (a instanceof _) a = a._wrapped;\n  if (b instanceof _) b = b._wrapped;\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) return false;\n  // Work around a bug in IE 10 - Edge 13.\n  if (hasDataViewBug && className == '[object Object]' && isDataView(a)) {\n    if (!isDataView(b)) return false;\n    className = tagDataView;\n  }\n  switch (className) {\n    // These types are compared by value.\n    case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case '[object String]':\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return '' + a === '' + b;\n    case '[object Number]':\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) return +b !== +b;\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case '[object Date]':\n    case '[object Boolean]':\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case '[object Symbol]':\n      return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    case '[object ArrayBuffer]':\n    case tagDataView:\n      // Coerce to typed array so we can fall through.\n      return deepEq(toBufferView(a), toBufferView(b), aStack, bStack);\n  }\n\n  var areArrays = className === '[object Array]';\n  if (!areArrays && isTypedArray(a)) {\n      var byteLength = getByteLength(a);\n      if (byteLength !== getByteLength(b)) return false;\n      if (a.buffer === b.buffer && a.byteOffset === b.byteOffset) return true;\n      areArrays = true;\n  }\n  if (!areArrays) {\n    if (typeof a != 'object' || typeof b != 'object') return false;\n\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor &&\n                             isFunction(bCtor) && bCtor instanceof bCtor)\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) return bStack[length] === b;\n  }\n\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) return false;\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], aStack, bStack)) return false;\n    }\n  } else {\n    // Deep compare objects.\n    var _keys = keys(a), key;\n    length = _keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (keys(b).length !== length) return false;\n    while (length--) {\n      // Deep compare each member\n      key = _keys[length];\n      if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\n\n// Perform a deep comparison to check if two objects are equal.\nexport default function isEqual(a, b) {\n  return eq(a, b);\n}\n","import isObject from './isObject.js';\nimport { hasEnumBug } from './_setup.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve all the enumerable property names of an object.\nexport default function allKeys(obj) {\n  if (!isObject(obj)) return [];\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isFunction from './isFunction.js';\nimport allKeys from './allKeys.js';\n\n// Since the regular `Object.prototype.toString` type tests don't work for\n// some types in IE 11, we use a fingerprinting heuristic instead, based\n// on the methods. It's not great, but it's the best we got.\n// The fingerprint method lists are defined below.\nexport function ie11fingerprint(methods) {\n  var length = getLength(methods);\n  return function(obj) {\n    if (obj == null) return false;\n    // `Map`, `WeakMap` and `Set` have no enumerable keys.\n    var keys = allKeys(obj);\n    if (getLength(keys)) return false;\n    for (var i = 0; i < length; i++) {\n      if (!isFunction(obj[methods[i]])) return false;\n    }\n    // If we are testing against `WeakMap`, we need to ensure that\n    // `obj` doesn't have a `forEach` method in order to distinguish\n    // it from a regular `Map`.\n    return methods !== weakMapMethods || !isFunction(obj[forEachName]);\n  };\n}\n\n// In the interest of compact minification, we write\n// each string in the fingerprints only once.\nvar forEachName = 'forEach',\n    hasName = 'has',\n    commonInit = ['clear', 'delete'],\n    mapTail = ['get', hasName, 'set'];\n\n// `Map`, `WeakMap` and `Set` each have slightly different\n// combinations of the above sublists.\nexport var mapMethods = commonInit.concat(forEachName, mapTail),\n    weakMapMethods = commonInit.concat(mapTail),\n    setMethods = ['add'].concat(commonInit, forEachName, hasName);\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, mapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(mapMethods) : tagTester('Map');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, weakMapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(weakMapMethods) : tagTester('WeakMap');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, setMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(setMethods) : tagTester('Set');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakSet');\n","import keys from './keys.js';\n\n// Retrieve the values of an object's properties.\nexport default function values(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var values = Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[_keys[i]];\n  }\n  return values;\n}\n","import keys from './keys.js';\n\n// Convert an object into a list of `[key, value]` pairs.\n// The opposite of `_.object` with one argument.\nexport default function pairs(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var pairs = Array(length);\n  for (var i = 0; i < length; i++) {\n    pairs[i] = [_keys[i], obj[_keys[i]]];\n  }\n  return pairs;\n}\n","import keys from './keys.js';\n\n// Invert the keys and values of an object. The values must be serializable.\nexport default function invert(obj) {\n  var result = {};\n  var _keys = keys(obj);\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    result[obj[_keys[i]]] = _keys[i];\n  }\n  return result;\n}\n","import isFunction from './isFunction.js';\n\n// Return a sorted list of the function names available on the object.\nexport default function functions(obj) {\n  var names = [];\n  for (var key in obj) {\n    if (isFunction(obj[key])) names.push(key);\n  }\n  return names.sort();\n}\n","// An internal function for creating assigner functions.\nexport default function createAssigner(keysFunc, defaults) {\n  return function(obj) {\n    var length = arguments.length;\n    if (defaults) obj = Object(obj);\n    if (length < 2 || obj == null) return obj;\n    for (var index = 1; index < length; index++) {\n      var source = arguments[index],\n          keys = keysFunc(source),\n          l = keys.length;\n      for (var i = 0; i < l; i++) {\n        var key = keys[i];\n        if (!defaults || obj[key] === void 0) obj[key] = source[key];\n      }\n    }\n    return obj;\n  };\n}\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Extend a given object with all the properties in passed-in object(s).\nexport default createAssigner(allKeys);\n","import createAssigner from './_createAssigner.js';\nimport keys from './keys.js';\n\n// Assigns a given object with all the own properties in the passed-in\n// object(s).\n// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\nexport default createAssigner(keys);\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Fill in a given object with default properties.\nexport default createAssigner(allKeys, true);\n","import isObject from './isObject.js';\nimport { nativeCreate } from './_setup.js';\n\n// Create a naked function reference for surrogate-prototype-swapping.\nfunction ctor() {\n  return function(){};\n}\n\n// An internal function for creating a new object that inherits from another.\nexport default function baseCreate(prototype) {\n  if (!isObject(prototype)) return {};\n  if (nativeCreate) return nativeCreate(prototype);\n  var Ctor = ctor();\n  Ctor.prototype = prototype;\n  var result = new Ctor;\n  Ctor.prototype = null;\n  return result;\n}\n","import baseCreate from './_baseCreate.js';\nimport extendOwn from './extendOwn.js';\n\n// Creates an object that inherits from the given prototype object.\n// If additional properties are provided then they will be added to the\n// created object.\nexport default function create(prototype, props) {\n  var result = baseCreate(prototype);\n  if (props) extendOwn(result, props);\n  return result;\n}\n","import isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport extend from './extend.js';\n\n// Create a (shallow-cloned) duplicate of an object.\nexport default function clone(obj) {\n  if (!isObject(obj)) return obj;\n  return isArray(obj) ? obj.slice() : extend({}, obj);\n}\n","// Invokes `interceptor` with the `obj` and then returns `obj`.\n// The primary purpose of this method is to \"tap into\" a method chain, in\n// order to perform operations on intermediate results within the chain.\nexport default function tap(obj, interceptor) {\n  interceptor(obj);\n  return obj;\n}\n","import _ from './underscore.js';\nimport isArray from './isArray.js';\n\n// Normalize a (deep) property `path` to array.\n// Like `_.iteratee`, this function can be customized.\nexport default function toPath(path) {\n  return isArray(path) ? path : [path];\n}\n_.toPath = toPath;\n","import _ from './underscore.js';\nimport './toPath.js';\n\n// Internal wrapper for `_.toPath` to enable minification.\n// Similar to `cb` for `_.iteratee`.\nexport default function toPath(path) {\n  return _.toPath(path);\n}\n","// Internal function to obtain a nested property in `obj` along `path`.\nexport default function deepGet(obj, path) {\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    if (obj == null) return void 0;\n    obj = obj[path[i]];\n  }\n  return length ? obj : void 0;\n}\n","import toPath from './_toPath.js';\nimport deepGet from './_deepGet.js';\nimport isUndefined from './isUndefined.js';\n\n// Get the value of the (deep) property on `path` from `object`.\n// If any property in `path` does not exist or if the value is\n// `undefined`, return `defaultValue` instead.\n// The `path` is normalized through `_.toPath`.\nexport default function get(object, path, defaultValue) {\n  var value = deepGet(object, toPath(path));\n  return isUndefined(value) ? defaultValue : value;\n}\n","import _has from './_has.js';\nimport toPath from './_toPath.js';\n\n// Shortcut function for checking if an object has a given property directly on\n// itself (in other words, not on a prototype). Unlike the internal `has`\n// function, this public version can also traverse nested properties.\nexport default function has(obj, path) {\n  path = toPath(path);\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    var key = path[i];\n    if (!_has(obj, key)) return false;\n    obj = obj[key];\n  }\n  return !!length;\n}\n","// Keep the identity function around for default iteratees.\nexport default function identity(value) {\n  return value;\n}\n","import extendOwn from './extendOwn.js';\nimport isMatch from './isMatch.js';\n\n// Returns a predicate for checking whether an object has a given set of\n// `key:value` pairs.\nexport default function matcher(attrs) {\n  attrs = extendOwn({}, attrs);\n  return function(obj) {\n    return isMatch(obj, attrs);\n  };\n}\n","import deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Creates a function that, when passed an object, will traverse that objects\n// properties down the given `path`, specified as an array of keys or indices.\nexport default function property(path) {\n  path = toPath(path);\n  return function(obj) {\n    return deepGet(obj, path);\n  };\n}\n","// Internal function that returns an efficient (for current engines) version\n// of the passed-in callback, to be repeatedly applied in other Underscore\n// functions.\nexport default function optimizeCb(func, context, argCount) {\n  if (context === void 0) return func;\n  switch (argCount == null ? 3 : argCount) {\n    case 1: return function(value) {\n      return func.call(context, value);\n    };\n    // The 2-argument case is omitted because were not using it.\n    case 3: return function(value, index, collection) {\n      return func.call(context, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(context, accumulator, value, index, collection);\n    };\n  }\n  return function() {\n    return func.apply(context, arguments);\n  };\n}\n","import identity from './identity.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport matcher from './matcher.js';\nimport property from './property.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// An internal function to generate callbacks that can be applied to each\n// element in a collection, returning the desired result  either `_.identity`,\n// an arbitrary callback, a property matcher, or a property accessor.\nexport default function baseIteratee(value, context, argCount) {\n  if (value == null) return identity;\n  if (isFunction(value)) return optimizeCb(value, context, argCount);\n  if (isObject(value) && !isArray(value)) return matcher(value);\n  return property(value);\n}\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\n\n// External wrapper for our callback generator. Users may customize\n// `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n// This abstraction hides the internal-only `argCount` argument.\nexport default function iteratee(value, context) {\n  return baseIteratee(value, context, Infinity);\n}\n_.iteratee = iteratee;\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\nimport iteratee from './iteratee.js';\n\n// The function we call internally to generate a callback. It invokes\n// `_.iteratee` if overridden, otherwise `baseIteratee`.\nexport default function cb(value, context, argCount) {\n  if (_.iteratee !== iteratee) return _.iteratee(value, context);\n  return baseIteratee(value, context, argCount);\n}\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the results of applying the `iteratee` to each element of `obj`.\n// In contrast to `_.map` it returns an object.\nexport default function mapObject(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = keys(obj),\n      length = _keys.length,\n      results = {};\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys[index];\n    results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function noop(){}\n","import noop from './noop.js';\nimport get from './get.js';\n\n// Generates a function for a given object that returns a given property.\nexport default function propertyOf(obj) {\n  if (obj == null) return noop;\n  return function(path) {\n    return get(obj, path);\n  };\n}\n","import optimizeCb from './_optimizeCb.js';\n\n// Run a function **n** times.\nexport default function times(n, iteratee, context) {\n  var accum = Array(Math.max(0, n));\n  iteratee = optimizeCb(iteratee, context, 1);\n  for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n  return accum;\n}\n","// Return a random integer between `min` and `max` (inclusive).\nexport default function random(min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n","// A (possibly faster) way to get the current timestamp as an integer.\nexport default Date.now || function() {\n  return new Date().getTime();\n};\n","import keys from './keys.js';\n\n// Internal helper to generate functions for escaping and unescaping strings\n// to/from HTML interpolation.\nexport default function createEscaper(map) {\n  var escaper = function(match) {\n    return map[match];\n  };\n  // Regexes for identifying a key that needs to be escaped.\n  var source = '(?:' + keys(map).join('|') + ')';\n  var testRegexp = RegExp(source);\n  var replaceRegexp = RegExp(source, 'g');\n  return function(string) {\n    string = string == null ? '' : '' + string;\n    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n  };\n}\n","// Internal list of HTML entities for escaping.\nexport default {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n","import createEscaper from './_createEscaper.js';\nimport escapeMap from './_escapeMap.js';\n\n// Function for escaping strings to HTML interpolation.\nexport default createEscaper(escapeMap);\n","import invert from './invert.js';\nimport escapeMap from './_escapeMap.js';\n\n// Internal list of HTML entities for unescaping.\nexport default invert(escapeMap);\n","import createEscaper from './_createEscaper.js';\nimport unescapeMap from './_unescapeMap.js';\n\n// Function for unescaping strings from HTML interpolation.\nexport default createEscaper(unescapeMap);\n","import _ from './underscore.js';\n\n// By default, Underscore uses ERB-style template delimiters. Change the\n// following template settings to use alternative delimiters.\nexport default _.templateSettings = {\n  evaluate: /<%([\\s\\S]+?)%>/g,\n  interpolate: /<%=([\\s\\S]+?)%>/g,\n  escape: /<%-([\\s\\S]+?)%>/g\n};\n","import defaults from './defaults.js';\nimport _ from './underscore.js';\nimport './templateSettings.js';\n\n// When customizing `_.templateSettings`, if you don't want to define an\n// interpolation, evaluation or escaping regex, we need one that is\n// guaranteed not to match.\nvar noMatch = /(.)^/;\n\n// Certain characters need to be escaped so that they can be put into a\n// string literal.\nvar escapes = {\n  \"'\": \"'\",\n  '\\\\': '\\\\',\n  '\\r': 'r',\n  '\\n': 'n',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\nvar escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\nfunction escapeChar(match) {\n  return '\\\\' + escapes[match];\n}\n\n// In order to prevent third-party code injection through\n// `_.templateSettings.variable`, we test it against the following regular\n// expression. It is intentionally a bit more liberal than just matching valid\n// identifiers, but still prevents possible loopholes through defaults or\n// destructuring assignment.\nvar bareIdentifier = /^\\s*(\\w|\\$)+\\s*$/;\n\n// JavaScript micro-templating, similar to John Resig's implementation.\n// Underscore templating handles arbitrary delimiters, preserves whitespace,\n// and correctly escapes quotes within interpolated code.\n// NB: `oldSettings` only exists for backwards compatibility.\nexport default function template(text, settings, oldSettings) {\n  if (!settings && oldSettings) settings = oldSettings;\n  settings = defaults({}, settings, _.templateSettings);\n\n  // Combine delimiters into one regular expression via alternation.\n  var matcher = RegExp([\n    (settings.escape || noMatch).source,\n    (settings.interpolate || noMatch).source,\n    (settings.evaluate || noMatch).source\n  ].join('|') + '|$', 'g');\n\n  // Compile the template source, escaping string literals appropriately.\n  var index = 0;\n  var source = \"__p+='\";\n  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n    source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n    index = offset + match.length;\n\n    if (escape) {\n      source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n    } else if (interpolate) {\n      source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n    } else if (evaluate) {\n      source += \"';\\n\" + evaluate + \"\\n__p+='\";\n    }\n\n    // Adobe VMs need the match returned to produce the correct offset.\n    return match;\n  });\n  source += \"';\\n\";\n\n  var argument = settings.variable;\n  if (argument) {\n    // Insure against third-party code injection. (CVE-2021-23358)\n    if (!bareIdentifier.test(argument)) throw new Error(\n      'variable is not a bare identifier: ' + argument\n    );\n  } else {\n    // If a variable is not specified, place data values in local scope.\n    source = 'with(obj||{}){\\n' + source + '}\\n';\n    argument = 'obj';\n  }\n\n  source = \"var __t,__p='',__j=Array.prototype.join,\" +\n    \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n    source + 'return __p;\\n';\n\n  var render;\n  try {\n    render = new Function(argument, '_', source);\n  } catch (e) {\n    e.source = source;\n    throw e;\n  }\n\n  var template = function(data) {\n    return render.call(this, data, _);\n  };\n\n  // Provide the compiled source as a convenience for precompilation.\n  template.source = 'function(' + argument + '){\\n' + source + '}';\n\n  return template;\n}\n","import isFunction from './isFunction.js';\nimport toPath from './_toPath.js';\n\n// Traverses the children of `obj` along `path`. If a child is a function, it\n// is invoked with its parent as context. Returns the value of the final\n// child, or `fallback` if any child is undefined.\nexport default function result(obj, path, fallback) {\n  path = toPath(path);\n  var length = path.length;\n  if (!length) {\n    return isFunction(fallback) ? fallback.call(obj) : fallback;\n  }\n  for (var i = 0; i < length; i++) {\n    var prop = obj == null ? void 0 : obj[path[i]];\n    if (prop === void 0) {\n      prop = fallback;\n      i = length; // Ensure we don't continue iterating.\n    }\n    obj = isFunction(prop) ? prop.call(obj) : prop;\n  }\n  return obj;\n}\n","// Generate a unique integer id (unique within the entire client session).\n// Useful for temporary DOM ids.\nvar idCounter = 0;\nexport default function uniqueId(prefix) {\n  var id = ++idCounter + '';\n  return prefix ? prefix + id : id;\n}\n","import _ from './underscore.js';\n\n// Start chaining a wrapped Underscore object.\nexport default function chain(obj) {\n  var instance = _(obj);\n  instance._chain = true;\n  return instance;\n}\n","import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n// Internal function to execute `sourceFunc` bound to `context` with optional\n// `args`. Determines whether to execute a function as a constructor or as a\n// normal function.\nexport default function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\n  if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n  var self = baseCreate(sourceFunc.prototype);\n  var result = sourceFunc.apply(self, args);\n  if (isObject(result)) return result;\n  return self;\n}\n","import restArguments from './restArguments.js';\nimport executeBound from './_executeBound.js';\nimport _ from './underscore.js';\n\n// Partially apply a function by creating a version that has had some of its\n// arguments pre-filled, without changing its dynamic `this` context. `_` acts\n// as a placeholder by default, allowing any combination of arguments to be\n// pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\nvar partial = restArguments(function(func, boundArgs) {\n  var placeholder = partial.placeholder;\n  var bound = function() {\n    var position = 0, length = boundArgs.length;\n    var args = Array(length);\n    for (var i = 0; i < length; i++) {\n      args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n    }\n    while (position < arguments.length) args.push(arguments[position++]);\n    return executeBound(func, bound, this, this, args);\n  };\n  return bound;\n});\n\npartial.placeholder = _;\nexport default partial;\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport executeBound from './_executeBound.js';\n\n// Create a function bound to a given object (assigning `this`, and arguments,\n// optionally).\nexport default restArguments(function(func, context, args) {\n  if (!isFunction(func)) throw new TypeError('Bind must be called on a function');\n  var bound = restArguments(function(callArgs) {\n    return executeBound(func, bound, context, this, args.concat(callArgs));\n  });\n  return bound;\n});\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getLength from './_getLength.js';\n\n// Internal helper for collection methods to determine whether a collection\n// should be iterated as an array or as an object.\n// Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\nexport default createSizePropertyCheck(getLength);\n","import getLength from './_getLength.js';\nimport isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isArguments from './isArguments.js';\n\n// Internal implementation of a recursive `flatten` function.\nexport default function flatten(input, depth, strict, output) {\n  output = output || [];\n  if (!depth && depth !== 0) {\n    depth = Infinity;\n  } else if (depth <= 0) {\n    return output.concat(input);\n  }\n  var idx = output.length;\n  for (var i = 0, length = getLength(input); i < length; i++) {\n    var value = input[i];\n    if (isArrayLike(value) && (isArray(value) || isArguments(value))) {\n      // Flatten current level of array or arguments object.\n      if (depth > 1) {\n        flatten(value, depth - 1, strict, output);\n        idx = output.length;\n      } else {\n        var j = 0, len = value.length;\n        while (j < len) output[idx++] = value[j++];\n      }\n    } else if (!strict) {\n      output[idx++] = value;\n    }\n  }\n  return output;\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport bind from './bind.js';\n\n// Bind a number of an object's methods to that object. Remaining arguments\n// are the method names to be bound. Useful for ensuring that all callbacks\n// defined on an object belong to it.\nexport default restArguments(function(obj, keys) {\n  keys = flatten(keys, false, false);\n  var index = keys.length;\n  if (index < 1) throw new Error('bindAll must be passed function names');\n  while (index--) {\n    var key = keys[index];\n    obj[key] = bind(obj[key], obj);\n  }\n  return obj;\n});\n","import has from './_has.js';\n\n// Memoize an expensive function by storing its results.\nexport default function memoize(func, hasher) {\n  var memoize = function(key) {\n    var cache = memoize.cache;\n    var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n    if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n    return cache[address];\n  };\n  memoize.cache = {};\n  return memoize;\n}\n","import restArguments from './restArguments.js';\n\n// Delays a function for the given number of milliseconds, and then calls\n// it with the arguments supplied.\nexport default restArguments(function(func, wait, args) {\n  return setTimeout(function() {\n    return func.apply(null, args);\n  }, wait);\n});\n","import partial from './partial.js';\nimport delay from './delay.js';\nimport _ from './underscore.js';\n\n// Defers a function, scheduling it to run after the current call stack has\n// cleared.\nexport default partial(delay, _, 1);\n","import now from './now.js';\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nexport default function throttle(func, wait, options) {\n  var timeout, context, args, result;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function() {\n    var _now = now();\n    if (!previous && options.leading === false) previous = _now;\n    var remaining = wait - (_now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = _now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function() {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n","import restArguments from './restArguments.js';\nimport now from './now.js';\n\n// When a sequence of calls of the returned function ends, the argument\n// function is triggered. The end of a sequence is defined by the `wait`\n// parameter. If `immediate` is passed, the argument function will be\n// triggered at the beginning of the sequence instead of at the end.\nexport default function debounce(func, wait, immediate) {\n  var timeout, previous, args, result, context;\n\n  var later = function() {\n    var passed = now() - previous;\n    if (wait > passed) {\n      timeout = setTimeout(later, wait - passed);\n    } else {\n      timeout = null;\n      if (!immediate) result = func.apply(context, args);\n      // This check is needed because `func` can recursively invoke `debounced`.\n      if (!timeout) args = context = null;\n    }\n  };\n\n  var debounced = restArguments(function(_args) {\n    context = this;\n    args = _args;\n    previous = now();\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n      if (immediate) result = func.apply(context, args);\n    }\n    return result;\n  });\n\n  debounced.cancel = function() {\n    clearTimeout(timeout);\n    timeout = args = context = null;\n  };\n\n  return debounced;\n}\n","import partial from './partial.js';\n\n// Returns the first function passed as an argument to the second,\n// allowing you to adjust arguments, run code before and after, and\n// conditionally execute the original function.\nexport default function wrap(func, wrapper) {\n  return partial(wrapper, func);\n}\n","// Returns a negated version of the passed-in predicate.\nexport default function negate(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n","// Returns a function that is the composition of a list of functions, each\n// consuming the return value of the function that follows.\nexport default function compose() {\n  var args = arguments;\n  var start = args.length - 1;\n  return function() {\n    var i = start;\n    var result = args[start].apply(this, arguments);\n    while (i--) result = args[i].call(this, result);\n    return result;\n  };\n}\n","// Returns a function that will only be executed on and after the Nth call.\nexport default function after(times, func) {\n  return function() {\n    if (--times < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n}\n","// Returns a function that will only be executed up to (but not including) the\n// Nth call.\nexport default function before(times, func) {\n  var memo;\n  return function() {\n    if (--times > 0) {\n      memo = func.apply(this, arguments);\n    }\n    if (times <= 1) func = null;\n    return memo;\n  };\n}\n","import partial from './partial.js';\nimport before from './before.js';\n\n// Returns a function that will be executed at most one time, no matter how\n// often you call it. Useful for lazy initialization.\nexport default partial(before, 2);\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the first key on an object that passes a truth test.\nexport default function findKey(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = keys(obj), key;\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    key = _keys[i];\n    if (predicate(obj[key], key, obj)) return key;\n  }\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Internal function to generate `_.findIndex` and `_.findLastIndex`.\nexport default function createPredicateIndexFinder(dir) {\n  return function(array, predicate, context) {\n    predicate = cb(predicate, context);\n    var length = getLength(array);\n    var index = dir > 0 ? 0 : length - 1;\n    for (; index >= 0 && index < length; index += dir) {\n      if (predicate(array[index], index, array)) return index;\n    }\n    return -1;\n  };\n}\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the first index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(1);\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the last index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(-1);\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Use a comparator function to figure out the smallest index at which\n// an object should be inserted so as to maintain order. Uses binary search.\nexport default function sortedIndex(array, obj, iteratee, context) {\n  iteratee = cb(iteratee, context, 1);\n  var value = iteratee(obj);\n  var low = 0, high = getLength(array);\n  while (low < high) {\n    var mid = Math.floor((low + high) / 2);\n    if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n  }\n  return low;\n}\n","import getLength from './_getLength.js';\nimport { slice } from './_setup.js';\nimport isNaN from './isNaN.js';\n\n// Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\nexport default function createIndexFinder(dir, predicateFind, sortedIndex) {\n  return function(array, item, idx) {\n    var i = 0, length = getLength(array);\n    if (typeof idx == 'number') {\n      if (dir > 0) {\n        i = idx >= 0 ? idx : Math.max(idx + length, i);\n      } else {\n        length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n      }\n    } else if (sortedIndex && idx && length) {\n      idx = sortedIndex(array, item);\n      return array[idx] === item ? idx : -1;\n    }\n    if (item !== item) {\n      idx = predicateFind(slice.call(array, i, length), isNaN);\n      return idx >= 0 ? idx + i : -1;\n    }\n    for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n      if (array[idx] === item) return idx;\n    }\n    return -1;\n  };\n}\n","import sortedIndex from './sortedIndex.js';\nimport findIndex from './findIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the first occurrence of an item in an array,\n// or -1 if the item is not included in the array.\n// If the array is large and already in sort order, pass `true`\n// for **isSorted** to use binary search.\nexport default createIndexFinder(1, findIndex, sortedIndex);\n","import findLastIndex from './findLastIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the last occurrence of an item in an array,\n// or -1 if the item is not included in the array.\nexport default createIndexFinder(-1, findLastIndex);\n","import isArrayLike from './_isArrayLike.js';\nimport findIndex from './findIndex.js';\nimport findKey from './findKey.js';\n\n// Return the first value which passes a truth test.\nexport default function find(obj, predicate, context) {\n  var keyFinder = isArrayLike(obj) ? findIndex : findKey;\n  var key = keyFinder(obj, predicate, context);\n  if (key !== void 0 && key !== -1) return obj[key];\n}\n","import find from './find.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.find`: getting the first\n// object containing specific `key:value` pairs.\nexport default function findWhere(obj, attrs) {\n  return find(obj, matcher(attrs));\n}\n","import optimizeCb from './_optimizeCb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// The cornerstone for collection functions, an `each`\n// implementation, aka `forEach`.\n// Handles raw objects in addition to array-likes. Treats all\n// sparse array-likes as if they were dense.\nexport default function each(obj, iteratee, context) {\n  iteratee = optimizeCb(iteratee, context);\n  var i, length;\n  if (isArrayLike(obj)) {\n    for (i = 0, length = obj.length; i < length; i++) {\n      iteratee(obj[i], i, obj);\n    }\n  } else {\n    var _keys = keys(obj);\n    for (i = 0, length = _keys.length; i < length; i++) {\n      iteratee(obj[_keys[i]], _keys[i], obj);\n    }\n  }\n  return obj;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the results of applying the iteratee to each element.\nexport default function map(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length,\n      results = Array(length);\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    results[index] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// Internal helper to create a reducing function, iterating left or right.\nexport default function createReduce(dir) {\n  // Wrap code that reassigns argument variables in a separate function than\n  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n  var reducer = function(obj, iteratee, memo, initial) {\n    var _keys = !isArrayLike(obj) && keys(obj),\n        length = (_keys || obj).length,\n        index = dir > 0 ? 0 : length - 1;\n    if (!initial) {\n      memo = obj[_keys ? _keys[index] : index];\n      index += dir;\n    }\n    for (; index >= 0 && index < length; index += dir) {\n      var currentKey = _keys ? _keys[index] : index;\n      memo = iteratee(memo, obj[currentKey], currentKey, obj);\n    }\n    return memo;\n  };\n\n  return function(obj, iteratee, memo, context) {\n    var initial = arguments.length >= 3;\n    return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n  };\n}\n","import createReduce from './_createReduce.js';\n\n// **Reduce** builds up a single result from a list of values, aka `inject`,\n// or `foldl`.\nexport default createReduce(1);\n","import createReduce from './_createReduce.js';\n\n// The right-associative version of reduce, also known as `foldr`.\nexport default createReduce(-1);\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// Return all the elements that pass a truth test.\nexport default function filter(obj, predicate, context) {\n  var results = [];\n  predicate = cb(predicate, context);\n  each(obj, function(value, index, list) {\n    if (predicate(value, index, list)) results.push(value);\n  });\n  return results;\n}\n","import filter from './filter.js';\nimport negate from './negate.js';\nimport cb from './_cb.js';\n\n// Return all the elements for which a truth test fails.\nexport default function reject(obj, predicate, context) {\n  return filter(obj, negate(cb(predicate)), context);\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine whether all of the elements pass a truth test.\nexport default function every(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (!predicate(obj[currentKey], currentKey, obj)) return false;\n  }\n  return true;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine if at least one element in the object passes a truth test.\nexport default function some(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (predicate(obj[currentKey], currentKey, obj)) return true;\n  }\n  return false;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport indexOf from './indexOf.js';\n\n// Determine if the array or object contains a given item (using `===`).\nexport default function contains(obj, item, fromIndex, guard) {\n  if (!isArrayLike(obj)) obj = values(obj);\n  if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n  return indexOf(obj, item, fromIndex) >= 0;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport map from './map.js';\nimport deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Invoke a method (with arguments) on every item in a collection.\nexport default restArguments(function(obj, path, args) {\n  var contextPath, func;\n  if (isFunction(path)) {\n    func = path;\n  } else {\n    path = toPath(path);\n    contextPath = path.slice(0, -1);\n    path = path[path.length - 1];\n  }\n  return map(obj, function(context) {\n    var method = func;\n    if (!method) {\n      if (contextPath && contextPath.length) {\n        context = deepGet(context, contextPath);\n      }\n      if (context == null) return void 0;\n      method = context[path];\n    }\n    return method == null ? method : method.apply(context, args);\n  });\n});\n","import map from './map.js';\nimport property from './property.js';\n\n// Convenience version of a common use case of `_.map`: fetching a property.\nexport default function pluck(obj, key) {\n  return map(obj, property(key));\n}\n","import filter from './filter.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.filter`: selecting only\n// objects containing specific `key:value` pairs.\nexport default function where(obj, attrs) {\n  return filter(obj, matcher(attrs));\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the maximum element (or element-based computation).\nexport default function max(obj, iteratee, context) {\n  var result = -Infinity, lastComputed = -Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value > result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed > lastComputed || (computed === -Infinity && result === -Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the minimum element (or element-based computation).\nexport default function min(obj, iteratee, context) {\n  var result = Infinity, lastComputed = Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value < result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed < lastComputed || (computed === Infinity && result === Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArray from './isArray.js';\nimport { slice } from './_setup.js';\nimport isString from './isString.js';\nimport isArrayLike from './_isArrayLike.js';\nimport map from './map.js';\nimport identity from './identity.js';\nimport values from './values.js';\n\n// Safely create a real, live array from anything iterable.\nvar reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\nexport default function toArray(obj) {\n  if (!obj) return [];\n  if (isArray(obj)) return slice.call(obj);\n  if (isString(obj)) {\n    // Keep surrogate pair characters together.\n    return obj.match(reStrSymbol);\n  }\n  if (isArrayLike(obj)) return map(obj, identity);\n  return values(obj);\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport getLength from './_getLength.js';\nimport random from './random.js';\nimport toArray from './toArray.js';\n\n// Sample **n** random values from a collection using the modern version of the\n// [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/FisherYates_shuffle).\n// If **n** is not specified, returns a single random element.\n// The internal `guard` argument allows it to work with `_.map`.\nexport default function sample(obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = values(obj);\n    return obj[random(obj.length - 1)];\n  }\n  var sample = toArray(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n}\n","import sample from './sample.js';\n\n// Shuffle a collection.\nexport default function shuffle(obj) {\n  return sample(obj, Infinity);\n}\n","import cb from './_cb.js';\nimport pluck from './pluck.js';\nimport map from './map.js';\n\n// Sort the object's values by a criterion produced by an iteratee.\nexport default function sortBy(obj, iteratee, context) {\n  var index = 0;\n  iteratee = cb(iteratee, context);\n  return pluck(map(obj, function(value, key, list) {\n    return {\n      value: value,\n      index: index++,\n      criteria: iteratee(value, key, list)\n    };\n  }).sort(function(left, right) {\n    var a = left.criteria;\n    var b = right.criteria;\n    if (a !== b) {\n      if (a > b || a === void 0) return 1;\n      if (a < b || b === void 0) return -1;\n    }\n    return left.index - right.index;\n  }), 'value');\n}\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// An internal function used for aggregate \"group by\" operations.\nexport default function group(behavior, partition) {\n  return function(obj, iteratee, context) {\n    var result = partition ? [[], []] : {};\n    iteratee = cb(iteratee, context);\n    each(obj, function(value, index) {\n      var key = iteratee(value, index, obj);\n      behavior(result, value, key);\n    });\n    return result;\n  };\n}\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Groups the object's values by a criterion. Pass either a string attribute\n// to group by, or a function that returns the criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key].push(value); else result[key] = [value];\n});\n","import group from './_group.js';\n\n// Indexes the object's values by a criterion, similar to `_.groupBy`, but for\n// when you know that your index values will be unique.\nexport default group(function(result, value, key) {\n  result[key] = value;\n});\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Counts instances of an object that group by a certain criterion. Pass\n// either a string attribute to count by, or a function that returns the\n// criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key]++; else result[key] = 1;\n});\n","import group from './_group.js';\n\n// Split a collection into two arrays: one whose elements all pass the given\n// truth test, and one whose elements all do not pass the truth test.\nexport default group(function(result, value, pass) {\n  result[pass ? 0 : 1].push(value);\n}, true);\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the number of elements in a collection.\nexport default function size(obj) {\n  if (obj == null) return 0;\n  return isArrayLike(obj) ? obj.length : keys(obj).length;\n}\n","// Internal `_.pick` helper function to determine whether `key` is an enumerable\n// property name of `obj`.\nexport default function keyInObj(value, key, obj) {\n  return key in obj;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport optimizeCb from './_optimizeCb.js';\nimport allKeys from './allKeys.js';\nimport keyInObj from './_keyInObj.js';\nimport flatten from './_flatten.js';\n\n// Return a copy of the object only containing the allowed properties.\nexport default restArguments(function(obj, keys) {\n  var result = {}, iteratee = keys[0];\n  if (obj == null) return result;\n  if (isFunction(iteratee)) {\n    if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n    keys = allKeys(obj);\n  } else {\n    iteratee = keyInObj;\n    keys = flatten(keys, false, false);\n    obj = Object(obj);\n  }\n  for (var i = 0, length = keys.length; i < length; i++) {\n    var key = keys[i];\n    var value = obj[key];\n    if (iteratee(value, key, obj)) result[key] = value;\n  }\n  return result;\n});\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport negate from './negate.js';\nimport map from './map.js';\nimport flatten from './_flatten.js';\nimport contains from './contains.js';\nimport pick from './pick.js';\n\n// Return a copy of the object without the disallowed properties.\nexport default restArguments(function(obj, keys) {\n  var iteratee = keys[0], context;\n  if (isFunction(iteratee)) {\n    iteratee = negate(iteratee);\n    if (keys.length > 1) context = keys[1];\n  } else {\n    keys = map(flatten(keys, false, false), String);\n    iteratee = function(value, key) {\n      return !contains(keys, key);\n    };\n  }\n  return pick(obj, iteratee, context);\n});\n","import { slice } from './_setup.js';\n\n// Returns everything but the last entry of the array. Especially useful on\n// the arguments object. Passing **n** will return all the values in\n// the array, excluding the last N.\nexport default function initial(array, n, guard) {\n  return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n}\n","import initial from './initial.js';\n\n// Get the first element of an array. Passing **n** will return the first N\n// values in the array. The **guard** check allows it to work with `_.map`.\nexport default function first(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[0];\n  return initial(array, array.length - n);\n}\n","import { slice } from './_setup.js';\n\n// Returns everything but the first entry of the `array`. Especially useful on\n// the `arguments` object. Passing an **n** will return the rest N values in the\n// `array`.\nexport default function rest(array, n, guard) {\n  return slice.call(array, n == null || guard ? 1 : n);\n}\n","import rest from './rest.js';\n\n// Get the last element of an array. Passing **n** will return the last N\n// values in the array.\nexport default function last(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[array.length - 1];\n  return rest(array, Math.max(0, array.length - n));\n}\n","import filter from './filter.js';\n\n// Trim out all falsy values from an array.\nexport default function compact(array) {\n  return filter(array, Boolean);\n}\n","import _flatten from './_flatten.js';\n\n// Flatten out an array, either recursively (by default), or up to `depth`.\n// Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\nexport default function flatten(array, depth) {\n  return _flatten(array, depth, false);\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport filter from './filter.js';\nimport contains from './contains.js';\n\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\nexport default restArguments(function(array, rest) {\n  rest = flatten(rest, true, true);\n  return filter(array, function(value){\n    return !contains(rest, value);\n  });\n});\n","import restArguments from './restArguments.js';\nimport difference from './difference.js';\n\n// Return a version of the array that does not contain the specified value(s).\nexport default restArguments(function(array, otherArrays) {\n  return difference(array, otherArrays);\n});\n","import isBoolean from './isBoolean.js';\nimport cb from './_cb.js';\nimport getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// The faster algorithm will not work with an iteratee if the iteratee\n// is not a one-to-one function, so providing an iteratee will disable\n// the faster algorithm.\nexport default function uniq(array, isSorted, iteratee, context) {\n  if (!isBoolean(isSorted)) {\n    context = iteratee;\n    iteratee = isSorted;\n    isSorted = false;\n  }\n  if (iteratee != null) iteratee = cb(iteratee, context);\n  var result = [];\n  var seen = [];\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var value = array[i],\n        computed = iteratee ? iteratee(value, i, array) : value;\n    if (isSorted && !iteratee) {\n      if (!i || seen !== computed) result.push(value);\n      seen = computed;\n    } else if (iteratee) {\n      if (!contains(seen, computed)) {\n        seen.push(computed);\n        result.push(value);\n      }\n    } else if (!contains(result, value)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport uniq from './uniq.js';\nimport flatten from './_flatten.js';\n\n// Produce an array that contains the union: each distinct element from all of\n// the passed-in arrays.\nexport default restArguments(function(arrays) {\n  return uniq(flatten(arrays, true, true));\n});\n","import getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce an array that contains every item shared between all the\n// passed-in arrays.\nexport default function intersection(array) {\n  var result = [];\n  var argsLength = arguments.length;\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var item = array[i];\n    if (contains(result, item)) continue;\n    var j;\n    for (j = 1; j < argsLength; j++) {\n      if (!contains(arguments[j], item)) break;\n    }\n    if (j === argsLength) result.push(item);\n  }\n  return result;\n}\n","import max from './max.js';\nimport getLength from './_getLength.js';\nimport pluck from './pluck.js';\n\n// Complement of zip. Unzip accepts an array of arrays and groups\n// each array's elements on shared indices.\nexport default function unzip(array) {\n  var length = (array && max(array, getLength).length) || 0;\n  var result = Array(length);\n\n  for (var index = 0; index < length; index++) {\n    result[index] = pluck(array, index);\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport unzip from './unzip.js';\n\n// Zip together multiple lists into a single array -- elements that share\n// an index go together.\nexport default restArguments(unzip);\n","import getLength  from './_getLength.js';\n\n// Converts lists into objects. Pass either a single array of `[key, value]`\n// pairs, or two parallel arrays of the same length -- one of keys, and one of\n// the corresponding values. Passing by pairs is the reverse of `_.pairs`.\nexport default function object(list, values) {\n  var result = {};\n  for (var i = 0, length = getLength(list); i < length; i++) {\n    if (values) {\n      result[list[i]] = values[i];\n    } else {\n      result[list[i][0]] = list[i][1];\n    }\n  }\n  return result;\n}\n","// Generate an integer Array containing an arithmetic progression. A port of\n// the native Python `range()` function. See\n// [the Python documentation](https://docs.python.org/library/functions.html#range).\nexport default function range(start, stop, step) {\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (!step) {\n    step = stop < start ? -1 : 1;\n  }\n\n  var length = Math.max(Math.ceil((stop - start) / step), 0);\n  var range = Array(length);\n\n  for (var idx = 0; idx < length; idx++, start += step) {\n    range[idx] = start;\n  }\n\n  return range;\n}\n","import { slice } from './_setup.js';\n\n// Chunk a single array into multiple arrays, each containing `count` or fewer\n// items.\nexport default function chunk(array, count) {\n  if (count == null || count < 1) return [];\n  var result = [];\n  var i = 0, length = array.length;\n  while (i < length) {\n    result.push(slice.call(array, i, i += count));\n  }\n  return result;\n}\n","import _ from './underscore.js';\n\n// Helper function to continue chaining intermediate results.\nexport default function chainResult(instance, obj) {\n  return instance._chain ? _(obj).chain() : obj;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport functions from './functions.js';\nimport { push } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add your own custom functions to the Underscore object.\nexport default function mixin(obj) {\n  each(functions(obj), function(name) {\n    var func = _[name] = obj[name];\n    _.prototype[name] = function() {\n      var args = [this._wrapped];\n      push.apply(args, arguments);\n      return chainResult(this, func.apply(_, args));\n    };\n  });\n  return _;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport { ArrayProto } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add all mutator `Array` functions to the wrapper.\neach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) {\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) {\n        delete obj[0];\n      }\n    }\n    return chainResult(this, obj);\n  };\n});\n\n// Add all accessor `Array` functions to the wrapper.\neach(['concat', 'join', 'slice'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) obj = method.apply(obj, arguments);\n    return chainResult(this, obj);\n  };\n});\n\nexport default _;\n","// Default Export\n// ==============\n// In this module, we mix our bundled exports into the `_` object and export\n// the result. This is analogous to setting `module.exports = _` in CommonJS.\n// Hence, this module is also the entry point of our UMD bundle and the package\n// entry point for CommonJS and AMD users. In other words, this is (the source\n// of) the module you are interfacing with when you do any of the following:\n//\n// ```js\n// // CommonJS\n// var _ = require('underscore');\n//\n// // AMD\n// define(['underscore'], function(_) {...});\n//\n// // UMD in the browser\n// // _ is available as a global variable\n// ```\nimport * as allExports from './index.js';\nimport { mixin } from './index.js';\n\n// Add all of the Underscore functions to the wrapper object.\nvar _ = mixin(allExports);\n// Legacy Node.js API.\n_._ = _;\n// Export the Underscore API.\nexport default _;\n","import { extend } from 'underscore';\n\nconst auth0Config = {};\nconst kindeConfig = {};\nconst datadogConfig = {};\nconst appConfig = {};\nconst versions = {};\n\nfunction fetchConfig(success) {\n  fetch(`/appconfig.json?${ new URLSearchParams({ _: _NOW_ }) }`)\n    .then(response => response.json())\n    .then(config => {\n      extend(auth0Config, config.auth0);\n      extend(kindeConfig, config.kinde);\n      extend(datadogConfig, config.datadog);\n      extend(appConfig, config.app);\n      extend(versions, config.versions);\n      success();\n    });\n}\n\nexport {\n  auth0Config,\n  fetchConfig,\n  kindeConfig,\n  datadogConfig,\n  appConfig,\n  versions,\n};\n","/* eslint-disable local-rules/disallow-side-effects */\n/**\n * Keep references on console methods to avoid triggering patched behaviors\n *\n * NB: in some setup, console could already be patched by another SDK.\n * In this case, some display messages can be sent by the other SDK\n * but we should be safe from infinite loop nonetheless.\n */\nexport var ConsoleApiName = {\n    log: 'log',\n    debug: 'debug',\n    info: 'info',\n    warn: 'warn',\n    error: 'error',\n};\n/**\n * When building JS bundles, some users might use a plugin[1] or configuration[2] to remove\n * \"console.*\" references. This causes some issue as we expect `console.*` to be defined.\n * As a workaround, let's use a variable alias, so those expressions won't be taken into account by\n * simple static analysis.\n *\n * [1]: https://babeljs.io/docs/babel-plugin-transform-remove-console/\n * [2]: https://github.com/terser/terser#compress-options (look for drop_console)\n */\nexport var globalConsole = console;\nexport var originalConsoleMethods = {};\nObject.keys(ConsoleApiName).forEach(function (name) {\n    originalConsoleMethods[name] = globalConsole[name];\n});\nvar PREFIX = 'Datadog Browser SDK:';\nexport var display = {\n    debug: originalConsoleMethods.debug.bind(globalConsole, PREFIX),\n    log: originalConsoleMethods.log.bind(globalConsole, PREFIX),\n    info: originalConsoleMethods.info.bind(globalConsole, PREFIX),\n    warn: originalConsoleMethods.warn.bind(globalConsole, PREFIX),\n    error: originalConsoleMethods.error.bind(globalConsole, PREFIX),\n};\nexport var DOCS_ORIGIN = 'https://docs.datadoghq.com';\nexport var DOCS_TROUBLESHOOTING = \"\".concat(DOCS_ORIGIN, \"/real_user_monitoring/browser/troubleshooting\");\nexport var MORE_DETAILS = 'More details:';\n//# sourceMappingURL=display.js.map","import { display } from './display';\nexport function catchUserErrors(fn, errorMsg) {\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        try {\n            return fn.apply(void 0, args);\n        }\n        catch (err) {\n            display.error(errorMsg, err);\n        }\n    };\n}\n//# sourceMappingURL=catchUserErrors.js.map","/**\n * Return true if the draw is successful\n * @param threshold between 0 and 100\n */\nexport function performDraw(threshold) {\n    return threshold !== 0 && Math.random() * 100 <= threshold;\n}\nexport function round(num, decimals) {\n    return +num.toFixed(decimals);\n}\nexport function isPercentage(value) {\n    return isNumber(value) && value >= 0 && value <= 100;\n}\nexport function isNumber(value) {\n    return typeof value === 'number';\n}\n//# sourceMappingURL=numberUtils.js.map","import { isNumber, round } from './numberUtils';\nexport var ONE_SECOND = 1000;\nexport var ONE_MINUTE = 60 * ONE_SECOND;\nexport var ONE_HOUR = 60 * ONE_MINUTE;\nexport var ONE_DAY = 24 * ONE_HOUR;\nexport var ONE_YEAR = 365 * ONE_DAY;\nexport function relativeToClocks(relative) {\n    return { relative: relative, timeStamp: getCorrectedTimeStamp(relative) };\n}\nexport function timeStampToClocks(timeStamp) {\n    return { relative: getRelativeTime(timeStamp), timeStamp: timeStamp };\n}\nfunction getCorrectedTimeStamp(relativeTime) {\n    var correctedOrigin = (dateNow() - performance.now());\n    // apply correction only for positive drift\n    if (correctedOrigin > getNavigationStart()) {\n        return Math.round(addDuration(correctedOrigin, relativeTime));\n    }\n    return getTimeStamp(relativeTime);\n}\nexport function currentDrift() {\n    return Math.round(dateNow() - addDuration(getNavigationStart(), performance.now()));\n}\nexport function toServerDuration(duration) {\n    if (!isNumber(duration)) {\n        return duration;\n    }\n    return round(duration * 1e6, 0);\n}\nexport function dateNow() {\n    // Do not use `Date.now` because sometimes websites are wrongly \"polyfilling\" it. For example, we\n    // had some users using a very old version of `datejs`, which patched `Date.now` to return a Date\n    // instance instead of a timestamp[1]. Those users are unlikely to fix this, so let's handle this\n    // case ourselves.\n    // [1]: https://github.com/datejs/Datejs/blob/97f5c7c58c5bc5accdab8aa7602b6ac56462d778/src/core-debug.js#L14-L16\n    return new Date().getTime();\n}\nexport function timeStampNow() {\n    return dateNow();\n}\nexport function relativeNow() {\n    return performance.now();\n}\nexport function clocksNow() {\n    return { relative: relativeNow(), timeStamp: timeStampNow() };\n}\nexport function clocksOrigin() {\n    return { relative: 0, timeStamp: getNavigationStart() };\n}\nexport function elapsed(start, end) {\n    return (end - start);\n}\nexport function addDuration(a, b) {\n    return a + b;\n}\n/**\n * Get the time since the navigation was started.\n *\n * Note: this does not use `performance.timeOrigin` because it doesn't seem to reflect the actual\n * time on which the navigation has started: it may be much farther in the past, at least in Firefox 71.\n * Related issue in Firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=1429926\n */\nexport function getRelativeTime(timestamp) {\n    return (timestamp - getNavigationStart());\n}\nexport function getTimeStamp(relativeTime) {\n    return Math.round(addDuration(getNavigationStart(), relativeTime));\n}\nexport function looksLikeRelativeTime(time) {\n    return time < ONE_YEAR;\n}\n/**\n * Navigation start slightly change on some rare cases\n */\nvar navigationStart;\nfunction getNavigationStart() {\n    if (navigationStart === undefined) {\n        navigationStart = performance.timing.navigationStart;\n    }\n    return navigationStart;\n}\nexport function resetNavigationStart() {\n    navigationStart = undefined;\n}\n//# sourceMappingURL=timeUtils.js.map","export var ONE_KIBI_BYTE = 1024;\nexport var ONE_MEBI_BYTE = 1024 * ONE_KIBI_BYTE;\n// eslint-disable-next-line no-control-regex\nvar HAS_MULTI_BYTES_CHARACTERS = /[^\\u0000-\\u007F]/;\nexport function computeBytesCount(candidate) {\n    // Accurate bytes count computations can degrade performances when there is a lot of events to process\n    if (!HAS_MULTI_BYTES_CHARACTERS.test(candidate)) {\n        return candidate.length;\n    }\n    if (window.TextEncoder !== undefined) {\n        return new TextEncoder().encode(candidate).length;\n    }\n    return new Blob([candidate]).size;\n}\nexport function concatBuffers(buffers) {\n    var length = buffers.reduce(function (total, buffer) { return total + buffer.length; }, 0);\n    var result = new Uint8Array(length);\n    var offset = 0;\n    for (var _i = 0, buffers_1 = buffers; _i < buffers_1.length; _i++) {\n        var buffer = buffers_1[_i];\n        result.set(buffer, offset);\n        offset += buffer.length;\n    }\n    return result;\n}\n//# sourceMappingURL=byteUtils.js.map","export function includes(candidate, search) {\n    return candidate.indexOf(search) !== -1;\n}\nexport function arrayFrom(arrayLike) {\n    if (Array.from) {\n        return Array.from(arrayLike);\n    }\n    var array = [];\n    if (arrayLike instanceof Set) {\n        arrayLike.forEach(function (item) { return array.push(item); });\n    }\n    else {\n        for (var i = 0; i < arrayLike.length; i++) {\n            array.push(arrayLike[i]);\n        }\n    }\n    return array;\n}\nexport function find(array, predicate) {\n    for (var i = 0; i < array.length; i += 1) {\n        var item = array[i];\n        if (predicate(item, i)) {\n            return item;\n        }\n    }\n    return undefined;\n}\nexport function findLast(array, predicate) {\n    for (var i = array.length - 1; i >= 0; i -= 1) {\n        var item = array[i];\n        if (predicate(item, i, array)) {\n            return item;\n        }\n    }\n    return undefined;\n}\nexport function forEach(list, callback) {\n    Array.prototype.forEach.call(list, callback);\n}\nexport function objectValues(object) {\n    return Object.keys(object).map(function (key) { return object[key]; });\n}\nexport function objectEntries(object) {\n    return Object.keys(object).map(function (key) { return [key, object[key]]; });\n}\nexport function startsWith(candidate, search) {\n    return candidate.slice(0, search.length) === search;\n}\nexport function endsWith(candidate, search) {\n    return candidate.slice(-search.length) === search;\n}\nexport function assign(target) {\n    var toAssign = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        toAssign[_i - 1] = arguments[_i];\n    }\n    toAssign.forEach(function (source) {\n        for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n                target[key] = source[key];\n            }\n        }\n    });\n    return target;\n}\n//# sourceMappingURL=polyfills.js.map","import { assign } from './polyfills';\nexport function shallowClone(object) {\n    return assign({}, object);\n}\nexport function objectHasValue(object, value) {\n    return Object.keys(object).some(function (key) { return object[key] === value; });\n}\nexport function isEmptyObject(object) {\n    return Object.keys(object).length === 0;\n}\nexport function mapValues(object, fn) {\n    var newObject = {};\n    for (var _i = 0, _a = Object.keys(object); _i < _a.length; _i++) {\n        var key = _a[_i];\n        newObject[key] = fn(object[key]);\n    }\n    return newObject;\n}\n//# sourceMappingURL=objectUtils.js.map","/**\n * inspired by https://mathiasbynens.be/notes/globalthis\n */\nexport function getGlobalObject() {\n    if (typeof globalThis === 'object') {\n        return globalThis;\n    }\n    Object.defineProperty(Object.prototype, '_dd_temp_', {\n        get: function () {\n            return this;\n        },\n        configurable: true,\n    });\n    // @ts-ignore _dd_temp is defined using defineProperty\n    var globalObject = _dd_temp_;\n    // @ts-ignore _dd_temp is defined using defineProperty\n    delete Object.prototype._dd_temp_;\n    if (typeof globalObject !== 'object') {\n        // on safari _dd_temp_ is available on window but not globally\n        // fallback on other browser globals check\n        if (typeof self === 'object') {\n            globalObject = self;\n        }\n        else if (typeof window === 'object') {\n            globalObject = window;\n        }\n        else {\n            globalObject = {};\n        }\n    }\n    return globalObject;\n}\n//# sourceMappingURL=getGlobalObject.js.map","import { getGlobalObject } from './getGlobalObject';\n/**\n * Gets the original value for a DOM API that was potentially patched by Zone.js.\n *\n * Zone.js[1] is a library that patches a bunch of JS and DOM APIs. It usually stores the original\n * value of the patched functions/constructors/methods in a hidden property prefixed by\n * __zone_symbol__.\n *\n * In multiple occasions, we observed that Zone.js is the culprit of important issues leading to\n * browser resource exhaustion (memory leak, high CPU usage). This method is used as a workaround to\n * use the original DOM API instead of the one patched by Zone.js.\n *\n * [1]: https://github.com/angular/angular/tree/main/packages/zone.js\n */\nexport function getZoneJsOriginalValue(target, name) {\n    var browserWindow = getGlobalObject();\n    var original;\n    if (browserWindow.Zone && typeof browserWindow.Zone.__symbol__ === 'function') {\n        original = target[browserWindow.Zone.__symbol__(name)];\n    }\n    if (!original) {\n        original = target[name];\n    }\n    return original;\n}\n//# sourceMappingURL=getZoneJsOriginalValue.js.map","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { display } from './display';\nvar onMonitorErrorCollected;\nvar debugMode = false;\nexport function startMonitorErrorCollection(newOnMonitorErrorCollected) {\n    onMonitorErrorCollected = newOnMonitorErrorCollected;\n}\nexport function setDebugMode(newDebugMode) {\n    debugMode = newDebugMode;\n}\nexport function resetMonitor() {\n    onMonitorErrorCollected = undefined;\n    debugMode = false;\n}\nexport function monitored(_, __, descriptor) {\n    var originalMethod = descriptor.value;\n    descriptor.value = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var decorated = onMonitorErrorCollected ? monitor(originalMethod) : originalMethod;\n        return decorated.apply(this, args);\n    };\n}\nexport function monitor(fn) {\n    return function () {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return callMonitored(fn, this, arguments);\n    }; // consider output type has input type\n}\nexport function callMonitored(fn, context, args) {\n    try {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return fn.apply(context, args);\n    }\n    catch (e) {\n        displayIfDebugEnabled(e);\n        if (onMonitorErrorCollected) {\n            try {\n                onMonitorErrorCollected(e);\n            }\n            catch (e) {\n                displayIfDebugEnabled(e);\n            }\n        }\n    }\n}\nexport function displayIfDebugEnabled() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    if (debugMode) {\n        display.error.apply(display, __spreadArray(['[MONITOR]'], args, false));\n    }\n}\n//# sourceMappingURL=monitor.js.map","import { getZoneJsOriginalValue } from './getZoneJsOriginalValue';\nimport { monitor } from './monitor';\nimport { getGlobalObject } from './getGlobalObject';\nexport function setTimeout(callback, delay) {\n    return getZoneJsOriginalValue(getGlobalObject(), 'setTimeout')(monitor(callback), delay);\n}\nexport function clearTimeout(timeoutId) {\n    getZoneJsOriginalValue(getGlobalObject(), 'clearTimeout')(timeoutId);\n}\nexport function setInterval(callback, delay) {\n    return getZoneJsOriginalValue(getGlobalObject(), 'setInterval')(monitor(callback), delay);\n}\nexport function clearInterval(timeoutId) {\n    getZoneJsOriginalValue(getGlobalObject(), 'clearInterval')(timeoutId);\n}\n//# sourceMappingURL=timer.js.map","// eslint-disable-next-line no-restricted-syntax\nvar Observable = /** @class */ (function () {\n    function Observable(onFirstSubscribe) {\n        this.onFirstSubscribe = onFirstSubscribe;\n        this.observers = [];\n    }\n    Observable.prototype.subscribe = function (f) {\n        var _this = this;\n        this.observers.push(f);\n        if (this.observers.length === 1 && this.onFirstSubscribe) {\n            this.onLastUnsubscribe = this.onFirstSubscribe(this) || undefined;\n        }\n        return {\n            unsubscribe: function () {\n                _this.observers = _this.observers.filter(function (other) { return f !== other; });\n                if (!_this.observers.length && _this.onLastUnsubscribe) {\n                    _this.onLastUnsubscribe();\n                }\n            },\n        };\n    };\n    Observable.prototype.notify = function (data) {\n        this.observers.forEach(function (observer) { return observer(data); });\n    };\n    return Observable;\n}());\nexport { Observable };\nexport function mergeObservables() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    return new Observable(function (globalObservable) {\n        var subscriptions = observables.map(function (observable) {\n            return observable.subscribe(function (data) { return globalObservable.notify(data); });\n        });\n        return function () { return subscriptions.forEach(function (subscription) { return subscription.unsubscribe(); }); };\n    });\n}\n//# sourceMappingURL=observable.js.map","import { setTimeout, clearTimeout } from '../timer';\n// use lodash API\nexport function throttle(fn, wait, options) {\n    var needLeadingExecution = options && options.leading !== undefined ? options.leading : true;\n    var needTrailingExecution = options && options.trailing !== undefined ? options.trailing : true;\n    var inWaitPeriod = false;\n    var pendingExecutionWithParameters;\n    var pendingTimeoutId;\n    return {\n        throttled: function () {\n            var parameters = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                parameters[_i] = arguments[_i];\n            }\n            if (inWaitPeriod) {\n                pendingExecutionWithParameters = parameters;\n                return;\n            }\n            if (needLeadingExecution) {\n                fn.apply(void 0, parameters);\n            }\n            else {\n                pendingExecutionWithParameters = parameters;\n            }\n            inWaitPeriod = true;\n            pendingTimeoutId = setTimeout(function () {\n                if (needTrailingExecution && pendingExecutionWithParameters) {\n                    fn.apply(void 0, pendingExecutionWithParameters);\n                }\n                inWaitPeriod = false;\n                pendingExecutionWithParameters = undefined;\n            }, wait);\n        },\n        cancel: function () {\n            clearTimeout(pendingTimeoutId);\n            inWaitPeriod = false;\n            pendingExecutionWithParameters = undefined;\n        },\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nexport function noop() { }\n//# sourceMappingURL=functionUtils.js.map","/**\n * UUID v4\n * from https://gist.github.com/jed/982883\n */\nexport function generateUUID(placeholder) {\n    return placeholder\n        ? // eslint-disable-next-line  no-bitwise\n            (parseInt(placeholder, 10) ^ ((Math.random() * 16) >> (parseInt(placeholder, 10) / 4))).toString(16)\n        : \"\".concat(1e7, \"-\").concat(1e3, \"-\").concat(4e3, \"-\").concat(8e3, \"-\").concat(1e11).replace(/[018]/g, generateUUID);\n}\nvar COMMA_SEPARATED_KEY_VALUE = /([\\w-]+)\\s*=\\s*([^;]+)/g;\nexport function findCommaSeparatedValue(rawString, name) {\n    COMMA_SEPARATED_KEY_VALUE.lastIndex = 0;\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        var match = COMMA_SEPARATED_KEY_VALUE.exec(rawString);\n        if (match) {\n            if (match[1] === name) {\n                return match[2];\n            }\n        }\n        else {\n            break;\n        }\n    }\n}\nexport function findCommaSeparatedValues(rawString) {\n    var result = new Map();\n    COMMA_SEPARATED_KEY_VALUE.lastIndex = 0;\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        var match = COMMA_SEPARATED_KEY_VALUE.exec(rawString);\n        if (match) {\n            result.set(match[1], match[2]);\n        }\n        else {\n            break;\n        }\n    }\n    return result;\n}\nexport function safeTruncate(candidate, length, suffix) {\n    if (suffix === void 0) { suffix = ''; }\n    var lastChar = candidate.charCodeAt(length - 1);\n    var isLastCharSurrogatePair = lastChar >= 0xd800 && lastChar <= 0xdbff;\n    var correctedLength = isLastCharSurrogatePair ? length + 1 : length;\n    if (candidate.length <= correctedLength) {\n        return candidate;\n    }\n    return \"\".concat(candidate.slice(0, correctedLength)).concat(suffix);\n}\n//# sourceMappingURL=stringUtils.js.map","export function isIE() {\n    return detectBrowserCached() === 0 /* Browser.IE */;\n}\nexport function isChromium() {\n    return detectBrowserCached() === 1 /* Browser.CHROMIUM */;\n}\nexport function isSafari() {\n    return detectBrowserCached() === 2 /* Browser.SAFARI */;\n}\nvar browserCache;\nfunction detectBrowserCached() {\n    return browserCache !== null && browserCache !== void 0 ? browserCache : (browserCache = detectBrowser());\n}\n// Exported only for tests\nexport function detectBrowser(browserWindow) {\n    var _a;\n    if (browserWindow === void 0) { browserWindow = window; }\n    var userAgent = browserWindow.navigator.userAgent;\n    if (browserWindow.chrome || /HeadlessChrome/.test(userAgent)) {\n        return 1 /* Browser.CHROMIUM */;\n    }\n    if (\n    // navigator.vendor is deprecated, but it is the most resilient way we found to detect\n    // \"Apple maintained browsers\" (AKA Safari). If one day it gets removed, we still have the\n    // useragent test as a semi-working fallback.\n    ((_a = browserWindow.navigator.vendor) === null || _a === void 0 ? void 0 : _a.indexOf('Apple')) === 0 ||\n        (/safari/i.test(userAgent) && !/chrome|android/i.test(userAgent))) {\n        return 2 /* Browser.SAFARI */;\n    }\n    if (browserWindow.document.documentMode) {\n        return 0 /* Browser.IE */;\n    }\n    return 3 /* Browser.OTHER */;\n}\n//# sourceMappingURL=browserDetection.js.map","import { display } from '../tools/display';\nimport { ONE_MINUTE, ONE_SECOND } from '../tools/utils/timeUtils';\nimport { findCommaSeparatedValue, findCommaSeparatedValues, generateUUID } from '../tools/utils/stringUtils';\nexport function setCookie(name, value, expireDelay, options) {\n    var date = new Date();\n    date.setTime(date.getTime() + expireDelay);\n    var expires = \"expires=\".concat(date.toUTCString());\n    var sameSite = options && options.crossSite ? 'none' : 'strict';\n    var domain = options && options.domain ? \";domain=\".concat(options.domain) : '';\n    var secure = options && options.secure ? ';secure' : '';\n    var partitioned = options && options.partitioned ? ';partitioned' : '';\n    document.cookie = \"\".concat(name, \"=\").concat(value, \";\").concat(expires, \";path=/;samesite=\").concat(sameSite).concat(domain).concat(secure).concat(partitioned);\n}\nexport function getCookie(name) {\n    return findCommaSeparatedValue(document.cookie, name);\n}\nvar initCookieParsed;\n/**\n * Returns a cached value of the cookie. Use this during SDK initialization (and whenever possible)\n * to avoid accessing document.cookie multiple times.\n */\nexport function getInitCookie(name) {\n    if (!initCookieParsed) {\n        initCookieParsed = findCommaSeparatedValues(document.cookie);\n    }\n    return initCookieParsed.get(name);\n}\nexport function resetInitCookies() {\n    initCookieParsed = undefined;\n}\nexport function deleteCookie(name, options) {\n    setCookie(name, '', 0, options);\n}\nexport function areCookiesAuthorized(options) {\n    if (document.cookie === undefined || document.cookie === null) {\n        return false;\n    }\n    try {\n        // Use a unique cookie name to avoid issues when the SDK is initialized multiple times during\n        // the test cookie lifetime\n        var testCookieName = \"dd_cookie_test_\".concat(generateUUID());\n        var testCookieValue = 'test';\n        setCookie(testCookieName, testCookieValue, ONE_MINUTE, options);\n        var isCookieCorrectlySet = getCookie(testCookieName) === testCookieValue;\n        deleteCookie(testCookieName, options);\n        return isCookieCorrectlySet;\n    }\n    catch (error) {\n        display.error(error);\n        return false;\n    }\n}\n/**\n * No API to retrieve it, number of levels for subdomain and suffix are unknown\n * strategy: find the minimal domain on which cookies are allowed to be set\n * https://web.dev/same-site-same-origin/#site\n */\nvar getCurrentSiteCache;\nexport function getCurrentSite() {\n    if (getCurrentSiteCache === undefined) {\n        // Use a unique cookie name to avoid issues when the SDK is initialized multiple times during\n        // the test cookie lifetime\n        var testCookieName = \"dd_site_test_\".concat(generateUUID());\n        var testCookieValue = 'test';\n        var domainLevels = window.location.hostname.split('.');\n        var candidateDomain = domainLevels.pop();\n        while (domainLevels.length && !getCookie(testCookieName)) {\n            candidateDomain = \"\".concat(domainLevels.pop(), \".\").concat(candidateDomain);\n            setCookie(testCookieName, testCookieValue, ONE_SECOND, { domain: candidateDomain });\n        }\n        deleteCookie(testCookieName, { domain: candidateDomain });\n        getCurrentSiteCache = candidateDomain;\n    }\n    return getCurrentSiteCache;\n}\n//# sourceMappingURL=cookie.js.map","export var SESSION_STORE_KEY = '_dd_s';\n//# sourceMappingURL=sessionStoreStrategy.js.map","import { ONE_HOUR, ONE_MINUTE } from '../../tools/utils/timeUtils';\nexport var SESSION_TIME_OUT_DELAY = 4 * ONE_HOUR;\nexport var SESSION_EXPIRATION_DELAY = 15 * ONE_MINUTE;\n//# sourceMappingURL=sessionConstants.js.map","import { isEmptyObject } from '../../tools/utils/objectUtils';\nimport { objectEntries } from '../../tools/utils/polyfills';\nimport { dateNow } from '../../tools/utils/timeUtils';\nimport { SESSION_EXPIRATION_DELAY, SESSION_TIME_OUT_DELAY } from './sessionConstants';\nvar SESSION_ENTRY_REGEXP = /^([a-zA-Z]+)=([a-z0-9-]+)$/;\nvar SESSION_ENTRY_SEPARATOR = '&';\nexport var EXPIRED = '1';\nexport function getExpiredSessionState() {\n    return {\n        isExpired: EXPIRED,\n    };\n}\nexport function isSessionInNotStartedState(session) {\n    return isEmptyObject(session);\n}\nexport function isSessionStarted(session) {\n    return !isSessionInNotStartedState(session);\n}\nexport function isSessionInExpiredState(session) {\n    return session.isExpired !== undefined || !isActiveSession(session);\n}\n// An active session is a session in either `Tracked` or `NotTracked` state\nfunction isActiveSession(sessionState) {\n    // created and expire can be undefined for versions which was not storing them\n    // these checks could be removed when older versions will not be available/live anymore\n    return ((sessionState.created === undefined || dateNow() - Number(sessionState.created) < SESSION_TIME_OUT_DELAY) &&\n        (sessionState.expire === undefined || dateNow() < Number(sessionState.expire)));\n}\nexport function expandSessionState(session) {\n    session.expire = String(dateNow() + SESSION_EXPIRATION_DELAY);\n}\nexport function toSessionString(session) {\n    return objectEntries(session)\n        .map(function (_a) {\n        var key = _a[0], value = _a[1];\n        return \"\".concat(key, \"=\").concat(value);\n    })\n        .join(SESSION_ENTRY_SEPARATOR);\n}\nexport function toSessionState(sessionString) {\n    var session = {};\n    if (isValidSessionString(sessionString)) {\n        sessionString.split(SESSION_ENTRY_SEPARATOR).forEach(function (entry) {\n            var matches = SESSION_ENTRY_REGEXP.exec(entry);\n            if (matches !== null) {\n                var key = matches[1], value = matches[2];\n                session[key] = value;\n            }\n        });\n    }\n    return session;\n}\nfunction isValidSessionString(sessionString) {\n    return (!!sessionString &&\n        (sessionString.indexOf(SESSION_ENTRY_SEPARATOR) !== -1 || SESSION_ENTRY_REGEXP.test(sessionString)));\n}\n//# sourceMappingURL=sessionState.js.map","import { getInitCookie } from '../../browser/cookie';\nimport { SESSION_STORE_KEY } from './storeStrategies/sessionStoreStrategy';\nimport { expandSessionState, isSessionStarted } from './sessionState';\nexport var OLD_SESSION_COOKIE_NAME = '_dd';\nexport var OLD_RUM_COOKIE_NAME = '_dd_r';\nexport var OLD_LOGS_COOKIE_NAME = '_dd_l';\n// duplicate values to avoid dependency issues\nexport var RUM_SESSION_KEY = 'rum';\nexport var LOGS_SESSION_KEY = 'logs';\n/**\n * This migration should remain in the codebase as long as older versions are available/live\n * to allow older sdk versions to be upgraded to newer versions without compatibility issues.\n */\nexport function tryOldCookiesMigration(cookieStoreStrategy) {\n    var sessionString = getInitCookie(SESSION_STORE_KEY);\n    if (!sessionString) {\n        var oldSessionId = getInitCookie(OLD_SESSION_COOKIE_NAME);\n        var oldRumType = getInitCookie(OLD_RUM_COOKIE_NAME);\n        var oldLogsType = getInitCookie(OLD_LOGS_COOKIE_NAME);\n        var session = {};\n        if (oldSessionId) {\n            session.id = oldSessionId;\n        }\n        if (oldLogsType && /^[01]$/.test(oldLogsType)) {\n            session[LOGS_SESSION_KEY] = oldLogsType;\n        }\n        if (oldRumType && /^[012]$/.test(oldRumType)) {\n            session[RUM_SESSION_KEY] = oldRumType;\n        }\n        if (isSessionStarted(session)) {\n            expandSessionState(session);\n            cookieStoreStrategy.persistSession(session);\n        }\n    }\n}\n//# sourceMappingURL=oldCookiesMigration.js.map","import { isChromium } from '../../../tools/utils/browserDetection';\nimport { getCurrentSite, areCookiesAuthorized, getCookie, setCookie } from '../../../browser/cookie';\nimport { tryOldCookiesMigration } from '../oldCookiesMigration';\nimport { SESSION_EXPIRATION_DELAY, SESSION_TIME_OUT_DELAY } from '../sessionConstants';\nimport { toSessionString, toSessionState, getExpiredSessionState } from '../sessionState';\nimport { SESSION_STORE_KEY } from './sessionStoreStrategy';\nexport function selectCookieStrategy(initConfiguration) {\n    var cookieOptions = buildCookieOptions(initConfiguration);\n    return areCookiesAuthorized(cookieOptions) ? { type: 'Cookie', cookieOptions: cookieOptions } : undefined;\n}\nexport function initCookieStrategy(cookieOptions) {\n    var cookieStore = {\n        /**\n         * Lock strategy allows mitigating issues due to concurrent access to cookie.\n         * This issue concerns only chromium browsers and enabling this on firefox increases cookie write failures.\n         */\n        isLockEnabled: isChromium(),\n        persistSession: persistSessionCookie(cookieOptions),\n        retrieveSession: retrieveSessionCookie,\n        expireSession: function () { return expireSessionCookie(cookieOptions); },\n    };\n    tryOldCookiesMigration(cookieStore);\n    return cookieStore;\n}\nfunction persistSessionCookie(options) {\n    return function (session) {\n        setCookie(SESSION_STORE_KEY, toSessionString(session), SESSION_EXPIRATION_DELAY, options);\n    };\n}\nfunction expireSessionCookie(options) {\n    setCookie(SESSION_STORE_KEY, toSessionString(getExpiredSessionState()), SESSION_TIME_OUT_DELAY, options);\n}\nfunction retrieveSessionCookie() {\n    var sessionString = getCookie(SESSION_STORE_KEY);\n    return toSessionState(sessionString);\n}\nexport function buildCookieOptions(initConfiguration) {\n    var cookieOptions = {};\n    cookieOptions.secure =\n        !!initConfiguration.useSecureSessionCookie ||\n            !!initConfiguration.usePartitionedCrossSiteSessionCookie ||\n            !!initConfiguration.useCrossSiteSessionCookie;\n    cookieOptions.crossSite =\n        !!initConfiguration.usePartitionedCrossSiteSessionCookie || !!initConfiguration.useCrossSiteSessionCookie;\n    cookieOptions.partitioned = !!initConfiguration.usePartitionedCrossSiteSessionCookie;\n    if (initConfiguration.trackSessionAcrossSubdomains) {\n        cookieOptions.domain = getCurrentSite();\n    }\n    return cookieOptions;\n}\n//# sourceMappingURL=sessionInCookie.js.map","import { generateUUID } from '../../../tools/utils/stringUtils';\nimport { toSessionString, toSessionState, getExpiredSessionState } from '../sessionState';\nimport { SESSION_STORE_KEY } from './sessionStoreStrategy';\nvar LOCAL_STORAGE_TEST_KEY = '_dd_test_';\nexport function selectLocalStorageStrategy() {\n    try {\n        var id = generateUUID();\n        var testKey = \"\".concat(LOCAL_STORAGE_TEST_KEY).concat(id);\n        localStorage.setItem(testKey, id);\n        var retrievedId = localStorage.getItem(testKey);\n        localStorage.removeItem(testKey);\n        return id === retrievedId ? { type: 'LocalStorage' } : undefined;\n    }\n    catch (e) {\n        return undefined;\n    }\n}\nexport function initLocalStorageStrategy() {\n    return {\n        isLockEnabled: false,\n        persistSession: persistInLocalStorage,\n        retrieveSession: retrieveSessionFromLocalStorage,\n        expireSession: expireSessionFromLocalStorage,\n    };\n}\nfunction persistInLocalStorage(sessionState) {\n    localStorage.setItem(SESSION_STORE_KEY, toSessionString(sessionState));\n}\nfunction retrieveSessionFromLocalStorage() {\n    var sessionString = localStorage.getItem(SESSION_STORE_KEY);\n    return toSessionState(sessionString);\n}\nfunction expireSessionFromLocalStorage() {\n    persistInLocalStorage(getExpiredSessionState());\n}\n//# sourceMappingURL=sessionInLocalStorage.js.map","import { setTimeout } from '../../tools/timer';\nimport { generateUUID } from '../../tools/utils/stringUtils';\nimport { assign } from '../../tools/utils/polyfills';\nimport { expandSessionState, isSessionInExpiredState } from './sessionState';\nexport var LOCK_RETRY_DELAY = 10;\nexport var LOCK_MAX_TRIES = 100;\nvar bufferedOperations = [];\nvar ongoingOperations;\nexport function processSessionStoreOperations(operations, sessionStoreStrategy, numberOfRetries) {\n    var _a;\n    if (numberOfRetries === void 0) { numberOfRetries = 0; }\n    var isLockEnabled = sessionStoreStrategy.isLockEnabled, persistSession = sessionStoreStrategy.persistSession, expireSession = sessionStoreStrategy.expireSession;\n    var persistWithLock = function (session) { return persistSession(assign({}, session, { lock: currentLock })); };\n    var retrieveStore = function () {\n        var session = sessionStoreStrategy.retrieveSession();\n        var lock = session.lock;\n        if (session.lock) {\n            delete session.lock;\n        }\n        return {\n            session: session,\n            lock: lock,\n        };\n    };\n    if (!ongoingOperations) {\n        ongoingOperations = operations;\n    }\n    if (operations !== ongoingOperations) {\n        bufferedOperations.push(operations);\n        return;\n    }\n    if (isLockEnabled && numberOfRetries >= LOCK_MAX_TRIES) {\n        next(sessionStoreStrategy);\n        return;\n    }\n    var currentLock;\n    var currentStore = retrieveStore();\n    if (isLockEnabled) {\n        // if someone has lock, retry later\n        if (currentStore.lock) {\n            retryLater(operations, sessionStoreStrategy, numberOfRetries);\n            return;\n        }\n        // acquire lock\n        currentLock = generateUUID();\n        persistWithLock(currentStore.session);\n        // if lock is not acquired, retry later\n        currentStore = retrieveStore();\n        if (currentStore.lock !== currentLock) {\n            retryLater(operations, sessionStoreStrategy, numberOfRetries);\n            return;\n        }\n    }\n    var processedSession = operations.process(currentStore.session);\n    if (isLockEnabled) {\n        // if lock corrupted after process, retry later\n        currentStore = retrieveStore();\n        if (currentStore.lock !== currentLock) {\n            retryLater(operations, sessionStoreStrategy, numberOfRetries);\n            return;\n        }\n    }\n    if (processedSession) {\n        if (isSessionInExpiredState(processedSession)) {\n            expireSession();\n        }\n        else {\n            expandSessionState(processedSession);\n            isLockEnabled ? persistWithLock(processedSession) : persistSession(processedSession);\n        }\n    }\n    if (isLockEnabled) {\n        // correctly handle lock around expiration would require to handle this case properly at several levels\n        // since we don't have evidence of lock issues around expiration, let's just not do the corruption check for it\n        if (!(processedSession && isSessionInExpiredState(processedSession))) {\n            // if lock corrupted after persist, retry later\n            currentStore = retrieveStore();\n            if (currentStore.lock !== currentLock) {\n                retryLater(operations, sessionStoreStrategy, numberOfRetries);\n                return;\n            }\n            persistSession(currentStore.session);\n            processedSession = currentStore.session;\n        }\n    }\n    // call after even if session is not persisted in order to perform operations on\n    // up-to-date session state value => the value could have been modified by another tab\n    (_a = operations.after) === null || _a === void 0 ? void 0 : _a.call(operations, processedSession || currentStore.session);\n    next(sessionStoreStrategy);\n}\nfunction retryLater(operations, sessionStore, currentNumberOfRetries) {\n    setTimeout(function () {\n        processSessionStoreOperations(operations, sessionStore, currentNumberOfRetries + 1);\n    }, LOCK_RETRY_DELAY);\n}\nfunction next(sessionStore) {\n    ongoingOperations = undefined;\n    var nextOperations = bufferedOperations.shift();\n    if (nextOperations) {\n        processSessionStoreOperations(nextOperations, sessionStore);\n    }\n}\n//# sourceMappingURL=sessionStoreOperations.js.map","import { clearInterval, setInterval } from '../../tools/timer';\nimport { Observable } from '../../tools/observable';\nimport { ONE_SECOND, dateNow } from '../../tools/utils/timeUtils';\nimport { throttle } from '../../tools/utils/functionUtils';\nimport { generateUUID } from '../../tools/utils/stringUtils';\nimport { assign } from '../../tools/utils/polyfills';\nimport { selectCookieStrategy, initCookieStrategy } from './storeStrategies/sessionInCookie';\nimport { getExpiredSessionState, isSessionInExpiredState, isSessionInNotStartedState, isSessionStarted, } from './sessionState';\nimport { initLocalStorageStrategy, selectLocalStorageStrategy } from './storeStrategies/sessionInLocalStorage';\nimport { processSessionStoreOperations } from './sessionStoreOperations';\n/**\n * Every second, the storage will be polled to check for any change that can occur\n * to the session state in another browser tab, or another window.\n * This value has been determined from our previous cookie-only implementation.\n */\nexport var STORAGE_POLL_DELAY = ONE_SECOND;\n/**\n * Checks if cookies are available as the preferred storage\n * Else, checks if LocalStorage is allowed and available\n */\nexport function selectSessionStoreStrategyType(initConfiguration) {\n    var sessionStoreStrategyType = selectCookieStrategy(initConfiguration);\n    if (!sessionStoreStrategyType && initConfiguration.allowFallbackToLocalStorage) {\n        sessionStoreStrategyType = selectLocalStorageStrategy();\n    }\n    return sessionStoreStrategyType;\n}\n/**\n * Different session concepts:\n * - tracked, the session has an id and is updated along the user navigation\n * - not tracked, the session does not have an id but it is updated along the user navigation\n * - inactive, no session in store or session expired, waiting for a renew session\n */\nexport function startSessionStore(sessionStoreStrategyType, productKey, computeSessionState) {\n    var renewObservable = new Observable();\n    var expireObservable = new Observable();\n    var sessionStateUpdateObservable = new Observable();\n    var sessionStoreStrategy = sessionStoreStrategyType.type === 'Cookie'\n        ? initCookieStrategy(sessionStoreStrategyType.cookieOptions)\n        : initLocalStorageStrategy();\n    var expireSession = sessionStoreStrategy.expireSession;\n    var watchSessionTimeoutId = setInterval(watchSession, STORAGE_POLL_DELAY);\n    var sessionCache;\n    startSession();\n    var _a = throttle(function () {\n        processSessionStoreOperations({\n            process: function (sessionState) {\n                if (isSessionInNotStartedState(sessionState)) {\n                    return;\n                }\n                var synchronizedSession = synchronizeSession(sessionState);\n                expandOrRenewSessionState(synchronizedSession);\n                return synchronizedSession;\n            },\n            after: function (sessionState) {\n                if (isSessionStarted(sessionState) && !hasSessionInCache()) {\n                    renewSessionInCache(sessionState);\n                }\n                sessionCache = sessionState;\n            },\n        }, sessionStoreStrategy);\n    }, STORAGE_POLL_DELAY), throttledExpandOrRenewSession = _a.throttled, cancelExpandOrRenewSession = _a.cancel;\n    function expandSession() {\n        processSessionStoreOperations({\n            process: function (sessionState) { return (hasSessionInCache() ? synchronizeSession(sessionState) : undefined); },\n        }, sessionStoreStrategy);\n    }\n    /**\n     * allows two behaviors:\n     * - if the session is active, synchronize the session cache without updating the session store\n     * - if the session is not active, clear the session store and expire the session cache\n     */\n    function watchSession() {\n        processSessionStoreOperations({\n            process: function (sessionState) { return (isSessionInExpiredState(sessionState) ? getExpiredSessionState() : undefined); },\n            after: synchronizeSession,\n        }, sessionStoreStrategy);\n    }\n    function synchronizeSession(sessionState) {\n        if (isSessionInExpiredState(sessionState)) {\n            sessionState = getExpiredSessionState();\n        }\n        if (hasSessionInCache()) {\n            if (isSessionInCacheOutdated(sessionState)) {\n                expireSessionInCache();\n            }\n            else {\n                sessionStateUpdateObservable.notify({ previousState: sessionCache, newState: sessionState });\n                sessionCache = sessionState;\n            }\n        }\n        return sessionState;\n    }\n    function startSession() {\n        processSessionStoreOperations({\n            process: function (sessionState) {\n                if (isSessionInNotStartedState(sessionState)) {\n                    return getExpiredSessionState();\n                }\n            },\n            after: function (sessionState) {\n                sessionCache = sessionState;\n            },\n        }, sessionStoreStrategy);\n    }\n    function expandOrRenewSessionState(sessionState) {\n        if (isSessionInNotStartedState(sessionState)) {\n            return false;\n        }\n        var _a = computeSessionState(sessionState[productKey]), trackingType = _a.trackingType, isTracked = _a.isTracked;\n        sessionState[productKey] = trackingType;\n        delete sessionState.isExpired;\n        if (isTracked && !sessionState.id) {\n            sessionState.id = generateUUID();\n            sessionState.created = String(dateNow());\n        }\n    }\n    function hasSessionInCache() {\n        return sessionCache[productKey] !== undefined;\n    }\n    function isSessionInCacheOutdated(sessionState) {\n        return sessionCache.id !== sessionState.id || sessionCache[productKey] !== sessionState[productKey];\n    }\n    function expireSessionInCache() {\n        sessionCache = getExpiredSessionState();\n        expireObservable.notify();\n    }\n    function renewSessionInCache(sessionState) {\n        sessionCache = sessionState;\n        renewObservable.notify();\n    }\n    function updateSessionState(partialSessionState) {\n        processSessionStoreOperations({\n            process: function (sessionState) { return assign({}, sessionState, partialSessionState); },\n            after: synchronizeSession,\n        }, sessionStoreStrategy);\n    }\n    return {\n        expandOrRenewSession: throttledExpandOrRenewSession,\n        expandSession: expandSession,\n        getSession: function () { return sessionCache; },\n        renewObservable: renewObservable,\n        expireObservable: expireObservable,\n        sessionStateUpdateObservable: sessionStateUpdateObservable,\n        restartSession: startSession,\n        expire: function () {\n            cancelExpandOrRenewSession();\n            expireSession();\n            synchronizeSession(getExpiredSessionState());\n        },\n        stop: function () {\n            clearInterval(watchSessionTimeoutId);\n        },\n        updateSessionState: updateSessionState,\n    };\n}\n//# sourceMappingURL=sessionStore.js.map","import { Observable } from '../tools/observable';\nexport var TrackingConsent = {\n    GRANTED: 'granted',\n    NOT_GRANTED: 'not-granted',\n};\nexport function createTrackingConsentState(currentConsent) {\n    var observable = new Observable();\n    return {\n        tryToInit: function (trackingConsent) {\n            if (!currentConsent) {\n                currentConsent = trackingConsent;\n            }\n        },\n        update: function (trackingConsent) {\n            currentConsent = trackingConsent;\n            observable.notify();\n        },\n        isGranted: function () {\n            return currentConsent === TrackingConsent.GRANTED;\n        },\n        observable: observable,\n    };\n}\n//# sourceMappingURL=trackingConsent.js.map","import { noop } from '../utils/functionUtils';\n/**\n * Custom implementation of JSON.stringify that ignores some toJSON methods. We need to do that\n * because some sites badly override toJSON on certain objects. Removing all toJSON methods from\n * nested values would be too costly, so we just detach them from the root value, and native classes\n * used to build JSON values (Array and Object).\n *\n * Note: this still assumes that JSON.stringify is correct.\n */\nexport function jsonStringify(value, replacer, space) {\n    if (typeof value !== 'object' || value === null) {\n        return JSON.stringify(value);\n    }\n    // Note: The order matter here. We need to detach toJSON methods on parent classes before their\n    // subclasses.\n    var restoreObjectPrototypeToJson = detachToJsonMethod(Object.prototype);\n    var restoreArrayPrototypeToJson = detachToJsonMethod(Array.prototype);\n    var restoreValuePrototypeToJson = detachToJsonMethod(Object.getPrototypeOf(value));\n    var restoreValueToJson = detachToJsonMethod(value);\n    try {\n        return JSON.stringify(value, replacer, space);\n    }\n    catch (_a) {\n        return '<error: unable to serialize object>';\n    }\n    finally {\n        restoreObjectPrototypeToJson();\n        restoreArrayPrototypeToJson();\n        restoreValuePrototypeToJson();\n        restoreValueToJson();\n    }\n}\nexport function detachToJsonMethod(value) {\n    var object = value;\n    var objectToJson = object.toJSON;\n    if (objectToJson) {\n        delete object.toJSON;\n        return function () {\n            object.toJSON = objectToJson;\n        };\n    }\n    return noop;\n}\n//# sourceMappingURL=jsonStringify.js.map","import { jsonStringify } from '../serialisation/jsonStringify';\nexport function normalizeUrl(url) {\n    return buildUrl(url, location.href).href;\n}\nexport function isValidUrl(url) {\n    try {\n        return !!buildUrl(url);\n    }\n    catch (_a) {\n        return false;\n    }\n}\nexport function getPathName(url) {\n    var pathname = buildUrl(url).pathname;\n    return pathname[0] === '/' ? pathname : \"/\".concat(pathname);\n}\nexport function buildUrl(url, base) {\n    var supportedURL = getSupportedUrl();\n    if (supportedURL) {\n        try {\n            return base !== undefined ? new supportedURL(url, base) : new supportedURL(url);\n        }\n        catch (error) {\n            throw new Error(\"Failed to construct URL: \".concat(String(error), \" \").concat(jsonStringify({ url: url, base: base })));\n        }\n    }\n    if (base === undefined && !/:/.test(url)) {\n        throw new Error(\"Invalid URL: '\".concat(url, \"'\"));\n    }\n    var doc = document;\n    var anchorElement = doc.createElement('a');\n    if (base !== undefined) {\n        doc = document.implementation.createHTMLDocument('');\n        var baseElement = doc.createElement('base');\n        baseElement.href = base;\n        doc.head.appendChild(baseElement);\n        doc.body.appendChild(anchorElement);\n    }\n    anchorElement.href = url;\n    return anchorElement;\n}\nvar originalURL = URL;\nvar isURLSupported;\nfunction getSupportedUrl() {\n    if (isURLSupported === undefined) {\n        try {\n            var url = new originalURL('http://test/path');\n            isURLSupported = url.href === 'http://test/path';\n        }\n        catch (_a) {\n            isURLSupported = false;\n        }\n    }\n    return isURLSupported ? originalURL : undefined;\n}\n//# sourceMappingURL=urlPolyfill.js.map","export var INTAKE_SITE_STAGING = 'datad0g.com';\nexport var INTAKE_SITE_FED_STAGING = 'dd0g-gov.com';\nexport var INTAKE_SITE_US1 = 'datadoghq.com';\nexport var INTAKE_SITE_EU1 = 'datadoghq.eu';\nexport var INTAKE_SITE_US1_FED = 'ddog-gov.com';\nexport var PCI_INTAKE_HOST_US1 = 'pci.browser-intake-datadoghq.com';\n//# sourceMappingURL=intakeSites.js.map","import { timeStampNow } from '../../tools/utils/timeUtils';\nimport { normalizeUrl } from '../../tools/utils/urlPolyfill';\nimport { generateUUID } from '../../tools/utils/stringUtils';\nimport { INTAKE_SITE_US1, INTAKE_SITE_FED_STAGING, PCI_INTAKE_HOST_US1 } from './intakeSites';\nexport function createEndpointBuilder(initConfiguration, trackType, configurationTags) {\n    var buildUrlWithParameters = createEndpointUrlWithParametersBuilder(initConfiguration, trackType);\n    return {\n        build: function (api, payload) {\n            var parameters = buildEndpointParameters(initConfiguration, trackType, configurationTags, api, payload);\n            return buildUrlWithParameters(parameters);\n        },\n        urlPrefix: buildUrlWithParameters(''),\n        trackType: trackType,\n    };\n}\n/**\n * Create a function used to build a full endpoint url from provided parameters. The goal of this\n * function is to pre-compute some parts of the URL to avoid re-computing everything on every\n * request, as only parameters are changing.\n */\nfunction createEndpointUrlWithParametersBuilder(initConfiguration, trackType) {\n    var path = \"/api/v2/\".concat(trackType);\n    var proxy = initConfiguration.proxy;\n    if (typeof proxy === 'string') {\n        var normalizedProxyUrl_1 = normalizeUrl(proxy);\n        return function (parameters) { return \"\".concat(normalizedProxyUrl_1, \"?ddforward=\").concat(encodeURIComponent(\"\".concat(path, \"?\").concat(parameters))); };\n    }\n    if (typeof proxy === 'function') {\n        return function (parameters) { return proxy({ path: path, parameters: parameters }); };\n    }\n    var host = buildEndpointHost(trackType, initConfiguration);\n    return function (parameters) { return \"https://\".concat(host).concat(path, \"?\").concat(parameters); };\n}\nfunction buildEndpointHost(trackType, initConfiguration) {\n    var _a = initConfiguration.site, site = _a === void 0 ? INTAKE_SITE_US1 : _a, internalAnalyticsSubdomain = initConfiguration.internalAnalyticsSubdomain;\n    if (trackType === 'logs' && initConfiguration.usePciIntake && site === INTAKE_SITE_US1) {\n        return PCI_INTAKE_HOST_US1;\n    }\n    if (internalAnalyticsSubdomain && site === INTAKE_SITE_US1) {\n        return \"\".concat(internalAnalyticsSubdomain, \".\").concat(INTAKE_SITE_US1);\n    }\n    if (site === INTAKE_SITE_FED_STAGING) {\n        return \"http-intake.logs.\".concat(site);\n    }\n    var domainParts = site.split('.');\n    var extension = domainParts.pop();\n    return \"browser-intake-\".concat(domainParts.join('-'), \".\").concat(extension);\n}\n/**\n * Build parameters to be used for an intake request. Parameters should be re-built for each\n * request, as they change randomly.\n */\nfunction buildEndpointParameters(_a, trackType, configurationTags, api, _b) {\n    var clientToken = _a.clientToken, internalAnalyticsSubdomain = _a.internalAnalyticsSubdomain;\n    var retry = _b.retry, encoding = _b.encoding;\n    var tags = [\"sdk_version:\".concat(\"5.23.3\"), \"api:\".concat(api)].concat(configurationTags);\n    if (retry) {\n        tags.push(\"retry_count:\".concat(retry.count), \"retry_after:\".concat(retry.lastFailureStatus));\n    }\n    var parameters = [\n        'ddsource=browser',\n        \"ddtags=\".concat(encodeURIComponent(tags.join(','))),\n        \"dd-api-key=\".concat(clientToken),\n        \"dd-evp-origin-version=\".concat(encodeURIComponent(\"5.23.3\")),\n        'dd-evp-origin=browser',\n        \"dd-request-id=\".concat(generateUUID()),\n    ];\n    if (encoding) {\n        parameters.push(\"dd-evp-encoding=\".concat(encoding));\n    }\n    if (trackType === 'rum') {\n        parameters.push(\"batch_time=\".concat(timeStampNow()));\n    }\n    if (internalAnalyticsSubdomain) {\n        parameters.reverse();\n    }\n    return parameters.join('&');\n}\n//# sourceMappingURL=endpointBuilder.js.map","import { DOCS_ORIGIN, MORE_DETAILS, display } from '../../tools/display';\nexport var TAG_SIZE_LIMIT = 200;\nexport function buildTags(configuration) {\n    var env = configuration.env, service = configuration.service, version = configuration.version, datacenter = configuration.datacenter;\n    var tags = [];\n    if (env) {\n        tags.push(buildTag('env', env));\n    }\n    if (service) {\n        tags.push(buildTag('service', service));\n    }\n    if (version) {\n        tags.push(buildTag('version', version));\n    }\n    if (datacenter) {\n        tags.push(buildTag('datacenter', datacenter));\n    }\n    return tags;\n}\nvar FORBIDDEN_CHARACTERS = /[^a-z0-9_:./-]/;\nexport function buildTag(key, rawValue) {\n    // See https://docs.datadoghq.com/getting_started/tagging/#defining-tags for tags syntax. Note\n    // that the backend may not follow the exact same rules, so we only want to display an informal\n    // warning.\n    var valueSizeLimit = TAG_SIZE_LIMIT - key.length - 1;\n    if (rawValue.length > valueSizeLimit || FORBIDDEN_CHARACTERS.test(rawValue)) {\n        display.warn(\"\".concat(key, \" value doesn't meet tag requirements and will be sanitized. \").concat(MORE_DETAILS, \" \").concat(DOCS_ORIGIN, \"/getting_started/tagging/#defining-tags\"));\n    }\n    // Let the backend do most of the sanitization, but still make sure multiple tags can't be crafted\n    // by forging a value containing commas.\n    var sanitizedValue = rawValue.replace(/,/g, '_');\n    return \"\".concat(key, \":\").concat(sanitizedValue);\n}\n//# sourceMappingURL=tags.js.map","import { objectValues, assign } from '../../tools/utils/polyfills';\nimport { createEndpointBuilder } from './endpointBuilder';\nimport { buildTags } from './tags';\nimport { INTAKE_SITE_US1, PCI_INTAKE_HOST_US1 } from './intakeSites';\nexport function computeTransportConfiguration(initConfiguration) {\n    var site = initConfiguration.site || INTAKE_SITE_US1;\n    var tags = buildTags(initConfiguration);\n    var endpointBuilders = computeEndpointBuilders(initConfiguration, tags);\n    var intakeUrlPrefixes = computeIntakeUrlPrefixes(endpointBuilders, site);\n    var replicaConfiguration = computeReplicaConfiguration(initConfiguration, intakeUrlPrefixes, tags);\n    return assign({\n        isIntakeUrl: function (url) { return intakeUrlPrefixes.some(function (intakeEndpoint) { return url.indexOf(intakeEndpoint) === 0; }); },\n        replica: replicaConfiguration,\n        site: site,\n    }, endpointBuilders);\n}\nfunction computeEndpointBuilders(initConfiguration, tags) {\n    return {\n        logsEndpointBuilder: createEndpointBuilder(initConfiguration, 'logs', tags),\n        rumEndpointBuilder: createEndpointBuilder(initConfiguration, 'rum', tags),\n        sessionReplayEndpointBuilder: createEndpointBuilder(initConfiguration, 'replay', tags),\n    };\n}\nfunction computeReplicaConfiguration(initConfiguration, intakeUrlPrefixes, tags) {\n    if (!initConfiguration.replica) {\n        return;\n    }\n    var replicaConfiguration = assign({}, initConfiguration, {\n        site: INTAKE_SITE_US1,\n        clientToken: initConfiguration.replica.clientToken,\n    });\n    var replicaEndpointBuilders = {\n        logsEndpointBuilder: createEndpointBuilder(replicaConfiguration, 'logs', tags),\n        rumEndpointBuilder: createEndpointBuilder(replicaConfiguration, 'rum', tags),\n    };\n    intakeUrlPrefixes.push.apply(intakeUrlPrefixes, objectValues(replicaEndpointBuilders).map(function (builder) { return builder.urlPrefix; }));\n    return assign({ applicationId: initConfiguration.replica.applicationId }, replicaEndpointBuilders);\n}\nfunction computeIntakeUrlPrefixes(endpointBuilders, site) {\n    var intakeUrlPrefixes = objectValues(endpointBuilders).map(function (builder) { return builder.urlPrefix; });\n    if (site === INTAKE_SITE_US1) {\n        intakeUrlPrefixes.push(\"https://\".concat(PCI_INTAKE_HOST_US1, \"/\"));\n    }\n    return intakeUrlPrefixes;\n}\n//# sourceMappingURL=transportConfiguration.js.map","import { catchUserErrors } from '../../tools/catchUserErrors';\nimport { DOCS_ORIGIN, MORE_DETAILS, display } from '../../tools/display';\nimport { ONE_SECOND } from '../../tools/utils/timeUtils';\nimport { isPercentage } from '../../tools/utils/numberUtils';\nimport { ONE_KIBI_BYTE } from '../../tools/utils/byteUtils';\nimport { objectHasValue } from '../../tools/utils/objectUtils';\nimport { assign } from '../../tools/utils/polyfills';\nimport { selectSessionStoreStrategyType } from '../session/sessionStore';\nimport { TrackingConsent } from '../trackingConsent';\nimport { computeTransportConfiguration } from './transportConfiguration';\nexport var DefaultPrivacyLevel = {\n    ALLOW: 'allow',\n    MASK: 'mask',\n    MASK_USER_INPUT: 'mask-user-input',\n};\nexport var TraceContextInjection = {\n    ALL: 'all',\n    SAMPLED: 'sampled',\n};\nfunction isString(tag, tagName) {\n    if (tag !== undefined && tag !== null && typeof tag !== 'string') {\n        display.error(\"\".concat(tagName, \" must be defined as a string\"));\n        return false;\n    }\n    return true;\n}\nfunction isDatadogSite(site) {\n    if (site && typeof site === 'string' && !/(datadog|ddog|datad0g|dd0g)/.test(site)) {\n        display.error(\"Site should be a valid Datadog site. \".concat(MORE_DETAILS, \" \").concat(DOCS_ORIGIN, \"/getting_started/site/.\"));\n        return false;\n    }\n    return true;\n}\nexport function isSampleRate(sampleRate, name) {\n    if (sampleRate !== undefined && !isPercentage(sampleRate)) {\n        display.error(\"\".concat(name, \" Sample Rate should be a number between 0 and 100\"));\n        return false;\n    }\n    return true;\n}\nexport function validateAndBuildConfiguration(initConfiguration) {\n    var _a, _b, _c, _d, _e;\n    if (!initConfiguration || !initConfiguration.clientToken) {\n        display.error('Client Token is not configured, we will not send any data.');\n        return;\n    }\n    if (!isDatadogSite(initConfiguration.site) ||\n        !isSampleRate(initConfiguration.sessionSampleRate, 'Session') ||\n        !isSampleRate(initConfiguration.telemetrySampleRate, 'Telemetry') ||\n        !isSampleRate(initConfiguration.telemetryConfigurationSampleRate, 'Telemetry Configuration') ||\n        !isSampleRate(initConfiguration.telemetryUsageSampleRate, 'Telemetry Usage') ||\n        !isString(initConfiguration.version, 'Version') ||\n        !isString(initConfiguration.env, 'Env') ||\n        !isString(initConfiguration.service, 'Service')) {\n        return;\n    }\n    if (initConfiguration.trackingConsent !== undefined &&\n        !objectHasValue(TrackingConsent, initConfiguration.trackingConsent)) {\n        display.error('Tracking Consent should be either \"granted\" or \"not-granted\"');\n        return;\n    }\n    return assign({\n        beforeSend: initConfiguration.beforeSend && catchUserErrors(initConfiguration.beforeSend, 'beforeSend threw an error:'),\n        sessionStoreStrategyType: selectSessionStoreStrategyType(initConfiguration),\n        sessionSampleRate: (_a = initConfiguration.sessionSampleRate) !== null && _a !== void 0 ? _a : 100,\n        telemetrySampleRate: (_b = initConfiguration.telemetrySampleRate) !== null && _b !== void 0 ? _b : 20,\n        telemetryConfigurationSampleRate: (_c = initConfiguration.telemetryConfigurationSampleRate) !== null && _c !== void 0 ? _c : 5,\n        telemetryUsageSampleRate: (_d = initConfiguration.telemetryUsageSampleRate) !== null && _d !== void 0 ? _d : 5,\n        service: initConfiguration.service || undefined,\n        silentMultipleInit: !!initConfiguration.silentMultipleInit,\n        allowUntrustedEvents: !!initConfiguration.allowUntrustedEvents,\n        trackingConsent: (_e = initConfiguration.trackingConsent) !== null && _e !== void 0 ? _e : TrackingConsent.GRANTED,\n        storeContextsAcrossPages: !!initConfiguration.storeContextsAcrossPages,\n        /**\n         * beacon payload max queue size implementation is 64kb\n         * ensure that we leave room for logs, rum and potential other users\n         */\n        batchBytesLimit: 16 * ONE_KIBI_BYTE,\n        eventRateLimiterThreshold: 3000,\n        maxTelemetryEventsPerPage: 15,\n        /**\n         * flush automatically, aim to be lower than ALB connection timeout\n         * to maximize connection reuse.\n         */\n        flushTimeout: (30 * ONE_SECOND),\n        /**\n         * Logs intake limit\n         */\n        batchMessagesLimit: 50,\n        messageBytesLimit: 256 * ONE_KIBI_BYTE,\n    }, computeTransportConfiguration(initConfiguration));\n}\nexport function serializeConfiguration(initConfiguration) {\n    return {\n        session_sample_rate: initConfiguration.sessionSampleRate,\n        telemetry_sample_rate: initConfiguration.telemetrySampleRate,\n        telemetry_configuration_sample_rate: initConfiguration.telemetryConfigurationSampleRate,\n        telemetry_usage_sample_rate: initConfiguration.telemetryUsageSampleRate,\n        use_before_send: !!initConfiguration.beforeSend,\n        use_cross_site_session_cookie: initConfiguration.useCrossSiteSessionCookie,\n        use_partitioned_cross_site_session_cookie: initConfiguration.usePartitionedCrossSiteSessionCookie,\n        use_secure_session_cookie: initConfiguration.useSecureSessionCookie,\n        use_proxy: !!initConfiguration.proxy,\n        silent_multiple_init: initConfiguration.silentMultipleInit,\n        track_session_across_subdomains: initConfiguration.trackSessionAcrossSubdomains,\n        allow_fallback_to_local_storage: !!initConfiguration.allowFallbackToLocalStorage,\n        store_contexts_across_pages: !!initConfiguration.storeContextsAcrossPages,\n        allow_untrusted_events: !!initConfiguration.allowUntrustedEvents,\n        tracking_consent: initConfiguration.trackingConsent,\n    };\n}\n//# sourceMappingURL=configuration.js.map","/**\n * LIMITATION:\n * For NPM setup, this feature flag singleton is shared between RUM and Logs product.\n * This means that an experimental flag set on the RUM product will be set on the Logs product.\n * So keep in mind that in certain configurations, your experimental feature flag may affect other products.\n *\n * FORMAT:\n * All feature flags should be snake_cased\n */\n// We want to use a real enum (i.e. not a const enum) here, to be able to check whether an arbitrary\n// string is an expected feature flag\nimport { objectHasValue } from './utils/objectUtils';\n// eslint-disable-next-line no-restricted-syntax\nexport var ExperimentalFeature;\n(function (ExperimentalFeature) {\n    ExperimentalFeature[\"WRITABLE_RESOURCE_GRAPHQL\"] = \"writable_resource_graphql\";\n    ExperimentalFeature[\"CUSTOM_VITALS\"] = \"custom_vitals\";\n    ExperimentalFeature[\"TOLERANT_RESOURCE_TIMINGS\"] = \"tolerant_resource_timings\";\n    ExperimentalFeature[\"REMOTE_CONFIGURATION\"] = \"remote_configuration\";\n    ExperimentalFeature[\"UPDATE_VIEW_NAME\"] = \"update_view_name\";\n})(ExperimentalFeature || (ExperimentalFeature = {}));\nvar enabledExperimentalFeatures = new Set();\nexport function initFeatureFlags(enableExperimentalFeatures) {\n    if (Array.isArray(enableExperimentalFeatures)) {\n        addExperimentalFeatures(enableExperimentalFeatures.filter(function (flag) {\n            return objectHasValue(ExperimentalFeature, flag);\n        }));\n    }\n}\nexport function addExperimentalFeatures(enabledFeatures) {\n    enabledFeatures.forEach(function (flag) {\n        enabledExperimentalFeatures.add(flag);\n    });\n}\nexport function isExperimentalFeatureEnabled(featureName) {\n    return enabledExperimentalFeatures.has(featureName);\n}\nexport function resetExperimentalFeatures() {\n    enabledExperimentalFeatures.clear();\n}\nexport function getExperimentalFeatures() {\n    return enabledExperimentalFeatures;\n}\n//# sourceMappingURL=experimentalFeatures.js.map","/**\n * Cross-browser stack trace computation.\n *\n * Reference implementation: https://github.com/csnover/TraceKit/blob/04530298073c3823de72deb0b97e7b38ca7bcb59/tracekit.js\n */\nimport { startsWith } from '../utils/polyfills';\nvar UNKNOWN_FUNCTION = '?';\nexport function computeStackTrace(ex) {\n    var stack = [];\n    var stackProperty = tryToGetString(ex, 'stack');\n    var exString = String(ex);\n    if (stackProperty && startsWith(stackProperty, exString)) {\n        stackProperty = stackProperty.slice(exString.length);\n    }\n    if (stackProperty) {\n        stackProperty.split('\\n').forEach(function (line) {\n            var stackFrame = parseChromeLine(line) || parseChromeAnonymousLine(line) || parseWinLine(line) || parseGeckoLine(line);\n            if (stackFrame) {\n                if (!stackFrame.func && stackFrame.line) {\n                    stackFrame.func = UNKNOWN_FUNCTION;\n                }\n                stack.push(stackFrame);\n            }\n        });\n    }\n    return {\n        message: tryToGetString(ex, 'message'),\n        name: tryToGetString(ex, 'name'),\n        stack: stack,\n    };\n}\nvar fileUrl = '((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\\\w+\\\\.|\\\\/).*?)';\nvar filePosition = '(?::(\\\\d+))';\nvar CHROME_LINE_RE = new RegExp(\"^\\\\s*at (.*?) ?\\\\(\".concat(fileUrl).concat(filePosition, \"?\").concat(filePosition, \"?\\\\)?\\\\s*$\"), 'i');\nvar CHROME_EVAL_RE = new RegExp(\"\\\\((\\\\S*)\".concat(filePosition).concat(filePosition, \"\\\\)\"));\nfunction parseChromeLine(line) {\n    var parts = CHROME_LINE_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    var isNative = parts[2] && parts[2].indexOf('native') === 0; // start of line\n    var isEval = parts[2] && parts[2].indexOf('eval') === 0; // start of line\n    var submatch = CHROME_EVAL_RE.exec(parts[2]);\n    if (isEval && submatch) {\n        // throw out eval line/column and use top-most line/column number\n        parts[2] = submatch[1]; // url\n        parts[3] = submatch[2]; // line\n        parts[4] = submatch[3]; // column\n    }\n    return {\n        args: isNative ? [parts[2]] : [],\n        column: parts[4] ? +parts[4] : undefined,\n        func: parts[1] || UNKNOWN_FUNCTION,\n        line: parts[3] ? +parts[3] : undefined,\n        url: !isNative ? parts[2] : undefined,\n    };\n}\nvar CHROME_ANONYMOUS_FUNCTION_RE = new RegExp(\"^\\\\s*at ?\".concat(fileUrl).concat(filePosition, \"?\").concat(filePosition, \"??\\\\s*$\"), 'i');\nfunction parseChromeAnonymousLine(line) {\n    var parts = CHROME_ANONYMOUS_FUNCTION_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    return {\n        args: [],\n        column: parts[3] ? +parts[3] : undefined,\n        func: UNKNOWN_FUNCTION,\n        line: parts[2] ? +parts[2] : undefined,\n        url: parts[1],\n    };\n}\nvar WINJS_LINE_RE = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\nfunction parseWinLine(line) {\n    var parts = WINJS_LINE_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    return {\n        args: [],\n        column: parts[4] ? +parts[4] : undefined,\n        func: parts[1] || UNKNOWN_FUNCTION,\n        line: +parts[3],\n        url: parts[2],\n    };\n}\nvar GECKO_LINE_RE = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\\[native).*?|[^@]*bundle)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nvar GECKO_EVAL_RE = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\nfunction parseGeckoLine(line) {\n    var parts = GECKO_LINE_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    var isEval = parts[3] && parts[3].indexOf(' > eval') > -1;\n    var submatch = GECKO_EVAL_RE.exec(parts[3]);\n    if (isEval && submatch) {\n        // throw out eval line/column and use top-most line number\n        parts[3] = submatch[1];\n        parts[4] = submatch[2];\n        parts[5] = undefined; // no column when eval\n    }\n    return {\n        args: parts[2] ? parts[2].split(',') : [],\n        column: parts[5] ? +parts[5] : undefined,\n        func: parts[1] || UNKNOWN_FUNCTION,\n        line: parts[4] ? +parts[4] : undefined,\n        url: parts[3],\n    };\n}\nfunction tryToGetString(candidate, property) {\n    if (typeof candidate !== 'object' || !candidate || !(property in candidate)) {\n        return undefined;\n    }\n    var value = candidate[property];\n    return typeof value === 'string' ? value : undefined;\n}\nexport function computeStackTraceFromOnErrorMessage(messageObj, url, line, column) {\n    var stack = [{ url: url, column: column, line: line }];\n    var _a = tryToParseMessage(messageObj), name = _a.name, message = _a.message;\n    return {\n        name: name,\n        message: message,\n        stack: stack,\n    };\n}\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Error_types\nvar ERROR_TYPES_RE = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\\s\\S]*)$/;\nfunction tryToParseMessage(messageObj) {\n    var _a;\n    var name;\n    var message;\n    if ({}.toString.call(messageObj) === '[object String]') {\n        ;\n        _a = ERROR_TYPES_RE.exec(messageObj), name = _a[1], message = _a[2];\n    }\n    return { name: name, message: message };\n}\n//# sourceMappingURL=computeStackTrace.js.map","import { callMonitored } from '../monitor';\nimport { noop } from '../utils/functionUtils';\nimport { computeStackTrace } from './computeStackTrace';\n/**\n * Creates a stacktrace without SDK internal frames.\n * Constraints:\n * - Has to be called at the utmost position of the call stack.\n * - No monitored function should encapsulate it, that is why we need to use callMonitored inside it.\n */\nexport function createHandlingStack() {\n    /**\n     * Skip the two internal frames:\n     * - SDK API (console.error, ...)\n     * - this function\n     * in order to keep only the user calls\n     */\n    var internalFramesToSkip = 2;\n    var error = new Error();\n    var formattedStack;\n    // IE needs to throw the error to fill in the stack trace\n    if (!error.stack) {\n        try {\n            throw error;\n        }\n        catch (e) {\n            noop();\n        }\n    }\n    callMonitored(function () {\n        var stackTrace = computeStackTrace(error);\n        stackTrace.stack = stackTrace.stack.slice(internalFramesToSkip);\n        formattedStack = toStackTraceString(stackTrace);\n    });\n    return formattedStack;\n}\nexport function toStackTraceString(stack) {\n    var result = formatErrorMessage(stack);\n    stack.stack.forEach(function (frame) {\n        var func = frame.func === '?' ? '<anonymous>' : frame.func;\n        var args = frame.args && frame.args.length > 0 ? \"(\".concat(frame.args.join(', '), \")\") : '';\n        var line = frame.line ? \":\".concat(frame.line) : '';\n        var column = frame.line && frame.column ? \":\".concat(frame.column) : '';\n        result += \"\\n  at \".concat(func).concat(args, \" @ \").concat(frame.url).concat(line).concat(column);\n    });\n    return result;\n}\nexport function formatErrorMessage(stack) {\n    return \"\".concat(stack.name || 'Error', \": \").concat(stack.message);\n}\n//# sourceMappingURL=handlingStack.js.map","import { setTimeout } from './timer';\nimport { callMonitored } from './monitor';\nimport { noop } from './utils/functionUtils';\nimport { arrayFrom, startsWith } from './utils/polyfills';\nimport { createHandlingStack } from './stackTrace/handlingStack';\n/**\n * Instruments a method on a object, calling the given callback before the original method is\n * invoked. The callback receives an object with information about the method call.\n *\n * This function makes sure that we are \"good citizens\" regarding third party instrumentations: when\n * removing the instrumentation, the original method is usually restored, but if a third party\n * instrumentation was set after ours, we keep it in place and just replace our instrumentation with\n * a noop.\n *\n * Note: it is generally better to instrument methods that are \"owned\" by the object instead of ones\n * that are inherited from the prototype chain. Example:\n * * do:    `instrumentMethod(Array.prototype, 'push', ...)`\n * * don't: `instrumentMethod([], 'push', ...)`\n *\n * This method is also used to set event handler properties (ex: window.onerror = ...), as it has\n * the same requirements as instrumenting a method:\n * * if the event handler is already set by a third party, we need to call it and not just blindly\n * override it.\n * * if the event handler is set by a third party after us, we need to keep it in place when\n * removing ours.\n *\n * @example\n *\n *  instrumentMethod(window, 'fetch', ({ target, parameters, onPostCall }) => {\n *    console.log('Before calling fetch on', target, 'with parameters', parameters)\n *\n *    onPostCall((result) => {\n *      console.log('After fetch calling on', target, 'with parameters', parameters, 'and result', result)\n *    })\n *  })\n */\nexport function instrumentMethod(targetPrototype, method, onPreCall, _a) {\n    var _b = _a === void 0 ? {} : _a, computeHandlingStack = _b.computeHandlingStack;\n    var original = targetPrototype[method];\n    if (typeof original !== 'function') {\n        if (startsWith(method, 'on')) {\n            original = noop;\n        }\n        else {\n            return { stop: noop };\n        }\n    }\n    var stopped = false;\n    var instrumentation = function () {\n        if (stopped) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call\n            return original.apply(this, arguments);\n        }\n        var parameters = arrayFrom(arguments);\n        var postCallCallback;\n        callMonitored(onPreCall, null, [\n            {\n                target: this,\n                parameters: parameters,\n                onPostCall: function (callback) {\n                    postCallCallback = callback;\n                },\n                handlingStack: computeHandlingStack ? createHandlingStack() : undefined,\n            },\n        ]);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        var result = original.apply(this, parameters);\n        if (postCallCallback) {\n            callMonitored(postCallCallback, null, [result]);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return result;\n    };\n    targetPrototype[method] = instrumentation;\n    return {\n        stop: function () {\n            stopped = true;\n            // If the instrumentation has been removed by a third party, keep the last one\n            if (targetPrototype[method] === instrumentation) {\n                targetPrototype[method] = original;\n            }\n        },\n    };\n}\nexport function instrumentSetter(targetPrototype, property, after) {\n    var originalDescriptor = Object.getOwnPropertyDescriptor(targetPrototype, property);\n    if (!originalDescriptor || !originalDescriptor.set || !originalDescriptor.configurable) {\n        return { stop: noop };\n    }\n    var stoppedInstrumentation = noop;\n    var instrumentation = function (target, value) {\n        // put hooked setter into event loop to avoid of set latency\n        setTimeout(function () {\n            if (instrumentation !== stoppedInstrumentation) {\n                after(target, value);\n            }\n        }, 0);\n    };\n    var instrumentationWrapper = function (value) {\n        originalDescriptor.set.call(this, value);\n        instrumentation(this, value);\n    };\n    Object.defineProperty(targetPrototype, property, {\n        set: instrumentationWrapper,\n    });\n    return {\n        stop: function () {\n            var _a;\n            if (((_a = Object.getOwnPropertyDescriptor(targetPrototype, property)) === null || _a === void 0 ? void 0 : _a.set) === instrumentationWrapper) {\n                Object.defineProperty(targetPrototype, property, originalDescriptor);\n            }\n            instrumentation = stoppedInstrumentation;\n        },\n    };\n}\n//# sourceMappingURL=instrumentMethod.js.map","import { display } from '../display';\nimport { ONE_KIBI_BYTE } from '../utils/byteUtils';\nimport { detachToJsonMethod } from './jsonStringify';\n// The maximum size of a single event is 256KiB. By default, we ensure that user-provided data\n// going through sanitize fits inside our events, while leaving room for other contexts, metadata, ...\nvar SANITIZE_DEFAULT_MAX_CHARACTER_COUNT = 220 * ONE_KIBI_BYTE;\n// Symbol for the root element of the JSONPath used for visited objects\nvar JSON_PATH_ROOT_ELEMENT = '$';\n// When serializing (using JSON.stringify) a key of an object, { key: 42 } gets wrapped in quotes as \"key\".\n// With the separator (:), we need to add 3 characters to the count.\nvar KEY_DECORATION_LENGTH = 3;\nexport function sanitize(source, maxCharacterCount) {\n    if (maxCharacterCount === void 0) { maxCharacterCount = SANITIZE_DEFAULT_MAX_CHARACTER_COUNT; }\n    // Unbind any toJSON function we may have on [] or {} prototypes\n    var restoreObjectPrototypeToJson = detachToJsonMethod(Object.prototype);\n    var restoreArrayPrototypeToJson = detachToJsonMethod(Array.prototype);\n    // Initial call to sanitizeProcessor - will populate containerQueue if source is an Array or a plain Object\n    var containerQueue = [];\n    var visitedObjectsWithPath = new WeakMap();\n    var sanitizedData = sanitizeProcessor(source, JSON_PATH_ROOT_ELEMENT, undefined, containerQueue, visitedObjectsWithPath);\n    var serializedSanitizedData = JSON.stringify(sanitizedData);\n    var accumulatedCharacterCount = serializedSanitizedData ? serializedSanitizedData.length : 0;\n    if (accumulatedCharacterCount > maxCharacterCount) {\n        warnOverCharacterLimit(maxCharacterCount, 'discarded', source);\n        return undefined;\n    }\n    while (containerQueue.length > 0 && accumulatedCharacterCount < maxCharacterCount) {\n        var containerToProcess = containerQueue.shift();\n        var separatorLength = 0; // 0 for the first element, 1 for subsequent elements\n        // Arrays and Objects have to be handled distinctly to ensure\n        // we do not pick up non-numerical properties from Arrays\n        if (Array.isArray(containerToProcess.source)) {\n            for (var key = 0; key < containerToProcess.source.length; key++) {\n                var targetData = sanitizeProcessor(containerToProcess.source[key], containerToProcess.path, key, containerQueue, visitedObjectsWithPath);\n                if (targetData !== undefined) {\n                    accumulatedCharacterCount += JSON.stringify(targetData).length;\n                }\n                else {\n                    // When an element of an Array (targetData) is undefined, it is serialized as null:\n                    // JSON.stringify([undefined]) => '[null]' - This accounts for 4 characters\n                    accumulatedCharacterCount += 4;\n                }\n                accumulatedCharacterCount += separatorLength;\n                separatorLength = 1;\n                if (accumulatedCharacterCount > maxCharacterCount) {\n                    warnOverCharacterLimit(maxCharacterCount, 'truncated', source);\n                    break;\n                }\n                ;\n                containerToProcess.target[key] = targetData;\n            }\n        }\n        else {\n            for (var key in containerToProcess.source) {\n                if (Object.prototype.hasOwnProperty.call(containerToProcess.source, key)) {\n                    var targetData = sanitizeProcessor(containerToProcess.source[key], containerToProcess.path, key, containerQueue, visitedObjectsWithPath);\n                    // When a property of an object has an undefined value, it will be dropped during serialization:\n                    // JSON.stringify({a:undefined}) => '{}'\n                    if (targetData !== undefined) {\n                        accumulatedCharacterCount +=\n                            JSON.stringify(targetData).length + separatorLength + key.length + KEY_DECORATION_LENGTH;\n                        separatorLength = 1;\n                    }\n                    if (accumulatedCharacterCount > maxCharacterCount) {\n                        warnOverCharacterLimit(maxCharacterCount, 'truncated', source);\n                        break;\n                    }\n                    ;\n                    containerToProcess.target[key] = targetData;\n                }\n            }\n        }\n    }\n    // Rebind detached toJSON functions\n    restoreObjectPrototypeToJson();\n    restoreArrayPrototypeToJson();\n    return sanitizedData;\n}\n/**\n * Internal function to factorize the process common to the\n * initial call to sanitize, and iterations for Arrays and Objects\n *\n */\nfunction sanitizeProcessor(source, parentPath, key, queue, visitedObjectsWithPath) {\n    // Start by handling toJSON, as we want to sanitize its output\n    var sourceToSanitize = tryToApplyToJSON(source);\n    if (!sourceToSanitize || typeof sourceToSanitize !== 'object') {\n        return sanitizePrimitivesAndFunctions(sourceToSanitize);\n    }\n    var sanitizedSource = sanitizeObjects(sourceToSanitize);\n    if (sanitizedSource !== '[Object]' && sanitizedSource !== '[Array]' && sanitizedSource !== '[Error]') {\n        return sanitizedSource;\n    }\n    // Handle potential cyclic references\n    // We need to use source as sourceToSanitize could be a reference to a new object\n    // At this stage, we know the source is an object type\n    var sourceAsObject = source;\n    if (visitedObjectsWithPath.has(sourceAsObject)) {\n        return \"[Reference seen at \".concat(visitedObjectsWithPath.get(sourceAsObject), \"]\");\n    }\n    // Add processed source to queue\n    var currentPath = key !== undefined ? \"\".concat(parentPath, \".\").concat(key) : parentPath;\n    var target = Array.isArray(sourceToSanitize) ? [] : {};\n    visitedObjectsWithPath.set(sourceAsObject, currentPath);\n    queue.push({ source: sourceToSanitize, target: target, path: currentPath });\n    return target;\n}\n/**\n * Handles sanitization of simple, non-object types\n *\n */\nfunction sanitizePrimitivesAndFunctions(value) {\n    // BigInt cannot be serialized by JSON.stringify(), convert it to a string representation\n    if (typeof value === 'bigint') {\n        return \"[BigInt] \".concat(value.toString());\n    }\n    // Functions cannot be serialized by JSON.stringify(). Moreover, if a faulty toJSON is present, it needs to be converted\n    // so it won't prevent stringify from serializing later\n    if (typeof value === 'function') {\n        return \"[Function] \".concat(value.name || 'unknown');\n    }\n    // JSON.stringify() does not serialize symbols.\n    if (typeof value === 'symbol') {\n        return \"[Symbol] \".concat(value.description || value.toString());\n    }\n    return value;\n}\n/**\n * Handles sanitization of object types\n *\n * LIMITATIONS\n * - If a class defines a toStringTag Symbol, it will fall in the catch-all method and prevent enumeration of properties.\n * To avoid this, a toJSON method can be defined.\n * - IE11 does not return a distinct type for objects such as Map, WeakMap, ... These objects will pass through and their\n * properties enumerated if any.\n *\n */\nfunction sanitizeObjects(value) {\n    try {\n        // Handle events - Keep a simple implementation to avoid breaking changes\n        if (value instanceof Event) {\n            return {\n                isTrusted: value.isTrusted,\n            };\n        }\n        // Handle all remaining object types in a generic way\n        var result = Object.prototype.toString.call(value);\n        var match = result.match(/\\[object (.*)\\]/);\n        if (match && match[1]) {\n            return \"[\".concat(match[1], \"]\");\n        }\n    }\n    catch (_a) {\n        // If the previous serialization attempts failed, and we cannot convert using\n        // Object.prototype.toString, declare the value unserializable\n    }\n    return '[Unserializable]';\n}\n/**\n * Checks if a toJSON function exists and tries to execute it\n *\n */\nfunction tryToApplyToJSON(value) {\n    var object = value;\n    if (object && typeof object.toJSON === 'function') {\n        try {\n            return object.toJSON();\n        }\n        catch (_a) {\n            // If toJSON fails, we continue by trying to serialize the value manually\n        }\n    }\n    return value;\n}\n/**\n * Helper function to display the warning when the accumulated character count is over the limit\n */\nfunction warnOverCharacterLimit(maxCharacterCount, changeType, source) {\n    display.warn(\"The data provided has been \".concat(changeType, \" as it is over the limit of \").concat(maxCharacterCount, \" characters:\"), source);\n}\n//# sourceMappingURL=sanitize.js.map","import { sanitize } from '../../tools/serialisation/sanitize';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nimport { computeStackTrace } from '../../tools/stackTrace/computeStackTrace';\nimport { toStackTraceString } from '../../tools/stackTrace/handlingStack';\nexport var NO_ERROR_STACK_PRESENT_MESSAGE = 'No stack, consider using an instance of Error';\nexport function computeRawError(_a) {\n    var stackTrace = _a.stackTrace, originalError = _a.originalError, handlingStack = _a.handlingStack, startClocks = _a.startClocks, nonErrorPrefix = _a.nonErrorPrefix, source = _a.source, handling = _a.handling;\n    var isErrorInstance = originalError instanceof Error;\n    var message = computeMessage(stackTrace, isErrorInstance, nonErrorPrefix, originalError);\n    var stack = hasUsableStack(isErrorInstance, stackTrace)\n        ? toStackTraceString(stackTrace)\n        : NO_ERROR_STACK_PRESENT_MESSAGE;\n    var causes = isErrorInstance ? flattenErrorCauses(originalError, source) : undefined;\n    var type = stackTrace ? stackTrace.name : undefined;\n    var fingerprint = tryToGetFingerprint(originalError);\n    return {\n        startClocks: startClocks,\n        source: source,\n        handling: handling,\n        handlingStack: handlingStack,\n        originalError: originalError,\n        type: type,\n        message: message,\n        stack: stack,\n        causes: causes,\n        fingerprint: fingerprint,\n    };\n}\nfunction computeMessage(stackTrace, isErrorInstance, nonErrorPrefix, originalError) {\n    // Favor stackTrace message only if tracekit has really been able to extract something meaningful (message + name)\n    // TODO rework tracekit integration to avoid scattering error building logic\n    return (stackTrace === null || stackTrace === void 0 ? void 0 : stackTrace.message) && (stackTrace === null || stackTrace === void 0 ? void 0 : stackTrace.name)\n        ? stackTrace.message\n        : !isErrorInstance\n            ? \"\".concat(nonErrorPrefix, \" \").concat(jsonStringify(sanitize(originalError)))\n            : 'Empty message';\n}\nfunction hasUsableStack(isErrorInstance, stackTrace) {\n    if (stackTrace === undefined) {\n        return false;\n    }\n    if (isErrorInstance) {\n        return true;\n    }\n    // handle cases where tracekit return stack = [] or stack = [{url: undefined, line: undefined, column: undefined}]\n    // TODO rework tracekit integration to avoid generating those unusable stack\n    return stackTrace.stack.length > 0 && (stackTrace.stack.length > 1 || stackTrace.stack[0].url !== undefined);\n}\nexport function tryToGetFingerprint(originalError) {\n    return originalError instanceof Error && 'dd_fingerprint' in originalError\n        ? String(originalError.dd_fingerprint)\n        : undefined;\n}\nexport function getFileFromStackTraceString(stack) {\n    var _a;\n    return (_a = /@ (.+)/.exec(stack)) === null || _a === void 0 ? void 0 : _a[1];\n}\nexport function flattenErrorCauses(error, parentSource) {\n    var currentError = error;\n    var causes = [];\n    while ((currentError === null || currentError === void 0 ? void 0 : currentError.cause) instanceof Error && causes.length < 10) {\n        var stackTrace = computeStackTrace(currentError.cause);\n        causes.push({\n            message: currentError.cause.message,\n            source: parentSource,\n            type: stackTrace === null || stackTrace === void 0 ? void 0 : stackTrace.name,\n            stack: stackTrace && toStackTraceString(stackTrace),\n        });\n        currentError = currentError.cause;\n    }\n    return causes.length ? causes : undefined;\n}\n//# sourceMappingURL=error.js.map","export var ErrorSource = {\n    AGENT: 'agent',\n    CONSOLE: 'console',\n    CUSTOM: 'custom',\n    LOGGER: 'logger',\n    NETWORK: 'network',\n    SOURCE: 'source',\n    REPORT: 'report',\n};\n//# sourceMappingURL=error.types.js.map","import { instrumentMethod } from '../../tools/instrumentMethod';\nimport { clocksNow } from '../../tools/utils/timeUtils';\nimport { computeStackTrace, computeStackTraceFromOnErrorMessage } from '../../tools/stackTrace/computeStackTrace';\nimport { computeRawError } from './error';\nimport { ErrorSource } from './error.types';\nexport function trackRuntimeError(errorObservable) {\n    var handleRuntimeError = function (stackTrace, originalError) {\n        var rawError = computeRawError({\n            stackTrace: stackTrace,\n            originalError: originalError,\n            startClocks: clocksNow(),\n            nonErrorPrefix: \"Uncaught\" /* NonErrorPrefix.UNCAUGHT */,\n            source: ErrorSource.SOURCE,\n            handling: \"unhandled\" /* ErrorHandling.UNHANDLED */,\n        });\n        errorObservable.notify(rawError);\n    };\n    var stopInstrumentingOnError = instrumentOnError(handleRuntimeError).stop;\n    var stopInstrumentingOnUnhandledRejection = instrumentUnhandledRejection(handleRuntimeError).stop;\n    return {\n        stop: function () {\n            stopInstrumentingOnError();\n            stopInstrumentingOnUnhandledRejection();\n        },\n    };\n}\nexport function instrumentOnError(callback) {\n    return instrumentMethod(window, 'onerror', function (_a) {\n        var _b = _a.parameters, messageObj = _b[0], url = _b[1], line = _b[2], column = _b[3], errorObj = _b[4];\n        var stackTrace;\n        if (errorObj instanceof Error) {\n            stackTrace = computeStackTrace(errorObj);\n        }\n        else {\n            stackTrace = computeStackTraceFromOnErrorMessage(messageObj, url, line, column);\n        }\n        callback(stackTrace, errorObj !== null && errorObj !== void 0 ? errorObj : messageObj);\n    });\n}\nexport function instrumentUnhandledRejection(callback) {\n    return instrumentMethod(window, 'onunhandledrejection', function (_a) {\n        var e = _a.parameters[0];\n        var reason = e.reason || 'Empty reason';\n        var stack = computeStackTrace(reason);\n        callback(stack, reason);\n    });\n}\n//# sourceMappingURL=trackRuntimeError.js.map","import { catchUserErrors } from '../tools/catchUserErrors';\nimport { setDebugMode } from '../tools/monitor';\nimport { assign } from '../tools/utils/polyfills';\nimport { display } from '../tools/display';\nexport function makePublicApi(stub) {\n    var publicApi = assign({\n        version: \"5.23.3\",\n        // This API method is intentionally not monitored, since the only thing executed is the\n        // user-provided 'callback'.  All SDK usages executed in the callback should be monitored, and\n        // we don't want to interfere with the user uncaught exceptions.\n        onReady: function (callback) {\n            callback();\n        },\n    }, stub);\n    // Add a \"hidden\" property to set debug mode. We define it that way to hide it\n    // as much as possible but of course it's not a real protection.\n    Object.defineProperty(publicApi, '_setDebug', {\n        get: function () {\n            return setDebugMode;\n        },\n        enumerable: false,\n    });\n    return publicApi;\n}\nexport function defineGlobal(global, name, api) {\n    var existingGlobalVariable = global[name];\n    if (existingGlobalVariable && !existingGlobalVariable.q && existingGlobalVariable.version) {\n        display.warn('SDK is loaded more than once. This is unsupported and might have unexpected behavior.');\n    }\n    global[name] = api;\n    if (existingGlobalVariable && existingGlobalVariable.q) {\n        existingGlobalVariable.q.forEach(function (fn) { return catchUserErrors(fn, 'onReady callback threw an error:')(); });\n    }\n}\n//# sourceMappingURL=init.js.map","import { display } from '../tools/display';\nexport function displayAlreadyInitializedError(sdkName, initConfiguration) {\n    if (!initConfiguration.silentMultipleInit) {\n        display.error(\"\".concat(sdkName, \" is already initialized.\"));\n    }\n}\n//# sourceMappingURL=displayAlreadyInitializedError.js.map","import { monitor } from '../tools/monitor';\nimport { getZoneJsOriginalValue } from '../tools/getZoneJsOriginalValue';\n/**\n * Add an event listener to an event target object (Window, Element, mock object...).  This provides\n * a few conveniences compared to using `element.addEventListener` directly:\n *\n * * supports IE11 by: using an option object only if needed and emulating the `once` option\n *\n * * wraps the listener with a `monitor` function\n *\n * * returns a `stop` function to remove the listener\n */\nexport function addEventListener(configuration, eventTarget, eventName, listener, options) {\n    return addEventListeners(configuration, eventTarget, [eventName], listener, options);\n}\n/**\n * Add event listeners to an event target object (Window, Element, mock object...).  This provides\n * a few conveniences compared to using `element.addEventListener` directly:\n *\n * * supports IE11 by: using an option object only if needed and emulating the `once` option\n *\n * * wraps the listener with a `monitor` function\n *\n * * returns a `stop` function to remove the listener\n *\n * * with `once: true`, the listener will be called at most once, even if different events are listened\n */\nexport function addEventListeners(configuration, eventTarget, eventNames, listener, _a) {\n    var _b = _a === void 0 ? {} : _a, once = _b.once, capture = _b.capture, passive = _b.passive;\n    var listenerWithMonitor = monitor(function (event) {\n        if (!event.isTrusted && !event.__ddIsTrusted && !configuration.allowUntrustedEvents) {\n            return;\n        }\n        if (once) {\n            stop();\n        }\n        listener(event);\n    });\n    var options = passive ? { capture: capture, passive: passive } : capture;\n    var add = getZoneJsOriginalValue(eventTarget, 'addEventListener');\n    eventNames.forEach(function (eventName) { return add.call(eventTarget, eventName, listenerWithMonitor, options); });\n    function stop() {\n        var remove = getZoneJsOriginalValue(eventTarget, 'removeEventListener');\n        eventNames.forEach(function (eventName) { return remove.call(eventTarget, eventName, listenerWithMonitor, options); });\n    }\n    return {\n        stop: stop,\n    };\n}\n//# sourceMappingURL=addEventListener.js.map","import { toStackTraceString } from '../../tools/stackTrace/handlingStack';\nimport { monitor } from '../../tools/monitor';\nimport { mergeObservables, Observable } from '../../tools/observable';\nimport { addEventListener } from '../../browser/addEventListener';\nimport { includes } from '../../tools/utils/polyfills';\nimport { safeTruncate } from '../../tools/utils/stringUtils';\nexport var RawReportType = {\n    intervention: 'intervention',\n    deprecation: 'deprecation',\n    cspViolation: 'csp_violation',\n};\nexport function initReportObservable(configuration, apis) {\n    var observables = [];\n    if (includes(apis, RawReportType.cspViolation)) {\n        observables.push(createCspViolationReportObservable(configuration));\n    }\n    var reportTypes = apis.filter(function (api) { return api !== RawReportType.cspViolation; });\n    if (reportTypes.length) {\n        observables.push(createReportObservable(reportTypes));\n    }\n    return mergeObservables.apply(void 0, observables);\n}\nfunction createReportObservable(reportTypes) {\n    return new Observable(function (observable) {\n        if (!window.ReportingObserver) {\n            return;\n        }\n        var handleReports = monitor(function (reports, _) {\n            return reports.forEach(function (report) {\n                observable.notify(buildRawReportFromReport(report));\n            });\n        });\n        var observer = new window.ReportingObserver(handleReports, {\n            types: reportTypes,\n            buffered: true,\n        });\n        observer.observe();\n        return function () {\n            observer.disconnect();\n        };\n    });\n}\nfunction createCspViolationReportObservable(configuration) {\n    return new Observable(function (observable) {\n        var stop = addEventListener(configuration, document, \"securitypolicyviolation\" /* DOM_EVENT.SECURITY_POLICY_VIOLATION */, function (event) {\n            observable.notify(buildRawReportFromCspViolation(event));\n        }).stop;\n        return stop;\n    });\n}\nfunction buildRawReportFromReport(report) {\n    var type = report.type, body = report.body;\n    return {\n        type: type,\n        subtype: body.id,\n        message: \"\".concat(type, \": \").concat(body.message),\n        originalReport: report,\n        stack: buildStack(body.id, body.message, body.sourceFile, body.lineNumber, body.columnNumber),\n    };\n}\nfunction buildRawReportFromCspViolation(event) {\n    var type = RawReportType.cspViolation;\n    var message = \"'\".concat(event.blockedURI, \"' blocked by '\").concat(event.effectiveDirective, \"' directive\");\n    return {\n        type: RawReportType.cspViolation,\n        subtype: event.effectiveDirective,\n        message: \"\".concat(type, \": \").concat(message),\n        stack: buildStack(event.effectiveDirective, event.originalPolicy\n            ? \"\".concat(message, \" of the policy \\\"\").concat(safeTruncate(event.originalPolicy, 100, '...'), \"\\\"\")\n            : 'no policy', event.sourceFile, event.lineNumber, event.columnNumber),\n        originalReport: event,\n    };\n}\nfunction buildStack(name, message, sourceFile, lineNumber, columnNumber) {\n    return sourceFile\n        ? toStackTraceString({\n            name: name,\n            message: message,\n            stack: [\n                {\n                    func: '?',\n                    url: sourceFile,\n                    line: lineNumber !== null && lineNumber !== void 0 ? lineNumber : undefined,\n                    column: columnNumber !== null && columnNumber !== void 0 ? columnNumber : undefined,\n                },\n            ],\n        })\n        : undefined;\n}\n//# sourceMappingURL=reportObservable.js.map","export function sendToExtension(type, payload) {\n    var callback = window.__ddBrowserSdkExtensionCallback;\n    if (callback) {\n        callback({ type: type, payload: payload });\n    }\n}\n//# sourceMappingURL=sendToExtension.js.map","/**\n * Similar to `typeof`, but distinguish plain objects from `null` and arrays\n */\nexport function getType(value) {\n    if (value === null) {\n        return 'null';\n    }\n    if (Array.isArray(value)) {\n        return 'array';\n    }\n    return typeof value;\n}\n//# sourceMappingURL=typeUtils.js.map","import { getType } from './utils/typeUtils';\n/**\n * Iterate over source and affect its sub values into destination, recursively.\n * If the source and destination can't be merged, return source.\n */\nexport function mergeInto(destination, source, circularReferenceChecker) {\n    if (circularReferenceChecker === void 0) { circularReferenceChecker = createCircularReferenceChecker(); }\n    // ignore the source if it is undefined\n    if (source === undefined) {\n        return destination;\n    }\n    if (typeof source !== 'object' || source === null) {\n        // primitive values - just return source\n        return source;\n    }\n    else if (source instanceof Date) {\n        return new Date(source.getTime());\n    }\n    else if (source instanceof RegExp) {\n        var flags = source.flags ||\n            // old browsers compatibility\n            [\n                source.global ? 'g' : '',\n                source.ignoreCase ? 'i' : '',\n                source.multiline ? 'm' : '',\n                source.sticky ? 'y' : '',\n                source.unicode ? 'u' : '',\n            ].join('');\n        return new RegExp(source.source, flags);\n    }\n    if (circularReferenceChecker.hasAlreadyBeenSeen(source)) {\n        // remove circular references\n        return undefined;\n    }\n    else if (Array.isArray(source)) {\n        var merged_1 = Array.isArray(destination) ? destination : [];\n        for (var i = 0; i < source.length; ++i) {\n            merged_1[i] = mergeInto(merged_1[i], source[i], circularReferenceChecker);\n        }\n        return merged_1;\n    }\n    var merged = getType(destination) === 'object' ? destination : {};\n    for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n            merged[key] = mergeInto(merged[key], source[key], circularReferenceChecker);\n        }\n    }\n    return merged;\n}\n/**\n * A simplistic implementation of a deep clone algorithm.\n * Caveats:\n * - It doesn't maintain prototype chains - don't use with instances of custom classes.\n * - It doesn't handle Map and Set\n */\nexport function deepClone(value) {\n    return mergeInto(undefined, value);\n}\nexport function combine() {\n    var sources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sources[_i] = arguments[_i];\n    }\n    var destination;\n    for (var _a = 0, sources_1 = sources; _a < sources_1.length; _a++) {\n        var source = sources_1[_a];\n        // Ignore any undefined or null sources.\n        if (source === undefined || source === null) {\n            continue;\n        }\n        destination = mergeInto(destination, source);\n    }\n    return destination;\n}\nfunction createCircularReferenceChecker() {\n    if (typeof WeakSet !== 'undefined') {\n        var set_1 = new WeakSet();\n        return {\n            hasAlreadyBeenSeen: function (value) {\n                var has = set_1.has(value);\n                if (!has) {\n                    set_1.add(value);\n                }\n                return has;\n            },\n        };\n    }\n    var array = [];\n    return {\n        hasAlreadyBeenSeen: function (value) {\n            var has = array.indexOf(value) >= 0;\n            if (!has) {\n                array.push(value);\n            }\n            return has;\n        },\n    };\n}\n//# sourceMappingURL=mergeInto.js.map","export function getConnectivity() {\n    var _a;\n    var navigator = window.navigator;\n    return {\n        status: navigator.onLine ? 'connected' : 'not_connected',\n        interfaces: navigator.connection && navigator.connection.type ? [navigator.connection.type] : undefined,\n        effective_type: (_a = navigator.connection) === null || _a === void 0 ? void 0 : _a.effectiveType,\n    };\n}\n//# sourceMappingURL=connectivity.js.map","import { arrayFrom } from './polyfills';\nexport function removeDuplicates(array) {\n    var set = new Set();\n    array.forEach(function (item) { return set.add(item); });\n    return arrayFrom(set);\n}\nexport function removeItem(array, item) {\n    var index = array.indexOf(item);\n    if (index >= 0) {\n        array.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrayUtils.js.map","import { removeItem } from './utils/arrayUtils';\nvar BUFFER_LIMIT = 500;\nexport function createBoundedBuffer() {\n    var buffer = [];\n    var add = function (callback) {\n        var length = buffer.push(callback);\n        if (length > BUFFER_LIMIT) {\n            buffer.splice(0, 1);\n        }\n    };\n    var remove = function (callback) {\n        removeItem(buffer, callback);\n    };\n    var drain = function (arg) {\n        buffer.forEach(function (callback) { return callback(arg); });\n        buffer.length = 0;\n    };\n    return {\n        add: add,\n        remove: remove,\n        drain: drain,\n    };\n}\n//# sourceMappingURL=boundedBuffer.js.map","export var TelemetryType = {\n    log: 'log',\n    configuration: 'configuration',\n    usage: 'usage',\n};\n//# sourceMappingURL=rawTelemetryEvent.types.js.map","import { ConsoleApiName } from '../../tools/display';\nimport { NO_ERROR_STACK_PRESENT_MESSAGE } from '../error/error';\nimport { toStackTraceString } from '../../tools/stackTrace/handlingStack';\nimport { getExperimentalFeatures } from '../../tools/experimentalFeatures';\nimport { INTAKE_SITE_STAGING, INTAKE_SITE_US1_FED } from '../configuration';\nimport { Observable } from '../../tools/observable';\nimport { timeStampNow } from '../../tools/utils/timeUtils';\nimport { displayIfDebugEnabled, startMonitorErrorCollection } from '../../tools/monitor';\nimport { sendToExtension } from '../../tools/sendToExtension';\nimport { startsWith, arrayFrom, includes, assign } from '../../tools/utils/polyfills';\nimport { performDraw } from '../../tools/utils/numberUtils';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nimport { combine } from '../../tools/mergeInto';\nimport { computeStackTrace } from '../../tools/stackTrace/computeStackTrace';\nimport { getConnectivity } from '../connectivity';\nimport { createBoundedBuffer } from '../../tools/boundedBuffer';\nimport { TelemetryType } from './rawTelemetryEvent.types';\nvar ALLOWED_FRAME_URLS = [\n    'https://www.datadoghq-browser-agent.com',\n    'https://www.datad0g-browser-agent.com',\n    'https://d3uc069fcn7uxw.cloudfront.net',\n    'https://d20xtzwzcl0ceb.cloudfront.net',\n    'http://localhost',\n    '<anonymous>',\n];\nvar TELEMETRY_EXCLUDED_SITES = [INTAKE_SITE_US1_FED];\n// eslint-disable-next-line local-rules/disallow-side-effects\nvar preStartTelemetryBuffer = createBoundedBuffer();\nvar onRawTelemetryEventCollected = function (event) {\n    preStartTelemetryBuffer.add(function () { return onRawTelemetryEventCollected(event); });\n};\nexport function startTelemetry(telemetryService, configuration) {\n    var _a;\n    var contextProvider;\n    var observable = new Observable();\n    var alreadySentEvents = new Set();\n    var telemetryEnabled = !includes(TELEMETRY_EXCLUDED_SITES, configuration.site) && performDraw(configuration.telemetrySampleRate);\n    var telemetryEnabledPerType = (_a = {},\n        _a[TelemetryType.log] = telemetryEnabled,\n        _a[TelemetryType.configuration] = telemetryEnabled && performDraw(configuration.telemetryConfigurationSampleRate),\n        _a[TelemetryType.usage] = telemetryEnabled && performDraw(configuration.telemetryUsageSampleRate),\n        _a);\n    var runtimeEnvInfo = getRuntimeEnvInfo();\n    onRawTelemetryEventCollected = function (rawEvent) {\n        var stringifiedEvent = jsonStringify(rawEvent);\n        if (telemetryEnabledPerType[rawEvent.type] &&\n            alreadySentEvents.size < configuration.maxTelemetryEventsPerPage &&\n            !alreadySentEvents.has(stringifiedEvent)) {\n            var event_1 = toTelemetryEvent(telemetryService, rawEvent, runtimeEnvInfo);\n            observable.notify(event_1);\n            sendToExtension('telemetry', event_1);\n            alreadySentEvents.add(stringifiedEvent);\n        }\n    };\n    startMonitorErrorCollection(addTelemetryError);\n    function toTelemetryEvent(telemetryService, event, runtimeEnvInfo) {\n        return combine({\n            type: 'telemetry',\n            date: timeStampNow(),\n            service: telemetryService,\n            version: \"5.23.3\",\n            source: 'browser',\n            _dd: {\n                format_version: 2,\n            },\n            telemetry: combine(event, {\n                runtime_env: runtimeEnvInfo,\n                connectivity: getConnectivity(),\n            }),\n            experimental_features: arrayFrom(getExperimentalFeatures()),\n        }, contextProvider !== undefined ? contextProvider() : {});\n    }\n    return {\n        setContextProvider: function (provider) {\n            contextProvider = provider;\n        },\n        observable: observable,\n        enabled: telemetryEnabled,\n    };\n}\nfunction getRuntimeEnvInfo() {\n    return {\n        is_local_file: window.location.protocol === 'file:',\n        is_worker: 'WorkerGlobalScope' in self,\n    };\n}\nexport function startFakeTelemetry() {\n    var events = [];\n    onRawTelemetryEventCollected = function (event) {\n        events.push(event);\n    };\n    return events;\n}\n// need to be called after telemetry context is provided and observers are registered\nexport function drainPreStartTelemetry() {\n    preStartTelemetryBuffer.drain();\n}\nexport function resetTelemetry() {\n    preStartTelemetryBuffer = createBoundedBuffer();\n    onRawTelemetryEventCollected = function (event) {\n        preStartTelemetryBuffer.add(function () { return onRawTelemetryEventCollected(event); });\n    };\n}\n/**\n * Avoid mixing telemetry events from different data centers\n * but keep replicating staging events for reliability\n */\nexport function isTelemetryReplicationAllowed(configuration) {\n    return configuration.site === INTAKE_SITE_STAGING;\n}\nexport function addTelemetryDebug(message, context) {\n    displayIfDebugEnabled(ConsoleApiName.debug, message, context);\n    onRawTelemetryEventCollected(assign({\n        type: TelemetryType.log,\n        message: message,\n        status: \"debug\" /* StatusType.debug */,\n    }, context));\n}\nexport function addTelemetryError(e, context) {\n    onRawTelemetryEventCollected(assign({\n        type: TelemetryType.log,\n        status: \"error\" /* StatusType.error */,\n    }, formatError(e), context));\n}\nexport function addTelemetryConfiguration(configuration) {\n    onRawTelemetryEventCollected({\n        type: TelemetryType.configuration,\n        configuration: configuration,\n    });\n}\nexport function addTelemetryUsage(usage) {\n    onRawTelemetryEventCollected({\n        type: TelemetryType.usage,\n        usage: usage,\n    });\n}\nexport function formatError(e) {\n    if (e instanceof Error) {\n        var stackTrace = computeStackTrace(e);\n        return {\n            error: {\n                kind: stackTrace.name,\n                stack: toStackTraceString(scrubCustomerFrames(stackTrace)),\n            },\n            message: stackTrace.message,\n        };\n    }\n    return {\n        error: {\n            stack: NO_ERROR_STACK_PRESENT_MESSAGE,\n        },\n        message: \"\".concat(\"Uncaught\" /* NonErrorPrefix.UNCAUGHT */, \" \").concat(jsonStringify(e)),\n    };\n}\nexport function scrubCustomerFrames(stackTrace) {\n    stackTrace.stack = stackTrace.stack.filter(function (frame) { return !frame.url || ALLOWED_FRAME_URLS.some(function (allowedFrameUrl) { return startsWith(frame.url, allowedFrameUrl); }); });\n    return stackTrace;\n}\n//# sourceMappingURL=telemetry.js.map","import { setInterval, clearInterval } from './timer';\nimport { removeItem } from './utils/arrayUtils';\nimport { addDuration, relativeNow, ONE_MINUTE } from './utils/timeUtils';\nvar END_OF_TIMES = Infinity;\nexport var CLEAR_OLD_VALUES_INTERVAL = ONE_MINUTE;\nexport function createValueHistory(_a) {\n    var expireDelay = _a.expireDelay, maxEntries = _a.maxEntries;\n    var entries = [];\n    var clearOldValuesInterval = setInterval(function () { return clearOldValues(); }, CLEAR_OLD_VALUES_INTERVAL);\n    function clearOldValues() {\n        var oldTimeThreshold = relativeNow() - expireDelay;\n        while (entries.length > 0 && entries[entries.length - 1].endTime < oldTimeThreshold) {\n            entries.pop();\n        }\n    }\n    /**\n     * Add a value to the history associated with a start time. Returns a reference to this newly\n     * added entry that can be removed or closed.\n     */\n    function add(value, startTime) {\n        var entry = {\n            value: value,\n            startTime: startTime,\n            endTime: END_OF_TIMES,\n            remove: function () {\n                removeItem(entries, entry);\n            },\n            close: function (endTime) {\n                entry.endTime = endTime;\n            },\n        };\n        if (maxEntries && entries.length >= maxEntries) {\n            entries.pop();\n        }\n        entries.unshift(entry);\n        return entry;\n    }\n    /**\n     * Return the latest value that was active during `startTime`, or the currently active value\n     * if no `startTime` is provided. This method assumes that entries are not overlapping.\n     *\n     * If `option.returnInactive` is true, returns the value at `startTime` (active or not).\n     */\n    function find(startTime, options) {\n        if (startTime === void 0) { startTime = END_OF_TIMES; }\n        if (options === void 0) { options = { returnInactive: false }; }\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if (entry.startTime <= startTime) {\n                if (options.returnInactive || startTime <= entry.endTime) {\n                    return entry.value;\n                }\n                break;\n            }\n        }\n    }\n    /**\n     * Helper function to close the currently active value, if any. This method assumes that entries\n     * are not overlapping.\n     */\n    function closeActive(endTime) {\n        var latestEntry = entries[0];\n        if (latestEntry && latestEntry.endTime === END_OF_TIMES) {\n            latestEntry.close(endTime);\n        }\n    }\n    /**\n     * Return all values with an active period overlapping with the duration,\n     * or all values that were active during `startTime` if no duration is provided,\n     * or all currently active values if no `startTime` is provided.\n     */\n    function findAll(startTime, duration) {\n        if (startTime === void 0) { startTime = END_OF_TIMES; }\n        if (duration === void 0) { duration = 0; }\n        var endTime = addDuration(startTime, duration);\n        return entries\n            .filter(function (entry) { return entry.startTime <= endTime && startTime <= entry.endTime; })\n            .map(function (entry) { return entry.value; });\n    }\n    /**\n     * Remove all entries from this collection.\n     */\n    function reset() {\n        entries = [];\n    }\n    /**\n     * Stop internal garbage collection of past entries.\n     */\n    function stop() {\n        clearInterval(clearOldValuesInterval);\n    }\n    return { add: add, find: find, closeActive: closeActive, findAll: findAll, reset: reset, stop: stop };\n}\n//# sourceMappingURL=valueHistory.js.map","import { Observable } from '../../tools/observable';\nimport { createValueHistory } from '../../tools/valueHistory';\nimport { relativeNow, clocksOrigin, ONE_MINUTE } from '../../tools/utils/timeUtils';\nimport { addEventListener, addEventListeners } from '../../browser/addEventListener';\nimport { clearInterval, setInterval } from '../../tools/timer';\nimport { SESSION_TIME_OUT_DELAY } from './sessionConstants';\nimport { startSessionStore } from './sessionStore';\nexport var VISIBILITY_CHECK_DELAY = ONE_MINUTE;\nvar SESSION_CONTEXT_TIMEOUT_DELAY = SESSION_TIME_OUT_DELAY;\nvar stopCallbacks = [];\nexport function startSessionManager(configuration, productKey, computeSessionState, trackingConsentState) {\n    var renewObservable = new Observable();\n    var expireObservable = new Observable();\n    // TODO - Improve configuration type and remove assertion\n    var sessionStore = startSessionStore(configuration.sessionStoreStrategyType, productKey, computeSessionState);\n    stopCallbacks.push(function () { return sessionStore.stop(); });\n    var sessionContextHistory = createValueHistory({\n        expireDelay: SESSION_CONTEXT_TIMEOUT_DELAY,\n    });\n    stopCallbacks.push(function () { return sessionContextHistory.stop(); });\n    sessionStore.renewObservable.subscribe(function () {\n        sessionContextHistory.add(buildSessionContext(), relativeNow());\n        renewObservable.notify();\n    });\n    sessionStore.expireObservable.subscribe(function () {\n        expireObservable.notify();\n        sessionContextHistory.closeActive(relativeNow());\n    });\n    // We expand/renew session unconditionally as tracking consent is always granted when the session\n    // manager is started.\n    sessionStore.expandOrRenewSession();\n    sessionContextHistory.add(buildSessionContext(), clocksOrigin().relative);\n    trackingConsentState.observable.subscribe(function () {\n        if (trackingConsentState.isGranted()) {\n            sessionStore.expandOrRenewSession();\n        }\n        else {\n            sessionStore.expire();\n        }\n    });\n    trackActivity(configuration, function () {\n        if (trackingConsentState.isGranted()) {\n            sessionStore.expandOrRenewSession();\n        }\n    });\n    trackVisibility(configuration, function () { return sessionStore.expandSession(); });\n    trackResume(configuration, function () { return sessionStore.restartSession(); });\n    function buildSessionContext() {\n        return {\n            id: sessionStore.getSession().id,\n            trackingType: sessionStore.getSession()[productKey],\n            isReplayForced: !!sessionStore.getSession().forcedReplay,\n        };\n    }\n    return {\n        findSession: function (startTime, options) { return sessionContextHistory.find(startTime, options); },\n        renewObservable: renewObservable,\n        expireObservable: expireObservable,\n        sessionStateUpdateObservable: sessionStore.sessionStateUpdateObservable,\n        expire: sessionStore.expire,\n        updateSessionState: sessionStore.updateSessionState,\n    };\n}\nexport function stopSessionManager() {\n    stopCallbacks.forEach(function (e) { return e(); });\n    stopCallbacks = [];\n}\nfunction trackActivity(configuration, expandOrRenewSession) {\n    var stop = addEventListeners(configuration, window, [\"click\" /* DOM_EVENT.CLICK */, \"touchstart\" /* DOM_EVENT.TOUCH_START */, \"keydown\" /* DOM_EVENT.KEY_DOWN */, \"scroll\" /* DOM_EVENT.SCROLL */], expandOrRenewSession, { capture: true, passive: true }).stop;\n    stopCallbacks.push(stop);\n}\nfunction trackVisibility(configuration, expandSession) {\n    var expandSessionWhenVisible = function () {\n        if (document.visibilityState === 'visible') {\n            expandSession();\n        }\n    };\n    var stop = addEventListener(configuration, document, \"visibilitychange\" /* DOM_EVENT.VISIBILITY_CHANGE */, expandSessionWhenVisible).stop;\n    stopCallbacks.push(stop);\n    var visibilityCheckInterval = setInterval(expandSessionWhenVisible, VISIBILITY_CHECK_DELAY);\n    stopCallbacks.push(function () {\n        clearInterval(visibilityCheckInterval);\n    });\n}\nfunction trackResume(configuration, cb) {\n    var stop = addEventListener(configuration, window, \"resume\" /* DOM_EVENT.RESUME */, cb, { capture: true }).stop;\n    stopCallbacks.push(stop);\n}\n//# sourceMappingURL=sessionManager.js.map","export function isServerError(status) {\n    return status >= 500;\n}\nexport function tryToClone(response) {\n    try {\n        return response.clone();\n    }\n    catch (e) {\n        // clone can throw if the response has already been used by another instrumentation or is disturbed\n        return;\n    }\n}\n//# sourceMappingURL=responseUtils.js.map","import { setTimeout } from '../tools/timer';\nimport { clocksNow, ONE_MINUTE, ONE_SECOND } from '../tools/utils/timeUtils';\nimport { ONE_MEBI_BYTE, ONE_KIBI_BYTE } from '../tools/utils/byteUtils';\nimport { isServerError } from '../tools/utils/responseUtils';\nimport { ErrorSource } from '../domain/error/error.types';\nexport var MAX_ONGOING_BYTES_COUNT = 80 * ONE_KIBI_BYTE;\nexport var MAX_ONGOING_REQUESTS = 32;\nexport var MAX_QUEUE_BYTES_COUNT = 3 * ONE_MEBI_BYTE;\nexport var MAX_BACKOFF_TIME = ONE_MINUTE;\nexport var INITIAL_BACKOFF_TIME = ONE_SECOND;\nexport function sendWithRetryStrategy(payload, state, sendStrategy, trackType, reportError) {\n    if (state.transportStatus === 0 /* TransportStatus.UP */ &&\n        state.queuedPayloads.size() === 0 &&\n        state.bandwidthMonitor.canHandle(payload)) {\n        send(payload, state, sendStrategy, {\n            onSuccess: function () { return retryQueuedPayloads(0 /* RetryReason.AFTER_SUCCESS */, state, sendStrategy, trackType, reportError); },\n            onFailure: function () {\n                state.queuedPayloads.enqueue(payload);\n                scheduleRetry(state, sendStrategy, trackType, reportError);\n            },\n        });\n    }\n    else {\n        state.queuedPayloads.enqueue(payload);\n    }\n}\nfunction scheduleRetry(state, sendStrategy, trackType, reportError) {\n    if (state.transportStatus !== 2 /* TransportStatus.DOWN */) {\n        return;\n    }\n    setTimeout(function () {\n        var payload = state.queuedPayloads.first();\n        send(payload, state, sendStrategy, {\n            onSuccess: function () {\n                state.queuedPayloads.dequeue();\n                state.currentBackoffTime = INITIAL_BACKOFF_TIME;\n                retryQueuedPayloads(1 /* RetryReason.AFTER_RESUME */, state, sendStrategy, trackType, reportError);\n            },\n            onFailure: function () {\n                state.currentBackoffTime = Math.min(MAX_BACKOFF_TIME, state.currentBackoffTime * 2);\n                scheduleRetry(state, sendStrategy, trackType, reportError);\n            },\n        });\n    }, state.currentBackoffTime);\n}\nfunction send(payload, state, sendStrategy, _a) {\n    var onSuccess = _a.onSuccess, onFailure = _a.onFailure;\n    state.bandwidthMonitor.add(payload);\n    sendStrategy(payload, function (response) {\n        state.bandwidthMonitor.remove(payload);\n        if (!shouldRetryRequest(response)) {\n            state.transportStatus = 0 /* TransportStatus.UP */;\n            onSuccess();\n        }\n        else {\n            // do not consider transport down if another ongoing request could succeed\n            state.transportStatus =\n                state.bandwidthMonitor.ongoingRequestCount > 0 ? 1 /* TransportStatus.FAILURE_DETECTED */ : 2 /* TransportStatus.DOWN */;\n            payload.retry = {\n                count: payload.retry ? payload.retry.count + 1 : 1,\n                lastFailureStatus: response.status,\n            };\n            onFailure();\n        }\n    });\n}\nfunction retryQueuedPayloads(reason, state, sendStrategy, trackType, reportError) {\n    if (reason === 0 /* RetryReason.AFTER_SUCCESS */ && state.queuedPayloads.isFull() && !state.queueFullReported) {\n        reportError({\n            message: \"Reached max \".concat(trackType, \" events size queued for upload: \").concat(MAX_QUEUE_BYTES_COUNT / ONE_MEBI_BYTE, \"MiB\"),\n            source: ErrorSource.AGENT,\n            startClocks: clocksNow(),\n        });\n        state.queueFullReported = true;\n    }\n    var previousQueue = state.queuedPayloads;\n    state.queuedPayloads = newPayloadQueue();\n    while (previousQueue.size() > 0) {\n        sendWithRetryStrategy(previousQueue.dequeue(), state, sendStrategy, trackType, reportError);\n    }\n}\nfunction shouldRetryRequest(response) {\n    return (response.type !== 'opaque' &&\n        ((response.status === 0 && !navigator.onLine) ||\n            response.status === 408 ||\n            response.status === 429 ||\n            isServerError(response.status)));\n}\nexport function newRetryState() {\n    return {\n        transportStatus: 0 /* TransportStatus.UP */,\n        currentBackoffTime: INITIAL_BACKOFF_TIME,\n        bandwidthMonitor: newBandwidthMonitor(),\n        queuedPayloads: newPayloadQueue(),\n        queueFullReported: false,\n    };\n}\nfunction newPayloadQueue() {\n    var queue = [];\n    return {\n        bytesCount: 0,\n        enqueue: function (payload) {\n            if (this.isFull()) {\n                return;\n            }\n            queue.push(payload);\n            this.bytesCount += payload.bytesCount;\n        },\n        first: function () {\n            return queue[0];\n        },\n        dequeue: function () {\n            var payload = queue.shift();\n            if (payload) {\n                this.bytesCount -= payload.bytesCount;\n            }\n            return payload;\n        },\n        size: function () {\n            return queue.length;\n        },\n        isFull: function () {\n            return this.bytesCount >= MAX_QUEUE_BYTES_COUNT;\n        },\n    };\n}\nfunction newBandwidthMonitor() {\n    return {\n        ongoingRequestCount: 0,\n        ongoingByteCount: 0,\n        canHandle: function (payload) {\n            return (this.ongoingRequestCount === 0 ||\n                (this.ongoingByteCount + payload.bytesCount <= MAX_ONGOING_BYTES_COUNT &&\n                    this.ongoingRequestCount < MAX_ONGOING_REQUESTS));\n        },\n        add: function (payload) {\n            this.ongoingRequestCount += 1;\n            this.ongoingByteCount += payload.bytesCount;\n        },\n        remove: function (payload) {\n            this.ongoingRequestCount -= 1;\n            this.ongoingByteCount -= payload.bytesCount;\n        },\n    };\n}\n//# sourceMappingURL=sendWithRetryStrategy.js.map","import { addTelemetryError } from '../domain/telemetry';\nimport { monitor } from '../tools/monitor';\nimport { addEventListener } from '../browser/addEventListener';\nimport { newRetryState, sendWithRetryStrategy } from './sendWithRetryStrategy';\nexport function createHttpRequest(configuration, endpointBuilder, bytesLimit, reportError) {\n    var retryState = newRetryState();\n    var sendStrategyForRetry = function (payload, onResponse) {\n        return fetchKeepAliveStrategy(configuration, endpointBuilder, bytesLimit, payload, onResponse);\n    };\n    return {\n        send: function (payload) {\n            sendWithRetryStrategy(payload, retryState, sendStrategyForRetry, endpointBuilder.trackType, reportError);\n        },\n        /**\n         * Since fetch keepalive behaves like regular fetch on Firefox,\n         * keep using sendBeaconStrategy on exit\n         */\n        sendOnExit: function (payload) {\n            sendBeaconStrategy(configuration, endpointBuilder, bytesLimit, payload);\n        },\n    };\n}\nfunction sendBeaconStrategy(configuration, endpointBuilder, bytesLimit, payload) {\n    var canUseBeacon = !!navigator.sendBeacon && payload.bytesCount < bytesLimit;\n    if (canUseBeacon) {\n        try {\n            var beaconUrl = endpointBuilder.build('beacon', payload);\n            var isQueued = navigator.sendBeacon(beaconUrl, payload.data);\n            if (isQueued) {\n                return;\n            }\n        }\n        catch (e) {\n            reportBeaconError(e);\n        }\n    }\n    var xhrUrl = endpointBuilder.build('xhr', payload);\n    sendXHR(configuration, xhrUrl, payload.data);\n}\nvar hasReportedBeaconError = false;\nfunction reportBeaconError(e) {\n    if (!hasReportedBeaconError) {\n        hasReportedBeaconError = true;\n        addTelemetryError(e);\n    }\n}\nexport function fetchKeepAliveStrategy(configuration, endpointBuilder, bytesLimit, payload, onResponse) {\n    var canUseKeepAlive = isKeepAliveSupported() && payload.bytesCount < bytesLimit;\n    if (canUseKeepAlive) {\n        var fetchUrl = endpointBuilder.build('fetch', payload);\n        fetch(fetchUrl, { method: 'POST', body: payload.data, keepalive: true, mode: 'cors' }).then(monitor(function (response) { return onResponse === null || onResponse === void 0 ? void 0 : onResponse({ status: response.status, type: response.type }); }), monitor(function () {\n            var xhrUrl = endpointBuilder.build('xhr', payload);\n            // failed to queue the request\n            sendXHR(configuration, xhrUrl, payload.data, onResponse);\n        }));\n    }\n    else {\n        var xhrUrl = endpointBuilder.build('xhr', payload);\n        sendXHR(configuration, xhrUrl, payload.data, onResponse);\n    }\n}\nfunction isKeepAliveSupported() {\n    // Request can throw, cf https://developer.mozilla.org/en-US/docs/Web/API/Request/Request#errors\n    try {\n        return window.Request && 'keepalive' in new Request('http://a');\n    }\n    catch (_a) {\n        return false;\n    }\n}\nexport function sendXHR(configuration, url, data, onResponse) {\n    var request = new XMLHttpRequest();\n    request.open('POST', url, true);\n    if (data instanceof Blob) {\n        // When using a Blob instance, IE does not use its 'type' to define the 'Content-Type' header\n        // automatically, so the intake request ends up being rejected with an HTTP status 415\n        // Defining the header manually fixes this issue.\n        request.setRequestHeader('Content-Type', data.type);\n    }\n    addEventListener(configuration, request, 'loadend', function () {\n        onResponse === null || onResponse === void 0 ? void 0 : onResponse({ status: request.status });\n    }, {\n        // prevent multiple onResponse callbacks\n        // if the xhr instance is reused by a third party\n        once: true,\n    });\n    request.send(data);\n}\n//# sourceMappingURL=httpRequest.js.map","import { endsWith, includes } from '../tools/utils/polyfills';\nimport { getGlobalObject } from '../tools/getGlobalObject';\nexport function getEventBridge() {\n    var eventBridgeGlobal = getEventBridgeGlobal();\n    if (!eventBridgeGlobal) {\n        return;\n    }\n    return {\n        getCapabilities: function () {\n            var _a;\n            return JSON.parse(((_a = eventBridgeGlobal.getCapabilities) === null || _a === void 0 ? void 0 : _a.call(eventBridgeGlobal)) || '[]');\n        },\n        getPrivacyLevel: function () {\n            var _a;\n            return (_a = eventBridgeGlobal.getPrivacyLevel) === null || _a === void 0 ? void 0 : _a.call(eventBridgeGlobal);\n        },\n        getAllowedWebViewHosts: function () {\n            return JSON.parse(eventBridgeGlobal.getAllowedWebViewHosts());\n        },\n        send: function (eventType, event, viewId) {\n            var view = viewId ? { id: viewId } : undefined;\n            eventBridgeGlobal.send(JSON.stringify({ eventType: eventType, event: event, view: view }));\n        },\n    };\n}\nexport function bridgeSupports(capability) {\n    var bridge = getEventBridge();\n    return !!bridge && includes(bridge.getCapabilities(), capability);\n}\nexport function canUseEventBridge(currentHost) {\n    var _a;\n    if (currentHost === void 0) { currentHost = (_a = getGlobalObject().location) === null || _a === void 0 ? void 0 : _a.hostname; }\n    var bridge = getEventBridge();\n    return (!!bridge &&\n        bridge\n            .getAllowedWebViewHosts()\n            .some(function (allowedHost) { return currentHost === allowedHost || endsWith(currentHost, \".\".concat(allowedHost)); }));\n}\nfunction getEventBridgeGlobal() {\n    return getGlobalObject().DatadogEventBridge;\n}\n//# sourceMappingURL=eventBridge.js.map","import { Observable } from '../tools/observable';\nimport { objectValues, includes } from '../tools/utils/polyfills';\nimport { addEventListeners, addEventListener } from './addEventListener';\nexport var PageExitReason = {\n    HIDDEN: 'visibility_hidden',\n    UNLOADING: 'before_unload',\n    PAGEHIDE: 'page_hide',\n    FROZEN: 'page_frozen',\n};\nexport function createPageExitObservable(configuration) {\n    return new Observable(function (observable) {\n        var stopListeners = addEventListeners(configuration, window, [\"visibilitychange\" /* DOM_EVENT.VISIBILITY_CHANGE */, \"freeze\" /* DOM_EVENT.FREEZE */], function (event) {\n            if (event.type === \"visibilitychange\" /* DOM_EVENT.VISIBILITY_CHANGE */ && document.visibilityState === 'hidden') {\n                /**\n                 * Only event that guarantee to fire on mobile devices when the page transitions to background state\n                 * (e.g. when user switches to a different application, goes to homescreen, etc), or is being unloaded.\n                 */\n                observable.notify({ reason: PageExitReason.HIDDEN });\n            }\n            else if (event.type === \"freeze\" /* DOM_EVENT.FREEZE */) {\n                /**\n                 * After transitioning in background a tab can be freezed to preserve resources. (cf: https://developer.chrome.com/blog/page-lifecycle-api)\n                 * Allow to collect events happening between hidden and frozen state.\n                 */\n                observable.notify({ reason: PageExitReason.FROZEN });\n            }\n        }, { capture: true }).stop;\n        var stopBeforeUnloadListener = addEventListener(configuration, window, \"beforeunload\" /* DOM_EVENT.BEFORE_UNLOAD */, function () {\n            observable.notify({ reason: PageExitReason.UNLOADING });\n        }).stop;\n        return function () {\n            stopListeners();\n            stopBeforeUnloadListener();\n        };\n    });\n}\nexport function isPageExitReason(reason) {\n    return includes(objectValues(PageExitReason), reason);\n}\n//# sourceMappingURL=pageExitObservable.js.map","import { DOCS_TROUBLESHOOTING, MORE_DETAILS, display } from '../tools/display';\nimport { objectValues } from '../tools/utils/polyfills';\nimport { isPageExitReason } from '../browser/pageExitObservable';\nimport { jsonStringify } from '../tools/serialisation/jsonStringify';\nimport { computeBytesCount } from '../tools/utils/byteUtils';\nexport function createBatch(_a) {\n    var encoder = _a.encoder, request = _a.request, flushController = _a.flushController, messageBytesLimit = _a.messageBytesLimit;\n    var upsertBuffer = {};\n    var flushSubscription = flushController.flushObservable.subscribe(function (event) { return flush(event); });\n    function push(serializedMessage, estimatedMessageBytesCount, key) {\n        flushController.notifyBeforeAddMessage(estimatedMessageBytesCount);\n        if (key !== undefined) {\n            upsertBuffer[key] = serializedMessage;\n            flushController.notifyAfterAddMessage();\n        }\n        else {\n            encoder.write(encoder.isEmpty ? serializedMessage : \"\\n\".concat(serializedMessage), function (realMessageBytesCount) {\n                flushController.notifyAfterAddMessage(realMessageBytesCount - estimatedMessageBytesCount);\n            });\n        }\n    }\n    function hasMessageFor(key) {\n        return key !== undefined && upsertBuffer[key] !== undefined;\n    }\n    function remove(key) {\n        var removedMessage = upsertBuffer[key];\n        delete upsertBuffer[key];\n        var messageBytesCount = encoder.estimateEncodedBytesCount(removedMessage);\n        flushController.notifyAfterRemoveMessage(messageBytesCount);\n    }\n    function addOrUpdate(message, key) {\n        var serializedMessage = jsonStringify(message);\n        var estimatedMessageBytesCount = encoder.estimateEncodedBytesCount(serializedMessage);\n        if (estimatedMessageBytesCount >= messageBytesLimit) {\n            display.warn(\"Discarded a message whose size was bigger than the maximum allowed size \".concat(messageBytesLimit, \"KB. \").concat(MORE_DETAILS, \" \").concat(DOCS_TROUBLESHOOTING, \"/#technical-limitations\"));\n            return;\n        }\n        if (hasMessageFor(key)) {\n            remove(key);\n        }\n        push(serializedMessage, estimatedMessageBytesCount, key);\n    }\n    function flush(event) {\n        var upsertMessages = objectValues(upsertBuffer).join('\\n');\n        upsertBuffer = {};\n        var isPageExit = isPageExitReason(event.reason);\n        var send = isPageExit ? request.sendOnExit : request.send;\n        if (isPageExit &&\n            // Note: checking that the encoder is async is not strictly needed, but it's an optimization:\n            // if the encoder is async we need to send two requests in some cases (one for encoded data\n            // and the other for non-encoded data). But if it's not async, we don't have to worry about\n            // it and always send a single request.\n            encoder.isAsync) {\n            var encoderResult = encoder.finishSync();\n            // Send encoded messages\n            if (encoderResult.outputBytesCount) {\n                send(formatPayloadFromEncoder(encoderResult));\n            }\n            // Send messages that are not yet encoded at this point\n            var pendingMessages = [encoderResult.pendingData, upsertMessages].filter(Boolean).join('\\n');\n            if (pendingMessages) {\n                send({\n                    data: pendingMessages,\n                    bytesCount: computeBytesCount(pendingMessages),\n                });\n            }\n        }\n        else {\n            if (upsertMessages) {\n                encoder.write(encoder.isEmpty ? upsertMessages : \"\\n\".concat(upsertMessages));\n            }\n            encoder.finish(function (encoderResult) {\n                send(formatPayloadFromEncoder(encoderResult));\n            });\n        }\n    }\n    return {\n        flushController: flushController,\n        add: addOrUpdate,\n        upsert: addOrUpdate,\n        stop: flushSubscription.unsubscribe,\n    };\n}\nfunction formatPayloadFromEncoder(encoderResult) {\n    var data;\n    if (typeof encoderResult.output === 'string') {\n        data = encoderResult.output;\n    }\n    else {\n        data = new Blob([encoderResult.output], {\n            // This will set the 'Content-Type: text/plain' header. Reasoning:\n            // * The intake rejects the request if there is no content type.\n            // * The browser will issue CORS preflight requests if we set it to 'application/json', which\n            // could induce higher intake load (and maybe has other impacts).\n            // * Also it's not quite JSON, since we are concatenating multiple JSON objects separated by\n            // new lines.\n            type: 'text/plain',\n        });\n    }\n    return {\n        data: data,\n        bytesCount: encoderResult.outputBytesCount,\n        encoding: encoderResult.encoding,\n    };\n}\n//# sourceMappingURL=batch.js.map","import { Observable } from '../tools/observable';\nimport { clearTimeout, setTimeout } from '../tools/timer';\n/**\n * Returns a \"flush controller\", responsible of notifying when flushing a pool of pending data needs\n * to happen. The implementation is designed to support both synchronous and asynchronous usages,\n * but relies on invariants described in each method documentation to keep a coherent state.\n */\nexport function createFlushController(_a) {\n    var messagesLimit = _a.messagesLimit, bytesLimit = _a.bytesLimit, durationLimit = _a.durationLimit, pageExitObservable = _a.pageExitObservable, sessionExpireObservable = _a.sessionExpireObservable;\n    var pageExitSubscription = pageExitObservable.subscribe(function (event) { return flush(event.reason); });\n    var sessionExpireSubscription = sessionExpireObservable.subscribe(function () { return flush('session_expire'); });\n    var flushObservable = new Observable(function () { return function () {\n        pageExitSubscription.unsubscribe();\n        sessionExpireSubscription.unsubscribe();\n    }; });\n    var currentBytesCount = 0;\n    var currentMessagesCount = 0;\n    function flush(flushReason) {\n        if (currentMessagesCount === 0) {\n            return;\n        }\n        var messagesCount = currentMessagesCount;\n        var bytesCount = currentBytesCount;\n        currentMessagesCount = 0;\n        currentBytesCount = 0;\n        cancelDurationLimitTimeout();\n        flushObservable.notify({\n            reason: flushReason,\n            messagesCount: messagesCount,\n            bytesCount: bytesCount,\n        });\n    }\n    var durationLimitTimeoutId;\n    function scheduleDurationLimitTimeout() {\n        if (durationLimitTimeoutId === undefined) {\n            durationLimitTimeoutId = setTimeout(function () {\n                flush('duration_limit');\n            }, durationLimit);\n        }\n    }\n    function cancelDurationLimitTimeout() {\n        clearTimeout(durationLimitTimeoutId);\n        durationLimitTimeoutId = undefined;\n    }\n    return {\n        flushObservable: flushObservable,\n        get messagesCount() {\n            return currentMessagesCount;\n        },\n        /**\n         * Notifies that a message will be added to a pool of pending messages waiting to be flushed.\n         *\n         * This function needs to be called synchronously, right before adding the message, so no flush\n         * event can happen after `notifyBeforeAddMessage` and before adding the message.\n         *\n         * @param estimatedMessageBytesCount: an estimation of the message bytes count once it is\n         * actually added.\n         */\n        notifyBeforeAddMessage: function (estimatedMessageBytesCount) {\n            if (currentBytesCount + estimatedMessageBytesCount >= bytesLimit) {\n                flush('bytes_limit');\n            }\n            // Consider the message to be added now rather than in `notifyAfterAddMessage`, because if no\n            // message was added yet and `notifyAfterAddMessage` is called asynchronously, we still want\n            // to notify when a flush is needed (for example on page exit).\n            currentMessagesCount += 1;\n            currentBytesCount += estimatedMessageBytesCount;\n            scheduleDurationLimitTimeout();\n        },\n        /**\n         * Notifies that a message *was* added to a pool of pending messages waiting to be flushed.\n         *\n         * This function can be called asynchronously after the message was added, but in this case it\n         * should not be called if a flush event occurred in between.\n         *\n         * @param messageBytesCountDiff: the difference between the estimated message bytes count and\n         * its actual bytes count once added to the pool.\n         */\n        notifyAfterAddMessage: function (messageBytesCountDiff) {\n            if (messageBytesCountDiff === void 0) { messageBytesCountDiff = 0; }\n            currentBytesCount += messageBytesCountDiff;\n            if (currentMessagesCount >= messagesLimit) {\n                flush('messages_limit');\n            }\n            else if (currentBytesCount >= bytesLimit) {\n                flush('bytes_limit');\n            }\n        },\n        /**\n         * Notifies that a message was removed from a pool of pending messages waiting to be flushed.\n         *\n         * This function needs to be called synchronously, right after removing the message, so no flush\n         * event can happen after removing the message and before `notifyAfterRemoveMessage`.\n         *\n         * @param messageBytesCount: the message bytes count that was added to the pool. Should\n         * correspond to the sum of bytes counts passed to `notifyBeforeAddMessage` and\n         * `notifyAfterAddMessage`.\n         */\n        notifyAfterRemoveMessage: function (messageBytesCount) {\n            currentBytesCount -= messageBytesCount;\n            currentMessagesCount -= 1;\n            if (currentMessagesCount === 0) {\n                cancelDurationLimitTimeout();\n            }\n        },\n    };\n}\n//# sourceMappingURL=flushController.js.map","import { createBatch } from './batch';\nimport { createHttpRequest } from './httpRequest';\nimport { createFlushController } from './flushController';\nexport function startBatchWithReplica(configuration, primary, replica, reportError, pageExitObservable, sessionExpireObservable, batchFactoryImp) {\n    if (batchFactoryImp === void 0) { batchFactoryImp = createBatch; }\n    var primaryBatch = createBatchFromConfig(configuration, primary);\n    var replicaBatch = replica && createBatchFromConfig(configuration, replica);\n    function createBatchFromConfig(configuration, _a) {\n        var endpoint = _a.endpoint, encoder = _a.encoder;\n        return batchFactoryImp({\n            encoder: encoder,\n            request: createHttpRequest(configuration, endpoint, configuration.batchBytesLimit, reportError),\n            flushController: createFlushController({\n                messagesLimit: configuration.batchMessagesLimit,\n                bytesLimit: configuration.batchBytesLimit,\n                durationLimit: configuration.flushTimeout,\n                pageExitObservable: pageExitObservable,\n                sessionExpireObservable: sessionExpireObservable,\n            }),\n            messageBytesLimit: configuration.messageBytesLimit,\n        });\n    }\n    return {\n        flushObservable: primaryBatch.flushController.flushObservable,\n        add: function (message, replicated) {\n            if (replicated === void 0) { replicated = true; }\n            primaryBatch.add(message);\n            if (replicaBatch && replicated) {\n                replicaBatch.add(replica.transformMessage ? replica.transformMessage(message) : message);\n            }\n        },\n        upsert: function (message, key) {\n            primaryBatch.upsert(message, key);\n            if (replicaBatch) {\n                replicaBatch.upsert(replica.transformMessage ? replica.transformMessage(message) : message, key);\n            }\n        },\n        stop: function () {\n            primaryBatch.stop();\n            if (replicaBatch) {\n                replicaBatch.stop();\n            }\n        },\n    };\n}\n//# sourceMappingURL=startBatchWithReplica.js.map","import { computeBytesCount } from './utils/byteUtils';\nexport function createIdentityEncoder() {\n    var output = '';\n    var outputBytesCount = 0;\n    return {\n        isAsync: false,\n        get isEmpty() {\n            return !output;\n        },\n        write: function (data, callback) {\n            var additionalEncodedBytesCount = computeBytesCount(data);\n            outputBytesCount += additionalEncodedBytesCount;\n            output += data;\n            if (callback) {\n                callback(additionalEncodedBytesCount);\n            }\n        },\n        finish: function (callback) {\n            callback(this.finishSync());\n        },\n        finishSync: function () {\n            var result = {\n                output: output,\n                outputBytesCount: outputBytesCount,\n                rawBytesCount: outputBytesCount,\n                pendingData: '',\n            };\n            output = '';\n            outputBytesCount = 0;\n            return result;\n        },\n        estimateEncodedBytesCount: function (data) {\n            return data.length;\n        },\n    };\n}\n//# sourceMappingURL=encoder.js.map","// eslint-disable-next-line no-restricted-syntax\nvar AbstractLifeCycle = /** @class */ (function () {\n    function AbstractLifeCycle() {\n        this.callbacks = {};\n    }\n    AbstractLifeCycle.prototype.notify = function (eventType, data) {\n        var eventCallbacks = this.callbacks[eventType];\n        if (eventCallbacks) {\n            eventCallbacks.forEach(function (callback) { return callback(data); });\n        }\n    };\n    AbstractLifeCycle.prototype.subscribe = function (eventType, callback) {\n        var _this = this;\n        if (!this.callbacks[eventType]) {\n            this.callbacks[eventType] = [];\n        }\n        this.callbacks[eventType].push(callback);\n        return {\n            unsubscribe: function () {\n                _this.callbacks[eventType] = _this.callbacks[eventType].filter(function (other) { return callback !== other; });\n            },\n        };\n    };\n    return AbstractLifeCycle;\n}());\nexport { AbstractLifeCycle };\n//# sourceMappingURL=abstractLifeCycle.js.map","import { setTimeout } from '../../tools/timer';\nimport { clocksNow, ONE_MINUTE } from '../../tools/utils/timeUtils';\nimport { ErrorSource } from '../error/error.types';\nexport function createEventRateLimiter(eventType, limit, onLimitReached) {\n    var eventCount = 0;\n    var allowNextEvent = false;\n    return {\n        isLimitReached: function () {\n            if (eventCount === 0) {\n                setTimeout(function () {\n                    eventCount = 0;\n                }, ONE_MINUTE);\n            }\n            eventCount += 1;\n            if (eventCount <= limit || allowNextEvent) {\n                allowNextEvent = false;\n                return false;\n            }\n            if (eventCount === limit + 1) {\n                allowNextEvent = true;\n                try {\n                    onLimitReached({\n                        message: \"Reached max number of \".concat(eventType, \"s by minute: \").concat(limit),\n                        source: ErrorSource.AGENT,\n                        startClocks: clocksNow(),\n                    });\n                }\n                finally {\n                    allowNextEvent = false;\n                }\n            }\n            return true;\n        },\n    };\n}\n//# sourceMappingURL=createEventRateLimiter.js.map","import { addEventListener } from './addEventListener';\nexport function runOnReadyState(configuration, expectedReadyState, callback) {\n    if (document.readyState === expectedReadyState || document.readyState === 'complete') {\n        callback();\n    }\n    else {\n        var eventName = expectedReadyState === 'complete' ? \"load\" /* DOM_EVENT.LOAD */ : \"DOMContentLoaded\" /* DOM_EVENT.DOM_CONTENT_LOADED */;\n        addEventListener(configuration, window, eventName, callback, { once: true });\n    }\n}\n//# sourceMappingURL=runOnReadyState.js.map","import { instrumentMethod } from '../tools/instrumentMethod';\nimport { Observable } from '../tools/observable';\nimport { elapsed, clocksNow, timeStampNow } from '../tools/utils/timeUtils';\nimport { normalizeUrl } from '../tools/utils/urlPolyfill';\nimport { shallowClone } from '../tools/utils/objectUtils';\nimport { addEventListener } from './addEventListener';\nvar xhrObservable;\nvar xhrContexts = new WeakMap();\nexport function initXhrObservable(configuration) {\n    if (!xhrObservable) {\n        xhrObservable = createXhrObservable(configuration);\n    }\n    return xhrObservable;\n}\nfunction createXhrObservable(configuration) {\n    return new Observable(function (observable) {\n        var stopInstrumentingStart = instrumentMethod(XMLHttpRequest.prototype, 'open', openXhr).stop;\n        var stopInstrumentingSend = instrumentMethod(XMLHttpRequest.prototype, 'send', function (call) {\n            sendXhr(call, configuration, observable);\n        }, { computeHandlingStack: true }).stop;\n        var stopInstrumentingAbort = instrumentMethod(XMLHttpRequest.prototype, 'abort', abortXhr).stop;\n        return function () {\n            stopInstrumentingStart();\n            stopInstrumentingSend();\n            stopInstrumentingAbort();\n        };\n    });\n}\nfunction openXhr(_a) {\n    var xhr = _a.target, _b = _a.parameters, method = _b[0], url = _b[1];\n    xhrContexts.set(xhr, {\n        state: 'open',\n        method: String(method).toUpperCase(),\n        url: normalizeUrl(String(url)),\n    });\n}\nfunction sendXhr(_a, configuration, observable) {\n    var xhr = _a.target, handlingStack = _a.handlingStack;\n    var context = xhrContexts.get(xhr);\n    if (!context) {\n        return;\n    }\n    var startContext = context;\n    startContext.state = 'start';\n    startContext.startClocks = clocksNow();\n    startContext.isAborted = false;\n    startContext.xhr = xhr;\n    startContext.handlingStack = handlingStack;\n    var hasBeenReported = false;\n    var stopInstrumentingOnReadyStateChange = instrumentMethod(xhr, 'onreadystatechange', function () {\n        if (xhr.readyState === XMLHttpRequest.DONE) {\n            // Try to report the XHR as soon as possible, because the XHR may be mutated by the\n            // application during a future event. For example, Angular is calling .abort() on\n            // completed requests during an onreadystatechange event, so the status becomes '0'\n            // before the request is collected.\n            onEnd();\n        }\n    }).stop;\n    var onEnd = function () {\n        unsubscribeLoadEndListener();\n        stopInstrumentingOnReadyStateChange();\n        if (hasBeenReported) {\n            return;\n        }\n        hasBeenReported = true;\n        var completeContext = context;\n        completeContext.state = 'complete';\n        completeContext.duration = elapsed(startContext.startClocks.timeStamp, timeStampNow());\n        completeContext.status = xhr.status;\n        observable.notify(shallowClone(completeContext));\n    };\n    var unsubscribeLoadEndListener = addEventListener(configuration, xhr, 'loadend', onEnd).stop;\n    observable.notify(startContext);\n}\nfunction abortXhr(_a) {\n    var xhr = _a.target;\n    var context = xhrContexts.get(xhr);\n    if (context) {\n        context.isAborted = true;\n    }\n}\n//# sourceMappingURL=xhrObservable.js.map","import { instrumentMethod } from '../tools/instrumentMethod';\nimport { monitor } from '../tools/monitor';\nimport { Observable } from '../tools/observable';\nimport { assign } from '../tools/utils/polyfills';\nimport { clocksNow } from '../tools/utils/timeUtils';\nimport { normalizeUrl } from '../tools/utils/urlPolyfill';\nvar fetchObservable;\nexport function initFetchObservable() {\n    if (!fetchObservable) {\n        fetchObservable = createFetchObservable();\n    }\n    return fetchObservable;\n}\nexport function resetFetchObservable() {\n    fetchObservable = undefined;\n}\nfunction createFetchObservable() {\n    return new Observable(function (observable) {\n        if (!window.fetch) {\n            return;\n        }\n        var stop = instrumentMethod(window, 'fetch', function (call) { return beforeSend(call, observable); }, {\n            computeHandlingStack: true,\n        }).stop;\n        return stop;\n    });\n}\nfunction beforeSend(_a, observable) {\n    var parameters = _a.parameters, onPostCall = _a.onPostCall, handlingStack = _a.handlingStack;\n    var input = parameters[0], init = parameters[1];\n    var methodFromParams = init && init.method;\n    if (methodFromParams === undefined && input instanceof Request) {\n        methodFromParams = input.method;\n    }\n    var method = methodFromParams !== undefined ? String(methodFromParams).toUpperCase() : 'GET';\n    var url = input instanceof Request ? input.url : normalizeUrl(String(input));\n    var startClocks = clocksNow();\n    var context = {\n        state: 'start',\n        init: init,\n        input: input,\n        method: method,\n        startClocks: startClocks,\n        url: url,\n        handlingStack: handlingStack,\n    };\n    observable.notify(context);\n    // Those properties can be changed by observable subscribers\n    parameters[0] = context.input;\n    parameters[1] = context.init;\n    onPostCall(function (responsePromise) { return afterSend(observable, responsePromise, context); });\n}\nfunction afterSend(observable, responsePromise, startContext) {\n    var context = startContext;\n    function reportFetch(partialContext) {\n        context.state = 'resolve';\n        assign(context, partialContext);\n        observable.notify(context);\n    }\n    responsePromise.then(monitor(function (response) {\n        reportFetch({\n            response: response,\n            responseType: response.type,\n            status: response.status,\n            isAborted: false,\n        });\n    }), monitor(function (error) {\n        var _a, _b;\n        reportFetch({\n            status: 0,\n            isAborted: ((_b = (_a = context.init) === null || _a === void 0 ? void 0 : _a.signal) === null || _b === void 0 ? void 0 : _b.aborted) || (error instanceof DOMException && error.code === DOMException.ABORT_ERR),\n            error: error,\n        });\n    }));\n}\n//# sourceMappingURL=fetchObservable.js.map","import { flattenErrorCauses, tryToGetFingerprint } from '../error/error';\nimport { mergeObservables, Observable } from '../../tools/observable';\nimport { ConsoleApiName, globalConsole } from '../../tools/display';\nimport { callMonitored } from '../../tools/monitor';\nimport { sanitize } from '../../tools/serialisation/sanitize';\nimport { find } from '../../tools/utils/polyfills';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nimport { computeStackTrace } from '../../tools/stackTrace/computeStackTrace';\nimport { createHandlingStack, toStackTraceString, formatErrorMessage } from '../../tools/stackTrace/handlingStack';\nvar consoleObservablesByApi = {};\nexport function initConsoleObservable(apis) {\n    var consoleObservables = apis.map(function (api) {\n        if (!consoleObservablesByApi[api]) {\n            consoleObservablesByApi[api] = createConsoleObservable(api);\n        }\n        return consoleObservablesByApi[api];\n    });\n    return mergeObservables.apply(void 0, consoleObservables);\n}\nexport function resetConsoleObservable() {\n    consoleObservablesByApi = {};\n}\nfunction createConsoleObservable(api) {\n    return new Observable(function (observable) {\n        var originalConsoleApi = globalConsole[api];\n        globalConsole[api] = function () {\n            var params = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                params[_i] = arguments[_i];\n            }\n            originalConsoleApi.apply(console, params);\n            var handlingStack = createHandlingStack();\n            callMonitored(function () {\n                observable.notify(buildConsoleLog(params, api, handlingStack));\n            });\n        };\n        return function () {\n            globalConsole[api] = originalConsoleApi;\n        };\n    });\n}\nfunction buildConsoleLog(params, api, handlingStack) {\n    var message = params.map(function (param) { return formatConsoleParameters(param); }).join(' ');\n    var stack;\n    var fingerprint;\n    var causes;\n    if (api === ConsoleApiName.error) {\n        var firstErrorParam = find(params, function (param) { return param instanceof Error; });\n        stack = firstErrorParam ? toStackTraceString(computeStackTrace(firstErrorParam)) : undefined;\n        fingerprint = tryToGetFingerprint(firstErrorParam);\n        causes = firstErrorParam ? flattenErrorCauses(firstErrorParam, 'console') : undefined;\n    }\n    return {\n        api: api,\n        message: message,\n        stack: stack,\n        handlingStack: handlingStack,\n        fingerprint: fingerprint,\n        causes: causes,\n    };\n}\nfunction formatConsoleParameters(param) {\n    if (typeof param === 'string') {\n        return sanitize(param);\n    }\n    if (param instanceof Error) {\n        return formatErrorMessage(computeStackTrace(param));\n    }\n    return jsonStringify(sanitize(param), undefined, 2);\n}\n//# sourceMappingURL=consoleObservable.js.map","import { deepClone } from '../../tools/mergeInto';\nimport { getType } from '../../tools/utils/typeUtils';\nimport { sanitize } from '../../tools/serialisation/sanitize';\nimport { Observable } from '../../tools/observable';\nexport function createContextManager(customerDataTracker) {\n    var context = {};\n    var changeObservable = new Observable();\n    var contextManager = {\n        getContext: function () { return deepClone(context); },\n        setContext: function (newContext) {\n            if (getType(newContext) === 'object') {\n                context = sanitize(newContext);\n                customerDataTracker.updateCustomerData(context);\n            }\n            else {\n                contextManager.clearContext();\n            }\n            changeObservable.notify();\n        },\n        setContextProperty: function (key, property) {\n            context[key] = sanitize(property);\n            customerDataTracker.updateCustomerData(context);\n            changeObservable.notify();\n        },\n        removeContextProperty: function (key) {\n            delete context[key];\n            customerDataTracker.updateCustomerData(context);\n            changeObservable.notify();\n        },\n        clearContext: function () {\n            context = {};\n            customerDataTracker.resetCustomerData();\n            changeObservable.notify();\n        },\n        changeObservable: changeObservable,\n    };\n    return contextManager;\n}\n//# sourceMappingURL=contextManager.js.map","import { addEventListener } from '../../browser/addEventListener';\nimport { combine } from '../../tools/mergeInto';\nvar CONTEXT_STORE_KEY_PREFIX = '_dd_c';\nvar storageListeners = [];\nexport function storeContextManager(configuration, contextManager, productKey, customerDataType) {\n    var storageKey = buildStorageKey(productKey, customerDataType);\n    storageListeners.push(addEventListener(configuration, window, \"storage\" /* DOM_EVENT.STORAGE */, function (_a) {\n        var key = _a.key;\n        if (storageKey === key) {\n            synchronizeWithStorage();\n        }\n    }));\n    contextManager.changeObservable.subscribe(dumpToStorage);\n    contextManager.setContext(combine(getFromStorage(), contextManager.getContext()));\n    function synchronizeWithStorage() {\n        contextManager.setContext(getFromStorage());\n    }\n    function dumpToStorage() {\n        localStorage.setItem(storageKey, JSON.stringify(contextManager.getContext()));\n    }\n    function getFromStorage() {\n        var rawContext = localStorage.getItem(storageKey);\n        return rawContext !== null ? JSON.parse(rawContext) : {};\n    }\n}\nexport function buildStorageKey(productKey, customerDataType) {\n    return \"\".concat(CONTEXT_STORE_KEY_PREFIX, \"_\").concat(productKey, \"_\").concat(customerDataType);\n}\nexport function removeStorageListeners() {\n    storageListeners.map(function (listener) { return listener.stop(); });\n}\n//# sourceMappingURL=storeContextManager.js.map","import { ONE_KIBI_BYTE, computeBytesCount } from '../../tools/utils/byteUtils';\nimport { throttle } from '../../tools/utils/functionUtils';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nimport { DOCS_TROUBLESHOOTING, MORE_DETAILS, display } from '../../tools/display';\nimport { isEmptyObject } from '../../tools/utils/objectUtils';\n// RUM and logs batch bytes limit is 16KB\n// ensure that we leave room for other event attributes and maintain a decent amount of event per batch\n// (3KB (customer data) + 1KB (other attributes)) * 4 (events per batch) = 16KB\nexport var CUSTOMER_DATA_BYTES_LIMIT = 3 * ONE_KIBI_BYTE;\n// We observed that the compression ratio is around 8 in general, but we also want to keep a margin\n// because some data might not be compressed (ex: last view update on page exit). We chose 16KiB\n// because it is also the limit of the 'batchBytesCount' that we use for RUM and Logs data, but this\n// is a bit arbitrary.\nexport var CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT = 16 * ONE_KIBI_BYTE;\nexport var BYTES_COMPUTATION_THROTTLING_DELAY = 200;\nexport function createCustomerDataTrackerManager(compressionStatus) {\n    if (compressionStatus === void 0) { compressionStatus = 2 /* CustomerDataCompressionStatus.Disabled */; }\n    var customerDataTrackers = new Map();\n    var alreadyWarned = false;\n    function checkCustomerDataLimit(initialBytesCount) {\n        if (initialBytesCount === void 0) { initialBytesCount = 0; }\n        if (alreadyWarned || compressionStatus === 0 /* CustomerDataCompressionStatus.Unknown */) {\n            return;\n        }\n        var bytesCountLimit = compressionStatus === 2 /* CustomerDataCompressionStatus.Disabled */\n            ? CUSTOMER_DATA_BYTES_LIMIT\n            : CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT;\n        var bytesCount = initialBytesCount;\n        customerDataTrackers.forEach(function (tracker) {\n            bytesCount += tracker.getBytesCount();\n        });\n        if (bytesCount > bytesCountLimit) {\n            displayCustomerDataLimitReachedWarning(bytesCountLimit);\n            alreadyWarned = true;\n        }\n    }\n    return {\n        /**\n         * Creates a detached tracker. The manager will not store a reference to that tracker, and the\n         * bytes count will be counted independently from other detached trackers.\n         *\n         * This is particularly useful when we don't know when the tracker will be unused, so we don't\n         * leak memory (ex: when used in Logger instances).\n         */\n        createDetachedTracker: function () {\n            var tracker = createCustomerDataTracker(function () { return checkCustomerDataLimit(tracker.getBytesCount()); });\n            return tracker;\n        },\n        /**\n         * Creates a tracker if it doesn't exist, and returns it.\n         */\n        getOrCreateTracker: function (type) {\n            if (!customerDataTrackers.has(type)) {\n                customerDataTrackers.set(type, createCustomerDataTracker(checkCustomerDataLimit));\n            }\n            return customerDataTrackers.get(type);\n        },\n        setCompressionStatus: function (newCompressionStatus) {\n            if (compressionStatus === 0 /* CustomerDataCompressionStatus.Unknown */) {\n                compressionStatus = newCompressionStatus;\n                checkCustomerDataLimit();\n            }\n        },\n        getCompressionStatus: function () { return compressionStatus; },\n        stop: function () {\n            customerDataTrackers.forEach(function (tracker) { return tracker.stop(); });\n            customerDataTrackers.clear();\n        },\n    };\n}\nexport function createCustomerDataTracker(checkCustomerDataLimit) {\n    var bytesCountCache = 0;\n    // Throttle the bytes computation to minimize the impact on performance.\n    // Especially useful if the user call context APIs synchronously multiple times in a row\n    var _a = throttle(function (context) {\n        bytesCountCache = computeBytesCount(jsonStringify(context));\n        checkCustomerDataLimit();\n    }, BYTES_COMPUTATION_THROTTLING_DELAY), computeBytesCountThrottled = _a.throttled, cancelComputeBytesCount = _a.cancel;\n    var resetBytesCount = function () {\n        cancelComputeBytesCount();\n        bytesCountCache = 0;\n    };\n    return {\n        updateCustomerData: function (context) {\n            if (isEmptyObject(context)) {\n                resetBytesCount();\n            }\n            else {\n                computeBytesCountThrottled(context);\n            }\n        },\n        resetCustomerData: resetBytesCount,\n        getBytesCount: function () { return bytesCountCache; },\n        stop: function () {\n            cancelComputeBytesCount();\n        },\n    };\n}\nfunction displayCustomerDataLimitReachedWarning(bytesCountLimit) {\n    display.warn(\"Customer data exceeds the recommended \".concat(bytesCountLimit / ONE_KIBI_BYTE, \"KiB threshold. \").concat(MORE_DETAILS, \" \").concat(DOCS_TROUBLESHOOTING, \"/#customer-data-exceeds-the-recommended-threshold-warning\"));\n}\n//# sourceMappingURL=customerDataTracker.js.map","import { monitor } from './monitor';\nimport { noop } from './utils/functionUtils';\n/**\n * Read bytes from a ReadableStream until at least `limit` bytes have been read (or until the end of\n * the stream). The callback is invoked with the at most `limit` bytes, and indicates that the limit\n * has been exceeded if more bytes were available.\n */\nexport function readBytesFromStream(stream, callback, options) {\n    var reader = stream.getReader();\n    var chunks = [];\n    var readBytesCount = 0;\n    readMore();\n    function readMore() {\n        reader.read().then(monitor(function (result) {\n            if (result.done) {\n                onDone();\n                return;\n            }\n            if (options.collectStreamBody) {\n                chunks.push(result.value);\n            }\n            readBytesCount += result.value.length;\n            if (readBytesCount > options.bytesLimit) {\n                onDone();\n            }\n            else {\n                readMore();\n            }\n        }), monitor(function (error) { return callback(error); }));\n    }\n    function onDone() {\n        reader.cancel().catch(\n        // we don't care if cancel fails, but we still need to catch the error to avoid reporting it\n        // as an unhandled rejection\n        noop);\n        var bytes;\n        var limitExceeded;\n        if (options.collectStreamBody) {\n            var completeBuffer_1;\n            if (chunks.length === 1) {\n                // optimization: if the response is small enough to fit in a single buffer (provided by the browser), just\n                // use it directly.\n                completeBuffer_1 = chunks[0];\n            }\n            else {\n                // else, we need to copy buffers into a larger buffer to concatenate them.\n                completeBuffer_1 = new Uint8Array(readBytesCount);\n                var offset_1 = 0;\n                chunks.forEach(function (chunk) {\n                    completeBuffer_1.set(chunk, offset_1);\n                    offset_1 += chunk.length;\n                });\n            }\n            bytes = completeBuffer_1.slice(0, options.bytesLimit);\n            limitExceeded = completeBuffer_1.length > options.bytesLimit;\n        }\n        callback(undefined, bytes, limitExceeded);\n    }\n}\n//# sourceMappingURL=readBytesFromStream.js.map","import { getInitCookie } from '../../browser/cookie';\nexport var SYNTHETICS_TEST_ID_COOKIE_NAME = 'datadog-synthetics-public-id';\nexport var SYNTHETICS_RESULT_ID_COOKIE_NAME = 'datadog-synthetics-result-id';\nexport var SYNTHETICS_INJECTS_RUM_COOKIE_NAME = 'datadog-synthetics-injects-rum';\nexport function willSyntheticsInjectRum() {\n    return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM || getInitCookie(SYNTHETICS_INJECTS_RUM_COOKIE_NAME));\n}\nexport function getSyntheticsTestId() {\n    var value = window._DATADOG_SYNTHETICS_PUBLIC_ID || getInitCookie(SYNTHETICS_TEST_ID_COOKIE_NAME);\n    return typeof value === 'string' ? value : undefined;\n}\nexport function getSyntheticsResultId() {\n    var value = window._DATADOG_SYNTHETICS_RESULT_ID || getInitCookie(SYNTHETICS_RESULT_ID_COOKIE_NAME);\n    return typeof value === 'string' ? value : undefined;\n}\n//# sourceMappingURL=syntheticsWorkerValues.js.map","import { display } from '../../tools/display';\nimport { getType } from '../../tools/utils/typeUtils';\nimport { assign } from '../../tools/utils/polyfills';\n/**\n * Clone input data and ensure known user properties (id, name, email)\n * are strings, as defined here:\n * https://docs.datadoghq.com/logs/log_configuration/attributes_naming_convention/#user-related-attributes\n */\nexport function sanitizeUser(newUser) {\n    // We shallow clone only to prevent mutation of user data.\n    var user = assign({}, newUser);\n    var keys = ['id', 'name', 'email'];\n    keys.forEach(function (key) {\n        if (key in user) {\n            user[key] = String(user[key]);\n        }\n    });\n    return user;\n}\n/**\n * Simple check to ensure user is valid\n */\nexport function checkUser(newUser) {\n    var isValid = getType(newUser) === 'object';\n    if (!isValid) {\n        display.error('Unsupported user:', newUser);\n    }\n    return isValid;\n}\n//# sourceMappingURL=user.js.map","import { startsWith } from './utils/polyfills';\nimport { display } from './display';\nimport { getType } from './utils/typeUtils';\nexport function isMatchOption(item) {\n    var itemType = getType(item);\n    return itemType === 'string' || itemType === 'function' || item instanceof RegExp;\n}\n/**\n * Returns true if value can be matched by at least one of the provided MatchOptions.\n * When comparing strings, setting useStartsWith to true will compare the value with the start of\n * the option, instead of requiring an exact match.\n */\nexport function matchList(list, value, useStartsWith) {\n    if (useStartsWith === void 0) { useStartsWith = false; }\n    return list.some(function (item) {\n        try {\n            if (typeof item === 'function') {\n                return item(value);\n            }\n            else if (item instanceof RegExp) {\n                return item.test(value);\n            }\n            else if (typeof item === 'string') {\n                return useStartsWith ? startsWith(value, item) : item === value;\n            }\n        }\n        catch (e) {\n            display.error(e);\n        }\n        return false;\n    });\n}\n//# sourceMappingURL=matchOption.js.map","export function buildCommonContext(globalContextManager, userContextManager, recorderApi) {\n    return {\n        context: globalContextManager.getContext(),\n        user: userContextManager.getContext(),\n        hasReplay: recorderApi.isRecording() ? true : undefined,\n    };\n}\n//# sourceMappingURL=commonContext.js.map","import { objectEntries, shallowClone, performDraw, isNumber, assign, find, getType, isMatchOption, matchList, TraceContextInjection, } from '@datadog/browser-core';\nexport function isTracingOption(item) {\n    var expectedItem = item;\n    return (getType(expectedItem) === 'object' &&\n        isMatchOption(expectedItem.match) &&\n        Array.isArray(expectedItem.propagatorTypes));\n}\n/**\n * Clear tracing information to avoid incomplete traces. Ideally, we should do it when the\n * request did not reach the server, but the browser does not expose this. So, we clear tracing\n * information if the request ended with status 0 without being aborted by the application.\n *\n * Reasoning:\n *\n * * Applications are usually aborting requests after a bit of time, for example when the user is\n * typing (autocompletion) or navigating away (in a SPA). With a performant device and good\n * network conditions, the request is likely to reach the server before being canceled.\n *\n * * Requests aborted otherwise (ex: lack of internet, CORS issue, blocked by a privacy extension)\n * are likely to finish quickly and without reaching the server.\n *\n * Of course, it might not be the case every time, but it should limit having incomplete traces a\n * bit.\n * */\nexport function clearTracingIfNeeded(context) {\n    if (context.status === 0 && !context.isAborted) {\n        context.traceId = undefined;\n        context.spanId = undefined;\n        context.traceSampled = undefined;\n    }\n}\nexport function startTracer(configuration, sessionManager) {\n    return {\n        clearTracingIfNeeded: clearTracingIfNeeded,\n        traceFetch: function (context) {\n            return injectHeadersIfTracingAllowed(configuration, context, sessionManager, function (tracingHeaders) {\n                var _a;\n                if (context.input instanceof Request && !((_a = context.init) === null || _a === void 0 ? void 0 : _a.headers)) {\n                    context.input = new Request(context.input);\n                    Object.keys(tracingHeaders).forEach(function (key) {\n                        ;\n                        context.input.headers.append(key, tracingHeaders[key]);\n                    });\n                }\n                else {\n                    context.init = shallowClone(context.init);\n                    var headers_1 = [];\n                    if (context.init.headers instanceof Headers) {\n                        context.init.headers.forEach(function (value, key) {\n                            headers_1.push([key, value]);\n                        });\n                    }\n                    else if (Array.isArray(context.init.headers)) {\n                        context.init.headers.forEach(function (header) {\n                            headers_1.push(header);\n                        });\n                    }\n                    else if (context.init.headers) {\n                        Object.keys(context.init.headers).forEach(function (key) {\n                            headers_1.push([key, context.init.headers[key]]);\n                        });\n                    }\n                    context.init.headers = headers_1.concat(objectEntries(tracingHeaders));\n                }\n            });\n        },\n        traceXhr: function (context, xhr) {\n            return injectHeadersIfTracingAllowed(configuration, context, sessionManager, function (tracingHeaders) {\n                Object.keys(tracingHeaders).forEach(function (name) {\n                    xhr.setRequestHeader(name, tracingHeaders[name]);\n                });\n            });\n        },\n    };\n}\nfunction injectHeadersIfTracingAllowed(configuration, context, sessionManager, inject) {\n    if (!isTracingSupported() || !sessionManager.findTrackedSession()) {\n        return;\n    }\n    var tracingOption = find(configuration.allowedTracingUrls, function (tracingOption) {\n        return matchList([tracingOption.match], context.url, true);\n    });\n    if (!tracingOption) {\n        return;\n    }\n    context.traceSampled = !isNumber(configuration.traceSampleRate) || performDraw(configuration.traceSampleRate);\n    if (!context.traceSampled && configuration.traceContextInjection !== TraceContextInjection.ALL) {\n        return;\n    }\n    context.traceId = createTraceIdentifier();\n    context.spanId = createTraceIdentifier();\n    inject(makeTracingHeaders(context.traceId, context.spanId, context.traceSampled, tracingOption.propagatorTypes));\n}\nexport function isTracingSupported() {\n    return getCrypto() !== undefined;\n}\nexport function getCrypto() {\n    return window.crypto || window.msCrypto;\n}\n/**\n * When trace is not sampled, set priority to '0' instead of not adding the tracing headers\n * to prepare the implementation for sampling delegation.\n */\nfunction makeTracingHeaders(traceId, spanId, traceSampled, propagatorTypes) {\n    var tracingHeaders = {};\n    propagatorTypes.forEach(function (propagatorType) {\n        switch (propagatorType) {\n            case 'datadog': {\n                assign(tracingHeaders, {\n                    'x-datadog-origin': 'rum',\n                    'x-datadog-parent-id': spanId.toDecimalString(),\n                    'x-datadog-sampling-priority': traceSampled ? '1' : '0',\n                    'x-datadog-trace-id': traceId.toDecimalString(),\n                });\n                break;\n            }\n            // https://www.w3.org/TR/trace-context/\n            case 'tracecontext': {\n                assign(tracingHeaders, {\n                    traceparent: \"00-0000000000000000\".concat(traceId.toPaddedHexadecimalString(), \"-\").concat(spanId.toPaddedHexadecimalString(), \"-0\").concat(traceSampled ? '1' : '0'),\n                });\n                break;\n            }\n            // https://github.com/openzipkin/b3-propagation\n            case 'b3': {\n                assign(tracingHeaders, {\n                    b3: \"\".concat(traceId.toPaddedHexadecimalString(), \"-\").concat(spanId.toPaddedHexadecimalString(), \"-\").concat(traceSampled ? '1' : '0'),\n                });\n                break;\n            }\n            case 'b3multi': {\n                assign(tracingHeaders, {\n                    'X-B3-TraceId': traceId.toPaddedHexadecimalString(),\n                    'X-B3-SpanId': spanId.toPaddedHexadecimalString(),\n                    'X-B3-Sampled': traceSampled ? '1' : '0',\n                });\n                break;\n            }\n        }\n    });\n    return tracingHeaders;\n}\nexport function createTraceIdentifier() {\n    var buffer = new Uint8Array(8);\n    getCrypto().getRandomValues(buffer);\n    buffer[0] = buffer[0] & 0x7f; // force 63-bit\n    function readInt32(offset) {\n        return buffer[offset] * 16777216 + (buffer[offset + 1] << 16) + (buffer[offset + 2] << 8) + buffer[offset + 3];\n    }\n    function toString(radix) {\n        var high = readInt32(0);\n        var low = readInt32(4);\n        var str = '';\n        do {\n            var mod = (high % radix) * 4294967296 + low;\n            high = Math.floor(high / radix);\n            low = Math.floor(mod / radix);\n            str = (mod % radix).toString(radix) + str;\n        } while (high || low);\n        return str;\n    }\n    /**\n     * Format used everywhere except the trace intake\n     */\n    function toDecimalString() {\n        return toString(10);\n    }\n    /**\n     * Format used by OTel headers\n     */\n    function toPaddedHexadecimalString() {\n        var traceId = toString(16);\n        return Array(17 - traceId.length).join('0') + traceId;\n    }\n    return {\n        toDecimalString: toDecimalString,\n        toPaddedHexadecimalString: toPaddedHexadecimalString,\n    };\n}\n/* eslint-enable no-bitwise */\n//# sourceMappingURL=tracer.js.map","import { getType, arrayFrom, isMatchOption, serializeConfiguration, assign, DefaultPrivacyLevel, TraceContextInjection, display, objectHasValue, validateAndBuildConfiguration, isSampleRate, } from '@datadog/browser-core';\nimport { isTracingOption } from '../tracing/tracer';\nexport var DEFAULT_PROPAGATOR_TYPES = ['tracecontext', 'datadog'];\nexport function validateAndBuildRumConfiguration(initConfiguration) {\n    var _a, _b;\n    if (!initConfiguration.applicationId) {\n        display.error('Application ID is not configured, no RUM data will be collected.');\n        return;\n    }\n    if (!isSampleRate(initConfiguration.sessionReplaySampleRate, 'Session Replay') ||\n        !isSampleRate(initConfiguration.traceSampleRate, 'Trace')) {\n        return;\n    }\n    if (initConfiguration.excludedActivityUrls !== undefined && !Array.isArray(initConfiguration.excludedActivityUrls)) {\n        display.error('Excluded Activity Urls should be an array');\n        return;\n    }\n    var allowedTracingUrls = validateAndBuildTracingOptions(initConfiguration);\n    if (!allowedTracingUrls) {\n        return;\n    }\n    var baseConfiguration = validateAndBuildConfiguration(initConfiguration);\n    if (!baseConfiguration) {\n        return;\n    }\n    return assign({\n        applicationId: initConfiguration.applicationId,\n        version: initConfiguration.version || undefined,\n        actionNameAttribute: initConfiguration.actionNameAttribute,\n        sessionReplaySampleRate: (_a = initConfiguration.sessionReplaySampleRate) !== null && _a !== void 0 ? _a : 0,\n        startSessionReplayRecordingManually: !!initConfiguration.startSessionReplayRecordingManually,\n        traceSampleRate: initConfiguration.traceSampleRate,\n        allowedTracingUrls: allowedTracingUrls,\n        excludedActivityUrls: (_b = initConfiguration.excludedActivityUrls) !== null && _b !== void 0 ? _b : [],\n        workerUrl: initConfiguration.workerUrl,\n        compressIntakeRequests: !!initConfiguration.compressIntakeRequests,\n        trackUserInteractions: !!initConfiguration.trackUserInteractions,\n        trackViewsManually: !!initConfiguration.trackViewsManually,\n        trackResources: !!initConfiguration.trackResources,\n        trackLongTasks: !!initConfiguration.trackLongTasks,\n        subdomain: initConfiguration.subdomain,\n        defaultPrivacyLevel: objectHasValue(DefaultPrivacyLevel, initConfiguration.defaultPrivacyLevel)\n            ? initConfiguration.defaultPrivacyLevel\n            : DefaultPrivacyLevel.MASK,\n        enablePrivacyForActionName: !!initConfiguration.enablePrivacyForActionName,\n        customerDataTelemetrySampleRate: 1,\n        traceContextInjection: objectHasValue(TraceContextInjection, initConfiguration.traceContextInjection)\n            ? initConfiguration.traceContextInjection\n            : TraceContextInjection.ALL,\n        plugins: initConfiguration.betaPlugins || [],\n    }, baseConfiguration);\n}\n/**\n * Validates allowedTracingUrls and converts match options to tracing options\n */\nfunction validateAndBuildTracingOptions(initConfiguration) {\n    if (initConfiguration.allowedTracingUrls === undefined) {\n        return [];\n    }\n    if (!Array.isArray(initConfiguration.allowedTracingUrls)) {\n        display.error('Allowed Tracing URLs should be an array');\n        return;\n    }\n    if (initConfiguration.allowedTracingUrls.length !== 0 && initConfiguration.service === undefined) {\n        display.error('Service needs to be configured when tracing is enabled');\n        return;\n    }\n    // Convert from (MatchOption | TracingOption) to TracingOption, remove unknown properties\n    var tracingOptions = [];\n    initConfiguration.allowedTracingUrls.forEach(function (option) {\n        if (isMatchOption(option)) {\n            tracingOptions.push({ match: option, propagatorTypes: DEFAULT_PROPAGATOR_TYPES });\n        }\n        else if (isTracingOption(option)) {\n            tracingOptions.push(option);\n        }\n        else {\n            display.warn('Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter', option);\n        }\n    });\n    return tracingOptions;\n}\n/**\n * Combines the selected tracing propagators from the different options in allowedTracingUrls\n */\nfunction getSelectedTracingPropagators(configuration) {\n    var usedTracingPropagators = new Set();\n    if (Array.isArray(configuration.allowedTracingUrls) && configuration.allowedTracingUrls.length > 0) {\n        configuration.allowedTracingUrls.forEach(function (option) {\n            if (isMatchOption(option)) {\n                DEFAULT_PROPAGATOR_TYPES.forEach(function (propagatorType) { return usedTracingPropagators.add(propagatorType); });\n            }\n            else if (getType(option) === 'object' && Array.isArray(option.propagatorTypes)) {\n                // Ensure we have an array, as we cannot rely on types yet (configuration is provided by users)\n                option.propagatorTypes.forEach(function (propagatorType) { return usedTracingPropagators.add(propagatorType); });\n            }\n        });\n    }\n    return arrayFrom(usedTracingPropagators);\n}\nexport function serializeRumConfiguration(configuration) {\n    var _a;\n    var baseSerializedConfiguration = serializeConfiguration(configuration);\n    return assign({\n        session_replay_sample_rate: configuration.sessionReplaySampleRate,\n        start_session_replay_recording_manually: configuration.startSessionReplayRecordingManually,\n        trace_sample_rate: configuration.traceSampleRate,\n        trace_context_injection: configuration.traceContextInjection,\n        action_name_attribute: configuration.actionNameAttribute,\n        use_allowed_tracing_urls: Array.isArray(configuration.allowedTracingUrls) && configuration.allowedTracingUrls.length > 0,\n        selected_tracing_propagators: getSelectedTracingPropagators(configuration),\n        default_privacy_level: configuration.defaultPrivacyLevel,\n        enable_privacy_for_action_name: configuration.enablePrivacyForActionName,\n        use_excluded_activity_urls: Array.isArray(configuration.excludedActivityUrls) && configuration.excludedActivityUrls.length > 0,\n        use_worker_url: !!configuration.workerUrl,\n        compress_intake_requests: configuration.compressIntakeRequests,\n        track_views_manually: configuration.trackViewsManually,\n        track_user_interactions: configuration.trackUserInteractions,\n        track_resources: configuration.trackResources,\n        track_long_task: configuration.trackLongTasks,\n        plugins: (_a = configuration.betaPlugins) === null || _a === void 0 ? void 0 : _a.map(function (plugin) { var _a; return assign({ name: plugin.name }, (_a = plugin.getConfigurationTelemetry) === null || _a === void 0 ? void 0 : _a.call(plugin)); }),\n    }, baseSerializedConfiguration);\n}\n//# sourceMappingURL=configuration.js.map","import { display, addEventListener, assign } from '@datadog/browser-core';\nexport var REMOTE_CONFIGURATION_URL = 'https://d3uc069fcn7uxw.cloudfront.net/configuration';\nexport function fetchAndApplyRemoteConfiguration(initConfiguration, callback) {\n    fetchRemoteConfiguration(initConfiguration, function (remoteInitConfiguration) {\n        callback(applyRemoteConfiguration(initConfiguration, remoteInitConfiguration));\n    });\n}\nexport function applyRemoteConfiguration(initConfiguration, remoteInitConfiguration) {\n    return assign({}, initConfiguration, remoteInitConfiguration);\n}\nexport function fetchRemoteConfiguration(configuration, callback) {\n    var xhr = new XMLHttpRequest();\n    addEventListener(configuration, xhr, 'load', function () {\n        if (xhr.status === 200) {\n            callback(JSON.parse(xhr.responseText));\n        }\n        else {\n            displayRemoteConfigurationFetchingError();\n        }\n    });\n    addEventListener(configuration, xhr, 'error', function () {\n        displayRemoteConfigurationFetchingError();\n    });\n    xhr.open('GET', \"\".concat(REMOTE_CONFIGURATION_URL, \"/\").concat(encodeURIComponent(configuration.remoteConfigurationId), \".json\"));\n    xhr.send();\n}\nfunction displayRemoteConfigurationFetchingError() {\n    display.error('Error fetching the remote configuration.');\n}\n//# sourceMappingURL=remoteConfiguration.js.map","import { clocksNow, combine, elapsed, generateUUID, toServerDuration } from '@datadog/browser-core';\nexport function startVitalCollection(lifeCycle, pageStateHistory) {\n    function isValid(vital) {\n        return !pageStateHistory.wasInPageStateDuringPeriod(\"frozen\" /* PageState.FROZEN */, vital.startClocks.relative, vital.duration);\n    }\n    function addDurationVital(vital) {\n        if (isValid(vital)) {\n            lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, processVital(vital, true));\n        }\n    }\n    return {\n        addDurationVital: addDurationVital,\n        startDurationVital: function (startVital) {\n            return createVitalInstance(function (vital) {\n                addDurationVital(vital);\n            }, startVital);\n        },\n    };\n}\nexport function createVitalInstance(stopCallback, vitalStart) {\n    var startClocks = clocksNow();\n    var stopClocks;\n    return {\n        stop: function (vitalStop) {\n            if (stopClocks) {\n                return;\n            }\n            stopClocks = clocksNow();\n            stopCallback(buildDurationVital(vitalStart, startClocks, vitalStop, stopClocks));\n        },\n    };\n}\nfunction buildDurationVital(vitalStart, startClocks, vitalStop, stopClocks) {\n    var _a;\n    if (vitalStop === void 0) { vitalStop = {}; }\n    return {\n        name: vitalStart.name,\n        type: \"duration\" /* VitalType.DURATION */,\n        startClocks: startClocks,\n        duration: elapsed(startClocks.timeStamp, stopClocks.timeStamp),\n        context: combine(vitalStart.context, vitalStop.context),\n        details: (_a = vitalStop.details) !== null && _a !== void 0 ? _a : vitalStart.details,\n    };\n}\nfunction processVital(vital, valueComputedBySdk) {\n    var rawRumEvent = {\n        date: vital.startClocks.timeStamp,\n        vital: {\n            id: generateUUID(),\n            type: vital.type,\n            name: vital.name,\n            duration: toServerDuration(vital.duration),\n            details: vital.details,\n        },\n        type: \"vital\" /* RumEventType.VITAL */,\n    };\n    if (valueComputedBySdk) {\n        rawRumEvent._dd = {\n            vital: {\n                computed_value: true,\n            },\n        };\n    }\n    return {\n        rawRumEvent: rawRumEvent,\n        startTime: vital.startClocks.relative,\n        customerContext: vital.context,\n        domainContext: {},\n    };\n}\n//# sourceMappingURL=vitalCollection.js.map","export function callPluginsMethod(plugins, methodName, parameter) {\n    if (!plugins) {\n        return;\n    }\n    for (var _i = 0, plugins_1 = plugins; _i < plugins_1.length; _i++) {\n        var plugin = plugins_1[_i];\n        var method = plugin[methodName];\n        if (method) {\n            method(parameter);\n        }\n    }\n}\n//# sourceMappingURL=plugins.js.map","import { createBoundedBuffer, display, canUseEventBridge, displayAlreadyInitializedError, willSyntheticsInjectRum, noop, timeStampNow, clocksNow, assign, getEventBridge, ExperimentalFeature, isExperimentalFeatureEnabled, initFeatureFlags, addTelemetryConfiguration, initFetchObservable, } from '@datadog/browser-core';\nimport { validateAndBuildRumConfiguration, } from '../domain/configuration';\nimport { createVitalInstance } from '../domain/vital/vitalCollection';\nimport { fetchAndApplyRemoteConfiguration, serializeRumConfiguration } from '../domain/configuration';\nimport { callPluginsMethod } from '../domain/plugins';\nexport function createPreStartStrategy(_a, getCommonContext, trackingConsentState, doStartRum) {\n    var ignoreInitIfSyntheticsWillInjectRum = _a.ignoreInitIfSyntheticsWillInjectRum, startDeflateWorker = _a.startDeflateWorker;\n    var bufferApiCalls = createBoundedBuffer();\n    var firstStartViewCall;\n    var deflateWorker;\n    var cachedInitConfiguration;\n    var cachedConfiguration;\n    var trackingConsentStateSubscription = trackingConsentState.observable.subscribe(tryStartRum);\n    function tryStartRum() {\n        if (!cachedInitConfiguration || !cachedConfiguration || !trackingConsentState.isGranted()) {\n            return;\n        }\n        trackingConsentStateSubscription.unsubscribe();\n        var initialViewOptions;\n        if (cachedConfiguration.trackViewsManually) {\n            if (!firstStartViewCall) {\n                return;\n            }\n            // An initial view is always created when starting RUM.\n            // When tracking views automatically, any startView call before RUM start creates an extra\n            // view.\n            // When tracking views manually, we use the ViewOptions from the first startView call as the\n            // initial view options, and we remove the actual startView call so we don't create an extra\n            // view.\n            bufferApiCalls.remove(firstStartViewCall.callback);\n            initialViewOptions = firstStartViewCall.options;\n        }\n        var startRumResult = doStartRum(cachedConfiguration, deflateWorker, initialViewOptions);\n        bufferApiCalls.drain(startRumResult);\n    }\n    function doInit(initConfiguration) {\n        var eventBridgeAvailable = canUseEventBridge();\n        if (eventBridgeAvailable) {\n            initConfiguration = overrideInitConfigurationForBridge(initConfiguration);\n        }\n        // Update the exposed initConfiguration to reflect the bridge and remote configuration overrides\n        cachedInitConfiguration = initConfiguration;\n        addTelemetryConfiguration(serializeRumConfiguration(initConfiguration));\n        if (cachedConfiguration) {\n            displayAlreadyInitializedError('DD_RUM', initConfiguration);\n            return;\n        }\n        var configuration = validateAndBuildRumConfiguration(initConfiguration);\n        if (!configuration) {\n            return;\n        }\n        if (!eventBridgeAvailable && !configuration.sessionStoreStrategyType) {\n            display.warn('No storage available for session. We will not send any data.');\n            return;\n        }\n        if (configuration.compressIntakeRequests && !eventBridgeAvailable && startDeflateWorker) {\n            deflateWorker = startDeflateWorker(configuration, 'Datadog RUM', \n            // Worker initialization can fail asynchronously, especially in Firefox where even CSP\n            // issues are reported asynchronously. For now, the SDK will continue its execution even if\n            // data won't be sent to Datadog. We could improve this behavior in the future.\n            noop);\n            if (!deflateWorker) {\n                // `startDeflateWorker` should have logged an error message explaining the issue\n                return;\n            }\n        }\n        cachedConfiguration = configuration;\n        // Instrumuent fetch to track network requests\n        // This is needed in case the consent is not granted and some cutsomer\n        // library (Apollo Client) is storing uninstrumented fetch to be used later\n        // The subscrption is needed so that the instrumentation process is completed\n        initFetchObservable().subscribe(noop);\n        trackingConsentState.tryToInit(configuration.trackingConsent);\n        tryStartRum();\n    }\n    var addDurationVital = function (vital) {\n        bufferApiCalls.add(function (startRumResult) { return startRumResult.addDurationVital(vital); });\n    };\n    return {\n        init: function (initConfiguration, publicApi) {\n            if (!initConfiguration) {\n                display.error('Missing configuration');\n                return;\n            }\n            // Set the experimental feature flags as early as possible, so we can use them in most places\n            initFeatureFlags(initConfiguration.enableExperimentalFeatures);\n            // Expose the initial configuration regardless of initialization success.\n            cachedInitConfiguration = initConfiguration;\n            // If we are in a Synthetics test configured to automatically inject a RUM instance, we want\n            // to completely discard the customer application RUM instance by ignoring their init() call.\n            // But, we should not ignore the init() call from the Synthetics-injected RUM instance, so the\n            // internal `ignoreInitIfSyntheticsWillInjectRum` option is here to bypass this condition.\n            if (ignoreInitIfSyntheticsWillInjectRum && willSyntheticsInjectRum()) {\n                return;\n            }\n            callPluginsMethod(initConfiguration.betaPlugins, 'onInit', { initConfiguration: initConfiguration, publicApi: publicApi });\n            if (initConfiguration.remoteConfigurationId &&\n                isExperimentalFeatureEnabled(ExperimentalFeature.REMOTE_CONFIGURATION)) {\n                fetchAndApplyRemoteConfiguration(initConfiguration, doInit);\n            }\n            else {\n                doInit(initConfiguration);\n            }\n        },\n        get initConfiguration() {\n            return cachedInitConfiguration;\n        },\n        getInternalContext: noop,\n        stopSession: noop,\n        addTiming: function (name, time) {\n            if (time === void 0) { time = timeStampNow(); }\n            bufferApiCalls.add(function (startRumResult) { return startRumResult.addTiming(name, time); });\n        },\n        startView: function (options, startClocks) {\n            if (startClocks === void 0) { startClocks = clocksNow(); }\n            var callback = function (startRumResult) {\n                startRumResult.startView(options, startClocks);\n            };\n            bufferApiCalls.add(callback);\n            if (!firstStartViewCall) {\n                firstStartViewCall = { options: options, callback: callback };\n                tryStartRum();\n            }\n        },\n        updateViewName: function (name) {\n            bufferApiCalls.add(function (startRumResult) { return startRumResult.updateViewName(name); });\n        },\n        addAction: function (action, commonContext) {\n            if (commonContext === void 0) { commonContext = getCommonContext(); }\n            bufferApiCalls.add(function (startRumResult) { return startRumResult.addAction(action, commonContext); });\n        },\n        addError: function (providedError, commonContext) {\n            if (commonContext === void 0) { commonContext = getCommonContext(); }\n            bufferApiCalls.add(function (startRumResult) { return startRumResult.addError(providedError, commonContext); });\n        },\n        addFeatureFlagEvaluation: function (key, value) {\n            bufferApiCalls.add(function (startRumResult) { return startRumResult.addFeatureFlagEvaluation(key, value); });\n        },\n        startDurationVital: function (vitalStart) {\n            return createVitalInstance(function (vital) { return addDurationVital(vital); }, vitalStart);\n        },\n        addDurationVital: addDurationVital,\n    };\n}\nfunction overrideInitConfigurationForBridge(initConfiguration) {\n    var _a, _b;\n    return assign({}, initConfiguration, {\n        applicationId: '00000000-aaaa-0000-aaaa-000000000000',\n        clientToken: 'empty',\n        sessionSampleRate: 100,\n        defaultPrivacyLevel: (_a = initConfiguration.defaultPrivacyLevel) !== null && _a !== void 0 ? _a : (_b = getEventBridge()) === null || _b === void 0 ? void 0 : _b.getPrivacyLevel(),\n    });\n}\n//# sourceMappingURL=preStartRum.js.map","import { addTelemetryUsage, isExperimentalFeatureEnabled, ExperimentalFeature, assign, createContextManager, deepClone, makePublicApi, monitor, clocksNow, callMonitored, createHandlingStack, checkUser, sanitizeUser, sanitize, createIdentityEncoder, createCustomerDataTrackerManager, storeContextManager, displayAlreadyInitializedError, createTrackingConsentState, timeStampToClocks, noop, } from '@datadog/browser-core';\nimport { buildCommonContext } from '../domain/contexts/commonContext';\nimport { createPreStartStrategy } from './preStartRum';\nvar RUM_STORAGE_KEY = 'rum';\nexport function makeRumPublicApi(startRumImpl, recorderApi, options) {\n    if (options === void 0) { options = {}; }\n    var customerDataTrackerManager = createCustomerDataTrackerManager(0 /* CustomerDataCompressionStatus.Unknown */);\n    var globalContextManager = createContextManager(customerDataTrackerManager.getOrCreateTracker(2 /* CustomerDataType.GlobalContext */));\n    var userContextManager = createContextManager(customerDataTrackerManager.getOrCreateTracker(1 /* CustomerDataType.User */));\n    var trackingConsentState = createTrackingConsentState();\n    function getCommonContext() {\n        return buildCommonContext(globalContextManager, userContextManager, recorderApi);\n    }\n    var strategy = createPreStartStrategy(options, getCommonContext, trackingConsentState, function (configuration, deflateWorker, initialViewOptions) {\n        if (isExperimentalFeatureEnabled(ExperimentalFeature.CUSTOM_VITALS)) {\n            /**\n             * Start a custom duration vital\n             * stored in @vital.custom.<name>\n             *\n             * @param name name of the custom vital\n             * @param options.context custom context attached to the vital\n             * @param options.details  Details of the vital.\n             */\n            ;\n            rumPublicApi.startDurationVital = monitor(function (name, options) {\n                addTelemetryUsage({ feature: 'start-duration-vital' });\n                return strategy.startDurationVital({\n                    name: sanitize(name),\n                    context: sanitize(options && options.context),\n                    details: sanitize(options && options.details),\n                });\n            });\n            rumPublicApi.addDurationVital = monitor(function (name, options) {\n                addTelemetryUsage({ feature: 'add-duration-vital' });\n                strategy.addDurationVital({\n                    name: sanitize(name),\n                    type: \"duration\" /* VitalType.DURATION */,\n                    startClocks: timeStampToClocks(options.startTime),\n                    duration: options.duration,\n                    context: sanitize(options && options.context),\n                    details: sanitize(options && options.details),\n                });\n            });\n            rumPublicApi.stopDurationVital = noop;\n        }\n        if (isExperimentalFeatureEnabled(ExperimentalFeature.UPDATE_VIEW_NAME)) {\n            /**\n             * Update View Name.\n             *\n             * Enable to manually change the name of the current view.\n             * @param name name of the view\n             * See [Override default RUM view names](https://docs.datadoghq.com/real_user_monitoring/browser/advanced_configuration/#override-default-rum-view-names) for further information.\n             */\n            ;\n            rumPublicApi.updateViewName = monitor(function (name) {\n                strategy.updateViewName(name);\n            });\n        }\n        if (configuration.storeContextsAcrossPages) {\n            storeContextManager(configuration, globalContextManager, RUM_STORAGE_KEY, 2 /* CustomerDataType.GlobalContext */);\n            storeContextManager(configuration, userContextManager, RUM_STORAGE_KEY, 1 /* CustomerDataType.User */);\n        }\n        customerDataTrackerManager.setCompressionStatus(deflateWorker ? 1 /* CustomerDataCompressionStatus.Enabled */ : 2 /* CustomerDataCompressionStatus.Disabled */);\n        var startRumResult = startRumImpl(configuration, recorderApi, customerDataTrackerManager, getCommonContext, initialViewOptions, deflateWorker && options.createDeflateEncoder\n            ? function (streamId) { return options.createDeflateEncoder(configuration, deflateWorker, streamId); }\n            : createIdentityEncoder, trackingConsentState);\n        recorderApi.onRumStart(startRumResult.lifeCycle, configuration, startRumResult.session, startRumResult.viewContexts, deflateWorker);\n        strategy = createPostStartStrategy(strategy, startRumResult);\n        return startRumResult;\n    });\n    var startView = monitor(function (options) {\n        var sanitizedOptions = typeof options === 'object' ? options : { name: options };\n        strategy.startView(sanitizedOptions);\n        addTelemetryUsage({ feature: 'start-view' });\n    });\n    var rumPublicApi = makePublicApi({\n        init: monitor(function (initConfiguration) { return strategy.init(initConfiguration, rumPublicApi); }),\n        setTrackingConsent: monitor(function (trackingConsent) {\n            trackingConsentState.update(trackingConsent);\n            addTelemetryUsage({ feature: 'set-tracking-consent', tracking_consent: trackingConsent });\n        }),\n        setGlobalContext: monitor(function (context) {\n            globalContextManager.setContext(context);\n            addTelemetryUsage({ feature: 'set-global-context' });\n        }),\n        getGlobalContext: monitor(function () { return globalContextManager.getContext(); }),\n        setGlobalContextProperty: monitor(function (key, value) {\n            globalContextManager.setContextProperty(key, value);\n            addTelemetryUsage({ feature: 'set-global-context' });\n        }),\n        removeGlobalContextProperty: monitor(function (key) { return globalContextManager.removeContextProperty(key); }),\n        clearGlobalContext: monitor(function () { return globalContextManager.clearContext(); }),\n        getInternalContext: monitor(function (startTime) { return strategy.getInternalContext(startTime); }),\n        getInitConfiguration: monitor(function () { return deepClone(strategy.initConfiguration); }),\n        addAction: function (name, context) {\n            var handlingStack = createHandlingStack();\n            callMonitored(function () {\n                strategy.addAction({\n                    name: sanitize(name),\n                    context: sanitize(context),\n                    startClocks: clocksNow(),\n                    type: \"custom\" /* ActionType.CUSTOM */,\n                    handlingStack: handlingStack,\n                });\n                addTelemetryUsage({ feature: 'add-action' });\n            });\n        },\n        addError: function (error, context) {\n            var handlingStack = createHandlingStack();\n            callMonitored(function () {\n                strategy.addError({\n                    error: error, // Do not sanitize error here, it is needed unserialized by computeRawError()\n                    handlingStack: handlingStack,\n                    context: sanitize(context),\n                    startClocks: clocksNow(),\n                });\n                addTelemetryUsage({ feature: 'add-error' });\n            });\n        },\n        addTiming: monitor(function (name, time) {\n            // TODO: next major decide to drop relative time support or update its behaviour\n            strategy.addTiming(sanitize(name), time);\n        }),\n        setUser: monitor(function (newUser) {\n            if (checkUser(newUser)) {\n                userContextManager.setContext(sanitizeUser(newUser));\n            }\n            addTelemetryUsage({ feature: 'set-user' });\n        }),\n        getUser: monitor(function () { return userContextManager.getContext(); }),\n        setUserProperty: monitor(function (key, property) {\n            var _a;\n            var sanitizedProperty = sanitizeUser((_a = {}, _a[key] = property, _a))[key];\n            userContextManager.setContextProperty(key, sanitizedProperty);\n            addTelemetryUsage({ feature: 'set-user' });\n        }),\n        removeUserProperty: monitor(function (key) { return userContextManager.removeContextProperty(key); }),\n        clearUser: monitor(function () { return userContextManager.clearContext(); }),\n        startView: startView,\n        stopSession: monitor(function () {\n            strategy.stopSession();\n            addTelemetryUsage({ feature: 'stop-session' });\n        }),\n        addFeatureFlagEvaluation: monitor(function (key, value) {\n            strategy.addFeatureFlagEvaluation(sanitize(key), sanitize(value));\n            addTelemetryUsage({ feature: 'add-feature-flag-evaluation' });\n        }),\n        getSessionReplayLink: monitor(function () { return recorderApi.getSessionReplayLink(); }),\n        startSessionReplayRecording: monitor(function (options) {\n            recorderApi.start(options);\n            addTelemetryUsage({ feature: 'start-session-replay-recording', force: options && options.force });\n        }),\n        stopSessionReplayRecording: monitor(function () { return recorderApi.stop(); }),\n    });\n    return rumPublicApi;\n}\nfunction createPostStartStrategy(preStartStrategy, startRumResult) {\n    return assign({\n        init: function (initConfiguration) {\n            displayAlreadyInitializedError('DD_RUM', initConfiguration);\n        },\n        initConfiguration: preStartStrategy.initConfiguration,\n    }, startRumResult);\n}\n//# sourceMappingURL=rumPublicApi.js.map","import { monitor, noop, Observable, getZoneJsOriginalValue } from '@datadog/browser-core';\nexport function createDOMMutationObservable() {\n    var MutationObserver = getMutationObserverConstructor();\n    return new Observable(function (observable) {\n        if (!MutationObserver) {\n            return;\n        }\n        var observer = new MutationObserver(monitor(function () { return observable.notify(); }));\n        observer.observe(document, {\n            attributes: true,\n            characterData: true,\n            childList: true,\n            subtree: true,\n        });\n        return function () { return observer.disconnect(); };\n    });\n}\nexport function getMutationObserverConstructor() {\n    var constructor;\n    var browserWindow = window;\n    // Angular uses Zone.js to provide a context persisting across async tasks.  Zone.js replaces the\n    // global MutationObserver constructor with a patched version to support the context propagation.\n    // There is an ongoing issue[1][2] with this setup when using a MutationObserver within a Angular\n    // component: on some occasions, the callback is being called in an infinite loop, causing the\n    // page to freeze (even if the callback is completely empty).\n    //\n    // To work around this issue, we try to get the original MutationObserver constructor stored by\n    // Zone.js.\n    //\n    // [1] https://github.com/angular/angular/issues/26948\n    // [2] https://github.com/angular/angular/issues/31712\n    if (browserWindow.Zone) {\n        // Zone.js 0.8.6+ is storing original class constructors into the browser 'window' object[3].\n        //\n        // [3] https://github.com/angular/angular/blob/6375fa79875c0fe7b815efc45940a6e6f5c9c9eb/packages/zone.js/lib/common/utils.ts#L288\n        constructor = getZoneJsOriginalValue(browserWindow, 'MutationObserver');\n        if (browserWindow.MutationObserver && constructor === browserWindow.MutationObserver) {\n            // Anterior Zone.js versions (used in Angular 2) does not expose the original MutationObserver\n            // in the 'window' object. Luckily, the patched MutationObserver class is storing an original\n            // instance in its properties[4]. Let's get the original MutationObserver constructor from\n            // there.\n            //\n            // [4] https://github.com/angular/zone.js/blob/v0.8.5/lib/common/utils.ts#L412\n            var patchedInstance = new browserWindow.MutationObserver(noop);\n            var originalInstance = getZoneJsOriginalValue(patchedInstance, 'originalInstance');\n            constructor = originalInstance && originalInstance.constructor;\n        }\n    }\n    if (!constructor) {\n        constructor = browserWindow.MutationObserver;\n    }\n    return constructor;\n}\n//# sourceMappingURL=domMutationObservable.js.map","import { addTelemetryDebug, elapsed, ExperimentalFeature, getPathName, includes, isExperimentalFeatureEnabled, isValidUrl, toServerDuration, } from '@datadog/browser-core';\nexport var FAKE_INITIAL_DOCUMENT = 'initial_document';\nvar RESOURCE_TYPES = [\n    [\"document\" /* ResourceType.DOCUMENT */, function (initiatorType) { return FAKE_INITIAL_DOCUMENT === initiatorType; }],\n    [\"xhr\" /* ResourceType.XHR */, function (initiatorType) { return 'xmlhttprequest' === initiatorType; }],\n    [\"fetch\" /* ResourceType.FETCH */, function (initiatorType) { return 'fetch' === initiatorType; }],\n    [\"beacon\" /* ResourceType.BEACON */, function (initiatorType) { return 'beacon' === initiatorType; }],\n    [\"css\" /* ResourceType.CSS */, function (_, path) { return /\\.css$/i.test(path); }],\n    [\"js\" /* ResourceType.JS */, function (_, path) { return /\\.js$/i.test(path); }],\n    [\n        \"image\" /* ResourceType.IMAGE */,\n        function (initiatorType, path) {\n            return includes(['image', 'img', 'icon'], initiatorType) || /\\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(path) !== null;\n        },\n    ],\n    [\"font\" /* ResourceType.FONT */, function (_, path) { return /\\.(woff|eot|woff2|ttf)$/i.exec(path) !== null; }],\n    [\n        \"media\" /* ResourceType.MEDIA */,\n        function (initiatorType, path) {\n            return includes(['audio', 'video'], initiatorType) || /\\.(mp3|mp4)$/i.exec(path) !== null;\n        },\n    ],\n];\nexport function computeResourceKind(timing) {\n    var url = timing.name;\n    if (!isValidUrl(url)) {\n        addTelemetryDebug(\"Failed to construct URL for \\\"\".concat(timing.name, \"\\\"\"));\n        return \"other\" /* ResourceType.OTHER */;\n    }\n    var path = getPathName(url);\n    for (var _i = 0, RESOURCE_TYPES_1 = RESOURCE_TYPES; _i < RESOURCE_TYPES_1.length; _i++) {\n        var _a = RESOURCE_TYPES_1[_i], type = _a[0], isType = _a[1];\n        if (isType(timing.initiatorType, path)) {\n            return type;\n        }\n    }\n    return \"other\" /* ResourceType.OTHER */;\n}\nfunction areInOrder() {\n    var numbers = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        numbers[_i] = arguments[_i];\n    }\n    for (var i = 1; i < numbers.length; i += 1) {\n        if (numbers[i - 1] > numbers[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function isRequestKind(timing) {\n    return timing.initiatorType === 'xmlhttprequest' || timing.initiatorType === 'fetch';\n}\nexport function computePerformanceResourceDuration(entry) {\n    var duration = entry.duration, startTime = entry.startTime, responseEnd = entry.responseEnd;\n    // Safari duration is always 0 on timings blocked by cross origin policies.\n    if (duration === 0 && startTime < responseEnd) {\n        return toServerDuration(elapsed(startTime, responseEnd));\n    }\n    return toServerDuration(duration);\n}\nexport function computePerformanceResourceDetails(entry) {\n    if (!isValidEntry(entry)) {\n        return undefined;\n    }\n    var startTime = entry.startTime, fetchStart = entry.fetchStart, redirectStart = entry.redirectStart, redirectEnd = entry.redirectEnd, domainLookupStart = entry.domainLookupStart, domainLookupEnd = entry.domainLookupEnd, connectStart = entry.connectStart, secureConnectionStart = entry.secureConnectionStart, connectEnd = entry.connectEnd, requestStart = entry.requestStart, responseStart = entry.responseStart, responseEnd = entry.responseEnd;\n    var details = {\n        download: formatTiming(startTime, responseStart, responseEnd),\n        first_byte: formatTiming(startTime, requestStart, responseStart),\n    };\n    // Make sure a connection occurred\n    if (fetchStart < connectEnd) {\n        details.connect = formatTiming(startTime, connectStart, connectEnd);\n        // Make sure a secure connection occurred\n        if (connectStart <= secureConnectionStart && secureConnectionStart <= connectEnd) {\n            details.ssl = formatTiming(startTime, secureConnectionStart, connectEnd);\n        }\n    }\n    // Make sure a domain lookup occurred\n    if (fetchStart < domainLookupEnd) {\n        details.dns = formatTiming(startTime, domainLookupStart, domainLookupEnd);\n    }\n    // Make sure a redirection occurred\n    if (startTime < redirectEnd) {\n        details.redirect = formatTiming(startTime, redirectStart, redirectEnd);\n    }\n    return details;\n}\nexport function isValidEntry(entry) {\n    if (isExperimentalFeatureEnabled(ExperimentalFeature.TOLERANT_RESOURCE_TIMINGS)) {\n        return true;\n    }\n    // Ensure timings are in the right order. On top of filtering out potential invalid\n    // RumPerformanceResourceTiming, it will ignore entries from requests where timings cannot be\n    // collected, for example cross origin requests without a \"Timing-Allow-Origin\" header allowing\n    // it.\n    var areCommonTimingsInOrder = areInOrder(entry.startTime, entry.fetchStart, entry.domainLookupStart, entry.domainLookupEnd, entry.connectStart, entry.connectEnd, entry.requestStart, entry.responseStart, entry.responseEnd);\n    var areRedirectionTimingsInOrder = hasRedirection(entry)\n        ? areInOrder(entry.startTime, entry.redirectStart, entry.redirectEnd, entry.fetchStart)\n        : true;\n    return areCommonTimingsInOrder && areRedirectionTimingsInOrder;\n}\nfunction hasRedirection(entry) {\n    return entry.redirectEnd > entry.startTime;\n}\nfunction formatTiming(origin, start, end) {\n    if (origin <= start && start <= end) {\n        return {\n            duration: toServerDuration(elapsed(start, end)),\n            start: toServerDuration(elapsed(origin, start)),\n        };\n    }\n}\nexport function computeSize(entry) {\n    // Make sure a request actually occurred\n    if (entry.startTime < entry.responseStart) {\n        var encodedBodySize = entry.encodedBodySize, decodedBodySize = entry.decodedBodySize, transferSize = entry.transferSize;\n        return {\n            size: decodedBodySize,\n            encoded_body_size: encodedBodySize,\n            decoded_body_size: decodedBodySize,\n            transfer_size: transferSize,\n        };\n    }\n    return {\n        size: undefined,\n        encoded_body_size: undefined,\n        decoded_body_size: undefined,\n        transfer_size: undefined,\n    };\n}\nexport function isAllowedRequestUrl(configuration, url) {\n    return url && !configuration.isIntakeUrl(url);\n}\nvar DATA_URL_REGEX = /data:(.+)?(;base64)?,/g;\nexport var MAX_ATTRIBUTE_VALUE_CHAR_LENGTH = 24000;\nexport function isLongDataUrl(url) {\n    if (url.length <= MAX_ATTRIBUTE_VALUE_CHAR_LENGTH) {\n        return false;\n    }\n    else if (url.substring(0, 5) === 'data:') {\n        // Avoid String.match RangeError: Maximum call stack size exceeded\n        url = url.substring(0, MAX_ATTRIBUTE_VALUE_CHAR_LENGTH);\n        return true;\n    }\n    return false;\n}\nexport function sanitizeDataUrl(url) {\n    return \"\".concat(url.match(DATA_URL_REGEX)[0], \"[...]\");\n}\n//# sourceMappingURL=resourceUtils.js.map","import { addEventListener, Observable, setTimeout, clearTimeout, monitor, includes } from '@datadog/browser-core';\nimport { isAllowedRequestUrl } from '../domain/resource/resourceUtils';\n// We want to use a real enum (i.e. not a const enum) here, to be able to check whether an arbitrary\n// string is an expected performance entry\n// eslint-disable-next-line no-restricted-syntax\nexport var RumPerformanceEntryType;\n(function (RumPerformanceEntryType) {\n    RumPerformanceEntryType[\"EVENT\"] = \"event\";\n    RumPerformanceEntryType[\"FIRST_INPUT\"] = \"first-input\";\n    RumPerformanceEntryType[\"LARGEST_CONTENTFUL_PAINT\"] = \"largest-contentful-paint\";\n    RumPerformanceEntryType[\"LAYOUT_SHIFT\"] = \"layout-shift\";\n    RumPerformanceEntryType[\"LONG_TASK\"] = \"longtask\";\n    RumPerformanceEntryType[\"NAVIGATION\"] = \"navigation\";\n    RumPerformanceEntryType[\"PAINT\"] = \"paint\";\n    RumPerformanceEntryType[\"RESOURCE\"] = \"resource\";\n})(RumPerformanceEntryType || (RumPerformanceEntryType = {}));\nexport function createPerformanceObservable(configuration, options) {\n    return new Observable(function (observable) {\n        if (!window.PerformanceObserver) {\n            return;\n        }\n        var handlePerformanceEntries = function (entries) {\n            var rumPerformanceEntries = filterRumPerformanceEntries(configuration, entries);\n            if (rumPerformanceEntries.length > 0) {\n                observable.notify(rumPerformanceEntries);\n            }\n        };\n        var timeoutId;\n        var isObserverInitializing = true;\n        var observer = new PerformanceObserver(monitor(function (entries) {\n            // In Safari the performance observer callback is synchronous.\n            // Because the buffered performance entry list can be quite large we delay the computation to prevent the SDK from blocking the main thread on init\n            if (isObserverInitializing) {\n                timeoutId = setTimeout(function () { return handlePerformanceEntries(entries.getEntries()); });\n            }\n            else {\n                handlePerformanceEntries(entries.getEntries());\n            }\n        }));\n        try {\n            observer.observe(options);\n        }\n        catch (_a) {\n            // Some old browser versions (<= chrome 74 ) don't support the PerformanceObserver type and buffered options\n            // In these cases, fallback to getEntriesByType and PerformanceObserver with entryTypes\n            // TODO: remove this fallback in the next major version\n            var fallbackSupportedEntryTypes = [\n                RumPerformanceEntryType.RESOURCE,\n                RumPerformanceEntryType.NAVIGATION,\n                RumPerformanceEntryType.LONG_TASK,\n                RumPerformanceEntryType.PAINT,\n            ];\n            if (includes(fallbackSupportedEntryTypes, options.type)) {\n                if (options.buffered) {\n                    timeoutId = setTimeout(function () { return handlePerformanceEntries(performance.getEntriesByType(options.type)); });\n                }\n                try {\n                    observer.observe({ entryTypes: [options.type] });\n                }\n                catch (_b) {\n                    // Old versions of Safari are throwing \"entryTypes contained only unsupported types\"\n                    // errors when observing only unsupported entry types.\n                    //\n                    // We could use `supportPerformanceTimingEvent` to make sure we don't invoke\n                    // `observer.observe` with an unsupported entry type, but Safari 11 and 12 don't support\n                    // `Performance.supportedEntryTypes`, so doing so would lose support for these versions\n                    // even if they do support the entry type.\n                    return;\n                }\n            }\n        }\n        isObserverInitializing = false;\n        manageResourceTimingBufferFull(configuration);\n        return function () {\n            observer.disconnect();\n            clearTimeout(timeoutId);\n        };\n    });\n}\nvar resourceTimingBufferFullListener;\nfunction manageResourceTimingBufferFull(configuration) {\n    if (!resourceTimingBufferFullListener && supportPerformanceObject() && 'addEventListener' in performance) {\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1559377\n        resourceTimingBufferFullListener = addEventListener(configuration, performance, 'resourcetimingbufferfull', function () {\n            performance.clearResourceTimings();\n        });\n    }\n    return function () {\n        resourceTimingBufferFullListener === null || resourceTimingBufferFullListener === void 0 ? void 0 : resourceTimingBufferFullListener.stop();\n    };\n}\nfunction supportPerformanceObject() {\n    return window.performance !== undefined && 'getEntries' in performance;\n}\nexport function supportPerformanceTimingEvent(entryType) {\n    return (window.PerformanceObserver &&\n        PerformanceObserver.supportedEntryTypes !== undefined &&\n        PerformanceObserver.supportedEntryTypes.includes(entryType));\n}\nfunction filterRumPerformanceEntries(configuration, entries) {\n    return entries.filter(function (entry) { return !isForbiddenResource(configuration, entry); });\n}\nfunction isForbiddenResource(configuration, entry) {\n    return entry.entryType === RumPerformanceEntryType.RESOURCE && !isAllowedRequestUrl(configuration, entry.name);\n}\n//# sourceMappingURL=performanceObservable.js.map","import { dateNow, addEventListeners, monitor, setTimeout, relativeNow, addEventListener, objectHasValue, } from '@datadog/browser-core';\nimport { RumPerformanceEntryType, supportPerformanceTimingEvent } from './performanceObservable';\nfunction supportPerformanceObject() {\n    return window.performance !== undefined && 'getEntries' in performance;\n}\nexport function startPerformanceCollection(lifeCycle, configuration) {\n    var cleanupTasks = [];\n    if (supportPerformanceObject()) {\n        var performanceEntries_1 = performance.getEntries();\n        // Because the performance entry list can be quite large\n        // delay the computation to prevent the SDK from blocking the main thread on init\n        setTimeout(function () { return handleRumPerformanceEntries(lifeCycle, performanceEntries_1); });\n    }\n    if (window.PerformanceObserver) {\n        var handlePerformanceEntryList_1 = monitor(function (entries) {\n            return handleRumPerformanceEntries(lifeCycle, entries.getEntries());\n        });\n        var mainEntries = [RumPerformanceEntryType.LONG_TASK, RumPerformanceEntryType.PAINT];\n        var experimentalEntries = [\n            RumPerformanceEntryType.LARGEST_CONTENTFUL_PAINT,\n            RumPerformanceEntryType.FIRST_INPUT,\n            RumPerformanceEntryType.LAYOUT_SHIFT,\n            RumPerformanceEntryType.EVENT,\n        ];\n        try {\n            // Experimental entries are not retrieved by performance.getEntries()\n            // use a single PerformanceObserver with buffered flag by type\n            // to get values that could happen before SDK init\n            experimentalEntries.forEach(function (type) {\n                var observer = new window.PerformanceObserver(handlePerformanceEntryList_1);\n                observer.observe({\n                    type: type,\n                    buffered: true,\n                    // durationThreshold only impact PerformanceEventTiming entries used for INP computation which requires a threshold at 40 (default is 104ms)\n                    // cf: https://github.com/GoogleChrome/web-vitals/blob/3806160ffbc93c3c4abf210a167b81228172b31c/src/onINP.ts#L209\n                    durationThreshold: 40,\n                });\n                cleanupTasks.push(function () { return observer.disconnect(); });\n            });\n        }\n        catch (e) {\n            // Some old browser versions (ex: chrome 67) don't support the PerformanceObserver type and buffered options\n            // In these cases, fallback to PerformanceObserver with entryTypes\n            mainEntries.push.apply(mainEntries, experimentalEntries);\n        }\n        var mainObserver_1 = new PerformanceObserver(handlePerformanceEntryList_1);\n        try {\n            mainObserver_1.observe({ entryTypes: mainEntries });\n            cleanupTasks.push(function () { return mainObserver_1.disconnect(); });\n        }\n        catch (_a) {\n            // Old versions of Safari are throwing \"entryTypes contained only unsupported types\"\n            // errors when observing only unsupported entry types.\n            //\n            // We could use `supportPerformanceTimingEvent` to make sure we don't invoke\n            // `observer.observe` with an unsupported entry type, but Safari 11 and 12 don't support\n            // `Performance.supportedEntryTypes`, so doing so would lose support for these versions\n            // even if they do support the entry type.\n        }\n        if (supportPerformanceObject() && 'addEventListener' in performance) {\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1559377\n            var removePerformanceListener = addEventListener(configuration, performance, 'resourcetimingbufferfull', function () {\n                performance.clearResourceTimings();\n            }).stop;\n            cleanupTasks.push(removePerformanceListener);\n        }\n    }\n    if (!supportPerformanceTimingEvent(RumPerformanceEntryType.FIRST_INPUT)) {\n        var stopFirstInputTiming = retrieveFirstInputTiming(configuration, function (timing) {\n            handleRumPerformanceEntries(lifeCycle, [timing]);\n        }).stop;\n        cleanupTasks.push(stopFirstInputTiming);\n    }\n    return {\n        stop: function () {\n            cleanupTasks.forEach(function (task) { return task(); });\n        },\n    };\n}\n/**\n * first-input timing entry polyfill based on\n * https://github.com/GoogleChrome/web-vitals/blob/master/src/lib/polyfills/firstInputPolyfill.ts\n */\nfunction retrieveFirstInputTiming(configuration, callback) {\n    var startTimeStamp = dateNow();\n    var timingSent = false;\n    var removeEventListeners = addEventListeners(configuration, window, [\"click\" /* DOM_EVENT.CLICK */, \"mousedown\" /* DOM_EVENT.MOUSE_DOWN */, \"keydown\" /* DOM_EVENT.KEY_DOWN */, \"touchstart\" /* DOM_EVENT.TOUCH_START */, \"pointerdown\" /* DOM_EVENT.POINTER_DOWN */], function (evt) {\n        // Only count cancelable events, which should trigger behavior important to the user.\n        if (!evt.cancelable) {\n            return;\n        }\n        // This timing will be used to compute the \"first Input delay\", which is the delta between\n        // when the system received the event (e.g. evt.timeStamp) and when it could run the callback\n        // (e.g. performance.now()).\n        var timing = {\n            entryType: RumPerformanceEntryType.FIRST_INPUT,\n            processingStart: relativeNow(),\n            processingEnd: relativeNow(),\n            startTime: evt.timeStamp,\n            duration: 0, // arbitrary value to avoid nullable duration and simplify INP logic\n            name: '',\n        };\n        if (evt.type === \"pointerdown\" /* DOM_EVENT.POINTER_DOWN */) {\n            sendTimingIfPointerIsNotCancelled(configuration, timing);\n        }\n        else {\n            sendTiming(timing);\n        }\n    }, { passive: true, capture: true }).stop;\n    return { stop: removeEventListeners };\n    /**\n     * Pointer events are a special case, because they can trigger main or compositor thread behavior.\n     * We differentiate these cases based on whether or not we see a pointercancel event, which are\n     * fired when we scroll. If we're scrolling we don't need to report input delay since FID excludes\n     * scrolling and pinch/zooming.\n     */\n    function sendTimingIfPointerIsNotCancelled(configuration, timing) {\n        addEventListeners(configuration, window, [\"pointerup\" /* DOM_EVENT.POINTER_UP */, \"pointercancel\" /* DOM_EVENT.POINTER_CANCEL */], function (event) {\n            if (event.type === \"pointerup\" /* DOM_EVENT.POINTER_UP */) {\n                sendTiming(timing);\n            }\n        }, { once: true });\n    }\n    function sendTiming(timing) {\n        if (!timingSent) {\n            timingSent = true;\n            removeEventListeners();\n            // In some cases the recorded delay is clearly wrong, e.g. it's negative or it's larger than\n            // the time between now and when the page was loaded.\n            // - https://github.com/GoogleChromeLabs/first-input-delay/issues/4\n            // - https://github.com/GoogleChromeLabs/first-input-delay/issues/6\n            // - https://github.com/GoogleChromeLabs/first-input-delay/issues/7\n            var delay = timing.processingStart - timing.startTime;\n            if (delay >= 0 && delay < dateNow() - startTimeStamp) {\n                callback(timing);\n            }\n        }\n    }\n}\nfunction handleRumPerformanceEntries(lifeCycle, entries) {\n    var rumPerformanceEntries = entries.filter(function (entry) {\n        return objectHasValue(RumPerformanceEntryType, entry.entryType);\n    });\n    if (rumPerformanceEntries.length) {\n        lifeCycle.notify(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, rumPerformanceEntries);\n    }\n}\n//# sourceMappingURL=performanceCollection.js.map","import { getSyntheticsResultId, getSyntheticsTestId, willSyntheticsInjectRum } from '@datadog/browser-core';\nexport function getSyntheticsContext() {\n    var testId = getSyntheticsTestId();\n    var resultId = getSyntheticsResultId();\n    if (testId && resultId) {\n        return {\n            test_id: testId,\n            result_id: resultId,\n            injected: willSyntheticsInjectRum(),\n        };\n    }\n}\n//# sourceMappingURL=syntheticsContext.js.map","import { sanitize, deepClone, getType, objectEntries } from '@datadog/browser-core';\n/**\n * Current limitation:\n * - field path do not support array, 'a.b.c' only\n */\nexport function limitModification(object, modifiableFieldPaths, modifier) {\n    var clone = deepClone(object);\n    var result = modifier(clone);\n    objectEntries(modifiableFieldPaths).forEach(function (_a) {\n        var fieldPath = _a[0], fieldType = _a[1];\n        var newValue = get(clone, fieldPath);\n        var newType = getType(newValue);\n        if (newType === fieldType) {\n            set(object, fieldPath, sanitize(newValue));\n        }\n        else if (fieldType === 'object' && (newType === 'undefined' || newType === 'null')) {\n            set(object, fieldPath, {});\n        }\n    });\n    return result;\n}\nfunction get(object, path) {\n    var current = object;\n    for (var _i = 0, _a = path.split('.'); _i < _a.length; _i++) {\n        var field = _a[_i];\n        if (!isValidObjectContaining(current, field)) {\n            return;\n        }\n        current = current[field];\n    }\n    return current;\n}\nfunction set(object, path, value) {\n    var current = object;\n    var fields = path.split('.');\n    for (var i = 0; i < fields.length; i += 1) {\n        var field = fields[i];\n        if (!isValidObject(current)) {\n            return;\n        }\n        if (i !== fields.length - 1) {\n            current = current[field];\n        }\n        else {\n            current[field] = value;\n        }\n    }\n}\nfunction isValidObject(object) {\n    return getType(object) === 'object';\n}\nfunction isValidObjectContaining(object, field) {\n    return isValidObject(object) && Object.prototype.hasOwnProperty.call(object, field);\n}\n//# sourceMappingURL=limitModification.js.map","import { combine, isEmptyObject, timeStampNow, currentDrift, display, createEventRateLimiter, canUseEventBridge, assign, round, isExperimentalFeatureEnabled, ExperimentalFeature, getConnectivity, } from '@datadog/browser-core';\nimport { getSyntheticsContext } from './contexts/syntheticsContext';\nimport { limitModification } from './limitModification';\nvar VIEW_MODIFIABLE_FIELD_PATHS = {\n    'view.name': 'string',\n    'view.url': 'string',\n    'view.referrer': 'string',\n};\nvar USER_CUSTOMIZABLE_FIELD_PATHS = {\n    context: 'object',\n};\nvar ROOT_MODIFIABLE_FIELD_PATHS = {\n    service: 'string',\n    version: 'string',\n};\nvar modifiableFieldPathsByEvent;\nexport function startRumAssembly(configuration, lifeCycle, sessionManager, viewContexts, urlContexts, actionContexts, displayContext, ciVisibilityContext, getCommonContext, reportError) {\n    var _a, _b;\n    modifiableFieldPathsByEvent = (_a = {},\n        _a[\"view\" /* RumEventType.VIEW */] = VIEW_MODIFIABLE_FIELD_PATHS,\n        _a[\"error\" /* RumEventType.ERROR */] = assign({\n            'error.message': 'string',\n            'error.stack': 'string',\n            'error.resource.url': 'string',\n            'error.fingerprint': 'string',\n        }, USER_CUSTOMIZABLE_FIELD_PATHS, VIEW_MODIFIABLE_FIELD_PATHS, ROOT_MODIFIABLE_FIELD_PATHS),\n        _a[\"resource\" /* RumEventType.RESOURCE */] = assign({\n            'resource.url': 'string',\n        }, isExperimentalFeatureEnabled(ExperimentalFeature.WRITABLE_RESOURCE_GRAPHQL)\n            ? {\n                'resource.graphql': 'object',\n            }\n            : {}, USER_CUSTOMIZABLE_FIELD_PATHS, VIEW_MODIFIABLE_FIELD_PATHS, ROOT_MODIFIABLE_FIELD_PATHS),\n        _a[\"action\" /* RumEventType.ACTION */] = assign({\n            'action.target.name': 'string',\n        }, USER_CUSTOMIZABLE_FIELD_PATHS, VIEW_MODIFIABLE_FIELD_PATHS, ROOT_MODIFIABLE_FIELD_PATHS),\n        _a[\"long_task\" /* RumEventType.LONG_TASK */] = assign({}, USER_CUSTOMIZABLE_FIELD_PATHS, VIEW_MODIFIABLE_FIELD_PATHS),\n        _a[\"vital\" /* RumEventType.VITAL */] = assign({}, USER_CUSTOMIZABLE_FIELD_PATHS, VIEW_MODIFIABLE_FIELD_PATHS),\n        _a);\n    var eventRateLimiters = (_b = {},\n        _b[\"error\" /* RumEventType.ERROR */] = createEventRateLimiter(\"error\" /* RumEventType.ERROR */, configuration.eventRateLimiterThreshold, reportError),\n        _b[\"action\" /* RumEventType.ACTION */] = createEventRateLimiter(\"action\" /* RumEventType.ACTION */, configuration.eventRateLimiterThreshold, reportError),\n        _b[\"vital\" /* RumEventType.VITAL */] = createEventRateLimiter(\"vital\" /* RumEventType.VITAL */, configuration.eventRateLimiterThreshold, reportError),\n        _b);\n    var syntheticsContext = getSyntheticsContext();\n    lifeCycle.subscribe(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, function (_a) {\n        var startTime = _a.startTime, rawRumEvent = _a.rawRumEvent, domainContext = _a.domainContext, savedCommonContext = _a.savedCommonContext, customerContext = _a.customerContext;\n        var viewContext = viewContexts.findView(startTime);\n        var urlContext = urlContexts.findUrl(startTime);\n        var session = sessionManager.findTrackedSession(startTime);\n        if (session && viewContext && urlContext) {\n            var commonContext = savedCommonContext || getCommonContext();\n            var actionId = actionContexts.findActionId(startTime);\n            var rumContext = {\n                _dd: {\n                    format_version: 2,\n                    drift: currentDrift(),\n                    configuration: {\n                        session_sample_rate: round(configuration.sessionSampleRate, 3),\n                        session_replay_sample_rate: round(configuration.sessionReplaySampleRate, 3),\n                    },\n                    browser_sdk_version: canUseEventBridge() ? \"5.23.3\" : undefined,\n                },\n                application: {\n                    id: configuration.applicationId,\n                },\n                date: timeStampNow(),\n                service: viewContext.service || configuration.service,\n                version: viewContext.version || configuration.version,\n                source: 'browser',\n                session: {\n                    id: session.id,\n                    type: syntheticsContext\n                        ? \"synthetics\" /* SessionType.SYNTHETICS */\n                        : ciVisibilityContext.get()\n                            ? \"ci_test\" /* SessionType.CI_TEST */\n                            : \"user\" /* SessionType.USER */,\n                },\n                view: {\n                    id: viewContext.id,\n                    name: viewContext.name,\n                    url: urlContext.url,\n                    referrer: urlContext.referrer,\n                },\n                action: needToAssembleWithAction(rawRumEvent) && actionId ? { id: actionId } : undefined,\n                synthetics: syntheticsContext,\n                ci_test: ciVisibilityContext.get(),\n                display: displayContext.get(),\n                connectivity: getConnectivity(),\n            };\n            var serverRumEvent = combine(rumContext, rawRumEvent);\n            serverRumEvent.context = combine(commonContext.context, customerContext);\n            if (!('has_replay' in serverRumEvent.session)) {\n                ;\n                serverRumEvent.session.has_replay = commonContext.hasReplay;\n            }\n            if (serverRumEvent.type === 'view') {\n                ;\n                serverRumEvent.session.sampled_for_replay =\n                    session.sessionReplay === 1 /* SessionReplayState.SAMPLED */;\n            }\n            if (!isEmptyObject(commonContext.user)) {\n                ;\n                serverRumEvent.usr = commonContext.user;\n            }\n            if (shouldSend(serverRumEvent, configuration.beforeSend, domainContext, eventRateLimiters)) {\n                if (isEmptyObject(serverRumEvent.context)) {\n                    delete serverRumEvent.context;\n                }\n                lifeCycle.notify(13 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, serverRumEvent);\n            }\n        }\n    });\n}\nfunction shouldSend(event, beforeSend, domainContext, eventRateLimiters) {\n    var _a;\n    if (beforeSend) {\n        var result = limitModification(event, modifiableFieldPathsByEvent[event.type], function (event) {\n            return beforeSend(event, domainContext);\n        });\n        if (result === false && event.type !== \"view\" /* RumEventType.VIEW */) {\n            return false;\n        }\n        if (result === false) {\n            display.warn(\"Can't dismiss view events using beforeSend!\");\n        }\n    }\n    var rateLimitReached = (_a = eventRateLimiters[event.type]) === null || _a === void 0 ? void 0 : _a.isLimitReached();\n    return !rateLimitReached;\n}\nfunction needToAssembleWithAction(event) {\n    return [\"error\" /* RumEventType.ERROR */, \"resource\" /* RumEventType.RESOURCE */, \"long_task\" /* RumEventType.LONG_TASK */].indexOf(event.type) !== -1;\n}\n//# sourceMappingURL=assembly.js.map","/**\n * Internal context keep returning v1 format\n * to not break compatibility with logs data format\n */\nexport function startInternalContext(applicationId, sessionManager, viewContexts, actionContexts, urlContexts) {\n    return {\n        get: function (startTime) {\n            var viewContext = viewContexts.findView(startTime);\n            var urlContext = urlContexts.findUrl(startTime);\n            var session = sessionManager.findTrackedSession(startTime);\n            if (session && viewContext && urlContext) {\n                var actionId = actionContexts.findActionId(startTime);\n                return {\n                    application_id: applicationId,\n                    session_id: session.id,\n                    user_action: actionId ? { id: actionId } : undefined,\n                    view: { id: viewContext.id, name: viewContext.name, referrer: urlContext.referrer, url: urlContext.url },\n                };\n            }\n        },\n    };\n}\n//# sourceMappingURL=internalContext.js.map","import { AbstractLifeCycle } from '@datadog/browser-core';\nexport var LifeCycle = (AbstractLifeCycle);\n//# sourceMappingURL=lifeCycle.js.map","import { SESSION_TIME_OUT_DELAY, createValueHistory } from '@datadog/browser-core';\nexport var VIEW_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY;\nexport function startViewContexts(lifeCycle) {\n    var viewContextHistory = createValueHistory({ expireDelay: VIEW_CONTEXT_TIME_OUT_DELAY });\n    lifeCycle.subscribe(2 /* LifeCycleEventType.BEFORE_VIEW_CREATED */, function (view) {\n        viewContextHistory.add(buildViewContext(view), view.startClocks.relative);\n    });\n    lifeCycle.subscribe(6 /* LifeCycleEventType.AFTER_VIEW_ENDED */, function (_a) {\n        var endClocks = _a.endClocks;\n        viewContextHistory.closeActive(endClocks.relative);\n    });\n    lifeCycle.subscribe(4 /* LifeCycleEventType.VIEW_UPDATED */, function (viewUpdate) {\n        var currentView = viewContextHistory.find(viewUpdate.startClocks.relative);\n        if (currentView && viewUpdate.name) {\n            currentView.name = viewUpdate.name;\n        }\n    });\n    lifeCycle.subscribe(10 /* LifeCycleEventType.SESSION_RENEWED */, function () {\n        viewContextHistory.reset();\n    });\n    function buildViewContext(view) {\n        return {\n            service: view.service,\n            version: view.version,\n            id: view.id,\n            name: view.name,\n            startClocks: view.startClocks,\n        };\n    }\n    return {\n        findView: function (startTime) { return viewContextHistory.find(startTime); },\n        stop: function () {\n            viewContextHistory.stop();\n        },\n    };\n}\n//# sourceMappingURL=viewContexts.js.map","import { initFetchObservable, initXhrObservable, readBytesFromStream, elapsed, timeStampNow, tryToClone, } from '@datadog/browser-core';\nimport { isAllowedRequestUrl } from './resource/resourceUtils';\nimport { startTracer } from './tracing/tracer';\nvar nextRequestIndex = 1;\nexport function startRequestCollection(lifeCycle, configuration, sessionManager) {\n    var tracer = startTracer(configuration, sessionManager);\n    trackXhr(lifeCycle, configuration, tracer);\n    trackFetch(lifeCycle, configuration, tracer);\n}\nexport function trackXhr(lifeCycle, configuration, tracer) {\n    var subscription = initXhrObservable(configuration).subscribe(function (rawContext) {\n        var context = rawContext;\n        if (!isAllowedRequestUrl(configuration, context.url)) {\n            return;\n        }\n        switch (context.state) {\n            case 'start':\n                tracer.traceXhr(context, context.xhr);\n                context.requestIndex = getNextRequestIndex();\n                lifeCycle.notify(7 /* LifeCycleEventType.REQUEST_STARTED */, {\n                    requestIndex: context.requestIndex,\n                    url: context.url,\n                });\n                break;\n            case 'complete':\n                tracer.clearTracingIfNeeded(context);\n                lifeCycle.notify(8 /* LifeCycleEventType.REQUEST_COMPLETED */, {\n                    duration: context.duration,\n                    method: context.method,\n                    requestIndex: context.requestIndex,\n                    spanId: context.spanId,\n                    startClocks: context.startClocks,\n                    status: context.status,\n                    traceId: context.traceId,\n                    traceSampled: context.traceSampled,\n                    type: \"xhr\" /* RequestType.XHR */,\n                    url: context.url,\n                    xhr: context.xhr,\n                    isAborted: context.isAborted,\n                    handlingStack: context.handlingStack,\n                });\n                break;\n        }\n    });\n    return { stop: function () { return subscription.unsubscribe(); } };\n}\nexport function trackFetch(lifeCycle, configuration, tracer) {\n    var subscription = initFetchObservable().subscribe(function (rawContext) {\n        var context = rawContext;\n        if (!isAllowedRequestUrl(configuration, context.url)) {\n            return;\n        }\n        switch (context.state) {\n            case 'start':\n                tracer.traceFetch(context);\n                context.requestIndex = getNextRequestIndex();\n                lifeCycle.notify(7 /* LifeCycleEventType.REQUEST_STARTED */, {\n                    requestIndex: context.requestIndex,\n                    url: context.url,\n                });\n                break;\n            case 'resolve':\n                waitForResponseToComplete(context, function (duration) {\n                    tracer.clearTracingIfNeeded(context);\n                    lifeCycle.notify(8 /* LifeCycleEventType.REQUEST_COMPLETED */, {\n                        duration: duration,\n                        method: context.method,\n                        requestIndex: context.requestIndex,\n                        responseType: context.responseType,\n                        spanId: context.spanId,\n                        startClocks: context.startClocks,\n                        status: context.status,\n                        traceId: context.traceId,\n                        traceSampled: context.traceSampled,\n                        type: \"fetch\" /* RequestType.FETCH */,\n                        url: context.url,\n                        response: context.response,\n                        init: context.init,\n                        input: context.input,\n                        isAborted: context.isAborted,\n                        handlingStack: context.handlingStack,\n                    });\n                });\n                break;\n        }\n    });\n    return { stop: function () { return subscription.unsubscribe(); } };\n}\nfunction getNextRequestIndex() {\n    var result = nextRequestIndex;\n    nextRequestIndex += 1;\n    return result;\n}\nfunction waitForResponseToComplete(context, callback) {\n    var clonedResponse = context.response && tryToClone(context.response);\n    if (!clonedResponse || !clonedResponse.body) {\n        // do not try to wait for the response if the clone failed, fetch error or null body\n        callback(elapsed(context.startClocks.timeStamp, timeStampNow()));\n    }\n    else {\n        readBytesFromStream(clonedResponse.body, function () {\n            callback(elapsed(context.startClocks.timeStamp, timeStampNow()));\n        }, {\n            bytesLimit: Number.POSITIVE_INFINITY,\n            collectStreamBody: false,\n        });\n    }\n}\n//# sourceMappingURL=requestCollection.js.map","import { isNumber } from '@datadog/browser-core';\nexport function discardNegativeDuration(duration) {\n    return isNumber(duration) && duration < 0 ? undefined : duration;\n}\n//# sourceMappingURL=discardNegativeDuration.js.map","import { noop } from '@datadog/browser-core';\nexport function trackEventCounts(_a) {\n    var lifeCycle = _a.lifeCycle, isChildEvent = _a.isChildEvent, _b = _a.onChange, callback = _b === void 0 ? noop : _b;\n    var eventCounts = {\n        errorCount: 0,\n        longTaskCount: 0,\n        resourceCount: 0,\n        actionCount: 0,\n        frustrationCount: 0,\n    };\n    var subscription = lifeCycle.subscribe(13 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (event) {\n        var _a;\n        if (event.type === 'view' || event.type === 'vital' || !isChildEvent(event)) {\n            return;\n        }\n        switch (event.type) {\n            case \"error\" /* RumEventType.ERROR */:\n                eventCounts.errorCount += 1;\n                callback();\n                break;\n            case \"action\" /* RumEventType.ACTION */:\n                eventCounts.actionCount += 1;\n                if (event.action.frustration) {\n                    eventCounts.frustrationCount += event.action.frustration.type.length;\n                }\n                callback();\n                break;\n            case \"long_task\" /* RumEventType.LONG_TASK */:\n                eventCounts.longTaskCount += 1;\n                callback();\n                break;\n            case \"resource\" /* RumEventType.RESOURCE */:\n                if (!((_a = event._dd) === null || _a === void 0 ? void 0 : _a.discarded)) {\n                    eventCounts.resourceCount += 1;\n                    callback();\n                }\n                break;\n        }\n    });\n    return {\n        stop: function () {\n            subscription.unsubscribe();\n        },\n        eventCounts: eventCounts,\n    };\n}\n//# sourceMappingURL=trackEventCounts.js.map","import { instrumentMethod, matchList, monitor, Observable, timeStampNow, setTimeout, clearTimeout, } from '@datadog/browser-core';\nimport { createPerformanceObservable, RumPerformanceEntryType } from '../browser/performanceObservable';\n// Delay to wait for a page activity to validate the tracking process\nexport var PAGE_ACTIVITY_VALIDATION_DELAY = 100;\n// Delay to wait after a page activity to end the tracking process\nexport var PAGE_ACTIVITY_END_DELAY = 100;\n/**\n * Wait for the page activity end\n *\n * Detection lifecycle:\n * ```\n *                        Wait page activity end\n *              .-------------------'--------------------.\n *              v                                        v\n *     [Wait for a page activity ]          [Wait for a maximum duration]\n *     [timeout: VALIDATION_DELAY]          [  timeout: maxDuration     ]\n *          /                  \\                           |\n *         v                    v                          |\n *  [No page activity]   [Page activity]                   |\n *         |                   |,----------------------.   |\n *         v                   v                       |   |\n *     (Discard)     [Wait for a page activity]        |   |\n *                   [   timeout: END_DELAY   ]        |   |\n *                       /                \\            |   |\n *                      v                  v           |   |\n *             [No page activity]    [Page activity]   |   |\n *                      |                 |            |   |\n *                      |                 '------------'   |\n *                      '-----------. ,--------------------'\n *                                   v\n *                                 (End)\n * ```\n *\n * Note: by assuming that maxDuration is greater than VALIDATION_DELAY, we are sure that if the\n * process is still alive after maxDuration, it has been validated.\n */\nexport function waitPageActivityEnd(lifeCycle, domMutationObservable, configuration, pageActivityEndCallback, maxDuration) {\n    var pageActivityObservable = createPageActivityObservable(lifeCycle, domMutationObservable, configuration);\n    return doWaitPageActivityEnd(pageActivityObservable, pageActivityEndCallback, maxDuration);\n}\nexport function doWaitPageActivityEnd(pageActivityObservable, pageActivityEndCallback, maxDuration) {\n    var pageActivityEndTimeoutId;\n    var hasCompleted = false;\n    var validationTimeoutId = setTimeout(monitor(function () { return complete({ hadActivity: false }); }), PAGE_ACTIVITY_VALIDATION_DELAY);\n    var maxDurationTimeoutId = maxDuration !== undefined\n        ? setTimeout(monitor(function () { return complete({ hadActivity: true, end: timeStampNow() }); }), maxDuration)\n        : undefined;\n    var pageActivitySubscription = pageActivityObservable.subscribe(function (_a) {\n        var isBusy = _a.isBusy;\n        clearTimeout(validationTimeoutId);\n        clearTimeout(pageActivityEndTimeoutId);\n        var lastChangeTime = timeStampNow();\n        if (!isBusy) {\n            pageActivityEndTimeoutId = setTimeout(monitor(function () { return complete({ hadActivity: true, end: lastChangeTime }); }), PAGE_ACTIVITY_END_DELAY);\n        }\n    });\n    var stop = function () {\n        hasCompleted = true;\n        clearTimeout(validationTimeoutId);\n        clearTimeout(pageActivityEndTimeoutId);\n        clearTimeout(maxDurationTimeoutId);\n        pageActivitySubscription.unsubscribe();\n    };\n    function complete(event) {\n        if (hasCompleted) {\n            return;\n        }\n        stop();\n        pageActivityEndCallback(event);\n    }\n    return { stop: stop };\n}\nexport function createPageActivityObservable(lifeCycle, domMutationObservable, configuration) {\n    return new Observable(function (observable) {\n        var subscriptions = [];\n        var firstRequestIndex;\n        var pendingRequestsCount = 0;\n        subscriptions.push(domMutationObservable.subscribe(notifyPageActivity), createPerformanceObservable(configuration, { type: RumPerformanceEntryType.RESOURCE }).subscribe(function (entries) {\n            if (entries.some(function (entry) { return !isExcludedUrl(configuration, entry.name); })) {\n                notifyPageActivity();\n            }\n        }), lifeCycle.subscribe(7 /* LifeCycleEventType.REQUEST_STARTED */, function (startEvent) {\n            if (isExcludedUrl(configuration, startEvent.url)) {\n                return;\n            }\n            if (firstRequestIndex === undefined) {\n                firstRequestIndex = startEvent.requestIndex;\n            }\n            pendingRequestsCount += 1;\n            notifyPageActivity();\n        }), lifeCycle.subscribe(8 /* LifeCycleEventType.REQUEST_COMPLETED */, function (request) {\n            if (isExcludedUrl(configuration, request.url) ||\n                firstRequestIndex === undefined ||\n                // If the request started before the tracking start, ignore it\n                request.requestIndex < firstRequestIndex) {\n                return;\n            }\n            pendingRequestsCount -= 1;\n            notifyPageActivity();\n        }));\n        var stopTrackingWindowOpen = trackWindowOpen(notifyPageActivity).stop;\n        return function () {\n            stopTrackingWindowOpen();\n            subscriptions.forEach(function (s) { return s.unsubscribe(); });\n        };\n        function notifyPageActivity() {\n            observable.notify({ isBusy: pendingRequestsCount > 0 });\n        }\n    });\n}\nfunction isExcludedUrl(configuration, requestUrl) {\n    return matchList(configuration.excludedActivityUrls, requestUrl);\n}\nfunction trackWindowOpen(callback) {\n    return instrumentMethod(window, 'open', callback);\n}\n//# sourceMappingURL=waitPageActivityEnd.js.map","// https://github.com/jquery/jquery/blob/a684e6ba836f7c553968d7d026ed7941e1a612d8/src/selector/escapeSelector.js\nexport function cssEscape(str) {\n    if (window.CSS && window.CSS.escape) {\n        return window.CSS.escape(str);\n    }\n    // eslint-disable-next-line no-control-regex\n    return str.replace(/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g, function (ch, asCodePoint) {\n        if (asCodePoint) {\n            // U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n            if (ch === '\\0') {\n                return '\\uFFFD';\n            }\n            // Control characters and (dependent upon position) numbers get escaped as code points\n            return \"\".concat(ch.slice(0, -1), \"\\\\\").concat(ch.charCodeAt(ch.length - 1).toString(16), \" \");\n        }\n        // Other potentially-special ASCII characters get backslash-escaped\n        return \"\\\\\".concat(ch);\n    });\n}\nexport function elementMatches(element, selector) {\n    if (element.matches) {\n        return element.matches(selector);\n    }\n    // IE11 support\n    if (element.msMatchesSelector) {\n        return element.msMatchesSelector(selector);\n    }\n    return false;\n}\n/**\n * Return the parentElement of an node\n *\n * In cases where parentElement is not supported, such as in IE11 for SVG nodes, we fallback to parentNode\n */\nexport function getParentElement(node) {\n    if (node.parentElement) {\n        return node.parentElement;\n    }\n    while (node.parentNode) {\n        if (node.parentNode.nodeType === Node.ELEMENT_NODE) {\n            return node.parentNode;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\n/**\n * Return the classList of an element or an array of classes if classList is not supported\n *\n * In cases where classList is not supported, such as in IE11 for SVG and MathML elements,\n * we fallback to using element.getAttribute('class').\n * We opt for element.getAttribute('class') over element.className because className returns an SVGAnimatedString for SVG elements.\n */\nexport function getClassList(element) {\n    if (element.classList) {\n        return element.classList;\n    }\n    var classes = (element.getAttribute('class') || '').trim();\n    return classes ? classes.split(/\\s+/) : [];\n}\n// ie11 supports WeakMap but not WeakSet\nvar PLACEHOLDER = 1;\n// eslint-disable-next-line no-restricted-syntax\nvar WeakSet = /** @class */ (function () {\n    function WeakSet(initialValues) {\n        var _this = this;\n        this.map = new WeakMap();\n        if (initialValues) {\n            initialValues.forEach(function (value) { return _this.map.set(value, PLACEHOLDER); });\n        }\n    }\n    WeakSet.prototype.add = function (value) {\n        this.map.set(value, PLACEHOLDER);\n        return this;\n    };\n    WeakSet.prototype.delete = function (value) {\n        return this.map.delete(value);\n    };\n    WeakSet.prototype.has = function (value) {\n        return this.map.has(value);\n    };\n    return WeakSet;\n}());\nexport { WeakSet };\n//# sourceMappingURL=polyfills.js.map","export function isTextNode(node) {\n    return node.nodeType === Node.TEXT_NODE;\n}\nexport function isCommentNode(node) {\n    return node.nodeType === Node.COMMENT_NODE;\n}\nexport function isElementNode(node) {\n    return node.nodeType === Node.ELEMENT_NODE;\n}\nexport function isNodeShadowHost(node) {\n    return isElementNode(node) && Boolean(node.shadowRoot);\n}\nexport function isNodeShadowRoot(node) {\n    var shadowRoot = node;\n    return !!shadowRoot.host && shadowRoot.nodeType === Node.DOCUMENT_FRAGMENT_NODE && isElementNode(shadowRoot.host);\n}\nexport function hasChildNodes(node) {\n    return node.childNodes.length > 0 || isNodeShadowHost(node);\n}\nexport function forEachChildNodes(node, callback) {\n    var child = node.firstChild;\n    while (child) {\n        callback(child);\n        child = child.nextSibling;\n    }\n    if (isNodeShadowHost(node)) {\n        callback(node.shadowRoot);\n    }\n}\n/**\n * Return `host` in case if the current node is a shadow root otherwise will return the `parentNode`\n */\nexport function getParentNode(node) {\n    return isNodeShadowRoot(node) ? node.host : node.parentNode;\n}\n//# sourceMappingURL=htmlDomUtils.js.map","import { DefaultPrivacyLevel } from '@datadog/browser-core';\nimport { isElementNode, getParentNode, isTextNode } from '../browser/htmlDomUtils';\nimport { elementMatches } from '../browser/polyfills';\nexport var NodePrivacyLevel = {\n    IGNORE: 'ignore',\n    HIDDEN: 'hidden',\n    ALLOW: DefaultPrivacyLevel.ALLOW,\n    MASK: DefaultPrivacyLevel.MASK,\n    MASK_USER_INPUT: DefaultPrivacyLevel.MASK_USER_INPUT,\n};\nexport var PRIVACY_ATTR_NAME = 'data-dd-privacy';\n// Privacy Attrs\nexport var PRIVACY_ATTR_VALUE_ALLOW = 'allow';\nexport var PRIVACY_ATTR_VALUE_MASK = 'mask';\nexport var PRIVACY_ATTR_VALUE_MASK_USER_INPUT = 'mask-user-input';\nexport var PRIVACY_ATTR_VALUE_HIDDEN = 'hidden';\n// Privacy Classes - not all customers can set plain HTML attributes, so support classes too\nexport var PRIVACY_CLASS_PREFIX = 'dd-privacy-';\n// Private Replacement Templates\nexport var CENSORED_STRING_MARK = '***';\nexport var CENSORED_IMG_MARK = 'data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==';\nexport var FORM_PRIVATE_TAG_NAMES = {\n    INPUT: true,\n    OUTPUT: true,\n    TEXTAREA: true,\n    SELECT: true,\n    OPTION: true,\n    DATALIST: true,\n    OPTGROUP: true,\n};\nvar TEXT_MASKING_CHAR = 'x';\n/**\n * Get node privacy level by iterating over its ancestors. When the direct parent privacy level is\n * know, it is best to use something like:\n *\n * derivePrivacyLevelGivenParent(getNodeSelfPrivacyLevel(node), parentNodePrivacyLevel)\n */\nexport function getNodePrivacyLevel(node, defaultPrivacyLevel, cache) {\n    if (cache && cache.has(node)) {\n        return cache.get(node);\n    }\n    var parentNode = getParentNode(node);\n    var parentNodePrivacyLevel = parentNode\n        ? getNodePrivacyLevel(parentNode, defaultPrivacyLevel, cache)\n        : defaultPrivacyLevel;\n    var selfNodePrivacyLevel = getNodeSelfPrivacyLevel(node);\n    var nodePrivacyLevel = reducePrivacyLevel(selfNodePrivacyLevel, parentNodePrivacyLevel);\n    if (cache) {\n        cache.set(node, nodePrivacyLevel);\n    }\n    return nodePrivacyLevel;\n}\n/**\n * Reduces the next privacy level based on self + parent privacy levels\n */\nexport function reducePrivacyLevel(childPrivacyLevel, parentNodePrivacyLevel) {\n    switch (parentNodePrivacyLevel) {\n        // These values cannot be overridden\n        case NodePrivacyLevel.HIDDEN:\n        case NodePrivacyLevel.IGNORE:\n            return parentNodePrivacyLevel;\n    }\n    switch (childPrivacyLevel) {\n        case NodePrivacyLevel.ALLOW:\n        case NodePrivacyLevel.MASK:\n        case NodePrivacyLevel.MASK_USER_INPUT:\n        case NodePrivacyLevel.HIDDEN:\n        case NodePrivacyLevel.IGNORE:\n            return childPrivacyLevel;\n        default:\n            return parentNodePrivacyLevel;\n    }\n}\n/**\n * Determines the node's own privacy level without checking for ancestors.\n */\nexport function getNodeSelfPrivacyLevel(node) {\n    // Only Element types can have a privacy level set\n    if (!isElementNode(node)) {\n        return;\n    }\n    // Overrules for replay purpose\n    if (node.tagName === 'BASE') {\n        return NodePrivacyLevel.ALLOW;\n    }\n    // Overrules to enforce end-user protection\n    if (node.tagName === 'INPUT') {\n        var inputElement = node;\n        if (inputElement.type === 'password' || inputElement.type === 'email' || inputElement.type === 'tel') {\n            return NodePrivacyLevel.MASK;\n        }\n        if (inputElement.type === 'hidden') {\n            return NodePrivacyLevel.MASK;\n        }\n        var autocomplete = inputElement.getAttribute('autocomplete');\n        // Handle input[autocomplete=cc-number/cc-csc/cc-exp/cc-exp-month/cc-exp-year]\n        if (autocomplete && autocomplete.indexOf('cc-') === 0) {\n            return NodePrivacyLevel.MASK;\n        }\n    }\n    // Check HTML privacy attributes and classes\n    if (elementMatches(node, getPrivacySelector(NodePrivacyLevel.HIDDEN))) {\n        return NodePrivacyLevel.HIDDEN;\n    }\n    if (elementMatches(node, getPrivacySelector(NodePrivacyLevel.MASK))) {\n        return NodePrivacyLevel.MASK;\n    }\n    if (elementMatches(node, getPrivacySelector(NodePrivacyLevel.MASK_USER_INPUT))) {\n        return NodePrivacyLevel.MASK_USER_INPUT;\n    }\n    if (elementMatches(node, getPrivacySelector(NodePrivacyLevel.ALLOW))) {\n        return NodePrivacyLevel.ALLOW;\n    }\n    if (shouldIgnoreElement(node)) {\n        return NodePrivacyLevel.IGNORE;\n    }\n}\n/**\n * Helper aiming to unify `mask` and `mask-user-input` privacy levels:\n *\n * In the `mask` case, it is trivial: we should mask the element.\n *\n * In the `mask-user-input` case, we should mask the element only if it is a \"form\" element or the\n * direct parent is a form element for text nodes).\n *\n * Other `shouldMaskNode` cases are edge cases that should not matter too much (ex: should we mask a\n * node if it is ignored or hidden? it doesn't matter since it won't be serialized).\n */\nexport function shouldMaskNode(node, privacyLevel) {\n    switch (privacyLevel) {\n        case NodePrivacyLevel.MASK:\n        case NodePrivacyLevel.HIDDEN:\n        case NodePrivacyLevel.IGNORE:\n            return true;\n        case NodePrivacyLevel.MASK_USER_INPUT:\n            return isTextNode(node) ? isFormElement(node.parentNode) : isFormElement(node);\n        default:\n            return false;\n    }\n}\nfunction isFormElement(node) {\n    if (!node || node.nodeType !== node.ELEMENT_NODE) {\n        return false;\n    }\n    var element = node;\n    if (element.tagName === 'INPUT') {\n        switch (element.type) {\n            case 'button':\n            case 'color':\n            case 'reset':\n            case 'submit':\n                return false;\n        }\n    }\n    return !!FORM_PRIVATE_TAG_NAMES[element.tagName];\n}\n/**\n * Text censoring non-destructively maintains whitespace characters in order to preserve text shape\n * during replay.\n */\nexport var censorText = function (text) { return text.replace(/\\S/g, TEXT_MASKING_CHAR); };\nexport function getTextContent(textNode, ignoreWhiteSpace, parentNodePrivacyLevel) {\n    var _a;\n    // The parent node may not be a html element which has a tagName attribute.\n    // So just let it be undefined which is ok in this use case.\n    var parentTagName = (_a = textNode.parentElement) === null || _a === void 0 ? void 0 : _a.tagName;\n    var textContent = textNode.textContent || '';\n    if (ignoreWhiteSpace && !textContent.trim()) {\n        return;\n    }\n    var nodePrivacyLevel = parentNodePrivacyLevel;\n    var isScript = parentTagName === 'SCRIPT';\n    if (isScript) {\n        // For perf reasons, we don't record script (heuristic)\n        textContent = CENSORED_STRING_MARK;\n    }\n    else if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n        // Should never occur, but just in case, we set to CENSORED_MARK.\n        textContent = CENSORED_STRING_MARK;\n    }\n    else if (shouldMaskNode(textNode, nodePrivacyLevel)) {\n        if (\n        // Scrambling the child list breaks text nodes for DATALIST/SELECT/OPTGROUP\n        parentTagName === 'DATALIST' ||\n            parentTagName === 'SELECT' ||\n            parentTagName === 'OPTGROUP') {\n            if (!textContent.trim()) {\n                return;\n            }\n        }\n        else if (parentTagName === 'OPTION') {\n            // <Option> has low entropy in charset + text length, so use `CENSORED_STRING_MARK` when masked\n            textContent = CENSORED_STRING_MARK;\n        }\n        else {\n            textContent = censorText(textContent);\n        }\n    }\n    return textContent;\n}\n/**\n * TODO: Preserve CSS element order, and record the presence of the tag, just don't render\n * We don't need this logic on the recorder side.\n * For security related meta's, customer can mask themmanually given they\n * are easy to identify in the HEAD tag.\n */\nexport function shouldIgnoreElement(element) {\n    if (element.nodeName === 'SCRIPT') {\n        return true;\n    }\n    if (element.nodeName === 'LINK') {\n        var relAttribute = getLowerCaseAttribute('rel');\n        return (\n        // Link as script - Ignore only when rel=preload, modulepreload or prefetch\n        (/preload|prefetch/i.test(relAttribute) && getLowerCaseAttribute('as') === 'script') ||\n            // Favicons\n            relAttribute === 'shortcut icon' ||\n            relAttribute === 'icon');\n    }\n    if (element.nodeName === 'META') {\n        var nameAttribute = getLowerCaseAttribute('name');\n        var relAttribute = getLowerCaseAttribute('rel');\n        var propertyAttribute = getLowerCaseAttribute('property');\n        return (\n        // Favicons\n        /^msapplication-tile(image|color)$/.test(nameAttribute) ||\n            nameAttribute === 'application-name' ||\n            relAttribute === 'icon' ||\n            relAttribute === 'apple-touch-icon' ||\n            relAttribute === 'shortcut icon' ||\n            // Description\n            nameAttribute === 'keywords' ||\n            nameAttribute === 'description' ||\n            // Social\n            /^(og|twitter|fb):/.test(propertyAttribute) ||\n            /^(og|twitter):/.test(nameAttribute) ||\n            nameAttribute === 'pinterest' ||\n            // Robots\n            nameAttribute === 'robots' ||\n            nameAttribute === 'googlebot' ||\n            nameAttribute === 'bingbot' ||\n            // Http headers. Ex: X-UA-Compatible, Content-Type, Content-Language, cache-control,\n            // X-Translated-By\n            element.hasAttribute('http-equiv') ||\n            // Authorship\n            nameAttribute === 'author' ||\n            nameAttribute === 'generator' ||\n            nameAttribute === 'framework' ||\n            nameAttribute === 'publisher' ||\n            nameAttribute === 'progid' ||\n            /^article:/.test(propertyAttribute) ||\n            /^product:/.test(propertyAttribute) ||\n            // Verification\n            nameAttribute === 'google-site-verification' ||\n            nameAttribute === 'yandex-verification' ||\n            nameAttribute === 'csrf-token' ||\n            nameAttribute === 'p:domain_verify' ||\n            nameAttribute === 'verify-v1' ||\n            nameAttribute === 'verification' ||\n            nameAttribute === 'shopify-checkout-api-token');\n    }\n    function getLowerCaseAttribute(name) {\n        return (element.getAttribute(name) || '').toLowerCase();\n    }\n    return false;\n}\nexport function getPrivacySelector(privacyLevel) {\n    return \"[\".concat(PRIVACY_ATTR_NAME, \"=\\\"\").concat(privacyLevel, \"\\\"], .\").concat(PRIVACY_CLASS_PREFIX).concat(privacyLevel);\n}\n//# sourceMappingURL=privacy.js.map","import { safeTruncate, isIE, find } from '@datadog/browser-core';\nimport { getParentElement } from '../../browser/polyfills';\nimport { NodePrivacyLevel, getPrivacySelector } from '../privacy';\n/**\n * Get the action name from the attribute 'data-dd-action-name' on the element or any of its parent.\n * It can also be retrieved from a user defined attribute.\n */\nexport var DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE = 'data-dd-action-name';\nexport var ACTION_NAME_PLACEHOLDER = 'Masked Element';\nexport function getActionNameFromElement(element, _a, nodePrivacyLevel) {\n    var enablePrivacyForActionName = _a.enablePrivacyForActionName, userProgrammaticAttribute = _a.actionNameAttribute;\n    // Proceed to get the action name in two steps:\n    // * first, get the name programmatically, explicitly defined by the user.\n    // * then, use strategies that are known to return good results. Those strategies will be used on\n    //   the element and a few parents, but it's likely that they won't succeed at all.\n    // * if no name is found this way, use strategies returning less accurate names as a fallback.\n    //   Those are much likely to succeed.\n    var defaultActionName = getActionNameFromElementProgrammatically(element, DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE) ||\n        (userProgrammaticAttribute && getActionNameFromElementProgrammatically(element, userProgrammaticAttribute));\n    if (nodePrivacyLevel === NodePrivacyLevel.MASK) {\n        return defaultActionName || ACTION_NAME_PLACEHOLDER;\n    }\n    return (defaultActionName ||\n        getActionNameFromElementForStrategies(element, userProgrammaticAttribute, priorityStrategies, enablePrivacyForActionName) ||\n        getActionNameFromElementForStrategies(element, userProgrammaticAttribute, fallbackStrategies, enablePrivacyForActionName) ||\n        '');\n}\nfunction getActionNameFromElementProgrammatically(targetElement, programmaticAttribute) {\n    var elementWithAttribute;\n    // We don't use getActionNameFromElementForStrategies here, because we want to consider all parents,\n    // without limit. It is up to the user to declare a relevant naming strategy.\n    // If available, use element.closest() to match get the attribute from the element or any of its\n    // parent.  Else fallback to a more traditional implementation.\n    if (supportsElementClosest()) {\n        elementWithAttribute = targetElement.closest(\"[\".concat(programmaticAttribute, \"]\"));\n    }\n    else {\n        var element = targetElement;\n        while (element) {\n            if (element.hasAttribute(programmaticAttribute)) {\n                elementWithAttribute = element;\n                break;\n            }\n            element = getParentElement(element);\n        }\n    }\n    if (!elementWithAttribute) {\n        return;\n    }\n    var name = elementWithAttribute.getAttribute(programmaticAttribute);\n    return truncate(normalizeWhitespace(name.trim()));\n}\nvar priorityStrategies = [\n    // associated LABEL text\n    function (element, userProgrammaticAttribute, privacy) {\n        // IE does not support element.labels, so we fallback to a CSS selector based on the element id\n        // instead\n        if (supportsLabelProperty()) {\n            if ('labels' in element && element.labels && element.labels.length > 0) {\n                return getTextualContent(element.labels[0], userProgrammaticAttribute);\n            }\n        }\n        else if (element.id) {\n            var label = element.ownerDocument &&\n                find(element.ownerDocument.querySelectorAll('label'), function (label) { return label.htmlFor === element.id; });\n            return label && getTextualContent(label, userProgrammaticAttribute, privacy);\n        }\n    },\n    // INPUT button (and associated) value\n    function (element) {\n        if (element.nodeName === 'INPUT') {\n            var input = element;\n            var type = input.getAttribute('type');\n            if (type === 'button' || type === 'submit' || type === 'reset') {\n                return input.value;\n            }\n        }\n    },\n    // BUTTON, LABEL or button-like element text\n    function (element, userProgrammaticAttribute, privacyEnabledActionName) {\n        if (element.nodeName === 'BUTTON' || element.nodeName === 'LABEL' || element.getAttribute('role') === 'button') {\n            return getTextualContent(element, userProgrammaticAttribute, privacyEnabledActionName);\n        }\n    },\n    function (element) { return element.getAttribute('aria-label'); },\n    // associated element text designated by the aria-labelledby attribute\n    function (element, userProgrammaticAttribute, privacyEnabledActionName) {\n        var labelledByAttribute = element.getAttribute('aria-labelledby');\n        if (labelledByAttribute) {\n            return labelledByAttribute\n                .split(/\\s+/)\n                .map(function (id) { return getElementById(element, id); })\n                .filter(function (label) { return Boolean(label); })\n                .map(function (element) { return getTextualContent(element, userProgrammaticAttribute, privacyEnabledActionName); })\n                .join(' ');\n        }\n    },\n    function (element) { return element.getAttribute('alt'); },\n    function (element) { return element.getAttribute('name'); },\n    function (element) { return element.getAttribute('title'); },\n    function (element) { return element.getAttribute('placeholder'); },\n    // SELECT first OPTION text\n    function (element, userProgrammaticAttribute) {\n        if ('options' in element && element.options.length > 0) {\n            return getTextualContent(element.options[0], userProgrammaticAttribute);\n        }\n    },\n];\nvar fallbackStrategies = [\n    function (element, userProgrammaticAttribute, privacyEnabledActionName) {\n        return getTextualContent(element, userProgrammaticAttribute, privacyEnabledActionName);\n    },\n];\n/**\n * Iterates over the target element and its parent, using the strategies list to get an action name.\n * Each strategies are applied on each element, stopping as soon as a non-empty value is returned.\n */\nvar MAX_PARENTS_TO_CONSIDER = 10;\nfunction getActionNameFromElementForStrategies(targetElement, userProgrammaticAttribute, strategies, privacyEnabledActionName) {\n    var element = targetElement;\n    var recursionCounter = 0;\n    while (recursionCounter <= MAX_PARENTS_TO_CONSIDER &&\n        element &&\n        element.nodeName !== 'BODY' &&\n        element.nodeName !== 'HTML' &&\n        element.nodeName !== 'HEAD') {\n        for (var _i = 0, strategies_1 = strategies; _i < strategies_1.length; _i++) {\n            var strategy = strategies_1[_i];\n            var name_1 = strategy(element, userProgrammaticAttribute, privacyEnabledActionName);\n            if (typeof name_1 === 'string') {\n                var trimmedName = name_1.trim();\n                if (trimmedName) {\n                    return truncate(normalizeWhitespace(trimmedName));\n                }\n            }\n        }\n        // Consider a FORM as a contextual limit to get the action name.  This is experimental and may\n        // be reconsidered in the future.\n        if (element.nodeName === 'FORM') {\n            break;\n        }\n        element = getParentElement(element);\n        recursionCounter += 1;\n    }\n}\nfunction normalizeWhitespace(s) {\n    return s.replace(/\\s+/g, ' ');\n}\nfunction truncate(s) {\n    return s.length > 100 ? \"\".concat(safeTruncate(s, 100), \" [...]\") : s;\n}\nfunction getElementById(refElement, id) {\n    // Use the element ownerDocument here, because tests are executed in an iframe, so\n    // document.getElementById won't work.\n    return refElement.ownerDocument ? refElement.ownerDocument.getElementById(id) : null;\n}\nfunction getTextualContent(element, userProgrammaticAttribute, privacyEnabledActionName) {\n    if (element.isContentEditable) {\n        return;\n    }\n    if ('innerText' in element) {\n        var text_1 = element.innerText;\n        var removeTextFromElements = function (query) {\n            var list = element.querySelectorAll(query);\n            for (var index = 0; index < list.length; index += 1) {\n                var element_1 = list[index];\n                if ('innerText' in element_1) {\n                    var textToReplace = element_1.innerText;\n                    if (textToReplace && textToReplace.trim().length > 0) {\n                        text_1 = text_1.replace(textToReplace, '');\n                    }\n                }\n            }\n        };\n        if (!supportsInnerTextScriptAndStyleRemoval()) {\n            // remove the inner text of SCRIPT and STYLES from the result. This is a bit dirty, but should\n            // be relatively fast and work in most cases.\n            removeTextFromElements('script, style');\n        }\n        // remove the text of elements with programmatic attribute value\n        removeTextFromElements(\"[\".concat(DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE, \"]\"));\n        if (userProgrammaticAttribute) {\n            removeTextFromElements(\"[\".concat(userProgrammaticAttribute, \"]\"));\n        }\n        if (privacyEnabledActionName) {\n            // remove the text of elements with privacy override\n            removeTextFromElements(\"\".concat(getPrivacySelector(NodePrivacyLevel.HIDDEN), \", \").concat(getPrivacySelector(NodePrivacyLevel.MASK)));\n        }\n        return text_1;\n    }\n    return element.textContent;\n}\n/**\n * Returns true if element.innerText excludes the text from inline SCRIPT and STYLE element. This\n * should be the case everywhere except on Internet Explorer 10 and 11 (see [1])\n *\n * The innerText property relies on what is actually rendered to compute its output, so to check if\n * it actually excludes SCRIPT and STYLE content, a solution would be to create a style element, set\n * its content to '*', inject it in the document body, and check if the style element innerText\n * property returns '*'. Using a new `document` instance won't work as it is not rendered.\n *\n * This solution requires specific CSP rules (see [2]) to be set by the customer. We want to avoid\n * this, so instead we rely on browser detection. In case of false negative, the impact should be\n * low, since we rely on this result to remove the SCRIPT and STYLE innerText (which will be empty)\n * from a parent element innerText.\n *\n * [1]: https://web.archive.org/web/20210602165716/http://perfectionkills.com/the-poor-misunderstood-innerText/#diff-with-textContent\n * [2]: https://github.com/DataDog/browser-sdk/issues/1084\n */\nfunction supportsInnerTextScriptAndStyleRemoval() {\n    return !isIE();\n}\n/**\n * Returns true if the browser supports the element.labels property.  This should be the case\n * everywhere except on Internet Explorer.\n * Note: The result is computed lazily, because we don't want any DOM access when the SDK is\n * evaluated.\n */\nvar supportsLabelPropertyResult;\nfunction supportsLabelProperty() {\n    if (supportsLabelPropertyResult === undefined) {\n        supportsLabelPropertyResult = 'labels' in HTMLInputElement.prototype;\n    }\n    return supportsLabelPropertyResult;\n}\n/**\n * Returns true if the browser supports the element.closest method.  This should be the case\n * everywhere except on Internet Explorer.\n * Note: The result is computed lazily, because we don't want any DOM access when the SDK is\n * evaluated.\n */\nvar supportsElementClosestResult;\nfunction supportsElementClosest() {\n    if (supportsElementClosestResult === undefined) {\n        supportsElementClosestResult = 'closest' in HTMLElement.prototype;\n    }\n    return supportsElementClosestResult;\n}\n//# sourceMappingURL=getActionNameFromElement.js.map","import { cssEscape, elementMatches, getClassList, getParentElement } from '../browser/polyfills';\nimport { DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE } from './action/getActionNameFromElement';\n/**\n * Stable attributes are attributes that are commonly used to identify parts of a UI (ex:\n * component). Those attribute values should not be generated randomly (hardcoded most of the time)\n * and stay the same across deploys. They are not necessarily unique across the document.\n */\nexport var STABLE_ATTRIBUTES = [\n    DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE,\n    // Common test attributes (list provided by google recorder)\n    'data-testid',\n    'data-test',\n    'data-qa',\n    'data-cy',\n    'data-test-id',\n    'data-qa-id',\n    'data-testing',\n    // FullStory decorator attributes:\n    'data-component',\n    'data-element',\n    'data-source-file',\n];\n// Selectors to use if they target a single element on the whole document. Those selectors are\n// considered as \"stable\" and uniquely identify an element regardless of the page state. If we find\n// one, we should consider the selector \"complete\" and stop iterating over ancestors.\nvar GLOBALLY_UNIQUE_SELECTOR_GETTERS = [getStableAttributeSelector, getIDSelector];\n// Selectors to use if they target a single element among an element descendants. Those selectors\n// are more brittle than \"globally unique\" selectors and should be combined with ancestor selectors\n// to improve specificity.\nvar UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS = [\n    getStableAttributeSelector,\n    getClassSelector,\n    getTagNameSelector,\n];\nexport function getSelectorFromElement(targetElement, actionNameAttribute) {\n    if (!isConnected(targetElement)) {\n        // We cannot compute a selector for a detached element, as we don't have access to all of its\n        // parents, and we cannot determine if it's unique in the document.\n        return;\n    }\n    var targetElementSelector;\n    var currentElement = targetElement;\n    while (currentElement && currentElement.nodeName !== 'HTML') {\n        var globallyUniqueSelector = findSelector(currentElement, GLOBALLY_UNIQUE_SELECTOR_GETTERS, isSelectorUniqueGlobally, actionNameAttribute, targetElementSelector);\n        if (globallyUniqueSelector) {\n            return globallyUniqueSelector;\n        }\n        var uniqueSelectorAmongChildren = findSelector(currentElement, UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS, isSelectorUniqueAmongSiblings, actionNameAttribute, targetElementSelector);\n        targetElementSelector =\n            uniqueSelectorAmongChildren || combineSelector(getPositionSelector(currentElement), targetElementSelector);\n        currentElement = getParentElement(currentElement);\n    }\n    return targetElementSelector;\n}\nfunction isGeneratedValue(value) {\n    // To compute the \"URL path group\", the backend replaces every URL path parts as a question mark\n    // if it thinks the part is an identifier. The condition it uses is to checks whether a digit is\n    // present.\n    //\n    // Here, we use the same strategy: if the value contains a digit, we consider it generated. This\n    // strategy might be a bit naive and fail in some cases, but there are many fallbacks to generate\n    // CSS selectors so it should be fine most of the time.\n    return /[0-9]/.test(value);\n}\nfunction getIDSelector(element) {\n    if (element.id && !isGeneratedValue(element.id)) {\n        return \"#\".concat(cssEscape(element.id));\n    }\n}\nfunction getClassSelector(element) {\n    if (element.tagName === 'BODY') {\n        return;\n    }\n    var classList = getClassList(element);\n    for (var i = 0; i < classList.length; i += 1) {\n        var className = classList[i];\n        if (isGeneratedValue(className)) {\n            continue;\n        }\n        return \"\".concat(cssEscape(element.tagName), \".\").concat(cssEscape(className));\n    }\n}\nfunction getTagNameSelector(element) {\n    return cssEscape(element.tagName);\n}\nfunction getStableAttributeSelector(element, actionNameAttribute) {\n    if (actionNameAttribute) {\n        var selector = getAttributeSelector(actionNameAttribute);\n        if (selector) {\n            return selector;\n        }\n    }\n    for (var _i = 0, STABLE_ATTRIBUTES_1 = STABLE_ATTRIBUTES; _i < STABLE_ATTRIBUTES_1.length; _i++) {\n        var attributeName = STABLE_ATTRIBUTES_1[_i];\n        var selector = getAttributeSelector(attributeName);\n        if (selector) {\n            return selector;\n        }\n    }\n    function getAttributeSelector(attributeName) {\n        if (element.hasAttribute(attributeName)) {\n            return \"\".concat(cssEscape(element.tagName), \"[\").concat(attributeName, \"=\\\"\").concat(cssEscape(element.getAttribute(attributeName)), \"\\\"]\");\n        }\n    }\n}\nfunction getPositionSelector(element) {\n    var sibling = getParentElement(element).firstElementChild;\n    var elementIndex = 1;\n    while (sibling && sibling !== element) {\n        if (sibling.tagName === element.tagName) {\n            elementIndex += 1;\n        }\n        sibling = sibling.nextElementSibling;\n    }\n    return \"\".concat(cssEscape(element.tagName), \":nth-of-type(\").concat(elementIndex, \")\");\n}\nfunction findSelector(element, selectorGetters, predicate, actionNameAttribute, childSelector) {\n    for (var _i = 0, selectorGetters_1 = selectorGetters; _i < selectorGetters_1.length; _i++) {\n        var selectorGetter = selectorGetters_1[_i];\n        var elementSelector = selectorGetter(element, actionNameAttribute);\n        if (!elementSelector) {\n            continue;\n        }\n        if (predicate(element, elementSelector, childSelector)) {\n            return combineSelector(elementSelector, childSelector);\n        }\n    }\n}\n/**\n * Check whether the selector is unique among the whole document.\n */\nfunction isSelectorUniqueGlobally(element, elementSelector, childSelector) {\n    return element.ownerDocument.querySelectorAll(combineSelector(elementSelector, childSelector)).length === 1;\n}\n/**\n * Check whether the selector is unique among the element siblings. In other words, it returns true\n * if \"ELEMENT_PARENT > CHILD_SELECTOR\" returns a single element.\n *\n * @param {Element} currentElement - the element being considered while iterating over the target\n * element ancestors.\n *\n * @param {string} currentElementSelector - a selector that matches the current element. That\n * selector is not a composed selector (i.e. it might be a single tag name, class name...).\n *\n * @param {string|undefined} childSelector - child selector is a selector that targets a descendant\n * of the current element. When undefined, the current element is the target element.\n *\n * # Scope selector usage\n *\n * When composed together, the final selector will be joined with `>` operators to make sure we\n * target direct descendants at each level. In this function, we'll use `querySelector` to check if\n * a selector matches descendants of the current element. But by default, the query selector match\n * elements at any level. Example:\n *\n * ```html\n * <main>\n *   <div>\n *     <span></span>\n *   </div>\n *   <marquee>\n *     <div>\n *       <span></span>\n *     </div>\n *   </marquee>\n * </main>\n * ```\n *\n * `sibling.querySelector('DIV > SPAN')` will match both span elements, so we would consider the\n * selector to be not unique, even if it is unique when we'll compose it with the parent with a `>`\n * operator (`MAIN > DIV > SPAN`).\n *\n * To avoid this, we can use the `:scope` selector to make sure the selector starts from the current\n * sibling (i.e. `sibling.querySelector('DIV:scope > SPAN')` will only match the first span).\n *\n * The result will be less accurate on browsers that don't support :scope (i. e. IE): it will check\n * for any element matching the selector contained in the parent (in other words,\n * \"ELEMENT_PARENT CHILD_SELECTOR\" returns a single element), regardless of whether the selector is\n * a direct descendant of the element parent. This should not impact results too much: if it\n * inaccurately returns false, we'll just fall back to another strategy.\n *\n * [1]: https://developer.mozilla.org/fr/docs/Web/CSS/:scope\n *\n * # Performance considerations\n *\n * We compute selectors in performance-critical operations (ex: during a click), so we need to make\n * sure the function is as fast as possible. We observed that naively using `querySelectorAll` to\n * check if the selector matches more than 1 element is quite expensive, so we want to avoid it.\n *\n * Because we are iterating the DOM upward and we use that function at every level, we know the\n * child selector is already unique among the current element children, so we don't need to check\n * for the current element subtree.\n *\n * Instead, we can focus on the current element siblings. If we find a single element matching the\n * selector within a sibling, we know that it's not unique. This allows us to use `querySelector`\n * (or `matches`, when the current element is the target element) instead of `querySelectorAll`.\n */\nexport function isSelectorUniqueAmongSiblings(currentElement, currentElementSelector, childSelector) {\n    var isSiblingMatching;\n    if (childSelector === undefined) {\n        // If the child selector is undefined (meaning `currentElement` is the target element, not one\n        // of its ancestor), we need to use `matches` to check if the sibling is matching the selector,\n        // as `querySelector` only returns a descendant of the element.\n        isSiblingMatching = function (sibling) { return elementMatches(sibling, currentElementSelector); };\n    }\n    else {\n        var scopedSelector_1 = supportScopeSelector()\n            ? combineSelector(\"\".concat(currentElementSelector, \":scope\"), childSelector)\n            : combineSelector(currentElementSelector, childSelector);\n        isSiblingMatching = function (sibling) { return sibling.querySelector(scopedSelector_1) !== null; };\n    }\n    var parent = getParentElement(currentElement);\n    var sibling = parent.firstElementChild;\n    while (sibling) {\n        if (sibling !== currentElement && isSiblingMatching(sibling)) {\n            return false;\n        }\n        sibling = sibling.nextElementSibling;\n    }\n    return true;\n}\nfunction combineSelector(parent, child) {\n    return child ? \"\".concat(parent, \">\").concat(child) : parent;\n}\nvar supportScopeSelectorCache;\nexport function supportScopeSelector() {\n    if (supportScopeSelectorCache === undefined) {\n        try {\n            document.querySelector(':scope');\n            supportScopeSelectorCache = true;\n        }\n        catch (_a) {\n            supportScopeSelectorCache = false;\n        }\n    }\n    return supportScopeSelectorCache;\n}\n/**\n * Polyfill-utility for the `isConnected` property not supported in IE11\n */\nfunction isConnected(element) {\n    if ('isConnected' in\n        // cast is to make sure `element` is not inferred as `never` after the check\n        element) {\n        return element.isConnected;\n    }\n    return element.ownerDocument.documentElement.contains(element);\n}\n//# sourceMappingURL=getSelectorFromElement.js.map","import { ONE_SECOND, clearTimeout, setTimeout } from '@datadog/browser-core';\nexport var MAX_DURATION_BETWEEN_CLICKS = ONE_SECOND;\nexport var MAX_DISTANCE_BETWEEN_CLICKS = 100;\nexport function createClickChain(firstClick, onFinalize) {\n    var bufferedClicks = [];\n    var status = 0 /* ClickChainStatus.WaitingForMoreClicks */;\n    var maxDurationBetweenClicksTimeoutId;\n    appendClick(firstClick);\n    function appendClick(click) {\n        click.stopObservable.subscribe(tryFinalize);\n        bufferedClicks.push(click);\n        clearTimeout(maxDurationBetweenClicksTimeoutId);\n        maxDurationBetweenClicksTimeoutId = setTimeout(dontAcceptMoreClick, MAX_DURATION_BETWEEN_CLICKS);\n    }\n    function tryFinalize() {\n        if (status === 1 /* ClickChainStatus.WaitingForClicksToStop */ && bufferedClicks.every(function (click) { return click.isStopped(); })) {\n            status = 2 /* ClickChainStatus.Finalized */;\n            onFinalize(bufferedClicks);\n        }\n    }\n    function dontAcceptMoreClick() {\n        clearTimeout(maxDurationBetweenClicksTimeoutId);\n        if (status === 0 /* ClickChainStatus.WaitingForMoreClicks */) {\n            status = 1 /* ClickChainStatus.WaitingForClicksToStop */;\n            tryFinalize();\n        }\n    }\n    return {\n        tryAppend: function (click) {\n            if (status !== 0 /* ClickChainStatus.WaitingForMoreClicks */) {\n                return false;\n            }\n            if (bufferedClicks.length > 0 &&\n                !areEventsSimilar(bufferedClicks[bufferedClicks.length - 1].event, click.event)) {\n                dontAcceptMoreClick();\n                return false;\n            }\n            appendClick(click);\n            return true;\n        },\n        stop: function () {\n            dontAcceptMoreClick();\n        },\n    };\n}\n/**\n * Checks whether two events are similar by comparing their target, position and timestamp\n */\nfunction areEventsSimilar(first, second) {\n    return (first.target === second.target &&\n        mouseEventDistance(first, second) <= MAX_DISTANCE_BETWEEN_CLICKS &&\n        first.timeStamp - second.timeStamp <= MAX_DURATION_BETWEEN_CLICKS);\n}\nfunction mouseEventDistance(origin, other) {\n    return Math.sqrt(Math.pow(origin.clientX - other.clientX, 2) + Math.pow(origin.clientY - other.clientY, 2));\n}\n//# sourceMappingURL=clickChain.js.map","import { addEventListener } from '@datadog/browser-core';\nexport function listenActionEvents(configuration, _a) {\n    var onPointerDown = _a.onPointerDown, onPointerUp = _a.onPointerUp;\n    var selectionEmptyAtPointerDown;\n    var userActivity = {\n        selection: false,\n        input: false,\n        scroll: false,\n    };\n    var clickContext;\n    var listeners = [\n        addEventListener(configuration, window, \"pointerdown\" /* DOM_EVENT.POINTER_DOWN */, function (event) {\n            if (isValidPointerEvent(event)) {\n                selectionEmptyAtPointerDown = isSelectionEmpty();\n                userActivity = {\n                    selection: false,\n                    input: false,\n                    scroll: false,\n                };\n                clickContext = onPointerDown(event);\n            }\n        }, { capture: true }),\n        addEventListener(configuration, window, \"selectionchange\" /* DOM_EVENT.SELECTION_CHANGE */, function () {\n            if (!selectionEmptyAtPointerDown || !isSelectionEmpty()) {\n                userActivity.selection = true;\n            }\n        }, { capture: true }),\n        addEventListener(configuration, window, \"scroll\" /* DOM_EVENT.SCROLL */, function () {\n            userActivity.scroll = true;\n        }, { capture: true, passive: true }),\n        addEventListener(configuration, window, \"pointerup\" /* DOM_EVENT.POINTER_UP */, function (event) {\n            if (isValidPointerEvent(event) && clickContext) {\n                // Use a scoped variable to make sure the value is not changed by other clicks\n                var localUserActivity_1 = userActivity;\n                onPointerUp(clickContext, event, function () { return localUserActivity_1; });\n                clickContext = undefined;\n            }\n        }, { capture: true }),\n        addEventListener(configuration, window, \"input\" /* DOM_EVENT.INPUT */, function () {\n            userActivity.input = true;\n        }, { capture: true }),\n    ];\n    return {\n        stop: function () {\n            listeners.forEach(function (listener) { return listener.stop(); });\n        },\n    };\n}\nfunction isSelectionEmpty() {\n    var selection = window.getSelection();\n    return !selection || selection.isCollapsed;\n}\nfunction isValidPointerEvent(event) {\n    return (event.target instanceof Element &&\n        // Only consider 'primary' pointer events for now. Multi-touch support could be implemented in\n        // the future.\n        event.isPrimary !== false);\n}\n//# sourceMappingURL=listenActionEvents.js.map","import { ONE_SECOND } from '@datadog/browser-core';\nimport { elementMatches } from '../../browser/polyfills';\nvar MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE = 3;\nexport function computeFrustration(clicks, rageClick) {\n    if (isRage(clicks)) {\n        rageClick.addFrustration(\"rage_click\" /* FrustrationType.RAGE_CLICK */);\n        if (clicks.some(isDead)) {\n            rageClick.addFrustration(\"dead_click\" /* FrustrationType.DEAD_CLICK */);\n        }\n        if (rageClick.hasError) {\n            rageClick.addFrustration(\"error_click\" /* FrustrationType.ERROR_CLICK */);\n        }\n        return { isRage: true };\n    }\n    var hasSelectionChanged = clicks.some(function (click) { return click.getUserActivity().selection; });\n    clicks.forEach(function (click) {\n        if (click.hasError) {\n            click.addFrustration(\"error_click\" /* FrustrationType.ERROR_CLICK */);\n        }\n        if (isDead(click) &&\n            // Avoid considering clicks part of a double-click or triple-click selections as dead clicks\n            !hasSelectionChanged) {\n            click.addFrustration(\"dead_click\" /* FrustrationType.DEAD_CLICK */);\n        }\n    });\n    return { isRage: false };\n}\nexport function isRage(clicks) {\n    if (clicks.some(function (click) { return click.getUserActivity().selection || click.getUserActivity().scroll; })) {\n        return false;\n    }\n    for (var i = 0; i < clicks.length - (MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE - 1); i += 1) {\n        if (clicks[i + MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE - 1].event.timeStamp - clicks[i].event.timeStamp <=\n            ONE_SECOND) {\n            return true;\n        }\n    }\n    return false;\n}\nvar DEAD_CLICK_EXCLUDE_SELECTOR = \n// inputs that don't trigger a meaningful event like \"input\" when clicked, including textual\n// inputs (using a negative selector is shorter here)\n'input:not([type=\"checkbox\"]):not([type=\"radio\"]):not([type=\"button\"]):not([type=\"submit\"]):not([type=\"reset\"]):not([type=\"range\"]),' +\n    'textarea,' +\n    'select,' +\n    // contenteditable and their descendants don't always trigger meaningful changes when manipulated\n    '[contenteditable],' +\n    '[contenteditable] *,' +\n    // canvas, as there is no good way to detect activity occurring on them\n    'canvas,' +\n    // links that are interactive (have an href attribute) or any of their descendants, as they can\n    // open a new tab or navigate to a hash without triggering a meaningful event\n    'a[href],' +\n    'a[href] *';\nexport function isDead(click) {\n    if (click.hasPageActivity || click.getUserActivity().input || click.getUserActivity().scroll) {\n        return false;\n    }\n    return !elementMatches(click.event.target, DEAD_CLICK_EXCLUDE_SELECTOR);\n}\n//# sourceMappingURL=computeFrustration.js.map","import { includes, timeStampNow, Observable, assign, getRelativeTime, ONE_MINUTE, generateUUID, clocksNow, ONE_SECOND, elapsed, createValueHistory, } from '@datadog/browser-core';\nimport { trackEventCounts } from '../trackEventCounts';\nimport { PAGE_ACTIVITY_VALIDATION_DELAY, waitPageActivityEnd } from '../waitPageActivityEnd';\nimport { getSelectorFromElement } from '../getSelectorFromElement';\nimport { getNodePrivacyLevel, NodePrivacyLevel } from '../privacy';\nimport { createClickChain } from './clickChain';\nimport { getActionNameFromElement } from './getActionNameFromElement';\nimport { listenActionEvents } from './listenActionEvents';\nimport { computeFrustration } from './computeFrustration';\n// Maximum duration for click actions\nexport var CLICK_ACTION_MAX_DURATION = 10 * ONE_SECOND;\nexport var ACTION_CONTEXT_TIME_OUT_DELAY = 5 * ONE_MINUTE; // arbitrary\nexport function trackClickActions(lifeCycle, domMutationObservable, configuration) {\n    var history = createValueHistory({ expireDelay: ACTION_CONTEXT_TIME_OUT_DELAY });\n    var stopObservable = new Observable();\n    var currentClickChain;\n    lifeCycle.subscribe(10 /* LifeCycleEventType.SESSION_RENEWED */, function () {\n        history.reset();\n    });\n    lifeCycle.subscribe(5 /* LifeCycleEventType.VIEW_ENDED */, stopClickChain);\n    var stopActionEventsListener = listenActionEvents(configuration, {\n        onPointerDown: function (pointerDownEvent) {\n            return processPointerDown(configuration, lifeCycle, domMutationObservable, pointerDownEvent);\n        },\n        onPointerUp: function (_a, startEvent, getUserActivity) {\n            var clickActionBase = _a.clickActionBase, hadActivityOnPointerDown = _a.hadActivityOnPointerDown;\n            startClickAction(configuration, lifeCycle, domMutationObservable, history, stopObservable, appendClickToClickChain, clickActionBase, startEvent, getUserActivity, hadActivityOnPointerDown);\n        },\n    }).stop;\n    var actionContexts = {\n        findActionId: function (startTime) { return history.findAll(startTime); },\n    };\n    return {\n        stop: function () {\n            stopClickChain();\n            stopObservable.notify();\n            stopActionEventsListener();\n        },\n        actionContexts: actionContexts,\n    };\n    function appendClickToClickChain(click) {\n        if (!currentClickChain || !currentClickChain.tryAppend(click)) {\n            var rageClick_1 = click.clone();\n            currentClickChain = createClickChain(click, function (clicks) {\n                finalizeClicks(clicks, rageClick_1);\n            });\n        }\n    }\n    function stopClickChain() {\n        if (currentClickChain) {\n            currentClickChain.stop();\n        }\n    }\n}\nfunction processPointerDown(configuration, lifeCycle, domMutationObservable, pointerDownEvent) {\n    var nodePrivacyLevel = configuration.enablePrivacyForActionName\n        ? getNodePrivacyLevel(pointerDownEvent.target, configuration.defaultPrivacyLevel)\n        : NodePrivacyLevel.ALLOW;\n    if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n        return undefined;\n    }\n    var clickActionBase = computeClickActionBase(pointerDownEvent, nodePrivacyLevel, configuration);\n    var hadActivityOnPointerDown = false;\n    waitPageActivityEnd(lifeCycle, domMutationObservable, configuration, function (pageActivityEndEvent) {\n        hadActivityOnPointerDown = pageActivityEndEvent.hadActivity;\n    }, \n    // We don't care about the activity duration, we just want to know whether an activity did happen\n    // within the \"validation delay\" or not. Limit the duration so the callback is called sooner.\n    PAGE_ACTIVITY_VALIDATION_DELAY);\n    return { clickActionBase: clickActionBase, hadActivityOnPointerDown: function () { return hadActivityOnPointerDown; } };\n}\nfunction startClickAction(configuration, lifeCycle, domMutationObservable, history, stopObservable, appendClickToClickChain, clickActionBase, startEvent, getUserActivity, hadActivityOnPointerDown) {\n    var click = newClick(lifeCycle, history, getUserActivity, clickActionBase, startEvent);\n    appendClickToClickChain(click);\n    var stopWaitPageActivityEnd = waitPageActivityEnd(lifeCycle, domMutationObservable, configuration, function (pageActivityEndEvent) {\n        if (pageActivityEndEvent.hadActivity && pageActivityEndEvent.end < click.startClocks.timeStamp) {\n            // If the clock is looking weird, just discard the click\n            click.discard();\n        }\n        else {\n            if (pageActivityEndEvent.hadActivity) {\n                click.stop(pageActivityEndEvent.end);\n            }\n            else if (hadActivityOnPointerDown()) {\n                click.stop(\n                // using the click start as activity end, so the click will have some activity but its\n                // duration will be 0 (as the activity started before the click start)\n                click.startClocks.timeStamp);\n            }\n            else {\n                click.stop();\n            }\n        }\n    }, CLICK_ACTION_MAX_DURATION).stop;\n    var viewEndedSubscription = lifeCycle.subscribe(5 /* LifeCycleEventType.VIEW_ENDED */, function (_a) {\n        var endClocks = _a.endClocks;\n        click.stop(endClocks.timeStamp);\n    });\n    var stopSubscription = stopObservable.subscribe(function () {\n        click.stop();\n    });\n    click.stopObservable.subscribe(function () {\n        viewEndedSubscription.unsubscribe();\n        stopWaitPageActivityEnd();\n        stopSubscription.unsubscribe();\n    });\n}\nfunction computeClickActionBase(event, nodePrivacyLevel, configuration) {\n    var rect = event.target.getBoundingClientRect();\n    return {\n        type: \"click\" /* ActionType.CLICK */,\n        target: {\n            width: Math.round(rect.width),\n            height: Math.round(rect.height),\n            selector: getSelectorFromElement(event.target, configuration.actionNameAttribute),\n        },\n        position: {\n            // Use clientX and Y because for SVG element offsetX and Y are relatives to the <svg> element\n            x: Math.round(event.clientX - rect.left),\n            y: Math.round(event.clientY - rect.top),\n        },\n        name: getActionNameFromElement(event.target, configuration, nodePrivacyLevel),\n    };\n}\nfunction newClick(lifeCycle, history, getUserActivity, clickActionBase, startEvent) {\n    var id = generateUUID();\n    var startClocks = clocksNow();\n    var historyEntry = history.add(id, startClocks.relative);\n    var eventCountsSubscription = trackEventCounts({\n        lifeCycle: lifeCycle,\n        isChildEvent: function (event) {\n            return event.action !== undefined &&\n                (Array.isArray(event.action.id) ? includes(event.action.id, id) : event.action.id === id);\n        },\n    });\n    var status = 0 /* ClickStatus.ONGOING */;\n    var activityEndTime;\n    var frustrationTypes = [];\n    var stopObservable = new Observable();\n    function stop(newActivityEndTime) {\n        if (status !== 0 /* ClickStatus.ONGOING */) {\n            return;\n        }\n        activityEndTime = newActivityEndTime;\n        status = 1 /* ClickStatus.STOPPED */;\n        if (activityEndTime) {\n            historyEntry.close(getRelativeTime(activityEndTime));\n        }\n        else {\n            historyEntry.remove();\n        }\n        eventCountsSubscription.stop();\n        stopObservable.notify();\n    }\n    return {\n        event: startEvent,\n        stop: stop,\n        stopObservable: stopObservable,\n        get hasError() {\n            return eventCountsSubscription.eventCounts.errorCount > 0;\n        },\n        get hasPageActivity() {\n            return activityEndTime !== undefined;\n        },\n        getUserActivity: getUserActivity,\n        addFrustration: function (frustrationType) {\n            frustrationTypes.push(frustrationType);\n        },\n        startClocks: startClocks,\n        isStopped: function () { return status === 1 /* ClickStatus.STOPPED */ || status === 2 /* ClickStatus.FINALIZED */; },\n        clone: function () { return newClick(lifeCycle, history, getUserActivity, clickActionBase, startEvent); },\n        validate: function (domEvents) {\n            stop();\n            if (status !== 1 /* ClickStatus.STOPPED */) {\n                return;\n            }\n            var _a = eventCountsSubscription.eventCounts, resourceCount = _a.resourceCount, errorCount = _a.errorCount, longTaskCount = _a.longTaskCount;\n            var clickAction = assign({\n                type: \"click\" /* ActionType.CLICK */,\n                duration: activityEndTime && elapsed(startClocks.timeStamp, activityEndTime),\n                startClocks: startClocks,\n                id: id,\n                frustrationTypes: frustrationTypes,\n                counts: {\n                    resourceCount: resourceCount,\n                    errorCount: errorCount,\n                    longTaskCount: longTaskCount,\n                },\n                events: domEvents !== null && domEvents !== void 0 ? domEvents : [startEvent],\n                event: startEvent,\n            }, clickActionBase);\n            lifeCycle.notify(1 /* LifeCycleEventType.AUTO_ACTION_COMPLETED */, clickAction);\n            status = 2 /* ClickStatus.FINALIZED */;\n        },\n        discard: function () {\n            stop();\n            status = 2 /* ClickStatus.FINALIZED */;\n        },\n    };\n}\nexport function finalizeClicks(clicks, rageClick) {\n    var isRage = computeFrustration(clicks, rageClick).isRage;\n    if (isRage) {\n        clicks.forEach(function (click) { return click.discard(); });\n        rageClick.stop(timeStampNow());\n        rageClick.validate(clicks.map(function (click) { return click.event; }));\n    }\n    else {\n        rageClick.discard();\n        clicks.forEach(function (click) { return click.validate(); });\n    }\n}\n//# sourceMappingURL=trackClickActions.js.map","import { noop, assign, combine, toServerDuration, generateUUID } from '@datadog/browser-core';\nimport { discardNegativeDuration } from '../discardNegativeDuration';\nimport { trackClickActions } from './trackClickActions';\nexport function startActionCollection(lifeCycle, domMutationObservable, configuration, pageStateHistory) {\n    lifeCycle.subscribe(1 /* LifeCycleEventType.AUTO_ACTION_COMPLETED */, function (action) {\n        return lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, processAction(action, pageStateHistory));\n    });\n    var actionContexts = { findActionId: noop };\n    if (configuration.trackUserInteractions) {\n        actionContexts = trackClickActions(lifeCycle, domMutationObservable, configuration).actionContexts;\n    }\n    return {\n        addAction: function (action, savedCommonContext) {\n            lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, assign({\n                savedCommonContext: savedCommonContext,\n            }, processAction(action, pageStateHistory)));\n        },\n        actionContexts: actionContexts,\n    };\n}\nfunction processAction(action, pageStateHistory) {\n    var autoActionProperties = isAutoAction(action)\n        ? {\n            action: {\n                id: action.id,\n                loading_time: discardNegativeDuration(toServerDuration(action.duration)),\n                frustration: {\n                    type: action.frustrationTypes,\n                },\n                error: {\n                    count: action.counts.errorCount,\n                },\n                long_task: {\n                    count: action.counts.longTaskCount,\n                },\n                resource: {\n                    count: action.counts.resourceCount,\n                },\n            },\n            _dd: {\n                action: {\n                    target: action.target,\n                    position: action.position,\n                },\n            },\n        }\n        : undefined;\n    var customerContext = !isAutoAction(action) ? action.context : undefined;\n    var actionEvent = combine({\n        action: {\n            id: generateUUID(),\n            target: {\n                name: action.name,\n            },\n            type: action.type,\n        },\n        date: action.startClocks.timeStamp,\n        type: \"action\" /* RumEventType.ACTION */,\n        view: { in_foreground: pageStateHistory.wasInPageStateAt(\"active\" /* PageState.ACTIVE */, action.startClocks.relative) },\n    }, autoActionProperties);\n    var domainContext = isAutoAction(action) ? { events: action.events } : {};\n    if (!isAutoAction(action) && action.handlingStack) {\n        domainContext.handlingStack = action.handlingStack;\n    }\n    return {\n        customerContext: customerContext,\n        rawRumEvent: actionEvent,\n        startTime: action.startClocks.relative,\n        domainContext: domainContext,\n    };\n}\nfunction isAutoAction(action) {\n    return action.type !== \"custom\" /* ActionType.CUSTOM */;\n}\n//# sourceMappingURL=actionCollection.js.map","import { clocksNow, initConsoleObservable, ErrorSource, ConsoleApiName } from '@datadog/browser-core';\nexport function trackConsoleError(errorObservable) {\n    var subscription = initConsoleObservable([ConsoleApiName.error]).subscribe(function (consoleError) {\n        return errorObservable.notify({\n            startClocks: clocksNow(),\n            message: consoleError.message,\n            stack: consoleError.stack,\n            fingerprint: consoleError.fingerprint,\n            source: ErrorSource.CONSOLE,\n            handling: \"handled\" /* ErrorHandling.HANDLED */,\n            handlingStack: consoleError.handlingStack,\n        });\n    });\n    return {\n        stop: function () {\n            subscription.unsubscribe();\n        },\n    };\n}\n//# sourceMappingURL=trackConsoleError.js.map","import { clocksNow, ErrorSource, initReportObservable, RawReportType } from '@datadog/browser-core';\nexport function trackReportError(configuration, errorObservable) {\n    var subscription = initReportObservable(configuration, [\n        RawReportType.cspViolation,\n        RawReportType.intervention,\n    ]).subscribe(function (reportError) {\n        var rawError = {\n            startClocks: clocksNow(),\n            message: reportError.message,\n            stack: reportError.stack,\n            type: reportError.subtype,\n            source: ErrorSource.REPORT,\n            handling: \"unhandled\" /* ErrorHandling.UNHANDLED */,\n            originalError: reportError.originalReport,\n        };\n        if (reportError.originalReport.type === 'securitypolicyviolation') {\n            rawError.csp = {\n                disposition: reportError.originalReport.disposition,\n            };\n        }\n        return errorObservable.notify(rawError);\n    });\n    return {\n        stop: function () {\n            subscription.unsubscribe();\n        },\n    };\n}\n//# sourceMappingURL=trackReportError.js.map","import { isEmptyObject, assign, ErrorSource, generateUUID, computeRawError, computeStackTrace, Observable, trackRuntimeError, } from '@datadog/browser-core';\nimport { trackConsoleError } from './trackConsoleError';\nimport { trackReportError } from './trackReportError';\nexport function startErrorCollection(lifeCycle, configuration, pageStateHistory, featureFlagContexts) {\n    var errorObservable = new Observable();\n    trackConsoleError(errorObservable);\n    trackRuntimeError(errorObservable);\n    trackReportError(configuration, errorObservable);\n    errorObservable.subscribe(function (error) { return lifeCycle.notify(14 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, { error: error }); });\n    return doStartErrorCollection(lifeCycle, pageStateHistory, featureFlagContexts);\n}\nexport function doStartErrorCollection(lifeCycle, pageStateHistory, featureFlagContexts) {\n    lifeCycle.subscribe(14 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, function (_a) {\n        var error = _a.error, customerContext = _a.customerContext, savedCommonContext = _a.savedCommonContext;\n        lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, assign({\n            customerContext: customerContext,\n            savedCommonContext: savedCommonContext,\n        }, processError(error, pageStateHistory, featureFlagContexts)));\n    });\n    return {\n        addError: function (_a, savedCommonContext) {\n            var error = _a.error, handlingStack = _a.handlingStack, startClocks = _a.startClocks, customerContext = _a.context;\n            var stackTrace = error instanceof Error ? computeStackTrace(error) : undefined;\n            var rawError = computeRawError({\n                stackTrace: stackTrace,\n                originalError: error,\n                handlingStack: handlingStack,\n                startClocks: startClocks,\n                nonErrorPrefix: \"Provided\" /* NonErrorPrefix.PROVIDED */,\n                source: ErrorSource.CUSTOM,\n                handling: \"handled\" /* ErrorHandling.HANDLED */,\n            });\n            lifeCycle.notify(14 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, {\n                customerContext: customerContext,\n                savedCommonContext: savedCommonContext,\n                error: rawError,\n            });\n        },\n    };\n}\nfunction processError(error, pageStateHistory, featureFlagContexts) {\n    var rawRumEvent = {\n        date: error.startClocks.timeStamp,\n        error: {\n            id: generateUUID(),\n            message: error.message,\n            source: error.source,\n            stack: error.stack,\n            handling_stack: error.handlingStack,\n            type: error.type,\n            handling: error.handling,\n            causes: error.causes,\n            source_type: 'browser',\n            fingerprint: error.fingerprint,\n            csp: error.csp,\n        },\n        type: \"error\" /* RumEventType.ERROR */,\n        view: { in_foreground: pageStateHistory.wasInPageStateAt(\"active\" /* PageState.ACTIVE */, error.startClocks.relative) },\n    };\n    var featureFlagContext = featureFlagContexts.findFeatureFlagEvaluations(error.startClocks.relative);\n    if (featureFlagContext && !isEmptyObject(featureFlagContext)) {\n        rawRumEvent.feature_flags = featureFlagContext;\n    }\n    var domainContext = {\n        error: error.originalError,\n        handlingStack: error.handlingStack,\n    };\n    return {\n        rawRumEvent: rawRumEvent,\n        startTime: error.startClocks.relative,\n        domainContext: domainContext,\n    };\n}\n//# sourceMappingURL=errorCollection.js.map","import { toServerDuration, relativeToClocks, generateUUID } from '@datadog/browser-core';\nimport { RumPerformanceEntryType } from '../../browser/performanceObservable';\nexport function startLongTaskCollection(lifeCycle, configuration) {\n    lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if (entry.entryType !== RumPerformanceEntryType.LONG_TASK) {\n                break;\n            }\n            if (!configuration.trackLongTasks) {\n                break;\n            }\n            var startClocks = relativeToClocks(entry.startTime);\n            var rawRumEvent = {\n                date: startClocks.timeStamp,\n                long_task: {\n                    id: generateUUID(),\n                    duration: toServerDuration(entry.duration),\n                },\n                type: \"long_task\" /* RumEventType.LONG_TASK */,\n                _dd: {\n                    discarded: false,\n                },\n            };\n            lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, {\n                rawRumEvent: rawRumEvent,\n                startTime: startClocks.relative,\n                domainContext: { performanceEntry: entry },\n            });\n        }\n    });\n}\n//# sourceMappingURL=longTaskCollection.js.map","import { addDuration } from '@datadog/browser-core';\nimport { WeakSet } from '../../browser/polyfills';\nimport { isValidEntry } from './resourceUtils';\nvar alreadyMatchedEntries = new WeakSet();\n/**\n * Look for corresponding timing in resource timing buffer\n *\n * Observations:\n * - Timing (start, end) are nested inside the request (start, end)\n * - Some timing can be not exactly nested, being off by < 1 ms\n *\n * Strategy:\n * - from valid nested entries (with 1 ms error margin)\n * - filter out timing that were already matched to a request\n * - then, if a single timing match, return the timing\n * - otherwise we can't decide, return undefined\n */\nexport function matchRequestTiming(request) {\n    if (!performance || !('getEntriesByName' in performance)) {\n        return;\n    }\n    var sameNameEntries = performance.getEntriesByName(request.url, 'resource');\n    if (!sameNameEntries.length || !('toJSON' in sameNameEntries[0])) {\n        return;\n    }\n    var candidates = sameNameEntries\n        .filter(function (entry) { return !alreadyMatchedEntries.has(entry); })\n        .filter(function (entry) { return isValidEntry(entry); })\n        .filter(function (entry) {\n        return isBetween(entry, request.startClocks.relative, endTime({ startTime: request.startClocks.relative, duration: request.duration }));\n    });\n    if (candidates.length === 1) {\n        alreadyMatchedEntries.add(candidates[0]);\n        return candidates[0].toJSON();\n    }\n    return;\n}\nfunction endTime(timing) {\n    return addDuration(timing.startTime, timing.duration);\n}\nfunction isBetween(timing, start, end) {\n    var errorMargin = 1;\n    return timing.startTime >= start - errorMargin && endTime(timing) <= addDuration(end, errorMargin);\n}\n//# sourceMappingURL=matchRequestTiming.js.map","import { dateNow, findCommaSeparatedValue, ONE_MINUTE } from '@datadog/browser-core';\nimport { isCommentNode, isTextNode } from '../../browser/htmlDomUtils';\nexport var INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD = 2 * ONE_MINUTE;\nexport function getDocumentTraceId(document) {\n    var data = getDocumentTraceDataFromMeta(document) || getDocumentTraceDataFromComment(document);\n    if (!data || data.traceTime <= dateNow() - INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD) {\n        return undefined;\n    }\n    return data.traceId;\n}\nexport function getDocumentTraceDataFromMeta(document) {\n    var traceIdMeta = document.querySelector('meta[name=dd-trace-id]');\n    var traceTimeMeta = document.querySelector('meta[name=dd-trace-time]');\n    return createDocumentTraceData(traceIdMeta && traceIdMeta.content, traceTimeMeta && traceTimeMeta.content);\n}\nexport function getDocumentTraceDataFromComment(document) {\n    var comment = findTraceComment(document);\n    if (!comment) {\n        return undefined;\n    }\n    return createDocumentTraceData(findCommaSeparatedValue(comment, 'trace-id'), findCommaSeparatedValue(comment, 'trace-time'));\n}\nexport function createDocumentTraceData(traceId, rawTraceTime) {\n    var traceTime = rawTraceTime && Number(rawTraceTime);\n    if (!traceId || !traceTime) {\n        return undefined;\n    }\n    return {\n        traceId: traceId,\n        traceTime: traceTime,\n    };\n}\nexport function findTraceComment(document) {\n    // 1. Try to find the comment as a direct child of the document\n    // Note: TSLint advises to use a 'for of', but TS doesn't allow to use 'for of' if the iterated\n    // value is not an array or string (here, a NodeList).\n    for (var i = 0; i < document.childNodes.length; i += 1) {\n        var comment = getTraceCommentFromNode(document.childNodes[i]);\n        if (comment) {\n            return comment;\n        }\n    }\n    // 2. If the comment is placed after the </html> tag, but have some space or new lines before or\n    // after, the DOM parser will lift it (and the surrounding text) at the end of the <body> tag.\n    // Try to look for the comment at the end of the <body> by by iterating over its child nodes in\n    // reverse order, stopping if we come across a non-text node.\n    if (document.body) {\n        for (var i = document.body.childNodes.length - 1; i >= 0; i -= 1) {\n            var node = document.body.childNodes[i];\n            var comment = getTraceCommentFromNode(node);\n            if (comment) {\n                return comment;\n            }\n            if (!isTextNode(node)) {\n                break;\n            }\n        }\n    }\n}\nfunction getTraceCommentFromNode(node) {\n    if (node && isCommentNode(node)) {\n        var match = /^\\s*DATADOG;(.*?)\\s*$/.exec(node.data);\n        if (match) {\n            return match[1];\n        }\n    }\n}\n//# sourceMappingURL=getDocumentTraceId.js.map","import { getRelativeTime, isNumber } from '@datadog/browser-core';\nexport function computeRelativePerformanceTiming() {\n    var result = {};\n    var timing = performance.timing;\n    for (var key in timing) {\n        if (isNumber(timing[key])) {\n            var numberKey = key;\n            var timingElement = timing[numberKey];\n            result[numberKey] = timingElement === 0 ? 0 : getRelativeTime(timingElement);\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=performanceUtils.js.map","import { assign, runOnReadyState } from '@datadog/browser-core';\nimport { supportPerformanceTimingEvent, RumPerformanceEntryType } from '../../browser/performanceObservable';\nimport { getDocumentTraceId } from '../tracing/getDocumentTraceId';\nimport { computeRelativePerformanceTiming } from '../../browser/performanceUtils';\nimport { FAKE_INITIAL_DOCUMENT } from './resourceUtils';\nexport function retrieveInitialDocumentResourceTiming(configuration, callback) {\n    runOnReadyState(configuration, 'interactive', function () {\n        var timing;\n        var forcedAttributes = {\n            entryType: RumPerformanceEntryType.RESOURCE,\n            initiatorType: FAKE_INITIAL_DOCUMENT,\n            traceId: getDocumentTraceId(document),\n            toJSON: function () { return assign({}, timing, { toJSON: undefined }); },\n        };\n        if (supportPerformanceTimingEvent(RumPerformanceEntryType.NAVIGATION) &&\n            performance.getEntriesByType(RumPerformanceEntryType.NAVIGATION).length > 0) {\n            var navigationEntry = performance.getEntriesByType(RumPerformanceEntryType.NAVIGATION)[0];\n            timing = assign(navigationEntry.toJSON(), forcedAttributes);\n        }\n        else {\n            var relativePerformanceTiming = computeRelativePerformanceTiming();\n            timing = assign(relativePerformanceTiming, {\n                decodedBodySize: 0,\n                encodedBodySize: 0,\n                transferSize: 0,\n                renderBlockingStatus: 'non-blocking',\n                duration: relativePerformanceTiming.responseEnd,\n                name: window.location.href,\n                startTime: 0,\n            }, forcedAttributes);\n        }\n        callback(timing);\n    });\n}\n//# sourceMappingURL=retrieveInitialDocumentResourceTiming.js.map","import { combine, generateUUID, toServerDuration, relativeToClocks, assign, isNumber, } from '@datadog/browser-core';\nimport { RumPerformanceEntryType, createPerformanceObservable, } from '../../browser/performanceObservable';\nimport { createTraceIdentifier } from '../tracing/tracer';\nimport { matchRequestTiming } from './matchRequestTiming';\nimport { computePerformanceResourceDetails, computePerformanceResourceDuration, computeResourceKind, computeSize, isRequestKind, isLongDataUrl, sanitizeDataUrl, } from './resourceUtils';\nimport { retrieveInitialDocumentResourceTiming } from './retrieveInitialDocumentResourceTiming';\nexport function startResourceCollection(lifeCycle, configuration, pageStateHistory, retrieveInitialDocumentResourceTimingImpl) {\n    if (retrieveInitialDocumentResourceTimingImpl === void 0) { retrieveInitialDocumentResourceTimingImpl = retrieveInitialDocumentResourceTiming; }\n    lifeCycle.subscribe(8 /* LifeCycleEventType.REQUEST_COMPLETED */, function (request) {\n        var rawEvent = processRequest(request, configuration, pageStateHistory);\n        if (rawEvent) {\n            lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, rawEvent);\n        }\n    });\n    var performanceResourceSubscription = createPerformanceObservable(configuration, {\n        type: RumPerformanceEntryType.RESOURCE,\n        buffered: true,\n    }).subscribe(function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if (!isRequestKind(entry)) {\n                var rawEvent = processResourceEntry(entry, configuration);\n                if (rawEvent) {\n                    lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, rawEvent);\n                }\n            }\n        }\n    });\n    retrieveInitialDocumentResourceTimingImpl(configuration, function (timing) {\n        var rawEvent = processResourceEntry(timing, configuration);\n        if (rawEvent) {\n            lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, rawEvent);\n        }\n    });\n    return {\n        stop: function () {\n            performanceResourceSubscription.unsubscribe();\n        },\n    };\n}\nfunction processRequest(request, configuration, pageStateHistory) {\n    var matchingTiming = matchRequestTiming(request);\n    var startClocks = matchingTiming ? relativeToClocks(matchingTiming.startTime) : request.startClocks;\n    var tracingInfo = computeRequestTracingInfo(request, configuration);\n    if (!configuration.trackResources && !tracingInfo) {\n        return;\n    }\n    var type = request.type === \"xhr\" /* RequestType.XHR */ ? \"xhr\" /* ResourceType.XHR */ : \"fetch\" /* ResourceType.FETCH */;\n    var correspondingTimingOverrides = matchingTiming ? computePerformanceEntryMetrics(matchingTiming) : undefined;\n    var duration = computeRequestDuration(pageStateHistory, startClocks, request.duration);\n    var resourceEvent = combine({\n        date: startClocks.timeStamp,\n        resource: {\n            id: generateUUID(),\n            type: type,\n            duration: duration,\n            method: request.method,\n            status_code: request.status,\n            url: isLongDataUrl(request.url) ? sanitizeDataUrl(request.url) : request.url,\n        },\n        type: \"resource\" /* RumEventType.RESOURCE */,\n        _dd: {\n            discarded: !configuration.trackResources,\n        },\n    }, tracingInfo, correspondingTimingOverrides);\n    return {\n        startTime: startClocks.relative,\n        rawRumEvent: resourceEvent,\n        domainContext: {\n            performanceEntry: matchingTiming,\n            xhr: request.xhr,\n            response: request.response,\n            requestInput: request.input,\n            requestInit: request.init,\n            error: request.error,\n            isAborted: request.isAborted,\n            handlingStack: request.handlingStack,\n        },\n    };\n}\nfunction processResourceEntry(entry, configuration) {\n    var startClocks = relativeToClocks(entry.startTime);\n    var tracingInfo = computeEntryTracingInfo(entry, configuration);\n    if (!configuration.trackResources && !tracingInfo) {\n        return;\n    }\n    var type = computeResourceKind(entry);\n    var entryMetrics = computePerformanceEntryMetrics(entry);\n    var resourceEvent = combine({\n        date: startClocks.timeStamp,\n        resource: {\n            id: generateUUID(),\n            type: type,\n            url: entry.name,\n            status_code: discardZeroStatus(entry.responseStatus),\n        },\n        type: \"resource\" /* RumEventType.RESOURCE */,\n        _dd: {\n            discarded: !configuration.trackResources,\n        },\n    }, tracingInfo, entryMetrics);\n    return {\n        startTime: startClocks.relative,\n        rawRumEvent: resourceEvent,\n        domainContext: {\n            performanceEntry: entry,\n        },\n    };\n}\nfunction computePerformanceEntryMetrics(timing) {\n    var renderBlockingStatus = timing.renderBlockingStatus;\n    return {\n        resource: assign({\n            duration: computePerformanceResourceDuration(timing),\n            render_blocking_status: renderBlockingStatus,\n        }, computeSize(timing), computePerformanceResourceDetails(timing)),\n    };\n}\nfunction computeRequestTracingInfo(request, configuration) {\n    var hasBeenTraced = request.traceSampled && request.traceId && request.spanId;\n    if (!hasBeenTraced) {\n        return undefined;\n    }\n    return {\n        _dd: {\n            span_id: request.spanId.toDecimalString(),\n            trace_id: request.traceId.toDecimalString(),\n            rule_psr: getRulePsr(configuration),\n        },\n    };\n}\nfunction computeEntryTracingInfo(entry, configuration) {\n    var hasBeenTraced = entry.traceId;\n    if (!hasBeenTraced) {\n        return undefined;\n    }\n    return {\n        _dd: {\n            trace_id: entry.traceId,\n            span_id: createTraceIdentifier().toDecimalString(),\n            rule_psr: getRulePsr(configuration),\n        },\n    };\n}\n/**\n * @returns number between 0 and 1 which represents trace sample rate\n */\nfunction getRulePsr(configuration) {\n    return isNumber(configuration.traceSampleRate) ? configuration.traceSampleRate / 100 : undefined;\n}\nfunction computeRequestDuration(pageStateHistory, startClocks, duration) {\n    return !pageStateHistory.wasInPageStateDuringPeriod(\"frozen\" /* PageState.FROZEN */, startClocks.relative, duration)\n        ? toServerDuration(duration)\n        : undefined;\n}\n/**\n * The status is 0 for cross-origin resources without CORS headers, so the status is meaningless, and we shouldn't report it\n * https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming/responseStatus#cross-origin_response_status_codes\n */\nfunction discardZeroStatus(statusCode) {\n    return statusCode === 0 ? undefined : statusCode;\n}\n//# sourceMappingURL=resourceCollection.js.map","import { trackEventCounts } from '../trackEventCounts';\nexport function trackViewEventCounts(lifeCycle, viewId, onChange) {\n    var _a = trackEventCounts({\n        lifeCycle: lifeCycle,\n        isChildEvent: function (event) { return event.view.id === viewId; },\n        onChange: onChange,\n    }), stop = _a.stop, eventCounts = _a.eventCounts;\n    return {\n        stop: stop,\n        eventCounts: eventCounts,\n    };\n}\n//# sourceMappingURL=trackViewEventCounts.js.map","import { ONE_MINUTE, find } from '@datadog/browser-core';\nimport { RumPerformanceEntryType } from '../../../browser/performanceObservable';\n// Discard FCP timings above a certain delay to avoid incorrect data\n// It happens in some cases like sleep mode or some browser implementations\nexport var FCP_MAXIMUM_DELAY = 10 * ONE_MINUTE;\nexport function trackFirstContentfulPaint(lifeCycle, firstHidden, callback) {\n    var unsubscribeLifeCycle = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        var fcpEntry = find(entries, function (entry) {\n            return entry.entryType === RumPerformanceEntryType.PAINT &&\n                entry.name === 'first-contentful-paint' &&\n                entry.startTime < firstHidden.timeStamp &&\n                entry.startTime < FCP_MAXIMUM_DELAY;\n        });\n        if (fcpEntry) {\n            callback(fcpEntry.startTime);\n        }\n    }).unsubscribe;\n    return {\n        stop: unsubscribeLifeCycle,\n    };\n}\n//# sourceMappingURL=trackFirstContentfulPaint.js.map","import { elapsed, find } from '@datadog/browser-core';\nimport { isElementNode } from '../../../browser/htmlDomUtils';\nimport { RumPerformanceEntryType } from '../../../browser/performanceObservable';\nimport { getSelectorFromElement } from '../../getSelectorFromElement';\n/**\n * Track the first input occurring during the initial View to return:\n * - First Input Delay\n * - First Input Time\n * Callback is called at most one time.\n * Documentation: https://web.dev/fid/\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/master/src/getFID.ts\n */\nexport function trackFirstInput(lifeCycle, configuration, firstHidden, callback) {\n    var unsubscribeLifeCycle = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        var firstInputEntry = find(entries, function (entry) {\n            return entry.entryType === RumPerformanceEntryType.FIRST_INPUT && entry.startTime < firstHidden.timeStamp;\n        });\n        if (firstInputEntry) {\n            var firstInputDelay = elapsed(firstInputEntry.startTime, firstInputEntry.processingStart);\n            var firstInputTargetSelector = void 0;\n            if (firstInputEntry.target && isElementNode(firstInputEntry.target)) {\n                firstInputTargetSelector = getSelectorFromElement(firstInputEntry.target, configuration.actionNameAttribute);\n            }\n            callback({\n                // Ensure firstInputDelay to be positive, see\n                // https://bugs.chromium.org/p/chromium/issues/detail?id=1185815\n                delay: firstInputDelay >= 0 ? firstInputDelay : 0,\n                time: firstInputEntry.startTime,\n                targetSelector: firstInputTargetSelector,\n            });\n        }\n    }).unsubscribe;\n    return {\n        stop: unsubscribeLifeCycle,\n    };\n}\n//# sourceMappingURL=trackFirstInput.js.map","import { forEach, setTimeout, noop, relativeNow, runOnReadyState } from '@datadog/browser-core';\nimport { computeRelativePerformanceTiming } from '../../../browser/performanceUtils';\nimport { createPerformanceObservable, RumPerformanceEntryType, supportPerformanceTimingEvent, } from '../../../browser/performanceObservable';\nexport function trackNavigationTimings(configuration, callback) {\n    var processEntry = function (entry) {\n        if (!isIncompleteNavigation(entry)) {\n            callback(processNavigationEntry(entry));\n        }\n    };\n    var stop = noop;\n    if (supportPerformanceTimingEvent(RumPerformanceEntryType.NAVIGATION)) {\n        ;\n        (stop = createPerformanceObservable(configuration, {\n            type: RumPerformanceEntryType.NAVIGATION,\n            buffered: true,\n        }).subscribe(function (entries) { return forEach(entries, processEntry); }).unsubscribe);\n    }\n    else {\n        retrieveNavigationTiming(configuration, processEntry);\n    }\n    return { stop: stop };\n}\nfunction processNavigationEntry(entry) {\n    return {\n        domComplete: entry.domComplete,\n        domContentLoaded: entry.domContentLoadedEventEnd,\n        domInteractive: entry.domInteractive,\n        loadEvent: entry.loadEventEnd,\n        // In some cases the value reported is negative or is larger\n        // than the current page time. Ignore these cases:\n        // https://github.com/GoogleChrome/web-vitals/issues/137\n        // https://github.com/GoogleChrome/web-vitals/issues/162\n        firstByte: entry.responseStart >= 0 && entry.responseStart <= relativeNow() ? entry.responseStart : undefined,\n    };\n}\nfunction isIncompleteNavigation(entry) {\n    return entry.loadEventEnd <= 0;\n}\nfunction retrieveNavigationTiming(configuration, callback) {\n    runOnReadyState(configuration, 'complete', function () {\n        // Send it a bit after the actual load event, so the \"loadEventEnd\" timing is accurate\n        setTimeout(function () { return callback(computeRelativePerformanceTiming()); });\n    });\n}\n//# sourceMappingURL=trackNavigationTimings.js.map","import { ONE_MINUTE, addEventListeners, findLast } from '@datadog/browser-core';\nimport { RumPerformanceEntryType } from '../../../browser/performanceObservable';\nimport { getSelectorFromElement } from '../../getSelectorFromElement';\n// Discard LCP timings above a certain delay to avoid incorrect data\n// It happens in some cases like sleep mode or some browser implementations\nexport var LCP_MAXIMUM_DELAY = 10 * ONE_MINUTE;\n/**\n * Track the largest contentful paint (LCP) occurring during the initial View.  This can yield\n * multiple values, only the most recent one should be used.\n * Documentation: https://web.dev/lcp/\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/master/src/onLCP.ts\n */\nexport function trackLargestContentfulPaint(lifeCycle, configuration, firstHidden, eventTarget, callback) {\n    // Ignore entries that come after the first user interaction. According to the documentation, the\n    // browser should not send largest-contentful-paint entries after a user interact with the page,\n    // but the web-vitals reference implementation uses this as a safeguard.\n    var firstInteractionTimestamp = Infinity;\n    var stopEventListener = addEventListeners(configuration, eventTarget, [\"pointerdown\" /* DOM_EVENT.POINTER_DOWN */, \"keydown\" /* DOM_EVENT.KEY_DOWN */], function (event) {\n        firstInteractionTimestamp = event.timeStamp;\n    }, { capture: true, once: true }).stop;\n    var biggestLcpSize = 0;\n    var unsubscribeLifeCycle = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        var lcpEntry = findLast(entries, function (entry) {\n            return entry.entryType === RumPerformanceEntryType.LARGEST_CONTENTFUL_PAINT &&\n                entry.startTime < firstInteractionTimestamp &&\n                entry.startTime < firstHidden.timeStamp &&\n                entry.startTime < LCP_MAXIMUM_DELAY &&\n                // Ensure to get the LCP entry with the biggest size, see\n                // https://bugs.chromium.org/p/chromium/issues/detail?id=1516655\n                entry.size > biggestLcpSize;\n        });\n        if (lcpEntry) {\n            var lcpTargetSelector = void 0;\n            if (lcpEntry.element) {\n                lcpTargetSelector = getSelectorFromElement(lcpEntry.element, configuration.actionNameAttribute);\n            }\n            callback({\n                value: lcpEntry.startTime,\n                targetSelector: lcpTargetSelector,\n            });\n            biggestLcpSize = lcpEntry.size;\n        }\n    }).unsubscribe;\n    return {\n        stop: function () {\n            stopEventListener();\n            unsubscribeLifeCycle();\n        },\n    };\n}\n//# sourceMappingURL=trackLargestContentfulPaint.js.map","import { addEventListeners } from '@datadog/browser-core';\nexport function trackFirstHidden(configuration, eventTarget) {\n    if (eventTarget === void 0) { eventTarget = window; }\n    var timeStamp;\n    var stopListeners;\n    if (document.visibilityState === 'hidden') {\n        timeStamp = 0;\n    }\n    else {\n        timeStamp = Infinity;\n        (stopListeners = addEventListeners(configuration, eventTarget, [\"pagehide\" /* DOM_EVENT.PAGE_HIDE */, \"visibilitychange\" /* DOM_EVENT.VISIBILITY_CHANGE */], function (event) {\n            if (event.type === \"pagehide\" /* DOM_EVENT.PAGE_HIDE */ || document.visibilityState === 'hidden') {\n                timeStamp = event.timeStamp;\n                stopListeners();\n            }\n        }, { capture: true }).stop);\n    }\n    return {\n        get timeStamp() {\n            return timeStamp;\n        },\n        stop: function () {\n            stopListeners === null || stopListeners === void 0 ? void 0 : stopListeners();\n        },\n    };\n}\n//# sourceMappingURL=trackFirstHidden.js.map","import { trackFirstContentfulPaint } from './trackFirstContentfulPaint';\nimport { trackFirstInput } from './trackFirstInput';\nimport { trackNavigationTimings } from './trackNavigationTimings';\nimport { trackLargestContentfulPaint } from './trackLargestContentfulPaint';\nimport { trackFirstHidden } from './trackFirstHidden';\nexport function trackInitialViewMetrics(lifeCycle, configuration, setLoadEvent, scheduleViewUpdate) {\n    var initialViewMetrics = {};\n    var stopNavigationTracking = trackNavigationTimings(configuration, function (navigationTimings) {\n        setLoadEvent(navigationTimings.loadEvent);\n        initialViewMetrics.navigationTimings = navigationTimings;\n        scheduleViewUpdate();\n    }).stop;\n    var firstHidden = trackFirstHidden(configuration);\n    var stopFCPTracking = trackFirstContentfulPaint(lifeCycle, firstHidden, function (firstContentfulPaint) {\n        initialViewMetrics.firstContentfulPaint = firstContentfulPaint;\n        scheduleViewUpdate();\n    }).stop;\n    var stopLCPTracking = trackLargestContentfulPaint(lifeCycle, configuration, firstHidden, window, function (largestContentfulPaint) {\n        initialViewMetrics.largestContentfulPaint = largestContentfulPaint;\n        scheduleViewUpdate();\n    }).stop;\n    var stopFIDTracking = trackFirstInput(lifeCycle, configuration, firstHidden, function (firstInput) {\n        initialViewMetrics.firstInput = firstInput;\n        scheduleViewUpdate();\n    }).stop;\n    function stop() {\n        stopNavigationTracking();\n        stopFCPTracking();\n        stopLCPTracking();\n        stopFIDTracking();\n        firstHidden.stop();\n    }\n    return {\n        stop: stop,\n        initialViewMetrics: initialViewMetrics,\n    };\n}\n//# sourceMappingURL=trackInitialViewMetrics.js.map","import { round, find, ONE_SECOND, noop, elapsed } from '@datadog/browser-core';\nimport { isElementNode } from '../../../browser/htmlDomUtils';\nimport { supportPerformanceTimingEvent, RumPerformanceEntryType } from '../../../browser/performanceObservable';\nimport { getSelectorFromElement } from '../../getSelectorFromElement';\n/**\n * Track the cumulative layout shifts (CLS).\n * Layout shifts are grouped into session windows.\n * The minimum gap between session windows is 1 second.\n * The maximum duration of a session window is 5 second.\n * The session window layout shift value is the sum of layout shifts inside it.\n * The CLS value is the max of session windows values.\n *\n * This yields a new value whenever the CLS value is updated (a higher session window value is computed).\n *\n * See isLayoutShiftSupported to check for browser support.\n *\n * Documentation:\n * https://web.dev/cls/\n * https://web.dev/evolving-cls/\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/master/src/getCLS.ts\n */\nexport function trackCumulativeLayoutShift(configuration, lifeCycle, viewStart, callback) {\n    if (!isLayoutShiftSupported()) {\n        return {\n            stop: noop,\n        };\n    }\n    var maxClsValue = 0;\n    // WeakRef is not supported in IE11 and Safari mobile, but so is the layout shift API, so this code won't be executed in these browsers\n    var maxClsTarget;\n    var maxClsStartTime;\n    // if no layout shift happen the value should be reported as 0\n    callback({\n        value: 0,\n    });\n    var window = slidingSessionWindow();\n    var stop = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if (entry.entryType === RumPerformanceEntryType.LAYOUT_SHIFT && !entry.hadRecentInput) {\n                var _a = window.update(entry), cumulatedValue = _a.cumulatedValue, isMaxValue = _a.isMaxValue;\n                if (isMaxValue) {\n                    var target = getTargetFromSource(entry.sources);\n                    maxClsTarget = target ? new WeakRef(target) : undefined;\n                    maxClsStartTime = elapsed(viewStart, entry.startTime);\n                }\n                if (cumulatedValue > maxClsValue) {\n                    maxClsValue = cumulatedValue;\n                    var target = maxClsTarget === null || maxClsTarget === void 0 ? void 0 : maxClsTarget.deref();\n                    callback({\n                        value: round(maxClsValue, 4),\n                        targetSelector: target && getSelectorFromElement(target, configuration.actionNameAttribute),\n                        time: maxClsStartTime,\n                    });\n                }\n            }\n        }\n    }).unsubscribe;\n    return {\n        stop: stop,\n    };\n}\nfunction getTargetFromSource(sources) {\n    var _a;\n    if (!sources) {\n        return;\n    }\n    return (_a = find(sources, function (source) { return !!source.node && isElementNode(source.node); })) === null || _a === void 0 ? void 0 : _a.node;\n}\nexport var MAX_WINDOW_DURATION = 5 * ONE_SECOND;\nvar MAX_UPDATE_GAP = ONE_SECOND;\nfunction slidingSessionWindow() {\n    var cumulatedValue = 0;\n    var startTime;\n    var endTime;\n    var maxValue = 0;\n    return {\n        update: function (entry) {\n            var shouldCreateNewWindow = startTime === undefined ||\n                entry.startTime - endTime >= MAX_UPDATE_GAP ||\n                entry.startTime - startTime >= MAX_WINDOW_DURATION;\n            var isMaxValue;\n            if (shouldCreateNewWindow) {\n                startTime = endTime = entry.startTime;\n                maxValue = cumulatedValue = entry.value;\n                isMaxValue = true;\n            }\n            else {\n                cumulatedValue += entry.value;\n                endTime = entry.startTime;\n                isMaxValue = entry.value > maxValue;\n                if (isMaxValue) {\n                    maxValue = entry.value;\n                }\n            }\n            return {\n                cumulatedValue: cumulatedValue,\n                isMaxValue: isMaxValue,\n            };\n        },\n    };\n}\n/**\n * Check whether `layout-shift` is supported by the browser.\n */\nexport function isLayoutShiftSupported() {\n    return supportPerformanceTimingEvent(RumPerformanceEntryType.LAYOUT_SHIFT);\n}\n//# sourceMappingURL=trackCumulativeLayoutShift.js.map","/**\n * performance.interactionCount polyfill\n *\n * The interactionCount is an integer which counts the total number of distinct user interactions,\n * for which there was a unique interactionId.\n *\n * The interactionCount polyfill is an estimate based on a convention specific to Chrome. Cf: https://github.com/GoogleChrome/web-vitals/pull/213\n * This is currently not an issue as the polyfill is only used for INP which is currently only supported on Chrome.\n * Hopefully when/if other browsers will support INP, they will also implement performance.interactionCount at the same time, so we won't need that polyfill.\n *\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/main/src/lib/polyfills/interactionCountPolyfill.ts\n */\nimport { monitor } from '@datadog/browser-core';\nvar observer;\nvar interactionCountEstimate = 0;\nvar minKnownInteractionId = Infinity;\nvar maxKnownInteractionId = 0;\nexport function initInteractionCountPolyfill() {\n    if ('interactionCount' in performance || observer) {\n        return;\n    }\n    observer = new window.PerformanceObserver(monitor(function (entries) {\n        entries.getEntries().forEach(function (e) {\n            var entry = e;\n            if (entry.interactionId) {\n                minKnownInteractionId = Math.min(minKnownInteractionId, entry.interactionId);\n                maxKnownInteractionId = Math.max(maxKnownInteractionId, entry.interactionId);\n                interactionCountEstimate = (maxKnownInteractionId - minKnownInteractionId) / 7 + 1;\n            }\n        });\n    }));\n    observer.observe({ type: 'event', buffered: true, durationThreshold: 0 });\n}\n/**\n * Returns the `interactionCount` value using the native API (if available)\n * or the polyfill estimate in this module.\n */\nexport var getInteractionCount = function () {\n    return observer ? interactionCountEstimate : window.performance.interactionCount || 0;\n};\n//# sourceMappingURL=interactionCountPolyfill.js.map","import { elapsed, noop, ONE_MINUTE } from '@datadog/browser-core';\nimport { RumPerformanceEntryType, supportPerformanceTimingEvent } from '../../../browser/performanceObservable';\nimport { getSelectorFromElement } from '../../getSelectorFromElement';\nimport { isElementNode } from '../../../browser/htmlDomUtils';\nimport { getInteractionCount, initInteractionCountPolyfill } from './interactionCountPolyfill';\n// Arbitrary value to prevent unnecessary memory usage on views with lots of interactions.\nvar MAX_INTERACTION_ENTRIES = 10;\n// Arbitrary value to cap INP outliers\nexport var MAX_INP_VALUE = (1 * ONE_MINUTE);\n/**\n * Track the interaction to next paint (INP).\n * To avoid outliers, return the p98 worst interaction of the view.\n * Documentation: https://web.dev/inp/\n * Reference implementation: https://github.com/GoogleChrome/web-vitals/blob/main/src/onINP.ts\n */\nexport function trackInteractionToNextPaint(configuration, viewStart, viewLoadingType, lifeCycle) {\n    if (!isInteractionToNextPaintSupported()) {\n        return {\n            getInteractionToNextPaint: function () { return undefined; },\n            setViewEnd: noop,\n            stop: noop,\n        };\n    }\n    var _a = trackViewInteractionCount(viewLoadingType), getViewInteractionCount = _a.getViewInteractionCount, stopViewInteractionCount = _a.stopViewInteractionCount;\n    var viewEnd = Infinity;\n    var longestInteractions = trackLongestInteractions(getViewInteractionCount);\n    var interactionToNextPaint = -1;\n    var interactionToNextPaintTargetSelector;\n    var interactionToNextPaintStartTime;\n    var stop = lifeCycle.subscribe(0 /* LifeCycleEventType.PERFORMANCE_ENTRIES_COLLECTED */, function (entries) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if ((entry.entryType === RumPerformanceEntryType.EVENT ||\n                entry.entryType === RumPerformanceEntryType.FIRST_INPUT) &&\n                entry.interactionId &&\n                // Check the entry start time is inside the view bounds because some view interactions can be reported after the view end (if long duration).\n                entry.startTime >= viewStart &&\n                entry.startTime <= viewEnd) {\n                longestInteractions.process(entry);\n            }\n        }\n        var newInteraction = longestInteractions.estimateP98Interaction();\n        if (newInteraction && newInteraction.duration !== interactionToNextPaint) {\n            interactionToNextPaint = newInteraction.duration;\n            interactionToNextPaintStartTime = elapsed(viewStart, newInteraction.startTime);\n            if (newInteraction.target && isElementNode(newInteraction.target)) {\n                interactionToNextPaintTargetSelector = getSelectorFromElement(newInteraction.target, configuration.actionNameAttribute);\n            }\n            else {\n                interactionToNextPaintTargetSelector = undefined;\n            }\n        }\n    }).unsubscribe;\n    return {\n        getInteractionToNextPaint: function () {\n            // If no INP duration where captured because of the performanceObserver 40ms threshold\n            // but the view interaction count > 0 then report 0\n            if (interactionToNextPaint >= 0) {\n                return {\n                    value: Math.min(interactionToNextPaint, MAX_INP_VALUE),\n                    targetSelector: interactionToNextPaintTargetSelector,\n                    time: interactionToNextPaintStartTime,\n                };\n            }\n            else if (getViewInteractionCount()) {\n                return {\n                    value: 0,\n                };\n            }\n        },\n        setViewEnd: function (viewEndTime) {\n            viewEnd = viewEndTime;\n            stopViewInteractionCount();\n        },\n        stop: stop,\n    };\n}\nfunction trackLongestInteractions(getViewInteractionCount) {\n    var longestInteractions = [];\n    function sortAndTrimLongestInteractions() {\n        longestInteractions.sort(function (a, b) { return b.duration - a.duration; }).splice(MAX_INTERACTION_ENTRIES);\n    }\n    return {\n        /**\n         * Process the performance entry:\n         * - if its duration is long enough, add the performance entry to the list of worst interactions\n         * - if an entry with the same interaction id exists and its duration is lower than the new one, then replace it in the list of worst interactions\n         */\n        process: function (entry) {\n            var interactionIndex = longestInteractions.findIndex(function (interaction) { return entry.interactionId === interaction.interactionId; });\n            var minLongestInteraction = longestInteractions[longestInteractions.length - 1];\n            if (interactionIndex !== -1) {\n                if (entry.duration > longestInteractions[interactionIndex].duration) {\n                    longestInteractions[interactionIndex] = entry;\n                    sortAndTrimLongestInteractions();\n                }\n            }\n            else if (longestInteractions.length < MAX_INTERACTION_ENTRIES ||\n                entry.duration > minLongestInteraction.duration) {\n                longestInteractions.push(entry);\n                sortAndTrimLongestInteractions();\n            }\n        },\n        /**\n         * Compute the p98 longest interaction.\n         * For better performance the computation is based on 10 longest interactions and the interaction count of the current view.\n         */\n        estimateP98Interaction: function () {\n            var interactionIndex = Math.min(longestInteractions.length - 1, Math.floor(getViewInteractionCount() / 50));\n            return longestInteractions[interactionIndex];\n        },\n    };\n}\nexport function trackViewInteractionCount(viewLoadingType) {\n    initInteractionCountPolyfill();\n    var previousInteractionCount = viewLoadingType === \"initial_load\" /* ViewLoadingType.INITIAL_LOAD */ ? 0 : getInteractionCount();\n    var state = { stopped: false };\n    function computeViewInteractionCount() {\n        return getInteractionCount() - previousInteractionCount;\n    }\n    return {\n        getViewInteractionCount: function () {\n            if (state.stopped) {\n                return state.interactionCount;\n            }\n            return computeViewInteractionCount();\n        },\n        stopViewInteractionCount: function () {\n            state = { stopped: true, interactionCount: computeViewInteractionCount() };\n        },\n    };\n}\nexport function isInteractionToNextPaintSupported() {\n    return (supportPerformanceTimingEvent(RumPerformanceEntryType.EVENT) &&\n        window.PerformanceEventTiming &&\n        'interactionId' in PerformanceEventTiming.prototype);\n}\n//# sourceMappingURL=trackInteractionToNextPaint.js.map","import { elapsed } from '@datadog/browser-core';\nimport { waitPageActivityEnd } from '../../waitPageActivityEnd';\nexport function trackLoadingTime(lifeCycle, domMutationObservable, configuration, loadType, viewStart, callback) {\n    var isWaitingForLoadEvent = loadType === \"initial_load\" /* ViewLoadingType.INITIAL_LOAD */;\n    var isWaitingForActivityLoadingTime = true;\n    var loadingTimeCandidates = [];\n    function invokeCallbackIfAllCandidatesAreReceived() {\n        if (!isWaitingForActivityLoadingTime && !isWaitingForLoadEvent && loadingTimeCandidates.length > 0) {\n            callback(Math.max.apply(Math, loadingTimeCandidates));\n        }\n    }\n    var stop = waitPageActivityEnd(lifeCycle, domMutationObservable, configuration, function (event) {\n        if (isWaitingForActivityLoadingTime) {\n            isWaitingForActivityLoadingTime = false;\n            if (event.hadActivity) {\n                loadingTimeCandidates.push(elapsed(viewStart.timeStamp, event.end));\n            }\n            invokeCallbackIfAllCandidatesAreReceived();\n        }\n    }).stop;\n    return {\n        stop: stop,\n        setLoadEvent: function (loadEvent) {\n            if (isWaitingForLoadEvent) {\n                isWaitingForLoadEvent = false;\n                loadingTimeCandidates.push(loadEvent);\n                invokeCallbackIfAllCandidatesAreReceived();\n            }\n        },\n    };\n}\n//# sourceMappingURL=trackLoadingTime.js.map","export function getScrollX() {\n    var scrollX;\n    var visual = window.visualViewport;\n    if (visual) {\n        scrollX = visual.pageLeft - visual.offsetLeft;\n    }\n    else if (window.scrollX !== undefined) {\n        scrollX = window.scrollX;\n    }\n    else {\n        scrollX = window.pageXOffset || 0;\n    }\n    return Math.round(scrollX);\n}\nexport function getScrollY() {\n    var scrollY;\n    var visual = window.visualViewport;\n    if (visual) {\n        scrollY = visual.pageTop - visual.offsetTop;\n    }\n    else if (window.scrollY !== undefined) {\n        scrollY = window.scrollY;\n    }\n    else {\n        scrollY = window.pageYOffset || 0;\n    }\n    return Math.round(scrollY);\n}\n//# sourceMappingURL=scroll.js.map","import { Observable, throttle, addEventListener } from '@datadog/browser-core';\nvar viewportObservable;\nexport function initViewportObservable(configuration) {\n    if (!viewportObservable) {\n        viewportObservable = createViewportObservable(configuration);\n    }\n    return viewportObservable;\n}\nexport function createViewportObservable(configuration) {\n    return new Observable(function (observable) {\n        var updateDimension = throttle(function () {\n            observable.notify(getViewportDimension());\n        }, 200).throttled;\n        return addEventListener(configuration, window, \"resize\" /* DOM_EVENT.RESIZE */, updateDimension, { capture: true, passive: true })\n            .stop;\n    });\n}\n// excludes the width and height of any rendered classic scrollbar that is fixed to the visual viewport\nexport function getViewportDimension() {\n    var visual = window.visualViewport;\n    if (visual) {\n        return {\n            width: Number(visual.width * visual.scale),\n            height: Number(visual.height * visual.scale),\n        };\n    }\n    return {\n        width: Number(window.innerWidth || 0),\n        height: Number(window.innerHeight || 0),\n    };\n}\n//# sourceMappingURL=viewportObservable.js.map","import { Observable, ONE_SECOND, elapsed, relativeNow, throttle, addEventListener, monitor, } from '@datadog/browser-core';\nimport { getScrollY } from '../../../browser/scroll';\nimport { getViewportDimension } from '../../../browser/viewportObservable';\n/** Arbitrary scroll throttle duration */\nexport var THROTTLE_SCROLL_DURATION = ONE_SECOND;\nexport function trackScrollMetrics(configuration, viewStart, callback, scrollValues) {\n    if (scrollValues === void 0) { scrollValues = createScrollValuesObservable(configuration); }\n    var maxScrollDepth = 0;\n    var maxScrollHeight = 0;\n    var maxScrollHeightTime = 0;\n    var subscription = scrollValues.subscribe(function (_a) {\n        var scrollDepth = _a.scrollDepth, scrollTop = _a.scrollTop, scrollHeight = _a.scrollHeight;\n        var shouldUpdate = false;\n        if (scrollDepth > maxScrollDepth) {\n            maxScrollDepth = scrollDepth;\n            shouldUpdate = true;\n        }\n        if (scrollHeight > maxScrollHeight) {\n            maxScrollHeight = scrollHeight;\n            var now = relativeNow();\n            maxScrollHeightTime = elapsed(viewStart.relative, now);\n            shouldUpdate = true;\n        }\n        if (shouldUpdate) {\n            callback({\n                maxDepth: Math.min(maxScrollDepth, maxScrollHeight),\n                maxDepthScrollTop: scrollTop,\n                maxScrollHeight: maxScrollHeight,\n                maxScrollHeightTime: maxScrollHeightTime,\n            });\n        }\n    });\n    return {\n        stop: function () { return subscription.unsubscribe(); },\n    };\n}\nexport function computeScrollValues() {\n    var scrollTop = getScrollY();\n    var height = getViewportDimension().height;\n    var scrollHeight = Math.round((document.scrollingElement || document.documentElement).scrollHeight);\n    var scrollDepth = Math.round(height + scrollTop);\n    return {\n        scrollHeight: scrollHeight,\n        scrollDepth: scrollDepth,\n        scrollTop: scrollTop,\n    };\n}\nexport function createScrollValuesObservable(configuration, throttleDuration) {\n    if (throttleDuration === void 0) { throttleDuration = THROTTLE_SCROLL_DURATION; }\n    return new Observable(function (observable) {\n        function notify() {\n            observable.notify(computeScrollValues());\n        }\n        if (window.ResizeObserver) {\n            var throttledNotify_1 = throttle(notify, throttleDuration, {\n                leading: false,\n                trailing: true,\n            });\n            var observerTarget_1 = document.scrollingElement || document.documentElement;\n            var resizeObserver_1 = new ResizeObserver(monitor(throttledNotify_1.throttled));\n            resizeObserver_1.observe(observerTarget_1);\n            var eventListener_1 = addEventListener(configuration, window, \"scroll\" /* DOM_EVENT.SCROLL */, throttledNotify_1.throttled, {\n                passive: true,\n            });\n            return function () {\n                throttledNotify_1.cancel();\n                resizeObserver_1.unobserve(observerTarget_1);\n                eventListener_1.stop();\n            };\n        }\n    });\n}\n//# sourceMappingURL=trackScrollMetrics.js.map","import { trackCumulativeLayoutShift } from './trackCumulativeLayoutShift';\nimport { trackInteractionToNextPaint } from './trackInteractionToNextPaint';\nimport { trackLoadingTime } from './trackLoadingTime';\nimport { trackScrollMetrics } from './trackScrollMetrics';\nexport function trackCommonViewMetrics(lifeCycle, domMutationObservable, configuration, scheduleViewUpdate, loadingType, viewStart) {\n    var commonViewMetrics = {};\n    var _a = trackLoadingTime(lifeCycle, domMutationObservable, configuration, loadingType, viewStart, function (newLoadingTime) {\n        commonViewMetrics.loadingTime = newLoadingTime;\n        scheduleViewUpdate();\n    }), stopLoadingTimeTracking = _a.stop, setLoadEvent = _a.setLoadEvent;\n    var stopScrollMetricsTracking = trackScrollMetrics(configuration, viewStart, function (newScrollMetrics) {\n        commonViewMetrics.scroll = newScrollMetrics;\n    }).stop;\n    var stopCLSTracking = trackCumulativeLayoutShift(configuration, lifeCycle, viewStart.relative, function (cumulativeLayoutShift) {\n        commonViewMetrics.cumulativeLayoutShift = cumulativeLayoutShift;\n        scheduleViewUpdate();\n    }).stop;\n    var _b = trackInteractionToNextPaint(configuration, viewStart.relative, loadingType, lifeCycle), stopINPTracking = _b.stop, getInteractionToNextPaint = _b.getInteractionToNextPaint, setViewEnd = _b.setViewEnd;\n    return {\n        stop: function () {\n            stopLoadingTimeTracking();\n            stopCLSTracking();\n            stopScrollMetricsTracking();\n        },\n        stopINPTracking: stopINPTracking,\n        setLoadEvent: setLoadEvent,\n        setViewEnd: setViewEnd,\n        getCommonViewMetrics: function () {\n            commonViewMetrics.interactionToNextPaint = getInteractionToNextPaint();\n            return commonViewMetrics;\n        },\n    };\n}\n//# sourceMappingURL=trackCommonViewMetrics.js.map","import { noop, PageExitReason, shallowClone, elapsed, generateUUID, ONE_MINUTE, throttle, clocksNow, clocksOrigin, timeStampNow, display, looksLikeRelativeTime, setInterval, clearInterval, setTimeout, Observable, isExperimentalFeatureEnabled, ExperimentalFeature, } from '@datadog/browser-core';\nimport { trackViewEventCounts } from './trackViewEventCounts';\nimport { trackInitialViewMetrics } from './viewMetrics/trackInitialViewMetrics';\nimport { trackCommonViewMetrics } from './viewMetrics/trackCommonViewMetrics';\nexport var THROTTLE_VIEW_UPDATE_PERIOD = 3000;\nexport var SESSION_KEEP_ALIVE_INTERVAL = 5 * ONE_MINUTE;\n// Some events or metrics can be captured after the end of the view. To avoid missing those;\n// an arbitrary delay is added for stopping their tracking after the view ends.\n//\n// Ideally, we would not stop and keep tracking events or metrics until the end of the session.\n// But this might have a small performance impact if there are many many views.\n// So let's have a fairly short delay improving the situation in most cases and avoid impacting performances too much.\nexport var KEEP_TRACKING_AFTER_VIEW_DELAY = 5 * ONE_MINUTE;\nexport function trackViews(location, lifeCycle, domMutationObservable, configuration, locationChangeObservable, areViewsTrackedAutomatically, initialViewOptions) {\n    var activeViews = new Set();\n    var currentView = startNewView(\"initial_load\" /* ViewLoadingType.INITIAL_LOAD */, clocksOrigin(), initialViewOptions);\n    startViewLifeCycle();\n    var locationChangeSubscription;\n    if (areViewsTrackedAutomatically) {\n        locationChangeSubscription = renewViewOnLocationChange(locationChangeObservable);\n    }\n    function startNewView(loadingType, startClocks, viewOptions) {\n        var newlyCreatedView = newView(lifeCycle, domMutationObservable, configuration, location, loadingType, startClocks, viewOptions);\n        activeViews.add(newlyCreatedView);\n        newlyCreatedView.stopObservable.subscribe(function () {\n            activeViews.delete(newlyCreatedView);\n        });\n        return newlyCreatedView;\n    }\n    function startViewLifeCycle() {\n        lifeCycle.subscribe(10 /* LifeCycleEventType.SESSION_RENEWED */, function () {\n            // Renew view on session renewal\n            currentView = startNewView(\"route_change\" /* ViewLoadingType.ROUTE_CHANGE */, undefined, {\n                name: currentView.name,\n                service: currentView.service,\n                version: currentView.version,\n            });\n        });\n        lifeCycle.subscribe(9 /* LifeCycleEventType.SESSION_EXPIRED */, function () {\n            currentView.end({ sessionIsActive: false });\n        });\n        // End the current view on page unload\n        lifeCycle.subscribe(11 /* LifeCycleEventType.PAGE_EXITED */, function (pageExitEvent) {\n            if (pageExitEvent.reason === PageExitReason.UNLOADING) {\n                currentView.end();\n            }\n        });\n    }\n    function renewViewOnLocationChange(locationChangeObservable) {\n        return locationChangeObservable.subscribe(function (_a) {\n            var oldLocation = _a.oldLocation, newLocation = _a.newLocation;\n            if (areDifferentLocation(oldLocation, newLocation)) {\n                currentView.end();\n                currentView = startNewView(\"route_change\" /* ViewLoadingType.ROUTE_CHANGE */);\n            }\n        });\n    }\n    return {\n        addTiming: function (name, time) {\n            if (time === void 0) { time = timeStampNow(); }\n            currentView.addTiming(name, time);\n        },\n        startView: function (options, startClocks) {\n            currentView.end({ endClocks: startClocks });\n            currentView = startNewView(\"route_change\" /* ViewLoadingType.ROUTE_CHANGE */, startClocks, options);\n        },\n        updateViewName: function (name) {\n            currentView.updateViewName(name);\n        },\n        stop: function () {\n            if (locationChangeSubscription) {\n                locationChangeSubscription.unsubscribe();\n            }\n            currentView.end();\n            activeViews.forEach(function (view) { return view.stop(); });\n        },\n    };\n}\nfunction newView(lifeCycle, domMutationObservable, configuration, initialLocation, loadingType, startClocks, viewOptions) {\n    if (startClocks === void 0) { startClocks = clocksNow(); }\n    // Setup initial values\n    var id = generateUUID();\n    var stopObservable = new Observable();\n    var customTimings = {};\n    var documentVersion = 0;\n    var endClocks;\n    var location = shallowClone(initialLocation);\n    var sessionIsActive = true;\n    var name;\n    var service;\n    var version;\n    if (viewOptions) {\n        name = viewOptions.name;\n        service = viewOptions.service || undefined;\n        version = viewOptions.version || undefined;\n    }\n    var viewCreatedEvent = {\n        id: id,\n        name: name,\n        startClocks: startClocks,\n        service: service,\n        version: version,\n    };\n    lifeCycle.notify(2 /* LifeCycleEventType.BEFORE_VIEW_CREATED */, viewCreatedEvent);\n    lifeCycle.notify(3 /* LifeCycleEventType.VIEW_CREATED */, viewCreatedEvent);\n    // Update the view every time the measures are changing\n    var _a = throttle(triggerViewUpdate, THROTTLE_VIEW_UPDATE_PERIOD, {\n        leading: false,\n    }), scheduleViewUpdate = _a.throttled, cancelScheduleViewUpdate = _a.cancel;\n    var _b = trackCommonViewMetrics(lifeCycle, domMutationObservable, configuration, scheduleViewUpdate, loadingType, startClocks), setLoadEvent = _b.setLoadEvent, setViewEnd = _b.setViewEnd, stopCommonViewMetricsTracking = _b.stop, stopINPTracking = _b.stopINPTracking, getCommonViewMetrics = _b.getCommonViewMetrics;\n    var _c = loadingType === \"initial_load\" /* ViewLoadingType.INITIAL_LOAD */\n        ? trackInitialViewMetrics(lifeCycle, configuration, setLoadEvent, scheduleViewUpdate)\n        : { stop: noop, initialViewMetrics: {} }, stopInitialViewMetricsTracking = _c.stop, initialViewMetrics = _c.initialViewMetrics;\n    var _d = trackViewEventCounts(lifeCycle, id, scheduleViewUpdate), stopEventCountsTracking = _d.stop, eventCounts = _d.eventCounts;\n    // Session keep alive\n    var keepAliveIntervalId = setInterval(triggerViewUpdate, SESSION_KEEP_ALIVE_INTERVAL);\n    // Initial view update\n    triggerViewUpdate();\n    function triggerViewUpdate() {\n        cancelScheduleViewUpdate();\n        documentVersion += 1;\n        var currentEnd = endClocks === undefined ? timeStampNow() : endClocks.timeStamp;\n        lifeCycle.notify(4 /* LifeCycleEventType.VIEW_UPDATED */, {\n            customTimings: customTimings,\n            documentVersion: documentVersion,\n            id: id,\n            name: name,\n            service: service,\n            version: version,\n            loadingType: loadingType,\n            location: location,\n            startClocks: startClocks,\n            commonViewMetrics: getCommonViewMetrics(),\n            initialViewMetrics: initialViewMetrics,\n            duration: elapsed(startClocks.timeStamp, currentEnd),\n            isActive: endClocks === undefined,\n            sessionIsActive: sessionIsActive,\n            eventCounts: eventCounts,\n        });\n    }\n    return {\n        get name() {\n            return name;\n        },\n        service: service,\n        version: version,\n        stopObservable: stopObservable,\n        end: function (options) {\n            var _this = this;\n            var _a, _b;\n            if (options === void 0) { options = {}; }\n            if (endClocks) {\n                // view already ended\n                return;\n            }\n            endClocks = (_a = options.endClocks) !== null && _a !== void 0 ? _a : clocksNow();\n            sessionIsActive = (_b = options.sessionIsActive) !== null && _b !== void 0 ? _b : true;\n            lifeCycle.notify(5 /* LifeCycleEventType.VIEW_ENDED */, { endClocks: endClocks });\n            lifeCycle.notify(6 /* LifeCycleEventType.AFTER_VIEW_ENDED */, { endClocks: endClocks });\n            clearInterval(keepAliveIntervalId);\n            setViewEnd(endClocks.relative);\n            stopCommonViewMetricsTracking();\n            triggerViewUpdate();\n            setTimeout(function () {\n                _this.stop();\n            }, KEEP_TRACKING_AFTER_VIEW_DELAY);\n        },\n        stop: function () {\n            stopInitialViewMetricsTracking();\n            stopEventCountsTracking();\n            stopINPTracking();\n            stopObservable.notify();\n        },\n        addTiming: function (name, time) {\n            if (endClocks) {\n                return;\n            }\n            var relativeTime = looksLikeRelativeTime(time) ? time : elapsed(startClocks.timeStamp, time);\n            customTimings[sanitizeTiming(name)] = relativeTime;\n            scheduleViewUpdate();\n        },\n        updateViewName: function (updatedName) {\n            if (!isExperimentalFeatureEnabled(ExperimentalFeature.UPDATE_VIEW_NAME)) {\n                return;\n            }\n            name = updatedName;\n            triggerViewUpdate();\n        },\n    };\n}\n/**\n * Timing name is used as facet path that must contain only letters, digits, or the characters - _ . @ $\n */\nfunction sanitizeTiming(name) {\n    var sanitized = name.replace(/[^a-zA-Z0-9-_.@$]/g, '_');\n    if (sanitized !== name) {\n        display.warn(\"Invalid timing name: \".concat(name, \", sanitized to: \").concat(sanitized));\n    }\n    return sanitized;\n}\nfunction areDifferentLocation(currentLocation, otherLocation) {\n    return (currentLocation.pathname !== otherLocation.pathname ||\n        (!isHashAnAnchor(otherLocation.hash) &&\n            getPathFromHash(otherLocation.hash) !== getPathFromHash(currentLocation.hash)));\n}\nfunction isHashAnAnchor(hash) {\n    var correspondingId = hash.substring(1);\n    // check if the correspondingId is empty because on Firefox an empty string passed to getElementById() prints a consol warning\n    return correspondingId !== '' && !!document.getElementById(correspondingId);\n}\nfunction getPathFromHash(hash) {\n    var index = hash.indexOf('?');\n    return index < 0 ? hash : hash.slice(0, index);\n}\n//# sourceMappingURL=trackViews.js.map","import { isEmptyObject, mapValues, toServerDuration } from '@datadog/browser-core';\nimport { discardNegativeDuration } from '../discardNegativeDuration';\nimport { trackViews } from './trackViews';\nexport function startViewCollection(lifeCycle, configuration, location, domMutationObservable, locationChangeObservable, featureFlagContexts, pageStateHistory, recorderApi, initialViewOptions) {\n    lifeCycle.subscribe(4 /* LifeCycleEventType.VIEW_UPDATED */, function (view) {\n        return lifeCycle.notify(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, processViewUpdate(view, configuration, featureFlagContexts, recorderApi, pageStateHistory));\n    });\n    return trackViews(location, lifeCycle, domMutationObservable, configuration, locationChangeObservable, !configuration.trackViewsManually, initialViewOptions);\n}\nfunction processViewUpdate(view, configuration, featureFlagContexts, recorderApi, pageStateHistory) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r;\n    var replayStats = recorderApi.getReplayStats(view.id);\n    var featureFlagContext = featureFlagContexts.findFeatureFlagEvaluations(view.startClocks.relative);\n    var pageStates = pageStateHistory.findAll(view.startClocks.relative, view.duration);\n    var viewEvent = {\n        _dd: {\n            document_version: view.documentVersion,\n            replay_stats: replayStats,\n            page_states: pageStates,\n            configuration: {\n                start_session_replay_recording_manually: configuration.startSessionReplayRecordingManually,\n            },\n        },\n        date: view.startClocks.timeStamp,\n        type: \"view\" /* RumEventType.VIEW */,\n        view: {\n            action: {\n                count: view.eventCounts.actionCount,\n            },\n            frustration: {\n                count: view.eventCounts.frustrationCount,\n            },\n            cumulative_layout_shift: (_a = view.commonViewMetrics.cumulativeLayoutShift) === null || _a === void 0 ? void 0 : _a.value,\n            cumulative_layout_shift_time: toServerDuration((_b = view.commonViewMetrics.cumulativeLayoutShift) === null || _b === void 0 ? void 0 : _b.time),\n            cumulative_layout_shift_target_selector: (_c = view.commonViewMetrics.cumulativeLayoutShift) === null || _c === void 0 ? void 0 : _c.targetSelector,\n            first_byte: toServerDuration((_d = view.initialViewMetrics.navigationTimings) === null || _d === void 0 ? void 0 : _d.firstByte),\n            dom_complete: toServerDuration((_e = view.initialViewMetrics.navigationTimings) === null || _e === void 0 ? void 0 : _e.domComplete),\n            dom_content_loaded: toServerDuration((_f = view.initialViewMetrics.navigationTimings) === null || _f === void 0 ? void 0 : _f.domContentLoaded),\n            dom_interactive: toServerDuration((_g = view.initialViewMetrics.navigationTimings) === null || _g === void 0 ? void 0 : _g.domInteractive),\n            error: {\n                count: view.eventCounts.errorCount,\n            },\n            first_contentful_paint: toServerDuration(view.initialViewMetrics.firstContentfulPaint),\n            first_input_delay: toServerDuration((_h = view.initialViewMetrics.firstInput) === null || _h === void 0 ? void 0 : _h.delay),\n            first_input_time: toServerDuration((_j = view.initialViewMetrics.firstInput) === null || _j === void 0 ? void 0 : _j.time),\n            first_input_target_selector: (_k = view.initialViewMetrics.firstInput) === null || _k === void 0 ? void 0 : _k.targetSelector,\n            interaction_to_next_paint: toServerDuration((_l = view.commonViewMetrics.interactionToNextPaint) === null || _l === void 0 ? void 0 : _l.value),\n            interaction_to_next_paint_time: toServerDuration((_m = view.commonViewMetrics.interactionToNextPaint) === null || _m === void 0 ? void 0 : _m.time),\n            interaction_to_next_paint_target_selector: (_o = view.commonViewMetrics.interactionToNextPaint) === null || _o === void 0 ? void 0 : _o.targetSelector,\n            is_active: view.isActive,\n            name: view.name,\n            largest_contentful_paint: toServerDuration((_p = view.initialViewMetrics.largestContentfulPaint) === null || _p === void 0 ? void 0 : _p.value),\n            largest_contentful_paint_target_selector: (_q = view.initialViewMetrics.largestContentfulPaint) === null || _q === void 0 ? void 0 : _q.targetSelector,\n            load_event: toServerDuration((_r = view.initialViewMetrics.navigationTimings) === null || _r === void 0 ? void 0 : _r.loadEvent),\n            loading_time: discardNegativeDuration(toServerDuration(view.commonViewMetrics.loadingTime)),\n            loading_type: view.loadingType,\n            long_task: {\n                count: view.eventCounts.longTaskCount,\n            },\n            resource: {\n                count: view.eventCounts.resourceCount,\n            },\n            time_spent: toServerDuration(view.duration),\n        },\n        feature_flags: featureFlagContext && !isEmptyObject(featureFlagContext) ? featureFlagContext : undefined,\n        display: view.commonViewMetrics.scroll\n            ? {\n                scroll: {\n                    max_depth: view.commonViewMetrics.scroll.maxDepth,\n                    max_depth_scroll_top: view.commonViewMetrics.scroll.maxDepthScrollTop,\n                    max_scroll_height: view.commonViewMetrics.scroll.maxScrollHeight,\n                    max_scroll_height_time: toServerDuration(view.commonViewMetrics.scroll.maxScrollHeightTime),\n                },\n            }\n            : undefined,\n        session: {\n            has_replay: replayStats ? true : undefined,\n            is_active: view.sessionIsActive ? undefined : false,\n        },\n        privacy: {\n            replay_level: configuration.defaultPrivacyLevel,\n        },\n    };\n    if (!isEmptyObject(view.customTimings)) {\n        viewEvent.view.custom_timings = mapValues(view.customTimings, toServerDuration);\n    }\n    return {\n        rawRumEvent: viewEvent,\n        startTime: view.startClocks.relative,\n        domainContext: {\n            location: view.location,\n        },\n    };\n}\n//# sourceMappingURL=viewCollection.js.map","import { Observable, bridgeSupports, noop, performDraw, startSessionManager, } from '@datadog/browser-core';\nexport var RUM_SESSION_KEY = 'rum';\nexport function startRumSessionManager(configuration, lifeCycle, trackingConsentState) {\n    var sessionManager = startSessionManager(configuration, RUM_SESSION_KEY, function (rawTrackingType) { return computeSessionState(configuration, rawTrackingType); }, trackingConsentState);\n    sessionManager.expireObservable.subscribe(function () {\n        lifeCycle.notify(9 /* LifeCycleEventType.SESSION_EXPIRED */);\n    });\n    sessionManager.renewObservable.subscribe(function () {\n        lifeCycle.notify(10 /* LifeCycleEventType.SESSION_RENEWED */);\n    });\n    sessionManager.sessionStateUpdateObservable.subscribe(function (_a) {\n        var previousState = _a.previousState, newState = _a.newState;\n        if (!previousState.forcedReplay && newState.forcedReplay) {\n            var sessionEntity = sessionManager.findSession();\n            if (sessionEntity) {\n                sessionEntity.isReplayForced = true;\n            }\n        }\n    });\n    return {\n        findTrackedSession: function (startTime) {\n            var session = sessionManager.findSession(startTime);\n            if (!session || !isTypeTracked(session.trackingType)) {\n                return;\n            }\n            return {\n                id: session.id,\n                sessionReplay: session.trackingType === \"1\" /* RumTrackingType.TRACKED_WITH_SESSION_REPLAY */\n                    ? 1 /* SessionReplayState.SAMPLED */\n                    : session.isReplayForced\n                        ? 2 /* SessionReplayState.FORCED */\n                        : 0 /* SessionReplayState.OFF */,\n            };\n        },\n        expire: sessionManager.expire,\n        expireObservable: sessionManager.expireObservable,\n        setForcedReplay: function () { return sessionManager.updateSessionState({ forcedReplay: '1' }); },\n    };\n}\n/**\n * Start a tracked replay session stub\n */\nexport function startRumSessionManagerStub() {\n    var session = {\n        id: '00000000-aaaa-0000-aaaa-000000000000',\n        sessionReplay: bridgeSupports(\"records\" /* BridgeCapability.RECORDS */) ? 1 /* SessionReplayState.SAMPLED */ : 0 /* SessionReplayState.OFF */,\n    };\n    return {\n        findTrackedSession: function () { return session; },\n        expire: noop,\n        expireObservable: new Observable(),\n        setForcedReplay: noop,\n    };\n}\nfunction computeSessionState(configuration, rawTrackingType) {\n    var trackingType;\n    if (hasValidRumSession(rawTrackingType)) {\n        trackingType = rawTrackingType;\n    }\n    else if (!performDraw(configuration.sessionSampleRate)) {\n        trackingType = \"0\" /* RumTrackingType.NOT_TRACKED */;\n    }\n    else if (!performDraw(configuration.sessionReplaySampleRate)) {\n        trackingType = \"2\" /* RumTrackingType.TRACKED_WITHOUT_SESSION_REPLAY */;\n    }\n    else {\n        trackingType = \"1\" /* RumTrackingType.TRACKED_WITH_SESSION_REPLAY */;\n    }\n    return {\n        trackingType: trackingType,\n        isTracked: isTypeTracked(trackingType),\n    };\n}\nfunction hasValidRumSession(trackingType) {\n    return (trackingType === \"0\" /* RumTrackingType.NOT_TRACKED */ ||\n        trackingType === \"1\" /* RumTrackingType.TRACKED_WITH_SESSION_REPLAY */ ||\n        trackingType === \"2\" /* RumTrackingType.TRACKED_WITHOUT_SESSION_REPLAY */);\n}\nfunction isTypeTracked(rumSessionType) {\n    return (rumSessionType === \"2\" /* RumTrackingType.TRACKED_WITHOUT_SESSION_REPLAY */ ||\n        rumSessionType === \"1\" /* RumTrackingType.TRACKED_WITH_SESSION_REPLAY */);\n}\n//# sourceMappingURL=rumSessionManager.js.map","import { combine, isTelemetryReplicationAllowed, startBatchWithReplica, } from '@datadog/browser-core';\nexport function startRumBatch(configuration, lifeCycle, telemetryEventObservable, reportError, pageExitObservable, sessionExpireObservable, createEncoder) {\n    var replica = configuration.replica;\n    var batch = startBatchWithReplica(configuration, {\n        endpoint: configuration.rumEndpointBuilder,\n        encoder: createEncoder(2 /* DeflateEncoderStreamId.RUM */),\n    }, replica && {\n        endpoint: replica.rumEndpointBuilder,\n        transformMessage: function (message) { return combine(message, { application: { id: replica.applicationId } }); },\n        encoder: createEncoder(3 /* DeflateEncoderStreamId.RUM_REPLICA */),\n    }, reportError, pageExitObservable, sessionExpireObservable);\n    lifeCycle.subscribe(13 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (serverRumEvent) {\n        if (serverRumEvent.type === \"view\" /* RumEventType.VIEW */) {\n            batch.upsert(serverRumEvent, serverRumEvent.view.id);\n        }\n        else {\n            batch.add(serverRumEvent);\n        }\n    });\n    telemetryEventObservable.subscribe(function (event) { return batch.add(event, isTelemetryReplicationAllowed(configuration)); });\n    return batch;\n}\n//# sourceMappingURL=startRumBatch.js.map","import { getEventBridge } from '@datadog/browser-core';\nexport function startRumEventBridge(lifeCycle) {\n    var bridge = getEventBridge();\n    lifeCycle.subscribe(13 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (serverRumEvent) {\n        bridge.send('rum', serverRumEvent);\n    });\n}\n//# sourceMappingURL=startRumEventBridge.js.map","import { SESSION_TIME_OUT_DELAY, relativeNow, createValueHistory } from '@datadog/browser-core';\n/**\n * We want to attach to an event:\n * - the url corresponding to its start\n * - the referrer corresponding to the previous view url (or document referrer for initial view)\n */\nexport var URL_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY;\nexport function startUrlContexts(lifeCycle, locationChangeObservable, location) {\n    var urlContextHistory = createValueHistory({ expireDelay: URL_CONTEXT_TIME_OUT_DELAY });\n    var previousViewUrl;\n    lifeCycle.subscribe(2 /* LifeCycleEventType.BEFORE_VIEW_CREATED */, function (_a) {\n        var startClocks = _a.startClocks;\n        var viewUrl = location.href;\n        urlContextHistory.add(buildUrlContext({\n            url: viewUrl,\n            referrer: !previousViewUrl ? document.referrer : previousViewUrl,\n        }), startClocks.relative);\n        previousViewUrl = viewUrl;\n    });\n    lifeCycle.subscribe(6 /* LifeCycleEventType.AFTER_VIEW_ENDED */, function (_a) {\n        var endClocks = _a.endClocks;\n        urlContextHistory.closeActive(endClocks.relative);\n    });\n    var locationChangeSubscription = locationChangeObservable.subscribe(function (_a) {\n        var newLocation = _a.newLocation;\n        var current = urlContextHistory.find();\n        if (current) {\n            var changeTime = relativeNow();\n            urlContextHistory.closeActive(changeTime);\n            urlContextHistory.add(buildUrlContext({\n                url: newLocation.href,\n                referrer: current.referrer,\n            }), changeTime);\n        }\n    });\n    function buildUrlContext(_a) {\n        var url = _a.url, referrer = _a.referrer;\n        return {\n            url: url,\n            referrer: referrer,\n        };\n    }\n    return {\n        findUrl: function (startTime) { return urlContextHistory.find(startTime); },\n        stop: function () {\n            locationChangeSubscription.unsubscribe();\n            urlContextHistory.stop();\n        },\n    };\n}\n//# sourceMappingURL=urlContexts.js.map","import { addEventListener, instrumentMethod, Observable, shallowClone } from '@datadog/browser-core';\nexport function createLocationChangeObservable(configuration, location) {\n    var currentLocation = shallowClone(location);\n    return new Observable(function (observable) {\n        var stopHistoryTracking = trackHistory(configuration, onLocationChange).stop;\n        var stopHashTracking = trackHash(configuration, onLocationChange).stop;\n        function onLocationChange() {\n            if (currentLocation.href === location.href) {\n                return;\n            }\n            var newLocation = shallowClone(location);\n            observable.notify({\n                newLocation: newLocation,\n                oldLocation: currentLocation,\n            });\n            currentLocation = newLocation;\n        }\n        return function () {\n            stopHistoryTracking();\n            stopHashTracking();\n        };\n    });\n}\nfunction trackHistory(configuration, onHistoryChange) {\n    var stopInstrumentingPushState = instrumentMethod(history, 'pushState', function (_a) {\n        var onPostCall = _a.onPostCall;\n        onPostCall(onHistoryChange);\n    }).stop;\n    var stopInstrumentingReplaceState = instrumentMethod(history, 'replaceState', function (_a) {\n        var onPostCall = _a.onPostCall;\n        onPostCall(onHistoryChange);\n    }).stop;\n    var removeListener = addEventListener(configuration, window, \"popstate\" /* DOM_EVENT.POP_STATE */, onHistoryChange).stop;\n    return {\n        stop: function () {\n            stopInstrumentingPushState();\n            stopInstrumentingReplaceState();\n            removeListener();\n        },\n    };\n}\nfunction trackHash(configuration, onHashChange) {\n    return addEventListener(configuration, window, \"hashchange\" /* DOM_EVENT.HASH_CHANGE */, onHashChange);\n}\n//# sourceMappingURL=locationChangeObservable.js.map","import { SESSION_TIME_OUT_DELAY, createValueHistory } from '@datadog/browser-core';\nexport var FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY;\nexport var BYTES_COMPUTATION_THROTTLING_DELAY = 200;\n/**\n * Start feature flag contexts\n *\n * Feature flag contexts follow the life of views.\n * A new context is added when a view is created and ended when the view is ended\n *\n * Note: we choose not to add a new context at each evaluation to save memory\n */\nexport function startFeatureFlagContexts(lifeCycle, customerDataTracker) {\n    var featureFlagContexts = createValueHistory({\n        expireDelay: FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY,\n    });\n    lifeCycle.subscribe(2 /* LifeCycleEventType.BEFORE_VIEW_CREATED */, function (_a) {\n        var startClocks = _a.startClocks;\n        featureFlagContexts.add({}, startClocks.relative);\n        customerDataTracker.resetCustomerData();\n    });\n    lifeCycle.subscribe(6 /* LifeCycleEventType.AFTER_VIEW_ENDED */, function (_a) {\n        var endClocks = _a.endClocks;\n        featureFlagContexts.closeActive(endClocks.relative);\n    });\n    return {\n        findFeatureFlagEvaluations: function (startTime) { return featureFlagContexts.find(startTime); },\n        addFeatureFlagEvaluation: function (key, value) {\n            var currentContext = featureFlagContexts.find();\n            if (currentContext) {\n                currentContext[key] = value;\n                customerDataTracker.updateCustomerData(currentContext);\n            }\n        },\n        stop: function () { return customerDataTracker.stop(); },\n    };\n}\n//# sourceMappingURL=featureFlagContext.js.map","import { includes, performDraw, ONE_SECOND, addTelemetryDebug, setInterval, } from '@datadog/browser-core';\nexport var MEASURES_PERIOD_DURATION = 10 * ONE_SECOND;\nvar currentPeriodMeasures;\nvar currentBatchMeasures;\nvar batchHasRumEvent;\nexport function startCustomerDataTelemetry(configuration, telemetry, lifeCycle, customerDataTrackerManager, batchFlushObservable) {\n    var customerDataTelemetryEnabled = telemetry.enabled && performDraw(configuration.customerDataTelemetrySampleRate);\n    if (!customerDataTelemetryEnabled) {\n        return;\n    }\n    initCurrentPeriodMeasures();\n    initCurrentBatchMeasures();\n    // We measure the data of every view updates even if there could only be one per batch due to the upsert\n    // It means that contexts bytes count sums can be higher than it really is\n    lifeCycle.subscribe(13 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (event) {\n        batchHasRumEvent = true;\n        updateMeasure(currentBatchMeasures.globalContextBytes, customerDataTrackerManager.getOrCreateTracker(2 /* CustomerDataType.GlobalContext */).getBytesCount());\n        updateMeasure(currentBatchMeasures.userContextBytes, customerDataTrackerManager.getOrCreateTracker(1 /* CustomerDataType.User */).getBytesCount());\n        updateMeasure(currentBatchMeasures.featureFlagBytes, includes([\"view\" /* RumEventType.VIEW */, \"error\" /* RumEventType.ERROR */], event.type)\n            ? customerDataTrackerManager.getOrCreateTracker(0 /* CustomerDataType.FeatureFlag */).getBytesCount()\n            : 0);\n    });\n    batchFlushObservable.subscribe(function (_a) {\n        var bytesCount = _a.bytesCount, messagesCount = _a.messagesCount;\n        // Don't measure batch that only contains telemetry events to avoid batch sending loop\n        // It could happen because after each batch we are adding a customer data measures telemetry event to the next one\n        if (!batchHasRumEvent) {\n            return;\n        }\n        currentPeriodMeasures.batchCount += 1;\n        updateMeasure(currentPeriodMeasures.batchBytesCount, bytesCount);\n        updateMeasure(currentPeriodMeasures.batchMessagesCount, messagesCount);\n        mergeMeasure(currentPeriodMeasures.globalContextBytes, currentBatchMeasures.globalContextBytes);\n        mergeMeasure(currentPeriodMeasures.userContextBytes, currentBatchMeasures.userContextBytes);\n        mergeMeasure(currentPeriodMeasures.featureFlagBytes, currentBatchMeasures.featureFlagBytes);\n        initCurrentBatchMeasures();\n    });\n    setInterval(sendCurrentPeriodMeasures, MEASURES_PERIOD_DURATION);\n}\nfunction sendCurrentPeriodMeasures() {\n    if (currentPeriodMeasures.batchCount === 0) {\n        return;\n    }\n    addTelemetryDebug('Customer data measures', currentPeriodMeasures);\n    initCurrentPeriodMeasures();\n}\nfunction createMeasure() {\n    return { min: Infinity, max: 0, sum: 0 };\n}\nfunction updateMeasure(measure, value) {\n    measure.sum += value;\n    measure.min = Math.min(measure.min, value);\n    measure.max = Math.max(measure.max, value);\n}\nfunction mergeMeasure(target, source) {\n    target.sum += source.sum;\n    target.min = Math.min(target.min, source.min);\n    target.max = Math.max(target.max, source.max);\n}\nfunction initCurrentPeriodMeasures() {\n    currentPeriodMeasures = {\n        batchCount: 0,\n        batchBytesCount: createMeasure(),\n        batchMessagesCount: createMeasure(),\n        globalContextBytes: createMeasure(),\n        userContextBytes: createMeasure(),\n        featureFlagBytes: createMeasure(),\n    };\n}\nfunction initCurrentBatchMeasures() {\n    batchHasRumEvent = false;\n    currentBatchMeasures = {\n        globalContextBytes: createMeasure(),\n        userContextBytes: createMeasure(),\n        featureFlagBytes: createMeasure(),\n    };\n}\n//# sourceMappingURL=startCustomerDataTelemetry.js.map","import { elapsed, createValueHistory, SESSION_TIME_OUT_DELAY, toServerDuration, addEventListeners, relativeNow, } from '@datadog/browser-core';\n// Arbitrary value to cap number of element for memory consumption in the browser\nexport var MAX_PAGE_STATE_ENTRIES = 4000;\n// Arbitrary value to cap number of element for backend & to save bandwidth\nexport var MAX_PAGE_STATE_ENTRIES_SELECTABLE = 500;\nexport var PAGE_STATE_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY;\nexport function startPageStateHistory(configuration, maxPageStateEntriesSelectable) {\n    if (maxPageStateEntriesSelectable === void 0) { maxPageStateEntriesSelectable = MAX_PAGE_STATE_ENTRIES_SELECTABLE; }\n    var pageStateEntryHistory = createValueHistory({\n        expireDelay: PAGE_STATE_CONTEXT_TIME_OUT_DELAY,\n        maxEntries: MAX_PAGE_STATE_ENTRIES,\n    });\n    var currentPageState;\n    addPageState(getPageState(), relativeNow());\n    var stopEventListeners = addEventListeners(configuration, window, [\n        \"pageshow\" /* DOM_EVENT.PAGE_SHOW */,\n        \"focus\" /* DOM_EVENT.FOCUS */,\n        \"blur\" /* DOM_EVENT.BLUR */,\n        \"visibilitychange\" /* DOM_EVENT.VISIBILITY_CHANGE */,\n        \"resume\" /* DOM_EVENT.RESUME */,\n        \"freeze\" /* DOM_EVENT.FREEZE */,\n        \"pagehide\" /* DOM_EVENT.PAGE_HIDE */,\n    ], function (event) {\n        addPageState(computePageState(event), event.timeStamp);\n    }, { capture: true }).stop;\n    function addPageState(nextPageState, startTime) {\n        if (startTime === void 0) { startTime = relativeNow(); }\n        if (nextPageState === currentPageState) {\n            return;\n        }\n        currentPageState = nextPageState;\n        pageStateEntryHistory.closeActive(startTime);\n        pageStateEntryHistory.add({ state: currentPageState, startTime: startTime }, startTime);\n    }\n    var pageStateHistory = {\n        findAll: function (eventStartTime, duration) {\n            var pageStateEntries = pageStateEntryHistory.findAll(eventStartTime, duration);\n            if (pageStateEntries.length === 0) {\n                return;\n            }\n            var pageStateServerEntries = [];\n            // limit the number of entries to return\n            var limit = Math.max(0, pageStateEntries.length - maxPageStateEntriesSelectable);\n            // loop page state entries backward to return the selected ones in desc order\n            for (var index = pageStateEntries.length - 1; index >= limit; index--) {\n                var pageState = pageStateEntries[index];\n                // compute the start time relative to the event start time (ex: to be relative to the view start time)\n                var relativeStartTime = elapsed(eventStartTime, pageState.startTime);\n                pageStateServerEntries.push({\n                    state: pageState.state,\n                    start: toServerDuration(relativeStartTime),\n                });\n            }\n            return pageStateServerEntries;\n        },\n        wasInPageStateAt: function (state, startTime) {\n            return pageStateHistory.wasInPageStateDuringPeriod(state, startTime, 0);\n        },\n        wasInPageStateDuringPeriod: function (state, startTime, duration) {\n            return pageStateEntryHistory.findAll(startTime, duration).some(function (pageState) { return pageState.state === state; });\n        },\n        addPageState: addPageState,\n        stop: function () {\n            stopEventListeners();\n            pageStateEntryHistory.stop();\n        },\n    };\n    return pageStateHistory;\n}\nfunction computePageState(event) {\n    if (event.type === \"freeze\" /* DOM_EVENT.FREEZE */) {\n        return \"frozen\" /* PageState.FROZEN */;\n    }\n    else if (event.type === \"pagehide\" /* DOM_EVENT.PAGE_HIDE */) {\n        return event.persisted ? \"frozen\" /* PageState.FROZEN */ : \"terminated\" /* PageState.TERMINATED */;\n    }\n    return getPageState();\n}\nfunction getPageState() {\n    if (document.visibilityState === 'hidden') {\n        return \"hidden\" /* PageState.HIDDEN */;\n    }\n    if (document.hasFocus()) {\n        return \"active\" /* PageState.ACTIVE */;\n    }\n    return \"passive\" /* PageState.PASSIVE */;\n}\n//# sourceMappingURL=pageStateHistory.js.map","import { getViewportDimension, initViewportObservable } from '../../browser/viewportObservable';\nexport function startDisplayContext(configuration) {\n    var viewport = getViewportDimension();\n    var unsubscribeViewport = initViewportObservable(configuration).subscribe(function (viewportDimension) {\n        viewport = viewportDimension;\n    }).unsubscribe;\n    return {\n        get: function () { return ({ viewport: viewport }); },\n        stop: unsubscribeViewport,\n    };\n}\n//# sourceMappingURL=displayContext.js.map","import { setInterval, clearInterval, Observable, addEventListener, ONE_SECOND, findCommaSeparatedValue, find, } from '@datadog/browser-core';\nexport function createCookieObservable(configuration, cookieName) {\n    var detectCookieChangeStrategy = window.cookieStore\n        ? listenToCookieStoreChange(configuration)\n        : watchCookieFallback;\n    return new Observable(function (observable) {\n        return detectCookieChangeStrategy(cookieName, function (event) { return observable.notify(event); });\n    });\n}\nfunction listenToCookieStoreChange(configuration) {\n    return function (cookieName, callback) {\n        var listener = addEventListener(configuration, window.cookieStore, \"change\" /* DOM_EVENT.CHANGE */, function (event) {\n            // Based on our experimentation, we're assuming that entries for the same cookie cannot be in both the 'changed' and 'deleted' arrays.\n            // However, due to ambiguity in the specification, we asked for clarification: https://github.com/WICG/cookie-store/issues/226\n            var changeEvent = find(event.changed, function (event) { return event.name === cookieName; }) ||\n                find(event.deleted, function (event) { return event.name === cookieName; });\n            if (changeEvent) {\n                callback(changeEvent.value);\n            }\n        });\n        return listener.stop;\n    };\n}\nexport var WATCH_COOKIE_INTERVAL_DELAY = ONE_SECOND;\nfunction watchCookieFallback(cookieName, callback) {\n    var previousCookieValue = findCommaSeparatedValue(document.cookie, cookieName);\n    var watchCookieIntervalId = setInterval(function () {\n        var cookieValue = findCommaSeparatedValue(document.cookie, cookieName);\n        if (cookieValue !== previousCookieValue) {\n            callback(cookieValue);\n        }\n    }, WATCH_COOKIE_INTERVAL_DELAY);\n    return function () {\n        clearInterval(watchCookieIntervalId);\n    };\n}\n//# sourceMappingURL=cookieObservable.js.map","import { getInitCookie } from '@datadog/browser-core';\nimport { createCookieObservable } from '../../browser/cookieObservable';\nexport var CI_VISIBILITY_TEST_ID_COOKIE_NAME = 'datadog-ci-visibility-test-execution-id';\nexport function startCiVisibilityContext(configuration, cookieObservable) {\n    var _a;\n    if (cookieObservable === void 0) { cookieObservable = createCookieObservable(configuration, CI_VISIBILITY_TEST_ID_COOKIE_NAME); }\n    var testExecutionId = getInitCookie(CI_VISIBILITY_TEST_ID_COOKIE_NAME) || ((_a = window.Cypress) === null || _a === void 0 ? void 0 : _a.env('traceId'));\n    var cookieObservableSubscription = cookieObservable.subscribe(function (value) {\n        testExecutionId = value;\n    });\n    return {\n        get: function () {\n            if (typeof testExecutionId === 'string') {\n                return {\n                    test_execution_id: testExecutionId,\n                };\n            }\n        },\n        stop: function () { return cookieObservableSubscription.unsubscribe(); },\n    };\n}\n//# sourceMappingURL=ciVisibilityContext.js.map","import { sendToExtension, createPageExitObservable, startTelemetry, canUseEventBridge, getEventBridge, addTelemetryDebug, drainPreStartTelemetry, } from '@datadog/browser-core';\nimport { createDOMMutationObservable } from '../browser/domMutationObservable';\nimport { startPerformanceCollection } from '../browser/performanceCollection';\nimport { startRumAssembly } from '../domain/assembly';\nimport { startInternalContext } from '../domain/contexts/internalContext';\nimport { LifeCycle } from '../domain/lifeCycle';\nimport { startViewContexts } from '../domain/contexts/viewContexts';\nimport { startRequestCollection } from '../domain/requestCollection';\nimport { startActionCollection } from '../domain/action/actionCollection';\nimport { startErrorCollection } from '../domain/error/errorCollection';\nimport { startLongTaskCollection } from '../domain/longTask/longTaskCollection';\nimport { startResourceCollection } from '../domain/resource/resourceCollection';\nimport { startViewCollection } from '../domain/view/viewCollection';\nimport { startRumSessionManager, startRumSessionManagerStub } from '../domain/rumSessionManager';\nimport { startRumBatch } from '../transport/startRumBatch';\nimport { startRumEventBridge } from '../transport/startRumEventBridge';\nimport { startUrlContexts } from '../domain/contexts/urlContexts';\nimport { createLocationChangeObservable } from '../browser/locationChangeObservable';\nimport { startFeatureFlagContexts } from '../domain/contexts/featureFlagContext';\nimport { startCustomerDataTelemetry } from '../domain/startCustomerDataTelemetry';\nimport { startPageStateHistory } from '../domain/contexts/pageStateHistory';\nimport { startDisplayContext } from '../domain/contexts/displayContext';\nimport { startVitalCollection } from '../domain/vital/vitalCollection';\nimport { startCiVisibilityContext } from '../domain/contexts/ciVisibilityContext';\nexport function startRum(configuration, recorderApi, customerDataTrackerManager, getCommonContext, initialViewOptions, createEncoder, \n// `startRum` and its subcomponents assume tracking consent is granted initially and starts\n// collecting logs unconditionally. As such, `startRum` should be called with a\n// `trackingConsentState` set to \"granted\".\ntrackingConsentState) {\n    var cleanupTasks = [];\n    var lifeCycle = new LifeCycle();\n    lifeCycle.subscribe(13 /* LifeCycleEventType.RUM_EVENT_COLLECTED */, function (event) { return sendToExtension('rum', event); });\n    var telemetry = startRumTelemetry(configuration);\n    telemetry.setContextProvider(function () {\n        var _a, _b;\n        return ({\n            application: {\n                id: configuration.applicationId,\n            },\n            session: {\n                id: (_a = session.findTrackedSession()) === null || _a === void 0 ? void 0 : _a.id,\n            },\n            view: {\n                id: (_b = viewContexts.findView()) === null || _b === void 0 ? void 0 : _b.id,\n            },\n            action: {\n                id: actionContexts.findActionId(),\n            },\n        });\n    });\n    var reportError = function (error) {\n        lifeCycle.notify(14 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, { error: error });\n        addTelemetryDebug('Error reported to customer', { 'error.message': error.message });\n    };\n    var featureFlagContexts = startFeatureFlagContexts(lifeCycle, customerDataTrackerManager.getOrCreateTracker(0 /* CustomerDataType.FeatureFlag */));\n    var pageExitObservable = createPageExitObservable(configuration);\n    var pageExitSubscription = pageExitObservable.subscribe(function (event) {\n        lifeCycle.notify(11 /* LifeCycleEventType.PAGE_EXITED */, event);\n    });\n    cleanupTasks.push(function () { return pageExitSubscription.unsubscribe(); });\n    var session = !canUseEventBridge()\n        ? startRumSessionManager(configuration, lifeCycle, trackingConsentState)\n        : startRumSessionManagerStub();\n    if (!canUseEventBridge()) {\n        var batch_1 = startRumBatch(configuration, lifeCycle, telemetry.observable, reportError, pageExitObservable, session.expireObservable, createEncoder);\n        cleanupTasks.push(function () { return batch_1.stop(); });\n        startCustomerDataTelemetry(configuration, telemetry, lifeCycle, customerDataTrackerManager, batch_1.flushObservable);\n    }\n    else {\n        startRumEventBridge(lifeCycle);\n    }\n    var domMutationObservable = createDOMMutationObservable();\n    var locationChangeObservable = createLocationChangeObservable(configuration, location);\n    var pageStateHistory = startPageStateHistory(configuration);\n    var _a = startRumEventCollection(lifeCycle, configuration, location, session, pageStateHistory, locationChangeObservable, domMutationObservable, getCommonContext, reportError), viewContexts = _a.viewContexts, urlContexts = _a.urlContexts, actionContexts = _a.actionContexts, addAction = _a.addAction, stopRumEventCollection = _a.stop;\n    cleanupTasks.push(stopRumEventCollection);\n    drainPreStartTelemetry();\n    var _b = startViewCollection(lifeCycle, configuration, location, domMutationObservable, locationChangeObservable, featureFlagContexts, pageStateHistory, recorderApi, initialViewOptions), addTiming = _b.addTiming, startView = _b.startView, updateViewName = _b.updateViewName, stopViewCollection = _b.stop;\n    cleanupTasks.push(stopViewCollection);\n    var stopResourceCollection = startResourceCollection(lifeCycle, configuration, pageStateHistory).stop;\n    cleanupTasks.push(stopResourceCollection);\n    startLongTaskCollection(lifeCycle, configuration);\n    var addError = startErrorCollection(lifeCycle, configuration, pageStateHistory, featureFlagContexts).addError;\n    startRequestCollection(lifeCycle, configuration, session);\n    var stopPerformanceCollection = startPerformanceCollection(lifeCycle, configuration).stop;\n    cleanupTasks.push(stopPerformanceCollection);\n    var vitalCollection = startVitalCollection(lifeCycle, pageStateHistory);\n    var internalContext = startInternalContext(configuration.applicationId, session, viewContexts, actionContexts, urlContexts);\n    return {\n        addAction: addAction,\n        addError: addError,\n        addTiming: addTiming,\n        addFeatureFlagEvaluation: featureFlagContexts.addFeatureFlagEvaluation,\n        startView: startView,\n        updateViewName: updateViewName,\n        lifeCycle: lifeCycle,\n        viewContexts: viewContexts,\n        session: session,\n        stopSession: function () { return session.expire(); },\n        getInternalContext: internalContext.get,\n        startDurationVital: vitalCollection.startDurationVital,\n        addDurationVital: vitalCollection.addDurationVital,\n        stop: function () {\n            cleanupTasks.forEach(function (task) { return task(); });\n        },\n    };\n}\nfunction startRumTelemetry(configuration) {\n    var telemetry = startTelemetry(\"browser-rum-sdk\" /* TelemetryService.RUM */, configuration);\n    if (canUseEventBridge()) {\n        var bridge_1 = getEventBridge();\n        telemetry.observable.subscribe(function (event) { return bridge_1.send('internal_telemetry', event); });\n    }\n    return telemetry;\n}\nexport function startRumEventCollection(lifeCycle, configuration, location, sessionManager, pageStateHistory, locationChangeObservable, domMutationObservable, getCommonContext, reportError) {\n    var viewContexts = startViewContexts(lifeCycle);\n    var urlContexts = startUrlContexts(lifeCycle, locationChangeObservable, location);\n    var _a = startActionCollection(lifeCycle, domMutationObservable, configuration, pageStateHistory), addAction = _a.addAction, actionContexts = _a.actionContexts;\n    var displayContext = startDisplayContext(configuration);\n    var ciVisibilityContext = startCiVisibilityContext(configuration);\n    startRumAssembly(configuration, lifeCycle, sessionManager, viewContexts, urlContexts, actionContexts, displayContext, ciVisibilityContext, getCommonContext, reportError);\n    return {\n        viewContexts: viewContexts,\n        pageStateHistory: pageStateHistory,\n        urlContexts: urlContexts,\n        addAction: addAction,\n        actionContexts: actionContexts,\n        stop: function () {\n            ciVisibilityContext.stop();\n            displayContext.stop();\n            pageStateHistory.stop();\n            urlContexts.stop();\n            viewContexts.stop();\n            pageStateHistory.stop();\n        },\n    };\n}\n//# sourceMappingURL=startRum.js.map","import { INTAKE_SITE_STAGING, INTAKE_SITE_US1, INTAKE_SITE_EU1 } from '@datadog/browser-core';\nexport function getSessionReplayUrl(configuration, _a) {\n    var session = _a.session, viewContext = _a.viewContext, errorType = _a.errorType;\n    var sessionId = session ? session.id : 'no-session-id';\n    var parameters = [];\n    if (errorType !== undefined) {\n        parameters.push(\"error-type=\".concat(errorType));\n    }\n    if (viewContext) {\n        parameters.push(\"seed=\".concat(viewContext.id));\n        parameters.push(\"from=\".concat(viewContext.startClocks.timeStamp));\n    }\n    var origin = getDatadogSiteUrl(configuration);\n    var path = \"/rum/replay/sessions/\".concat(sessionId);\n    return \"\".concat(origin).concat(path, \"?\").concat(parameters.join('&'));\n}\nexport function getDatadogSiteUrl(rumConfiguration) {\n    var site = rumConfiguration.site;\n    var subdomain = rumConfiguration.subdomain || getSiteDefaultSubdomain(rumConfiguration);\n    return \"https://\".concat(subdomain ? \"\".concat(subdomain, \".\") : '').concat(site);\n}\nfunction getSiteDefaultSubdomain(configuration) {\n    switch (configuration.site) {\n        case INTAKE_SITE_US1:\n        case INTAKE_SITE_EU1:\n            return 'app';\n        case INTAKE_SITE_STAGING:\n            return 'dd';\n        default:\n            return undefined;\n    }\n}\n//# sourceMappingURL=getSessionReplayUrl.js.map","export var MAX_STATS_HISTORY = 10;\nvar statsPerView;\nexport function getSegmentsCount(viewId) {\n    return getOrCreateReplayStats(viewId).segments_count;\n}\nexport function addSegment(viewId) {\n    getOrCreateReplayStats(viewId).segments_count += 1;\n}\nexport function addRecord(viewId) {\n    getOrCreateReplayStats(viewId).records_count += 1;\n}\nexport function addWroteData(viewId, additionalBytesCount) {\n    getOrCreateReplayStats(viewId).segments_total_raw_size += additionalBytesCount;\n}\nexport function getReplayStats(viewId) {\n    return statsPerView === null || statsPerView === void 0 ? void 0 : statsPerView.get(viewId);\n}\nexport function resetReplayStats() {\n    statsPerView = undefined;\n}\nfunction getOrCreateReplayStats(viewId) {\n    if (!statsPerView) {\n        statsPerView = new Map();\n    }\n    var replayStats;\n    if (statsPerView.has(viewId)) {\n        replayStats = statsPerView.get(viewId);\n    }\n    else {\n        replayStats = {\n            records_count: 0,\n            segments_count: 0,\n            segments_total_raw_size: 0,\n        };\n        statsPerView.set(viewId, replayStats);\n        if (statsPerView.size > MAX_STATS_HISTORY) {\n            deleteOldestStats();\n        }\n    }\n    return replayStats;\n}\nfunction deleteOldestStats() {\n    if (!statsPerView) {\n        return;\n    }\n    if (statsPerView.keys) {\n        statsPerView.delete(statsPerView.keys().next().value);\n    }\n    else {\n        // IE11 doesn't support map.keys\n        var isFirst_1 = true;\n        statsPerView.forEach(function (_value, key) {\n            if (isFirst_1) {\n                statsPerView.delete(key);\n                isFirst_1 = false;\n            }\n        });\n    }\n}\n//# sourceMappingURL=replayStats.js.map","import { buildUrl } from '@datadog/browser-core';\nimport { getParentNode, isNodeShadowRoot, CENSORED_STRING_MARK, shouldMaskNode } from '@datadog/browser-rum-core';\nvar serializedNodeIds = new WeakMap();\nexport function hasSerializedNode(node) {\n    return serializedNodeIds.has(node);\n}\nexport function nodeAndAncestorsHaveSerializedNode(node) {\n    var current = node;\n    while (current) {\n        if (!hasSerializedNode(current) && !isNodeShadowRoot(current)) {\n            return false;\n        }\n        current = getParentNode(current);\n    }\n    return true;\n}\nexport function getSerializedNodeId(node) {\n    return serializedNodeIds.get(node);\n}\nexport function setSerializedNodeId(node, serializeNodeId) {\n    serializedNodeIds.set(node, serializeNodeId);\n}\n/**\n * Get the element \"value\" to be serialized as an attribute or an input update record. It respects\n * the input privacy mode of the element.\n * PERFROMANCE OPTIMIZATION: Assumes that privacy level `HIDDEN` is never encountered because of earlier checks.\n */\nexport function getElementInputValue(element, nodePrivacyLevel) {\n    /*\n     BROWSER SPEC NOTE: <input>, <select>\n     For some <input> elements, the `value` is an exceptional property/attribute that has the\n     value synced between el.value and el.getAttribute()\n     input[type=button,checkbox,hidden,image,radio,reset,submit]\n     */\n    var tagName = element.tagName;\n    var value = element.value;\n    if (shouldMaskNode(element, nodePrivacyLevel)) {\n        var type = element.type;\n        if (tagName === 'INPUT' && (type === 'button' || type === 'submit' || type === 'reset')) {\n            // Overrule `MASK` privacy level for button-like element values, as they are used during replay\n            // to display their label. They can still be hidden via the \"hidden\" privacy attribute or class name.\n            return value;\n        }\n        else if (!value || tagName === 'OPTION') {\n            // <Option> value provides no benefit\n            return;\n        }\n        return CENSORED_STRING_MARK;\n    }\n    if (tagName === 'OPTION' || tagName === 'SELECT') {\n        return element.value;\n    }\n    if (tagName !== 'INPUT' && tagName !== 'TEXTAREA') {\n        return;\n    }\n    return value;\n}\nexport var URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")([^\"]*)\"|([^)]*))\\)/gm;\nexport var ABSOLUTE_URL = /^[A-Za-z]+:|^\\/\\//;\nexport var DATA_URI = /^data:.*,/i;\nexport function switchToAbsoluteUrl(cssText, cssHref) {\n    return cssText.replace(URL_IN_CSS_REF, function (matchingSubstring, singleQuote, urlWrappedInSingleQuotes, doubleQuote, urlWrappedInDoubleQuotes, urlNotWrappedInQuotes) {\n        var url = urlWrappedInSingleQuotes || urlWrappedInDoubleQuotes || urlNotWrappedInQuotes;\n        if (!cssHref || !url || ABSOLUTE_URL.test(url) || DATA_URI.test(url)) {\n            return matchingSubstring;\n        }\n        var quote = singleQuote || doubleQuote || '';\n        return \"url(\".concat(quote).concat(makeUrlAbsolute(url, cssHref)).concat(quote, \")\");\n    });\n}\nexport function makeUrlAbsolute(url, baseUrl) {\n    try {\n        return buildUrl(url, baseUrl).href;\n    }\n    catch (_) {\n        return url;\n    }\n}\nvar TAG_NAME_REGEX = /[^a-z1-6-_]/;\nexport function getValidTagName(tagName) {\n    var processedTagName = tagName.toLowerCase().trim();\n    if (TAG_NAME_REGEX.test(processedTagName)) {\n        // if the tag name is odd and we cannot extract\n        // anything from the string, then we return a\n        // generic div\n        return 'div';\n    }\n    return processedTagName;\n}\nexport function censoredImageForSize(width, height) {\n    return \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='\".concat(width, \"' height='\").concat(height, \"' style='background-color:silver'%3E%3C/svg%3E\");\n}\n//# sourceMappingURL=serializationUtils.js.map","export var RecordType = {\n    FullSnapshot: 2,\n    IncrementalSnapshot: 3,\n    Meta: 4,\n    Focus: 6,\n    ViewEnd: 7,\n    VisualViewport: 8,\n    FrustrationRecord: 9,\n};\nexport var NodeType = {\n    Document: 0,\n    DocumentType: 1,\n    Element: 2,\n    Text: 3,\n    CDATA: 4,\n    DocumentFragment: 11,\n};\nexport var IncrementalSource = {\n    Mutation: 0,\n    MouseMove: 1,\n    MouseInteraction: 2,\n    Scroll: 3,\n    ViewportResize: 4,\n    Input: 5,\n    TouchMove: 6,\n    MediaInteraction: 7,\n    StyleSheetRule: 8,\n    // CanvasMutation : 9,\n    // Font : 10,\n};\nexport var MouseInteractionType = {\n    MouseUp: 0,\n    MouseDown: 1,\n    Click: 2,\n    ContextMenu: 3,\n    DblClick: 4,\n    Focus: 5,\n    Blur: 6,\n    TouchStart: 7,\n    TouchEnd: 9,\n};\nexport var MediaInteractionType = {\n    Play: 0,\n    Pause: 1,\n};\n//# sourceMappingURL=sessionReplayConstants.js.map","export function serializeStyleSheets(cssStyleSheets) {\n    if (cssStyleSheets === undefined || cssStyleSheets.length === 0) {\n        return undefined;\n    }\n    return cssStyleSheets.map(function (cssStyleSheet) {\n        var rules = cssStyleSheet.cssRules || cssStyleSheet.rules;\n        var cssRules = Array.from(rules, function (cssRule) { return cssRule.cssText; });\n        var styleSheet = {\n            cssRules: cssRules,\n            disabled: cssStyleSheet.disabled || undefined,\n            media: cssStyleSheet.media.length > 0 ? Array.from(cssStyleSheet.media) : undefined,\n        };\n        return styleSheet;\n    });\n}\n//# sourceMappingURL=serializeStyleSheets.js.map","import { startsWith } from '@datadog/browser-core';\nimport { NodePrivacyLevel, PRIVACY_ATTR_NAME, CENSORED_STRING_MARK, CENSORED_IMG_MARK, STABLE_ATTRIBUTES, isLongDataUrl, sanitizeDataUrl, } from '@datadog/browser-rum-core';\nimport { censoredImageForSize } from './serializationUtils';\nexport function serializeAttribute(element, nodePrivacyLevel, attributeName, configuration) {\n    if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n        // dup condition for direct access case\n        return null;\n    }\n    var attributeValue = element.getAttribute(attributeName);\n    if (nodePrivacyLevel === NodePrivacyLevel.MASK &&\n        attributeName !== PRIVACY_ATTR_NAME &&\n        !STABLE_ATTRIBUTES.includes(attributeName) &&\n        attributeName !== configuration.actionNameAttribute) {\n        var tagName = element.tagName;\n        switch (attributeName) {\n            // Mask Attribute text content\n            case 'title':\n            case 'alt':\n            case 'placeholder':\n                return CENSORED_STRING_MARK;\n        }\n        // mask image URLs\n        if (tagName === 'IMG' && (attributeName === 'src' || attributeName === 'srcset')) {\n            // generate image with similar dimension than the original to have the same rendering behaviour\n            var image = element;\n            if (image.naturalWidth > 0) {\n                return censoredImageForSize(image.naturalWidth, image.naturalHeight);\n            }\n            var _a = element.getBoundingClientRect(), width = _a.width, height = _a.height;\n            if (width > 0 || height > 0) {\n                return censoredImageForSize(width, height);\n            }\n            // if we can't get the image size, fallback to the censored image\n            return CENSORED_IMG_MARK;\n        }\n        // mask source URLs\n        if (tagName === 'SOURCE' && (attributeName === 'src' || attributeName === 'srcset')) {\n            return CENSORED_IMG_MARK;\n        }\n        // mask <a> URLs\n        if (tagName === 'A' && attributeName === 'href') {\n            return CENSORED_STRING_MARK;\n        }\n        // mask data-* attributes\n        if (attributeValue && startsWith(attributeName, 'data-')) {\n            // Exception: it's safe to reveal the `${PRIVACY_ATTR_NAME}` attr\n            return CENSORED_STRING_MARK;\n        }\n        // mask iframe srcdoc\n        if (tagName === 'IFRAME' && attributeName === 'srcdoc') {\n            return CENSORED_STRING_MARK;\n        }\n    }\n    if (!attributeValue || typeof attributeValue !== 'string') {\n        return attributeValue;\n    }\n    // Minimum Fix for customer.\n    if (isLongDataUrl(attributeValue)) {\n        return sanitizeDataUrl(attributeValue);\n    }\n    return attributeValue;\n}\n//# sourceMappingURL=serializeAttribute.js.map","import { NodePrivacyLevel, shouldMaskNode } from '@datadog/browser-rum-core';\nimport { isSafari } from '@datadog/browser-core';\nimport { getElementInputValue, switchToAbsoluteUrl, getValidTagName } from './serializationUtils';\nimport { serializeAttribute } from './serializeAttribute';\nexport function serializeAttributes(element, nodePrivacyLevel, options) {\n    var _a;\n    if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n        return {};\n    }\n    var safeAttrs = {};\n    var tagName = getValidTagName(element.tagName);\n    var doc = element.ownerDocument;\n    for (var i = 0; i < element.attributes.length; i += 1) {\n        var attribute = element.attributes.item(i);\n        var attributeName = attribute.name;\n        var attributeValue = serializeAttribute(element, nodePrivacyLevel, attributeName, options.configuration);\n        if (attributeValue !== null) {\n            safeAttrs[attributeName] = attributeValue;\n        }\n    }\n    if (element.value &&\n        (tagName === 'textarea' || tagName === 'select' || tagName === 'option' || tagName === 'input')) {\n        var formValue = getElementInputValue(element, nodePrivacyLevel);\n        if (formValue !== undefined) {\n            safeAttrs.value = formValue;\n        }\n    }\n    /**\n     * <Option> can be selected, which occurs if its `value` matches ancestor `<Select>.value`\n     */\n    if (tagName === 'option' && nodePrivacyLevel === NodePrivacyLevel.ALLOW) {\n        // For privacy=`MASK`, all the values would be the same, so skip.\n        var optionElement = element;\n        if (optionElement.selected) {\n            safeAttrs.selected = optionElement.selected;\n        }\n    }\n    // remote css\n    if (tagName === 'link') {\n        var stylesheet = Array.from(doc.styleSheets).find(function (s) { return s.href === element.href; });\n        var cssText = getCssRulesString(stylesheet);\n        if (cssText && stylesheet) {\n            safeAttrs._cssText = cssText;\n        }\n    }\n    // dynamic stylesheet\n    if (tagName === 'style' && element.sheet) {\n        var cssText = getCssRulesString(element.sheet);\n        if (cssText) {\n            safeAttrs._cssText = cssText;\n        }\n    }\n    /**\n     * Forms: input[type=checkbox,radio]\n     * The `checked` property for <input> is a little bit special:\n     * 1. el.checked is a setter that returns if truthy.\n     * 2. getAttribute returns the string value\n     * getAttribute('checked') does not sync with `Element.checked`, so use JS property\n     * NOTE: `checked` property exists on `HTMLInputElement`. For serializer assumptions, we check for type=radio|check.\n     */\n    var inputElement = element;\n    if (tagName === 'input' && (inputElement.type === 'radio' || inputElement.type === 'checkbox')) {\n        if (nodePrivacyLevel === NodePrivacyLevel.ALLOW) {\n            safeAttrs.checked = !!inputElement.checked;\n        }\n        else if (shouldMaskNode(inputElement, nodePrivacyLevel)) {\n            delete safeAttrs.checked;\n        }\n    }\n    /**\n     * Serialize the media playback state\n     */\n    if (tagName === 'audio' || tagName === 'video') {\n        var mediaElement = element;\n        safeAttrs.rr_mediaState = mediaElement.paused ? 'paused' : 'played';\n    }\n    /**\n     * Serialize the scroll state for each element only for full snapshot\n     */\n    var scrollTop;\n    var scrollLeft;\n    var serializationContext = options.serializationContext;\n    switch (serializationContext.status) {\n        case 0 /* SerializationContextStatus.INITIAL_FULL_SNAPSHOT */:\n            scrollTop = Math.round(element.scrollTop);\n            scrollLeft = Math.round(element.scrollLeft);\n            if (scrollTop || scrollLeft) {\n                serializationContext.elementsScrollPositions.set(element, { scrollTop: scrollTop, scrollLeft: scrollLeft });\n            }\n            break;\n        case 1 /* SerializationContextStatus.SUBSEQUENT_FULL_SNAPSHOT */:\n            if (serializationContext.elementsScrollPositions.has(element)) {\n                ;\n                (_a = serializationContext.elementsScrollPositions.get(element), scrollTop = _a.scrollTop, scrollLeft = _a.scrollLeft);\n            }\n            break;\n    }\n    if (scrollLeft) {\n        safeAttrs.rr_scrollLeft = scrollLeft;\n    }\n    if (scrollTop) {\n        safeAttrs.rr_scrollTop = scrollTop;\n    }\n    return safeAttrs;\n}\nexport function getCssRulesString(cssStyleSheet) {\n    if (!cssStyleSheet) {\n        return null;\n    }\n    var rules;\n    try {\n        rules = cssStyleSheet.rules || cssStyleSheet.cssRules;\n    }\n    catch (_a) {\n        // if css is protected by CORS we cannot access cssRules see: https://www.w3.org/TR/cssom-1/#the-cssstylesheet-interface\n    }\n    if (!rules) {\n        return null;\n    }\n    var styleSheetCssText = Array.from(rules, isSafari() ? getCssRuleStringForSafari : getCssRuleString).join('');\n    return switchToAbsoluteUrl(styleSheetCssText, cssStyleSheet.href);\n}\nfunction getCssRuleStringForSafari(rule) {\n    // Safari does not escape attribute selectors containing : properly\n    // https://bugs.webkit.org/show_bug.cgi?id=184604\n    if (isCSSStyleRule(rule) && rule.selectorText.includes(':')) {\n        // This regex replaces [foo:bar] by [foo\\\\:bar]\n        var escapeColon = /(\\[[\\w-]+[^\\\\])(:[^\\]]+\\])/g;\n        return rule.cssText.replace(escapeColon, '$1\\\\$2');\n    }\n    return getCssRuleString(rule);\n}\nfunction getCssRuleString(rule) {\n    // If it's an @import rule, try to inline sub-rules recursively with `getCssRulesString`. This\n    // operation can fail if the imported stylesheet is protected by CORS, in which case we fallback\n    // to the @import rule CSS text.\n    return (isCSSImportRule(rule) && getCssRulesString(rule.styleSheet)) || rule.cssText;\n}\nfunction isCSSImportRule(rule) {\n    return 'styleSheet' in rule;\n}\nfunction isCSSStyleRule(rule) {\n    return 'selectorText' in rule;\n}\n//# sourceMappingURL=serializeAttributes.js.map","import { reducePrivacyLevel, getNodeSelfPrivacyLevel, getTextContent, isNodeShadowRoot, hasChildNodes, forEachChildNodes, NodePrivacyLevel, PRIVACY_ATTR_NAME, PRIVACY_ATTR_VALUE_HIDDEN, } from '@datadog/browser-rum-core';\nimport { assign } from '@datadog/browser-core';\nimport { NodeType } from '../../../types';\nimport { getSerializedNodeId, getValidTagName, setSerializedNodeId } from './serializationUtils';\nimport { serializeStyleSheets } from './serializeStyleSheets';\nimport { serializeAttributes } from './serializeAttributes';\nexport function serializeNodeWithId(node, options) {\n    var serializedNode = serializeNode(node, options);\n    if (!serializedNode) {\n        return null;\n    }\n    // Try to reuse the previous id\n    var id = getSerializedNodeId(node) || generateNextId();\n    var serializedNodeWithId = serializedNode;\n    serializedNodeWithId.id = id;\n    setSerializedNodeId(node, id);\n    if (options.serializedNodeIds) {\n        options.serializedNodeIds.add(id);\n    }\n    return serializedNodeWithId;\n}\nvar _nextId = 1;\nexport function generateNextId() {\n    return _nextId++;\n}\nexport function serializeChildNodes(node, options) {\n    var result = [];\n    forEachChildNodes(node, function (childNode) {\n        var serializedChildNode = serializeNodeWithId(childNode, options);\n        if (serializedChildNode) {\n            result.push(serializedChildNode);\n        }\n    });\n    return result;\n}\nfunction serializeNode(node, options) {\n    switch (node.nodeType) {\n        case node.DOCUMENT_NODE:\n            return serializeDocumentNode(node, options);\n        case node.DOCUMENT_FRAGMENT_NODE:\n            return serializeDocumentFragmentNode(node, options);\n        case node.DOCUMENT_TYPE_NODE:\n            return serializeDocumentTypeNode(node);\n        case node.ELEMENT_NODE:\n            return serializeElementNode(node, options);\n        case node.TEXT_NODE:\n            return serializeTextNode(node, options);\n        case node.CDATA_SECTION_NODE:\n            return serializeCDataNode();\n    }\n}\nexport function serializeDocumentNode(document, options) {\n    return {\n        type: NodeType.Document,\n        childNodes: serializeChildNodes(document, options),\n        adoptedStyleSheets: serializeStyleSheets(document.adoptedStyleSheets),\n    };\n}\nfunction serializeDocumentFragmentNode(element, options) {\n    var isShadowRoot = isNodeShadowRoot(element);\n    if (isShadowRoot) {\n        options.serializationContext.shadowRootsController.addShadowRoot(element);\n    }\n    return {\n        type: NodeType.DocumentFragment,\n        childNodes: serializeChildNodes(element, options),\n        isShadowRoot: isShadowRoot,\n        adoptedStyleSheets: isShadowRoot ? serializeStyleSheets(element.adoptedStyleSheets) : undefined,\n    };\n}\nfunction serializeDocumentTypeNode(documentType) {\n    return {\n        type: NodeType.DocumentType,\n        name: documentType.name,\n        publicId: documentType.publicId,\n        systemId: documentType.systemId,\n    };\n}\n/**\n * Serializing Element nodes involves capturing:\n * 1. HTML ATTRIBUTES:\n * 2. JS STATE:\n * - scroll offsets\n * - Form fields (input value, checkbox checked, option selection, range)\n * - Canvas state,\n * - Media (video/audio) play mode + currentTime\n * - iframe contents\n * - webcomponents\n * 3. CUSTOM PROPERTIES:\n * - height+width for when `hidden` to cover the element\n * 4. EXCLUDED INTERACTION STATE:\n * - focus (possible, but not worth perf impact)\n * - hover (tracked only via mouse activity)\n * - fullscreen mode\n */\nfunction serializeElementNode(element, options) {\n    var _a;\n    var tagName = getValidTagName(element.tagName);\n    var isSVG = isSVGElement(element) || undefined;\n    // For performance reason, we don't use getNodePrivacyLevel directly: we leverage the\n    // parentNodePrivacyLevel option to avoid iterating over all parents\n    var nodePrivacyLevel = reducePrivacyLevel(getNodeSelfPrivacyLevel(element), options.parentNodePrivacyLevel);\n    if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n        var _b = element.getBoundingClientRect(), width = _b.width, height = _b.height;\n        return {\n            type: NodeType.Element,\n            tagName: tagName,\n            attributes: (_a = {\n                    rr_width: \"\".concat(width, \"px\"),\n                    rr_height: \"\".concat(height, \"px\")\n                },\n                _a[PRIVACY_ATTR_NAME] = PRIVACY_ATTR_VALUE_HIDDEN,\n                _a),\n            childNodes: [],\n            isSVG: isSVG,\n        };\n    }\n    // Ignore Elements like Script and some Link, Metas\n    if (nodePrivacyLevel === NodePrivacyLevel.IGNORE) {\n        return;\n    }\n    var attributes = serializeAttributes(element, nodePrivacyLevel, options);\n    var childNodes = [];\n    if (hasChildNodes(element) &&\n        // Do not serialize style children as the css rules are already in the _cssText attribute\n        tagName !== 'style') {\n        // OBJECT POOLING OPTIMIZATION:\n        // We should not create a new object systematically as it could impact performances. Try to reuse\n        // the same object as much as possible, and clone it only if we need to.\n        var childNodesSerializationOptions = void 0;\n        if (options.parentNodePrivacyLevel === nodePrivacyLevel && options.ignoreWhiteSpace === (tagName === 'head')) {\n            childNodesSerializationOptions = options;\n        }\n        else {\n            childNodesSerializationOptions = assign({}, options, {\n                parentNodePrivacyLevel: nodePrivacyLevel,\n                ignoreWhiteSpace: tagName === 'head',\n            });\n        }\n        childNodes = serializeChildNodes(element, childNodesSerializationOptions);\n    }\n    return {\n        type: NodeType.Element,\n        tagName: tagName,\n        attributes: attributes,\n        childNodes: childNodes,\n        isSVG: isSVG,\n    };\n}\nfunction isSVGElement(el) {\n    return el.tagName === 'svg' || el instanceof SVGElement;\n}\n/**\n * Text Nodes are dependant on Element nodes\n * Privacy levels are set on elements so we check the parentElement of a text node\n * for privacy level.\n */\nfunction serializeTextNode(textNode, options) {\n    var textContent = getTextContent(textNode, options.ignoreWhiteSpace || false, options.parentNodePrivacyLevel);\n    if (textContent === undefined) {\n        return;\n    }\n    return {\n        type: NodeType.Text,\n        textContent: textContent,\n    };\n}\nfunction serializeCDataNode() {\n    return {\n        type: NodeType.CDATA,\n        textContent: '',\n    };\n}\n//# sourceMappingURL=serializeNode.js.map","import { serializeNodeWithId } from './serializeNode';\nexport function serializeDocument(document, configuration, serializationContext) {\n    // We are sure that Documents are never ignored, so this function never returns null\n    return serializeNodeWithId(document, {\n        serializationContext: serializationContext,\n        parentNodePrivacyLevel: configuration.defaultPrivacyLevel,\n        configuration: configuration,\n    });\n}\n//# sourceMappingURL=serializeDocument.js.map","import { isNodeShadowHost } from '@datadog/browser-rum-core';\nexport function isTouchEvent(event) {\n    return Boolean(event.changedTouches);\n}\nexport function getEventTarget(event) {\n    if (event.composed === true && isNodeShadowHost(event.target)) {\n        return event.composedPath()[0];\n    }\n    return event.target;\n}\n//# sourceMappingURL=eventsUtils.js.map","/**\n * Browsers have not standardized various dimension properties. Mobile devices typically report\n * dimensions in reference to the visual viewport, while desktop uses the layout viewport. For example,\n * Mobile Chrome will change innerWidth when a pinch zoom takes place, while Chrome Desktop (mac) will not.\n *\n * With the new Viewport API, we now calculate and normalize dimension properties to the layout viewport.\n * If the VisualViewport API is not supported by a browser, it isn't reasonably possible to detect or normalize\n * which viewport is being measured. Therefore these exported functions will fallback to assuming that the layout\n * viewport is being measured by the browser\n */\n// Scrollbar widths vary across properties on different devices and browsers\nvar TOLERANCE = 25;\n/**\n * Use the Visual Viewport API's properties to measure scrollX/Y in reference to the layout viewport\n * in order to determine if window.scrollX/Y is measuring the layout or visual viewport.\n * This finding corresponds to which viewport mouseEvent.clientX/Y and window.innerWidth/Height measures.\n */\nfunction isVisualViewportFactoredIn(visualViewport) {\n    return (Math.abs(visualViewport.pageTop - visualViewport.offsetTop - window.scrollY) > TOLERANCE ||\n        Math.abs(visualViewport.pageLeft - visualViewport.offsetLeft - window.scrollX) > TOLERANCE);\n}\nexport var convertMouseEventToLayoutCoordinates = function (clientX, clientY) {\n    var visualViewport = window.visualViewport;\n    var normalized = {\n        layoutViewportX: clientX,\n        layoutViewportY: clientY,\n        visualViewportX: clientX,\n        visualViewportY: clientY,\n    };\n    if (!visualViewport) {\n        // On old browsers, we cannot normalize, so fallback to clientX/Y\n        return normalized;\n    }\n    else if (isVisualViewportFactoredIn(visualViewport)) {\n        // Typically Mobile Devices\n        normalized.layoutViewportX = Math.round(clientX + visualViewport.offsetLeft);\n        normalized.layoutViewportY = Math.round(clientY + visualViewport.offsetTop);\n    }\n    else {\n        // Typically Desktop Devices\n        normalized.visualViewportX = Math.round(clientX - visualViewport.offsetLeft);\n        normalized.visualViewportY = Math.round(clientY - visualViewport.offsetTop);\n    }\n    return normalized;\n};\nexport var getVisualViewport = function (visualViewport) { return ({\n    scale: visualViewport.scale,\n    offsetLeft: visualViewport.offsetLeft,\n    offsetTop: visualViewport.offsetTop,\n    pageLeft: visualViewport.pageLeft,\n    pageTop: visualViewport.pageTop,\n    height: visualViewport.height,\n    width: visualViewport.width,\n}); };\n//# sourceMappingURL=viewports.js.map","import { assign, timeStampNow } from '@datadog/browser-core';\nimport { RecordType } from '../../types';\nexport function assembleIncrementalSnapshot(source, data) {\n    return {\n        data: assign({\n            source: source,\n        }, data),\n        type: RecordType.IncrementalSnapshot,\n        timestamp: timeStampNow(),\n    };\n}\n//# sourceMappingURL=assembly.js.map","import { addEventListeners, addTelemetryDebug, throttle } from '@datadog/browser-core';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { IncrementalSource } from '../../../types';\nimport { getEventTarget, isTouchEvent } from '../eventsUtils';\nimport { convertMouseEventToLayoutCoordinates } from '../viewports';\nimport { assembleIncrementalSnapshot } from '../assembly';\nvar MOUSE_MOVE_OBSERVER_THRESHOLD = 50;\nexport function trackMove(configuration, moveCb) {\n    var _a = throttle(function (event) {\n        var target = getEventTarget(event);\n        if (hasSerializedNode(target)) {\n            var coordinates = tryToComputeCoordinates(event);\n            if (!coordinates) {\n                return;\n            }\n            var position = {\n                id: getSerializedNodeId(target),\n                timeOffset: 0,\n                x: coordinates.x,\n                y: coordinates.y,\n            };\n            moveCb(assembleIncrementalSnapshot(isTouchEvent(event) ? IncrementalSource.TouchMove : IncrementalSource.MouseMove, { positions: [position] }));\n        }\n    }, MOUSE_MOVE_OBSERVER_THRESHOLD, {\n        trailing: false,\n    }), updatePosition = _a.throttled, cancelThrottle = _a.cancel;\n    var removeListener = addEventListeners(configuration, document, [\"mousemove\" /* DOM_EVENT.MOUSE_MOVE */, \"touchmove\" /* DOM_EVENT.TOUCH_MOVE */], updatePosition, {\n        capture: true,\n        passive: true,\n    }).stop;\n    return {\n        stop: function () {\n            removeListener();\n            cancelThrottle();\n        },\n    };\n}\nexport function tryToComputeCoordinates(event) {\n    var _a = isTouchEvent(event) ? event.changedTouches[0] : event, x = _a.clientX, y = _a.clientY;\n    if (window.visualViewport) {\n        var _b = convertMouseEventToLayoutCoordinates(x, y), visualViewportX = _b.visualViewportX, visualViewportY = _b.visualViewportY;\n        x = visualViewportX;\n        y = visualViewportY;\n    }\n    if (!Number.isFinite(x) || !Number.isFinite(y)) {\n        if (event.isTrusted) {\n            addTelemetryDebug('mouse/touch event without x/y');\n        }\n        return undefined;\n    }\n    return { x: x, y: y };\n}\n//# sourceMappingURL=trackMove.js.map","var _a;\nimport { assign, addEventListeners } from '@datadog/browser-core';\nimport { getNodePrivacyLevel, NodePrivacyLevel } from '@datadog/browser-rum-core';\nimport { IncrementalSource, MouseInteractionType } from '../../../types';\nimport { assembleIncrementalSnapshot } from '../assembly';\nimport { getEventTarget } from '../eventsUtils';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { tryToComputeCoordinates } from './trackMove';\nvar eventTypeToMouseInteraction = (_a = {},\n    // Listen for pointerup DOM events instead of mouseup for MouseInteraction/MouseUp records. This\n    // allows to reference such records from Frustration records.\n    //\n    // In the context of supporting Mobile Session Replay, we introduced `PointerInteraction` records\n    // used by the Mobile SDKs in place of `MouseInteraction`. In the future, we should replace\n    // `MouseInteraction` by `PointerInteraction` in the Browser SDK so we have an uniform way to\n    // convey such interaction. This would cleanly solve the issue since we would have\n    // `PointerInteraction/Up` records that we could reference from `Frustration` records.\n    _a[\"pointerup\" /* DOM_EVENT.POINTER_UP */] = MouseInteractionType.MouseUp,\n    _a[\"mousedown\" /* DOM_EVENT.MOUSE_DOWN */] = MouseInteractionType.MouseDown,\n    _a[\"click\" /* DOM_EVENT.CLICK */] = MouseInteractionType.Click,\n    _a[\"contextmenu\" /* DOM_EVENT.CONTEXT_MENU */] = MouseInteractionType.ContextMenu,\n    _a[\"dblclick\" /* DOM_EVENT.DBL_CLICK */] = MouseInteractionType.DblClick,\n    _a[\"focus\" /* DOM_EVENT.FOCUS */] = MouseInteractionType.Focus,\n    _a[\"blur\" /* DOM_EVENT.BLUR */] = MouseInteractionType.Blur,\n    _a[\"touchstart\" /* DOM_EVENT.TOUCH_START */] = MouseInteractionType.TouchStart,\n    _a[\"touchend\" /* DOM_EVENT.TOUCH_END */] = MouseInteractionType.TouchEnd,\n    _a);\nexport function trackMouseInteraction(configuration, mouseInteractionCb, recordIds) {\n    var handler = function (event) {\n        var target = getEventTarget(event);\n        if (getNodePrivacyLevel(target, configuration.defaultPrivacyLevel) === NodePrivacyLevel.HIDDEN ||\n            !hasSerializedNode(target)) {\n            return;\n        }\n        var id = getSerializedNodeId(target);\n        var type = eventTypeToMouseInteraction[event.type];\n        var interaction;\n        if (type !== MouseInteractionType.Blur && type !== MouseInteractionType.Focus) {\n            var coordinates = tryToComputeCoordinates(event);\n            if (!coordinates) {\n                return;\n            }\n            interaction = { id: id, type: type, x: coordinates.x, y: coordinates.y };\n        }\n        else {\n            interaction = { id: id, type: type };\n        }\n        var record = assign({ id: recordIds.getIdForEvent(event) }, assembleIncrementalSnapshot(IncrementalSource.MouseInteraction, interaction));\n        mouseInteractionCb(record);\n    };\n    return addEventListeners(configuration, document, Object.keys(eventTypeToMouseInteraction), handler, {\n        capture: true,\n        passive: true,\n    });\n}\n//# sourceMappingURL=trackMouseInteraction.js.map","import { throttle, addEventListener } from '@datadog/browser-core';\nimport { getScrollX, getScrollY, getNodePrivacyLevel, NodePrivacyLevel } from '@datadog/browser-rum-core';\nimport { getEventTarget } from '../eventsUtils';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { IncrementalSource } from '../../../types';\nimport { assembleIncrementalSnapshot } from '../assembly';\nvar SCROLL_OBSERVER_THRESHOLD = 100;\nexport function trackScroll(configuration, scrollCb, elementsScrollPositions, target) {\n    if (target === void 0) { target = document; }\n    var _a = throttle(function (event) {\n        var target = getEventTarget(event);\n        if (!target ||\n            getNodePrivacyLevel(target, configuration.defaultPrivacyLevel) === NodePrivacyLevel.HIDDEN ||\n            !hasSerializedNode(target)) {\n            return;\n        }\n        var id = getSerializedNodeId(target);\n        var scrollPositions = target === document\n            ? {\n                scrollTop: getScrollY(),\n                scrollLeft: getScrollX(),\n            }\n            : {\n                scrollTop: Math.round(target.scrollTop),\n                scrollLeft: Math.round(target.scrollLeft),\n            };\n        elementsScrollPositions.set(target, scrollPositions);\n        scrollCb(assembleIncrementalSnapshot(IncrementalSource.Scroll, {\n            id: id,\n            x: scrollPositions.scrollLeft,\n            y: scrollPositions.scrollTop,\n        }));\n    }, SCROLL_OBSERVER_THRESHOLD), updatePosition = _a.throttled, cancelThrottle = _a.cancel;\n    var removeListener = addEventListener(configuration, target, \"scroll\" /* DOM_EVENT.SCROLL */, updatePosition, {\n        capture: true,\n        passive: true,\n    }).stop;\n    return {\n        stop: function () {\n            removeListener();\n            cancelThrottle();\n        },\n    };\n}\n//# sourceMappingURL=trackScroll.js.map","import { throttle, addEventListeners, timeStampNow, noop } from '@datadog/browser-core';\nimport { initViewportObservable } from '@datadog/browser-rum-core';\nimport { IncrementalSource, RecordType } from '../../../types';\nimport { getVisualViewport } from '../viewports';\nimport { assembleIncrementalSnapshot } from '../assembly';\nvar VISUAL_VIEWPORT_OBSERVER_THRESHOLD = 200;\nexport function trackViewportResize(configuration, viewportResizeCb) {\n    var viewportResizeSubscription = initViewportObservable(configuration).subscribe(function (data) {\n        viewportResizeCb(assembleIncrementalSnapshot(IncrementalSource.ViewportResize, data));\n    });\n    return {\n        stop: function () {\n            viewportResizeSubscription.unsubscribe();\n        },\n    };\n}\nexport function trackVisualViewportResize(configuration, visualViewportResizeCb) {\n    var visualViewport = window.visualViewport;\n    if (!visualViewport) {\n        return { stop: noop };\n    }\n    var _a = throttle(function () {\n        visualViewportResizeCb({\n            data: getVisualViewport(visualViewport),\n            type: RecordType.VisualViewport,\n            timestamp: timeStampNow(),\n        });\n    }, VISUAL_VIEWPORT_OBSERVER_THRESHOLD, {\n        trailing: false,\n    }), updateDimension = _a.throttled, cancelThrottle = _a.cancel;\n    var removeListener = addEventListeners(configuration, visualViewport, [\"resize\" /* DOM_EVENT.RESIZE */, \"scroll\" /* DOM_EVENT.SCROLL */], updateDimension, {\n        capture: true,\n        passive: true,\n    }).stop;\n    return {\n        stop: function () {\n            removeListener();\n            cancelThrottle();\n        },\n    };\n}\n//# sourceMappingURL=trackViewportResize.js.map","import { addEventListeners } from '@datadog/browser-core';\nimport { NodePrivacyLevel, getNodePrivacyLevel } from '@datadog/browser-rum-core';\nimport { IncrementalSource, MediaInteractionType } from '../../../types';\nimport { getEventTarget } from '../eventsUtils';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { assembleIncrementalSnapshot } from '../assembly';\nexport function trackMediaInteraction(configuration, mediaInteractionCb) {\n    return addEventListeners(configuration, document, [\"play\" /* DOM_EVENT.PLAY */, \"pause\" /* DOM_EVENT.PAUSE */], function (event) {\n        var target = getEventTarget(event);\n        if (!target ||\n            getNodePrivacyLevel(target, configuration.defaultPrivacyLevel) === NodePrivacyLevel.HIDDEN ||\n            !hasSerializedNode(target)) {\n            return;\n        }\n        mediaInteractionCb(assembleIncrementalSnapshot(IncrementalSource.MediaInteraction, {\n            id: getSerializedNodeId(target),\n            type: event.type === \"play\" /* DOM_EVENT.PLAY */ ? MediaInteractionType.Play : MediaInteractionType.Pause,\n        }));\n    }, {\n        capture: true,\n        passive: true,\n    });\n}\n//# sourceMappingURL=trackMediaInteraction.js.map","import { instrumentMethod } from '@datadog/browser-core';\nimport { IncrementalSource } from '../../../types';\nimport { getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { assembleIncrementalSnapshot } from '../assembly';\nexport function trackStyleSheet(styleSheetCb) {\n    function checkStyleSheetAndCallback(styleSheet, callback) {\n        if (styleSheet && hasSerializedNode(styleSheet.ownerNode)) {\n            callback(getSerializedNodeId(styleSheet.ownerNode));\n        }\n    }\n    var instrumentationStoppers = [\n        instrumentMethod(CSSStyleSheet.prototype, 'insertRule', function (_a) {\n            var styleSheet = _a.target, _b = _a.parameters, rule = _b[0], index = _b[1];\n            checkStyleSheetAndCallback(styleSheet, function (id) {\n                return styleSheetCb(assembleIncrementalSnapshot(IncrementalSource.StyleSheetRule, {\n                    id: id,\n                    adds: [{ rule: rule, index: index }],\n                }));\n            });\n        }),\n        instrumentMethod(CSSStyleSheet.prototype, 'deleteRule', function (_a) {\n            var styleSheet = _a.target, index = _a.parameters[0];\n            checkStyleSheetAndCallback(styleSheet, function (id) {\n                return styleSheetCb(assembleIncrementalSnapshot(IncrementalSource.StyleSheetRule, {\n                    id: id,\n                    removes: [{ index: index }],\n                }));\n            });\n        }),\n    ];\n    if (typeof CSSGroupingRule !== 'undefined') {\n        instrumentGroupingCSSRuleClass(CSSGroupingRule);\n    }\n    else {\n        instrumentGroupingCSSRuleClass(CSSMediaRule);\n        instrumentGroupingCSSRuleClass(CSSSupportsRule);\n    }\n    function instrumentGroupingCSSRuleClass(cls) {\n        instrumentationStoppers.push(instrumentMethod(cls.prototype, 'insertRule', function (_a) {\n            var styleSheet = _a.target, _b = _a.parameters, rule = _b[0], index = _b[1];\n            checkStyleSheetAndCallback(styleSheet.parentStyleSheet, function (id) {\n                var path = getPathToNestedCSSRule(styleSheet);\n                if (path) {\n                    path.push(index || 0);\n                    styleSheetCb(assembleIncrementalSnapshot(IncrementalSource.StyleSheetRule, {\n                        id: id,\n                        adds: [{ rule: rule, index: path }],\n                    }));\n                }\n            });\n        }), instrumentMethod(cls.prototype, 'deleteRule', function (_a) {\n            var styleSheet = _a.target, index = _a.parameters[0];\n            checkStyleSheetAndCallback(styleSheet.parentStyleSheet, function (id) {\n                var path = getPathToNestedCSSRule(styleSheet);\n                if (path) {\n                    path.push(index);\n                    styleSheetCb(assembleIncrementalSnapshot(IncrementalSource.StyleSheetRule, {\n                        id: id,\n                        removes: [{ index: path }],\n                    }));\n                }\n            });\n        }));\n    }\n    return {\n        stop: function () {\n            instrumentationStoppers.forEach(function (stopper) { return stopper.stop(); });\n        },\n    };\n}\nexport function getPathToNestedCSSRule(rule) {\n    var path = [];\n    var currentRule = rule;\n    while (currentRule.parentRule) {\n        var rules_1 = Array.from(currentRule.parentRule.cssRules);\n        var index_1 = rules_1.indexOf(currentRule);\n        path.unshift(index_1);\n        currentRule = currentRule.parentRule;\n    }\n    // A rule may not be attached to a stylesheet\n    if (!currentRule.parentStyleSheet) {\n        return;\n    }\n    var rules = Array.from(currentRule.parentStyleSheet.cssRules);\n    var index = rules.indexOf(currentRule);\n    path.unshift(index);\n    return path;\n}\n//# sourceMappingURL=trackStyleSheet.js.map","import { addEventListeners, timeStampNow } from '@datadog/browser-core';\nimport { RecordType } from '../../../types';\nexport function trackFocus(configuration, focusCb) {\n    return addEventListeners(configuration, window, [\"focus\" /* DOM_EVENT.FOCUS */, \"blur\" /* DOM_EVENT.BLUR */], function () {\n        focusCb({\n            data: { has_focus: document.hasFocus() },\n            type: RecordType.Focus,\n            timestamp: timeStampNow(),\n        });\n    });\n}\n//# sourceMappingURL=trackFocus.js.map","import { RecordType } from '../../../types';\nexport function trackFrustration(lifeCycle, frustrationCb, recordIds) {\n    var frustrationSubscription = lifeCycle.subscribe(12 /* LifeCycleEventType.RAW_RUM_EVENT_COLLECTED */, function (data) {\n        var _a, _b;\n        if (data.rawRumEvent.type === \"action\" /* RumEventType.ACTION */ &&\n            data.rawRumEvent.action.type === \"click\" /* ActionType.CLICK */ &&\n            ((_b = (_a = data.rawRumEvent.action.frustration) === null || _a === void 0 ? void 0 : _a.type) === null || _b === void 0 ? void 0 : _b.length) &&\n            'events' in data.domainContext &&\n            data.domainContext.events &&\n            data.domainContext.events.length) {\n            frustrationCb({\n                timestamp: data.rawRumEvent.date,\n                type: RecordType.FrustrationRecord,\n                data: {\n                    frustrationTypes: data.rawRumEvent.action.frustration.type,\n                    recordIds: data.domainContext.events.map(function (e) { return recordIds.getIdForEvent(e); }),\n                },\n            });\n        }\n    });\n    return {\n        stop: function () {\n            frustrationSubscription.unsubscribe();\n        },\n    };\n}\n//# sourceMappingURL=trackFrustration.js.map","import { timeStampNow } from '@datadog/browser-core';\nimport { RecordType } from '../../../types';\nexport function trackViewEnd(lifeCycle, viewEndCb) {\n    var viewEndSubscription = lifeCycle.subscribe(5 /* LifeCycleEventType.VIEW_ENDED */, function () {\n        viewEndCb({\n            timestamp: timeStampNow(),\n            type: RecordType.ViewEnd,\n        });\n    });\n    return {\n        stop: function () {\n            viewEndSubscription.unsubscribe();\n        },\n    };\n}\n//# sourceMappingURL=trackViewEnd.js.map","import { instrumentSetter, assign, addEventListeners, forEach, noop } from '@datadog/browser-core';\nimport { NodePrivacyLevel, getNodePrivacyLevel, shouldMaskNode, cssEscape } from '@datadog/browser-rum-core';\nimport { IncrementalSource } from '../../../types';\nimport { getEventTarget } from '../eventsUtils';\nimport { getElementInputValue, getSerializedNodeId, hasSerializedNode } from '../serialization';\nimport { assembleIncrementalSnapshot } from '../assembly';\nexport function trackInput(configuration, inputCb, target) {\n    if (target === void 0) { target = document; }\n    var defaultPrivacyLevel = configuration.defaultPrivacyLevel;\n    var lastInputStateMap = new WeakMap();\n    var isShadowRoot = target !== document;\n    var stopEventListeners = addEventListeners(configuration, target, \n    // The 'input' event bubbles across shadow roots, so we don't have to listen for it on shadow\n    // roots since it will be handled by the event listener that we did add to the document. Only\n    // the 'change' event is blocked and needs to be handled on shadow roots.\n    isShadowRoot ? [\"change\" /* DOM_EVENT.CHANGE */] : [\"input\" /* DOM_EVENT.INPUT */, \"change\" /* DOM_EVENT.CHANGE */], function (event) {\n        var target = getEventTarget(event);\n        if (target instanceof HTMLInputElement ||\n            target instanceof HTMLTextAreaElement ||\n            target instanceof HTMLSelectElement) {\n            onElementChange(target);\n        }\n    }, {\n        capture: true,\n        passive: true,\n    }).stop;\n    var stopPropertySetterInstrumentation;\n    if (!isShadowRoot) {\n        var instrumentationStoppers_1 = [\n            instrumentSetter(HTMLInputElement.prototype, 'value', onElementChange),\n            instrumentSetter(HTMLInputElement.prototype, 'checked', onElementChange),\n            instrumentSetter(HTMLSelectElement.prototype, 'value', onElementChange),\n            instrumentSetter(HTMLTextAreaElement.prototype, 'value', onElementChange),\n            instrumentSetter(HTMLSelectElement.prototype, 'selectedIndex', onElementChange),\n        ];\n        stopPropertySetterInstrumentation = function () {\n            instrumentationStoppers_1.forEach(function (stopper) { return stopper.stop(); });\n        };\n    }\n    else {\n        stopPropertySetterInstrumentation = noop;\n    }\n    return {\n        stop: function () {\n            stopPropertySetterInstrumentation();\n            stopEventListeners();\n        },\n    };\n    function onElementChange(target) {\n        var nodePrivacyLevel = getNodePrivacyLevel(target, defaultPrivacyLevel);\n        if (nodePrivacyLevel === NodePrivacyLevel.HIDDEN) {\n            return;\n        }\n        var type = target.type;\n        var inputState;\n        if (type === 'radio' || type === 'checkbox') {\n            if (shouldMaskNode(target, nodePrivacyLevel)) {\n                return;\n            }\n            inputState = { isChecked: target.checked };\n        }\n        else {\n            var value = getElementInputValue(target, nodePrivacyLevel);\n            if (value === undefined) {\n                return;\n            }\n            inputState = { text: value };\n        }\n        // Can be multiple changes on the same node within the same batched mutation observation.\n        cbWithDedup(target, inputState);\n        // If a radio was checked, other radios with the same name attribute will be unchecked.\n        var name = target.name;\n        if (type === 'radio' && name && target.checked) {\n            forEach(document.querySelectorAll(\"input[type=\\\"radio\\\"][name=\\\"\".concat(cssEscape(name), \"\\\"]\")), function (el) {\n                if (el !== target) {\n                    // TODO: Consider the privacy implications for various differing input privacy levels\n                    cbWithDedup(el, { isChecked: false });\n                }\n            });\n        }\n    }\n    /**\n     * There can be multiple changes on the same node within the same batched mutation observation.\n     */\n    function cbWithDedup(target, inputState) {\n        if (!hasSerializedNode(target)) {\n            return;\n        }\n        var lastInputState = lastInputStateMap.get(target);\n        if (!lastInputState ||\n            lastInputState.text !== inputState.text ||\n            lastInputState.isChecked !== inputState.isChecked) {\n            lastInputStateMap.set(target, inputState);\n            inputCb(assembleIncrementalSnapshot(IncrementalSource.Input, assign({\n                id: getSerializedNodeId(target),\n            }, inputState)));\n        }\n    }\n}\n//# sourceMappingURL=trackInput.js.map","import { noop, monitor, throttle } from '@datadog/browser-core';\n/**\n * Maximum duration to wait before processing mutations. If the browser is idle, mutations will be\n * processed more quickly. If the browser is busy executing small tasks (ex: rendering frames), the\n * mutations will wait MUTATION_PROCESS_MAX_DELAY milliseconds before being processed. If the\n * browser is busy executing a longer task, mutations will be processed after this task.\n */\nvar MUTATION_PROCESS_MAX_DELAY = 100;\n/**\n * Minimum duration to wait before processing mutations. This is used to batch mutations together\n * and be able to deduplicate them to save processing time and bandwidth.\n * 16ms is the duration of a frame at 60fps that ensure fluid UI.\n */\nexport var MUTATION_PROCESS_MIN_DELAY = 16;\nexport function createMutationBatch(processMutationBatch) {\n    var cancelScheduledFlush = noop;\n    var pendingMutations = [];\n    function flush() {\n        cancelScheduledFlush();\n        processMutationBatch(pendingMutations);\n        pendingMutations = [];\n    }\n    var _a = throttle(flush, MUTATION_PROCESS_MIN_DELAY, {\n        leading: false,\n    }), throttledFlush = _a.throttled, cancelThrottle = _a.cancel;\n    return {\n        addMutations: function (mutations) {\n            if (pendingMutations.length === 0) {\n                cancelScheduledFlush = requestIdleCallback(throttledFlush, { timeout: MUTATION_PROCESS_MAX_DELAY });\n            }\n            pendingMutations.push.apply(pendingMutations, mutations);\n        },\n        flush: flush,\n        stop: function () {\n            cancelScheduledFlush();\n            cancelThrottle();\n        },\n    };\n}\n/**\n * Use 'requestIdleCallback' when available: it will throttle the mutation processing if the\n * browser is busy rendering frames (ex: when frames are below 60fps). When not available, the\n * fallback on 'requestAnimationFrame' will still ensure the mutations are processed after any\n * browser rendering process (Layout, Recalculate Style, etc.), so we can serialize DOM nodes efficiently.\n *\n * Note: check both 'requestIdleCallback' and 'cancelIdleCallback' existence because some polyfills only implement 'requestIdleCallback'.\n */\nfunction requestIdleCallback(callback, opts) {\n    if (window.requestIdleCallback && window.cancelIdleCallback) {\n        var id_1 = window.requestIdleCallback(monitor(callback), opts);\n        return function () { return window.cancelIdleCallback(id_1); };\n    }\n    var id = window.requestAnimationFrame(monitor(callback));\n    return function () { return window.cancelAnimationFrame(id); };\n}\n//# sourceMappingURL=mutationBatch.js.map","import { monitor, noop } from '@datadog/browser-core';\nimport { isNodeShadowHost, getMutationObserverConstructor, getParentNode, forEachChildNodes, getNodePrivacyLevel, getTextContent, NodePrivacyLevel, } from '@datadog/browser-rum-core';\nimport { IncrementalSource } from '../../../types';\nimport { getElementInputValue, getSerializedNodeId, hasSerializedNode, nodeAndAncestorsHaveSerializedNode, serializeNodeWithId, serializeAttribute, } from '../serialization';\nimport { createMutationBatch } from '../mutationBatch';\nimport { assembleIncrementalSnapshot } from '../assembly';\n/**\n * Buffers and aggregate mutations generated by a MutationObserver into MutationPayload\n */\nexport function trackMutation(mutationCallback, configuration, shadowRootsController, target) {\n    var MutationObserver = getMutationObserverConstructor();\n    if (!MutationObserver) {\n        return { stop: noop, flush: noop };\n    }\n    var mutationBatch = createMutationBatch(function (mutations) {\n        processMutations(mutations.concat(observer.takeRecords()), mutationCallback, configuration, shadowRootsController);\n    });\n    var observer = new MutationObserver(monitor(mutationBatch.addMutations));\n    observer.observe(target, {\n        attributeOldValue: true,\n        attributes: true,\n        characterData: true,\n        characterDataOldValue: true,\n        childList: true,\n        subtree: true,\n    });\n    return {\n        stop: function () {\n            observer.disconnect();\n            mutationBatch.stop();\n        },\n        flush: function () {\n            mutationBatch.flush();\n        },\n    };\n}\nfunction processMutations(mutations, mutationCallback, configuration, shadowRootsController) {\n    var nodePrivacyLevelCache = new Map();\n    mutations\n        .filter(function (mutation) { return mutation.type === 'childList'; })\n        .forEach(function (mutation) {\n        mutation.removedNodes.forEach(function (removedNode) {\n            traverseRemovedShadowDom(removedNode, shadowRootsController.removeShadowRoot);\n        });\n    });\n    // Discard any mutation with a 'target' node that:\n    // * isn't injected in the current document or isn't known/serialized yet: those nodes are likely\n    // part of a mutation occurring in a parent Node\n    // * should be hidden or ignored\n    var filteredMutations = mutations.filter(function (mutation) {\n        return mutation.target.isConnected &&\n            nodeAndAncestorsHaveSerializedNode(mutation.target) &&\n            getNodePrivacyLevel(mutation.target, configuration.defaultPrivacyLevel, nodePrivacyLevelCache) !==\n                NodePrivacyLevel.HIDDEN;\n    });\n    var _a = processChildListMutations(filteredMutations.filter(function (mutation) { return mutation.type === 'childList'; }), configuration, shadowRootsController, nodePrivacyLevelCache), adds = _a.adds, removes = _a.removes, hasBeenSerialized = _a.hasBeenSerialized;\n    var texts = processCharacterDataMutations(filteredMutations.filter(function (mutation) {\n        return mutation.type === 'characterData' && !hasBeenSerialized(mutation.target);\n    }), configuration, nodePrivacyLevelCache);\n    var attributes = processAttributesMutations(filteredMutations.filter(function (mutation) {\n        return mutation.type === 'attributes' && !hasBeenSerialized(mutation.target);\n    }), configuration, nodePrivacyLevelCache);\n    if (!texts.length && !attributes.length && !removes.length && !adds.length) {\n        return;\n    }\n    mutationCallback(assembleIncrementalSnapshot(IncrementalSource.Mutation, { adds: adds, removes: removes, texts: texts, attributes: attributes }));\n}\nfunction processChildListMutations(mutations, configuration, shadowRootsController, nodePrivacyLevelCache) {\n    // First, we iterate over mutations to collect:\n    //\n    // * nodes that have been added in the document and not removed by a subsequent mutation\n    // * nodes that have been removed from the document but were not added in a previous mutation\n    //\n    // For this second category, we also collect their previous parent (mutation.target) because we'll\n    // need it to emit a 'remove' mutation.\n    //\n    // Those two categories may overlap: if a node moved from a position to another, it is reported as\n    // two mutation records, one with a \"removedNodes\" and the other with \"addedNodes\". In this case,\n    // the node will be in both sets.\n    var addedAndMovedNodes = new Set();\n    var removedNodes = new Map();\n    var _loop_1 = function (mutation) {\n        mutation.addedNodes.forEach(function (node) {\n            addedAndMovedNodes.add(node);\n        });\n        mutation.removedNodes.forEach(function (node) {\n            if (!addedAndMovedNodes.has(node)) {\n                removedNodes.set(node, mutation.target);\n            }\n            addedAndMovedNodes.delete(node);\n        });\n    };\n    for (var _i = 0, mutations_1 = mutations; _i < mutations_1.length; _i++) {\n        var mutation = mutations_1[_i];\n        _loop_1(mutation);\n    }\n    // Then, we sort nodes that are still in the document by topological order, for two reasons:\n    //\n    // * We will serialize each added nodes with their descendants. We don't want to serialize a node\n    // twice, so we need to iterate over the parent nodes first and skip any node that is contained in\n    // a precedent node.\n    //\n    // * To emit \"add\" mutations, we need references to the parent and potential next sibling of each\n    // added node. So we need to iterate over the parent nodes first, and when multiple nodes are\n    // siblings, we want to iterate from last to first. This will ensure that any \"next\" node is\n    // already serialized and have an id.\n    var sortedAddedAndMovedNodes = Array.from(addedAndMovedNodes);\n    sortAddedAndMovedNodes(sortedAddedAndMovedNodes);\n    // Then, we iterate over our sorted node sets to emit mutations. We collect the newly serialized\n    // node ids in a set to be able to skip subsequent related mutations.\n    var serializedNodeIds = new Set();\n    var addedNodeMutations = [];\n    for (var _a = 0, sortedAddedAndMovedNodes_1 = sortedAddedAndMovedNodes; _a < sortedAddedAndMovedNodes_1.length; _a++) {\n        var node = sortedAddedAndMovedNodes_1[_a];\n        if (hasBeenSerialized(node)) {\n            continue;\n        }\n        var parentNodePrivacyLevel = getNodePrivacyLevel(node.parentNode, configuration.defaultPrivacyLevel, nodePrivacyLevelCache);\n        if (parentNodePrivacyLevel === NodePrivacyLevel.HIDDEN || parentNodePrivacyLevel === NodePrivacyLevel.IGNORE) {\n            continue;\n        }\n        var serializedNode = serializeNodeWithId(node, {\n            serializedNodeIds: serializedNodeIds,\n            parentNodePrivacyLevel: parentNodePrivacyLevel,\n            serializationContext: { status: 2 /* SerializationContextStatus.MUTATION */, shadowRootsController: shadowRootsController },\n            configuration: configuration,\n        });\n        if (!serializedNode) {\n            continue;\n        }\n        var parentNode = getParentNode(node);\n        addedNodeMutations.push({\n            nextId: getNextSibling(node),\n            parentId: getSerializedNodeId(parentNode),\n            node: serializedNode,\n        });\n    }\n    // Finally, we emit remove mutations.\n    var removedNodeMutations = [];\n    removedNodes.forEach(function (parent, node) {\n        if (hasSerializedNode(node)) {\n            removedNodeMutations.push({\n                parentId: getSerializedNodeId(parent),\n                id: getSerializedNodeId(node),\n            });\n        }\n    });\n    return { adds: addedNodeMutations, removes: removedNodeMutations, hasBeenSerialized: hasBeenSerialized };\n    function hasBeenSerialized(node) {\n        return hasSerializedNode(node) && serializedNodeIds.has(getSerializedNodeId(node));\n    }\n    function getNextSibling(node) {\n        var nextSibling = node.nextSibling;\n        while (nextSibling) {\n            if (hasSerializedNode(nextSibling)) {\n                return getSerializedNodeId(nextSibling);\n            }\n            nextSibling = nextSibling.nextSibling;\n        }\n        return null;\n    }\n}\nfunction processCharacterDataMutations(mutations, configuration, nodePrivacyLevelCache) {\n    var _a;\n    var textMutations = [];\n    // Deduplicate mutations based on their target node\n    var handledNodes = new Set();\n    var filteredMutations = mutations.filter(function (mutation) {\n        if (handledNodes.has(mutation.target)) {\n            return false;\n        }\n        handledNodes.add(mutation.target);\n        return true;\n    });\n    // Emit mutations\n    for (var _i = 0, filteredMutations_1 = filteredMutations; _i < filteredMutations_1.length; _i++) {\n        var mutation = filteredMutations_1[_i];\n        var value = mutation.target.textContent;\n        if (value === mutation.oldValue) {\n            continue;\n        }\n        var parentNodePrivacyLevel = getNodePrivacyLevel(getParentNode(mutation.target), configuration.defaultPrivacyLevel, nodePrivacyLevelCache);\n        if (parentNodePrivacyLevel === NodePrivacyLevel.HIDDEN || parentNodePrivacyLevel === NodePrivacyLevel.IGNORE) {\n            continue;\n        }\n        textMutations.push({\n            id: getSerializedNodeId(mutation.target),\n            // TODO: pass a valid \"ignoreWhiteSpace\" argument\n            value: (_a = getTextContent(mutation.target, false, parentNodePrivacyLevel)) !== null && _a !== void 0 ? _a : null,\n        });\n    }\n    return textMutations;\n}\nfunction processAttributesMutations(mutations, configuration, nodePrivacyLevelCache) {\n    var attributeMutations = [];\n    // Deduplicate mutations based on their target node and changed attribute\n    var handledElements = new Map();\n    var filteredMutations = mutations.filter(function (mutation) {\n        var handledAttributes = handledElements.get(mutation.target);\n        if (handledAttributes && handledAttributes.has(mutation.attributeName)) {\n            return false;\n        }\n        if (!handledAttributes) {\n            handledElements.set(mutation.target, new Set([mutation.attributeName]));\n        }\n        else {\n            handledAttributes.add(mutation.attributeName);\n        }\n        return true;\n    });\n    // Emit mutations\n    var emittedMutations = new Map();\n    for (var _i = 0, filteredMutations_2 = filteredMutations; _i < filteredMutations_2.length; _i++) {\n        var mutation = filteredMutations_2[_i];\n        var uncensoredValue = mutation.target.getAttribute(mutation.attributeName);\n        if (uncensoredValue === mutation.oldValue) {\n            continue;\n        }\n        var privacyLevel = getNodePrivacyLevel(mutation.target, configuration.defaultPrivacyLevel, nodePrivacyLevelCache);\n        var attributeValue = serializeAttribute(mutation.target, privacyLevel, mutation.attributeName, configuration);\n        var transformedValue = void 0;\n        if (mutation.attributeName === 'value') {\n            var inputValue = getElementInputValue(mutation.target, privacyLevel);\n            if (inputValue === undefined) {\n                continue;\n            }\n            transformedValue = inputValue;\n        }\n        else if (typeof attributeValue === 'string') {\n            transformedValue = attributeValue;\n        }\n        else {\n            transformedValue = null;\n        }\n        var emittedMutation = emittedMutations.get(mutation.target);\n        if (!emittedMutation) {\n            emittedMutation = {\n                id: getSerializedNodeId(mutation.target),\n                attributes: {},\n            };\n            attributeMutations.push(emittedMutation);\n            emittedMutations.set(mutation.target, emittedMutation);\n        }\n        emittedMutation.attributes[mutation.attributeName] = transformedValue;\n    }\n    return attributeMutations;\n}\nexport function sortAddedAndMovedNodes(nodes) {\n    nodes.sort(function (a, b) {\n        var position = a.compareDocumentPosition(b);\n        /* eslint-disable no-bitwise */\n        if (position & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n            return -1;\n        }\n        else if (position & Node.DOCUMENT_POSITION_CONTAINS) {\n            return 1;\n        }\n        else if (position & Node.DOCUMENT_POSITION_FOLLOWING) {\n            return 1;\n        }\n        else if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n            return -1;\n        }\n        /* eslint-enable no-bitwise */\n        return 0;\n    });\n}\nfunction traverseRemovedShadowDom(removedNode, shadowDomRemovedCallback) {\n    if (isNodeShadowHost(removedNode)) {\n        shadowDomRemovedCallback(removedNode.shadowRoot);\n    }\n    forEachChildNodes(removedNode, function (childNode) { return traverseRemovedShadowDom(childNode, shadowDomRemovedCallback); });\n}\n//# sourceMappingURL=trackMutation.js.map","export function createElementsScrollPositions() {\n    var scrollPositionsByElement = new WeakMap();\n    return {\n        set: function (element, scrollPositions) {\n            if (element === document && !document.scrollingElement) {\n                // cf https://drafts.csswg.org/cssom-view/#dom-document-scrollingelement,\n                // in some cases scrolling elements can not be defined, we don't support those for now\n                return;\n            }\n            scrollPositionsByElement.set(element === document ? document.scrollingElement : element, scrollPositions);\n        },\n        get: function (element) {\n            return scrollPositionsByElement.get(element);\n        },\n        has: function (element) {\n            return scrollPositionsByElement.has(element);\n        },\n    };\n}\n//# sourceMappingURL=elementsScrollPositions.js.map","import { trackInput, trackMutation, trackScroll } from './trackers';\nexport var initShadowRootsController = function (configuration, callback, elementsScrollPositions) {\n    var controllerByShadowRoot = new Map();\n    var shadowRootsController = {\n        addShadowRoot: function (shadowRoot) {\n            if (controllerByShadowRoot.has(shadowRoot)) {\n                return;\n            }\n            var mutationTracker = trackMutation(callback, configuration, shadowRootsController, shadowRoot);\n            // The change event does not bubble up across the shadow root, we have to listen on the shadow root\n            var inputTracker = trackInput(configuration, callback, shadowRoot);\n            // The scroll event does not bubble up across the shadow root, we have to listen on the shadow root\n            var scrollTracker = trackScroll(configuration, callback, elementsScrollPositions, shadowRoot);\n            controllerByShadowRoot.set(shadowRoot, {\n                flush: function () { return mutationTracker.flush(); },\n                stop: function () {\n                    mutationTracker.stop();\n                    inputTracker.stop();\n                    scrollTracker.stop();\n                },\n            });\n        },\n        removeShadowRoot: function (shadowRoot) {\n            var entry = controllerByShadowRoot.get(shadowRoot);\n            if (!entry) {\n                // unidentified root cause: observed in some cases with shadow DOM added by browser extensions\n                return;\n            }\n            entry.stop();\n            controllerByShadowRoot.delete(shadowRoot);\n        },\n        stop: function () {\n            controllerByShadowRoot.forEach(function (_a) {\n                var stop = _a.stop;\n                return stop();\n            });\n        },\n        flush: function () {\n            controllerByShadowRoot.forEach(function (_a) {\n                var flush = _a.flush;\n                return flush();\n            });\n        },\n    };\n    return shadowRootsController;\n};\n//# sourceMappingURL=shadowRootsController.js.map","import { getScrollX, getScrollY, getViewportDimension } from '@datadog/browser-rum-core';\nimport { timeStampNow } from '@datadog/browser-core';\nimport { RecordType } from '../../types';\nimport { serializeDocument } from './serialization';\nimport { getVisualViewport } from './viewports';\nexport function startFullSnapshots(elementsScrollPositions, shadowRootsController, lifeCycle, configuration, flushMutations, fullSnapshotCallback) {\n    var takeFullSnapshot = function (timestamp, serializationContext) {\n        if (timestamp === void 0) { timestamp = timeStampNow(); }\n        if (serializationContext === void 0) { serializationContext = {\n            status: 0 /* SerializationContextStatus.INITIAL_FULL_SNAPSHOT */,\n            elementsScrollPositions: elementsScrollPositions,\n            shadowRootsController: shadowRootsController,\n        }; }\n        var _a = getViewportDimension(), width = _a.width, height = _a.height;\n        var records = [\n            {\n                data: {\n                    height: height,\n                    href: window.location.href,\n                    width: width,\n                },\n                type: RecordType.Meta,\n                timestamp: timestamp,\n            },\n            {\n                data: {\n                    has_focus: document.hasFocus(),\n                },\n                type: RecordType.Focus,\n                timestamp: timestamp,\n            },\n            {\n                data: {\n                    node: serializeDocument(document, configuration, serializationContext),\n                    initialOffset: {\n                        left: getScrollX(),\n                        top: getScrollY(),\n                    },\n                },\n                type: RecordType.FullSnapshot,\n                timestamp: timestamp,\n            },\n        ];\n        if (window.visualViewport) {\n            records.push({\n                data: getVisualViewport(window.visualViewport),\n                type: RecordType.VisualViewport,\n                timestamp: timestamp,\n            });\n        }\n        return records;\n    };\n    fullSnapshotCallback(takeFullSnapshot());\n    var unsubscribe = lifeCycle.subscribe(3 /* LifeCycleEventType.VIEW_CREATED */, function (view) {\n        flushMutations();\n        fullSnapshotCallback(takeFullSnapshot(view.startClocks.timeStamp, {\n            shadowRootsController: shadowRootsController,\n            status: 1 /* SerializationContextStatus.SUBSEQUENT_FULL_SNAPSHOT */,\n            elementsScrollPositions: elementsScrollPositions,\n        }));\n    }).unsubscribe;\n    return {\n        stop: unsubscribe,\n    };\n}\n//# sourceMappingURL=startFullSnapshots.js.map","export function initRecordIds() {\n    var recordIds = new WeakMap();\n    var nextId = 1;\n    return {\n        getIdForEvent: function (event) {\n            if (!recordIds.has(event)) {\n                recordIds.set(event, nextId++);\n            }\n            return recordIds.get(event);\n        },\n    };\n}\n//# sourceMappingURL=recordIds.js.map","import { sendToExtension } from '@datadog/browser-core';\nimport * as replayStats from '../replayStats';\nimport { trackFocus, trackFrustration, trackInput, trackMediaInteraction, trackMouseInteraction, trackMove, trackMutation, trackScroll, trackStyleSheet, trackViewEnd, trackViewportResize, trackVisualViewportResize, } from './trackers';\nimport { createElementsScrollPositions } from './elementsScrollPositions';\nimport { initShadowRootsController } from './shadowRootsController';\nimport { startFullSnapshots } from './startFullSnapshots';\nimport { initRecordIds } from './recordIds';\nexport function record(options) {\n    var emit = options.emit, configuration = options.configuration, lifeCycle = options.lifeCycle;\n    // runtime checks for user options\n    if (!emit) {\n        throw new Error('emit function is required');\n    }\n    var emitAndComputeStats = function (record) {\n        emit(record);\n        sendToExtension('record', { record: record });\n        var view = options.viewContexts.findView();\n        replayStats.addRecord(view.id);\n    };\n    var elementsScrollPositions = createElementsScrollPositions();\n    var shadowRootsController = initShadowRootsController(configuration, emitAndComputeStats, elementsScrollPositions);\n    var stopFullSnapshots = startFullSnapshots(elementsScrollPositions, shadowRootsController, lifeCycle, configuration, flushMutations, function (records) { return records.forEach(function (record) { return emitAndComputeStats(record); }); }).stop;\n    function flushMutations() {\n        shadowRootsController.flush();\n        mutationTracker.flush();\n    }\n    var recordIds = initRecordIds();\n    var mutationTracker = trackMutation(emitAndComputeStats, configuration, shadowRootsController, document);\n    var trackers = [\n        mutationTracker,\n        trackMove(configuration, emitAndComputeStats),\n        trackMouseInteraction(configuration, emitAndComputeStats, recordIds),\n        trackScroll(configuration, emitAndComputeStats, elementsScrollPositions, document),\n        trackViewportResize(configuration, emitAndComputeStats),\n        trackInput(configuration, emitAndComputeStats),\n        trackMediaInteraction(configuration, emitAndComputeStats),\n        trackStyleSheet(emitAndComputeStats),\n        trackFocus(configuration, emitAndComputeStats),\n        trackVisualViewportResize(configuration, emitAndComputeStats),\n        trackFrustration(lifeCycle, emitAndComputeStats, recordIds),\n        trackViewEnd(lifeCycle, function (viewEndRecord) {\n            flushMutations();\n            emitAndComputeStats(viewEndRecord);\n        }),\n    ];\n    return {\n        stop: function () {\n            shadowRootsController.stop();\n            trackers.forEach(function (tracker) { return tracker.stop(); });\n            stopFullSnapshots();\n        },\n        flushMutations: flushMutations,\n        shadowRootsController: shadowRootsController,\n    };\n}\n//# sourceMappingURL=record.js.map","import { assign } from '@datadog/browser-core';\nexport function buildReplayPayload(data, metadata, rawSegmentBytesCount) {\n    var formData = new FormData();\n    formData.append('segment', new Blob([data], {\n        type: 'application/octet-stream',\n    }), \"\".concat(metadata.session.id, \"-\").concat(metadata.start));\n    var metadataAndSegmentSizes = assign({\n        raw_segment_size: rawSegmentBytesCount,\n        compressed_segment_size: data.byteLength,\n    }, metadata);\n    var serializedMetadataAndSegmentSizes = JSON.stringify(metadataAndSegmentSizes);\n    formData.append('event', new Blob([serializedMetadataAndSegmentSizes], { type: 'application/json' }));\n    return { data: formData, bytesCount: data.byteLength };\n}\n//# sourceMappingURL=buildReplayPayload.js.map","import { assign } from '@datadog/browser-core';\nimport { RecordType } from '../../types';\nimport * as replayStats from '../replayStats';\nexport function createSegment(_a) {\n    var context = _a.context, creationReason = _a.creationReason, encoder = _a.encoder;\n    var encodedBytesCount = 0;\n    var viewId = context.view.id;\n    var metadata = assign({\n        start: Infinity,\n        end: -Infinity,\n        creation_reason: creationReason,\n        records_count: 0,\n        has_full_snapshot: false,\n        index_in_view: replayStats.getSegmentsCount(viewId),\n        source: 'browser',\n    }, context);\n    replayStats.addSegment(viewId);\n    function addRecord(record, callback) {\n        metadata.start = Math.min(metadata.start, record.timestamp);\n        metadata.end = Math.max(metadata.end, record.timestamp);\n        metadata.records_count += 1;\n        metadata.has_full_snapshot || (metadata.has_full_snapshot = record.type === RecordType.FullSnapshot);\n        var prefix = encoder.isEmpty ? '{\"records\":[' : ',';\n        encoder.write(prefix + JSON.stringify(record), function (additionalEncodedBytesCount) {\n            encodedBytesCount += additionalEncodedBytesCount;\n            callback(encodedBytesCount);\n        });\n    }\n    function flush(callback) {\n        if (encoder.isEmpty) {\n            throw new Error('Empty segment flushed');\n        }\n        encoder.write(\"],\".concat(JSON.stringify(metadata).slice(1), \"\\n\"));\n        encoder.finish(function (encoderResult) {\n            replayStats.addWroteData(metadata.view.id, encoderResult.rawBytesCount);\n            callback(metadata, encoderResult);\n        });\n    }\n    return { addRecord: addRecord, flush: flush };\n}\n//# sourceMappingURL=segment.js.map","import { isPageExitReason, ONE_SECOND, clearTimeout, setTimeout } from '@datadog/browser-core';\nimport { buildReplayPayload } from './buildReplayPayload';\nimport { createSegment } from './segment';\nexport var SEGMENT_DURATION_LIMIT = 30 * ONE_SECOND;\n/**\n * beacon payload max queue size implementation is 64kb\n * ensure that we leave room for logs, rum and potential other users\n */\nexport var SEGMENT_BYTES_LIMIT = 60000;\n// Segments are the main data structure for session replays. They contain context information used\n// for indexing or UI needs, and a list of records (RRWeb 'events', renamed to avoid confusing\n// namings). They are stored without any processing from the intake, and fetched one after the\n// other while a session is being replayed. Their encoding (deflate) are carefully crafted to allow\n// concatenating multiple segments together. Segments have a size overhead (metadata), so our goal is to\n// build segments containing as many records as possible while complying with the various flush\n// strategies to guarantee a good replay quality.\n//\n// When the recording starts, a segment is initially created.  The segment is flushed (finalized and\n// sent) based on various events (non-exhaustive list):\n//\n// * the page visibility change or becomes to unload\n// * the segment duration reaches a limit\n// * the encoded segment bytes count reaches a limit\n// * ...\n//\n// A segment cannot be created without its context.  If the RUM session ends and no session id is\n// available when creating a new segment, records will be ignored, until the session is renewed and\n// a new session id is available.\n//\n// Empty segments (segments with no record) aren't useful and should be ignored.\n//\n// To help investigate session replays issues, each segment is created with a \"creation reason\",\n// indicating why the session has been created.\nexport function startSegmentCollection(lifeCycle, configuration, sessionManager, viewContexts, httpRequest, encoder) {\n    return doStartSegmentCollection(lifeCycle, function () { return computeSegmentContext(configuration.applicationId, sessionManager, viewContexts); }, httpRequest, encoder);\n}\nexport function doStartSegmentCollection(lifeCycle, getSegmentContext, httpRequest, encoder) {\n    var state = {\n        status: 0 /* SegmentCollectionStatus.WaitingForInitialRecord */,\n        nextSegmentCreationReason: 'init',\n    };\n    var unsubscribeViewCreated = lifeCycle.subscribe(3 /* LifeCycleEventType.VIEW_CREATED */, function () {\n        flushSegment('view_change');\n    }).unsubscribe;\n    var unsubscribePageExited = lifeCycle.subscribe(11 /* LifeCycleEventType.PAGE_EXITED */, function (pageExitEvent) {\n        flushSegment(pageExitEvent.reason);\n    }).unsubscribe;\n    function flushSegment(flushReason) {\n        if (state.status === 1 /* SegmentCollectionStatus.SegmentPending */) {\n            state.segment.flush(function (metadata, encoderResult) {\n                var payload = buildReplayPayload(encoderResult.output, metadata, encoderResult.rawBytesCount);\n                if (isPageExitReason(flushReason)) {\n                    httpRequest.sendOnExit(payload);\n                }\n                else {\n                    httpRequest.send(payload);\n                }\n            });\n            clearTimeout(state.expirationTimeoutId);\n        }\n        if (flushReason !== 'stop') {\n            state = {\n                status: 0 /* SegmentCollectionStatus.WaitingForInitialRecord */,\n                nextSegmentCreationReason: flushReason,\n            };\n        }\n        else {\n            state = {\n                status: 2 /* SegmentCollectionStatus.Stopped */,\n            };\n        }\n    }\n    return {\n        addRecord: function (record) {\n            if (state.status === 2 /* SegmentCollectionStatus.Stopped */) {\n                return;\n            }\n            if (state.status === 0 /* SegmentCollectionStatus.WaitingForInitialRecord */) {\n                var context = getSegmentContext();\n                if (!context) {\n                    return;\n                }\n                state = {\n                    status: 1 /* SegmentCollectionStatus.SegmentPending */,\n                    segment: createSegment({ encoder: encoder, context: context, creationReason: state.nextSegmentCreationReason }),\n                    expirationTimeoutId: setTimeout(function () {\n                        flushSegment('segment_duration_limit');\n                    }, SEGMENT_DURATION_LIMIT),\n                };\n            }\n            state.segment.addRecord(record, function (encodedBytesCount) {\n                if (encodedBytesCount > SEGMENT_BYTES_LIMIT) {\n                    flushSegment('segment_bytes_limit');\n                }\n            });\n        },\n        stop: function () {\n            flushSegment('stop');\n            unsubscribeViewCreated();\n            unsubscribePageExited();\n        },\n    };\n}\nexport function computeSegmentContext(applicationId, sessionManager, viewContexts) {\n    var session = sessionManager.findTrackedSession();\n    var viewContext = viewContexts.findView();\n    if (!session || !viewContext) {\n        return undefined;\n    }\n    return {\n        application: {\n            id: applicationId,\n        },\n        session: {\n            id: session.id,\n        },\n        view: {\n            id: viewContext.id,\n        },\n    };\n}\nexport function setSegmentBytesLimit(newSegmentBytesLimit) {\n    if (newSegmentBytesLimit === void 0) { newSegmentBytesLimit = 60000; }\n    SEGMENT_BYTES_LIMIT = newSegmentBytesLimit;\n}\n//# sourceMappingURL=segmentCollection.js.map","import { getEventBridge } from '@datadog/browser-core';\nexport function startRecordBridge(viewContexts) {\n    var bridge = getEventBridge();\n    return {\n        addRecord: function (record) {\n            // Get the current active view, not at the time of the record, aligning with the segment logic.\n            // This approach could potentially associate the record to an incorrect view, in case the record date is in the past (e.g. frustration records).\n            // However the risk is minimal. We could address the issue when potential negative impact are identified.\n            var view = viewContexts.findView();\n            bridge.send('record', record, view.id);\n        },\n    };\n}\n//# sourceMappingURL=startRecordBridge.js.map","import { createHttpRequest, addTelemetryDebug, canUseEventBridge } from '@datadog/browser-core';\nimport { record } from '../domain/record';\nimport { startSegmentCollection, SEGMENT_BYTES_LIMIT } from '../domain/segmentCollection';\nimport { startRecordBridge } from '../domain/startRecordBridge';\nexport function startRecording(lifeCycle, configuration, sessionManager, viewContexts, encoder, httpRequest) {\n    var cleanupTasks = [];\n    var reportError = function (error) {\n        lifeCycle.notify(14 /* LifeCycleEventType.RAW_ERROR_COLLECTED */, { error: error });\n        addTelemetryDebug('Error reported to customer', { 'error.message': error.message });\n    };\n    var replayRequest = httpRequest ||\n        createHttpRequest(configuration, configuration.sessionReplayEndpointBuilder, SEGMENT_BYTES_LIMIT, reportError);\n    var addRecord;\n    if (!canUseEventBridge()) {\n        var segmentCollection = startSegmentCollection(lifeCycle, configuration, sessionManager, viewContexts, replayRequest, encoder);\n        addRecord = segmentCollection.addRecord;\n        cleanupTasks.push(segmentCollection.stop);\n    }\n    else {\n        ;\n        (addRecord = startRecordBridge(viewContexts).addRecord);\n    }\n    var stopRecording = record({\n        emit: addRecord,\n        configuration: configuration,\n        lifeCycle: lifeCycle,\n        viewContexts: viewContexts,\n    }).stop;\n    cleanupTasks.push(stopRecording);\n    return {\n        stop: function () {\n            cleanupTasks.forEach(function (task) { return task(); });\n        },\n    };\n}\n//# sourceMappingURL=startRecording.js.map","/**\n * Test for Browser features used while recording\n */\nexport function isBrowserSupported() {\n    return (\n    // Array.from is a bit less supported by browsers than CSSSupportsRule, but has higher chances\n    // to be polyfilled. Test for both to be more confident. We could add more things if we find out\n    // this test is not sufficient.\n    typeof Array.from === 'function' &&\n        typeof CSSSupportsRule === 'function' &&\n        typeof URL.createObjectURL === 'function' &&\n        'forEach' in NodeList.prototype);\n}\n//# sourceMappingURL=isBrowserSupported.js.map","import { getSessionReplayUrl } from '@datadog/browser-rum-core';\nimport { isBrowserSupported } from '../boot/isBrowserSupported';\nexport function getSessionReplayLink(configuration, sessionManager, viewContexts, isRecordingStarted) {\n    var session = sessionManager.findTrackedSession();\n    var errorType = getErrorType(session, isRecordingStarted);\n    var viewContext = viewContexts.findView();\n    return getSessionReplayUrl(configuration, {\n        viewContext: viewContext,\n        errorType: errorType,\n        session: session,\n    });\n}\nfunction getErrorType(session, isRecordingStarted) {\n    if (!isBrowserSupported()) {\n        return 'browser-not-supported';\n    }\n    if (!session) {\n        // possibilities:\n        // - rum sampled out\n        // - session expired (edge case)\n        return 'rum-not-tracked';\n    }\n    if (session.sessionReplay === 0 /* SessionReplayState.OFF */) {\n        // possibilities\n        // - replay sampled out\n        return 'incorrect-session-plan';\n    }\n    if (!isRecordingStarted) {\n        return 'replay-not-started';\n    }\n}\n//# sourceMappingURL=getSessionReplayLink.js.map","import { addEventListener, addTelemetryDebug, assign, concatBuffers } from '@datadog/browser-core';\nexport function createDeflateEncoder(configuration, worker, streamId) {\n    var rawBytesCount = 0;\n    var compressedData = [];\n    var compressedDataTrailer;\n    var nextWriteActionId = 0;\n    var pendingWriteActions = [];\n    var removeMessageListener = addEventListener(configuration, worker, 'message', function (_a) {\n        var workerResponse = _a.data;\n        if (workerResponse.type !== 'wrote' || workerResponse.streamId !== streamId) {\n            return;\n        }\n        rawBytesCount += workerResponse.additionalBytesCount;\n        compressedData.push(workerResponse.result);\n        compressedDataTrailer = workerResponse.trailer;\n        var nextPendingAction = pendingWriteActions.shift();\n        if (nextPendingAction && nextPendingAction.id === workerResponse.id) {\n            if (nextPendingAction.writeCallback) {\n                nextPendingAction.writeCallback(workerResponse.result.byteLength);\n            }\n            else if (nextPendingAction.finishCallback) {\n                nextPendingAction.finishCallback();\n            }\n        }\n        else {\n            removeMessageListener();\n            addTelemetryDebug('Worker responses received out of order.');\n        }\n    }).stop;\n    function consumeResult() {\n        var output = compressedData.length === 0 ? new Uint8Array(0) : concatBuffers(compressedData.concat(compressedDataTrailer));\n        var result = {\n            rawBytesCount: rawBytesCount,\n            output: output,\n            outputBytesCount: output.byteLength,\n            encoding: 'deflate',\n        };\n        rawBytesCount = 0;\n        compressedData = [];\n        return result;\n    }\n    function sendResetIfNeeded() {\n        if (nextWriteActionId > 0) {\n            worker.postMessage({\n                action: 'reset',\n                streamId: streamId,\n            });\n            nextWriteActionId = 0;\n        }\n    }\n    return {\n        isAsync: true,\n        get isEmpty() {\n            return nextWriteActionId === 0;\n        },\n        write: function (data, callback) {\n            worker.postMessage({\n                action: 'write',\n                id: nextWriteActionId,\n                data: data,\n                streamId: streamId,\n            });\n            pendingWriteActions.push({\n                id: nextWriteActionId,\n                writeCallback: callback,\n                data: data,\n            });\n            nextWriteActionId += 1;\n        },\n        finish: function (callback) {\n            sendResetIfNeeded();\n            if (!pendingWriteActions.length) {\n                callback(consumeResult());\n            }\n            else {\n                // Make sure we do not call any write callback\n                pendingWriteActions.forEach(function (pendingWriteAction) {\n                    delete pendingWriteAction.writeCallback;\n                });\n                // Wait for the last action to finish before calling the finish callback\n                pendingWriteActions[pendingWriteActions.length - 1].finishCallback = function () { return callback(consumeResult()); };\n            }\n        },\n        finishSync: function () {\n            sendResetIfNeeded();\n            var pendingData = pendingWriteActions\n                .map(function (pendingWriteAction) {\n                // Make sure we do not call any write or finish callback\n                delete pendingWriteAction.writeCallback;\n                delete pendingWriteAction.finishCallback;\n                return pendingWriteAction.data;\n            })\n                .join('');\n            return assign(consumeResult(), {\n                pendingData: pendingData,\n            });\n        },\n        estimateEncodedBytesCount: function (data) {\n            // This is a rough estimation of the data size once it'll be encoded by deflate. We observed\n            // that if it's the first chunk of data pushed to the stream, the ratio is lower (3-4), but\n            // after that the ratio is greater (10+). We chose 8 here, which (on average) seems to produce\n            // requests of the expected size.\n            return data.length / 8;\n        },\n        stop: function () {\n            removeMessageListener();\n        },\n    };\n}\n//# sourceMappingURL=deflateEncoder.js.map","import { addTelemetryError, display, includes, addEventListener, setTimeout, ONE_SECOND, DOCS_ORIGIN, } from '@datadog/browser-core';\nexport var INITIALIZATION_TIME_OUT_DELAY = 10 * ONE_SECOND;\nfunction createDeflateWorker(configuration) {\n    return new Worker(configuration.workerUrl || URL.createObjectURL(new Blob([\"!function(){\\\"use strict\\\";function t(t){for(var e=t.reduce((function(t,e){return t+e.length}),0),a=new Uint8Array(e),n=0,r=0,i=t;r<i.length;r++){var s=i[r];a.set(s,n),n+=s.length}return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,n=286,r=30,i=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);var d=new Array(60);e(d);var u=new Array(512);e(u);var f=new Array(256);e(f);var c=new Array(29);e(c);var p,g,w,v=new Array(r);function b(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(v);var y=function(t){return t<256?u[t]:u[256+(t>>>7)]},k=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,k(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},x=function(t,e,a){z(t,a[2*e],a[2*e+1])},A=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},E=function(t,e,a){var n,r,s=new Array(16),_=0;for(n=1;n<=i;n++)s[n]=_=_+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=A(s[h]++,h))}},Z=function(t){var e;for(e=0;e<n;e++)t.dyn_ltree[2*e]=0;for(e=0;e<r;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},U=function(t){t.bi_valid>8?k(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},R=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&S(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!S(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},L=function(t,e,n){var r,i,h,l,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?x(t,i,e):(h=f[i],x(t,h+a+1,e),0!==(l=s[h])&&(i-=c[h],z(t,i,l)),r--,h=y(r),x(t,h,n),0!==(l=_[h])&&(r-=v[h],z(t,r,l)))}while(o<t.last_lit);x(t,256,e)},F=function(t,e){var a,n,r,s=e.dyn_tree,_=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==s[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):s[2*a+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=_[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)R(t,s,a);r=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],R(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,s[2*r]=s[2*a]+s[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,s[2*a+1]=s[2*n+1]=r,t.heap[1]=r++,R(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,s,_,h,l=e.dyn_tree,o=e.max_code,d=e.stat_desc.static_tree,u=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=i;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(s=l[2*l[2*(n=t.heap[a])+1]+1]+1)>p&&(s=p,g++),l[2*n+1]=s,n>o||(t.bl_count[s]++,_=0,n>=c&&(_=f[n-c]),h=l[2*n],t.opt_len+=h*(s+_),u&&(t.static_len+=h*(d[2*n+1]+_)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--a])>o||(l[2*r+1]!==s&&(t.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),n--)}}(t,e),E(s,o,t.bl_count)},T=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++_<h&&r===s||(_<l?t.bl_tree[2*r]+=_:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):_<=10?t.bl_tree[34]++:t.bl_tree[36]++,_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))},I=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++_<h&&r===s)){if(_<l)do{x(t,r,t.bl_tree)}while(0!=--_);else 0!==r?(r!==i&&(x(t,r,t.bl_tree),_--),x(t,16,t.bl_tree),z(t,_-3,2)):_<=10?(x(t,17,t.bl_tree),z(t,_-3,3)):(x(t,18,t.bl_tree),z(t,_-11,7));_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4)}},N=!1,O=function(t,e,a,n){z(t,0+(n?1:0),3),function(t,e,a,n){U(t),n&&(k(t,a),k(t,~a)),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a,!0)},D=function(t,e,n,r){var i,s,_=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),F(t,t.l_desc),F(t,t.d_desc),_=function(t){var e;for(T(t,t.dyn_ltree,t.l_desc.max_code),T(t,t.dyn_dtree,t.d_desc.max_code),F(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?O(t,e,n,r):4===t.strategy||s===i?(z(t,2+(r?1:0),3),L(t,o,d)):(z(t,4+(r?1:0),3),function(t,e,a,n){var r;for(z(t,e-257,5),z(t,a-1,5),z(t,n-4,4),r=0;r<n;r++)z(t,t.bl_tree[2*l[r]+1],3);I(t,t.dyn_ltree,e-1),I(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,_+1),L(t,t.dyn_ltree,t.dyn_dtree)),Z(t),r&&U(t)},B={_tr_init:function(t){N||(!function(){var t,e,a,l,m,y=new Array(16);for(a=0,l=0;l<28;l++)for(c[l]=a,t=0;t<1<<s[l];t++)f[a++]=l;for(f[a-1]=l,m=0,l=0;l<16;l++)for(v[l]=m,t=0;t<1<<_[l];t++)u[m++]=l;for(m>>=7;l<r;l++)for(v[l]=m<<7,t=0;t<1<<_[l]-7;t++)u[256+m++]=l;for(e=0;e<=i;e++)y[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,y[8]++;for(;t<=255;)o[2*t+1]=9,t++,y[9]++;for(;t<=279;)o[2*t+1]=7,t++,y[7]++;for(;t<=287;)o[2*t+1]=8,t++,y[8]++;for(E(o,287,y),t=0;t<r;t++)d[2*t+1]=5,d[2*t]=A(t,5);p=new b(o,s,257,n,i),g=new b(d,_,0,r,i),w=new b(new Array(0),h,0,19,7)}(),N=!0),t.l_desc=new m(t.dyn_ltree,p),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,Z(t)},_tr_stored_block:O,_tr_flush_block:D,_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+a+1)]++,t.dyn_dtree[2*y(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){z(t,2,3),x(t,256,o),function(t){16===t.bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},C=function(t,e,a,n){for(var r=65535&t|0,i=t>>>16&65535|0,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16|0},H=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),M=function(t,e,a,n){var r=H,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},Y={2:\\\"need dictionary\\\",1:\\\"stream end\\\",0:\\\"\\\",\\\"-1\\\":\\\"file error\\\",\\\"-2\\\":\\\"stream error\\\",\\\"-3\\\":\\\"data error\\\",\\\"-4\\\":\\\"insufficient memory\\\",\\\"-5\\\":\\\"buffer error\\\",\\\"-6\\\":\\\"incompatible version\\\"},K={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},P=B._tr_init,j=B._tr_stored_block,G=B._tr_flush_block,X=B._tr_tally,W=B._tr_align,q=K.Z_NO_FLUSH,J=K.Z_PARTIAL_FLUSH,Q=K.Z_FULL_FLUSH,V=K.Z_FINISH,$=K.Z_BLOCK,tt=K.Z_OK,et=K.Z_STREAM_END,at=K.Z_STREAM_ERROR,nt=K.Z_DATA_ERROR,rt=K.Z_BUF_ERROR,it=K.Z_DEFAULT_COMPRESSION,st=K.Z_FILTERED,_t=K.Z_HUFFMAN_ONLY,ht=K.Z_RLE,lt=K.Z_FIXED,ot=K.Z_DEFAULT_STRATEGY,dt=K.Z_UNKNOWN,ut=K.Z_DEFLATED,ft=258,ct=262,pt=103,gt=113,wt=666,vt=function(t,e){return t.msg=Y[e],e},bt=function(t){return(t<<1)-(t>4?9:0)},mt=function(t){for(var e=t.length;--e>=0;)t[e]=0},yt=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},kt=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},zt=function(t,e){G(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,kt(t.strm)},xt=function(t,e){t.pending_buf[t.pending++]=e},At=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Et=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,_=t.nice_match,h=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,l=t.window,o=t.w_mask,d=t.prev,u=t.strstart+ft,f=l[i+s-1],c=l[i+s];t.prev_length>=t.good_match&&(r>>=2),_>t.lookahead&&(_=t.lookahead);do{if(l[(a=e)+s]===c&&l[a+s-1]===f&&l[a]===l[i]&&l[++a]===l[i+1]){i+=2,a++;do{}while(l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&i<u);if(n=ft-(u-i),i=u-ft,n>s){if(t.match_start=e,s=n,n>=_)break;f=l[i+s-1],c=l[i+s]}}}while((e=d[e&o])>h&&0!=--r);return s<=t.lookahead?s:t.lookahead},Zt=function(t){var e,a,n,r,i,s,_,h,l,o,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-ct)){t.window.set(t.window.subarray(d,d+d),0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--a);e=a=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--a);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,_=t.window,h=t.strstart+t.lookahead,l=r,o=void 0,(o=s.avail_in)>l&&(o=l),a=0===o?0:(s.avail_in-=o,_.set(s.input.subarray(s.next_in,s.next_in+o),h),1===s.state.wrap?s.adler=C(s.adler,_,o,h):2===s.state.wrap&&(s.adler=M(s.adler,_,o,h)),s.next_in+=o,s.total_in+=o,o),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=yt(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=yt(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ct&&0!==t.strm.avail_in)},Ut=function(t,e){for(var a,n;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a)),t.match_length>=3)if(n=X(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=yt(t,t.ins_h,t.window[t.strstart+1]);else n=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2},St=function(t,e){for(var a,n,r;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a),t.match_length<=5&&(t.strategy===st||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=X(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(zt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=X(t,0,t.window[t.strstart-1]))&&zt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=X(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2};function Rt(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var Lt=[new Rt(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Zt(t),0===t.lookahead&&e===q)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,zt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-ct&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(zt(t,!1),t.strm.avail_out),1)})),new Rt(4,4,8,4,Ut),new Rt(4,5,16,8,Ut),new Rt(4,6,32,32,Ut),new Rt(4,4,16,16,St),new Rt(8,16,32,32,St),new Rt(8,16,128,128,St),new Rt(8,32,128,256,St),new Rt(32,128,258,1024,St),new Rt(32,258,258,4096,St)];function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Tt=function(t){if(!t||!t.state)return vt(t,at);t.total_in=t.total_out=0,t.data_type=dt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:gt,t.adler=2===e.wrap?0:1,e.last_flush=q,P(e),tt},It=function(t){var e,a=Tt(t);return a===tt&&((e=t.state).window_size=2*e.w_size,mt(e.head),e.max_lazy_match=Lt[e.level].max_lazy,e.good_match=Lt[e.level].good_length,e.nice_match=Lt[e.level].nice_length,e.max_chain_length=Lt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a},Nt=function(t,e,a,n,r,i){if(!t)return at;var s=1;if(e===it&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||a!==ut||n<8||n>15||e<0||e>9||i<0||i>lt)return vt(t,at);8===n&&(n=9);var _=new Ft;return t.state=_,_.strm=t,_.wrap=s,_.gzhead=null,_.w_bits=n,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=r+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+3-1)/3),_.window=new Uint8Array(2*_.w_size),_.head=new Uint16Array(_.hash_size),_.prev=new Uint16Array(_.w_size),_.lit_bufsize=1<<r+6,_.pending_buf_size=4*_.lit_bufsize,_.pending_buf=new Uint8Array(_.pending_buf_size),_.d_buf=1*_.lit_bufsize,_.l_buf=3*_.lit_bufsize,_.level=e,_.strategy=i,_.method=a,It(t)},Ot={deflateInit:function(t,e){return Nt(t,e,ut,15,8,ot)},deflateInit2:Nt,deflateReset:It,deflateResetKeep:Tt,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?at:(t.state.gzhead=e,tt):at},deflate:function(t,e){var a,n;if(!t||!t.state||e>$||e<0)return t?vt(t,at):at;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===wt&&e!==V)return vt(t,0===t.avail_out?rt:at);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,xt(r,31),xt(r,139),xt(r,8),r.gzhead?(xt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),xt(r,255&r.gzhead.time),xt(r,r.gzhead.time>>8&255),xt(r,r.gzhead.time>>16&255),xt(r,r.gzhead.time>>24&255),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(xt(r,255&r.gzhead.extra.length),xt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=M(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,3),r.status=gt);else{var s=ut+(r.w_bits-8<<4)<<8;s|=(r.strategy>=_t||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=gt,At(r,s),0!==r.strstart&&(At(r,t.adler>>>16),At(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending!==r.pending_buf_size));)xt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=pt)}else r.status=pt;if(r.status===pt&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&kt(t),r.pending+2<=r.pending_buf_size&&(xt(r,255&t.adler),xt(r,t.adler>>8&255),t.adler=0,r.status=gt)):r.status=gt),0!==r.pending){if(kt(t),0===t.avail_out)return r.last_flush=-1,tt}else if(0===t.avail_in&&bt(e)<=bt(i)&&e!==V)return vt(t,rt);if(r.status===wt&&0!==t.avail_in)return vt(t,rt);if(0!==t.avail_in||0!==r.lookahead||e!==q&&r.status!==wt){var _=r.strategy===_t?function(t,e){for(var a;;){if(0===t.lookahead&&(Zt(t),0===t.lookahead)){if(e===q)return 1;break}if(t.match_length=0,a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):r.strategy===ht?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=ft){if(Zt(t),t.lookahead<=ft&&e===q)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+ft;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=ft-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=X(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):Lt[r.level].func(r,e);if(3!==_&&4!==_||(r.status=wt),1===_||3===_)return 0===t.avail_out&&(r.last_flush=-1),tt;if(2===_&&(e===J?W(r):e!==$&&(j(r,0,0,!1),e===Q&&(mt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),kt(t),0===t.avail_out))return r.last_flush=-1,tt}return e!==V?tt:r.wrap<=0?et:(2===r.wrap?(xt(r,255&t.adler),xt(r,t.adler>>8&255),xt(r,t.adler>>16&255),xt(r,t.adler>>24&255),xt(r,255&t.total_in),xt(r,t.total_in>>8&255),xt(r,t.total_in>>16&255),xt(r,t.total_in>>24&255)):(At(r,t.adler>>>16),At(r,65535&t.adler)),kt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?tt:et)},deflateEnd:function(t){if(!t||!t.state)return at;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==pt&&e!==gt&&e!==wt?vt(t,at):(t.state=null,e===gt?vt(t,nt):tt)},deflateSetDictionary:function(t,e){var a=e.length;if(!t||!t.state)return at;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return at;if(1===r&&(t.adler=C(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(mt(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,_=t.next_in,h=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Zt(n);n.lookahead>=3;){var l=n.strstart,o=n.lookahead-2;do{n.ins_h=yt(n,n.ins_h,n.window[l+3-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++}while(--o);n.strstart=l,n.lookahead=2,Zt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=_,t.input=h,t.avail_in=s,n.wrap=r,tt},deflateInfo:\\\"pako deflate (from Nodeca project)\\\"};for(var Dt=new Uint8Array(256),Bt=0;Bt<256;Bt++)Dt[Bt]=Bt>=252?6:Bt>=248?5:Bt>=240?4:Bt>=224?3:Bt>=192?2:1;Dt[254]=Dt[254]=1;var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\\\"\\\",this.state=null,this.data_type=2,this.adler=0},Ht=Object.prototype.toString,Mt=K.Z_NO_FLUSH,Yt=K.Z_SYNC_FLUSH,Kt=K.Z_FULL_FLUSH,Pt=K.Z_FINISH,jt=K.Z_OK,Gt=K.Z_STREAM_END,Xt=K.Z_DEFAULT_COMPRESSION,Wt=K.Z_DEFAULT_STRATEGY,qt=K.Z_DEFLATED;function Jt(){this.options={level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg=\\\"\\\",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;var e=Ot.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==jt)throw new Error(Y[e]);if(t.header&&Ot.deflateSetHeader(this.strm,t.header),t.dictionary){var a;if(a=\\\"[object ArrayBuffer]\\\"===Ht.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=Ot.deflateSetDictionary(this.strm,a))!==jt)throw new Error(Y[e]);this._dict_set=!0}}function Qt(t,e,a){try{t.postMessage({type:\\\"errored\\\",error:e,streamId:a})}catch(n){t.postMessage({type:\\\"errored\\\",error:String(e),streamId:a})}}function Vt(t){var e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}Jt.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?Pt:Mt,\\\"[object ArrayBuffer]\\\"===Ht.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(n===Yt||n===Kt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if((a=Ot.deflate(r,n))===Gt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Ot.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===jt;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===jt&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,_=t.length;i<_;i++){var h=t[i];r.set(h,s),s+=h.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e){void 0===e&&(e=self);try{var a=new Map;e.addEventListener(\\\"message\\\",(function(n){try{var r=function(e,a){switch(a.action){case\\\"init\\\":return{type:\\\"initialized\\\",version:\\\"5.23.3\\\"};case\\\"write\\\":var n=e.get(a.streamId);n||(n=new Jt,e.set(a.streamId,n));var r=n.chunks.length,i=function(t){if(\\\"function\\\"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var e,a,n,r,i,s=t.length,_=0;for(r=0;r<s;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),_+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(_),i=0,r=0;i<_;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,K.Z_SYNC_FLUSH),{type:\\\"wrote\\\",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:Vt(n),additionalBytesCount:i.length};case\\\"reset\\\":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){Qt(e,t,n.data&&\\\"streamId\\\"in n.data?n.data.streamId:void 0)}}))}catch(t){Qt(e,t)}}()}();\"])));\n}\nvar state = { status: 0 /* DeflateWorkerStatus.Nil */ };\nexport function startDeflateWorker(configuration, source, onInitializationFailure, createDeflateWorkerImpl) {\n    if (createDeflateWorkerImpl === void 0) { createDeflateWorkerImpl = createDeflateWorker; }\n    if (state.status === 0 /* DeflateWorkerStatus.Nil */) {\n        // doStartDeflateWorker updates the state to \"loading\" or \"error\"\n        doStartDeflateWorker(configuration, source, createDeflateWorkerImpl);\n    }\n    switch (state.status) {\n        case 1 /* DeflateWorkerStatus.Loading */:\n            state.initializationFailureCallbacks.push(onInitializationFailure);\n            return state.worker;\n        case 3 /* DeflateWorkerStatus.Initialized */:\n            return state.worker;\n    }\n}\nexport function resetDeflateWorkerState() {\n    if (state.status === 3 /* DeflateWorkerStatus.Initialized */ || state.status === 1 /* DeflateWorkerStatus.Loading */) {\n        state.stop();\n    }\n    state = { status: 0 /* DeflateWorkerStatus.Nil */ };\n}\nexport function getDeflateWorkerStatus() {\n    return state.status;\n}\n/**\n * Starts the deflate worker and handle messages and errors\n *\n * The spec allow browsers to handle worker errors differently:\n * - Chromium throws an exception\n * - Firefox fires an error event\n *\n * more details: https://bugzilla.mozilla.org/show_bug.cgi?id=1736865#c2\n */\nexport function doStartDeflateWorker(configuration, source, createDeflateWorkerImpl) {\n    if (createDeflateWorkerImpl === void 0) { createDeflateWorkerImpl = createDeflateWorker; }\n    try {\n        var worker = createDeflateWorkerImpl(configuration);\n        var removeErrorListener_1 = addEventListener(configuration, worker, 'error', function (error) {\n            onError(configuration, source, error);\n        }).stop;\n        var removeMessageListener_1 = addEventListener(configuration, worker, 'message', function (_a) {\n            var data = _a.data;\n            if (data.type === 'errored') {\n                onError(configuration, source, data.error, data.streamId);\n            }\n            else if (data.type === 'initialized') {\n                onInitialized(data.version);\n            }\n        }).stop;\n        worker.postMessage({ action: 'init' });\n        setTimeout(function () { return onTimeout(source); }, INITIALIZATION_TIME_OUT_DELAY);\n        var stop_1 = function () {\n            removeErrorListener_1();\n            removeMessageListener_1();\n        };\n        state = { status: 1 /* DeflateWorkerStatus.Loading */, worker: worker, stop: stop_1, initializationFailureCallbacks: [] };\n    }\n    catch (error) {\n        onError(configuration, source, error);\n    }\n}\nfunction onTimeout(source) {\n    if (state.status === 1 /* DeflateWorkerStatus.Loading */) {\n        display.error(\"\".concat(source, \" failed to start: a timeout occurred while initializing the Worker\"));\n        state.initializationFailureCallbacks.forEach(function (callback) { return callback(); });\n        state = { status: 2 /* DeflateWorkerStatus.Error */ };\n    }\n}\nfunction onInitialized(version) {\n    if (state.status === 1 /* DeflateWorkerStatus.Loading */) {\n        state = { status: 3 /* DeflateWorkerStatus.Initialized */, worker: state.worker, stop: state.stop, version: version };\n    }\n}\nfunction onError(configuration, source, error, streamId) {\n    if (state.status === 1 /* DeflateWorkerStatus.Loading */ || state.status === 0 /* DeflateWorkerStatus.Nil */) {\n        display.error(\"\".concat(source, \" failed to start: an error occurred while creating the Worker:\"), error);\n        if (error instanceof Event || (error instanceof Error && isMessageCspRelated(error.message))) {\n            var baseMessage = void 0;\n            if (configuration.workerUrl) {\n                baseMessage = \"Please make sure the Worker URL \".concat(configuration.workerUrl, \" is correct and CSP is correctly configured.\");\n            }\n            else {\n                baseMessage = 'Please make sure CSP is correctly configured.';\n            }\n            display.error(\"\".concat(baseMessage, \" See documentation at \").concat(DOCS_ORIGIN, \"/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay\"));\n        }\n        else {\n            addTelemetryError(error);\n        }\n        if (state.status === 1 /* DeflateWorkerStatus.Loading */) {\n            state.initializationFailureCallbacks.forEach(function (callback) { return callback(); });\n        }\n        state = { status: 2 /* DeflateWorkerStatus.Error */ };\n    }\n    else {\n        addTelemetryError(error, {\n            worker_version: state.status === 3 /* DeflateWorkerStatus.Initialized */ && state.version,\n            stream_id: streamId,\n        });\n    }\n}\nfunction isMessageCspRelated(message) {\n    return (includes(message, 'Content Security Policy') ||\n        // Related to `require-trusted-types-for` CSP: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/require-trusted-types-for\n        includes(message, \"requires 'TrustedScriptURL'\"));\n}\n//# sourceMappingURL=deflateWorker.js.map","import { canUseEventBridge, noop, runOnReadyState, PageExitReason, bridgeSupports, } from '@datadog/browser-core';\nimport { getReplayStats as getReplayStatsImpl } from '../domain/replayStats';\nimport { getSessionReplayLink } from '../domain/getSessionReplayLink';\nimport { createDeflateEncoder, startDeflateWorker, getDeflateWorkerStatus, } from '../domain/deflate';\nimport { isBrowserSupported } from './isBrowserSupported';\nexport function makeRecorderApi(startRecordingImpl, createDeflateWorkerImpl) {\n    if ((canUseEventBridge() && !bridgeSupports(\"records\" /* BridgeCapability.RECORDS */)) || !isBrowserSupported()) {\n        return {\n            start: noop,\n            stop: noop,\n            getReplayStats: function () { return undefined; },\n            onRumStart: noop,\n            isRecording: function () { return false; },\n            getSessionReplayLink: function () { return undefined; },\n        };\n    }\n    var state = {\n        status: 1 /* RecorderStatus.IntentToStart */,\n    };\n    var startStrategy = function () {\n        state = { status: 1 /* RecorderStatus.IntentToStart */ };\n    };\n    var stopStrategy = function () {\n        state = { status: 0 /* RecorderStatus.Stopped */ };\n    };\n    var getSessionReplayLinkStrategy = noop;\n    return {\n        start: function (options) { return startStrategy(options); },\n        stop: function () { return stopStrategy(); },\n        getSessionReplayLink: function () { return getSessionReplayLinkStrategy(); },\n        onRumStart: function (lifeCycle, configuration, sessionManager, viewContexts, worker) {\n            if (configuration.startSessionReplayRecordingManually) {\n                state = { status: 0 /* RecorderStatus.Stopped */ };\n            }\n            lifeCycle.subscribe(9 /* LifeCycleEventType.SESSION_EXPIRED */, function () {\n                if (state.status === 2 /* RecorderStatus.Starting */ || state.status === 3 /* RecorderStatus.Started */) {\n                    stopStrategy();\n                    state = { status: 1 /* RecorderStatus.IntentToStart */ };\n                }\n            });\n            // Stop the recorder on page unload to avoid sending records after the page is ended.\n            lifeCycle.subscribe(11 /* LifeCycleEventType.PAGE_EXITED */, function (pageExitEvent) {\n                if (pageExitEvent.reason === PageExitReason.UNLOADING) {\n                    stopStrategy();\n                }\n            });\n            lifeCycle.subscribe(10 /* LifeCycleEventType.SESSION_RENEWED */, function () {\n                if (state.status === 1 /* RecorderStatus.IntentToStart */) {\n                    startStrategy();\n                }\n            });\n            var cachedDeflateEncoder;\n            function getOrCreateDeflateEncoder() {\n                if (!cachedDeflateEncoder) {\n                    if (!worker) {\n                        worker = startDeflateWorker(configuration, 'Datadog Session Replay', function () {\n                            stopStrategy();\n                        }, createDeflateWorkerImpl);\n                    }\n                    if (worker) {\n                        cachedDeflateEncoder = createDeflateEncoder(configuration, worker, 1 /* DeflateEncoderStreamId.REPLAY */);\n                    }\n                }\n                return cachedDeflateEncoder;\n            }\n            startStrategy = function (options) {\n                var session = sessionManager.findTrackedSession();\n                if (!session || (session.sessionReplay === 0 /* SessionReplayState.OFF */ && (!options || !options.force))) {\n                    state = { status: 1 /* RecorderStatus.IntentToStart */ };\n                    return;\n                }\n                if (state.status === 2 /* RecorderStatus.Starting */ || state.status === 3 /* RecorderStatus.Started */) {\n                    return;\n                }\n                state = { status: 2 /* RecorderStatus.Starting */ };\n                runOnReadyState(configuration, 'interactive', function () {\n                    if (state.status !== 2 /* RecorderStatus.Starting */) {\n                        return;\n                    }\n                    var deflateEncoder = getOrCreateDeflateEncoder();\n                    if (!deflateEncoder) {\n                        state = {\n                            status: 0 /* RecorderStatus.Stopped */,\n                        };\n                        return;\n                    }\n                    var stopRecording = startRecordingImpl(lifeCycle, configuration, sessionManager, viewContexts, deflateEncoder).stop;\n                    state = {\n                        status: 3 /* RecorderStatus.Started */,\n                        stopRecording: stopRecording,\n                    };\n                });\n                if (options && options.force && session.sessionReplay === 0 /* SessionReplayState.OFF */) {\n                    sessionManager.setForcedReplay();\n                }\n            };\n            stopStrategy = function () {\n                if (state.status === 0 /* RecorderStatus.Stopped */) {\n                    return;\n                }\n                if (state.status === 3 /* RecorderStatus.Started */) {\n                    state.stopRecording();\n                }\n                state = {\n                    status: 0 /* RecorderStatus.Stopped */,\n                };\n            };\n            getSessionReplayLinkStrategy = function () {\n                return getSessionReplayLink(configuration, sessionManager, viewContexts, state.status !== 0 /* RecorderStatus.Stopped */);\n            };\n            if (state.status === 1 /* RecorderStatus.IntentToStart */) {\n                startStrategy();\n            }\n        },\n        isRecording: function () {\n            // The worker is started optimistically, meaning we could have started to record but its\n            // initialization fails a bit later. This could happen when:\n            // * the worker URL (blob or plain URL) is blocked by CSP in Firefox only (Chromium and Safari\n            // throw an exception when instantiating the worker, and IE doesn't care about CSP)\n            // * the browser fails to load the worker in case the workerUrl is used\n            // * an unexpected error occurs in the Worker before initialization, ex:\n            //   * a runtime exception collected by monitor()\n            //   * a syntax error notified by the browser via an error event\n            // * the worker is unresponsive for some reason and timeouts\n            //\n            // It is not expected to happen often. Nonetheless, the \"replayable\" status on RUM events is\n            // an important part of the Datadog App:\n            // * If we have a false positive (we set has_replay: true even if no replay data is present),\n            // we might display broken links to the Session Replay player.\n            // * If we have a false negative (we don't set has_replay: true even if replay data is\n            // available), it is less noticeable because no link will be displayed.\n            //\n            // Thus, it is better to have false negative, so let's make sure the worker is correctly\n            // initialized before advertizing that we are recording.\n            //\n            // In the future, when the compression worker will also be used for RUM data, this will be\n            // less important since no RUM event will be sent when the worker fails to initialize.\n            return getDeflateWorkerStatus() === 3 /* DeflateWorkerStatus.Initialized */ && state.status === 3 /* RecorderStatus.Started */;\n        },\n        getReplayStats: function (viewId) {\n            return getDeflateWorkerStatus() === 3 /* DeflateWorkerStatus.Initialized */ ? getReplayStatsImpl(viewId) : undefined;\n        },\n    };\n}\n//# sourceMappingURL=recorderApi.js.map","// Keep the following in sync with packages/rum-slim/src/entries/main.ts\nimport { defineGlobal, getGlobalObject } from '@datadog/browser-core';\nimport { makeRumPublicApi, startRum } from '@datadog/browser-rum-core';\nimport { startRecording } from '../boot/startRecording';\nimport { makeRecorderApi } from '../boot/recorderApi';\nimport { createDeflateEncoder, startDeflateWorker } from '../domain/deflate';\nexport { DefaultPrivacyLevel } from '@datadog/browser-core';\nvar recorderApi = makeRecorderApi(startRecording);\nexport var datadogRum = makeRumPublicApi(startRum, recorderApi, { startDeflateWorker: startDeflateWorker, createDeflateEncoder: createDeflateEncoder });\ndefineGlobal(getGlobalObject(), 'DD_RUM', datadogRum);\n//# sourceMappingURL=main.js.map","var _a;\nimport { includes } from '@datadog/browser-core';\nexport function isAuthorized(status, handlerType, logger) {\n    var loggerHandler = logger.getHandler();\n    var sanitizedHandlerType = Array.isArray(loggerHandler) ? loggerHandler : [loggerHandler];\n    return (STATUS_PRIORITIES[status] >= STATUS_PRIORITIES[logger.getLevel()] && includes(sanitizedHandlerType, handlerType));\n}\nexport var StatusType = {\n    ok: 'ok',\n    debug: 'debug',\n    info: 'info',\n    notice: 'notice',\n    warn: 'warn',\n    error: 'error',\n    critical: 'critical',\n    alert: 'alert',\n    emerg: 'emerg',\n};\nexport var STATUS_PRIORITIES = (_a = {},\n    _a[StatusType.ok] = 0,\n    _a[StatusType.debug] = 1,\n    _a[StatusType.info] = 2,\n    _a[StatusType.notice] = 4,\n    _a[StatusType.warn] = 5,\n    _a[StatusType.error] = 6,\n    _a[StatusType.critical] = 7,\n    _a[StatusType.alert] = 8,\n    _a[StatusType.emerg] = 9,\n    _a);\n//# sourceMappingURL=isAuthorized.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { clocksNow, computeRawError, computeStackTrace, combine, createContextManager, ErrorSource, monitored, sanitize, createHandlingStack, } from '@datadog/browser-core';\nimport { isAuthorized, StatusType } from './logger/isAuthorized';\nexport var HandlerType = {\n    console: 'console',\n    http: 'http',\n    silent: 'silent',\n};\nexport var STATUSES = Object.keys(StatusType);\n// note: it is safe to merge declarations as long as the methods are actually defined on the prototype\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging, no-restricted-syntax\nvar Logger = /** @class */ (function () {\n    function Logger(handleLogStrategy, customerDataTracker, name, handlerType, level, loggerContext) {\n        if (handlerType === void 0) { handlerType = HandlerType.http; }\n        if (level === void 0) { level = StatusType.debug; }\n        if (loggerContext === void 0) { loggerContext = {}; }\n        this.handleLogStrategy = handleLogStrategy;\n        this.handlerType = handlerType;\n        this.level = level;\n        this.contextManager = createContextManager(customerDataTracker);\n        this.contextManager.setContext(loggerContext);\n        if (name) {\n            this.contextManager.setContextProperty('logger', { name: name });\n        }\n    }\n    Logger.prototype.logImplementation = function (message, messageContext, status, error, handlingStack) {\n        if (status === void 0) { status = StatusType.info; }\n        var errorContext;\n        if (error !== undefined && error !== null) {\n            var stackTrace = error instanceof Error ? computeStackTrace(error) : undefined;\n            var rawError = computeRawError({\n                stackTrace: stackTrace,\n                originalError: error,\n                nonErrorPrefix: \"Provided\" /* NonErrorPrefix.PROVIDED */,\n                source: ErrorSource.LOGGER,\n                handling: \"handled\" /* ErrorHandling.HANDLED */,\n                startClocks: clocksNow(),\n            });\n            errorContext = {\n                stack: rawError.stack,\n                kind: rawError.type,\n                message: rawError.message,\n                causes: rawError.causes,\n            };\n        }\n        var sanitizedMessageContext = sanitize(messageContext);\n        var context = errorContext\n            ? combine({ error: errorContext }, sanitizedMessageContext)\n            : sanitizedMessageContext;\n        this.handleLogStrategy({\n            message: sanitize(message),\n            context: context,\n            status: status,\n        }, this, handlingStack);\n    };\n    Logger.prototype.log = function (message, messageContext, status, error) {\n        if (status === void 0) { status = StatusType.info; }\n        var handlingStack;\n        if (isAuthorized(status, HandlerType.http, this)) {\n            handlingStack = createHandlingStack();\n        }\n        this.logImplementation(message, messageContext, status, error, handlingStack);\n    };\n    Logger.prototype.setContext = function (context) {\n        this.contextManager.setContext(context);\n    };\n    Logger.prototype.getContext = function () {\n        return this.contextManager.getContext();\n    };\n    Logger.prototype.setContextProperty = function (key, value) {\n        this.contextManager.setContextProperty(key, value);\n    };\n    Logger.prototype.removeContextProperty = function (key) {\n        this.contextManager.removeContextProperty(key);\n    };\n    Logger.prototype.clearContext = function () {\n        this.contextManager.clearContext();\n    };\n    Logger.prototype.setHandler = function (handler) {\n        this.handlerType = handler;\n    };\n    Logger.prototype.getHandler = function () {\n        return this.handlerType;\n    };\n    Logger.prototype.setLevel = function (level) {\n        this.level = level;\n    };\n    Logger.prototype.getLevel = function () {\n        return this.level;\n    };\n    __decorate([\n        monitored\n    ], Logger.prototype, \"logImplementation\", null);\n    return Logger;\n}());\nexport { Logger };\n/* eslint-disable local-rules/disallow-side-effects */\nLogger.prototype.ok = createLoggerMethod(StatusType.ok);\nLogger.prototype.debug = createLoggerMethod(StatusType.debug);\nLogger.prototype.info = createLoggerMethod(StatusType.info);\nLogger.prototype.notice = createLoggerMethod(StatusType.notice);\nLogger.prototype.warn = createLoggerMethod(StatusType.warn);\nLogger.prototype.error = createLoggerMethod(StatusType.error);\nLogger.prototype.critical = createLoggerMethod(StatusType.critical);\nLogger.prototype.alert = createLoggerMethod(StatusType.alert);\nLogger.prototype.emerg = createLoggerMethod(StatusType.emerg);\nfunction createLoggerMethod(status) {\n    return function (message, messageContext, error) {\n        var handlingStack;\n        if (isAuthorized(status, HandlerType.http, this)) {\n            handlingStack = createHandlingStack();\n        }\n        this.logImplementation(message, messageContext, status, error, handlingStack);\n    };\n}\n//# sourceMappingURL=logger.js.map","export function buildCommonContext(globalContextManager, userContextManager) {\n    return {\n        view: {\n            referrer: document.referrer,\n            url: window.location.href,\n        },\n        context: globalContextManager.getContext(),\n        user: userContextManager.getContext(),\n    };\n}\n//# sourceMappingURL=commonContext.js.map","import { serializeConfiguration, assign, ONE_KIBI_BYTE, validateAndBuildConfiguration, display, removeDuplicates, ConsoleApiName, RawReportType, includes, objectValues, } from '@datadog/browser-core';\n/**\n * arbitrary value, byte precision not needed\n */\nexport var DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT = 32 * ONE_KIBI_BYTE;\nexport function validateAndBuildLogsConfiguration(initConfiguration) {\n    if (initConfiguration.usePciIntake === true && initConfiguration.site && initConfiguration.site !== 'datadoghq.com') {\n        display.warn('PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.');\n    }\n    var baseConfiguration = validateAndBuildConfiguration(initConfiguration);\n    var forwardConsoleLogs = validateAndBuildForwardOption(initConfiguration.forwardConsoleLogs, objectValues(ConsoleApiName), 'Forward Console Logs');\n    var forwardReports = validateAndBuildForwardOption(initConfiguration.forwardReports, objectValues(RawReportType), 'Forward Reports');\n    if (!baseConfiguration || !forwardConsoleLogs || !forwardReports) {\n        return;\n    }\n    if (initConfiguration.forwardErrorsToLogs && !includes(forwardConsoleLogs, ConsoleApiName.error)) {\n        forwardConsoleLogs.push(ConsoleApiName.error);\n    }\n    return assign({\n        forwardErrorsToLogs: initConfiguration.forwardErrorsToLogs !== false,\n        forwardConsoleLogs: forwardConsoleLogs,\n        forwardReports: forwardReports,\n        requestErrorResponseLengthLimit: DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT,\n        sendLogsAfterSessionExpiration: !!initConfiguration.sendLogsAfterSessionExpiration,\n    }, baseConfiguration);\n}\nexport function validateAndBuildForwardOption(option, allowedValues, label) {\n    if (option === undefined) {\n        return [];\n    }\n    if (!(option === 'all' || (Array.isArray(option) && option.every(function (api) { return includes(allowedValues, api); })))) {\n        display.error(\"\".concat(label, \" should be \\\"all\\\" or an array with allowed values \\\"\").concat(allowedValues.join('\", \"'), \"\\\"\"));\n        return;\n    }\n    return option === 'all' ? allowedValues : removeDuplicates(option);\n}\nexport function serializeLogsConfiguration(configuration) {\n    var baseSerializedInitConfiguration = serializeConfiguration(configuration);\n    return assign({\n        forward_errors_to_logs: configuration.forwardErrorsToLogs,\n        forward_console_logs: configuration.forwardConsoleLogs,\n        forward_reports: configuration.forwardReports,\n        use_pci_intake: configuration.usePciIntake,\n        send_logs_after_session_expiration: configuration.sendLogsAfterSessionExpiration,\n    }, baseSerializedInitConfiguration);\n}\n//# sourceMappingURL=configuration.js.map","import { createBoundedBuffer, assign, canUseEventBridge, display, displayAlreadyInitializedError, initFeatureFlags, initFetchObservable, noop, timeStampNow, } from '@datadog/browser-core';\nimport { validateAndBuildLogsConfiguration, } from '../domain/configuration';\nexport function createPreStartStrategy(getCommonContext, trackingConsentState, doStartLogs) {\n    var bufferApiCalls = createBoundedBuffer();\n    var cachedInitConfiguration;\n    var cachedConfiguration;\n    var trackingConsentStateSubscription = trackingConsentState.observable.subscribe(tryStartLogs);\n    function tryStartLogs() {\n        if (!cachedConfiguration || !cachedInitConfiguration || !trackingConsentState.isGranted()) {\n            return;\n        }\n        trackingConsentStateSubscription.unsubscribe();\n        var startLogsResult = doStartLogs(cachedInitConfiguration, cachedConfiguration);\n        bufferApiCalls.drain(startLogsResult);\n    }\n    return {\n        init: function (initConfiguration) {\n            if (!initConfiguration) {\n                display.error('Missing configuration');\n                return;\n            }\n            // Set the experimental feature flags as early as possible, so we can use them in most places\n            initFeatureFlags(initConfiguration.enableExperimentalFeatures);\n            if (canUseEventBridge()) {\n                initConfiguration = overrideInitConfigurationForBridge(initConfiguration);\n            }\n            // Expose the initial configuration regardless of initialization success.\n            cachedInitConfiguration = initConfiguration;\n            if (cachedConfiguration) {\n                displayAlreadyInitializedError('DD_LOGS', initConfiguration);\n                return;\n            }\n            var configuration = validateAndBuildLogsConfiguration(initConfiguration);\n            if (!configuration) {\n                return;\n            }\n            cachedConfiguration = configuration;\n            // Instrumuent fetch to track network requests\n            // This is needed in case the consent is not granted and some cutsomer\n            // library (Apollo Client) is storing uninstrumented fetch to be used later\n            // The subscrption is needed so that the instrumentation process is completed\n            initFetchObservable().subscribe(noop);\n            trackingConsentState.tryToInit(configuration.trackingConsent);\n            tryStartLogs();\n        },\n        get initConfiguration() {\n            return cachedInitConfiguration;\n        },\n        getInternalContext: noop,\n        handleLog: function (message, statusType, handlingStack, context, date) {\n            if (context === void 0) { context = getCommonContext(); }\n            if (date === void 0) { date = timeStampNow(); }\n            bufferApiCalls.add(function (startLogsResult) {\n                return startLogsResult.handleLog(message, statusType, handlingStack, context, date);\n            });\n        },\n    };\n}\nfunction overrideInitConfigurationForBridge(initConfiguration) {\n    return assign({}, initConfiguration, { clientToken: 'empty' });\n}\n//# sourceMappingURL=preStartLogs.js.map","import { addTelemetryUsage, assign, createContextManager, makePublicApi, monitor, checkUser, sanitizeUser, sanitize, createCustomerDataTrackerManager, storeContextManager, displayAlreadyInitializedError, deepClone, createTrackingConsentState, } from '@datadog/browser-core';\nimport { Logger } from '../domain/logger';\nimport { buildCommonContext } from '../domain/contexts/commonContext';\nimport { createPreStartStrategy } from './preStartLogs';\nvar LOGS_STORAGE_KEY = 'logs';\nexport function makeLogsPublicApi(startLogsImpl) {\n    var customerDataTrackerManager = createCustomerDataTrackerManager();\n    var globalContextManager = createContextManager(customerDataTrackerManager.getOrCreateTracker(2 /* CustomerDataType.GlobalContext */));\n    var userContextManager = createContextManager(customerDataTrackerManager.getOrCreateTracker(1 /* CustomerDataType.User */));\n    var trackingConsentState = createTrackingConsentState();\n    function getCommonContext() {\n        return buildCommonContext(globalContextManager, userContextManager);\n    }\n    var strategy = createPreStartStrategy(getCommonContext, trackingConsentState, function (initConfiguration, configuration) {\n        if (initConfiguration.storeContextsAcrossPages) {\n            storeContextManager(configuration, globalContextManager, LOGS_STORAGE_KEY, 2 /* CustomerDataType.GlobalContext */);\n            storeContextManager(configuration, userContextManager, LOGS_STORAGE_KEY, 1 /* CustomerDataType.User */);\n        }\n        var startLogsResult = startLogsImpl(initConfiguration, configuration, getCommonContext, trackingConsentState);\n        strategy = createPostStartStrategy(initConfiguration, startLogsResult);\n        return startLogsResult;\n    });\n    var customLoggers = {};\n    var mainLogger = new Logger(function () {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        return strategy.handleLog.apply(strategy, params);\n    }, customerDataTrackerManager.createDetachedTracker());\n    return makePublicApi({\n        logger: mainLogger,\n        init: monitor(function (initConfiguration) { return strategy.init(initConfiguration); }),\n        setTrackingConsent: monitor(function (trackingConsent) {\n            trackingConsentState.update(trackingConsent);\n            addTelemetryUsage({ feature: 'set-tracking-consent', tracking_consent: trackingConsent });\n        }),\n        getGlobalContext: monitor(function () { return globalContextManager.getContext(); }),\n        setGlobalContext: monitor(function (context) { return globalContextManager.setContext(context); }),\n        setGlobalContextProperty: monitor(function (key, value) { return globalContextManager.setContextProperty(key, value); }),\n        removeGlobalContextProperty: monitor(function (key) { return globalContextManager.removeContextProperty(key); }),\n        clearGlobalContext: monitor(function () { return globalContextManager.clearContext(); }),\n        createLogger: monitor(function (name, conf) {\n            if (conf === void 0) { conf = {}; }\n            customLoggers[name] = new Logger(function () {\n                var params = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    params[_i] = arguments[_i];\n                }\n                return strategy.handleLog.apply(strategy, params);\n            }, customerDataTrackerManager.createDetachedTracker(), sanitize(name), conf.handler, conf.level, sanitize(conf.context));\n            return customLoggers[name];\n        }),\n        getLogger: monitor(function (name) { return customLoggers[name]; }),\n        getInitConfiguration: monitor(function () { return deepClone(strategy.initConfiguration); }),\n        getInternalContext: monitor(function (startTime) { return strategy.getInternalContext(startTime); }),\n        setUser: monitor(function (newUser) {\n            if (checkUser(newUser)) {\n                userContextManager.setContext(sanitizeUser(newUser));\n            }\n        }),\n        getUser: monitor(function () { return userContextManager.getContext(); }),\n        setUserProperty: monitor(function (key, property) {\n            var _a;\n            var sanitizedProperty = sanitizeUser((_a = {}, _a[key] = property, _a))[key];\n            userContextManager.setContextProperty(key, sanitizedProperty);\n        }),\n        removeUserProperty: monitor(function (key) { return userContextManager.removeContextProperty(key); }),\n        clearUser: monitor(function () { return userContextManager.clearContext(); }),\n    });\n}\nfunction createPostStartStrategy(initConfiguration, startLogsResult) {\n    return assign({\n        init: function (initConfiguration) {\n            displayAlreadyInitializedError('DD_LOGS', initConfiguration);\n        },\n        initConfiguration: initConfiguration,\n    }, startLogsResult);\n}\n//# sourceMappingURL=logsPublicApi.js.map","import { Observable, performDraw, startSessionManager } from '@datadog/browser-core';\nexport var LOGS_SESSION_KEY = 'logs';\nexport function startLogsSessionManager(configuration, trackingConsentState) {\n    var sessionManager = startSessionManager(configuration, LOGS_SESSION_KEY, function (rawTrackingType) { return computeSessionState(configuration, rawTrackingType); }, trackingConsentState);\n    return {\n        findTrackedSession: function (startTime, options) {\n            if (options === void 0) { options = { returnInactive: false }; }\n            var session = sessionManager.findSession(startTime, options);\n            return session && session.trackingType === \"1\" /* LoggerTrackingType.TRACKED */\n                ? {\n                    id: session.id,\n                }\n                : undefined;\n        },\n        expireObservable: sessionManager.expireObservable,\n    };\n}\nexport function startLogsSessionManagerStub(configuration) {\n    var isTracked = computeTrackingType(configuration) === \"1\" /* LoggerTrackingType.TRACKED */;\n    var session = isTracked ? {} : undefined;\n    return {\n        findTrackedSession: function () { return session; },\n        expireObservable: new Observable(),\n    };\n}\nfunction computeTrackingType(configuration) {\n    if (!performDraw(configuration.sessionSampleRate)) {\n        return \"0\" /* LoggerTrackingType.NOT_TRACKED */;\n    }\n    return \"1\" /* LoggerTrackingType.TRACKED */;\n}\nfunction computeSessionState(configuration, rawSessionType) {\n    var trackingType = hasValidLoggerSession(rawSessionType) ? rawSessionType : computeTrackingType(configuration);\n    return {\n        trackingType: trackingType,\n        isTracked: trackingType === \"1\" /* LoggerTrackingType.TRACKED */,\n    };\n}\nfunction hasValidLoggerSession(trackingType) {\n    return trackingType === \"0\" /* LoggerTrackingType.NOT_TRACKED */ || trackingType === \"1\" /* LoggerTrackingType.TRACKED */;\n}\n//# sourceMappingURL=logsSessionManager.js.map","import { willSyntheticsInjectRum, addTelemetryDebug, getSyntheticsTestId, getSyntheticsResultId, } from '@datadog/browser-core';\nvar logsSentBeforeRumInjectionTelemetryAdded = false;\nexport function getRUMInternalContext(startTime) {\n    var browserWindow = window;\n    if (willSyntheticsInjectRum()) {\n        var context = getInternalContextFromRumGlobal(browserWindow.DD_RUM_SYNTHETICS);\n        if (!context && !logsSentBeforeRumInjectionTelemetryAdded) {\n            logsSentBeforeRumInjectionTelemetryAdded = true;\n            addTelemetryDebug('Logs sent before RUM is injected by the synthetics worker', {\n                testId: getSyntheticsTestId(),\n                resultId: getSyntheticsResultId(),\n            });\n        }\n        return context;\n    }\n    return getInternalContextFromRumGlobal(browserWindow.DD_RUM);\n    function getInternalContextFromRumGlobal(rumGlobal) {\n        if (rumGlobal && rumGlobal.getInternalContext) {\n            return rumGlobal.getInternalContext(startTime);\n        }\n    }\n}\nexport function resetRUMInternalContext() {\n    logsSentBeforeRumInjectionTelemetryAdded = false;\n}\n//# sourceMappingURL=rumInternalContext.js.map","import { ErrorSource, combine, createEventRateLimiter, getRelativeTime, isEmptyObject } from '@datadog/browser-core';\nimport { STATUSES } from './logger';\nimport { getRUMInternalContext } from './contexts/rumInternalContext';\nexport function startLogsAssembly(sessionManager, configuration, lifeCycle, getCommonContext, reportError) {\n    var statusWithCustom = STATUSES.concat(['custom']);\n    var logRateLimiters = {};\n    statusWithCustom.forEach(function (status) {\n        logRateLimiters[status] = createEventRateLimiter(status, configuration.eventRateLimiterThreshold, reportError);\n    });\n    lifeCycle.subscribe(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, function (_a) {\n        var _b, _c;\n        var rawLogsEvent = _a.rawLogsEvent, _d = _a.messageContext, messageContext = _d === void 0 ? undefined : _d, _e = _a.savedCommonContext, savedCommonContext = _e === void 0 ? undefined : _e, domainContext = _a.domainContext;\n        var startTime = getRelativeTime(rawLogsEvent.date);\n        var session = sessionManager.findTrackedSession(startTime);\n        if (!session &&\n            (!configuration.sendLogsAfterSessionExpiration ||\n                !sessionManager.findTrackedSession(startTime, { returnInactive: true }))) {\n            return;\n        }\n        var commonContext = savedCommonContext || getCommonContext();\n        var log = combine({\n            service: configuration.service,\n            session_id: session ? session.id : undefined,\n            // Insert user first to allow overrides from global context\n            usr: !isEmptyObject(commonContext.user) ? commonContext.user : undefined,\n            view: commonContext.view,\n        }, commonContext.context, getRUMInternalContext(startTime), rawLogsEvent, messageContext);\n        if (((_b = configuration.beforeSend) === null || _b === void 0 ? void 0 : _b.call(configuration, log, domainContext)) === false ||\n            (log.origin !== ErrorSource.AGENT &&\n                ((_c = logRateLimiters[log.status]) !== null && _c !== void 0 ? _c : logRateLimiters['custom']).isLimitReached())) {\n            return;\n        }\n        lifeCycle.notify(1 /* LifeCycleEventType.LOG_COLLECTED */, log);\n    });\n}\n//# sourceMappingURL=assembly.js.map","var _a;\nimport { timeStampNow, ConsoleApiName, ErrorSource, initConsoleObservable } from '@datadog/browser-core';\nimport { StatusType } from '../logger/isAuthorized';\nexport var LogStatusForApi = (_a = {},\n    _a[ConsoleApiName.log] = StatusType.info,\n    _a[ConsoleApiName.debug] = StatusType.debug,\n    _a[ConsoleApiName.info] = StatusType.info,\n    _a[ConsoleApiName.warn] = StatusType.warn,\n    _a[ConsoleApiName.error] = StatusType.error,\n    _a);\nexport function startConsoleCollection(configuration, lifeCycle) {\n    var consoleSubscription = initConsoleObservable(configuration.forwardConsoleLogs).subscribe(function (log) {\n        var collectedData = {\n            rawLogsEvent: {\n                date: timeStampNow(),\n                message: log.message,\n                origin: ErrorSource.CONSOLE,\n                error: log.api === ConsoleApiName.error\n                    ? {\n                        stack: log.stack,\n                        fingerprint: log.fingerprint,\n                        causes: log.causes,\n                    }\n                    : undefined,\n                status: LogStatusForApi[log.api],\n            },\n            domainContext: {\n                handlingStack: log.handlingStack,\n            },\n        };\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, collectedData);\n    });\n    return {\n        stop: function () {\n            consoleSubscription.unsubscribe();\n        },\n    };\n}\n//# sourceMappingURL=consoleCollection.js.map","var _a;\nimport { timeStampNow, ErrorSource, RawReportType, getFileFromStackTraceString, initReportObservable, } from '@datadog/browser-core';\nimport { StatusType } from '../logger/isAuthorized';\nvar LogStatusForReport = (_a = {},\n    _a[RawReportType.cspViolation] = StatusType.error,\n    _a[RawReportType.intervention] = StatusType.error,\n    _a[RawReportType.deprecation] = StatusType.warn,\n    _a);\nexport function startReportCollection(configuration, lifeCycle) {\n    var reportSubscription = initReportObservable(configuration, configuration.forwardReports).subscribe(function (report) {\n        var message = report.message;\n        var status = LogStatusForReport[report.type];\n        var error;\n        if (status === StatusType.error) {\n            error = {\n                kind: report.subtype,\n                stack: report.stack,\n            };\n        }\n        else if (report.stack) {\n            message += \" Found in \".concat(getFileFromStackTraceString(report.stack));\n        }\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                date: timeStampNow(),\n                message: message,\n                origin: ErrorSource.REPORT,\n                error: error,\n                status: status,\n            },\n        });\n    });\n    return {\n        stop: function () {\n            reportSubscription.unsubscribe();\n        },\n    };\n}\n//# sourceMappingURL=reportCollection.js.map","import { ErrorSource, initXhrObservable, initFetchObservable, computeStackTrace, toStackTraceString, monitor, noop, readBytesFromStream, tryToClone, isServerError, } from '@datadog/browser-core';\nimport { StatusType } from '../logger/isAuthorized';\nexport function startNetworkErrorCollection(configuration, lifeCycle) {\n    if (!configuration.forwardErrorsToLogs) {\n        return { stop: noop };\n    }\n    var xhrSubscription = initXhrObservable(configuration).subscribe(function (context) {\n        if (context.state === 'complete') {\n            handleResponse(\"xhr\" /* RequestType.XHR */, context);\n        }\n    });\n    var fetchSubscription = initFetchObservable().subscribe(function (context) {\n        if (context.state === 'resolve') {\n            handleResponse(\"fetch\" /* RequestType.FETCH */, context);\n        }\n    });\n    function handleResponse(type, request) {\n        if (!configuration.isIntakeUrl(request.url) && (isRejected(request) || isServerError(request.status))) {\n            if ('xhr' in request) {\n                computeXhrResponseData(request.xhr, configuration, onResponseDataAvailable);\n            }\n            else if (request.response) {\n                computeFetchResponseText(request.response, configuration, onResponseDataAvailable);\n            }\n            else if (request.error) {\n                computeFetchErrorText(request.error, configuration, onResponseDataAvailable);\n            }\n        }\n        function onResponseDataAvailable(responseData) {\n            var domainContext = {\n                isAborted: request.isAborted,\n                handlingStack: request.handlingStack,\n            };\n            lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n                rawLogsEvent: {\n                    message: \"\".concat(format(type), \" error \").concat(request.method, \" \").concat(request.url),\n                    date: request.startClocks.timeStamp,\n                    error: {\n                        stack: responseData || 'Failed to load',\n                    },\n                    http: {\n                        method: request.method, // Cast resource method because of case mismatch cf issue RUMF-1152\n                        status_code: request.status,\n                        url: request.url,\n                    },\n                    status: StatusType.error,\n                    origin: ErrorSource.NETWORK,\n                },\n                domainContext: domainContext,\n            });\n        }\n    }\n    return {\n        stop: function () {\n            xhrSubscription.unsubscribe();\n            fetchSubscription.unsubscribe();\n        },\n    };\n}\n// TODO: ideally, computeXhrResponseData should always call the callback with a string instead of\n// `unknown`. But to keep backward compatibility, in the case of XHR with a `responseType` different\n// than \"text\", the response data should be whatever `xhr.response` is. This is a bit confusing as\n// Logs event 'stack' is expected to be a string. This should be changed in a future major version\n// as it could be a breaking change.\nexport function computeXhrResponseData(xhr, configuration, callback) {\n    if (typeof xhr.response === 'string') {\n        callback(truncateResponseText(xhr.response, configuration));\n    }\n    else {\n        callback(xhr.response);\n    }\n}\nexport function computeFetchErrorText(error, configuration, callback) {\n    callback(truncateResponseText(toStackTraceString(computeStackTrace(error)), configuration));\n}\nexport function computeFetchResponseText(response, configuration, callback) {\n    var clonedResponse = tryToClone(response);\n    if (!clonedResponse || !clonedResponse.body) {\n        // if the clone failed or if the body is null, let's not try to read it.\n        callback();\n    }\n    else if (!window.TextDecoder) {\n        // If the browser doesn't support TextDecoder, let's read the whole response then truncate it.\n        //\n        // This should only be the case on early versions of Edge (before they migrated to Chromium).\n        // Even if it could be possible to implement a workaround for the missing TextDecoder API (using\n        // a Blob and FileReader), we found another issue preventing us from reading only the first\n        // bytes from the response: contrary to other browsers, when reading from the cloned response,\n        // if the original response gets canceled, the cloned response is also canceled and we can't\n        // know about it.  In the following illustration, the promise returned by `reader.read()` may\n        // never be fulfilled:\n        //\n        // fetch('/').then((response) => {\n        //   const reader = response.clone().body.getReader()\n        //   readMore()\n        //   function readMore() {\n        //     reader.read().then(\n        //       (result) => {\n        //         if (result.done) {\n        //           console.log('done')\n        //         } else {\n        //           readMore()\n        //         }\n        //       },\n        //       () => console.log('error')\n        //     )\n        //   }\n        //   response.body.getReader().cancel()\n        // })\n        clonedResponse.text().then(monitor(function (text) { return callback(truncateResponseText(text, configuration)); }), monitor(function (error) { return callback(\"Unable to retrieve response: \".concat(error)); }));\n    }\n    else {\n        truncateResponseStream(clonedResponse.body, configuration.requestErrorResponseLengthLimit, function (error, responseText) {\n            if (error) {\n                callback(\"Unable to retrieve response: \".concat(error));\n            }\n            else {\n                callback(responseText);\n            }\n        });\n    }\n}\nfunction isRejected(request) {\n    return request.status === 0 && request.responseType !== 'opaque';\n}\nfunction truncateResponseText(responseText, configuration) {\n    if (responseText.length > configuration.requestErrorResponseLengthLimit) {\n        return \"\".concat(responseText.substring(0, configuration.requestErrorResponseLengthLimit), \"...\");\n    }\n    return responseText;\n}\nfunction format(type) {\n    if (\"xhr\" /* RequestType.XHR */ === type) {\n        return 'XHR';\n    }\n    return 'Fetch';\n}\nfunction truncateResponseStream(stream, bytesLimit, callback) {\n    readBytesFromStream(stream, function (error, bytes, limitExceeded) {\n        if (error) {\n            callback(error);\n        }\n        else {\n            var responseText = new TextDecoder().decode(bytes);\n            if (limitExceeded) {\n                responseText += '...';\n            }\n            callback(undefined, responseText);\n        }\n    }, {\n        bytesLimit: bytesLimit,\n        collectStreamBody: true,\n    });\n}\n//# sourceMappingURL=networkErrorCollection.js.map","import { noop, ErrorSource, trackRuntimeError, Observable } from '@datadog/browser-core';\nimport { StatusType } from '../logger/isAuthorized';\nexport function startRuntimeErrorCollection(configuration, lifeCycle) {\n    if (!configuration.forwardErrorsToLogs) {\n        return { stop: noop };\n    }\n    var rawErrorObservable = new Observable();\n    var stopRuntimeErrorTracking = trackRuntimeError(rawErrorObservable).stop;\n    var rawErrorSubscription = rawErrorObservable.subscribe(function (rawError) {\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                message: rawError.message,\n                date: rawError.startClocks.timeStamp,\n                error: {\n                    kind: rawError.type,\n                    stack: rawError.stack,\n                    causes: rawError.causes,\n                },\n                origin: ErrorSource.SOURCE,\n                status: StatusType.error,\n            },\n        });\n    });\n    return {\n        stop: function () {\n            stopRuntimeErrorTracking();\n            rawErrorSubscription.unsubscribe();\n        },\n    };\n}\n//# sourceMappingURL=runtimeErrorCollection.js.map","import { AbstractLifeCycle } from '@datadog/browser-core';\nexport var LifeCycle = (AbstractLifeCycle);\n//# sourceMappingURL=lifeCycle.js.map","var _a;\nimport { combine, ErrorSource, timeStampNow, originalConsoleMethods, globalConsole, ConsoleApiName, } from '@datadog/browser-core';\nimport { HandlerType } from '../logger';\nimport { isAuthorized, StatusType } from './isAuthorized';\nexport function startLoggerCollection(lifeCycle) {\n    function handleLog(logsMessage, logger, handlingStack, savedCommonContext, savedDate) {\n        var messageContext = combine(logger.getContext(), logsMessage.context);\n        if (isAuthorized(logsMessage.status, HandlerType.console, logger)) {\n            displayInConsole(logsMessage, messageContext);\n        }\n        if (isAuthorized(logsMessage.status, HandlerType.http, logger)) {\n            var rawLogEventData = {\n                rawLogsEvent: {\n                    date: savedDate || timeStampNow(),\n                    message: logsMessage.message,\n                    status: logsMessage.status,\n                    origin: ErrorSource.LOGGER,\n                },\n                messageContext: messageContext,\n                savedCommonContext: savedCommonContext,\n            };\n            if (handlingStack) {\n                rawLogEventData.domainContext = { handlingStack: handlingStack };\n            }\n            lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, rawLogEventData);\n        }\n    }\n    return {\n        handleLog: handleLog,\n    };\n}\nvar loggerToConsoleApiName = (_a = {},\n    _a[StatusType.ok] = ConsoleApiName.debug,\n    _a[StatusType.debug] = ConsoleApiName.debug,\n    _a[StatusType.info] = ConsoleApiName.info,\n    _a[StatusType.notice] = ConsoleApiName.info,\n    _a[StatusType.warn] = ConsoleApiName.warn,\n    _a[StatusType.error] = ConsoleApiName.error,\n    _a[StatusType.critical] = ConsoleApiName.error,\n    _a[StatusType.alert] = ConsoleApiName.error,\n    _a[StatusType.emerg] = ConsoleApiName.error,\n    _a);\nfunction displayInConsole(_a, messageContext) {\n    var status = _a.status, message = _a.message;\n    originalConsoleMethods[loggerToConsoleApiName[status]].call(globalConsole, message, messageContext);\n}\n//# sourceMappingURL=loggerCollection.js.map","import { createIdentityEncoder, startBatchWithReplica } from '@datadog/browser-core';\nexport function startLogsBatch(configuration, lifeCycle, reportError, pageExitObservable, session) {\n    var batch = startBatchWithReplica(configuration, {\n        endpoint: configuration.logsEndpointBuilder,\n        encoder: createIdentityEncoder(),\n    }, configuration.replica && {\n        endpoint: configuration.replica.logsEndpointBuilder,\n        encoder: createIdentityEncoder(),\n    }, reportError, pageExitObservable, session.expireObservable);\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, function (serverLogsEvent) {\n        batch.add(serverLogsEvent);\n    });\n    return batch;\n}\n//# sourceMappingURL=startLogsBatch.js.map","import { getEventBridge } from '@datadog/browser-core';\nexport function startLogsBridge(lifeCycle) {\n    var bridge = getEventBridge();\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, function (serverLogsEvent) {\n        bridge.send('log', serverLogsEvent);\n    });\n}\n//# sourceMappingURL=startLogsBridge.js.map","export function startInternalContext(sessionManager) {\n    return {\n        get: function (startTime) {\n            var trackedSession = sessionManager.findTrackedSession(startTime);\n            if (trackedSession) {\n                return {\n                    session_id: trackedSession.id,\n                };\n            }\n        },\n    };\n}\n//# sourceMappingURL=internalContext.js.map","import { ErrorSource, addTelemetryDebug } from '@datadog/browser-core';\nimport { StatusType } from './logger/isAuthorized';\nexport function startReportError(lifeCycle) {\n    return function (error) {\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                message: error.message,\n                date: error.startClocks.timeStamp,\n                origin: ErrorSource.AGENT,\n                status: StatusType.error,\n            },\n        });\n        addTelemetryDebug('Error reported to customer', { 'error.message': error.message });\n    };\n}\n//# sourceMappingURL=reportError.js.map","import { startTelemetry, canUseEventBridge, getEventBridge, startBatchWithReplica, createIdentityEncoder, isTelemetryReplicationAllowed, addTelemetryConfiguration, drainPreStartTelemetry, } from '@datadog/browser-core';\nimport { getRUMInternalContext } from './contexts/rumInternalContext';\nimport { serializeLogsConfiguration } from './configuration';\nexport function startLogsTelemetry(initConfiguration, configuration, reportError, pageExitObservable, session) {\n    var telemetry = startTelemetry(\"browser-logs-sdk\" /* TelemetryService.LOGS */, configuration);\n    telemetry.setContextProvider(function () {\n        var _a, _b, _c, _d, _e, _f;\n        return ({\n            application: {\n                id: (_a = getRUMInternalContext()) === null || _a === void 0 ? void 0 : _a.application_id,\n            },\n            session: {\n                id: (_b = session.findTrackedSession()) === null || _b === void 0 ? void 0 : _b.id,\n            },\n            view: {\n                id: (_d = (_c = getRUMInternalContext()) === null || _c === void 0 ? void 0 : _c.view) === null || _d === void 0 ? void 0 : _d.id,\n            },\n            action: {\n                id: (_f = (_e = getRUMInternalContext()) === null || _e === void 0 ? void 0 : _e.user_action) === null || _f === void 0 ? void 0 : _f.id,\n            },\n        });\n    });\n    var cleanupTasks = [];\n    if (canUseEventBridge()) {\n        var bridge_1 = getEventBridge();\n        var telemetrySubscription_1 = telemetry.observable.subscribe(function (event) { return bridge_1.send('internal_telemetry', event); });\n        cleanupTasks.push(function () { return telemetrySubscription_1.unsubscribe(); });\n    }\n    else {\n        var telemetryBatch_1 = startBatchWithReplica(configuration, {\n            endpoint: configuration.rumEndpointBuilder,\n            encoder: createIdentityEncoder(),\n        }, configuration.replica && {\n            endpoint: configuration.replica.rumEndpointBuilder,\n            encoder: createIdentityEncoder(),\n        }, reportError, pageExitObservable, session.expireObservable);\n        cleanupTasks.push(function () { return telemetryBatch_1.stop(); });\n        var telemetrySubscription_2 = telemetry.observable.subscribe(function (event) {\n            return telemetryBatch_1.add(event, isTelemetryReplicationAllowed(configuration));\n        });\n        cleanupTasks.push(function () { return telemetrySubscription_2.unsubscribe(); });\n    }\n    drainPreStartTelemetry();\n    addTelemetryConfiguration(serializeLogsConfiguration(initConfiguration));\n    return {\n        telemetry: telemetry,\n        stop: function () {\n            cleanupTasks.forEach(function (task) { return task(); });\n        },\n    };\n}\n//# sourceMappingURL=logsTelemetry.js.map","import { sendToExtension, createPageExitObservable, willSyntheticsInjectRum, canUseEventBridge, } from '@datadog/browser-core';\nimport { startLogsSessionManager, startLogsSessionManagerStub } from '../domain/logsSessionManager';\nimport { startLogsAssembly } from '../domain/assembly';\nimport { startConsoleCollection } from '../domain/console/consoleCollection';\nimport { startReportCollection } from '../domain/report/reportCollection';\nimport { startNetworkErrorCollection } from '../domain/networkError/networkErrorCollection';\nimport { startRuntimeErrorCollection } from '../domain/runtimeError/runtimeErrorCollection';\nimport { LifeCycle } from '../domain/lifeCycle';\nimport { startLoggerCollection } from '../domain/logger/loggerCollection';\nimport { startLogsBatch } from '../transport/startLogsBatch';\nimport { startLogsBridge } from '../transport/startLogsBridge';\nimport { startInternalContext } from '../domain/contexts/internalContext';\nimport { startReportError } from '../domain/reportError';\nimport { startLogsTelemetry } from '../domain/logsTelemetry';\nexport function startLogs(initConfiguration, configuration, getCommonContext, \n// `startLogs` and its subcomponents assume tracking consent is granted initially and starts\n// collecting logs unconditionally. As such, `startLogs` should be called with a\n// `trackingConsentState` set to \"granted\".\ntrackingConsentState) {\n    var lifeCycle = new LifeCycle();\n    var cleanupTasks = [];\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, function (log) { return sendToExtension('logs', log); });\n    var reportError = startReportError(lifeCycle);\n    var pageExitObservable = createPageExitObservable(configuration);\n    var session = configuration.sessionStoreStrategyType && !canUseEventBridge() && !willSyntheticsInjectRum()\n        ? startLogsSessionManager(configuration, trackingConsentState)\n        : startLogsSessionManagerStub(configuration);\n    var stopLogsTelemetry = startLogsTelemetry(initConfiguration, configuration, reportError, pageExitObservable, session).stop;\n    cleanupTasks.push(function () { return stopLogsTelemetry(); });\n    startNetworkErrorCollection(configuration, lifeCycle);\n    startRuntimeErrorCollection(configuration, lifeCycle);\n    startConsoleCollection(configuration, lifeCycle);\n    startReportCollection(configuration, lifeCycle);\n    var handleLog = startLoggerCollection(lifeCycle).handleLog;\n    startLogsAssembly(session, configuration, lifeCycle, getCommonContext, reportError);\n    if (!canUseEventBridge()) {\n        var stopLogsBatch_1 = startLogsBatch(configuration, lifeCycle, reportError, pageExitObservable, session).stop;\n        cleanupTasks.push(function () { return stopLogsBatch_1(); });\n    }\n    else {\n        startLogsBridge(lifeCycle);\n    }\n    var internalContext = startInternalContext(session);\n    return {\n        handleLog: handleLog,\n        getInternalContext: internalContext.get,\n        stop: function () {\n            cleanupTasks.forEach(function (task) { return task(); });\n        },\n    };\n}\n//# sourceMappingURL=startLogs.js.map","import { defineGlobal, getGlobalObject } from '@datadog/browser-core';\nimport { makeLogsPublicApi } from '../boot/logsPublicApi';\nimport { startLogs } from '../boot/startLogs';\nexport { Logger, HandlerType } from '../domain/logger';\nexport { StatusType } from '../domain/logger/isAuthorized';\nexport var datadogLogs = makeLogsPublicApi(startLogs);\ndefineGlobal(getGlobalObject(), 'DD_LOGS', datadogLogs);\n//# sourceMappingURL=main.js.map","import { get, extend } from 'underscore';\nimport { datadogRum } from '@datadog/browser-rum';\nimport { datadogLogs } from '@datadog/browser-logs';\n\nimport { datadogConfig as config, versions, appConfig } from './config';\n\nlet ddInitialized = false;\n\nfunction getEnv() {\n  return `${ appConfig.env }.${ appConfig.stackId }`;\n}\n\nfunction isPdfPrinter() {\n  const urlPaths = location.pathname.substring(1).split('/');\n  return (urlPaths[0] === 'formapp' && urlPaths[1] === 'pdf');\n}\n\nfunction initLogs({ isForm }) {\n  datadogLogs.init({\n    env: getEnv(),\n    clientToken: config.clientToken,\n    site: 'datadoghq.com',\n    service: isForm ? 'care-ops-forms' : 'care-ops-frontend',\n    forwardErrorsToLogs: true,\n    version: versions.frontend,\n    useSecureSessionCookie: true,\n    useCrossSiteSessionCookie: true,\n    beforeSend(log) {\n      // Remove uncaught rejected 401 & 500 responses\n      if (String(log.message).includes('Uncaught \"[Response]\"')) return false;\n      // Remove logging of offline fetch errors\n      if (String(log.message).includes('Failed to fetch')) return false;\n      return (get(log, ['http', 'status_code']) !== 0);\n    },\n  });\n}\n\nfunction initRum({ isForm }) {\n  if (isPdfPrinter()) return;\n  datadogRum.init({\n    env: getEnv(),\n    applicationId: config.applicationId,\n    clientToken: config.clientToken,\n    site: 'datadoghq.com',\n    service: isForm ? 'care-ops-forms' : 'care-ops-frontend',\n    version: versions.frontend,\n    useSecureSessionCookie: true,\n    useCrossSiteSessionCookie: true,\n    allowedTracingUrls: [window.origin],\n    trackLongTasks: true,\n    trackResources: true,\n    trackUserInteractions: true,\n    defaultPrivacyLevel: 'allow',\n    enableExperimentalFeatures: ['clickmap'],\n    startSessionReplayRecordingManually: !isForm,\n    sessionReplaySampleRate: 100,\n    beforeSend(event, context) {\n      // Add header/response context to api errors\n      if (event.type === 'resource' && event.resource.type === 'fetch') {\n        if (get(context, 'response.status') >= 400) {\n          extend(event.context, { context });\n        }\n      }\n    },\n  });\n}\n\nfunction setUser(attrs) {\n  if (!ddInitialized) return;\n  datadogRum.setUser(attrs);\n  datadogRum.startSessionReplayRecording();\n}\n\nfunction addError(error) {\n  if (!ddInitialized) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n    return;\n  }\n  datadogRum.addError(error);\n}\n\nasync function logResponse(url, options, response) {\n  if (!ddInitialized) return;\n\n  response = response.clone();\n\n  const contentType = String(response.headers.get('Content-Type'));\n  const responseHeaders = Object.fromEntries(response.headers);\n  const responseBody = contentType.includes('json') ? await response.json() : await response.text();\n\n  datadogLogs.logger.info(`Response status ${ response.status }`, {\n    url,\n    options,\n    status: response.status,\n    responseHeaders,\n    responseBody,\n  });\n}\n\nfunction initDataDog({ isForm }) {\n  // NOTE: Remove when developing and testing Datadog\n  if (!_PRODUCTION_) return;\n  initLogs({ isForm });\n  initRum({ isForm });\n  ddInitialized = true;\n}\n\nexport {\n  initDataDog,\n  setUser,\n  addError,\n  logResponse,\n};\n","export default function getRootRoute() {\n  return location.pathname.substring(1).split('/').shift();\n}\n","import 'core-js/modules/web.dom-exception.stack';\nimport 'core-js/modules/web.structured-clone';\nimport { Workbox } from 'workbox-window';\n\nimport { fetchConfig, versions, appConfig } from './config';\nimport { initDataDog } from './datadog';\n\nimport getRootRoute from 'js/utils/root-route';\n\nif (_PRODUCTION_ && 'serviceWorker' in navigator) {\n  const wb = new Workbox('/sw.js');\n\n  wb.register();\n}\n\nfunction startOutreach() {\n  import('./outreach/index')\n    .then(({ startOutreachApp }) => {\n      startOutreachApp();\n    });\n}\n\nfunction startForm() {\n  import('./formapp')\n    .then(({ startFormApp }) => {\n      startFormApp();\n    });\n}\n\nfunction start() {\n  import('./app')\n    .then(({ startApp }) => {\n      startApp();\n    });\n}\n\nfunction startFormService() {\n  import('./formservice')\n    .then(({ startFormServiceApp }) => {\n      startFormServiceApp();\n    });\n}\n\nfunction startAuth() {\n  import('./auth')\n    .then(({ auth }) => {\n      auth(start);\n    });\n}\n\nfunction startApps({ isForm, isOutreach }) {\n  if (isOutreach) {\n    startOutreach();\n    return;\n  }\n\n  if (isForm) {\n    startForm();\n    return;\n  }\n\n  startAuth();\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const rootRoute = getRootRoute();\n  const isFormService = rootRoute === 'formservice';\n\n  if (isFormService) {\n    startFormService();\n    return;\n  }\n\n  const isForm = rootRoute === 'formapp';\n  const isOutreach = rootRoute === 'outreach';\n\n  if (_TEST_) {\n    versions.frontend = 'cypress';\n    appConfig.name = 'Cypress Clinic';\n    appConfig.cypress = 'cypress';\n    appConfig.ws = 'ws://cypress-websocket/ws';\n\n    if (location.pathname === '/logout') return;\n\n    startApps({ isForm, isOutreach });\n    return;\n  }\n\n  fetchConfig(() => {\n    initDataDog({ isForm });\n\n    startApps({ isForm, isOutreach });\n  });\n});\n"],"file":"20240930-index-C2PG_n-y.js"}